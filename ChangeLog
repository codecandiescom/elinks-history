Fri Oct 10 20:32:27 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Also show a message if the search hits the top.  

Fri Oct 10 19:55:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug where '^.' matches every character, not only the first in
	a line.  

Fri Oct 10 19:49:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Sync is_in_range_regex to get_searched_regex.  

Thu Oct  9 16:12:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* AUTHORS:

	Cristiano Guadagnino and criguada@libero.it are the same physical
	entity.  

Thu Oct  9 15:49:17 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes in order to please the Accademia della
	Crusca.  

Thu Oct  9 12:27:12 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated, unfuzzied some older bits. Have to keep
	some jump in front of Jonas.  

Thu Oct  9 10:36:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Add comments.  

Thu Oct  9 10:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation micro update.  

Thu Oct  9 10:09:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Thu Oct  9 09:55:02 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update, 77.41% done 

Thu Oct  9 09:49:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, html/parser.c:

	Add "meta" link display option to struct document_options so
	changing it will automagically rerender the page.  

Thu Oct  9 09:41:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct  9 09:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Reverse links are now printed (reported by Peter Gervai), html link
	display format was improved.  

Thu Oct  9 09:09:59 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Do not call trim_chars() if string has zero length, it prevents
	segfault reported by Stephane Chazelas, when calling add_bookmark()
	with a read-only empty string in do_add_folder().  

Thu Oct  9 05:57:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/msgbox.c:

	Deinlining msg_text_do. With inline elinks segfaults on Cygwin.  

Thu Oct  9 05:54:39 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/: os_dep.h, win32.c:

	When Cygwin is treated as UNIX cursor is visible. Before it wasn't.  

Thu Oct  9 05:51:21 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Enabled 256 colors.  

Wed Oct  8 21:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Don't send Cache-Control: reload but Cache-Control: no-cache for
	NC_RELOAD, the Radim's request contained a mistake.  

Wed Oct  8 17:06:47 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 17:01:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove dot from confdir caption.  

Wed Oct  8 15:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/stub.c:

	Fix elinks_memmove(), cases where n == 0 or src == dst were not
	handled correctly. May be reported by Stephane CHAZELAS ;) 

Wed Oct  8 14:51:49 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 13:30:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2doc:

	Minor simplification needed to make the script run on FreeBSD.  

Wed Oct  8 13:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Updated to reflect the current state of options.  

Wed Oct  8 13:07:30 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Oct  8 12:59:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup and optimization of last patch, now truncated url ends with
	three dots.  

Wed Oct  8 12:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Truncate very long urls in download progress dialog, it prevents
	progress info to be hidden in such a case.  

Wed Oct  8 12:26:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make ui.startup_goto_dialog by default enabled. This is probably
	much easier for the newbies.  

Wed Oct  8 11:08:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Add header .. fix typo .. add note.  

Wed Oct  8 10:45:31 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	More ideas.  

Wed Oct  8 07:49:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/hierbox.c:

	Select the parent item, if there is one, when '[' is pressed on a
	leaf item or collapsed folder in a listbox.  
	
	Warning: Excessive indentation and roundabout code. It took me ages 
	to figure how to select an arbitrary listbox item; we need a better
	way.  

Tue Oct  7 23:24:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some comments about configuration and tidyup of the example.  

Tue Oct  7 22:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Added vim: textwidth modeliner .. Lots of reformatting .. Added
	comment about availability .. A few type/grammar fixes.  

Tue Oct  7 22:28:46 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	Some ideas (as is) that may be bad ;).  

Tue Oct  7 22:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A bit hackish fix so that the "Search hit bottom" msg_box is not
	shown when the search string is not found.  

Tue Oct  7 20:42:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Some rant about the state of the implementation (AFAIK, that is;
	please write up on that) and especially the expected availability
	(my opinion on that).  

Tue Oct  7 20:30:47 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated vinnui contact email addy.  

Tue Oct  7 20:21:03 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Typo/grammar fixes.  

Tue Oct  7 20:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Tiny whitespace fix.  

Tue Oct  7 18:56:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: color-model.txt, configure.txt:

	Add CVS Id tag and TODOs.  

Tue Oct  7 18:51:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some thoughts/excerpts/links about color models 

Tue Oct  7 17:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	s/links-current/elinks-current/ 

Tue Oct  7 16:49:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Allocate 9 widgets .. fixes spurious segfaults I was having.  

Tue Oct  7 14:54:58 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Tue Oct  7 12:04:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Show a 'Search hit bottom, continuing at top.' notice to the user
	when the search wraps to the start of the document.  

Tue Oct  7 11:59:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Fixed case insensitivity reversed after Jonas' cleanups.  

Tue Oct  7 09:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Fix two potential memleaks, regfree() should be called before
	return. Code preparation to handle regexp errors messages, but we
	need to pass term, or to display messages in calling functions.  

Tue Oct  7 08:43:26 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Mon Oct  6 23:35:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Oops .. commiting late and uncompiled code is bad.  

Mon Oct  6 23:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Cleanup.  

Mon Oct  6 21:52:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Add case sensitivity radiogroup to the search dialog.  

Mon Oct  6 21:36:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed sorting error (folders after regular options) introduced few
	revs ago by me.  

Mon Oct  6 21:35:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, viewer/text/search.c:

	Introduced document.browse.search.case, controlling case sensitivity
	of the searches (by default off, mimicking the current behaviour).
	Hold me back while the damage done on the searching code is actually
	reversible.  

Mon Oct  6 20:58:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Remove some cruft left from the removal of view_state.view 
	(src/sched/session.c:1.168->1.169).  

Mon Oct  6 20:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	KEEP OPTIONS IN ALPHABETICAL ORDER. ;-) 

Mon Oct  6 19:38:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Wishful dreams of optimization of the string searches.  

Mon Oct  6 19:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Try to be more consistent in enumeration lists in the description -
	always use /^\d (is|means|for)/. Inspired by fabio.  

Mon Oct  6 18:49:41 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/options.c, src/dialogs/info.c, src/sched/session.c:

	s/url/URL/ and resynced .pos.  

Mon Oct  6 18:05:03 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Mon Oct  6 00:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	globhist/dialogs.c, protocol/protocol.c, protocol/user.c,
	sched/download.c, viewer/text/form.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Always use OK label for message boxes with only one choice. Cancel
	is not appropriated since no action is cancelled by pressing the
	button, a better one can be Close, but most dialogs are using OK
	already. It makes UI more coherent.  

Sun Oct  5 23:19:27 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sun Oct  5 22:42:08 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Error dialog button is now OK instead of Cancel, it makes more sense
	and is a more common label for this kind of box.  

Sun Oct  5 21:33:33 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix crash which showed then pressing 'n' after the searching pattern
	has cleared.  

Sun Oct  5 20:47:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	Compress the search type selector to one line.  

Sun Oct  5 20:18:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Only display codepage info if @frame is not NULL. Catched by Miciah.  

Sun Oct  5 20:13:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, viewer/text/search.c, viewer/text/search.h:

	Add search history file support.  

Sun Oct  5 20:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Added TODO about checkboxes on one line.  

Sun Oct  5 20:03:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	load_input_history(): Rename fp -> file, url -> line.  

Sun Oct  5 19:55:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: checkbox.c, checkbox.h:

	Don't export dlg_format_checkbox().  

Sun Oct  5 19:55:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c:

	Move input history file loading and saving.  

Sun Oct  5 19:53:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Dirty stuff coming. Let the user choose search type (normal, regex,
	...) in the search dialog. Unfortunately I had to clone
	input_field() & co in order to do this :-(.  

Sun Oct  5 19:44:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/urlhist.c:

	Split url history load and save functions into a generic part and
	...  

Sun Oct  5 19:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Reindent loop innards in select method.  

Sun Oct  5 18:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	assertm() without message? Converted to assert().  

Sun Oct  5 16:36:44 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug, where a regex matches string of length 0 e.g. '.*'.  

Sun Oct  5 16:11:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Restrict regex so that '.' doesn't match a newline.  

Sun Oct  5 16:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Sun Oct  5 15:49:26 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	kuser is random hacker and implemented regex searches.  

Sun Oct  5 15:48:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Make it possible to search empty string - it just cancels the
	previous search, effectively unhighlighting it.  

Sun Oct  5 15:40:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Include <sys/types.h> before <regex.h> to make off_t defined on
	FreeBSD.  

Sun Oct  5 15:09:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Removed nonsensical inlinization of display_field_(_pass)().  

Sun Oct  5 14:07:10 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, SITES:

	Update SITES - weed out out-of-date URIs etc. Patch by Frédéric L.
	W. Meunier <0@pervalidus.tk>.  

Sun Oct  5 14:05:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, sched/session.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Remove view_state.view, it is useless now - nothing uses it anymore
	(by mikulas, from 0.99pre9).  

Sun Oct  5 13:58:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 3: look_for_link. Splitting complete.  

Sun Oct  5 13:55:30 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 2: look_for_tag.  

Sun Oct  5 13:37:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 1: look_for_map.  

Sun Oct  5 13:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Update URIs ... no need to mention how to request features or report
	bugs twice.  

Sun Oct  5 13:16:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Commented out some strange frameset test in request_frame() (by
	mikulas, from 0.99pre9).  

Sun Oct  5 12:54:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Insert space between codepage string and notice in parentheses.  

Sun Oct  5 12:54:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	In current_frame(), take @fd from ses->screen, not
	cur_loc(ses)->vs.view (by mikulas; from 0.99pre9).  

Sun Oct  5 12:48:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use @frame instead of @location->vs.view (by mikulas, from
	0.99pre9).  

Sun Oct  5 12:40:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed some ancient linksherited commented out stuff from
	request_frame(). Even Mikulas removed it in 0.99pre9 ;-).  

Sun Oct  5 12:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/os_depx.h, terminal/kbd.c:

	Workaround broken cfmakeraw() on AIX (by mikulas, from 0.99pre9).  

Sun Oct  5 11:34:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	DEBUG_CACHE cleanups - @f -> @frag, @e -> @entry, @c -> @comment.  

Sun Oct  5 11:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	Macroize dump_frag*(), merge dump_all_frag() and dump_frags(),
	change fprintf()s to debug()s. Hope zas will kill me fast and won't
	let me suffer.  

Sun Oct  5 05:26:53 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Removed ncurses-devel from BuildRequires 

Sun Oct  5 04:44:38 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Spelling fixes.  

Sat Oct  4 23:16:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	The manpages has been moved to the man/ dir already.  

Sat Oct  4 22:31:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug with regex searching.  

Sat Oct  4 22:21:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/search.c,
	viewer/text/search.h:

	Moved search dialog functions from dialogs/menu.* to
	viewer/text/search.*.  

Sat Oct  4 22:19:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/urlhist.h:

	Make config/urlhist.h standalone - it depends on bfu/inphist.h so
	include it inside.  

Sat Oct  4 21:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c:

	Make usage of tabindex optional (document.browse.links.use_tabindex)
	.. on by default like the current behaviour.  

Sat Oct  4 21:40:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, viewer/text/search.c:

	Add extended regular expressions. And move a wrong #ifdef/#endif.  

Sat Oct  4 21:19:39 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Change the comment of the regex option if disabled.  

Sat Oct  4 21:15:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Make regex searching depend on HAVE_REGEX_H.  

Sat Oct  4 21:03:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* acconfig.h, configure.in:

	Add test for regex.h and regex_t to configure.  

Sat Oct  4 20:56:04 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/README:

	Spelling/grammar fixes. Huh.  

Sat Oct  4 20:50:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Corrected scripting/ note.  

Sat Oct  4 20:43:02 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added regex searches.  

Sat Oct  4 20:42:40 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added 256 colors support.  

Sat Oct  4 20:33:02 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @get_searched_regex and use it. Regex searching is useable ;) 

Sat Oct  4 20:24:54 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @is_in_range_regex and use.  

Sat Oct  4 20:19:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Add options for regular expressions searching.  

Sat Oct  4 20:03:11 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@get_searched_plain in preparation of regex searching. Also removing
	some unneeded variables.  

Sat Oct  4 19:53:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@is_in_range_plain in preparation of regex searching.  

Sat Oct  4 18:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Add TODO about using color_flags instead of color_type.  

Sat Oct  4 18:26:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a off by one error, that prevented the last character to match.  

Sat Oct  4 18:08:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, viewer/dump/dump.c:

	Introduce COLOR_MODE_DUMP so dump_pos does not need to be exported.  

Sat Oct  4 14:01:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Trivial whitespace and comment cleanups.  

Sat Oct  4 14:00:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Use int_(lower|upper)_bound.  

Sat Oct  4 13:25:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Trash last patch and provide proper fix of was_li usage to handle
	<li><li> correctly.  

Sat Oct  4 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use was_li again but put the control in html_li(). <li><li> is still
	broken but any following <li> will be rendered correctly.  

Sat Oct  4 12:46:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Tidyup.  

Sat Oct  4 12:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Only do table cell ``offset´´ fix up in 256 color builds. It is a
	bad hack.  

Sat Oct  4 11:37:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Send Pragma: reload if cache_mode is >= NC_RELOAD. Idea by Radim
	Kolar <hsn@cybermail.net>.  

Sat Oct  4 08:59:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	home can be NULL.  

Sat Oct  4 01:58:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	box_sel_move(): Use local box_context variable instead of allocating
	one.  

Sat Oct  4 01:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/options.c:

	Highlight marked listbox items in addition to putting asterisks next
	to them. Fixes bug 137.  

Fri Oct  3 18:31:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	``Cache'' the color type and mode so they can be used as fallback
	when part->document is NULL. Fixes some ugly stains on google and
	freshmeat.  

Fri Oct  3 18:28:01 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call to gettext into test_confdir and use N_ to mark the
	messages instead. inspired by fonseca ;-) 

Fri Oct  3 17:47:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: lowlevel/home.c, config/options.c:

	If -confdir option or ELINKS_CONFDIR begin with a dir_sep treat them
	as absolute paths.  

Fri Oct  3 17:36:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, lowlevel/home.c:

	Add commandline option '-confdir'.  

Fri Oct  3 17:12:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove no longer needed envconfdir.  

Fri Oct  3 17:10:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Test if path is valid.  

Fri Oct  3 17:06:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Use a 'else' and remove goto.  

Fri Oct  3 17:03:32 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add error_message to test_confdir and show it on failure.  
	
	Also add a missing NULL to straconcat.  

Fri Oct  3 16:45:26 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move building of the confdir into test_confdir.  

Fri Oct  3 16:28:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 16:25:41 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move one strip_trailing_dir_sep to test_confdir.  

Fri Oct  3 16:18:23 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	elinks_home should be home_elinks in this call.  

Fri Oct  3 16:15:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change the behaviour of ELINKS_CONFDIR, so that "/elinks" is not
	appended and elinks will try to create the dir specified by
	ELINKS_CONFDIR.  

Fri Oct  3 15:57:37 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 15:44:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove mem_free(home) calls and use 'goto end;'.  

Fri Oct  3 15:32:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call elinks_dirname(path_to_exe) to initialization of home.  

Fri Oct  3 15:17:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add strip_trailing_dir_sep(unsigned char *path) and use it.  

Fri Oct  3 13:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	The change hooks should never initialize the map .. we do that only
	when needed.  

Fri Oct  3 12:50:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Only initialize the mimetypes map when requested for a MIME type
	mapping.  

Fri Oct  3 12:35:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	init_mimetypes(): Split out map initialization to
	init_mimetypes_map().  

Fri Oct  3 12:26:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Only initialize the map when a user actually requests a mailcap mime
	handler. This should reduce the startup time.  

Fri Oct  3 12:05:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Split map initialization into init_mailcap_map().  

Fri Oct  3 11:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Use mem_calloc() when allocating the mime_handler.  

Fri Oct  3 11:51:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	get_mime_handler_mailcap(): Split out the mailcap_hash lookup to
	get_mailcap_entry().  

Fri Oct  3 11:44:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Test if mailcap is enabled each time it is called.  

Fri Oct  3 11:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Whitespace fix.  

Fri Oct  3 11:25:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Improve comments.  

Thu Oct  2 23:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix cleanup.  

Thu Oct  2 23:51:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Minor cleanup and macrofy color adding.  

Thu Oct  2 23:36:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char_color(): Introduced as a fast and specialized alternative
	to add_format_to_string(). It could maybe even be considered for use
	by 16 color mode.  

Thu Oct  2 23:33:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix yet another one of my off by oners. :( 

Thu Oct  2 22:51:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Expand the comment with info from discussion on #elinks.  

Thu Oct  2 22:40:56 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Added comment.  

Thu Oct  2 22:25:58 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Commented out LI related stuff. Fixed bug 208.  

Thu Oct  2 22:08:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Spec polished.  

Thu Oct  2 21:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Provide a color_mode_info fallback when 256 color are not compiled
	in.  

Thu Oct  2 21:28:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Make COLOR_MODE_256 visible even when 256 color support is not
	enabled. As fabiob says never trust the users.  

Thu Oct  2 20:49:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/kbdbind.c:

	Remove unneeded header.  

Thu Oct  2 20:13:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of the char data.  

Thu Oct  2 17:28:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use white not purple as fallback.  

Thu Oct  2 17:27:37 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Whitespace fix.  

Thu Oct  2 17:21:01 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Oct  2 17:16:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix comment.  

Thu Oct  2 17:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h, screen.c:

	Update screen_char->color[] to have 2 chars in a 256 color build.  
	Add add_char256() and 256 color mode loop to redraw_screen().  

Thu Oct  2 17:12:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make it possible to choose 256 color mode.  

Thu Oct  2 17:10:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add 256 color mode info and setting.  

Thu Oct  2 17:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, acconfig.h:

	Add configuration of 256 color support.  

Thu Oct  2 16:42:14 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Simplify loop.  

Thu Oct  2 16:37:06 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/util/conv.h:

	Typo fix in comment.  

Thu Oct  2 16:25:54 2003  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Free u if needed at function end only, reducing code redundancy,
	variables declarations were moved near usage, useless return were
	removed.  

Thu Oct  2 16:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move add_cursor_move_to_string().  

Thu Oct  2 15:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/cache.c, document/html/renderer.c:

	Use whole instead of less significant u.  

Thu Oct  2 15:37:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix off by one error. ;P 

Thu Oct  2 15:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Obsolete commented out code was removed.  

Thu Oct  2 15:18:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elusive/renderer/text/renderer.c, terminal/color.c,
	terminal/draw.c, terminal/draw.h, terminal/screen.c:

	Make screen_char->color an array. ELusives unmaintained code is a
	PITA.  

Thu Oct  2 15:02:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	No need for add_chars16() so removed.  

Thu Oct  2 14:58:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Macrofy add_chars() .. Although it is a bit ugly this way we can
	reduce code dublication I hope.  

Thu Oct  2 14:36:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Functions were provided to ease cache debugging (disabled by
	default).  

Thu Oct  2 14:05:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Use trigger_event_name().  

Thu Oct  2 14:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	enlarge() is now an inlined function instead of a macro.  

Thu Oct  2 13:38:28 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: main.c, dialogs/menu.c:

	Use trigger_event_name where appropriate.  

Thu Oct  2 13:35:18 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/: event.c, event.h:

	Add trigger_event_name(unsigned char *name, ...) 

Thu Oct  2 13:24:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* doc/events.txt:

	Add description of dialog-lua-console and free-history to
	doc/events.txt 

Thu Oct  2 12:54:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: viewer/text/view.c, scripting/lua/core.c,
	scripting/lua/core.h, scripting/lua/hooks.c:

	Use event system for dialog_lua_console.  

Thu Oct  2 12:47:15 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: dialogs/menu.c, scripting/lua/core.c, scripting/lua/core.h,
	scripting/lua/hooks.c:

	Use event system for free_lua_console_history.  

Thu Oct  2 12:29:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/core.c:

	Compile fix because of wrong pointer type.  

Thu Oct  2 12:16:04 2003  Karsten Schölzel <kuser@gmx.de>:

	* contrib/lua/bm.lua, contrib/lua/config.lua,
	contrib/lua/hooks.lua.in, contrib/lua/remote.lua,
	src/scripting/lua/core.c:

	Make elinks_home available for Lua and use it.  

Thu Oct  2 11:09:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/: core.c, core.h:

	Move run_lua_func near l_bind_key and make it static.  

Thu Oct  2 10:46:22 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/kbdbind.c, config/kbdbind.h, scripting/lua/core.c,
	scripting/lua/core.h, viewer/text/view.c:

	Use event calls to provide keybinding functionality for scripting
	backends.  

Thu Oct  2 08:43:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix bold attribute detection by using ch->color again.  

Thu Oct  2 05:53:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	- Polish translation update 

Thu Oct  2 00:07:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Compile fix. Hmm time to sign off ;) 

Thu Oct  2 00:06:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Wrap color comparison and copying in macros.  

Wed Oct  1 23:48:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Wed Oct  1 23:24:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup and a small "experimental" simplification.  

Wed Oct  1 23:12:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/renderer.c,
	terminal/color.c, terminal/color.h, terminal/screen.c:

	Move the underline color enhancement to set_term_color() and out of
	the critical screen drawing loop so it can be simplified. This is
	done using a new COLOR_ENHANCE type. Underlining is now part of the
	document options.  

Wed Oct  1 22:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Alphabetize #includes.  

Wed Oct  1 22:18:35 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Bug 86 is now fixed, nothing to do ifno fragment in cache entry.  

Wed Oct  1 20:02:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix segfault when trying to /. openoffice.org's 1.1 feature page.  

Wed Oct  1 18:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed alignment of a condition.  

Wed Oct  1 17:39:57 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Title and url are now sanitized before adding or modifying a
	bookmark, starting/ending spaces are removed, and bad chars are
	repplaced with spaces in title, and causes error if in url.  

Wed Oct  1 17:16:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, util/conv.h, util/string.c, util/string.h:

	trim_chars() was moved from string.c to conv.h, since this function
	modifies strings.  

Wed Oct  1 16:38:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/hooks.c:

	Use evhook_use_params() to silence compiler warnings, uncommented
	fetching of @ses from @va even if unused.  

Wed Oct  1 16:37:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Introduced evhook_use_params(), universal usage enforcer of all
	evhook parameters ;-). Idea by kuser and jonas.  

Wed Oct  1 15:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix my reckless programming in previous patch. We need to va_arg()
	ses but still silence any compiler warnings.  

Wed Oct  1 15:09:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/Makefile.am:

	Add palette.inc to list of files.  

Wed Oct  1 15:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/configure.txt:

	Fix minor typos and add info about string magic.  

Wed Oct  1 14:52:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Wrap unused event parameters in #if 0 #endif 

Wed Oct  1 14:52:44 2003  Laurent Monin <zas@norz.org>:

	* doc/configure.txt:

	Descriptions of debug and fastmem configure options were added (idea
	by Jonas). Feel free to complete and fix.  

Wed Oct  1 14:19:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Fix add_format_to_string.  There must be `width + 1' instead of
	`newlength´ as argument to vsnprintf because the size attribute of
	vsnprintf includes the trailing null, but the return value doesn't.  
	Patch by Karsten Schölzel.  

Wed Oct  1 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.h, guile/hooks.c, lua/hooks.c:

	Introduce NULL_SCRIPTING_HOOK ..  

Wed Oct  1 10:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.c,
	scripting/scripting.h, scripting/guile/hooks.c,
	scripting/lua/hooks.c:

	Add a data pointer to event_handler and scripting_hook, which can be
	set through register_event_hook to save a hook specific data
	pointer. It is especially useful for binding keys from scripting
	backends, e.g. if you register one callback to two different events,
	you can distinguish both events with the data pointer, if you set
	them to different values.  
	
	This patch and the 3 previous by Karsten Schölzel.  

Wed Oct  1 10:26:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Move libscripting before scripting backends.  

Wed Oct  1 10:25:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix wrong variable name.  

Wed Oct  1 10:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Return enum evnhook_tatus.  

Wed Oct  1 00:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Hack of the day: Repaint the link line background when
	use_document_colours = 2. Might need some fine tuning.  

Wed Oct  1 00:35:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix blackspace.  

Tue Sep 30 23:49:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Add Guile scripting and HTML meta refresh ..  

Tue Sep 30 23:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	Missing update of pld-linux.org for links rpms, drop
	elinks.pld.org.pl and point to the community page for mailinglist
	info.  

Tue Sep 30 23:18:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Add toggle-document-colors ...  

Tue Sep 30 23:15:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/completion.tcsh:

	Painfully out of date so better remove it.  

Tue Sep 30 16:31:51 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po were resynced.  

Tue Sep 30 16:22:06 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fix (missing \n).  

Tue Sep 30 11:49:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add missing #include and comments.  

Tue Sep 30 11:47:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify things to how they was before I unrolled the code array.  

Tue Sep 30 08:43:23 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Fix brackets escaping (with-gnutls and with-openssl configure
	options).  

Tue Sep 30 00:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Checkbox the color mode choosing.  

Tue Sep 30 00:17:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/parser.c,
	document/html/renderer.c, viewer/dump/dump.c, viewer/text/link.c:

	struct document_options: Rename @col to @color_mode.  

Tue Sep 30 00:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes (part two).  

Mon Sep 29 23:51:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes + fix #include.  

Mon Sep 29 23:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Store the color mode in the screen drivers.  

Mon Sep 29 23:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Make the terminal._template_.colors option hold the color mode.  

Mon Sep 29 23:36:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Cleanup.  

Mon Sep 29 23:32:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Factor out the looping into add_chars16() + rename
	print_char() to add_char16().  

Mon Sep 29 23:09:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.h:

	Fix comment.  

Mon Sep 29 23:07:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Introducing struct color_mode_info and use the color mode to control
	the blending.  Finally rename find_nearest_color() to get_color().  

Mon Sep 29 22:28:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add 256 color mode to enum and move out 16 color mode setting to
	seperate function.  

Mon Sep 29 22:13:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	set_term_color(): Take color mode as an argument.  

Mon Sep 29 21:15:45 2003  Laurent Monin <zas@norz.org>:

	* src/util/version.c:

	get_dyn_full_version() was fixed. In some cases, features line ended
	with a comma.  

Mon Sep 29 20:45:08 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/ssl.c:

	Gnutls needs extra options to talk to https://login.yahoo.com, this
	patch should fix it. Patch by Zardoz.  

Mon Sep 29 17:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops @name is shadows by my wrong merging of last patch .. not good
	so fix it.  

Mon Sep 29 16:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Update the event hash if @events got relocated. Patch by kuser.  

Mon Sep 29 14:18:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Moved PUTC declaration into the llop.  

Mon Sep 29 14:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	@e -> @translit in convert_string().  

Sun Sep 28 23:44:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Minor optimization to only do two multiplications.  

Sun Sep 28 23:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Restyle "if(" code snippet. Shame on me.  

Sun Sep 28 23:31:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: error.c, error.h:

	Prevent cancellation of one assertion by another, first assertion
	failure triggers first if_assert_failed met, which reset
	assert_failed. This behavior makes legal assert(a); assert(b);
	if_assert_failed return;.  

Sun Sep 28 22:55:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Simplification of end_load().  

Sun Sep 28 22:38:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup in do_move().  

Sun Sep 28 22:29:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	select_menu_item(): Use menu_func. ;) 

Sun Sep 28 22:17:29 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Minor optimization: url is absolutely not null here. Patch by
	Witold.  

Sun Sep 28 22:12:38 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Open tab bug was fixed again ;). Reported and reintroduced by Jonas.  

Sun Sep 28 21:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix assertion failure reported by darix when downloading md5summer
	from http://fileforum.betanews.com.  

Sun Sep 28 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use granular allocation for dynamic menues.  

Sun Sep 28 19:55:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	"Eew" someone cried. Under normal circumstances the mere sight of
	such ill formed creatures would make any sane person want to give it
	all up, turn around and head back. But there was no way back. No
	sane way out of this one. Only forward one step at a time.  

Sun Sep 28 18:38:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Simplify 'No link selected' testing to see if the menu item list is
	empty 

Sun Sep 28 18:23:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	A missing obvious user of menu_func.  

Sun Sep 28 18:22:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, contrib/elinks.spec.in:

	RPM spec update by darix.  

Sun Sep 28 16:10:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Seems we can keep the goodies and eat it too (or how was that saying
	;) so clean away temporary variables since menu->data is passed (so
	no segfaulting like a few patches ago).  

Sun Sep 28 16:04:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Remove dublicate code by making select_(main)menu() wrap
	select_menu_item().  

Sun Sep 28 15:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Further simplify dejavu code in select_(main)menu().  

Sun Sep 28 15:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Reordering of declarations.  

Sun Sep 28 15:33:00 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use SET_MENU_ITEM() in add_to_menu().  

Sun Sep 28 15:16:39 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Got rid of a useless #else.  

Sun Sep 28 15:12:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Declarations were moved near variable use.  

Sun Sep 28 15:05:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup (logical operators at start of lines).  

Sun Sep 28 14:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	x?1:0 things were rewritten !!x.  

Sun Sep 28 14:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use SET_MENU_ITEM() when setting up select menus.  

Sun Sep 28 13:43:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/html/parser.c, viewer/text/link.c,
	viewer/text/view.c:

	Replace MENU_FUNC* with a typedef. Should it be made so the cast is
	(menu_func *)? 

Sun Sep 28 13:07:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Use INIT_MENU_ITEM() when defining NULL_MENU_ITEM 

Sun Sep 28 13:02:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use MENU_HEAD macro.  

Sun Sep 28 13:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup patch was reverted. It causes a weird segfault when opening
	new tab. Reported by Jonas.  

Sun Sep 28 12:09:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Small update by Witold.  

Sun Sep 28 00:13:16 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/bfu/dialog.c, src/bfu/listbox.c,
	src/bfu/menu.c, src/osdep/os_dep.c, src/sched/session.c,
	src/terminal/event.c, src/terminal/kbd.c, src/util/version.c,
	src/viewer/text/view.c:

	A configure option --disable-mouse was added. If used, it undefines
	USE_MOUSE which control compilation of mouse-related code. A bunch
	of #ifdef/#endif was spread among the code for that.  

Sat Sep 27 22:23:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	As the guile and lua backends no longer conflict with global
	function names, it should be possible for the user to select both
	backends at the same time. This patch removes logic from configure
	which blocked this.  --Karsten Schölzel 

Sat Sep 27 16:10:00 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Check what $RPM_BUILD_ROOT actually is before rm -rf'ing it.
	Suggested by darix. I wonder what darix actually experienced before
	suggesting this ;-).  

Sat Sep 27 15:26:31 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	(void *) 1 thing seems useless, i replaced it with NULL, please let
	me know if it has any impact.  

Sat Sep 27 15:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Tidyup.  

Sat Sep 27 15:17:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Tidyup.  

Sat Sep 27 14:03:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Tidyup.  

Sat Sep 27 13:56:19 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Old inactive code was removed. Cache info menu item is now displayed
	only in debug mode (as it needs more work).  

Sat Sep 27 13:47:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, viewer/text/view.c, viewer/text/vs.c:

	Wrap testing of whether a document has frames in
	document_has_frames() macro.  

Sat Sep 27 13:16:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Generalizing offsetof() in elinks.h was a bad idea - reverted. Mixed
	in is removal of ISSLASH() macro in favor of our own dir_sep().  

Sat Sep 27 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Move offsetof() macro definition to elinks.h 

Sat Sep 27 12:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove a debug() call that should not have been part of last patch.  

Sat Sep 27 12:01:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/html/renderer.c,
	viewer/dump/dump.c:

	init_document_options(): Clear the struct. This hopefully fixes the
	mess I created in the last couple of patches.  

Sat Sep 27 11:40:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, viewer/dump/dump.c:

	Rename mk_document_options() to init_document_options() and move
	more code shared by dump and text viewer to it. Doing memset() (in
	the light of zeroing out padding bytes, sorry I overlooked this) is
	on the TODO list but this causes problems that has to be fixed
	first.  

Sat Sep 27 11:27:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sat Sep 27 00:32:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Make boolean fields more visible and drop the bogus blame of @xw and
	@yw.  

Fri Sep 26 23:06:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Rearrange members of struct document_options so compare_opt() can be
	divided into a part compared using memcmp() and a part (from
	@framename) that need special or no comparing. This is very
	experimental but padding bytes should not be a problem since
	document_options are allocated via document allocation using
	mem_calloc()! 

Fri Sep 26 22:12:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	English style issues fixed in s-i-t-l dialog :-).  

Fri Sep 26 21:42:14 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6.CVS 

Fri Sep 26 21:39:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6 

Fri Sep 26 21:36:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fix http://lists.pld-linux.org/ - Host: header sending was broken if
	URL contained : and IPv6 support was compiled in. Patch by Jakub
	Bogusz and me.  

Fri Sep 26 21:18:05 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added nest elinks pool RPM binaries link (more up-to-date), as
	suggested by witekfl.  

Fri Sep 26 21:16:04 2003  Petr Baudis <pasky@ucw.cz>:

	* po/uk.po:

	Ukrainian translation update, patch by Dmitry.  

Fri Sep 26 21:13:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files resynced, Polish translation update (by witekfl).  

Fri Sep 26 21:07:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	Add generalization TODO item and reformat.  

Fri Sep 26 21:05:02 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Specify further in which cases should the macro initializers be used
	;-).  

Fri Sep 26 20:58:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Reverted zas' introduction of INIT_STON() and relatives. It is IMHO
	unnecessary complication and overhead for such a simple and fairly
	localized structure as strtonum is.  

Fri Sep 26 20:39:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Always propagate the event + removed useless increasing of length in
	call to memacpy().  

Fri Sep 26 19:59:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Output asterisks instead of ¤ in case of unknown unicode values.
	That character is not ASCII nor transliterated to proper terminal
	codepage.  

Fri Sep 26 19:57:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Always propagate the event.  

Fri Sep 26 19:05:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Some preachment about EHS_LAST and how shouldn't you use it.  

Fri Sep 26 18:32:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Fixed namespace pollution. You guys will never learn, will you? 

Fri Sep 26 18:28:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/ttime.h:

	Do not include config.h in a .h file! What was I *smoking*?? This
	fixes compilation w/ --enable-own-libc. You wouldn't guess, would
	you? ;-) 

Fri Sep 26 17:44:42 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about wrapping hard struct initializations was added.  

Fri Sep 26 17:35:44 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, config/kbdbind.c,
	document/html/parser.c, document/html/parser.h:

	Various hard initializations to macros conversion.  

Fri Sep 26 16:56:14 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	use *_MENU_ITEM macros.  

Fri Sep 26 15:50:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Strange english fix.  

Fri Sep 26 15:49:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Grammar fix.  

Fri Sep 26 14:00:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	Add TODO to EXTRA_DIST.  

Fri Sep 26 12:56:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Be a little smarter and pre allocate the last menu item by calling
	mem_align_alloc() with 'size + 2'.  

Fri Sep 26 12:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Print ¤¤¤¤¤ instead of &#24505;&#24213;&#20837;&#38272;. Unicode
	entities values are now handled up to 0xFFFFFFFF.  

Fri Sep 26 12:36:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Remove temporary workaround for tab completion bug fixed in last
	patch.  

Fri Sep 26 12:33:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Fix ancient bug by reallocationg items before the last memset(). Zas
	discovered this yesterday. It was exposed by the move to using
	mem_align_alloc() with more than 256 items in gotohist.  

Thu Sep 25 23:35:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Bug found...  

Thu Sep 25 21:47:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add some probably useless MRU mechanism and fix some whitespasms.  

Thu Sep 25 21:08:17 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Use intermediate variables to clarify code.  

Thu Sep 25 20:52:31 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Use widget and widget_data intermediate variables to clarify code.  

Thu Sep 25 20:13:19 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/tables.c, globhist/dialogs.c:

	Ending spaces fix.  

Thu Sep 25 19:54:39 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	struct event -> struct term_event. No more.  

Thu Sep 25 19:50:40 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, form.h, link.c, link.h, textarea.c,
	view.c, view.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:45:49 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: event.c, kbd.c, terminal.c, window.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:44:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Fix get-proxy hook bug from last patch.  

Thu Sep 25 19:37:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, session.c, session.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:32:17 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/timer.c, osdep/os_dep.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:26:56 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:21:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/hierbox.c,
	dialogs/hierbox.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Correctly handle propagation in the get-proxy hook.  

Thu Sep 25 19:17:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inphist.c, listbox.c, menu.c:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 19:11:33 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/event.h, terminal/terminal.h, terminal/window.h,
	bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/widget.h:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 18:53:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Cleanup and make the get-proxy handler propagate the event when an
	error occurs.  

Thu Sep 25 18:44:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	For now only one comment by pasky but please feed more ideas to this
	file.  

Thu Sep 25 17:08:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	It is guile_scripting_backend instead of lua_scripting_backend! 

Thu Sep 25 16:56:06 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Ooops, forgot some and made an error, fixed.  

Thu Sep 25 16:43:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Make use of enum hotkey_state values instead of hardcoded integer
	values.  

Thu Sep 25 16:42:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Rearrange and reduce the number of variables passed to
	pre-format-html.  

Thu Sep 25 16:39:43 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	*MENU_ITEM macros are now used everywhere in this file.  

Thu Sep 25 16:25:29 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c:

	ignore_hotkey field was renamed hotkey_state and is now an enum.
	Macros were introduced to wrap struct menu item initializations.
	Transition partly done.  

Thu Sep 25 16:08:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Cleanup.  

Thu Sep 25 16:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Some forgotten str_event_code() calls was changed to just return
	EHS_* code.  

Thu Sep 25 16:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Next step in jonas' insane and untested scripting hacks. Minimize
	the number of variables passed to goto-url and follow-url events.  

Thu Sep 25 15:48:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_(goto|follow_url(): Be more strict and propagate the
	event if an error occurs. Only set @new_url if the hook function
	returns smt. valid.  

Thu Sep 25 15:25:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Explicitly use EHS_* and return EHS_NEXT without modifying.  

Thu Sep 25 14:59:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Bring the code back to look and work as the
	original one.  

Thu Sep 25 14:55:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Alphabetize #includes 

Thu Sep 25 14:29:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	Use an enum instead of an int for edit dialog type and remove
	obsolete BM_ in macros.  

Thu Sep 25 14:17:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Improve descriptions.  

Thu Sep 25 01:05:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Really really rename newurl to new_url in goto_url_with_hook().  

Thu Sep 25 00:50:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:46:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Rename variables and change hooks function for goto-url and
	follow-url to act like the original ones.  

Thu Sep 25 00:38:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	A few renames and changes to support the original scripting hook
	interface when handling goto-url and follow-url.  

Thu Sep 25 00:36:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Describe the scripting events in use.  

Tue Sep 23 20:30:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.c, scripting.h, guile/core.c,
	guile/core.h, lua/core.c, lua/core.h:

	Further backend the scripting subsystem by introducing struct
	scripting_backend. Only handles init/done calls and hook management.  

Tue Sep 23 19:25:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	libscripting.a is not a noinst_LTLIBRARIES so s/LT//. ;) 

Tue Sep 23 18:44:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, scripting/scripting.c, scripting/scripting.h:

	Introduce generic scripting setup and teardown functions that just
	call the backends.  

Tue Sep 23 15:03:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/Makefile.am:

	Deltize libscripting.a. *shudder* Sick from you, Jonas! ;-) 

Tue Sep 23 14:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.c:

	Attribute comment to me.  

Tue Sep 23 14:17:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Minor tidyup.  

Tue Sep 23 14:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h:

	Event hook handler is now covered by type event_hook.  

Tue Sep 23 14:03:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h,
	scripting/lua/hooks.c:

	Event hooks return {enum evhook_status}.  

Tue Sep 23 13:53:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Tiny regrouping.  

Tue Sep 23 08:40:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/scripting.c:

	Fix scripting hook registration. Most events don't exist so create
	them.  

Tue Sep 23 08:30:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Make the scripting goto_url_* functions work when no scripting hooks
	are registered.  

Tue Sep 23 07:36:11 2003  Laurent Monin <zas@norz.org>:

	* src/Makefile.am:

	Linking failure due to libscripting introduction was fixed.  

Tue Sep 23 00:47:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/: core.c, hooks.c, hooks.h:

	Use generic hook registration. (define untested-and-uncompiled true) 

Tue Sep 23 00:45:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/: core.c, hooks.c, hooks.h:

	Use generic hook registration.  

Tue Sep 23 00:45:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: Makefile.am, scripting.c, scripting.h:

	Add generic functionality for registering hooks.  

Tue Sep 23 00:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_pre_format_html(): Cleanup. Please test since I am not
	that big a lua extension user.  

Mon Sep 22 23:59:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_get_proxy(): Cleanup.  

Mon Sep 22 23:52:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	script_hook_follow_url(): Cleanup.  goto_url_w(): Always use @newurl
	but test if non NULL.  

Mon Sep 22 23:49:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): More streamlining.  

Mon Sep 22 23:34:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Always use @newurl and test if it is non NULL in
	goto_url_with_hook().  This greatly simplifies the lua
	script_hook_goto_url().  

Mon Sep 22 23:19:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_quit(): Cleanup.  

Mon Sep 22 23:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Oops missed one t.h.i.n.g to keep the flow intact although all these
	"" seems pretty pointless.  

Mon Sep 22 23:02:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Cleanup.  

Mon Sep 22 22:21:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix problem reported by David Gómez where openssl was disabled when
	calling configure with --without-gnutls.  

Mon Sep 22 22:00:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Note who to blame for the event system.  

Mon Sep 22 21:54:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h, main.c, scripting/guile/core.c,
	scripting/guile/core.h, scripting/guile/hooks.c,
	scripting/guile/hooks.h:

	Move guile hooks to the event system. --Karsten Schölzel 

Mon Sep 22 21:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, protocol/proxy.c:

	Use the event system to call the scripting hooks, calling
	set_event_id() to get rid of unnecessary event id lookups. --Karsten
	Schölzel 

Mon Sep 22 21:46:19 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	One byte memleak was fixed. Cleanup and optimization of
	shrink_dns_cache().  

Mon Sep 22 19:45:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.h:

	Safer macro definition for set_event_id().  

Mon Sep 22 18:41:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Remove useless #includes. Patch by kuser.  

Mon Sep 22 18:37:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.h:

	Introduces set_event_id(event, name) macro. --Karsten Schölzel 

Mon Sep 22 16:35:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Call done_event in terminate_all_subsystems as late as possible to
	make the event system usable in cleanup stage. --Karsten Schölzel 

Mon Sep 22 16:23:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add variable declaration needed by the last patch.  

Mon Sep 22 16:21:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Move out the known mime type strings to a structure that can be
	looped.  Use assertion and cleanup so we don't leak.  

Mon Sep 22 15:44:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	new_form(): Use one byte less when allocating the url.  

Mon Sep 22 15:39:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_err_msg(): Minor optimization and allocate one byte less.  

Mon Sep 22 15:31:11 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	One byte memleak was fixed.  

Mon Sep 22 15:25:24 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	More one-byte memleaks fixed. Please review this one carefully ;) 

Mon Sep 22 15:15:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	sizeof(struct frame_desc) bytes memleak was fixed.  

Mon Sep 22 15:10:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	One byte memleak fixed.  

Mon Sep 22 15:08:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Rename free_mimetype_entry() to done_... + allocate
	mimetype_entry->extension with the entry and save a few bytes.  

Mon Sep 22 15:06:49 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	One byte memory leak was fixed.  

Mon Sep 22 14:59:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	We already allocate mailcap_entry->command with the entry. Make it
	'official' and save a few bytes. ;) 

Mon Sep 22 14:59:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inphist.c, inphist.h:

	One byte memory leak was fixed.  

Mon Sep 22 14:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	1 byte is already reserved for cmd_buffer in struct
	ftp_connection_info, so no need to allocate it. I think there is
	some other places with the same minor issue (well, 1 byte memory
	leak per allocation), please help me to fix them.  

Mon Sep 22 14:22:35 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, http/date.c:

	Previous bug was cutnpasted to date.c, fixed. Small month2num()
	wrappers are now inlined.  

Mon Sep 22 14:14:37 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftpparse.c:

	A stupid bug introduced by month2num() patch was fixed. Now ftp
	should work as usual ;).  

Sun Sep 21 14:47:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inphist.c, globhist/dialogs.c,
	osdep/os_dep.c, sched/session.c, terminal/draw.c, terminal/tab.c,
	terminal/window.c, util/base64.c, util/error.c, util/hash.c,
	viewer/text/form.c, viewer/text/view.c:

	Trivial whitespace fixes.  

Sun Sep 21 14:13:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	More whitespace fixes.  

Sun Sep 21 14:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.h:

	Fix whitespace.  

Sun Sep 21 13:01:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	Comment about the need to pass lowercased strings to month2num() was
	added.  

Sun Sep 21 13:00:12 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/date.c, protocol/ftpparse.c, util/conv.c,
	util/conv.h:

	month2num() was introduced, and is now used in protocol/http/date.c
	and protocol/ftpparse.c.  

Sun Sep 21 12:35:25 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was even more optimized.  

Sun Sep 21 12:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month(): got rid of these useless break.  

Sun Sep 21 12:24:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was optimized.  

Sun Sep 21 12:02:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: date.c, date.h:

	char -> unsigned char, my_timegm() now takes a pointer to a struct
	tm as parameter.  

Sun Sep 21 11:24:48 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Cleanup and harmonisation: handle errors at end of functions.  

Sun Sep 21 11:08:11 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	l_current_url() code was simplified.  

Sun Sep 21 10:48:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep 21 00:15:27 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	I've got such associations: c - text/html spec - text/plain 
	
	but elinks recognize .spec as .c and display as html.  This patch
	"repair" it. In addition dot.in.middle.c like names should be
	handled correctly, too.  -- Witold Filipczyk tohu-bohu 
	<witekfl@poczta.gazeta.pl> 

Sun Sep 21 00:12:31 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Cleanup.  

Sat Sep 20 12:05:30 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	Compilation bug under Cygwin was fixed. Patch by Witold.  

Fri Sep 19 22:30:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add dummy shadow.text option. This was causing get_bfu_color() to
	fetch a non existing option. Reported by darix.  

Fri Sep 19 15:41:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	I am in a maze with passages all alike .. and this cut'n'paste error
	is haunting me.  

Fri Sep 19 15:37:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	invalid_event_id(): Test == EVENT_NONE last since last will not be
	used in current code, but it protects against bad thing if
	EVENT_NONE becomes > 0 for some reason as zas pointed out.  

Fri Sep 19 15:33:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops cut'n'paste error in last patch spotted by kuser.  

Fri Sep 19 15:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Rebounding cleanup.  

Fri Sep 19 14:43:43 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.c:

	Short lines were "compressed" a bit, make use of event variable name
	everywhere, make use of register attribute, cleanup,
	invalid_event_id() inlined function was added.  

Fri Sep 19 14:09:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use TERM_STRING() and friends for the underline sequences.  

Fri Sep 19 13:55:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce TERM_STRING() and add_term_string() to simplify the
	frame_seq handling.  

Fri Sep 19 13:48:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	This might be a bit abusive. Use mem_align_alloc() to cleanup link
	point setup.  

Fri Sep 19 13:14:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/Makefile.am, sched/event.c, sched/event.h:

	Shiny new event system by kuser .. spiced up with comments by pasky
	and me.  

Thu Sep 18 19:04:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Removed trailing newlines ;-).  

Thu Sep 18 13:07:11 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h,
	terminal/window.h, viewer/text/view.c:

	Mouse click detection was improved and fixed regarding variable-size
	tabs, get_tab_number_by_xpos() function was added.  

Thu Sep 18 12:33:10 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Distribute remaining spaces among all tabs, and draw last tab
	correctly. Issue reported by Miciah.  

Wed Sep 17 15:43:22 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Ooops, fix for stupid thing in last patch ;).  

Wed Sep 17 15:32:02 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Auth dialog was badly formatted. We now consider sticker text width
	before drawing it.  

Wed Sep 17 01:30:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	convert_string(): Fix potential leak.  

Wed Sep 17 01:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Purge mem_gralloc() and grmask(). IMHO the idea of aligned
	allocation much more straight forward than the ALLOC_GR ``oriented''
	so I hope this is ok.  Move ALLOC_GR and comment the alignment mask.  

Wed Sep 17 01:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Use mem_align_alloc().  

Wed Sep 17 00:02:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Use mem_align_alloc().  

Tue Sep 16 23:57:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	get_searched(): Use mem_align_alloc().  

Tue Sep 16 23:54:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	encode_multipart(): Use mem_align_alloc().  

Tue Sep 16 23:38:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	do_html_select(): Use mem_align_alloc().  

Tue Sep 16 23:33:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	add_chr(): Use mem_align_alloc().  

Tue Sep 16 23:27:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	do_tab_compl(): Use mem_align_alloc(). Never tried it before ..
	great feature! :) 

Tue Sep 16 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Use mem_align_alloc() for bad html mem. management.  

Tue Sep 16 18:25:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_frames(): Simplification.  

Tue Sep 16 18:11:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Add missing assertion handling.  

Tue Sep 16 18:08:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Rename: [HV]_LINE_X() -> [HV]_FRAME_POSITION() ... or should we
	static inline it all? 

Tue Sep 16 18:00:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup [HV]_LINE_X() macros to bug via an assertion instead of via
	the cruel *(unsigned char *)NULL.  

Tue Sep 16 14:58:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: hash.c, hash.h:

	Allocate hash and hash->hash in one time, X31 strhash() was
	optimized by unrolling the loop, some variables are now unsigned int
	instead of int, general cleanup.  

Tue Sep 16 00:04:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Slightly more elegant fix.  

Mon Sep 15 23:24:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix input field off by one bug.  

Mon Sep 15 22:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Minor code diet using memset() instead of for loops.  

Mon Sep 15 22:18:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Since item->l = w, int_bounds(rw, item->l, w) is is useless.  

Mon Sep 15 21:30:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Remove unused macros.  

Mon Sep 15 21:29:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Tidyup.  

Mon Sep 15 21:28:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Blast off xset_hchar() and use xset_hchars() instead. Less is more
	;) Finally abuse that xset_[hv]chars() are specialized for table
	border drawing so there's no need to pass the bgcolor (hint
	par_format.bgcolor) and the attribute.  

Mon Sep 15 21:25:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): Store [HV]_LINE_X() lookups in local variables
	and general cleanup.  

Mon Sep 15 21:23:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_[hv]line(): Cleanup, use BORDER_* enums, add asserts." 

Mon Sep 15 21:14:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Move static variables inside the user functions.  

Mon Sep 15 21:13:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	See? It's all an illusion.  

Mon Sep 15 21:11:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_vline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:11:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_hline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:10:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:08:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Assert @charslen.  

Mon Sep 15 21:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	display_table_frames(): Store table frame pointers in an array and
	allocate space in one snap.  

Mon Sep 15 20:57:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Propagate the _table_ arg all the way down the frame drawing macro
	hell. If you see any variables named 'term' it is an illusion ;) ...
	Hmm apparently some whitespace clashing that makes the patch
	slightly bigger.  

Mon Sep 15 20:50:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use macros to simplify the trivial code and make adding new term
	options easier.  

Mon Sep 15 20:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Bug fix: put_chars() asserts chars != NULL and put_chars_conv() call
	it with chars == NULL. Instead assert that charslen != 0.  

Mon Sep 15 20:45:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewy(): Cleanup (and a compile fix for free).  

Mon Sep 15 20:44:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewx(): Cleanup and variable renaming.  

Mon Sep 15 20:43:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Rename variables.  

Mon Sep 15 20:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	done_link_members(): Added. Free()s the link members.  

Mon Sep 15 20:40:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	set_link(): Cleanup.  

Mon Sep 15 20:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Add macro abstraction for clearing color.  

Mon Sep 15 20:32:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/renderer/text/renderer.c:

	Don't use INIT_SCREEN_CHAR().  

Mon Sep 15 20:30:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Purge INIT_SCREEN_CHAR().  

Mon Sep 15 20:29:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area(): Rewritten to not use INIT_SCREEN_CHAR().  

Mon Sep 15 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_text(): Use last char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:27:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix bad merging.  

Mon Sep 15 20:24:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Allocate an extra link_bg element to work on to avoid
	local variables.  

Mon Sep 15 20:23:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use first char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:22:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Use local variable instead of multiple POS().  

Mon Sep 15 20:19:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Doh! The patch monkey climped the wrong tree. Revert part of last
	patch. :( 

Mon Sep 15 20:17:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	set_hchars(): Abandon usage of INIT_SCREEN_CHAR().  

Mon Sep 15 20:17:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Don't use local variable for initialization but the
	last char.  

Mon Sep 15 20:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Wipeout SLEN().  

Mon Sep 15 16:59:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce a link state type and get_link_state(). It is called
	before doing any link handling (the old way) and takes care of
	free()ing old link variables etc.  This patch fixes
	test/tabindex.html which have been broken for a long time since the
	old code didn't take the #targets into account. Sorry for taking so 
	long to fix this.  

Mon Sep 15 14:23:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	No need to allocate one byte for nul char, l was renamed to loc.  

Mon Sep 15 14:15:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:11:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 14:09:20 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:06:19 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 13:54:01 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Use vs->url_len instead of strlen(vs->url).  

Mon Sep 15 13:40:32 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Field url_len from struct view_state was not used as it should be.
	Fixed.  

Sun Sep 14 03:03:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Add EMACS-style ^A, ^E, ^N, ^P, ^V, and Alt-V and Vi-style ^F and ^B 
	key bindings to listboxes.  

Sun Sep 14 02:15:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, uri.c, uri.h:

	Encode links in file: listings, and decode them when following a
	file: link.  This is slightly slower, uses slightly more memory, and
	required that I reënable the decode_uri_string function, but is more
	correct and robust.  

Sun Sep 14 01:04:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/: dump/dump.c, text/vs.c:

	Only mem_alloc and memset sizeof(struct view_state) + strlen(url), 
	not sizeof(struct view_state) + strlen(url) + 1: struct view_state
	has unsigned char url[1], so the extra space necessary for the null
	terminator is already there, included in the sizeof(struct
	view_state).  
	
	This fixes the bug whereby ELinks overflow memory when displaying a
	file of an unrecognised type. It also saves a byte(!) of memory when
	-dump is used.  

Sat Sep 13 23:23:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Starting ELinks with -no-home specified make ELinks die on entering
	a site with forms. The attached patch solves the problem with
	elinks_home being NULL. Patch by Karsten Schölzel.  

Sat Sep 13 21:32:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Move some variable declarations closer to where the variables are
	used.  

Sat Sep 13 21:25:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	loc_msg: Check the return value of ctime(). Use a constant instead
	of calling strlen() on the string returned by ctime(). Add comments.
	Bleh.  

Sat Sep 13 06:55:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/hierbox.c:

	One can now recursively collapse or expand a folder in a
	hierarchical listbox using '-', '_', or '[' (collapse) or '+', '=',
	or ']' (expand). This closes bug 37 (until pasky reverts the patch).  
	
	I used gotos because: 
	 - similar code elsewhere uses gotos (of course there are TODOs; 
	   in that code indicating a desire to eliminate those gotos...) 
	 - they make the code more efficient, shorter, and thus--IMO--easier
	 to read; 
	- they bug pasky and Jonas.  
	
	Zas will love me, pasky will hate me, and Jonas will be ticked until
	I remind him about ui.colors.color.tabs.loading.{text,background}.  

Sat Sep 13 05:03:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Mangling pattern those JavaScript URLs on allmusic.com.  

Sat Sep 13 04:58:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Typo fix.  

Sat Sep 13 04:57:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Smartprefixes for the Open Directory Project and Cambridge's
	dictionary.  

Sat Sep 13 04:50:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Allow lambdas for smartprefixes, and add three examples. I'm a bit
	proud of the CVSweb smartprefix, and less proud of the Debian
	package contents smartprefix and Gmane.org smartprefix. They all are
	a bit hackish, tho.  

Sat Sep 13 04:41:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	New dumb- and smartprefixes, and updated URL for the 'dict'
	smartprefix (the old URL still works, but as it forwards to the new
	URL, we might as well use the new URL in the first place).  

Sat Sep 13 00:51:56 2003  Laurent Monin <zas@norz.org>:

	* src/util/memory.c:

	Inline is a non sense here -> dropped.  

Sat Sep 13 00:32:32 2003  Laurent Monin <zas@norz.org>:

	* src/util/: stub.c, stub.h:

	Two headers were added to ease compilation with dietlibc.  

Sat Sep 13 00:30:48 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/loadmsgcat.c:

	Use of caddr_t type was dropped for simpler (void *) casts in
	loadmsgcat.c.  

Fri Sep 12 23:41:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	Ooops, off by one error ;).  

Fri Sep 12 23:37:16 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/location.c, viewer/text/vs.c, viewer/text/vs.h:

	A field url_len was added to struct view_state, and an assertion in
	copy_vs() now protects against bad things.  

Fri Sep 12 23:23:35 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	A note about an overflow risk was added in copy_vs().  

Fri Sep 12 22:49:57 2003  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/vs.h, sched/session.h:

	It seems safer to move struct view_state at end of struct frame,
	copy_vs() called from copy_location() let us think there s a risk to
	corrupt redirect_cnt.  

Fri Sep 12 22:22:24 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, download.h:

	Minor cleanup.  

Fri Sep 12 22:00:20 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some variables declarations were moved near their use.  

Fri Sep 12 21:46:46 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some code from download_window_function() was moved to new functions
	download_progress_bar() and download_progress_string().  

Fri Sep 12 21:40:33 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Fri Sep 12 21:14:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/download.c, util/error.h:

	Add a do_not_optimize_here_gcc_3_x() macro and use it instead of
	do_not_optimize_here_gcc_3_3() in tp_display(). This works around a
	bug that I experience with GCC 3.2.3-6 on Debian whereby ELinks 
	crashes when I tell it to display a file of an unknown file-type.  

Fri Sep 12 20:59:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Stupid Miciah forgot to commit src/config/options.c, which actually
	adds the ui.colors.color.tabs.loading.{text,background} options.
	Thanks, zas! No more black tabs.  

Fri Sep 12 18:51:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	New ui.colors.color.tabs.loading.{text,background} options: Colours
	for tabs that are loading in the background.  
	
	I have this vague memory of pasky telling to commit only small
	changes, passing larger patches by him before committing; or maybe
	it was all just a beautiful dream... I'm hoping just now that it was
	the latter.  

Fri Sep 12 15:15:05 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use int_max() instead ... ;) Thanks to Jonas.  

Fri Sep 12 12:56:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some stains do not appear anymore, thanks to Jonas. Minor
	optimizations by me.  

Fri Sep 12 10:48:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c,
	dialogs/document.c, dialogs/mime.c, elusive/parser/stack.h,
	elusive/parser/css/atrule.c, elusive/parser/css/parser.c,
	elusive/parser/css/ruleset.c, elusive/parser/css/test.c,
	elusive/parser/css/test.h, elusive/parser/css/tree.h,
	protocol/http/header.c, scripting/guile/hooks.c, ssl/ssl.h,
	terminal/screen.c:

	Whitespace fixes.  

Fri Sep 12 10:40:21 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some of download_data() code was moved to new
	write_cache_entry_to_file() and set_file_download_win_handler().
	Tidyup.  

Wed Sep 10 19:23:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_spaces() with realloc_spaces() and use granular
	allocation.  

Wed Sep 10 19:15:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_line() with realloc_line().  realloc_line() now calls
	realloc_lines().  Use X() and Y() macros to get the canvas position.  

Wed Sep 10 18:43:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_lines() with realloc_lines().  

Wed Sep 10 18:12:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, util/memory.h:

	Make the granular allocation code generic.  

Wed Sep 10 16:06:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce ALIGN_LINK().  

Wed Sep 10 15:49:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Minor cleanup remove useless assignments.  

Wed Sep 10 14:40:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Switch @from and @to macro names. Some say it is more correct ;) 

Wed Sep 10 14:10:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link navigation bug introduced in 1.250.  

Wed Sep 10 08:16:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Use a variable to save a few calls to current_frame() in
	print_screen_status().  

Wed Sep 10 06:06:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Eliminate some superfluous #includes.  
	
	When I suggested, made, and forgot to commit this change a few
	months ago, pasky had this comment: 
	
	20:21:10< pasky> Miciah: i'd not be against reducing it to
	                 ssl/ssl.h, as long as you will make clear in the log message that
			 pasky wishes this not to become a precedent and such things MUST be 
			 considered on case-by-case basis 20:21:35< pasky> i really don't
	                 want to see a flood of "removed redundant includes from ABC, it is
	included by XYZ as well" 

Wed Sep 10 03:41:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add TODO about how to avoid last_* variables allocation and freeing.  

Wed Sep 10 03:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Use format.form instead of last_form.  

Wed Sep 10 03:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge link initialization from process_link() into new_link().  

Wed Sep 10 00:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup dir_sep() trimming.  

Wed Sep 10 00:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cut the b33p and just access @first_use directly.  

Wed Sep 10 00:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup.  

Wed Sep 10 00:26:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Move directory testing to test_confdir(). Inspired by
	kuser.  

Wed Sep 10 00:04:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): No need to allocate config_dir. Inspired by kuser.  

Tue Sep  9 23:32:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Split out path_to_exe directory name extraction to
	elinks_dirname(). Patch by kuser.  

Tue Sep  9 21:57:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	move_links(): Cleanup indentation.  

Tue Sep  9 21:52:52 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/draw.c, viewer/text/view.c:

	Cursor positionning was fixed regarding block_cursor option.  

Tue Sep  9 21:33:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link numbering.  

Tue Sep  9 21:16:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Cleanup and optimize whitespace trimming.  

Tue Sep  9 20:46:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move up and call get_format_screen_char() from set_hline().
	Simplifies put_chars().  

Tue Sep  9 20:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Last patch fixed handling of <a href="foo">123<sup>456</sup>789</a>.
	:) 

Tue Sep  9 20:07:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	A bit experimental patch moving link processing after the
	set_hline() and the format changing. Passes fm! ;) 

Tue Sep  9 19:45:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Simplify the format change handling code. It is now done in
	get_format_screen_char() returning a pointer to a template
	screen_char 

Tue Sep  9 19:07:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move sub/super state variables closer to user.  

Tue Sep  9 18:58:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Whitespace fixes.  

Tue Sep  9 18:00:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Minor cleanup.  

Tue Sep  9 17:50:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elusive/renderer/text/renderer.c, terminal/draw.c,
	terminal/screen.c, viewer/text/link.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	Introduce copy_screen_chars() macro to wrap memcpy()s.  

Tue Sep  9 13:11:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	An issue related to weird html links was fixed. It was revealed by
	an assertion failure when accessing to
	http://www.etla.org/articles/filter/.  

Tue Sep  9 10:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A useless label was removed in parse_element(), minor cleanup.  

Tue Sep  9 10:11:55 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Slightly improved get_attr_val() performance by moving some tests
	outsided loops (especially if (found) test)), gain is 25% mininum
	compared to previous code.  

Mon Sep  8 23:16:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	do_document_refresh(): Check if any type query is in progress and if
	it is for the same url bail out.  

Mon Sep  8 22:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/draw.c, terminal/draw.h,
	terminal/screen.c, terminal/screen.h, viewer/text/link.c:

	Revert the last 3 hours of patches from me. This stuff needs more
	thought.  

Mon Sep  8 21:16:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	set_term_color(): Bail out if !d_opt.  

Mon Sep  8 21:07:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, terminal/screen.c, terminal/screen.h:

	Add color_size to the document option structure.  

Mon Sep  8 20:54:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add (kindof) support for the color array.  

Mon Sep  8 20:37:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix spurious redraws because of bad color comparison.  

Mon Sep  8 19:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/draw.c, terminal/draw.h,
	terminal/screen.c, viewer/text/link.c:

	Make the screen_char color an array. This will be necessary when
	moving towards support for 256. The patch contains a few hacks for
	when a local screen_char stack variable are needed because the color
	array can have various sizes. Also set_hline() is now responsible
	for making the format change in the renderer.  

Mon Sep  8 17:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix set_term_color() type.  

Mon Sep  8 15:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Oops fix comment.  

Mon Sep  8 15:43:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	Encapsulate the fg and bg color levels + drop 8 from
	set_term_color8().  

Mon Sep  8 15:22:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Move comment about color encoding to header.  

Mon Sep  8 15:10:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor optimizations (mainly tests reordering and intermediate
	results caching).  

Mon Sep  8 12:32:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor cleanup and optimization in format_frames().  

Sun Sep  7 21:41:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	get_system_name(): Use snprintf() it's simpler and zas said I should
	do it. ;) 

Sun Sep  7 21:03:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sysname.c:

	Cleanup of get_system_name(). Now code dependant to popen() has its
	own function, some useless memset() were removed, struct utsname
	extraction do not use memory allocation (and free) anymore, some
	gotos are gone, and some hidden awful little bugs were added.  

Sun Sep  7 20:23:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tiny tidyup.  

Sun Sep  7 20:09:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Ooops, sizeof(struct signal_info) -> sizeof(signal_info) ;).  

Sun Sep  7 20:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: signals.c, signals.h:

	Signals handling code was simplified, struct signal_handler and
	signal_mask have been replaced by struct signal_info and is no more
	exported.  

Sun Sep  7 19:13:22 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	get_system_str() minor optimization and cleanup.  

Sun Sep  7 18:11:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.h:

	This is a pure test, some time ago fields reorganization in struct
	cache_entry caused some issues, it doesnt seem to cause any problem
	know. So i moved fields and let see.  

Sun Sep  7 11:12:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep  7 11:08:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	A bug in truncate_entry() was fixed, a useless call to enlarge() has
	now some use, fixing a minor memory leak it seems. Some
	optimizations were made by caching some constant results.  

Sun Sep  7 00:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix <hr> drawing + minor cleanup of last patch.  

Sun Sep  7 00:10:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/color.h, terminal/draw.c,
	terminal/draw.h, viewer/text/link.c:

	I keep redoing the same patch over and over again. This time code is
	actually removed, it's slightly less hackish and adding support for
	xterm256 will hopefully be easier since a screen char is now passed
	to the color blender which btw is now renamed to set_term_color8().  

Sat Sep  6 22:50:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	Improve comments with help from Dickey's scripts.  

Sat Sep  6 22:33:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, palette.inc:

	Use the included palette16.  

Sat Sep  6 22:27:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	For the 16, 88 and 256 color palettes.  

Sat Sep  6 21:02:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Shit. Jonas pointed out that ITU copyright doesn't permit us to
	actually include that SGR 38 documentation. I think we have right to
	quote from it but let's stay safe :/.  

Sat Sep  6 20:36:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Eliminate an assignment that was made superfluous by a change in
	revision 1.180 of src/viewer/text/view.c.  

Sat Sep  6 20:33:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Added documentation of the mysterious SGR 38 (thanks to deltab
	again). It is precious and valuable enough to live in the source
	:-).  

Sat Sep  6 19:48:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_link_number(): Split out from process_link().  

Sat Sep  6 19:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	process_link(): Cleanup.  

Sat Sep  6 19:37:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Split out the whole process_link goto ``snask'' (Danish
	word for uncertain mixed things) into separate process_link()
	function.  

Sat Sep  6 15:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Cleanup and require that @attr != NULL.  

Sat Sep  6 15:44:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, terminal/draw.h,
	terminal/screen.c, viewer/text/link.c:

	Move the check of wether to use inverse sequence in mono mode to
	color blending.  The flag used is a new SCREEN_ATTR_STANDOUT
	inspired by vim. This makes it possible to really make links
	standout in mono mode so navigation is improved.  

Sat Sep  6 15:29:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	6.5 on the richter^H^Hack scale. Propagate attributes up from the
	color blender.  

Sat Sep  6 15:09:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, terminal/kbd.c,
	viewer/text/link.c:

	Unify the color handling into one function get_term_color8().  

Sat Sep  6 10:44:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Minor update. (Why are this sooooo boring ;) 

Sat Sep  6 10:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Cosmetic changes by Witold.  

Fri Sep  5 22:44:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated. po files were resynced.  

Fri Sep  5 21:29:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Put the static int @loaded local to load_saved_forms().  

Fri Sep  5 21:18:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Don't call base64_decode with an empty string. This fixes an
	assertion failure when a saved form field is blank.  

Fri Sep  5 20:33:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Expand the description for the document.browse.refresh option.  

Fri Sep  5 17:55:43 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Test for @url and @name parameters were added to
	get_form_history_value() to prevent bad things (like a segfault).
	Issue reported by Jonas.  

Fri Sep  5 13:40:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Support for html meta refresh. Patch by Witold and me.  

Fri Sep  5 13:25:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_special(): Cleanup.  

Fri Sep  5 12:02:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	doc_end_load(): Cleanup.  

Fri Sep  5 10:47:27 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Heh, we still have some. links -> ELinks.  

Fri Sep  5 09:41:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated, .po files were resynced.  

Fri Sep  5 02:01:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Update comment.  

Fri Sep  5 01:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_border_cross(): Use BORDER_* enums in the lookup table.  

Fri Sep  5 00:29:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Tidyup + rename rgb_cache_entry->l to level.  

Fri Sep  5 00:17:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): No need to poison the cache since @level
	should always be > 0.  

Thu Sep  4 23:33:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation updated by Witold 

Thu Sep  4 19:05:46 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sending TWIN and XWIN sequences seems to make the thing work well at
	least with xterm, rxvt, linux console. Please test in other env. if
	it still works. Screen should be restored at exit, and mouse should
	always work as usual.  

Thu Sep  4 18:16:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Reduce the document line granularity. This maybe needs more tuning
	and/or only enabled for big documents.  

Thu Sep  4 18:14:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.c:

	Fix the document option comparison that was causing the extra memory
	usage. :P 

Thu Sep  4 16:58:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Fix grmask error. But how could it work before? 

Thu Sep  4 14:42:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Issue concerning alternate screen handling and xterm/rxvt was fixed,
	i hope.  

Thu Sep  4 14:14:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	send_term_sequence() -> send_done_sequence() 

Thu Sep  4 12:31:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/options.c, sched/session.h,
	util/version.c:

	Information is like water, there is no plural.  
	
	-- Witold Filipczyk tohu-bohu <witekfl@poczta.gazeta.pl> 

Wed Sep  3 23:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h:

	Change the color encoding so the bold bit is now between bg and fg
	bits making it much simpler.  Adjusting of fg when bg == fg is now
	(more correctly) done using a fg_color[] lookup.  

Wed Sep  3 22:43:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove strange (bg & 0x02) and use make the foreground color bold if
	fg == bg.  This means that fg color will _always_ be visible (so I
	guess this is a bug fix).  

Wed Sep  3 22:34:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.h, terminal/screen.c:

	Update comments and move ``generic option cache'' TODO to better
	place..  

Wed Sep  3 22:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/form.c:

	Option document.browse.forms.show_formhist was added. It turns
	on/off the forms history dialog. Please improve description in
	options.c. Feature requested by Jonas.  

Wed Sep  3 22:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix a stupid bug: next <-> prev error.  

Wed Sep  3 22:05:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/options.c, terminal/screen.c:

	Update screen_drivers change_hook style.  

Wed Sep  3 21:17:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, terminal/screen.c, terminal/screen.h:

	Dynamically allocate screen drivers ... getting ready for
	change_hook updating.  

Wed Sep  3 20:14:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Silence gcc 3.3.* warnings even for --disable-debug builds.  

Wed Sep  3 16:21:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Do not use fmem_alloc() since using alloca() (fastmem only) prevents
	the function to be inlined.  

Wed Sep  3 16:15:30 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A segfault produced at exit in normal or fastmem mode was fixed. Why
	does it work with --enable-debug and segfault in other modes? 

Wed Sep  3 16:03:11 2003  Laurent Monin <zas@norz.org>:

	* src/util/: snprintf.c, snprintf.h, string.c, string.h:

	Changes were made to be able to compile ELinks with -Winline flag.
	Some functions were not inlined as it should. A bit hacky so feel
	free to improve.  

Wed Sep  3 12:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c:

	elinks -dump <somefile and elinks -dump - <somefile are now
	accepted. It works with -source too.  

Wed Sep  3 09:27:22 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor code simplification.  

Wed Sep  3 09:24:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Use url_size ;).  

Wed Sep  3 09:22:25 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	forget_forms_with_url() was introduced. It replaces previous
	get_form_with_url() + a loop.  

Tue Sep  2 21:21:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5.CVS 

Tue Sep  2 21:14:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5 

Tue Sep  2 21:13:32 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated po files.  

Tue Sep  2 21:11:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Minor update.  

Tue Sep  2 20:27:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Adding prefilled screen_drivers. If not for speed they make the
	defaults clearer.  

Tue Sep  2 19:54:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	init_screen_driver(): Moved and group with the screen driver struff.  

Tue Sep  2 19:47:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optim.  

Tue Sep  2 19:33:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Comments members of struct screen_driver.  

Tue Sep  2 19:25:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup UTF8 I/O and move most logic to init_screen_driver().  

Tue Sep  2 19:02:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of frame sequences when changing frame state.  

Tue Sep  2 18:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Handle ``frame char translation'' genericly depending on
	screen_driver->frame.  

Tue Sep  2 18:26:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge fill_option_cache() and get_frame_table() into
	init_screen_driver().  

Tue Sep  2 16:20:24 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optimizations.  

Tue Sep  2 14:04:58 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A useless list initialization was removed. Reported by Jonas.  

Tue Sep  2 14:01:00 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Goto fail is better ;) Spotted by Jonas.  

Tue Sep  2 13:55:01 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Allocate space for url + struct formhist_data in one time.  

Tue Sep  2 13:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move screen_state->frame to the screen_driver.  

Tue Sep  2 13:38:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: opt_cache -> driver.  

Tue Sep  2 13:37:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Last bits of formhist fix.  

Tue Sep  2 13:32:55 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.h, formhist.c:

	Form history was fixed. Major tidyup. Please report any issue, all
	previous versions have some bad bugs and design errors.  

Mon Sep  1 23:59:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Always do two fg_color[] adjustments like in the old code.  

Mon Sep  1 23:53:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Can't sleep before this is done. Revert bogus patch that caused
	visited links and many other things to be drawn wrong.  

Mon Sep  1 23:31:12 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Code cleanup. Code redundancy was reduced. A potential memleak was
	fixed.  

Mon Sep  1 22:44:46 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forget_form() is now used.  

Mon Sep  1 21:11:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Revert fg_color[] white/bright white change that I applied to cure
	symptoms of terminal color bugs.  

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: rs_opt_cache -> screen_driver 

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Do fg_color correction before applying attribute color enhancements.  

Mon Sep  1 20:46:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link color mixing to be as in 0.5pre4.  

Mon Sep  1 20:38:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Moved format_change put_chars() fragment into separate function
	put_chars_format_change().  

Mon Sep  1 20:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Code cleanup and reordering. Statification. It fixes some issues
	with formhist feature. Formhist dialog do not pop up twice anymore,
	and multiple identical entries in formhist should not occur anymore.  

Mon Sep  1 20:16:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, viewer/text/link.c:

	Fix hovering of links to be like pre4 (even though always having
	bold links is more readable IMHO).  

Mon Sep  1 19:38:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Fixed !allow_dark_on_black brokenness when lookup in the xlat
	(@fg_color) table didn't reflect bold attribute being set. As a
	result, the behaviour slightly deviated from the correct 0.5pre4 one
	and there were dark colors on dark backgrounds. Fix based on
	cooperation with jonas :-).  

Mon Sep  1 19:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix: comparaison failed because test order was inverted, having for
	effect to return false on form_already_saved() call. There are some
	bugs left.  

Mon Sep  1 13:17:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use int_bounds().  

Mon Sep  1 13:13:32 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, form.c, link.c:

	Use int_bounds().  

Mon Sep  1 13:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, terminal/draw.c:

	Use int_bounds().  

Mon Sep  1 13:02:46 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, document/html/tables.c:

	Use int_bounds().  

Mon Sep  1 12:59:06 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: auth.c, edit.c, hierbox.c, mime.c:

	Use int_bounds().  

Mon Sep  1 12:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c:

	Use int_bounds().  

Mon Sep  1 12:52:25 2003  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, bfu/button.c, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c:

	int_bounds() was introduced, it replaces int_lower_bound(&x, a) and
	int_upper_bound(&x, b) with int_bounds(&x, a, b), and should be
	faster.  

Mon Sep  1 12:35:10 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Optimization: struct widget_data *dlg_item = &dlg->items[dlg->n -
	1]; 

Mon Sep  1 12:15:57 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/hierbox.c:

	Trivial optimization, cache dlg->n - 1.  

Sun Aug 31 22:49:07 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Aug 31 22:27:03 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Aug 31 22:21:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with options in 0.5pre4.CVS 

Sun Aug 31 22:14:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix --(config|long)-help color printing.  

Sun Aug 31 19:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Handling of underlining is now fully optional and hopefully with
	minimal overhead [two tests in print_char()].  

Sun Aug 31 17:28:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Draw underlines based on the terminal option.  

Sun Aug 31 17:24:19 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Aug 31 17:20:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h, screen.c:

	Replace TERM_COLOR_BOLD with SCREEN_ATTR_BOLD.  

Sun Aug 31 17:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make terminal underline option appear in the terminal options
	dialog.  

Sun Aug 31 17:03:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix terminal restrict_852 description and add underline optinos.  

Sun Aug 31 15:51:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Cleanup the use negative image testing + only init @underline when
	appropriate.  

Sun Aug 31 13:07:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix color encoding comment.  

Sun Aug 31 12:51:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Merge INT2RGB() into HASH_RGB() and use INIT_RGB() if we have to
	calculate distance.  

Sun Aug 31 12:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	Generalization via macros.  

Sun Aug 31 10:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Use memacpy() in copy_string().  

Sun Aug 31 10:30:23 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	xstrcmp() optimization.  

Sun Aug 31 09:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	Profiling and optimization of find_nearest_color(), measured
	improvment is significative. Perhaps we can optimize a bit more by
	merging INT2RGB() and HASH_RGB() in this functions.  

Sun Aug 31 09:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Code optimization in redraw_screen(), memcmp() call was removed,
	tests were optimized in the 2 levels loop.  

Sun Aug 31 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Completely rewrite the color encoding into one function. There's
	still some dark corners that don't make sense to me maybe someone
	can hit me with a cluebat? 

Sun Aug 31 00:19:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Transmorphed into just the foregroud color lookup table.
	Comments updated.  

Sun Aug 31 00:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Add comments and #define for bold rendering.  

Sat Aug 30 20:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Comment the color encoding and try to simplify it (not used yet).  

Sat Aug 30 19:36:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Change octal numbers to hex.  

Sat Aug 30 11:32:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, protocol/file.c, protocol/ftp.c:

	A few cleanups of color option handling.  

Sat Aug 30 11:08:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.c:

	dlg_set_history() was reworked.  

Sat Aug 30 08:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Reverted trivial simplification, it causes a segfault when accessing
	terminal options, and IMHO, is not faster nor more readable.  

Sat Aug 30 01:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Get rid of hardcoded colors and use status.status-text instead.  
	Also don't initialized @fgcolor of unused leds but fallback to
	default.  

Sat Aug 30 00:27:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: leds.c, leds.h:

	Updated to use the current color handling and terminal drawing.
	Colors are badly hardcoded.  

Sat Aug 30 00:06:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add TODOs and small cleanup.  

Fri Aug 29 23:57:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	color_distance(): Fix braindamaged off by 4 error from last patch.  

Fri Aug 29 23:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Update comments and remove test of color arg since it is assert()ed.  

Fri Aug 29 23:28:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	Due to the change moving color mangling out of print_char() drawing
	of frame lines now requires that a color_pair is specified. Make all
	helpers take this color arg.  

Fri Aug 29 23:27:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Explain in the source why altscreen isn't used for xwin.  

Fri Aug 29 23:06:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	Fixed bug 244, compilation failures caused by expansion of 'format'
	tokens (#define'd at document/html/parser.h). Reported by Felix von
	Leitner <felix@fefe.de>.  

Fri Aug 29 21:39:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Trivial simplification.  

Fri Aug 29 21:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/: formhist.c, formhist.h:

	Moved descriptions of public functions to the header file.  

Fri Aug 29 21:27:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	A small patch making rendering of tables more correct. Some pages
	might look a lot different. E.g. www.linux.org has some strange
	coloring in the bottom while but /. is much better.  

Fri Aug 29 21:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Comments cleanup.  

Fri Aug 29 21:21:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Normalize (+ minor reindentation and tiny cleanup).  

Fri Aug 29 21:18:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.h:

	Normalize.  

Fri Aug 29 21:03:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Fixed invalid negation in (my?) comment.  

Fri Aug 29 18:18:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Use INIT_COLOR_PAIR() wrapper.  

Fri Aug 29 17:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove legacy code and check @dump_pos only in mix_attr_color().  

Fri Aug 29 17:28:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	color_to_string(): Use %06x fragment for converting the @color.  

Fri Aug 29 15:41:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cache intermediate results even more, misc. cleanups and
	optimizations.  

Fri Aug 29 15:08:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Cleanups and optimizations.  

Fri Aug 29 14:38:30 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Use int_[upper|lower]_bound().  

Fri Aug 29 14:30:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Use a temporary variable to prevent useless calculation, populate
	with int_max()/int_*/bound().  

Fri Aug 29 14:29:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Use a temporary variable to prevent useless calculation.  

Fri Aug 29 14:09:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Various minor optimizations, populate with int_max() and
	int_[upper|lower]_bound().  

Fri Aug 29 12:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): Rename l -> level.  

Fri Aug 29 11:50:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): Always add ' ' as fall back.  

Fri Aug 29 11:39:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Use memcmp() for exact matching.  

Fri Aug 29 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup the frame table handling to be more generic.  

Fri Aug 29 11:16:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/screen.c:

	Move the terminal color handling out of document/html/renderer.* and
	into terminal/color.* this way find_nearest_color() and fg_color() 
	can be static inline'd but the real benifit is the last chunk that 
	moves 3 lines of code outside print_char() which (at least in
	profiling) gives a small boost or said another way it doesn't hurt
	performance! ;) 
	
	The numbers: 
	
	  %   cumulative   self              self     total 
	 time   seconds   seconds    calls  ms/call  ms/call  name 
	  9.5       6.14     1.73  9142934     0.00     0.00  print_char
	  [27] 8.2       7.58     1.53  9107494     0.00     0.00 
				   print_char [29] ^^^^^^^ This must be because redraw_screen() can
	more correctly compare colors.  (btw. the case is scrolling up and
	 down twice on a page cat'd from 20 /. pages and a page of all debian
	unstables packages. 776 subpages) 

Fri Aug 29 11:13:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Make the ``mostly used'' string utils inlined.  

Fri Aug 29 09:47:05 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Many minor optimizations and cleanups. Some old staled code was
	removed. Speed was significantly improved since 0.5pre4.  

Fri Aug 29 04:40:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_func(): Don't propagate the event when calling
	delete_window_ev(). Fixes bug 33.  

Fri Aug 29 03:33:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, viewer/text/view.c:

	draw_border_char(): Check @color before mixing it. Fixes bug 242.  

Thu Aug 28 23:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	*.pld.org.pl -> *.pld-linux.org 

Thu Aug 28 19:48:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	cookies.max_age description cleanup. Changed default to -1 (no
	preset deadline for the poor little cookies), unless someone will
	come with a sound reason for keeping it upon 1 year. (IMHO file
	growth is not an issue..) 

Thu Aug 28 19:43:13 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Reduce overflow risk to zero and drop some comments.  

Thu Aug 28 19:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Commenting on possible buffer overflow at forcehtml_cmd().  

Thu Aug 28 19:28:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	assertm() 

Thu Aug 28 19:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Massive grammar fixes in comment introduced in rev 1.8 and bound the
	workaround to bug 237.  

Thu Aug 28 19:17:47 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp tidyup and slight mostly cosmetical altering of the output.
	If fancy, then fancy. ;-) 

Thu Aug 28 18:17:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Major optimization in get_searched(), use tolower() and pre-lowered
	string comparaison instead of expensive strncasecmp(). Some
	arithmetic operations were moved out of loops, cleanup.  

Thu Aug 28 17:29:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Add missing snprintf.h #include.  

Thu Aug 28 17:22:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, intl/gettext/dcigettext.c,
	intl/gettext/l10nflist.c, intl/gettext/loadmsgcat.c,
	intl/gettext/localealias.c:

	#include the stubs via elinks.h. Makes elinks compile on FreeBSD
	again.  

Thu Aug 28 17:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/l10nflist.c:

	Remove useless pop() declaration.  

Thu Aug 28 17:01:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Add missing #include.  

Thu Aug 28 17:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/loadmsgcat.c:

	source_tree_filename(): Cleanup and rename to
	add_filename_to_string().  

Thu Aug 28 16:40:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Typo fix in comment.  

Thu Aug 28 09:19:50 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Aug 28 09:00:38 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	fr.po space fix.  

Wed Aug 27 16:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Make @used, @spanned and @b members boolean.  

Wed Aug 27 16:03:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Remove useless variables.  

Tue Aug 26 23:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Instead of using brightwhite on white use brightgrey.
	Improves /.  

Tue Aug 26 23:35:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	copy_chars(): Use memcpy().  

Tue Aug 26 23:23:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix compile error.  

Tue Aug 26 23:14:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use memcpy().  

Tue Aug 26 23:10:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hline(): Move test outside the loop.  

Tue Aug 26 23:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line() + set_hchars(): Use memcpy().  

Tue Aug 26 12:50:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Tue Aug 26 12:40:19 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Minor cleanup.  

Tue Aug 26 09:35:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	Generic cleanup.  

Mon Aug 25 23:52:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	encode_color(): Remove in favor of mix_color_pair().  

Mon Aug 25 22:32:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area() showed up as a real show stopper in profiling so lets
	try with a nu scheme: Draw first line and memcpy() the rest of the
	area from this.  

Mon Aug 25 22:22:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_line(): Use memcpy().  

Mon Aug 25 22:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Small optimization.  

Mon Aug 25 21:25:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Mon Aug 25 12:04:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, cookies/cookies.c:

	An option for control of max. age of cookies was added
	(cookies.max_age). It permits to control expiration of cookies: no
	check(old behavior), always expires at session end, or limit to a
	number of days (default is 365 days). Idea by Miciah and me.  

Mon Aug 25 07:28:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Readd the inlined code documentation. Requested by Miciah.  

Mon Aug 25 06:56:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	struct line: Remove @bgcolor since par_format.bg is always used.  

Mon Aug 25 02:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	inline and loose seq_len() macro.  

Mon Aug 25 02:45:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/hardio.c:

	Trival blackspace fix.  

Mon Aug 25 02:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	typedef uint32_t color_t.  

Mon Aug 25 02:43:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	assert on !list_empty instead of list.next.  

Sun Aug 24 20:26:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	write_sequence(): Macro that wraps the hard_write().  

Sun Aug 24 14:30:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.c,
	viewer/text/view.c:

	toggle-document-colors action added. Activator defaults to '%'.  

Sun Aug 24 13:57:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Oops somebody didn't test and compile before committing. ;( 

Sun Aug 24 13:55:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Tidyup of comments.  

Sun Aug 24 13:35:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Empty the color cache when a switch between a mono and color term is 
	detected. Fixes lookups of wrong colors and reduces the memory
	usage.  

Sun Aug 24 12:01:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Alternate term screen handling seems to be incompatible with mouse
	handling in X, i disabled support for alt screen under X for now.
	Mouse clicks are partially ignored if we use alt screen and ie.
	xterm, but it works on linux console. Miciah please have a look at
	that. ;) 

Sun Aug 24 02:54:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/link.c:

	Store link color as struct color_pair.  

Sun Aug 24 02:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	mix_colors(): Rename to mix_color_pair().  

Sun Aug 24 02:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Expand color info to also include option tree pointers to the
	colors.  This way the colors can be updated for each lookup.  

Sun Aug 24 00:32:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Merge alternate screen support; fixes bug 28.  

Sat Aug 23 18:24:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, sched/session.c, viewer/text/link.c,
	viewer/text/view.c, viewer/text/vs.c:

	struct document: Remove @frame and just test @frame_desc instead.  

Sat Aug 23 18:18:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	struct document: Remove unused @time_to_get.  

Sat Aug 23 18:17:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Merge do_for_frame() and menu_for_frame().  

Sat Aug 23 18:16:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frm_download(): Move and make static.  

Sat Aug 23 18:15:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, view.c, view.h:

	decrement_fc_refcount(): Move and rename s/fc/document/.  

Sat Aug 23 18:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.h:

	Regroup and comment prototypes + correct #includes.  

Sat Aug 23 18:11:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup and merge print_current_title() and print_current_titlex().  

Sat Aug 23 18:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	clear_formatted() + destroy_formatted(): Merged to done_document().  

Sat Aug 23 17:54:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	viewer/text/view.c, viewer/text/view.h:

	init_document(): Introduced.  

Sat Aug 23 17:48:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/renderer/text/renderer.c:

	Renames to better fit the structs.  

Sat Aug 23 17:45:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	cached_format_html(): Lots of renames.  

Sat Aug 23 17:34:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	realloc_line[s](): Cleanup and remove unneeded variables from struct
	line.  

Sat Aug 23 16:53:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, document/html/renderer.h:

	Tidyups.  

Sat Aug 23 16:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/style.c, bfu/style.h, bfu/text.c, bfu/text.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, sched/download.c,
	sched/session.c, scripting/lua/core.c, terminal/draw.c,
	terminal/draw.h, viewer/text/search.c, viewer/text/view.c:

	struct screen_color: Replace with color_pair.  

Sat Aug 23 16:33:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/style.c, config/options.c, config/options.h,
	config/opttypes.c, document/options.c, document/options.h,
	document/html/Makefile.am, document/html/colors.c,
	document/html/colors.h, document/html/frames.c,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c,
	terminal/Makefile.am, terminal/color.c, terminal/color.h,
	terminal/draw.c, terminal/draw.h, util/Makefile.am, util/color.c,
	util/color.h, viewer/text/link.c:

	Split color handling.  

Sat Aug 23 16:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Handle @attr the same way as colors; Cache it.  

Sat Aug 23 15:52:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup draw_frame_*() macros.  

Sat Aug 23 15:18:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchars(): Make @bgcolor argument a color_t pointer. When
	shifting and aligning NULL can now be used to signal that the
	original bgcolor should used which means no stains when
	use_document_colors = 2.  

Sat Aug 23 15:08:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Cleanup.  

Sat Aug 23 15:07:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchar(): Only used by xset_hchar() so they were merged.  

Sat Aug 23 15:06:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Propagate @bgcolor to set_hchar*.  

Sat Aug 23 10:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Limit expiration date to one year from now, in set_cookie(). Is this
	ok ?.  

Sat Aug 23 10:41:58 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Loading/saving of expired cookies was disabled, especially whose
	that should expire with the session, please review, i am still
	unsure about the good behavior...  

Sat Aug 23 06:37:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_form_control(): Fix big leak from prev patch. (merge ;) 

Sat Aug 23 06:19:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h:

	struct part: Remvoe the @uf member. It was used to trash form
	controls and we migth as well free the controls if there's no
	document.  

Sat Aug 23 06:18:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/form.c, viewer/text/form.h, viewer/text/view.c:

	destroy_fc(): Move and rename to done_form_control().  

Sat Aug 23 06:15:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Cleanup macros.  

Sat Aug 23 05:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	init_term(): Cleanup and fix a possible leak. (merge) 

Sat Aug 23 05:43:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Revert some bogus patches. Somebody must've been sleeping ... :( 

Sat Aug 23 04:54:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Moved things to style.* 

Sat Aug 23 04:46:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Merge small optimization in link drawing from ELUSION.  

Sat Aug 23 04:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, config/opttypes.c,
	document/options.c, document/options.h, document/html/colors.c,
	document/html/colors.h, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	document/html/tables.c, elusive/renderer/text/renderer.c,
	protocol/file.c, protocol/ftp.c, terminal/draw.c, terminal/draw.h,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Merge color_t introduction from ELUSION. Contains patches from 6th
	to 8th of August.  

Sat Aug 23 04:42:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Compilation fix.  

Sat Aug 23 04:33:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: style.c, style.h:

	The missing link in the bfu color handling.  

Sat Aug 23 03:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/Makefile.am, bfu/button.c, bfu/button.h,
	bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h, bfu/group.c,
	bfu/hotkey.c, bfu/inpfield.c, bfu/inpfield.h, bfu/listbox.c,
	bfu/listbox.h, bfu/menu.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, document/html/frames.h, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c,
	document/html/tables.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Merge bfu color handling from ELUSION. This is a patchset of ELUSION
	patches applied between 3rd and 6th of August.  

Sat Aug 23 03:05:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix useless adjustments of the view positions when searching. Thanks
	ElectricElf ;) 

Sat Aug 23 01:27:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge misc. cleanups from ELUSION.  

Sat Aug 23 01:01:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h,
	terminal/screen.c:

	Merge underline support in the lowest terminal layer from ELUSION.  

Sat Aug 23 00:01:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/codepage.inc:

	The fixed thingy from last patch.  

Fri Aug 22 23:46:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix tr usage (part II ;) .. though there still a bug I think because
	spaces are removed from strings? 

Fri Aug 22 21:43:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix `tr' usage so "VISCII 1.1" (spaces in aliases) are handled
	correctly.  

Fri Aug 22 15:13:17 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forms history feature now saves forms in ~/.elinks/formhist file
	instead of ~/.elinks/password, just move it to new name before
	starting elinks to update.  

Fri Aug 22 15:07:47 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Various variables were renamed, a potential memleak fixed, minor
	cleanup.  

Fri Aug 22 10:38:50 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor cleanup and bugfixes (potential memleaks).  

Fri Aug 22 10:11:04 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Tidyup and sscanf() replacement.  

Thu Aug 21 14:55:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memory.h, string.c:

	grmask() and mem_gralloc() macros were introduced to simplify
	granular allocation code.  

Thu Aug 21 14:29:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Partial fix for bug 237.  

Thu Aug 21 13:06:47 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore, Unicode/.cvsignore, contrib/.cvsignore,
	contrib/guile/.cvsignore, contrib/lua/.cvsignore, doc/.cvsignore,
	doc/book/.cvsignore, doc/book/config/.cvsignore,
	doc/book/info/.cvsignore, doc/book/intro/.cvsignore,
	doc/book/manpages/.cvsignore, doc/book/tools/.cvsignore,
	doc/man/.cvsignore, doc/man/man1/.cvsignore,
	doc/man/man5/.cvsignore, intl/.cvsignore, po/.cvsignore,
	src/.cvsignore, src/bfu/.cvsignore, src/bookmarks/.cvsignore,
	src/bookmarks/backend/.cvsignore, src/config/.cvsignore,
	src/cookies/.cvsignore, src/dialogs/.cvsignore,
	src/document/.cvsignore, src/document/html/.cvsignore,
	src/elusive/.cvsignore, src/elusive/layouter/.cvsignore,
	src/elusive/layouter/syntree/.cvsignore,
	src/elusive/parser/.cvsignore, src/elusive/parser/css/.cvsignore,
	src/elusive/parser/dtd/.cvsignore,
	src/elusive/parser/html/.cvsignore,
	src/elusive/renderer/.cvsignore,
	src/elusive/renderer/text/.cvsignore, src/formhist/.cvsignore,
	src/globhist/.cvsignore, src/intl/.cvsignore,
	src/intl/gettext/.cvsignore, src/lowlevel/.cvsignore,
	src/mime/.cvsignore, src/mime/backend/.cvsignore,
	src/osdep/.cvsignore, src/protocol/.cvsignore,
	src/protocol/http/.cvsignore, src/sched/.cvsignore,
	src/scripting/.cvsignore, src/scripting/guile/.cvsignore,
	src/scripting/lua/.cvsignore, src/ssl/.cvsignore,
	src/terminal/.cvsignore, src/terminal/graphics/.cvsignore,
	src/terminal/text/.cvsignore, src/util/.cvsignore,
	src/viewer/.cvsignore, src/viewer/common/.cvsignore,
	src/viewer/dump/.cvsignore, src/viewer/graphics/.cvsignore,
	src/viewer/text/.cvsignore, test/.cvsignore:

	*.swp files (temporary vim files) are now ignored by cvs.  

Thu Aug 21 13:03:54 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/renderer.c,
	intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	Attempt to fix &nbsp&nbsp bug without reintroducing bug 213. Please
	review for side effects.  

Thu Aug 21 07:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Another base64_decode() fix, ending nul is now added... Thanks to
	Zardoz.  

Wed Aug 20 11:11:44 2003  Laurent Monin <zas@norz.org>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp was improved, so we get fancier codepage.inc. Please review
	for portability issues.  

Wed Aug 20 10:10:31 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Cleanup and optimizations.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.h:

	file splash.h was initially added on branch ELUSION.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.c:

	file splash.c was initially added on branch ELUSION.  

Tue Aug 19 11:45:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files and french translation were updated.  

Tue Aug 19 07:26:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	A stupid bug was fixed, patch by Zardoz.  

Mon Aug 18 19:46:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	The first two fixes keep old form data around and avoid crashing on
	null value fields.  
	
	The last fix is my crude attempt to delete forms in and outside of
	lists without underflow/overflow. There should probably be a
	free_list_with_callback version that calls a per-element freer on
	each list member to reduce the number of times that lists are freed
	incorrectly.  
	
	Patch by Zardoz.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.c:

	file canvas.c was initially added on branch ELUSION.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.h:

	file canvas.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.h:

	file splash.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.c:

	file splash.c was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.h:

	file refresh.h was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.c:

	file refresh.c was initially added on branch ELUSION.  

Sat Aug 16 23:41:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	'Fix' narrow edit dialogue boxes again (bug 158).  I fixed this
	before but Zas reverted that fix with src/dialogs/edit.c 1.35: 
	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.c, util/colors.c:

	file colors.c was initially added on branch ELUSION.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.h, util/colors.h:

	file colors.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.h:

	file display.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.c:

	file display.c was initially added on branch ELUSION.  

Tue Aug  5 01:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	Minor tidyups.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:32:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	I am rolling form memory back to where it was before I messed it up.
	Only a few renames + memorize_form() in formhist/ remains. I have
	kept my changes in the ELUSION branch where I will be doing most of
	my patches from now on. If I get it fixed we can merge it later.  

Mon Aug  4 18:54:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Tidyup.  

Sun Aug  3 04:55:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, renderer.h,
	tables.c:

	Last big nasty patch separating screen_char color and attr. Is this
	a bad solution: In order for html_hr() to put out border_chars, an
	extra argument for passing around the char attributes is missing so
	I added it to put_ch*r*.  

Sun Aug  3 03:44:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, document/html/renderer.c, terminal/draw.c,
	terminal/draw.h, terminal/screen.c, viewer/text/link.c,
	viewer/text/view.c:

	Another big nasty patch ;-P ... A stepping stone towards separating
	color and attribute in struct screen_char ... which will make us
	able to support more attributes like underline.  

Sun Aug  3 00:15:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Stranded renaming bits.  

Sat Aug  2 20:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Revert something that was not supposed to have been commited.  

Sat Aug  2 20:17:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, util/string.c:

	memorize_form(): Possible fix for determining whether to save the
	form values.  

Sat Aug  2 20:05:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Some weird bug forces me to do this weird thing.  

Sat Aug  2 19:03:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	#define FORM_HISTORY_FILENAME.  

Sat Aug  2 18:58:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Do like globhist and be more careful about @elinks_home.  

Sat Aug  2 18:20:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	write_form_history(): Introduced. Now add_form_history_item() just
	marks the history dirty. We can always add save timer like globhist
	later.  

Sat Aug  2 18:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	remember_form(): Rename to add_form_history_item() and use the given
	@item purging unwanted submitted values instead of allocating new
	ones.  

Sat Aug  2 17:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Add more comments.  

Sat Aug  2 17:50:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	init_form_history_item(): Introduced. We now allocate url and item
	in one chunk.  

Sat Aug  2 17:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	read_item_submit_list(): Introduced to make init_form_history()
	simpler. Now we even close the file when bailing out.  

Sat Aug  2 17:16:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	get_saved_control_value(): Renamed to get_form_history_value().
	Comment moved to header.  

Sat Aug  2 17:03:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Make @form_history static.  

Sat Aug  2 17:02:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Move done_form_history().  

Sat Aug  2 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.c:

	Use ~/.elinks/formhist as filename.  

Sat Aug  2 16:03:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Rename: @saved_forms -> @form_history, load_saved_forms() ->
	init_form_history().  

Sat Aug  2 15:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	done_form_history_item(): Rename @form -> @item.  

Sat Aug  2 15:51:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, formhist/formhist.c, formhist/formhist.h:

	Rename: free_formsmemory() -> done_form_history().  

Sat Aug  2 15:46:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	Rename: free_form() -> done_form_history_item() and make it private.  

Sat Aug  2 15:39:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	Removed private'' functions from header and made them static.  

Sat Aug  2 15:35:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	memorize_form(): Move to formhist/. Link in correct archive. ;) 

Sat Aug  2 15:22:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): No need to free the form controls just return NULL
	and let get_form_url() will do it.  

Sat Aug  2 15:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.o:

	Oops this one shouldn't have been added. Sorry.  

Sat Aug  2 15:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	formhist/formhist.o, viewer/text/form.c:

	Rename: struct formsmem_data -> struct form_history_item.  

Sat Aug  2 14:59:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/main.c,
	src/formhist/.cvsignore, src/formhist/.vimrc,
	src/formhist/Makefile.am, src/formhist/formhist.c,
	src/formhist/formhist.h, src/formhist/formhist.o,
	src/viewer/text/form.c:

	s/formsmem/formhist/ 

Sat Aug  2 08:42:26 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Only create arrays once.  

Fri Aug  1 22:19:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.h, screen.h:

	Move struct screen_char.  

Fri Aug  1 21:56:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): Init the @fm_data->submit list.  

Fri Aug  1 21:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	base64_decode(): Fix warning: comparison is always false due to
	limited range of data type.  

Fri Aug  1 20:55:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A bug introduced in my last patch was fixed, we want lower_bound
	instead of upper_bound... ;).  

Fri Aug  1 20:22:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Re-implementation of base64_decode(), to prevent usage of strchr()
	which may return NULL on bad chars, causing bad things. New version
	should detect errors. Adapted from a public domain source code.  

Fri Aug  1 19:37:20 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup.  

Fri Aug  1 19:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	No need to allocate the submit list_head.  

Fri Aug  1 18:55:57 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Fix password form detection.  

Fri Aug  1 18:47:02 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Introduced memorize_form() and moved code from get_form_url() to it.  

Fri Aug  1 18:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	fmem_data -> fm_data, since fmem_ prefix is already used elsewhere.  

Fri Aug  1 17:32:15 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore:

	Ignore libtool.  

Fri Aug  1 17:28:36 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/Makefile.am, src/main.c,
	src/util/base64.c, src/util/base64.h, src/util/version.c,
	src/viewer/text/form.c:

	HTML form manager, please improve and tune. Patch by Fabio Bonelli
	and me.  

Fri Aug  1 15:26:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.h:

	Tidyup and a comment update.  

Fri Aug  1 15:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	init_leds(): Knock out last COL() user. Hinted by Zas.  

Fri Aug  1 15:17:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	unregister_led(): Use assertm().  

Fri Aug  1 15:14:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Sync'ed with the current drawing code.  

Fri Aug  1 14:59:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, document/html/parser.c, terminal/draw.c,
	terminal/draw.h:

	Purge frame_char and ATTR_FRAME.  

Fri Aug  1 14:46:30 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/ttime.c:

	Newline fix.  

Fri Aug  1 14:42:04 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: select.c, signals.c:

	Assertification.  

Fri Aug  1 14:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Populate with int_[upper|lower]_bound() + assertm().  

Fri Aug  1 14:24:28 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 14:12:34 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/auth.c:

	MIN() -> int_min().  

Fri Aug  1 13:58:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:13:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:05:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:39:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:16:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:03:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:51:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:49:51 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: auth.c, hierbox.c, mime.c:

	Cleanup.  

Fri Aug  1 11:44:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	set_char() compilation failure fixed (reported by pekdon).  

Fri Aug  1 11:41:35 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/hierbox.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:32:53 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:28:45 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:25:37 2003  Laurent Monin <zas@norz.org>:

	* src/config/opttypes.c:

	Do not memcpy() int or long + use int_upper_bound().  

Fri Aug  1 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/default.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:13:44 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, inphist.c, listbox.c,
	menu.c, msgbox.c, widget.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	assert() was removed. It forces include error.h, and this is a bad
	thing, so no check is done for what == NULL, but it shouldnt be a
	problem.  

Fri Aug  1 11:07:37 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Use assert().  

Fri Aug  1 10:39:45 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Instead of returning on outbound values, just limit them to valid
	ones, and continue. It makes things nicer with very low terminal
	size.  

Fri Aug  1 10:38:00 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_upper_bound() and int_lower_bound() were introduced.  

Fri Aug  1 10:11:22 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, viewer/text/view.c:

	More int_min().  

Fri Aug  1 09:58:55 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Make use of int_min().  

Fri Aug  1 09:58:16 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_min() and int_max() were introduced, these are better than MIN()
	and MAX() macros, since arguments are only evaluated once, but they
	only work for int type.  

Thu Jul 31 21:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Long line was wrapped.  

Thu Jul 31 21:55:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	frame_trans was made static and moved to set_xchar() body.  

Thu Jul 31 21:48:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Useless startx and starty vars were dropped from fill_area() + minor
	optimizations and whitespaces fixes.  

Thu Jul 31 21:35:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Major cleanup, draw_assert() is gone (sorry jonas), useless
	intermediate variables like screen were removed, correct assertions
	were added, out_of_range(term, x, y) macro is used to check coords
	against term dimensions, position variable is now always the same
	thing.  

Thu Jul 31 17:41:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_assert(): Introduced and just returns if the assertion don't
	hold. Apparently there's some bugs in the dialog code that requires
	more than trivial work. Work that nobody wants to do right now. ;) 

Thu Jul 31 17:29:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c,
	bfu/menu.c, document/html/colors.c, document/html/colors.h,
	document/html/frames.h, document/html/renderer.c, sched/download.c,
	sched/session.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	Remove last sign of color and char ``encoding'' by making also 
	find_nearest_color() return unsigned char and fill_area() take color
	as unsigned char. This patch also purges the get_screen_char_*() and
	COL() macros.  

Thu Jul 31 16:56:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/button.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/text.c, bfu/text.h, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/search.c:

	This is a big patch doing mostly trivial stuff.  get_bfu_color():
	return unsigned char. No shifting of the color.  set_char(): Take
	color as unsigned char.  draw_frame(): Take color as unsigned char.  
	print_text(): Take color as unsigned char.  
	
	Sideeffects are that fill_area() (next in line) still needs the
	color shiftet.  

Thu Jul 31 15:46:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_frame(): Tidyup.  

Thu Jul 31 15:40:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Various minor optimizations.  

Thu Jul 31 15:17:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	set_only_char(): Take unsigned char instead of unsigned.  

Thu Jul 31 15:04:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c, bfu/menu.c,
	sched/download.c, sched/session.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	fill_area(): Take screen data and attr value separately.  

Thu Jul 31 15:02:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	if () internal() -> assertm().  

Thu Jul 31 14:54:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells(): optimization, do not recalculate cells indexes if
	not needed.  

Thu Jul 31 14:42:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/view.c:

	fill_border_area(): Introduced as macro.  

Thu Jul 31 14:15:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Insert sanity check. Bail out if width or height of the
	view is < 2. I don't know why but Zas spotted this. ;) 

Thu Jul 31 09:12:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	try_encoding_extensions: Fix possible infinite loop.  

Thu Jul 31 01:34:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Many minor optizations: bits shift instead of [*/]2, register some
	vars, moved some tests outside loops, reduce number of calls to
	strncasecmp()...  

Thu Jul 31 01:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/text.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	set_chars(): Take screen data and attr value separately.  

Thu Jul 31 00:33:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/menu.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	set_border_char(): Introduced and used instead of set_char(*FRAME*).  

Thu Jul 31 00:23:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	create_frameset(): optimization, only allocate memory if needed.  

Wed Jul 30 23:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Minor optimization, result of conversion (binary shift) is constant,
	moved outside loops.  

Wed Jul 30 22:41:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.h:

	Typo fix ;).  

Wed Jul 30 21:38:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar(): Remove useless bit operation.  

Wed Jul 30 21:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, terminal/draw.h, terminal/screen.c,
	terminal/screen.h, viewer/text/link.c:

	Move screen_char macros.  

Wed Jul 30 20:58:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h:

	Move and add function descriptions to the header file.  

Wed Jul 30 16:14:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchars(): Take screen data and attr value separately.  

Wed Jul 30 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchar(): Take screen data and attr value separately.  

Wed Jul 30 15:18:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Cleanup.  

Wed Jul 30 00:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c, scripting/lua/core.c,
	terminal/draw.c, terminal/draw.h, viewer/dump/dump.c,
	viewer/text/search.c:

	Replace chr type with struct screen_char.  

Tue Jul 29 23:27:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	struct line: Rename @c to @color with type unsigned char.  

Tue Jul 29 23:09:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_position(): Introduced to wrap POS(x, y) = c.  

Tue Jul 29 22:55:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Cleanup.  

Tue Jul 29 22:43:52 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Cleanup and assertions.  

Tue Jul 29 17:53:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	l_current_document_formatted(): Cleanup.  

Tue Jul 29 17:41:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_to_file(): Cleanup.  

Tue Jul 29 15:39:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Oops some missing renames.  

Tue Jul 29 15:34:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Rename variables and tidy up.  

Tue Jul 29 09:48:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	init_string() was moved after all return NULL, it fixes bug 233.
	Patch by Zardoz.  

Mon Jul 28 22:17:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): More SCREEN_ATTR_FRAME usage.  

Mon Jul 28 22:12:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	put_chars(): a charslen > 0 assertion filure was fixed.  

Mon Jul 28 21:45:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val(): Use attrlen instead of calling strlen(attr), and
	memchr() instead of strchr().  

Mon Jul 28 20:53:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Some old staled code was removed, and an attempt to optimize a set
	of tests was done (please review).  

Mon Jul 28 20:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	alloc_screen() - rename to resize_screen().  

Mon Jul 28 20:23:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	alloc_screen() - Replaced possible init_screen() call with
	assertion. term->screen is allocated in init_term().  

Mon Jul 28 20:20:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_frame_lines() - Fix assertion failure when calling set_xchar().  

Mon Jul 28 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Optimization of atchr(): isA() is redundant with test (c > ' ' && c
	!= '=' ...) since all chars valid for isA() make this test true and
	since we do isA() || the_test, any char > ' ' and < 'z' is valide
	but '=', '>', '<'. I change that for an optimized test, which match
	4 additionnal chars (> 'z' && < 127). This should not be a problem.  

Mon Jul 28 19:34:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_line_color() - removed.  

Mon Jul 28 19:33:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar() - rename variables, use assertion, decrease indentaion.  

Mon Jul 28 19:29:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	erase_screen() - Tidyup.  

Mon Jul 28 17:05:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Old staled code was removed, cleanup and assertification.  

Mon Jul 28 16:43:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Assertification and minor cleanup.  

Mon Jul 28 16:18:56 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, sched/session.c, sched/session.h:

	destroy_all_sessions() was removed, since it does nothing.  

Mon Jul 28 16:15:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Indentation and whitespaces fixes, assertification, and some
	optimizations.  

Mon Jul 28 10:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h, terminal.c:

	init_screen() - introduced; fix leak from previous patch.  

Mon Jul 28 10:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rearrange alloc_screen() and move macro #define closer to user.  

Mon Jul 28 09:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	set_xchar() - Moved to terminal/draw.* 

Mon Jul 28 09:53:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/screen.c, terminal/screen.h,
	viewer/text/view.c:

	Add and use #define SCREEN_ATTR_FRAME 0x80.  

Mon Jul 28 09:39:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.h, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	get_char() - return screen_char position.  set_xchar() - access
	screen_char position directly.  struct link_bg now uses screen_char.  

Mon Jul 28 09:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Trivial renames and use of local terminal_screen var.  

Mon Jul 28 09:18:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Fix test of finalized string length.  

Mon Jul 28 09:05:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/draw.c, terminal/screen.c,
	terminal/screen.h, terminal/tab.c, terminal/terminal.c,
	terminal/terminal.h:

	Move terminal->dirty inside terminal->screen.  

Mon Jul 28 09:00:26 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Ouch, typo fix: close the comment ;) 

Mon Jul 28 08:57:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Refresh time extraction was added. Not yet used so enclosed in #if
	0/#endif.  

Mon Jul 28 08:51:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Move cursor positioning into struct terminal_screen. Also resulted
	in a little renaming in redraw_screen().  

Mon Jul 28 08:48:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print meta refresh original URL value as label.  

Mon Jul 28 08:35:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Support for relative url was added to META Refresh handling code.  

Mon Jul 28 08:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Introduce struct terminal_screen that now holds the screen image.  

Mon Jul 28 07:33:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bad memmove() was prevented, it fixes bug 231. Patch by Zardoz.  

Mon Jul 28 07:02:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Mark term as dirty at end of print_text().  

Mon Jul 28 06:54:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Assertion failure was fixed, no need to call set_line() with l = 0.  

Mon Jul 28 06:53:06 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Cleanup and optimization.  

Mon Jul 28 06:18:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.c:

	alloc_screen() - Allocate @screen and @last_screen in one chunk.  

Mon Jul 28 05:54:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	print_short_help() - Fix logic and string handling.  

Mon Jul 28 04:42:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Tidyup.  

Mon Jul 28 04:16:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Use add_bytes_... when string length is known.  

Mon Jul 28 03:57:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Rewrite. Rename. Recomment. Reformat.  

Mon Jul 28 02:57:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Move term option updating to fill_option_cache().  

Sun Jul 27 23:59:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	print_text(): Optimize to update term->screen directly.  

Sun Jul 27 23:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Tidy up.  

Sun Jul 27 23:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move initialization of loop vars closer to the loop.
	Also move calculation before the loop.  

Sun Jul 27 23:17:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move 'not in view' and failure setting up to decrease
	indentation. Remove useless test.  

Sun Jul 27 23:14:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Fix last patch. cursor_offset should atleast be 0.  

Sun Jul 27 23:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Rename @q -> @cursor_offset and use it to testing
	cursor updating.  

Sun Jul 27 22:54:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_doc(): Set @q in the switch for L_FIELD and L_AREA.  

Sun Jul 27 22:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move most of function body outside the switch.  

Sun Jul 27 22:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Renames in and around set_xchar().  

Sun Jul 27 22:44:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Tidy up.  

Sun Jul 27 21:47:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Whitespace and formatting fixed.  

Sun Jul 27 21:28:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Get rid of screen_char padding.  

Sun Jul 27 21:22:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.h:

	Introduce struct screen_char that is now used for
	terminal->(last_)screen.  

Sun Jul 27 20:20:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix issue where set_char() was called with @x = @y = -1 from
	clear_link().  

Sun Jul 27 19:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix issue where set_line() was called with negative @l from
	draw_doc(). Triggered when scrolling from link navigation.  

Sun Jul 27 19:39:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix bug cause by @l being wider than t->x - x triggering assertion
	in set_char() called from print_text().  

Sun Jul 27 17:51:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Removed set_cursor assertion. I've removed setting of the blocked
	cursor in the active frame it seems. Was that a feature? Anyway it's
	much faster not to.  

Sun Jul 27 17:47:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Assertion that x == 0 removed. When drawing frame lines x can be
	positive and < t->x.  

Sun Jul 27 17:43:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Variables renaming, cleanup, assertification, and comments
	concerning parse_http_header_param() which should be renamed since
	current name is not representative of what it does, imho. Any idea ? 

Sun Jul 27 17:23:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	Make set_cursor() only take hint whether cursor can be blocked. It
	will save us a get_opt* calls. Also only dirty the terminal when the
	positions are new.  

Sun Jul 27 15:49:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	A few formatting and whitespace fixes.  

Sun Jul 27 15:24:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	Outcommented set_line_color().  

Sun Jul 27 15:19:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Replaced a lot of test with assertions. I need to reason about this
	code and there are some suspicious things I'd like to get rid off.
	Please report failures to me.  

Sat Jul 26 21:24:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4.CVS 

Sat Jul 26 21:20:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4 

Sat Jul 26 21:17:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul 26 21:13:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation minor fixes.  

Sat Jul 26 21:12:09 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jul 26 20:34:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/version.c:

	Added info about Guile existence to the version string.  

Sat Jul 26 20:33:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	My regexps weren't smart enough. uri.string -> uri.protocol_str, the
	(hopefully) final bit.  

Sat Jul 26 20:30:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h, user.c:

	uri.string -> uri.protocol_str 

Sat Jul 26 11:26:50 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Some redundant tests were removed, minor optimization and cleanup.  

Sat Jul 26 11:16:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor optimization by increasing code redundancy a bit, we prevent a
	test with constant result to be done in a loop.  

Sat Jul 26 10:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	int -> register unsigned int for mask and cov, it seems safer.  

Sat Jul 26 10:55:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor hack to prevent double calls to get_opt_bool_tree() in some
	cases.  

Sat Jul 26 10:39:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Be a nice code and assertm() instead of if+internal() in
	term_send_event(). Added recovery failure path.  

Sat Jul 26 10:20:12 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor rewrite and assertions added in term_send_event().  

Sat Jul 26 10:01:24 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	pl.po was fixed (please review). fr.po was updated. .po files were
	resynced.  

Sat Jul 26 08:06:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Polish translation update, patch by witekfl.  

Sat Jul 26 08:04:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	build-in -> built-in, idea by witekfl.  

Sat Jul 26 02:14:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: mode -> prev_mode, attrib -> prev_attrib, A -> attrib, B ->
	mode in print_char().  

Sat Jul 26 01:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Hardcode the first indexes in add_cursor_mode_to_string() for speed.  

Sat Jul 26 01:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Try to optimize attribute updating in print_char() by doing a little
	extra copying but only one string adding.  

Sat Jul 26 00:39:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Trim the number of args to print_char() plus use variables instead
	of macro.  

Sat Jul 26 00:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Inline add_cursor_move_to_string() by order of pasky! 

Sat Jul 26 00:06:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce add_cursor_move_to_string().  

Fri Jul 25 22:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Format print_char() to look more homogenous and give the code room
	to breathe.  

Fri Jul 25 22:39:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Small optimization to only set charset if it is used (utf8).  

Fri Jul 25 22:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify alloc_screen().  

Fri Jul 25 22:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted, it seems calling uncompress_data() even
	with len = 0 is mandatory at some point... preventing some code
	simplification.  

Fri Jul 25 21:52:21 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A test against zero length was added, it prevents useless code to be
	executed. More to come, please review carefully.  

Fri Jul 25 21:48:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	if + internal() -> assertm().  

Fri Jul 25 21:18:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Optimization: let the preprocessor calculate constant values, a
	local macro RD_SIZE() was introduced.  

Fri Jul 25 20:24:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A bug introduced by last patch was fixed. Reported by Pasky.  

Fri Jul 25 20:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use add_bytes_to_string() when possible - it's faster, but
	sacrifices a bit of readability.  

Fri Jul 25 20:13:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix whitespace.  

Fri Jul 25 19:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	It won't. Reverted my last patches regarding enum protocol.  

Fri Jul 25 19:22:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Added missing include protocol/protocol.h. Let's see if it will
	work.  

Fri Jul 25 19:17:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	uri.protocol -> enum protocol 

Fri Jul 25 18:49:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Funny looking code is not always faster.  

Fri Jul 25 17:21:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Prevent useless symbols definition if bookmarks are not used.  

Fri Jul 25 17:21:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Comment updates - some my thoughts, extended documentation of few
	functions, typo/grammar fixes, blablabla.  

Fri Jul 25 17:16:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Updated commenting of struct uri.  

Fri Jul 25 17:03:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More uri->protocol usage.  

Fri Jul 25 16:57:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Only pass uri->protocol to get_protocol_handler().  

Fri Jul 25 16:36:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_focusable() cleanup and optimization.  

Fri Jul 25 16:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	Introduce uri->protocol field of type enum protocol. Should save us
	a few cycles.  

Fri Jul 25 16:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Add missing #include.  

Fri Jul 25 15:58:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h, user.c, http/http.c:

	Rename: uri->protocol to uri->string.  

Fri Jul 25 14:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Commented struct uri and updated parse_uri()'s comment.  

Fri Jul 25 14:13:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Added files generated by ltmain.sh 

Fri Jul 25 14:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Complete the alloc_term_screen -> alloc_screen renaming.  

Fri Jul 25 13:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	terminal/terminal.c:alloc_term_screen() ->
	terminal/screen.c:alloc_screen() and exported.  

Fri Jul 25 13:21:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, lowlevel/timer.c, terminal/Makefile.am,
	terminal/event.c, terminal/event.h, terminal/terminal.c,
	terminal/terminal.h, terminal/window.c:

	Separated out event handling from terminal/terminal.* to
	terminal/event.*.  

Fri Jul 25 13:07:43 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Some spaces and indentation fixes, minor optimizations, and return
	NULL on realloc() failure instead of retrying.  

Fri Jul 25 13:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.h:

	Don't include terminal/termianal.h from here. That's sick, man! 

Fri Jul 25 12:56:35 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Got rid of more gotos in convert_string(), macro PUTC was
	introduced, it speeds up thing by increasing code redundancy a bit.  

Fri Jul 25 12:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:39:05 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A goto was replaced in convert_string().  

Fri Jul 25 12:38:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/text/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:33:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	Ehm. strlcasecmp() -> strncasecmp(), it was not a bugfix ;-).
	Problems reported by zas.  

Fri Jul 25 10:03:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Interpretation of &nbsp &nbsp was fixed. Please review.  

Fri Jul 25 09:49:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print reverse links at top of current document, since it's a
	non-sense.  

Fri Jul 25 09:34:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html links synonyms were added, grouping by type was improved.  

Fri Jul 25 09:09:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html link rev|rel made is now associated to LT_AUTHOR, links of type
	LT_AUTHOR are no more displayed by default.  

Fri Jul 25 03:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/.cvsignore:

	Add .libs dir.  

Fri Jul 25 03:01:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Add .lo files and .libs dir.  

Fri Jul 25 02:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup extract_position().  

Fri Jul 25 02:34:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Small optimization in uri encoding.  

Fri Jul 25 01:21:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Optimize add_string_uri_filename_to_string() by using strlcasecmp()
	and relying on uri.data being always set.  

Fri Jul 25 00:48:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Use assertions for sanity checks.  

Fri Jul 25 00:39:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	Revert the optimization from version 1.6. Fixes gcc 3.3 compile
	warning that `in' may be undefined. Hopes this is correct.  

Fri Jul 25 00:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Don't check for strstr() twice.  

Thu Jul 24 16:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fix libtool macros order.  

Thu Jul 24 16:20:26 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	'compilation' fix.  

Thu Jul 24 16:19:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Disable shared libraries generation (at least for now).  

Thu Jul 24 16:18:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/guile/Makefile.am:

	Use libtool for libguile generation.  

Thu Jul 24 16:11:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/.vimrc:

	Corrected invalid path in fairie.  

Thu Jul 24 15:33:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, contrib/Makefile.am,
	contrib/guile/internal-hooks.scm, contrib/guile/user-hooks.scm,
	src/Makefile.am, src/main.c, src/dialogs/menu.c,
	src/protocol/proxy.c, src/sched/session.c,
	src/scripting/Makefile.am, src/scripting/guile/Makefile.am,
	src/scripting/guile/README, src/scripting/guile/core.c,
	src/scripting/guile/core.h, src/scripting/guile/hooks.c,
	src/scripting/guile/hooks.h:

	Support for internal scripting in scheme (w/ similiar interface as
	Lua exports) through Guile. Patch by Peter Wang and little updates
	by me.  

Thu Jul 24 15:32:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jul 24 15:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/guile/.cvsignore:

	Added fairy, even if useless here.  

Thu Jul 24 14:42:58 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	hx() and unhx() macros to static inline functions, better...  

Thu Jul 24 14:41:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/cache.c:

	Converted to use assertions in garbage_collection().  

Thu Jul 24 14:36:00 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	hx() and unhx() functions were converted to macros. A kind of forced
	inline ;).  

Thu Jul 24 14:02:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Simplification of abort_background_connections().  

Thu Jul 24 13:38:49 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup, optimization and assertions. Type casting to (int) is
	useless, so removed.  

Thu Jul 24 13:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/auth.c:

	Do not try to compare NULL or empty strings. Please review, it fixes
	a segfault.  

Thu Jul 24 13:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/util/blacklist.c:

	Some assertions and a comment about last field were added.  

Thu Jul 24 12:14:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/align.h:

	Jonas-inspired optimisation of get_bfu_color(). (It _seems_ to
	work...) 

Thu Jul 24 11:48:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.c:

	Eliminate two unnecessary temp-vars in checkboxes_width().  

Thu Jul 24 11:47:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	if + internal() parse_uri() brackets security check converted to an
	assertm(). As a side-effect fixed off-by-one bug in the check.  

Thu Jul 24 11:35:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/connection.h:

	s/struct download/struct file_download/ in load_url()'s description 
	(the comment wasn't updated when Jonas was renaming stuff).  

Thu Jul 24 11:23:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, renderer.c:

	Use list_empty().  

Thu Jul 24 11:09:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Assert fd->document in jump_to_link_number.  

Thu Jul 24 11:06:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/connect.c:

	Remove temp-var in dns_exception that is used only once.  

Thu Jul 24 10:55:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	send_event: Just pass @fd to do_mouse_event so as to save the latter 
	a call to current_frame.  

Thu Jul 24 10:48:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove unused parameters and an assertion of one of those parameters 
	from send_download_do().  

Thu Jul 24 10:43:04 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	s/rep[12]/rep/ now that the two labels are in separate functions and
	thus will not clash.  

Thu Jul 24 10:38:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	I don't normally mind when you explicitely initialise a static var
	to NULL, but it becomes a little confusing when you do it for one
	but not for others nearby that also need to be initialised to NULL
	(explicitly or implicitly).  

Thu Jul 24 10:26:18 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	view_menu has no dangerous items over view_menu_anon, so comment out
	view_menu_anon and its use in do_view_menu.  

Thu Jul 24 09:50:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Add $TMP to the list of environmental variables checked in
	textarea_edit().  

Thu Jul 24 09:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A segfault when viewing certain pages (especially internal http
	error page) was fixed, it was introduced by incomplete changes from
	pasky on my html_hx() patch :).  

Thu Jul 24 03:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Try to stracpy() follow_url_hook's return value naively instead of
	memacpy()ing it. Should be fine.  

Thu Jul 24 03:21:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_follow_url() tidyup and documentation.  

Thu Jul 24 03:15:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Tidied up and documented script_hook_goto_url().  

Thu Jul 24 03:11:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_quit() tidyup.  

Thu Jul 24 03:02:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Return 1 instead of the uri length in parse_uri(). It wasn't used so
	pretty pointless.  

Thu Jul 24 02:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Small cleanup and optimization of add_to_strn() by 'caching' the
	@dst length.  

Thu Jul 24 02:05:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Introduced load_config_from() and write_config_to(), even further
	backending load_config() and write_config(). Based on part of
	attachment 94 of bug 70, patch by kuser and me.  

Thu Jul 24 02:01:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Update comments for string utilities and move most of them to the
	header file.  

Thu Jul 24 01:49:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Well, kuser's complete scripting reworking is *not* yet in ;-).  

Thu Jul 24 01:48:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Let script_hook_follow_url() return value to acquire same semantics
	as script_hook_goto_url()'s: URL to go to, "" to go nowhere, NULL to
	go to the original URL. Attachment 97 of bug 70, patch by kuser and
	me.  

Thu Jul 24 01:43:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h:

	Changed script_hook_goto_url() to return the URL to go to ("" to go
	nowhere, NULL to go to the original URL), instead of directly
	calling goto_url() (which is now called from goto_url_with_hook()
	conditionally). Attachment 96 of bug 70, patch by kuser and me.  

Thu Jul 24 01:28:15 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Lua-specific CFLAGS and LIBS now *also* live in LUA_(CFLAGS|LIBS),
	whose are AC_SUBST()'d for Makefiles. Attachment 83 of bug 70, patch
	by kuser.  

Thu Jul 24 01:21:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, ltmain.sh, src/Makefile.am,
	src/scripting/lua/Makefile.am:

	[src/scripting/lua] liblua.a -> .libs/libscriptinglua.a and use
	libtool to generate it. Attachment 79 of bug 70, patch by kuser.  

Thu Jul 24 00:59:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	OPT_CONFIG -> OPT_LISTBOX and minor associated comment update.  

Thu Jul 24 00:52:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	parse_set() now saves the pre-value part of set command to @mirror
	only if the option has a @write method so we know we will get the
	actual option value in the @mirror as well. Hopefully fixes bug 216
	(alias'd options garbage the config file), reported by Dimitar
	Dimitrov <dinux@mail.bg>.  

Wed Jul 23 18:30:38 2003  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Added praises for Gerard and fis regarding the excellent yet hidden
	and frequently under-appreciated resources support they give us.  

Wed Jul 23 18:24:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/Makefile.am:

	Purge doc/book from the buildsystem.  

Wed Jul 23 18:20:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Create the linksarea temporary files in $TMPDIR || $TEMPDIR || $TEMP
	|| /tmp. Idea by Zardoz, fixes bug 232.  

Wed Jul 23 16:24:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3.CVS 

Wed Jul 23 16:21:19 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3 

Wed Jul 23 16:19:56 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 16:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Do not yell when adding zero chars to string, just return string in
	add_bytes_to_string() and add_xchar_to_string().  

Wed Jul 23 16:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Stricter length assertion, calling add_bytes_to_string(p, c, 0) is a
	non-sense.  

Wed Jul 23 16:04:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Attempt to fix strl*cmp() users compilation, reported by Zas.  

Wed Jul 23 16:02:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added in what location the assertion happenned information to the
	assert()s. This is how did I mean it, Jonas ;-).  

Wed Jul 23 15:57:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Oops, removed stale @m argument in string_assert().  

Wed Jul 23 15:57:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	string_assertm() -> string_assert() 

Wed Jul 23 15:56:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	strlcmp() and strlcasecmp() assertoin failures now contain caller
	coordinates (used string_assertm() instead of assert()).  

Wed Jul 23 15:54:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	In-debug_*() assertion failure messages now have standarized format
	and contain the name of function they happenned inside.  

Wed Jul 23 15:35:50 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Optimizations of add_char_to_string() and add_xchar_to_string(),
	calls to add_bytes_to_string() were removed.  

Wed Jul 23 15:34:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 15:32:52 2003  Petr Baudis <pasky@ucw.cz>:

	* po/gen_translations_stats.sh:

	Fixed alignment. Annoying fr.po ;-)).  

Wed Jul 23 15:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/uri.c, protocol/uri.h, protocol/user.c,
	protocol/http/http.c, sched/connection.c:

	Removed hardcoded assumption that the original URI string starts at
	uri.protocol, introduced struri() instead which encapsulates this
	fact nicely.  

Wed Jul 23 15:13:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 15:11:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Rearranged the declarations so that they cluster a little more
	naturally.  

Wed Jul 23 15:07:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/auth.c:

	Removed superfluous newline from the httpauth dialog box.  

Wed Jul 23 14:49:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed boolean expression in get_uri_string(), making it to actually
	work ;-).  

Wed Jul 23 14:09:09 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 14:05:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	It is now allowed to pass zarro @length to add_bytes_to_string().
	Hah, happiness! ... ;-) 

Wed Jul 23 13:46:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Moved the n1,n2 assert after -1 -> strlen(). Added comment
	explaining why :-). Idea by Jonas.  

Wed Jul 23 13:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small fix of strncmp -> strlcmp 

Wed Jul 23 13:00:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	Add missing include, reported by Zas.  

Wed Jul 23 12:59:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	strncmp() -> strlcmp() (this is a bugfix).  

Wed Jul 23 12:55:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Length checks + strncmp() -> strlcmp().  

Wed Jul 23 12:52:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Finish zas' renaming: set_auth_uid -> set_auth_user, set_auth_passwd
	-> set_auth_password.  

Wed Jul 23 12:51:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Reindentation.  

Wed Jul 23 12:49:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	strncasecmp() -> strlcasecmp() (this is a bugfix).  

Wed Jul 23 12:46:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Use strlcasecmp() instead of length compares + strncasecmp().  

Wed Jul 23 12:32:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Introduced strlcmp() and strlcasecmp() string functions which act
	like str[case]cmp() but on non-zero-terminated strings.  

Wed Jul 23 08:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/auth.c, protocol/http/auth.c:

	MAX_USER/PASSWD_LEN -> HTTP_AUTH_USER/PASSWORD_MAXLEN.  

Wed Jul 23 08:29:18 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Struct http_auth_basic field passwd was renamed to password.  

Wed Jul 23 08:21:21 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Struct http_auth_basic field uid was renamed to user. Note http auth
	is broken for now, due to some bugs introduced by Jonas at some
	time.  

Wed Jul 23 03:12:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	One sleepy hacker trying to fix last commit.  

Wed Jul 23 03:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad cs->server lookup. Gracefully spotted by Miciah.  

Wed Jul 23 02:53:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Add the location information that got lost in the assertion usage.  

Wed Jul 23 02:46:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Synchronize the what-to-do dialog no-open offers message text with
	the open ones.  

Wed Jul 23 02:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Moved the @filename bussiness to upper level in type_query().  

Wed Jul 23 02:28:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	FIXME about @quoted and suspends in tag_attr_val_parse().  

Wed Jul 23 02:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Simplification of html reading loop test in tag_attr_val_parse().  

Wed Jul 23 02:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the get_opt_() change. Now it returns void * again.  

Wed Jul 23 02:10:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	More fixing. Give first parameter correct type.  

Wed Jul 23 01:54:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fix return value of add_string_uri_filename_to_string(). Reported by
	Jonas.  

Wed Jul 23 01:31:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Ok so I should wait with my bad patches until the "let's go against
	jonas crew" has gone to sleep. Revert bogus globhist toggling.  

Wed Jul 23 01:25:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Call elinks_internal() so errfile and errline gets set properly.  

Wed Jul 23 01:04:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	We only need one #define of add_opt_codepage_tree.  

Wed Jul 23 00:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the changes trying to use union for option values. I don't
	have the patience to fight the config system monster right now. :( 

Wed Jul 23 00:47:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, protocol/uri.c, protocol/uri.h,
	sched/download.c:

	get_filename_from_url -> add_string_uri_filename_to_string (these
	identifiers rule) 

Wed Jul 23 00:30:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	get_filenamepart_from_url() declared but nowhere defined, nowhere
	used. So blasted off by the merciless monster^W^W^Wme.  

Wed Jul 23 00:11:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Cache toggle value in private variable instead of the option trees.  

Wed Jul 23 00:06:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Sleep for a second after printing out any error message. Making
	debug() usable ;-).  

Tue Jul 22 23:50:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	add_opt() now takes the union value. Dummy value introduced.  

Tue Jul 22 23:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	Hmm seems we need the union to be unanonymous so moved out.  

Tue Jul 22 23:21:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Add union @value member to struct option.  

Tue Jul 22 23:09:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Make get_opt_() only return the option.  

Tue Jul 22 16:16:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/stub.c:

	#include "util/stub.h".  

Tue Jul 22 15:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, util/Makefile.am, util/string.c, util/string.h,
	util/stub.c, util/stub.h:

	Moved libc stub functions to util/stub.*. Idea by pasky.  

Tue Jul 22 15:50:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Use assertions and get rid of old #defines.  

Tue Jul 22 15:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	Slim location message composing by using add_format_to_string().  

Tue Jul 22 15:09:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Updating comments.  

Tue Jul 22 15:01:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Commented out decode_uri_string() for it is not used and thus shall
	not defile our binary.  

Tue Jul 22 15:01:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print lang if hreflang is the same.  

Tue Jul 22 14:57:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Improve add_string_uri_to_string()s comment.  

Tue Jul 22 14:53:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	viewer/text/link.c:

	Stripping of uri password is now done through a generic
	add_string_uri_to_string() (yes the name is just too good).  

Tue Jul 22 14:25:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Introduce add_uri_to_string(). It's basicly the old get_uri_string()
	that now uses it as a backend.  

Tue Jul 22 14:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.c, session.h:

	session.task_target -> session.task_target_frame 

Tue Jul 22 13:46:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print name as title if no title, print media attribute value if any,
	and fix alternate stylesheets displaying.  

Tue Jul 22 13:35:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Give preferences to our names for html links. As a side effect, it
	forces lowercased name, print previous instead of prev, and more.
	Related functions and struct were enabled.  

Tue Jul 22 11:22:12 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, french translation was updated.  

Tue Jul 22 10:57:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print lang attribute value if link type is LT_ALTERNATE_LANG.  

Tue Jul 22 10:31:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Code simplification.  

Tue Jul 22 10:27:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_link() is now using html_link_parse(). Behavior should be
	unchanged. New code was activated and a missing else was added to
	html_link_parse().  

Tue Jul 22 10:03:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link of type UP was added, not standart but sometimes encountered.  

Tue Jul 22 09:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	First step to html_link() rewrite, some struct and functions were
	added to identify type of an html link, in respect of w3c
	documentation. Enclosed in #if 0/#endif to prevent compilation
	errors for now.  

Tue Jul 22 03:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	[String util restructuring] Purge the old string utils. <insert
	sentimental grace>.  

Tue Jul 22 03:34:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	[String util restructuring] Convert (de|en)code_shell_safe_url().  

Tue Jul 22 03:30:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert some missing users in
	get_image_map(). Another strange goto function. Please verify.  

Tue Jul 22 03:09:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_option() but it's hard to
	figure out the gotos.  

Tue Jul 22 03:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Rearrange add_select_item() to get rid of double negation.  

Tue Jul 22 02:57:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Test that there something to add before calling
	add_bytes_to_string() in scan_http_equiv().  

Tue Jul 22 02:54:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	[String util restructuring] Convert in_sock().  

Tue Jul 22 02:44:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix FIXME comment.  

Tue Jul 22 02:43:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	[String util restructuring] Convert str_rd().  

Tue Jul 22 02:39:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	[String util restructuring] Convert print_current_link_do().  

Tue Jul 22 02:33:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reindentation of add_select_item().  

Tue Jul 22 02:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix last commit.  

Tue Jul 22 02:28:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, viewer/text/form.c:

	[String util restructuring] encode_uri_string() now takes struct
	string.  

Tue Jul 22 02:23:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_controls() now takes a string
	struct.  

Tue Jul 22 02:17:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_multipart() now takes a string
	struct.  

Tue Jul 22 02:10:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] Convert get_form_url().  

Tue Jul 22 01:52:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	[String util restructuring] scan_http_equiv() now takes two string
	structs simplifying things a bit.  

Tue Jul 22 01:37:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert get_image_map().  

Tue Jul 22 01:30:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_link(). Hmm not sure the if
	(text.source) is not always true.  

Tue Jul 22 01:20:31 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/8859_5.cp, src/intl/codepage.inc:

	Typo fix in charset alias: 8895 -> 8859. Reported by Recai Oktas
	<roktas@omu.edu.tr>, fixes bug 225.  

Tue Jul 22 01:09:41 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Fix a bug introduced in src/sched/session.c:1.110->1.111: The
	titlebar is blanked while another tab is loading.  

Tue Jul 22 01:08:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Comment about perverse string composition in
	download_window_function().  

Tue Jul 22 01:07:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] do_html_select() gets the treatment.
	It's a very cryptic function. A macro is introduced to get rid of
	code dublication. Some ard nullification of the string is necessary
	but not that pretty. Mabbe a pointer that a (clear|reset)_string
	would be useful? 

Tue Jul 22 01:05:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Removed a superfluous fill_area() in the code for drawing the
	tab-bar.  

Tue Jul 22 00:32:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	[String util restructuring] Convert format_html().  

Tue Jul 22 00:20:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	STR_MAGIC -> STRING_MAGIC 

Tue Jul 22 00:14:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] print_char() now takes struct string as
	parameter.  

Tue Jul 22 00:07:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	TODO added: An optimized add_term_escape_to_string() would be nice.  

Tue Jul 22 00:05:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] Convert redraw_screen().  

Mon Jul 21 23:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: os_dep.c, os_dep.h:

	Purge check_shell_security(). It's partly made obsolete by
	add_shell_safe_to_string().  

Mon Jul 21 23:48:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert subst_file().  

Mon Jul 21 23:43:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert get_temp_name().  

Mon Jul 21 23:41:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Make actually use of add_string_to_string() in add_dir_entry().  

Mon Jul 21 23:39:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Minor reindentation.  

Mon Jul 21 23:37:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Added a FIXME regarding Bugzilla problems to newlines-coping part of
	do_textarea(). Entities are decoded too late.  

Mon Jul 21 23:34:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert download_window_function(). Use
	string utils for both stat message code paths.  

Mon Jul 21 23:28:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	No code redundancy in convert_string() anymore - removed obsolete
	FIXME.  

Mon Jul 21 23:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	[String util restructuring] Attack get_stat_msg().  

Mon Jul 21 23:08:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Fixed another trailing blank line.  

Mon Jul 21 23:04:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added some pathetic comment about how ugly is this file getting.  

Mon Jul 21 23:01:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Use in print_current_titlex(). Hmm
	there's some string.length mangling that I don't like, but if it
	worked before it should work still.  

Mon Jul 21 23:01:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	When actually cleaning up in done_string(), also zero
	string->length.  

Mon Jul 21 22:58:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Removed superfluous newline introduced in 1.42.  

Mon Jul 21 22:52:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Rename and make
	add_session_ring_to_str() have the the generic string add type.
	Update the user.  

Mon Jul 21 22:38:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	[String util restructuring] Use it in encode_textarea().  

Mon Jul 21 22:31:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	[String util restructuring] This is untested but very trivial. We
	should probably use string_concat() to make things clearer.  

Mon Jul 21 22:19:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	[String util restructuring] First user of add_format_... since a
	little extra work should not be a problem here.  

Mon Jul 21 22:13:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Typo fix in summary for the document.html.link_display option: hmtl
	-> html.  

Mon Jul 21 22:01:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	[String util restructuring] 

Mon Jul 21 21:48:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/interlink.c:

	[String util restructuring] 

Mon Jul 21 18:34:00 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, util/string.h:

	A string magic failure was fixed. INIT_STRING(s,l) macro was
	introduced (better name ?).  

Mon Jul 21 18:01:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	More paranoid fs->state test and removed the useless second one from
	ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 18:00:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Minor tidyup of ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 17:58:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Removed memrchr() usage introduced in 1.8 and sticked a TODO
	instead. It was never used anyway and needs a proper stub if
	supposed to be used.  

Mon Jul 21 17:37:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/mime.c:

	Tidyup of check_encoding_type(), mainly fixed bad indentation
	introduced in 1.24. Bad Miciah! ;-) 

Mon Jul 21 16:24:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/user.c, util/conv.c, util/conv.h:

	Introduce add_shell_safe_to_string() and use it in subs_cmd().  

Mon Jul 21 16:22:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Temp. fix for first string magic catch. Thanks zas. :) 

Mon Jul 21 16:22:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Rename: (set|check)_magic -> (set|check)_string_magic.  

Mon Jul 21 15:52:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Didn't I patch this? Test uri->hostlen instead of uri->host.  

Mon Jul 21 14:18:57 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/options.c, util/string.c,
	util/string.h:

	Magic check for struct string. Some changes related to this
	implementation, especially string initialization with NULL_STRING.
	Currently string debug is enabled by default in --enable-debug. This
	should catch operations on badly initialized struct string.  

Mon Jul 21 13:26:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Test returned value of init_string().  

Mon Jul 21 10:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	switch tidyup.  

Mon Jul 21 10:17:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Minor tidyup.  

Mon Jul 21 09:17:15 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Do not mix preallocated strings with not preallocated ones. Reported
	by Miciah, fix by me.  

Mon Jul 21 06:52:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	[String util restructuring] (132 add_to_str() remains) 

Mon Jul 21 06:19:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	[String util restructuring] Last one for now which should also fix
	unfortunate too soon removal of option name (de|en)coders.  

Mon Jul 21 06:14:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	[String util restructuring] (1) We joggle two strings. An
	un+/encoded. Use the unencoded to 'cache' @fcp so it can be free()d
	making cleaning up easier and no goto required.  

Mon Jul 21 06:05:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	[String util restructuring] option_type_info->write now takes a
	struct string. s/add_quoted_to_str/add_optstring_to_string/ using
	quoted encode adder as backend. Makes src/config/ work again.  

Mon Jul 21 05:58:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	[String util restructuring] Even though the { "", 0 } initialization
	is potentially bad, this has to be.  

Mon Jul 21 05:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Remove option name encoders. Old users now use add_optname_...  

Mon Jul 21 05:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	[String util restructuring] I am getting the feeling that
	make_keystroke is not the best name.  

Mon Jul 21 05:49:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	[String util restructuring] 

Mon Jul 21 05:47:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, conf.h:

	[String util restructuring] The next few patches in src/config/
	depends on each other. This one is big sorry.  

Mon Jul 21 05:22:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	[String util restructuring] 

Mon Jul 21 05:20:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	[String util restructuring] *Yawn* maybe we should add some macro to
	pep things up a bit.  

Mon Jul 21 05:16:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	[String util restructuring] Use for cache info msg box assembling.  

Mon Jul 21 05:12:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	[String util restructuring] Yay we get to use the new
	add_optname_... and hopefully also a bit smarter handling of dot
	adding. Unidentified Patch Object: remove unused rmdots() ... my
	excuse: I have 1200 lines to sync and don't care 'bout these 9 so
	pasky please be in a good mood when you read this one. ;) 

Mon Jul 21 05:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	[String util restructuring] Please excuse the indentation but before
	we didn't even test if the initialization was good and now we do.  

Mon Jul 21 04:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h:

	[String util restructuring] Last patch depends on this one since
	@header is a string struct.  

Mon Jul 21 04:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	[String util restructuring] Also make the defined add_*_string()
	take string struct. TODO: they should go in favour of generic
	add_uri_(components|parts)_to_string() that can also be used as
	backend by get_uri_string().  

Mon Jul 21 04:51:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	[String util restructuring] A little strangeness in
	encode_uri_string() which hopefully will be improved by a possible
	introduction of add_encoded_uri_string() later.  

Mon Jul 21 04:38:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Test uri->hostlen not uri->host.  

Mon Jul 21 04:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp.c:

	[String util restructuring] Don't panic. A bit preparing mixed in
	this patch mainly the macros for adding const strings to the
	fragment. Also some more test before adding. Could maybe use format
	string some places to improve readability.  

Mon Jul 21 04:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[String util restructuring] 

Mon Jul 21 04:11:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/finger.c:

	[String util restructuring] Use in the request sending.  

Mon Jul 21 04:09:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	[String util restructuring] First usage. Abandon file_data struct
	for string struct and make stat_* also take string.  

Mon Jul 21 04:00:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	Introduce the new restructured string util.  

Mon Jul 21 00:21:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Trivial @q optimization at parse_frame_widths().  

Mon Jul 21 00:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Partially reverted html_h() changes in zas' 1.146, restored proper
	encapsulation of the @h parameter.  

Mon Jul 21 00:03:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() synced w/ put_chars_conv() : put_chars_conv() now
	uses convert_string() as its backend. Finally got rid of this
	particularily annoying code duplication. Pasky is da master! 

Sun Jul 20 23:56:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() syncing w/ put_chars_conv() : Use dynamically
	allocated @buffer inside of put_chars_conv(), and call put_chars()
	only once at the very end. (XXX: Memory hit?) Also slight
	optimization (exit right after dummy put_chars() if charslen is
	zero).  

Sun Jul 20 23:43:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Moved @b to local
	scope in convert_string().  

Sun Jul 20 23:42:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @pp -> @charspos at
	the both sides.  

Sun Jul 20 23:41:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @bp -> @bufferpos at
	the both sides.  

Sun Jul 20 23:35:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Left the @buffer
	reallocation code only at one place, using the same path to reach it
	as in put_chars_conv(). The diffs are nicely sync'd up already ;-).  

Sun Jul 20 23:25:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Double-side tidyup.  

Sun Jul 20 23:16:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @ct ->
	@convert_table, @c -> @chars, @l -> @charslen.  

Sun Jul 20 23:12:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Fix the bug 213 side-bug: don't eat the character terminating entity
	string if it's not valid entity terminator (';'). Some comment
	sticked around about how buggy this piece of code is.  

Sun Jul 20 22:36:23 2003  Petr Baudis <pasky@ucw.cz>:

	* po/it.po:

	Italian translation update by Fabio. Ufff. Postponing mail for over
	a month doesn't pay off, says my hour spent by resolving 80
	conflicts ;-). At least I learned a little Italian :^).  

Sun Jul 20 21:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Vendor (ELinks project) email addy should be elinks-users mailing
	list instead of my mail addy ;-).  

Sun Jul 20 21:15:49 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Described recommended process of getting in changes to the
	elinks.spec.in file.  

Sun Jul 20 21:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	s/Copyright/License/, as Silviu Cojocaru <silviucc@home.ro> and vim
	syntax highlighting hints ;-).  

Sun Jul 20 21:02:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Commented out funny assertm() which (I _hope_) can never fail ;-).  

Sun Jul 20 20:33:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Use sprintf() instead of ulongcat() for printing the UID/GID
	numerical value, since we want to pad from right, not from left.
	Sorry, zas, that's something ulongcat() doesn't seem to be able to
	do so far ;-).  

Sun Jul 20 20:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Simplify the final ..<->.foo decision procedure, it should be much
	more straightforward (and elegant) now. This should hopefully also
	be the final fix to the ..foo being shown bug.  

Sun Jul 20 20:19:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Distributed the decision procedure comment in file_visible() to the
	individual steps.  

Sun Jul 20 20:18:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	file_visible(): @d_name -> @name 

Sun Jul 20 20:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Ehm. Compilation fix.  

Sun Jul 20 20:17:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Code flow naturalization in file_visible().  

Sun Jul 20 20:14:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Commented the file_visible() function, minor inner comment fix.  

Sun Jul 20 20:11:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Moved hidden-file decision procedure to new file_visible() function.  

Sun Jul 20 15:44:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, http/auth.c:

	Tidyup of the get_uri_string() calls.  

Sun Jul 20 15:44:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	get_uri_string()'s @components is of type enum uri_component.  

Sun Jul 20 15:43:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Moved the enum uri_component declaration near get_uri_string.  

Sun Jul 20 15:43:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Updated get_uri_string()'s comment.  

Sun Jul 20 15:37:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Use the new MIN() macro.  

Sun Jul 20 15:31:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Defined global macros MIN() and MAX(). I dreamed about their
	existence for a long time already, so here they go, for purely my
	personal pleasure! ;p 

Sun Jul 20 15:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/auth.c:

	get_uri_string() now add the marked components. Users do ~(URI_*).  

Sun Jul 20 15:12:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Use assertm() instead of if <-> internal() pairs at few places.  

Sun Jul 20 14:41:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c:

	Reverted the HTML <link> tag handling rework. Too big, changing
	option meaning without changing option name, removing useful option.
	Difficult to see what was changed and how. Please split and
	recheckin as gradual changes.  

Sun Jul 20 10:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	Html link tag handling was reworked. Feel free to improve (tip: bfu
	menu for these).  

Sat Jul 19 23:40:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Rename: add_opt_string() -> add_opt_str() by kuser.  

Sat Jul 19 23:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Some dummy comment about why option is defined as it is. Pasky is
	sleepy.  

Sat Jul 19 22:29:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Comment of uri_component enum. CVS IS BACK! Weeeeee :))) 

Thu Jul 17 08:56:30 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/align.h, config/cmdline.c, config/conf.c,
	config/dialogs.c, config/options.c, config/options.h,
	config/opttypes.c, config/urlhist.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, globhist/globhist.c,
	lowlevel/interlink.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, protocol/file.c,
	protocol/user.c, sched/download.c, sched/session.c,
	terminal/terminal.c, util/secsave.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/view.c:

	Type of root_options and cmdline_options to struct option *. General
	cleanup. Patch by Karsten Schölzel <kuser@gmx.de>.  

Thu Jul 17 06:55:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/window.c:

	Fix bug 33: Problems with drawing out of tabs. I'm hardly sure of
	this change but it seems to work.  
	
	The problem was related to 'empty windows' used by image maps and
	listboxes.  I first tried substituting register_bottom_half() for
	add_empty_window() but that caused bad stuff with image maps so I
	changed empty_window_handler() to call term_send_event() instead of
	directly calling the next window's handler.  

Thu Jul 17 04:23:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix off by one error.  

Wed Jul 16 08:41:59 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po and french translation was updated.  

Wed Jul 16 02:45:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	point_intersect(): Removed assert(p1) because p1 will not have been
	set if the last search yielded no results.  

Tue Jul 15 23:15:07 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Consistency fix from Jonas: s/void\nstatic /static void\n/ 

Tue Jul 15 22:32:10 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	An option named document.html.link_display was added to control how
	html link elements are rendered.  

Tue Jul 15 22:18:00 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: main.c, config/options.c, globhist/globhist.c,
	globhist/globhist.h:

	Fix bug 157: Periodically save globhist to disk.  

Tue Jul 15 22:15:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Fix bug 99: ^K in textareas should kill to end-of-line, not
	end-of-buffer, and ^U should kill to beginning-of-line, not
	beginning-of-buffer.  Please review my super-funky code.  

Tue Jul 15 21:53:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link: information now contains hreflang and type if they are
	provided.  

Tue Jul 15 21:33:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplification in check_encoding_type() composed by Miciah and me.  

Tue Jul 15 20:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Fix logic in check_encoding_type().  

Tue Jul 15 20:18:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, dialogs/menu.h,
	document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, document/html/renderer.h,
	elusive/renderer/text/renderer.c, sched/history.c, sched/session.c,
	sched/session.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c,
	viewer/text/link.h, viewer/text/search.c, viewer/text/search.h,
	viewer/text/textarea.c, viewer/text/textarea.h, viewer/text/view.c,
	viewer/text/view.h, viewer/text/vs.c, viewer/text/vs.h:

	Another big rename: struct f_data_c -> struct document_view. Idea by
	pasky.  

Tue Jul 15 17:48:44 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/viewer/text/link.c:

	Typo fix. ~ char was removed from title of reset button. .po files
	were updated.  

Tue Jul 15 16:52:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Missing renames pasted by Zas.  

Tue Jul 15 12:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/frames.c,
	document/html/frames.h, document/html/renderer.c,
	document/html/renderer.h, document/html/tables.c,
	elusive/renderer/text/renderer.c, sched/history.c, sched/session.c,
	viewer/dump/dump.c, viewer/dump/dump.h, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c, viewer/text/link.h,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c,
	viewer/text/view.h, viewer/text/vs.c:

	Rename: struct f_data -> struct document and (f_)data member names
	to document. Idea by pasky.  

Tue Jul 15 06:32:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Removed an unnecessary test.  

Tue Jul 15 06:17:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	If we're using snprintf to truncate, we might as well use it to pad
	as well, thus saving a variable, a loop, and some calls to
	add_chr_to_str.  

Tue Jul 15 06:07:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	Make MAX_(BIND|CONNECT)_TRIES attempts rather than
	MAX_(BIND|CONNECT)_TRIES - 1 attempts.  

Tue Jul 15 06:02:05 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	Declare list_directory() and read_file() as returning values of type 
	enum connection_state.  

Tue Jul 15 05:52:50 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	When protocol.file.show_hidden_files is enabled, hide even files
	with names beginning with multiple dots.  

Mon Jul 14 20:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Switch off code to add default port in get_uri_string(). HTTP Auth
	hopefully won't suffer. Reported by Zas.  

Mon Jul 14 19:51:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/cache.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	lowlevel/connect.c, mime/mime.c, protocol/Makefile.am,
	protocol/file.c, protocol/finger.c, protocol/ftp.c, protocol/uri.c,
	protocol/uri.h, protocol/url.c, protocol/url.h,
	protocol/http/auth.c, sched/download.c, sched/session.c,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Complete first part of the url -> uri switch. Some of the moved
	functions still need to be cleaned up and we could probably populate
	with struct uri more places.  

Mon Jul 14 19:27:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in get_filename_from_url(). Last dep. part II. ;p 

Mon Jul 14 19:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_directories(). Last dependency on
	parse_url().  

Mon Jul 14 18:48:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_url(). Note: !parse_url() ==
	parse_uri().  

Mon Jul 14 18:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in join_url(). Note: !parse_url() == parse_uri().  

Mon Jul 14 18:23:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplify check_encoding_extension() and correct the comment.  

Mon Jul 14 10:17:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Forgot to tune the assertions to how the function is now used.
	Thanks Zardoz.  

Mon Jul 14 07:15:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	Typo fix: costum -> custom.  

Mon Jul 14 07:09:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A double affectation was fixed ( int a = a = b;) 

Sun Jul 13 13:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Renames in extract_proxy().  

Sun Jul 13 13:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	protocol/url.c, protocol/url.h, viewer/text/link.c:

	Move get_uri_string() .. and rename it.  

Sun Jul 13 13:02:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	strip_url_password() now uses get_uri_string().  

Sun Jul 13 12:57:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	get_uri_string() is now a Swiss army knife. Use with care. ;) 

Sun Jul 13 10:24:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Correctly handle PROTOCOL_UNKNOWN and free_syntax in uri string
	composing.  

Sun Jul 13 10:17:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	The quick solution for configuring adding of data to the uri string.  

Sat Jul 12 20:42:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make get_uri_string() IPv6 aware and query protocol system for
	slashes.  

Sat Jul 12 20:21:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/url.h, viewer/text/form.c:

	Move (en|de)code_url_string() and friend doing s/url/uri/.  

Sat Jul 12 19:23:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use entry->valid to test for invalid entries. ;) 

Sat Jul 12 17:38:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix whitespace and update comments.  

Sat Jul 12 17:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix realm double freeing on alloc failure.  

Sat Jul 12 17:23:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Remove useless test and assertion + comments updates.  

Sat Jul 12 17:17:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	*mumble* Fix http auth basic again. *mumble* 

Sat Jul 12 16:51:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Properly exporting of invalid entries through accessor.  

Sat Jul 12 13:08:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Allocate uid and passwd together.  

Sat Jul 12 12:59:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, http.c:

	Actually copy something in set_auth_*().  

Fri Jul 11 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: url.c, url.h:

	Delete dead code.  

Fri Jul 11 19:58:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update comments.  

Fri Jul 11 19:48:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Get rid of cleanup gotos by freeing @newurl after lookup.  

Fri Jul 11 19:40:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use uri->(user*|pass*) for comparison.  

Fri Jul 11 19:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	One goto iterator out, one label to go.  

Fri Jul 11 19:20:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Get rid of add_auth_code enum. Instead the added entry is returned.  

Fri Jul 11 17:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	A few fixes: Always set entry->valid according to @uid and @passwd.  
	Proper initialization of @uid and @passwd.  The entry can be invalid
	so removed from assertion.  

Fri Jul 11 14:26:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update and add a few comments.  

Fri Jul 11 06:06:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix assertion failure and return value.  

Fri Jul 11 04:35:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Mark the entry valid when the user confirmed.  

Fri Jul 11 03:56:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Aasert members when updating.  

Fri Jul 11 03:53:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Simplify the updating code path.  

Fri Jul 11 03:47:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update the entry members step by step instead of recreating the
	entry.  

Thu Jul 10 23:05:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	More usage of entry->valid to mark if @uid and @passwd is properly
	defined.  

Thu Jul 10 22:44:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	Always allocate @uid and @passwd in init_auth_entry().  

Thu Jul 10 13:53:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Try to cleanup the complicated auth entry comparison.  

Thu Jul 10 13:27:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	Rename: get_auth_url() -> get_uri_string(), and move it to
	protocol/uri.* 

Thu Jul 10 13:19:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.h:

	Make @valid and @blocked members boolean fields.  

Thu Jul 10 13:17:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.h:

	Whitespace fix.  

Thu Jul 10 13:16:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h:

	Remove unused url_len member.  

Thu Jul 10 13:02:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Split out auth entry initialization and get rid of gotos.  

Thu Jul 10 12:50:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Writeout @ret usage.  

Thu Jul 10 12:38:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Simplify the code path in auth adding.  

Thu Jul 10 12:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Remove allocation of username and password when adding an entry.  

Thu Jul 10 12:05:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix leak in the alloc failure code path.  

Thu Jul 10 04:38:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Generalize get_auth_url() to use protocol system for getting port
	number.  

Thu Jul 10 04:28:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use struct uri in get_auth_entry(), 

Thu Jul 10 03:02:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Urify add_auth_entry(). Add missing #include.  

Thu Jul 10 02:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update comment to use enum names.  

Thu Jul 10 02:46:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Use enum for add_auth_entry().  

Thu Jul 10 00:59:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	assert(info) _before_ dereferencing it.  

Thu Jul 10 00:35:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Urify find_auth().  

Thu Jul 10 00:00:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix leak when parse_uri() failed.  

Wed Jul  9 23:56:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/user.c, protocol/http/http.c, sched/connection.c:

	Passing uristring to parse_uri() seems more natural.  

Wed Jul  9 23:03:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bookmarks/dialogs.c, config/dialogs.c,
	config/dialogs.h, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/edit.h, dialogs/hierbox.c,
	dialogs/hierbox.h, dialogs/info.c, dialogs/info.h, dialogs/menu.c,
	dialogs/menu.h, dialogs/options.c, dialogs/options.h,
	dialogs/refresh.c, globhist/dialogs.c, lowlevel/interlink.c,
	lowlevel/timer.c, mime/backend/default.c, osdep/os_dep.c,
	protocol/user.c, protocol/http/http.c, scripting/lua/core.c,
	ssl/connect.c, viewer/text/form.h, viewer/text/link.h,
	viewer/text/search.h, viewer/text/view.h:

	Misc. #include reordering all over the map.  

Wed Jul  9 20:21:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Compilation fix.  

Wed Jul  9 20:09:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	More mailcap and mime.types locations.  

Wed Jul  9 19:46:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Callocize back init_keepalive_connection().  

Wed Jul  9 19:40:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Uncle pasky's today compilation fixes.  

Wed Jul  9 19:21:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	add_host_connection() simplification. And always use mem_calloc()
	when allocating structures, Jonas.  

Wed Jul  9 18:37:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored assertion error message and recovery path for
	assigned!=download at load_url().  

Wed Jul  9 18:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored the assertion failure message in !list_empty() assertion at
	check_keepalive_connections().  

Wed Jul  9 18:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Fixed add_keepalive_connection() c->sock1!=-1 recovery path.  

Wed Jul  9 18:19:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed bug intrduced in 1.152. POST requests _are_ unrestartable! 

Wed Jul  9 17:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[P]urify user protocol handling. Should speed up thing a bit.  
	Reorder the flow so we bail out earlier if no program is defined.  
	Added note about possible problem of host containing also username
	uri part.  

Wed Jul  9 15:08:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Also show bad URL syntax warning if @proto is NULL.  

Wed Jul  9 15:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Require that @prot is non NULL and fix possible leak when no @host
	was returned.  

Wed Jul  9 14:39:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Merge in prog_func() in user_func().  

Wed Jul  9 14:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Split out subject scanning, and elimintate changes of the url
	string.  

Wed Jul  9 13:41:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove bad assertion and readd connection->from initialization.
	Triggered by Miciah unbacking to a https page.  

Wed Jul  9 08:54:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Compilation fix: Typecasts in the GNUTLS code.  

Wed Jul  9 01:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad memmove() size. Spotted by Zardoz.  

Wed Jul  9 01:51:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix collection of mailto subject.  

Wed Jul  9 01:24:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix untested usage of @subj when scanning for @subj_end. Reported by
	pasky.  

Wed Jul  9 01:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make uri hostnames end also before '?' (needed for mailto uris).  

Tue Jul  8 23:21:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added some mailto test cases.  

Tue Jul  8 19:04:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Simplify mailto subject handling even though it seems not to be
	correctly used.  

Tue Jul  8 18:46:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, user.c, user.h:

	Knock out more 'url' util users.  

Tue Jul  8 18:00:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	#include POST_CHAR from the right place.  

Tue Jul  8 15:31:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Never mind the segfaults .. here come the fix.  

Tue Jul  8 15:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Pep up the cookie loading code to be less boring. Test return
	values.  

Tue Jul  8 13:54:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Get rid of gotos in allocation failure code path making it slower
	but more readable.  

Tue Jul  8 13:50:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Free the struct in free_cookie().  

Tue Jul  8 13:49:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Generalize and populate usage of cleanup_cookies().  

Tue Jul  8 13:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad domain and server matching introduced in last patch.  

Tue Jul  8 12:56:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Complete uri usage in cookie land.  

Tue Jul  8 12:39:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Prepare for the uri take over in cookie land. Fix some untested
	return values.  

Tue Jul  8 12:23:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.h:

	Move end_of_dir() to uri header.  

Tue Jul  8 12:18:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	mime/backend/default.c, sched/connection.c:

	Remove some #includes of protocol/url.h.  

Tue Jul  8 02:25:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, http/http.c:

	Complete the struct uri take over in the http backend.  

Tue Jul  8 02:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Struct uri usage: Revenge of the buggy servers.  

Tue Jul  8 01:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More struct uri usage.  

Tue Jul  8 01:24:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Convert send_cookies() to use struct uri.  

Tue Jul  8 00:02:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Better sanity checking in http_send_header() + small cleanups.  
	Generalize adding hostname to header so IPv6 are correctly handled
	for REFERER_SAME_URL.  

Mon Jul  7 22:27:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix leak triggered by `elinks --dump localhost:8080`.  

Mon Jul  7 20:13:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Generalize keyact_box_item size.  

Mon Jul  7 20:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Small cleanup.  

Mon Jul  7 19:15:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Complete struct uri usage in http_send_header().  

Mon Jul  7 19:14:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove check_queue_bugs() assertion failure handling. It's debug
	code so we dump core.  

Mon Jul  7 17:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add '.' before extension to temporary file.  

Mon Jul  7 15:36:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, util/blacklist.c, util/blacklist.h:

	Preparing for complete struct uri usage in http protocol backend.  

Mon Jul  7 15:04:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/Makefile.am, lowlevel/af_unix.c,
	lowlevel/af_unix.h, lowlevel/interlink.c, lowlevel/interlink.h:

	lowlevel/af_unix.* -> lowlevel/interlink.*.  

Mon Jul  7 13:14:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix post uri handling. Reported by hq_star on #elinks.  

Mon Jul  7 01:29:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Remove dead code that has been replaced by struct uri usage.  

Mon Jul  7 01:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Optimize the encoding extension testing.  

Mon Jul  7 00:57:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	More usage of connection uri.  

Mon Jul  7 00:12:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: atrule.c, parser.c, ruleset.c,
	scanner.c, state.h, tree.c:

	Revert the assertion failure handling.  
	1) Some are only useful while getting it running 
	2) I cannot bare having to deal with goto spaghetti code already ;) 
	3) Checking of some max stack depth should maybe be generic and
	always done.  Let's get it running before we start do smart things
	...  

Sun Jul  6 23:24:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Don't think hidden file's name is its extension. (Ignore dot at the
	start of string or right after a slash when looking for a file
	extension.) Discovered by Diablo-D3.  

Sun Jul  6 23:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/hotkey.c, dialogs/document.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, elusive/parser/css/atrule.c,
	elusive/parser/css/parser.c, elusive/parser/css/ruleset.c,
	elusive/parser/css/scanner.c, elusive/parser/css/state.h,
	elusive/parser/css/tree.c, lowlevel/af_unix.c,
	lowlevel/interlink.c, protocol/protocol.c, protocol/uri.c,
	protocol/http/http.c, sched/connection.c, ssl/connect.c,
	util/fastfind.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	(Re)introduced recovery paths for failed assertions. Ufff.... Jonas,
	please check check_queue_bugs().  

Sun Jul  6 23:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup get_temp_name(). The appended extension is now everything
	after first dot, so external handler is given a better hint.  

Sun Jul  6 22:15:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Added note about if_assert_failed to assert() description.  

Sun Jul  6 22:15:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Moved if_assert_failed after other assert functions.  

Sun Jul  6 22:04:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Introduced if_assert_failed to exclude assert_failed tests and the
	(dead) recovery code from FASTMEM.  

Sun Jul  6 21:51:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Whitespace fixes.  

Sun Jul  6 21:49:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Make sure assert_failed is initialized to zero. (I heard that global
	variables are automatically zeroed but didn't check that, so I'm
	taking the safe path.  

Sun Jul  6 21:25:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, main.c, protocol/http/http.c,
	protocol/http/https.c, sched/connection.c, ssl/connect.c,
	ssl/ssl.c, ssl/ssl.h:

	Removed SSL includes from elinks.h, this introduces not quite nice
	hack, but a great opportunity for certain thing (you'll see when you
	look at the diff >:) and mainly it speeds the compilation up by cca
	0.7s - 0.8s per file on my machine (which is about half of the whole
	compilation time for the smaller files). Violence, in the proper
	context, is good. Will you hit me? 

Sun Jul  6 20:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Add missing ssl/ssl.h  #include.  

Sun Jul  6 20:44:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/connection.h, ssl/connect.c, protocol/http/http.c:

	ssl_t *ssl -> void *ssl in struct connection. And we don't need to
	include ssl/ssl.h anymore in sched/connection.h as a nice
	side-effect.  

Sun Jul  6 20:28:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced assert_failed, which is set to 1 if the last assert(m)()
	failed, zero otherwise. Recovery paths made possible! ;-) Now who
	will reintroduce them...? ;) 

Sun Jul  6 17:53:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Removed some boring useless explicit values enumeration. If things
	will stop working now, blame this.  

Sun Jul  6 17:51:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Assert sanity.  

Sun Jul  6 11:53:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move check_queue_bugs() and add #else branch so it don't have to be
	wrapped in macros.  

Sun Jul  6 11:11:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, sched/connection.h:

	Move read_func back to struct connection. No ftp_c.._info is valid.
	Reported by zas.  

Sun Jul  6 08:48:15 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	cmd_buffer must be last field in struct ftp_connection_info ! 

Sun Jul  6 03:42:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/proxy.c, sched/connection.c:

	Oops move scripting hook #include.  

Sun Jul  6 03:18:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Hopefully the keepalive connection host should be finally correct.
	Added assertion to back it up.  

Sun Jul  6 02:45:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Finally knock out connection->url and users meaning lots of small
	optimizations.  

Sun Jul  6 01:31:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split out basic connection initialization.  

Sun Jul  6 00:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/proxy.c, protocol/proxy.h,
	sched/connection.c:

	Move out proxy handling.  

Sat Jul  5 19:09:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Add label removed in (void *) -1 cleanup when using GNUTLS. Reported
	by Zardoz.  

Sat Jul  5 18:13:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A small fix of the keepalive connection host initialization.  

Sat Jul  5 17:57:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Grouped and further commented host connection management.  

Sat Jul  5 16:13:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove INFO_LIST from connect_info(): unused and queue is public
	anyway.  

Sat Jul  5 13:19:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use correct option in forcehtml_cmd().  

Sat Jul  5 13:06:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, sched/connection.c:

	Remove captions from aliases introduced in mime/ integration.  

Sat Jul  5 12:45:43 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, osdep/os_dep.c:

	Some hardcoded in os_dep.c command strings are now defined in
	setup.h.  

Sat Jul  5 10:24:40 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, dialogs/document.h, dialogs/menu.c,
	viewer/text/view.c:

	Some assertion failures were fixed, some actions require a current
	document to make sense. nowhere_box() function was introduced, it
	print You are nowhere! message.  

Sat Jul  5 09:16:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	HTML4 attributes frame, border, rules for tables were not handled as
	it should. This was fixed accordingly to w3.org recommendations.
	This fixes bug 29.  

Sat Jul  5 08:07:41 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul  5 03:41:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/README:

	Smooth out the rough edges. Add title and CVS Id tag.  

Sat Jul  5 03:20:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/https.c, sched/connection.c, ssl/connect.c:

	Initialize connection->ssl in https handler. This way we can get rid
	of the ugly (void *) -1 hack and bail out earlier. Untested but
	fairly simple.  

Sat Jul  5 01:20:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2.CVS 

Sat Jul  5 01:14:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2 

Sat Jul  5 00:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Some final retouching of the boxes. I'm an ascii-art freak. Almost
	there, CIA commit #999! 

Sat Jul  5 00:48:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Retouched and actualized the ideal dependency tree, added couple of
	notes. CTYRI! 

Sat Jul  5 00:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, sched/connection.c, sched/connection.h,
	ssl/connect.c:

	'Predeclare' struct connection so we can give connection->conn_info
	proper type. (4 mississipi) 

Sat Jul  5 00:29:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, sched/connection.h:

	Cleanups of struct connection: remove unused member and move
	read_func to ftp_connection_info. If it should be reintroduced it
	should have some typedef attached.  

Fri Jul  4 23:35:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Make connection->unrestartable a boolean field. It was apparently
	involved in a http hack to mark form posting. We now use
	connection->uri.post to check that instead.  

Fri Jul  4 23:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.h, ssl/connect.c:

	Make connection->no_tsl a boolean field.  

Fri Jul  4 21:41:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Rename: add_keepalive_socket() -> add_keepalive_connection().  

Fri Jul  4 21:11:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	More connection uri usage and a small keepalive_connection
	allocation optimization.  

Fri Jul  4 20:55:44 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Potential bug fixed, get_url_data() may return NULL, causing
	stracpy() to fail. Minor cleanup and optimizations.  

Fri Jul  4 20:45:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup and move try_to_suspend_connection() closer to the
	user.  

Fri Jul  4 20:25:30 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Do not print . or .. directories in ftp listing, this bug was
	introduced recently.  

Fri Jul  4 20:18:39 2003  Petr Baudis <pasky@ucw.cz>:

	* test/README:

	Grammar fixes. 13! 

Fri Jul  4 20:04:06 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print link of type text/css or image/x-icon, but let links of
	other types to be print. It clarifies a point discussed on #elinks.  

Fri Jul  4 19:27:03 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A buffer is now used for post data decoding, it prevents repeated
	calls to add_chr_to_str(). add_bytes_to_str() is now used instead.
	unhx() replaces equivalent code. As a side effect it fixes a warning
	(add_chr_to_str a=0) issued in debug mode when calling
	add_chr_to_str() with a nul char.  

Fri Jul  4 19:19:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	A assertion failure was fixed. goto_url() should only be called if
	url is not NULL.  

Fri Jul  4 19:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: keepalive_connection->conn -> keepalive_connection->socket.  

Fri Jul  4 18:57:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: host_connection->conn -> host_connection->connections.  

Fri Jul  4 18:50:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove useless test: get_protocol_handler() always returns handler.  

Fri Jul  4 18:45:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Reorganize host_connection management. Connection with no hosts
	(file protocol) are not in the list. Introduce accessors for the
	list. Uh and finally fix the buggy uri usage from previous patch.  

Fri Jul  4 15:53:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Introduce and use get_uri_port().  

Fri Jul  4 15:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Change policy so all struct uri validation is done in accessors.  

Fri Jul  4 15:01:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Use struct uri when getting protocol handler.  

Fri Jul  4 14:50:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move out initialization of keepalive connections. Makes way for
	removal of evil gotos. But now we always del_connection().  

Fri Jul  4 14:11:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Slightly alter done_keepalive_connection() to make socket closing
	optional. Use it in has_keepalive.connection().  

Fri Jul  4 13:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Rename: get_keepalive_socket() -> has_keepalive_connection() +
	altered it's semantics to match the name.  

Fri Jul  4 13:14:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: del_keepalive_socket() -> done_keepalive_connection() + and
	use it when aborting all.  

Fri Jul  4 12:58:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Some initial usage of connection->uri introduced. Uri helpers has to
	be added to go further.  

Fri Jul  4 12:12:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Add struct uri member to struct connection. It is not used yet but
	bad uris are detected by initialization.  

Fri Jul  4 11:56:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Rename: set_timeout() -> set_connection_timeout().  

Fri Jul  4 10:57:16 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/search.c, viewer/text/search.h:

	get_search_data() and associate functions were moved from renderer.c
	to viewer/text/search.c, and becomes static.  

Fri Jul  4 09:45:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor optimizations.  

Fri Jul  4 09:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: Makefile.am, parser.h, renderer.c,
	renderer.h, frames.c, frames.h:

	Frame and frameset functions were moved to frames.{c,h}.  

Fri Jul  4 02:16:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/cache.h, sched/connection.h, sched/download.h,
	sched/session.h:

	Reorder and trim #includes.  

Fri Jul  4 01:49:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/location.h, sched/session.c,
	sched/session.h, viewer/dump/dump.c, viewer/dump/dump.h,
	viewer/text/view.c:

	Monster patch. Rename: struct status -> struct download. Idea by
	pasky. Also contains some variable renames, sorry.  

Fri Jul  4 00:54:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Reorder #includes.  

Fri Jul  4 00:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/download.c, sched/download.h:

	Rename: struct download -> struct file_download. Idea by pasky.  

Fri Jul  4 00:46:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Added macros for testing connection state 'groups'.  

Fri Jul  4 00:25:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h:

	Put connection states in enum connection_state. Added paskys
	description of values.  

Thu Jul  3 23:30:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Group together keepalive functions.  

Thu Jul  3 22:55:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_keepalive_list() -> get_keepalive_connection().  

Thu Jul  3 22:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_list() -> get_host_connection().  

Thu Jul  3 22:43:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: h_conn -> host_connection, k_conn -> keepalive_connection.  

Thu Jul  3 22:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Useless test prevention.  

Thu Jul  3 22:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split up stat_timer() to get rid of @st_r variable.  

Thu Jul  3 22:31:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor cleanup, optimizations, assert(), ....  

Thu Jul  3 22:26:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A few cleanups.  

Thu Jul  3 22:08:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Bunch of miscelleanous cleanup, optimizations, assert(), ....  

Thu Jul  3 21:51:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use assertions instead of internal() calls.  

Thu Jul  3 21:36:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	assert() and assertm()...  

Thu Jul  3 21:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	check_queue_bugs() was greatly simplified. Don't try to sort and
	check again.  

Thu Jul  3 21:26:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	And a useless comment about previous stuff is gone...  

Thu Jul  3 21:25:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	An unused parameter was removed from format_frame().  

Thu Jul  3 21:22:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: getpri() -> get_priority().  

Thu Jul  3 21:20:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	if () internal() -> assertm().  

Thu Jul  3 21:10:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Cleanup and if () internal() -> assertm().  

Thu Jul  3 21:05:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, document/html/renderer.c,
	document/html/renderer.h:

	enum cp_status was introduced, long variables names are now used in
	get_convert_table(), cleanup.  

Thu Jul  3 21:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use given connections id in connection_disappeared().  

Thu Jul  3 20:52:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Rename connection->count to connection->id.  

Thu Jul  3 20:38:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, document/cache.h,
	document/html/renderer.h, osdep/os_dep.c, sched/connection.c,
	sched/connection.h, util/types.h:

	Eliminate tcount typedef. Hope nobody minds.  

Thu Jul  3 20:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup.  

Thu Jul  3 10:59:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/info.c, document/cache.c, document/html/renderer.c,
	lowlevel/select.c, sched/connection.c, util/types.h:

	Rename: CI_* -> INFO_*.  

Thu Jul  3 10:45:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Moved check_queue_bugs() call to del_connection().  

Thu Jul  3 10:32:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Put PRI_* values in enum connection_priority.  

Thu Jul  3 10:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Improved and moved comments for load_url to header file 

Thu Jul  3 09:00:05 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Jul  3 08:47:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Cleanup, optimizations, missing assertions...  

Thu Jul  3 08:24:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Some missing assertions were added.  

Thu Jul  3 08:19:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor optimization.  

Thu Jul  3 03:10:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Only use one bit for boolean members.  

Thu Jul  3 02:25:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/parser.c,
	document/html/renderer.c:

	The last few compile fixes. ELinks is back online again.  

Thu Jul  3 02:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, search.c, view.c, view.h, vs.c:

	Some more brute force compilation fixes. I hope you sleep tight zas
	;) 

Thu Jul  3 01:40:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h:

	Some compilation fixes that I should apparently provide.  

Thu Jul  3 01:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h,
	ssl/connect.c:

	Rename: setcstate() -> set_connection_state().  

Thu Jul  3 01:23:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: Makefile.am, link.c, link.h, view.c, view.h:

	Moved link-related stuff from viewer/text/view.* to
	viewer/text/link.*. Jonas will do the compilation fixes associated.
	Have fun, Jonas ;-).  

Thu Jul  3 01:11:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Remove (hopefully) dead code.  

Thu Jul  3 01:03:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, sched/download.c, sched/download.h,
	sched/error.c, sched/history.c, sched/location.h, sched/session.c,
	sched/session.h, ssl/connect.c, ssl/connect.h:

	More #include sched/connection.h fixes.  

Thu Jul  3 00:47:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/Makefile.am,
	viewer/text/form.c, viewer/text/form.h, viewer/text/textarea.c,
	viewer/text/textarea.h, viewer/text/view.c, viewer/text/view.h:

	Moved forms drawing/handling from viewer/text/view.* to
	viewer/text/form.*. Jonas will do the compilation fixes associated.  

Thu Jul  3 00:28:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/info.c, dialogs/menu.c, document/cache.c,
	lowlevel/connect.c, lowlevel/connect.h, protocol/file.c,
	protocol/ftp.c, protocol/protocol.c, protocol/protocol.h,
	protocol/http/http.c, protocol/http/https.c, scripting/lua/hooks.h,
	viewer/dump/dump.c, viewer/dump/dump.h:

	sched/sched.h #includes changed to sched/connection.h 

Thu Jul  3 00:18:36 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: textarea.c, textarea.h, view.c, view.h:

	Compilation fixes.  

Thu Jul  3 00:15:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	sched/sched.* -> sched/connection.* 

Thu Jul  3 00:14:31 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Moved a static function before its caller.  

Thu Jul  3 00:12:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, connection.h, sched.c, sched.h:

	Reverted the code move out of sched/sched.*. Don't panic, the change
	is good, but we'll do it w/ preserving history.  

Thu Jul  3 00:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.h, textarea.h:

	Header file fix.  

Thu Jul  3 00:07:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: terminal/terminal.c, viewer/text/Makefile.am,
	viewer/text/textarea.c, viewer/text/textarea.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved textarea-related functions from viewer/text/view.* to
	viewer/text/textarea.*. Zas will do the compilation fixes
	associated.  

Thu Jul  3 00:05:27 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Fix status message printing...  

Thu Jul  3 00:02:59 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Stricter assertions.  

Wed Jul  2 23:58:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup.  

Wed Jul  2 23:56:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Missing variables fixes.  

Wed Jul  2 23:49:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	The textarea fieldop handlers now take additional @rep parameter.  

Wed Jul  2 23:47:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Moved format_text() call from encode_controls() to
	encode_textarea().  

Wed Jul  2 23:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Ambiguous else fixes.  

Wed Jul  2 23:40:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	Moved connection management to sched/connection.* 

Wed Jul  2 23:38:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Textarea drawing moved from draw_form_entry() to draw_textarea().  

Wed Jul  2 23:21:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Extracted out the textarea field_op handlers to separate functions.  

Wed Jul  2 23:14:16 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, view.h:

	Compilation fixes.  

Wed Jul  2 23:03:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Namespace cleanup: _area_cursor() -> area_cursor().  

Wed Jul  2 23:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Should include search.h. Thanks, zas.  

Wed Jul  2 23:00:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Namespace cleanup: _search_for() -> search_for_do().  

Wed Jul  2 22:59:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, viewer/text/Makefile.am,
	viewer/text/search.c, viewer/text/search.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved searching-related functions from viewer/text/view.* to
	viewer/text/search.*. Zas will do the compile fixes associated.  

Wed Jul  2 22:36:41 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hmmm, french syntax error...  

Wed Jul  2 22:07:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	An assertion failure was fixed.  

Wed Jul  2 22:00:44 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Assertions: The End. Please report any assertion failure, false
	alerts may occur due to strictness.  

Wed Jul  2 20:47:50 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	back() and unback() functions were removed. go_back() and
	go_unback() are directly used.  

Wed Jul  2 20:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions.  

Wed Jul  2 18:30:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:17:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:05:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:55:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops.  

Wed Jul  2 17:54:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:26:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Oops, so he had _this_ in the srch_cmp() fail route ;-). Fixed
	search highlighting bug introduced by my last cleanups, reported and
	pointed out by zas.  

Wed Jul  2 17:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:17:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Minor tidyup. I wonder what so precious Mikulas had in the
	srch_cmp() fail route ;-).  

Wed Jul  2 17:13:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	is_in_range() cleanup, removal of some useless checks.  

Wed Jul  2 17:02:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 16:46:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. get_search() cleanup and optimization.  

Wed Jul  2 16:26:17 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. Please report any issue.  

Wed Jul  2 16:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some assertions were added. Please report any issue.  

Wed Jul  2 16:02:55 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	Minor cleanup. Please do not write a = b == c but a = (b == c).  

Wed Jul  2 12:05:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Misc. small cleanups.  

Wed Jul  2 12:01:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix printing of checking message.  

Wed Jul  2 10:46:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Calling xpand_lines() with part->data->data == NULL is a valid case.
	Assertion was modified. It fixes bug 221.  

Wed Jul  2 10:23:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.h, sched.h:

	Added comment by pasky of connection->pri + fix #includes.  

Wed Jul  2 02:17:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Rename: h_conns -> host_connections.  

Wed Jul  2 02:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	You do not see this commit. You never saw any commit like this. This
	commit does not exist. Better go and have some reading on e2, and
	forget this whole thing. (Comments update.) 

Wed Jul  2 02:06:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix BACKTRACE being wrongfully defined.  

Wed Jul  2 01:52:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	term being NULL is a valid case in get_bfu_color().  

Wed Jul  2 00:47:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/lua/hooks.lua.in:

	Prefixes by involved (aka A. Valente) and Grzegorz Adam Hankiewicz
	added.  

Wed Jul  2 00:44:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/cache.c, document/cache.h,
	sched/connection.c, sched/sched.c, util/types.h:

	Move type declarations from elinks.h to util/types.h but pasky still
	needs to rebuild *MUAHAHAHA* 

Wed Jul  2 00:16:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/cache.h, sched/connection.h,
	sched/sched.h:

	Minor #include cleanups and move longlong #define to elinks.h 

Tue Jul  1 22:39:00 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A bug in entities cache was fixed. &Agrave;&agrave; gave two upcased
	chars, and &agrave;&Agrave two lowcased chars due to a case
	insensitive comparaison. Trivial.  

Tue Jul  1 22:06:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	XD_TOP -> XD_UP, XD_BOTTOM -> XD_DOWN 

Tue Jul  1 22:04:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimizations in set_xchar() and draw_frame_lines(). An enum was
	introduced for direction parameter of set_xchar().  

Tue Jul  1 21:36:38 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Last bits of draw_form_entry() cleanup.  

Tue Jul  1 21:24:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup and optimization in draw_form_entry(), case FC_TEXTAREA.  

Tue Jul  1 21:06:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup in draw_form_entry(), case FC_TEXTAREA, step 1.  

Tue Jul  1 20:59:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some declarations and one affectation were moved near where they are
	used.  

Tue Jul  1 20:51:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Reverted patches concerning get_last_link() and get_first_link(),
	they are buggy and cause segfaults.  

Tue Jul  1 20:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops, last patch was fixed. ;) 

Tue Jul  1 20:16:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in draw_form_entry(), case FC_FILE. Please review
	carefully.  

Tue Jul  1 19:50:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_last_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 19:47:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_first_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 18:26:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Indentation fixed, and small cleanup.  

Tue Jul  1 16:27:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.c:

	Use struct uri to pass uri component.  

Tue Jul  1 15:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: Makefile.am, uri.c, uri.h, url.c:

	Move parse_url() handling to new parse_uri().  

Tue Jul  1 15:07:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	get_form_url() cleanup and optimization.  

Tue Jul  1 14:28:48 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_controls() cleanup and optimization.  

Tue Jul  1 14:12:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_multipart() cleanup and optimization.  

Tue Jul  1 00:00:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Small optimization + use of assertm.  

Mon Jun 30 23:23:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optim. in get_c_width().  

Mon Jun 30 23:20:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in format_table().  

Mon Jun 30 23:08:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in display_table_frames().  

Mon Jun 30 22:57:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Cleanup and optimizations in format_table().  

Mon Jun 30 22:22:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some major optimizations were done in display_table_frames().  

Mon Jun 30 21:47:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_vline() was optimized.  

Mon Jun 30 21:17:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights() cleanup and optimization.  

Mon Jun 30 21:00:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths() cleanup attempt. Old inactive and/or debugging
	code was removed. Some optimizations were made.  

Mon Jun 30 20:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	A TODO comment was added concerning distribute_widths().  

Mon Jun 30 18:01:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_width() cleanup and optimization.  

Mon Jun 30 17:50:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths() cleanup and optimization.  

Mon Jun 30 10:05:16 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 29 22:32:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some gotos and for were replaced by while loops in new_cell().  

Sun Jun 29 22:20:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells() was optimized a bit.  

Sun Jun 29 22:13:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	In calloc() we trust...  

Sun Jun 29 22:12:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields reordering aka padding prevention.  

Sun Jun 29 21:55:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	get_bfu_color() was optimized.  

Sun Jun 29 16:07:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimization.  

Sun Jun 29 15:55:31 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	A variable declaration was moved near where it is used.  

Sun Jun 29 15:51:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Multiple if were replaced by a switch.  

Sun Jun 29 12:52:12 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Loading message was inappropriate, it was replaced by "No document"
	message.  

Sun Jun 29 12:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup, optimizations concerning tab bar. A loading message is now
	printed when we do not have any title yet, and a tab separator is
	now printed.  

Sat Jun 28 23:34:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, dialogs/mime.c,
	mime/backend/default.c:

	Introduce generic function for encoding/decoding option names.  

Sat Jun 28 23:07:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	Minor cleanup + use of register keyword.  

Sat Jun 28 21:43:55 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, os_dep.h:

	Cleanup.  

Sat Jun 28 11:56:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Cleanup.  

Sat Jun 28 11:13:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/os_dep.c:

	Tidyup.  

Sat Jun 28 10:47:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/cache.h, lowlevel/af_unix.h, lowlevel/dns.h,
	lowlevel/interlink.h, lowlevel/select.h, osdep/os_dep.h,
	protocol/ftpparse.h:

	Rename header file guards.  

Sat Jun 28 10:46:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Use bitwidth of one for boolean members.  

Sat Jun 28 09:52:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Patches causing bugs 214 and 218 were reverted. It fixes bug 218.  

Fri Jun 27 20:51:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	checkboxes_width() was optimized a bit.  

Fri Jun 27 20:44:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	min_max_checkboxes_width() was renamed checkboxes_width().  

Fri Jun 27 20:42:37 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/msgbox.c, bfu/text.c,
	bfu/text.h, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, sched/download.c,
	scripting/lua/core.c:

	min_max_text_width() was renamed text_width().  

Fri Jun 27 20:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, sched/download.c, scripting/lua/core.c:

	min_max_buttons_width() was renamed  buttons_width().  

Fri Jun 27 20:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	checkboxes_width() was replaced with min_max_checkboxes_width().  

Fri Jun 27 20:22:28 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, scripting/lua/core.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:19:08 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: hierbox.c, mime.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:16:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/edit.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:12:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: msgbox.c, inpfield.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:11:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	min_max_text_width() was introduced.  

Fri Jun 27 19:57:49 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:54:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, sched/download.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:50:47 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: hierbox.c, mime.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:46:47 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/edit.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:44:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, msgbox.c:

	Populate with min_max_buttons_width().  

Fri Jun 27 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	min_max_buttons_width() was introduced, it does the same job that
	min_buttons_width() and max_buttons_width() successive calls.  

Fri Jun 27 19:26:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Indentation level was reduced in display_button().  

Fri Jun 27 01:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, po/leet.po, src/intl/gettext/libintl.c:

	1337 |_@|\|6|_|463 VV45 4|)|)3|).  

Fri Jun 27 00:16:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Cleanup and remove stale function declaration.  

Fri Jun 27 00:01:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Cleanup check_protocol().  

Thu Jun 26 23:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Eliminate get_prot_info() by adding one more accessor and
	simplifying get_protocol_*handler().  

Thu Jun 26 22:09:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	An obsolete TODO comment was removed.  

Thu Jun 26 21:50:04 2003  Laurent Monin <zas@norz.org>:

	* po/README:

	Some notes about #~ and make update-po were added.  

Thu Jun 26 21:39:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	enum uri_scheme -> enum protocol, @scheme -> @protocol. This
	finalizes the 'scheme' term evaporation.  

Thu Jun 26 21:34:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Rename: SCHEME_* -> PROTOCOL_*, requested by pasky.  

Thu Jun 26 21:19:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	The protocol (external) handler function has now its own type
	(protocol_(external_)handler) ! This could ease things a little for
	those with weaker in-mind C parser.  

Thu Jun 26 21:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Great! Pasky joins the fun and every goes down the drain! ;) fix
	func -> handler rename.  

Thu Jun 26 21:09:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Normalize some methods: get_protocol_handle() ->
	get_protocol_handler(), get_external_protocol_function() ->
	get_protocol_external_handler().  

Thu Jun 26 21:07:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, finger.c, ftp.c, protocol.c, protocol.h,
	user.c, http/http.c, http/https.c:

	protocol_backend.(func -> handler, nc_func (which was NoCache_func)
	-> external_handler). Have a nice night spent by conflicts
	resolving, Jonas :-).  

Thu Jun 26 20:57:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Minor tidyup and reindentation.  

Thu Jun 26 20:19:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Add and user accessors for protocol backends members. I feel better
	already :) 

Thu Jun 26 20:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file.h, finger.c, finger.h, ftp.c, ftp.h,
	protocol.c, user.c, user.h, http/http.c, http/http.h, http/https.c,
	http/https.h:

	Move all protocol backend declarations out. (Warning big patch, but
	simple) + fix some unconforming guards in the header files met on
	the way.  

Thu Jun 26 19:17:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Use enum uri_scheme.  

Thu Jun 26 19:11:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added file://localhost/ test ;) 

Thu Jun 26 18:35:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Introduce uri_scheme enum.  

Thu Jun 26 18:34:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Make struct protocol_backend public for now atleast.  

Thu Jun 26 18:14:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Start the process of backending the protocol/ handling.  

Thu Jun 26 17:06:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/url.c, protocol/url.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Integrate and use file added by last commit.  

Thu Jun 26 17:02:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	The basic protocol implementation management moved from
	protocol/url.* 

Thu Jun 26 16:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Encapsulate @protocols access even further so we easier split it
	out.  

Thu Jun 26 16:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Add README to DISTFILES ...  

Thu Jun 26 16:24:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Some basic introduction for translators. Idea by zas.  

Thu Jun 26 14:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/.cvsignore:

	Add elinks.pot just in case.  

Thu Jun 26 13:55:55 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c, intl/charsets.h,
	document/html/colors.c, document/html/colors.h,
	document/html/parser.c, document/html/parser.h:

	fastfind initializations are now done at start, using
	init_xxx_lookup() functions. This prevents a superfluous test at
	search time.  

Thu Jun 26 13:26:57 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c:

	get_cp_index() now uses fastfind (if USE_FASTFIND is defined).  

Thu Jun 26 11:24:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Reverted part of the patch. Do test for '..' ;).  

Thu Jun 26 11:10:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Misc small cleanups and optimizations and fixes: 
		Don't test for ".." when comparing directory entries.  
		Only pass the @dirpath length to add_dir_entry().  
		Only iterate over @entries if nonempty, and test before free()ing
		it.  

Thu Jun 26 09:39:37 2003  Laurent Monin <zas@norz.org>:

	* Unicode/7bit.cp, Unicode/7bitrepl.lnx, Unicode/8859_1.cp,
	Unicode/8859_10.cp, Unicode/8859_13.cp, Unicode/8859_14.cp,
	Unicode/8859_15.cp, Unicode/8859_16.cp, Unicode/8859_2.cp,
	Unicode/8859_3.cp, Unicode/8859_4.cp, Unicode/8859_5.cp,
	Unicode/8859_6.cp, Unicode/8859_7.cp, Unicode/8859_8.cp,
	Unicode/8859_9.cp, Unicode/cp1250.cp, Unicode/cp1251.cp,
	Unicode/cp1256.cp, Unicode/cp1257.cp, Unicode/cp437.cp,
	Unicode/cp850.cp, Unicode/cp852.cp, Unicode/cp866.cp,
	Unicode/koi8_r.cp, Unicode/macroman.cp, Unicode/tcvn5712.cp,
	Unicode/tr7bit.awk, Unicode/viscii.cp, src/intl/codepage.inc,
	src/intl/uni_7b.inc:

	Charsets aliases were updated using information from iana.org, and
	GNU recode utility.  

Thu Jun 26 08:29:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. A bg.po warning was fixed.  

Wed Jun 25 10:30:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Optimization: memmove(p, p, n) is useless.  

Wed Jun 25 10:27:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Minor cleanup.  

Wed Jun 25 10:15:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Simplify and optimize stat_date().  

Wed Jun 25 09:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup stat_user() and split it up.  

Wed Jun 25 09:06:58 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Bug 214 was fixed. It was introduced by last "viewport - 1" patch.
	Pasky, please review the fix ;).  

Wed Jun 25 08:39:06 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Bug 213 was fixed. We eat &nsbp &nbsp<foo>, but not &nbsp&nbsp123 or
	&nbsp=123 ...  

Tue Jun 24 23:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Inline stat_* functions + group them.  

Tue Jun 24 23:00:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Include the set*() functions in stat_mode().  

Tue Jun 24 22:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split up stat_mode().  

Tue Jun 24 22:21:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup stat_* functions.  

Tue Jun 24 21:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make xmlto the preferred doctool (the only one that can build the
	book).  

Tue Jun 24 20:58:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Some esotheric speech about changes.  

Tue Jun 24 20:57:02 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Some errors were fixed. Author was added. Translators please review.  

Tue Jun 24 20:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/hacking.txt:

	Update the language file section, fix expanded CVS tags and add
	comment about splitting big patches.  

Tue Jun 24 20:46:05 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Fatal errors were fixed in recent translation update. Concerned
	translators should check that.  

Tue Jun 24 20:14:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Changes from mime/ integration and the new show_hidden_files.  

Tue Jun 24 20:13:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc, TODO, manpages/Makefile.am,
	tools/help2doc:

	Misc small fixes and updates all over the map. Sorry.  

Tue Jun 24 17:52:34 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, po/bg.po:

	Some bulgarian translation updates by dinux <dinux@mail.bg>.  

Tue Jun 24 14:56:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Stupid patch was reverted. Reported by Pasky.  

Tue Jun 24 14:47:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	A comment was added about a strange part of code...  

Tue Jun 24 14:29:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Code redundancy was reduced.  

Tue Jun 24 12:32:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor clearifying cleanups.  

Tue Jun 24 12:08:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Purify the directory_entry allocation by making @name contain whole 
	path, so concatenation in add_dir_entry() isn't needed.  Also fix
	some possible leaks in the allocation.  

Tue Jun 24 10:03:19 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	A useless comment was removed.  

Tue Jun 24 09:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	redraw_screen() was optimized, a useless test was removed, it fixes
	the status bar which was not drawn until its end.  

Tue Jun 24 01:51:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Inline all the split up functions and (my) cleanups should be done.  

Tue Jun 24 01:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Reduce the number of variables.  

Tue Jun 24 01:29:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup the listing of (sym)links.  

Tue Jun 24 01:19:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	'Cache' html escaped entry->name to simplify and optimize.  

Tue Jun 24 00:35:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Relocate the testing of link is directory.  

Tue Jun 24 00:26:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Get ready to streamline the code for adding link entries.  

Tue Jun 24 00:07:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor cleanup and commenting.  

Mon Jun 23 23:36:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Sorry re^2name: (file_)info -> (file_)data seems more appropriate.  

Mon Jun 23 23:29:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out the adding of one directory entry to the fragment. Last
	one! ;) 

Mon Jun 23 23:12:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	:s/filename/dirpath/ in directory functions.  

Mon Jun 23 23:10:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out the adding of directory entries to the fragment.  

Mon Jun 23 22:41:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Another bunch of renames + small optimizations by sharing strlen()
	results.  

Mon Jun 23 21:53:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: dirs -> directory_entry + its members.  

Mon Jun 23 21:47:23 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Various optimizations: mark screen as dirty only if needed, make use
	of register, and move calculations outside loops (in fill_area()).  

Mon Jun 23 21:14:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup.  

Mon Jun 23 15:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanups and comments.  

Mon Jun 23 14:47:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanups and commenting.  

Mon Jun 23 05:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Big cleanup removing lot's of redundant code by grouping and
	indenting. Also added a few comments.  

Mon Jun 23 03:11:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: d -> directory.  

Mon Jun 23 03:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Readd test of @stream. Hmm where did it go? 

Mon Jun 23 03:04:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: e -> cache.  

Mon Jun 23 02:55:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: c -> connection.  

Mon Jun 23 02:43:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Slim redundant error handling code.  

Mon Jun 23 02:27:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Test @stream before using it.  

Mon Jun 23 02:24:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup.  

Mon Jun 23 02:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out file reading to separate function.  

Mon Jun 23 01:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Move trying of encoding extensions to separate function and simplify
	it.  

Mon Jun 23 00:51:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Simplify so guess_encoding() is only called on filenames where
	encoding extensions have not been tried.  Plus we are not really
	interested in the filename of some tried encoding extension.  

Mon Jun 23 00:08:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Quite huge patch splitting out the directory listing to separate
	function.  

Sun Jun 22 23:17:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Updating at DIKU led to this fix for bug introduced in revision
	1.38.  

Sun Jun 22 17:32:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Oops fix @tmp not being used.  

Sun Jun 22 17:24:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Misc cleanups + 2 leak fixes 

Sun Jun 22 16:47:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	More renames.  

Sun Jun 22 16:43:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: fl -> fragmentlen.  

Sun Jun 22 16:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: file -> fragment.  

Sun Jun 22 16:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Followup cleanup: move vars close to their usage.  

Sun Jun 22 16:19:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	First try to open @name as a directory.  This greatly simplifies the
	code path and means there's only one entry point into the dir code.  

Sun Jun 22 16:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Combine !S_ISREG() branch with regular file branch.  

Sun Jun 22 15:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, util/error.h:

	GCC 3.3 do_not_optimize_here() introduced and used in tp_display()
	so vs.plain is set properly.  

Sun Jun 22 12:17:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jun 22 12:13:30 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/file.c:

	An option to specify if hidden files should be shown in local
	directory listing was added (protocol.file.show_hidden_files). It
	defaults to 1 for now to preserve old behavior.  

Sat Jun 21 22:45:38 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	How should all the .c and .h files start.  

Sat Jun 21 22:40:09 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Undo :). Everything is fine ;).  

Sat Jun 21 22:39:27 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Dummy commit just to test whether ciabot still works fine even in
	multidirs situation.  

Sat Jun 21 15:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Move the directory coloring closer to where it is used.  

Sat Jun 21 14:55:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Decentralize @readlen.  

Sat Jun 21 14:45:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: h -> fd, r -> readlen.  

Sat Jun 21 14:30:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.h:

	Standarized .h header. Zassie zassie... *sigh* 

Sat Jun 21 14:28:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Sticked a TODO about the troubles of l10n in the protocol/ corner.  

Sat Jun 21 14:25:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, http.c:

	http_connection_info.(error_code -> http_code). It is set to @h
	always, regardless on @h's value. http_error_document() itself tests
	whether the code is suitable for generic error document or not.
	Also, don't show the generic error document for documents with
	status 3xx.  

Sat Jun 21 14:19:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element content is now bold.  

Sat Jun 21 14:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element now triggers not html_center() but html_h1(), which is
	like html_h2() but w/ default alignment AL_CENTER.  

Sat Jun 21 14:13:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	html_h() now takes additional parameter @default_align.  

Sat Jun 21 14:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintfa() instead of asprintf().  

Sat Jun 21 14:10:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	(v)asprintfa() ELinks memory managment wrappers for vasprintf()
	introduced.  

Sat Jun 21 14:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor cleanup.  

Sat Jun 21 13:43:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, util/encoding.c, util/encoding.h:

	Rename NB_KNOWN_ENCODING -> ENCODINGS_KNOWN 

Sat Jun 21 13:25:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/: README, completion.tcsh:

	Fix typo and added note about how out dated tcsh completions are.  

Sat Jun 21 13:16:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Correctly cast &str in the asprintf() call.  

Sat Jun 21 13:15:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintf() instead of vasprintf(), fixed the calling semantics.
	*hide* 

Sat Jun 21 13:14:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Extended the error message by some dumb talk about what happenned.  

Sat Jun 21 13:01:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Compilation fix: info->error_code -> @code in http_error_document().  

Sat Jun 21 13:01:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Removed now superfluous @errs from http_error_document().  

Sat Jun 21 13:00:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	The error document is now a format string. Tidied up the generated
	document.  

Sat Jun 21 12:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, codes.h, http.c:

	Moved the error document generator from thats_all_folks fragment of
	read_http_data() to http_error_document(), placed in
	protocol/http/codes.c.  

Sat Jun 21 12:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Added missing inclusion of codes.h, removed superfluous stdio.h
	inclusion.  

Sat Jun 21 12:28:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Normalized the file header. The second time already. *grumble* 

Sat Jun 21 12:26:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Oops, added forgotten break in the chunk loop ;-).  

Sat Jun 21 12:12:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Typo fix.  

Sat Jun 21 12:10:48 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: Makefile.am, codes.c, codes.h, http.c:

	Text error message corresponding to error code is now printed.
	codes.{c,h} provide a way to check if code is known and if yes,
	which is its associate message.  

Sat Jun 21 12:03:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Sticked a TODO.  

Sat Jun 21 12:03:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Converted some of the HTTP error dummy document to lowercase.  

Sat Jun 21 12:01:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunk decoding loop was converted from goto teleports to a while
	(1) loop.  

Sat Jun 21 11:58:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunked branch moved outside of an else branch, the not-chunked
	branch now jumps at read_more at the end. I didn't reindent the
	chunked branch and i know why.  

Sat Jun 21 11:54:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Moved the thats_all_folks code at the end of read_http_data().  

Sat Jun 21 11:52:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Random minor cleanups --- mostly just reindentations.  

Sat Jun 21 11:06:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	error_code replaces code and is_error integers.  

Sat Jun 21 11:02:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix for bug 165 was improved a bit, now title is set.  

Sat Jun 21 10:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fast hack to fix bug 165. Feel free to improve.  

Sat Jun 21 09:09:08 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun 21 08:54:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	A now useless comment was removed.  

Sat Jun 21 08:48:11 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, lowlevel/af_unix.c, lowlevel/interlink.c:

	General cleanup. MAX_BIND_TRIES was removed from setup.h since it is
	only used in af_unix.c/AF_INET and there is no need for the user to
	change it. Code related to perhaps future remote mode was removed.  

Sat Jun 21 08:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Compilation fix: incomplete renaming of stat to status broke
	compilation, it was fixed. Pasky please review.  

Sat Jun 21 00:33:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Cleanup --- random variables renamed, some tests moved to nicer
	places and so on.  

Sat Jun 21 00:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved -dump implementation from dump_end() into dump_formatted().  

Sat Jun 21 00:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	stat->ce->... -> ce->...  

Sat Jun 21 00:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Oops, dump_source()'s return value fix.  

Sat Jun 21 00:17:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Reduced indentation.  

Sat Jun 21 00:16:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved the -source code from dump_end() into dump_source().  

Sat Jun 21 00:03:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reverted most of the recent changes done in the realm of
	parse_element() and get_attr_val(). They were buggy beyond repair
	and it was agreed that they should go. I tried to preserve at least
	part of the cleanups done in the meantime, so some variable renames
	etc could be carried over.  

Fri Jun 20 23:34:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Rename decoding_handler -> decoding_backend to better reflex the
	recent changes.  

Fri Jun 20 23:02:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, util/encoding.c, util/encoding.h:

	Further encapsulate the decoding handlers by making the name part of
	the backend.  

Fri Jun 20 20:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Cleanups.  

Fri Jun 20 19:02:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/encoding.c:

	Oops, wrong line deleted in dummy_decode() ;-). Fixed.  

Fri Jun 20 18:54:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/encoding.c:

	In the *_decode() methods, don't uselessly duplicate the data block
	but return the original one.  

Fri Jun 20 18:51:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	uncompress_data() leading comment reorganization into standard form,
	minor typo fixes and some details added.  

Fri Jun 20 18:21:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, config/options.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	Reverted the last patch. As I indicated clearly, this has no
	business in HEAD and should live in a branch on its own.  

Fri Jun 20 18:20:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: encoding.c, encoding.h:

	Introduced @decode method to the encoding object. It's dummy and
	returns just copy of its arguments in all encodings for now.  

Fri Jun 20 18:13:08 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	setup.h:

	Experimental remote mode is now (almost) functionnal. To test define
	ELINKS_REMOTE in setup.h, compile elinks, add a second ip to your
	machine or use a second machine, then launch elinks -listen
	<your_first_ip> on one side, and elinks -remote <your_first_ip> on
	the second side. There is many things to improve, and it may not
	function as you hope it does, but feel free to provide enhancements.
	Note this feature may disappear soon if none is interested in.
	Please report issues/comments/ideas/bugs on #elinks.  

Fri Jun 20 17:30:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/version.c:

	LED indicators support.  

Fri Jun 20 17:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Use vsnprintf() instead of elinks_vsnprintf() inside of
	elinks_snprintf(). Quite unlikely to be needed, but Radim Kolar
	<hsn@cybermail.net> has a point anyway ;-) (<- idea).  

Fri Jun 20 17:28:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	The quick hack version of using encoding extensions in content type
	resolving (enhance bug 26) 

Fri Jun 20 17:16:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Some comments reorganization.  

Fri Jun 20 16:45:09 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	addr_info was renamed to socket_info which is more adequate, imho.  

Fri Jun 20 16:33:07 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	s_addr name may clash on Solaris, so all our s_addr were renamed to
	addr.  

Fri Jun 20 16:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Fix problem with @extensions that made gcc-2.96 choke.  

Fri Jun 20 15:55:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Simplify extension handling by making the extension list a backend
	member.  

Fri Jun 20 15:37:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: encoding.c, encoding.h:

	Cleanups.  

Fri Jun 20 15:24:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, util/encoding.c, util/encoding.h:

	Move guess_encoding() to a more appropriate so it will available to
	mime/.  

Fri Jun 20 14:08:43 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/url.c:

	Support for file://localhost/, fixes bug 107, based on patch by Hugo
	Haas <hugo@larve.net>.  

Fri Jun 20 13:56:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	protocol/url.c, protocol/url.h:

	Move get_extension_from_url() to proper place.  

Fri Jun 20 13:50:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	get_extensionpart_from_url() -> get_extension_from_url(),
	@extensionpart -> @extension inside.  

Fri Jun 20 12:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Another act of brutality from the 'Alphabetic Order of Header File'
	PD.  

Fri Jun 20 12:06:06 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Indentation fix.  

Fri Jun 20 12:04:10 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Fix a potential issue: in some cases, we try to free a NULL pointer,
	a little step to ELinks remote mode was done.  

Fri Jun 20 11:03:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	enum addr_type was introduced, it will be used soon for remote
	ELinks access.  

Fri Jun 20 08:09:42 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	af_unix_close() was fixed, in certain cases, we closed fd 0.
	session-ring now works with AF_INET too, we just bind/connect on
	ELINKS_PORT + session-ring number.  

Fri Jun 20 07:41:48 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Repetitive select() errors may cause an infinite loop. A minor hack
	prevents it.  

Fri Jun 20 01:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Mindre opdatering af dansk oversættelse. ;p 

Thu Jun 19 22:38:12 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, lowlevel/af_unix.c, lowlevel/af_unix.h,
	lowlevel/interlink.c, lowlevel/interlink.h:

	bind_to_af_unix() was splitted. connect_to_af_unix() and
	af_unix_open() were introduced. Please torture and review.  

Thu Jun 19 12:22:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for bug 209: do not call copy_chars() if not needed.  

Thu Jun 19 09:32:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	struct s_addr_info was introduced, it permit to get rid of s_unix,
	s_unix_l, s_unix_fd.  

Wed Jun 18 21:16:11 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	elinks_usleep() was introduced, it resides here for now.  

Wed Jun 18 20:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Prevent memleak in alloc_address(), assertions are now used.  

Wed Jun 18 20:29:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	alloc_address() was introduced.  

Wed Jun 18 20:11:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	void unlink_unix() -> void unlink_unix(struct sockaddr *s_addr) 

Wed Jun 18 20:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_sun_path() was introduced, it computes unix socket path.  

Wed Jun 18 19:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_address() now set values of passed parameters.  

Wed Jun 18 18:58:43 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Humm, better like that. ;) 

Wed Jun 18 18:39:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Well, struct sockaddr_un is a total mess. So i did it like that,
	have a look and comment.  

Wed Jun 18 17:21:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	part->data->data == NULL is acceptable in line_break() but there is
	no need to call xpand_lines() or following stuff in this case.
	Assertion was replaced by a if + goto end. It fixes bug 206 reported
	by pasky.  

Wed Jun 18 17:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Compilation fix: stdlib.h was not included, and free() declaration
	was missing.  

Wed Jun 18 14:04:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use string utils for @saved option names. Fixes bug 207.  

Wed Jun 18 12:10:23 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Use SUN_LEN() macro to evaluate to actual length of the sockaddr_un
	structure and provide a definition of it for systems that may not
	have it.  

Wed Jun 18 11:53:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Moved the #includes back near the COL() and get_bfu_color()
	declaration, keeping the tightly related and somewhat alien stuff
	together. Hm, the #includes position doesn't really matter here, but
	when I was already doing at, I moved it back as I liked it more
	before. I don't care, though.  

Wed Jun 18 11:49:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Fixed memory leak in elinks_assertm() (@buf wasn't free()d). Also
	fixed possible usage of undefined value if @buf allocation failed.  

Wed Jun 18 11:46:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tab must have always a terminal attached, must not it? 

Wed Jun 18 10:49:45 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	AF_UNIX get_address() was reworked. A check about too long path
	(elinks_home) was added. An error produced by connect() is ignored,
	since this case is normal.  

Wed Jun 18 08:51:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Adequate error messages are now printed on socket(), connect(),
	bind() failures.  

Wed Jun 18 08:20:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Dummy entry to fix last message log: accept() failure is now
	handled.  

Wed Jun 18 07:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Connect() failure is now handled.  

Wed Jun 18 07:48:33 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Some variables were marked as static, minor comments were added
	about future work to be done here.  

Wed Jun 18 01:55:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.h, hash.h, version.h:

	Cleanups.  

Wed Jun 18 01:11:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Tidyup: Move enum declaration below header files.  

Wed Jun 18 01:05:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hotkey.h:

	Convert to standard header file format.  

Wed Jun 18 00:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Declare one-bit fields unsigned.  

Wed Jun 18 00:55:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Added TODO note about trouble with usage of (v)asprintf() under
	--enable-debug mode.  

Wed Jun 18 00:34:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	In try_extension_type() always do lookup with xwin on (even if ...)
	since we are only interested in the content type.  

Wed Jun 18 00:30:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	No need to let mime/ know about terminals only about xwin
	capabilities.  

Wed Jun 18 00:21:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.h:

	Removed @flags member that is now represented by bitfields.  

Wed Jun 18 00:19:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	Removed comment that has been moved to header file.  

Wed Jun 18 00:09:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation updated.  

Tue Jun 17 23:47:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish update, that goes out to Miciah who doesn't speak a word
	Danish and still spotted a few errors in my translations. One
	thorough reviewer ;) 

Tue Jun 17 23:44:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Character sequence '< ' in <PRE></PRE> caused the document to not be
	entirely rendered. This was introduced by bug 200 fix. Concerned
	code was fixed.  

Tue Jun 17 23:23:46 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Static + minor cleanup.  

Tue Jun 17 23:04:52 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Redundant code was moved to a FF_SEARCH() macro. Idea by Pasky ;).  

Tue Jun 17 16:47:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Case sensitivity test was finally moved outside the loop, as it was
	planned. Now fastfind_search gives maximum performance.  

Tue Jun 17 16:26:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Clustered @head initialization in format_html().  

Tue Jun 17 16:18:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed segfault caused by carelessly placed assertm() in process_link
	fragment of put_chars(), reported by zas.  

Tue Jun 17 16:17:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup. assert(ce && screen) only if @head allocation didn't
	fail.  

Tue Jun 17 16:12:30 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	assert(): valid chars only at index time too.  

Tue Jun 17 16:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor get_convert_table() cleanup. Removed now useless tests for
	(head) (it is assert()'d).  

Tue Jun 17 16:07:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Tidyup.  

Tue Jun 17 16:07:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Account the recently introduced FF_MAX_CHARS if. And move it after
	interinc().  

Tue Jun 17 16:04:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted zas' 'fix', unreverting mine ;-).  

Tue Jun 17 15:58:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Fix a fatal bug: do not even consult index if char is not in a valid
	range. Bug reported by Pasky.  

Tue Jun 17 15:56:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix bad assertm().  

Tue Jun 17 15:27:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	And handle more gracefully the assert()ion failure.  

Tue Jun 17 15:26:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Assert about part->data->nlinks in put_chars() process_link
	fragment. This reflects the original code.  

Tue Jun 17 15:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup.  

Tue Jun 17 15:02:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reintroduced (p->data) assertion into xpand_line, it is not a valid
	situation even on the display_complicated_table() call path.  

Tue Jun 17 14:52:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Attempted to make the execution flow more intuitive.  

Tue Jun 17 14:51:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Indentation fix.  

Tue Jun 17 14:43:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_line() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_line() call path.  

Tue Jun 17 14:41:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_lines() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_lines() call path.  

Tue Jun 17 14:36:23 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about assert() and assertm() was added.  

Tue Jun 17 14:33:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A missing assertion p->data->data != NULL was added.  

Tue Jun 17 14:30:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	The bad "weird test" change was fixed. Reported by Pasky.  

Tue Jun 17 14:13:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Last steps to assert() generalization. Please report any assert()
	failure.  

Tue Jun 17 13:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:29:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:24:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless test was removed. A missing assert() was added.  

Tue Jun 17 13:18:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A weird test was reworked.  

Tue Jun 17 13:10:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Label no_l was renamed to no_link.  

Tue Jun 17 13:06:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless label and a goto were removed.  

Tue Jun 17 13:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:51:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:47:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:43:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:31:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Reverted reverting of changes. They are _not_ too agressive.  

Tue Jun 17 11:52:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Partially reverted some of the assert()ization, some of the changes
	seemed way too agressive.  

Tue Jun 17 11:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:29:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:26:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:21:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	First steps to assert() generalization.  

Tue Jun 17 11:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	_GNU_SOURCE #defining should be the very first thing we do.  

Tue Jun 17 11:09:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Reverted the removal of HAVE_C99_SNPRINTF test, we *DO* want to use
	our snprintf() if the system's doesn't provide C99 return value
	semantic. Oh, and s/C99_SNPRINTF/C99_VSNPRINTF/ ;-).  

Tue Jun 17 08:55:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Attempt to reduce code redundancy was a bad thing. This code was not
	exactly redundant. Fixed.  

Tue Jun 17 07:43:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	split_line() was fixed. Bug introduced by a bad movesky :) 

Tue Jun 17 07:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Superfluous indentation was removed. split_line_at() is now declared
	inline.  

Tue Jun 17 07:17:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Define _GNU_SOURCE for vasprintf(). It fixes a compilation issue...  

Tue Jun 17 01:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Removed apparently bogus defined(HAVE_C99_SNPRINTF) test. It was not
	AC_DEFINE'd in configure.in so it caused undefined reference to
	elinks_snprintf errors. Maybe it's time to at least take the time to
	compile before committing? 

Tue Jun 17 00:13:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Correctly cast buffer pointer in vasprintf call.  

Mon Jun 16 16:43:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	When paging up/down, move by viewport_height - 1 rather than by
	viewport_height, making the first/last line common between the two
	states. I think this has rather big impact on ease of usability in
	some situations.  

Mon Jun 16 16:13:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use assertm() instead of the manual checks + internal() calls.  

Mon Jun 16 16:11:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced (unexpectably kludgy, after all :[ ) assertm() macro,
	which can print out a user-provided message (defined by format
	string) if the assertion fails.  

Mon Jun 16 15:42:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup, spelling fixes.  

Mon Jun 16 15:37:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed redundant code in split_line_at() and split_line(), I hope
	the change is ok.  

Mon Jun 16 15:36:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Described split_line() and documented its return value.  

Mon Jun 16 15:22:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove pointless assignment.  

Mon Jun 16 15:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Forked split_line_at() from split_line(), just containing everything
	after the 'split:' label.  

Mon Jun 16 15:15:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed usage of @tmp from the 'trunk' part of split_line().  

Mon Jun 16 15:13:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@i -> @x in split_line().  

Mon Jun 16 15:01:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	The (i + 1) change reverted, I'm silly and zas is the god :).  

Mon Jun 16 15:00:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use explicitly either (i + 1) or (i - 1) --- this fixes few bugs
	introduced by the simplification and also makes it a little easier
	to see what's moving around where, I think.  

Mon Jun 16 14:51:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reduce comments noise.  

Mon Jun 16 14:50:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed the old split_line() implementation.  

Mon Jun 16 14:45:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Big code simplification in split_line().  

Mon Jun 16 14:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed stale variable usage, compilation fix.  

Mon Jun 16 14:33:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	set_hline() cleanup and minor parameters reordering.  

Mon Jun 16 14:30:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@c -> @chars, @l -> @charslen in put_chars(_conv)().  

Mon Jun 16 14:12:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, renderer.h:

	part.spl -> part.spaces_len 

Mon Jun 16 14:08:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Grammar fix.  

Mon Jun 16 14:07:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup of split_line().  

Mon Jun 16 09:06:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for &nbsp &nbsp<foo> is now complete.  

Mon Jun 16 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Small cleanup to use more general 'buffer layout'.  

Sun Jun 15 23:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Code was simplified by using straconcat().  

Sun Jun 15 23:25:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	More cleanups of type_query(). The 'What to do?' dialog is more
	informative.  

Sun Jun 15 23:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Fix the fix.  

Sun Jun 15 23:12:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix warning from using uninitialized variable. Hmm.  

Sun Jun 15 23:07:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: mailcap.c, mailcap.h, mime.c, mime.h:

	Functionality for these files are now integrated in mime/ system.  

Sun Jun 15 23:05:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Finally also actually use the mime/ system. I am a happy man (or
	what ever I am) now. :) 

Sun Jun 15 23:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/Makefile.am:

	No need for protocol/ mime files anymore.  

Sun Jun 15 23:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Install the new init/done hooks for the mime systems.  

Sun Jun 15 23:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Link in the mime system.  

Sun Jun 15 22:53:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix potential memleak.  

Sun Jun 15 22:44:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c, src/config/kbdbind.c,
	src/dialogs/menu.c, src/sched/connection.c, src/sched/sched.c,
	src/sched/session.c, src/scripting/Makefile.am,
	src/scripting/lua/core.c, src/scripting/lua/core.h,
	src/scripting/lua/hooks.c, src/scripting/lua/hooks.h,
	src/viewer/text/view.c:

	src/lua/* -> src/scripting/lua/*, inspired by kuser.  

Sun Jun 15 22:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/scripting/Makefile.am:

	Added src/scripting/Makefile.am, dummy for now.  

Sun Jun 15 22:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/: .cvsignore, .vimrc:

	More fairies.  

Sun Jun 15 22:32:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/: .cvsignore, .vimrc:

	Added fairies.  

Sun Jun 15 22:23:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@ct -> @ctype in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:22:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@r -> @plaintext in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:17:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Don't assume that option.flags bitmask contains just one flag when
	testing for OPT_AUTOCREATE --- test properly by &'ing it. Patch by
	kuser.  

Sun Jun 15 22:11:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/mailcap.c:

	Don't try to fix problems using a sledge hammer. Use options at
	mime.mailcap.*.  

Sun Jun 15 22:11:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Tidyup.  

Sun Jun 15 21:56:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Huh. Reverted strange patch by Jonas. It is not clear what exactly
	it fixes, and whatever it fixes, it certainly fixes it at the wrong
	place.  

Sun Jun 15 19:57:45 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Bug 202 should be fixed by that.  

Sun Jun 15 19:12:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 15 17:21:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Elaborated a bit in the mime.mimetypes describtion. Hope it's ok Zas
	;).  

Sun Jun 15 17:11:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove unused argument to type_query().  

Sun Jun 15 17:06:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	2nd step of mime/ integration. Move mailcap options to mime.* and
	introduce options for the mimetype backend.  

Sun Jun 15 16:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix grave option alias bug to actually fetch the aliased option.  

Sun Jun 15 15:59:34 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Hm, forgot to update NEWS. Whatever... ;-).  

Sun Jun 15 15:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Compile time configuration for mimetypes backend.  

Sun Jun 15 15:25:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1.CVS --- let the fun begin again 

Sun Jun 15 15:20:28 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1 

Sun Jun 15 15:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/book/Makefile.am:

	Typo fix.  

Sun Jun 15 15:04:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Upgrade myself to doc/book keeper.  

Sun Jun 15 15:01:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	ELINKS_CVSWEB_URL changed to http://cvsweb.elinks.or.cz/ ;-).  

Sun Jun 15 14:39:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, location.c, location.h, session.c:

	Reverted the last Jonas' patch, it ignored my remarks --- the
	direction argument is reverse than how it is commonly used and
	set_session_location() doesn't belong to sched/location.*.  

Sun Jun 15 14:35:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/: elinks.conf.5, elinkskeys.5:

	Oops. DISABLED notices removed.  

Sun Jun 15 14:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	First version using help2doc so a lot of changes. It's maybe needs
	some more work but _template_ and language help printing makes
	updating a must.  

Sun Jun 15 14:24:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	First version using the output from help2doc.  

Sun Jun 15 14:19:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Improve the description of ui.window_title so it contains the word
	xterm. Idea by Jeremy C. Reed <reed@reedmedia.net> 

Sun Jun 15 14:05:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, location.c, location.h, session.c:

	Encapsulate setting of the session location.  

Sun Jun 15 13:59:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Tadaaaaaaaaaaaaaaaaam. Use go_(un)back() in the loops traversing
	history/unhistory when moving by n>1 steps, instad of just manually
	moving the locations between lists. Accidentally, this also fixes
	the famous Bug 114. Good, time to start huge celebration! 0.5pre1 on
	its way.  

Sun Jun 15 13:59:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	No need to access session variables through task 

Sun Jun 15 12:59:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	First Tab, then Tab in background.  

Sun Jun 15 12:38:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/colors.c, document/html/parser.c,
	util/fastfind.c, util/fastfind.h:

	fastfind_terminate() -> fastfind_done() 

Sun Jun 15 12:36:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Finish the trampoline -> leafset change.  

Sun Jun 15 12:20:11 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Compilation fix.  

Sun Jun 15 12:07:19 2003  Laurent Monin <zas@norz.org>:

	* test/color.html:

	Color chart was added.  

Sun Jun 15 11:55:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor cleanup of fastfind_node_compress().  

Sun Jun 15 11:29:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor tidyup.  

Sun Jun 15 11:25:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	_Some_ current -> leafset changes.  

Sun Jun 15 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/html/parser.c, document/html/parser.h:

	free_tags_cache -> free_tags_lookup 

Sun Jun 15 11:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Comment fix.  

Sun Jun 15 11:17:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	trampoline -> leafset. Let's see how long _this_ name will stand :).  

Sun Jun 15 11:14:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	fastfind_node_compress() now takes directly @current.  

Sun Jun 15 11:13:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Removed useless ff_info_colors NULL initialization. It's static.
	It's static. Yadda yadda. It's static ;-).  

Sun Jun 15 11:09:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Compilation fix.  

Sun Jun 15 11:06:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, util/fastfind.c, util/fastfind.h,
	document/html/colors.c:

	fastfind_index_compress() -> fastfind_node_compress(). Support for
	NULL @current removed. fastfind_index_compress() is now just a
	wrapper around fastfind_node_compress() passing it the
	@handle.root_trampoline as @current. fastfind_index_compress() now
	also takes only the @fastfind_handle argument.  

Sun Jun 15 11:06:01 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/html/colors.c, document/html/colors.h:

	Colors lookup is now fastfind enabled ;).  

Sun Jun 15 10:55:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed useless NULL initialization of ff_info_tags (it's static,
	thus preinitialized).  

Sun Jun 15 10:54:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	ff_elt* -> ff_node* 

Sun Jun 15 10:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	line -> trampoline.. a bit longer and sounding perhaps a bit weird,
	but hopefully MUCH less confusing. All identifiers containing that
	token converted.  

Sun Jun 15 10:43:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Initialize struct fastfind_info * to NULL, since it may not be
	modified.  

Sun Jun 15 10:01:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Now useless #ifdef/#endif was removed, it prevented usage of
	fastfind...  

Sun Jun 15 02:00:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Cleanup the long help print function. Adding both language and
	_template_ support. Sorry pasky, this ended up as an all or nothing
	config.  

Sun Jun 15 00:21:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Fix for bug 200 was buggy, this one should fix it, please check.  

Sat Jun 14 23:42:46 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, terminal/tab.c, terminal/tab.h:

	stay_here -> in_background. Suggestion by Jonas.  

Sat Jun 14 22:36:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Tried to guess the algorithm behind fastfind. May not be accurate,
	please correct. Wasn't that easy to figure out due to the funny
	alphabets translations. Please document your code better, zas :-).  

Sat Jun 14 22:31:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Put short help printing in separate function and clean it up.  

Sat Jun 14 22:07:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor ifdef tidyup.  

Sat Jun 14 21:08:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove indentation hack. It didn't improve readability and
	complicated the code.  

Sat Jun 14 20:42:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Introduced accif(), which merged testinc() and if() into one. Use it
	at most places where testinc() was used.  

Sat Jun 14 20:35:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Move ff_into_tags inside #USE_FASTFIND #ifdef and type it correctly.  

Sat Jun 14 20:29:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Don't forget to #undef ifcase.  

Sat Jun 14 20:26:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Normalized util/fastfind.c header.  

Sat Jun 14 20:21:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: fastfind.c, fastfind.h:

	Unanonymize fastfind_handle, it is pointer to (struct
	fastfind_info).  

Sat Jun 14 20:13:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, document/html/parser.c, document/html/parser.h,
	util/fastfind.h:

	Introduced free_tags_cache() and moved+statified ff_info_tags inside
	of document/html/parser.c. fastfind_terminate() is called from
	free_tags_cache().  

Sat Jun 14 20:07:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.h:

	fastfind_terminate() now against takes @fastfind_handle as its
	argument.  

Sat Jun 14 20:05:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.h:

	#define USE_FASTFIND in util/fastfind.h.  

Sat Jun 14 20:02:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, main.h, setup.h:

	Source garbage collection. Don't pollute setup.h by USE_FASTFIND and
	don't pollute main.* with totally unrelated things. We won't compile
	for a while now, it seems. Please stand by.  

Sat Jun 14 19:59:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Don't assert() things that can be just allocation errors.  

Sat Jun 14 19:37:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Fixed &nbsp &nbsp<foo> handling regression reported by Miciah.  

Sat Jun 14 18:58:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: fastfind.c, fastfind.h:

	Small improvement of searching a compressed line + spell fix.  

Sat Jun 14 17:21:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	Major code cleanup by Jonas (and a bit by me). Thanks a lot Jonas
	;).  

Sat Jun 14 13:16:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Bad tags interpretation fix. See bug 200.  

Sat Jun 14 13:15:30 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, terminal/tab.c, terminal/tab.h,
	terminal/terminal.c:

	Now we can open tabs without swapping to them with "Open tab (but
	stay here).", feel free to improve..  

Sat Jun 14 10:36:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	FASTFIND_DEBUG moved from .h to .c.  

Sat Jun 14 10:32:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Shorter struct is now used by default. Cleanup and more statistics.  

Sat Jun 14 01:13:23 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Missing #define were added.  

Sat Jun 14 01:00:42 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, intl/charsets.c:

	FastFind for entities was removed and entities cache is now fully
	enabled.  

Sat Jun 14 00:48:20 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	More statistics and cleanup.  

Sat Jun 14 00:25:14 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	General cleanup: assertions, macros, minor fixes.  

Fri Jun 13 23:00:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Cleanup, some assert() and macros were added to check limits.  

Fri Jun 13 22:36:06 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	I prefer (*reset)() over reset() notation, for a callback function.
	Sorry fonseca ;).  

Fri Jun 13 22:31:51 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	ifcase() macro was introduced to shorten the code concerning case
	sensitivity.  

Fri Jun 13 22:14:02 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Temporary vars now handles realloc returned values in alloc_line() +
	some cleanup.  

Fri Jun 13 22:04:51 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Temporary vars now handles realloc returned values in
	add_to_pointers + some cleanup.  

Fri Jun 13 21:47:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	void *calloc (size_t nmemb, size_t size)... Order of parameters were
	inverted .Thanks to Jonas for the report.  

Fri Jun 13 18:38:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/fastfind.c:

	A lot of s/ff_info/info/ .. Improves line length and readability ..
	atleast for me ;) 

Fri Jun 13 18:12:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/fastfind.c:

	Some small cleanups. Rename member s/searchs/searches/.  

Fri Jun 13 17:54:22 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, main.c, main.h:

	Use fastfind for entities searching, due to entity cache efficiency,
	performance gain is minimal, we should make it optionnal.  

Fri Jun 13 17:48:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Case sensitive key match was fixed. Use ff_elt and ff_elt_c for more
	than 512 keys.  

Fri Jun 13 17:04:39 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, setup.h, document/html/parser.c:

	Now fastfind is used by parser.  

Fri Jun 13 17:02:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.h:

	Debug mode is now disabled. Feel free to use it, it will produce
	statistics about fastfind efficiency.  

Fri Jun 13 16:59:32 2003  Laurent Monin <zas@norz.org>:

	* src/util/: Makefile.am, fastfind.c, fastfind.h:

	Zas's Fast Find Algorithm: it will replace bsearch() + strcasecmp()
	... in parser.c. Please test, comment, improve.  

Fri Jun 13 14:07:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, config/.cvsignore, manpages/.cvsignore:

	Update files cvs should ignore.  

Fri Jun 13 14:06:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2doc:

	Some over escaped chars was trimmed.  

Fri Jun 13 13:34:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Small description change that will make generating elinks.conf
	easier.  

Thu Jun 12 18:43:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Since go_backwards() is called only with psteps being 1 and more,
	steps is always >= 0. Thus removed useless check.  

Thu Jun 12 18:41:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Really do.  

Thu Jun 12 18:40:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/location.c,
	sched/location.h:

	Removed the location.unhist_jump hack, it will not be needed soon
	anymoe and it didn't sound as a good idea anyway.  

Thu Jun 12 16:26:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.doc, config/elinks.conf.xml, tools/help2doc,
	tools/help2docbook:

	Renamed the doc script. It has been hacked extensively to also
	support generating elinks.conf.5, just fly to src/doc/book and `make
	generated-docs`.  

Thu Jun 12 01:15:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/hooks.c:

	Fix a login inversion in 'Use have_location() instead of hardwired
	list_empty() call.' 

Thu Jun 12 01:06:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Damn dependencies. Removed set_location() ...  

Thu Jun 12 00:47:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.h, session.h:

	Added more functions to encapsulate location/history management.  

Thu Jun 12 00:08:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Minor tidy up of comments 

Thu Jun 12 00:02:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, history.c, session.c, session.h:

	Renames: session_wtd -> task_type, wtd_data -> task.  

Wed Jun 11 22:54:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, document/html/renderer.c,
	scripting/lua/core.c, viewer/text/vs.c:

	Removed useless including of sched/history.h.  

Wed Jun 11 22:52:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, scripting/lua/core.c,
	viewer/text/view.h:

	Removed useless including of sched/location.h.  

Wed Jun 11 22:49:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	If @location, destroy_location() upon destroying struct session.  

Wed Jun 11 22:49:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Use have_location() instead of hardwired list_empty() call.  

Wed Jun 11 22:42:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Reordering of declarations.  

Wed Jun 11 22:42:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.h, session.h:

	Moved have_location() from sched/history.h to sched/session.h.  

Wed Jun 11 22:36:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: location.h, session.h:

	Moved cur_loc() from sched/location.h to sched/session.h, it makes
	more sense and is nicer from the OO POV. Added session.location
	field, not being used yet. The gracious reviewer shall overlook that
	the comments inserted already reflect the planned final state.  

Wed Jun 11 22:33:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2docbook:

	Converted to backend design ;) 

Wed Jun 11 22:29:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Briefly described struct session. Massively reorganized it --- now
	it is logically chunked to several parts clustering tightly related
	fields, and each of the parts is even captioned! ;-). Documented
	type of linked lists items.  

Wed Jun 11 22:14:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Commented (struct session)'s helper structures, minor reorder inside
	of (struct frame) to be a bit more logical.  

Wed Jun 11 22:05:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Make ses_unback() more consistent with ses_back() --- when
	loc->vs.url ne ses->loading_url (when can that happen? only when we
	would call ses_unback() w/o preceding go_unback(), it seems..?),
	remake the current location.  

Wed Jun 11 20:14:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config/examples.xml:

	More snippets ...  

Wed Jun 11 20:08:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, config/elinks.conf.xml,
	config/syntax.xml:

	Adding snippets that will be used by both tools/help2docbook and
	config/intro.xml.  

Wed Jun 11 18:40:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2docbook:

	Cleanup the script, and fix handling of -? and -h special case.  

Wed Jun 11 16:53:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Removed unused label no_mem in frm_download().  

Wed Jun 11 16:42:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed unused variable @l from do_move().  

Wed Jun 11 16:28:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fixed typo in history movement backends return value description.  

Wed Jun 11 16:22:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, fixed errorneous commit --- the previous change was bogus,
	sorry.  

Wed Jun 11 16:20:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.h:

	C++ style comments -> C comments 

Wed Jun 11 15:38:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Simplify the get_opt_() declaration a little.  

Wed Jun 11 15:35:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Be a little more paranoid regarding Heisenbugs (that's how they call
	it in man assert(3)\! ;-) --- even in non-DEBUG mode, the real
	function is get_opt_ and get_opt macro wraps around it.  

Wed Jun 11 15:29:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	ses->ref_url may be NULL and it's no problem, so don't panic if its
	allocation fails.  

Wed Jun 11 15:27:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h, sched/sched.c, sched/sched.h:

	prev_url -> ref_url - Makes Grepping Easier.  

Wed Jun 11 15:26:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/history.c, sched/session.c, viewer/text/view.c:

	ref_url is now ordinary string, not the granural one (that is, we
	alloc it by stracpy(), not init_str()). Inspiration by Jonas and
	Miciah.  

Wed Jun 11 14:59:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Rename get_field* -> get_mailcap_field* 

Wed Jun 11 14:54:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Further conformance fixes: Correctly handle implicit wild type.  

Wed Jun 11 14:43:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, mime/backend/mailcap.c:

	Improve of conformance. Triggered by Miciah's comment updates. :) 

Wed Jun 11 14:40:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Compile fix of the heap to stack usage change.  

Wed Jun 11 12:00:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Check that memacpy did not return NULL. Miciah is a dunce.  

Wed Jun 11 11:03:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/encoding.c:

	Make some structures static.  

Wed Jun 11 10:44:18 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/mailcap.c:

	A few comment clean-ups for fun.  

Wed Jun 11 10:23:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	error("%s", m) is silly! 

Wed Jun 11 10:05:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/dialogs.c, globhist/dialogs.c:

	Fix two more strings that had a space before a question mark.  

Wed Jun 11 09:59:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Fix some line-breaks in the Options manager Info box which were
	inadvertently changed the msg_text migration.  

Wed Jun 11 09:30:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/dialogs.c, config/dialogs.c:

	Fix two strings where we had a space before a question mark.  

Wed Jun 11 09:25:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hotkey.c:

	is_hotkey: Test whether a pointer is NULL _before_ we dereference 
	that pointer, and while I'm at it, use assert() for that test.  

Wed Jun 11 09:09:10 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/error.c:

	elinks_debug, elinks_error, and elinks_internal now print even if
	they need to truncate the string.  The code is slightly simpler as a
	side-effect of this change.  

Wed Jun 11 08:39:05 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/: options.c, options.h:

	Don't pass line-numbers and file-names to get_opt in non-DEBUG
	builds.  

Wed Jun 11 07:21:20 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Wed Jun 11 06:19:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: util/error.h, elusive/parser/css/atrule.c,
	elusive/parser/css/parser.c, elusive/parser/css/ruleset.c,
	elusive/parser/css/scanner.c, elusive/parser/css/tree.c:

	Fix assert() and all uses of it: Before, assert(foo) failed if foo
	was true; now, assert(foo) fails if foo is false. (What do you think
	'assert' *means*?) 

Wed Jun 11 05:55:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	go_away: As suggested by Jonas Fonseca a few days ago, replace a
	init_str()/add_to_str() combination with stracpy().  

Wed Jun 11 05:45:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	l_current_url: Instead of stracpying vs->url and replacing any
	POST_CHAR with \0, now we memacpy vs->url up to POST_CHAR, or the
	whole line if there is no POST_CHAR.  This improves memory usage and
	performance, especially with file-uploads.  

Wed Jun 11 05:19:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/mimetypes.c:

	Use the stack instead of mem_allocing in parse_mimetypes_file.  

Wed Jun 11 05:16:23 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	Remove a pointless assignment in free_history().  

Wed Jun 11 05:12:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/: default.c, mailcap.c:

	'bool ? 1 : 0' is superfluous; just use 'bool'.  

Wed Jun 11 05:08:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Remove unnecessary strcmp in lookup_unique_name; pointer comparison
	is sufficient.  

Wed Jun 11 05:02:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/mime.c:

	try_extension_type: Replace safe_strncpy with memcpy; we just
	allocated the necessary space, and the string is already
	null-terminated, so memcpy is fine.  

Wed Jun 11 03:04:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Cleanups and small optimizations + fix of skip_whitespace macro 

Wed Jun 11 03:01:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Tidy up.  

Wed Jun 11 01:40:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, Makefile.doc, config/cmdoptions.xml,
	manpages/.cvsignore, manpages/elinks.1.xml,
	manpages/elinkskeys.5.xml:

	Varies adjustments. Make rule for building config/cmdoptions.xml so
	it can be removed (again already).  

Wed Jun 11 01:14:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2docbook:

	First part of doc autogenerator script.  

Tue Jun 10 23:52:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/book/config.ent.in, doc/book/elinksbook.dtd,
	doc/man/man5/elinkskeys.5:

	Make configure control wether to use DocBook XML or not.  

Tue Jun 10 23:47:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc:

	Generalize book build rules the same way as the manpages.  

Tue Jun 10 23:45:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/book.xml:

	s/manual/book/. Is this a good change? 

Tue Jun 10 23:35:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/mime.xml, features/bookmarks.xml,
	intro/installation.xml:

	A lot of small fixes. Remove <chapterinfo> and unused links.  

Tue Jun 10 23:31:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/info/: authors.xml, preface.xml, revision.xml:

	Rest of the meta data.  

Tue Jun 10 21:39:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: book.xml, elinksbook.dtd:

	Added the last file entities and the book main file.  

Tue Jun 10 21:29:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, elinksbook.dtd, intro/installation.xml:

	Installation docs. And declare entities for the current files. Put
	features/* in EXTRA_DIST.  

Tue Jun 10 21:19:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h:

	Remove now unused function get_extension_from_url() virtually
	patched by Miciah.  

Tue Jun 10 21:10:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config/mime.xml:

	Adding Jose' mime docs.  

Tue Jun 10 20:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: features/bookmarks.xml, manpages/elinks.1.xml,
	manpages/elinkskeys.5.xml:

	Tiny. A few id renames. Give hint for html filename.  

Tue Jun 10 19:27:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config.ent.in:

	Comments must not contain '--' 

Tue Jun 10 19:23:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/version.c:

	Elaborated some feature names and other details changed regarding
	features listing.  

Tue Jun 10 19:19:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Oops, we should then call elinks_error() directly, not the error()
	wrapper ;-).  

Tue Jun 10 19:19:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Now config file syntax errors are reported w/o useless stuff
	(error() location in the source --- show error location in the
	configfile instead).  

Tue Jun 10 19:17:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config.ent.in, elinksbook.dtd:

	s/use-config-entities/override-config-entities/. This way we can get
	the @VERSION@.  

Tue Jun 10 18:16:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, features/bookmarks.xml:

	Pasky ultimate bookmark guide.  

Tue Jun 10 17:26:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.doc, manpages/Makefile.am:

	Test if *DOCTOOL is set before building docs. Moved manpage rules.  

Tue Jun 10 16:34:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/: .cvsignore, .vimrc:

	Give me an F ... give me an A ... give me ...  

Tue Jun 10 16:29:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/TODO:

	Removed and added a few items.  

Tue Jun 10 16:17:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/.cvsignore:

	Added generated config.ent 

Tue Jun 10 16:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, config/cmdoptions.xml,
	config/envvars.xml, manpages/elinks.1.xml:

	More splitting and removed <?xml ...?> since docbook2man choked on
	it :( 

Tue Jun 10 16:05:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/files.xml, manpages/elinks.1.xml:

	First step of splitting and generalizing documentation. New concept:
	object oriented documentation. ;) 

Tue Jun 10 16:02:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config.ent.in, elinksbook.dtd:

	Reorganizing the dtd to make it readable. Make it include
	config.ent.  

Tue Jun 10 15:40:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Hmm too trigger happy. Let configure generate file added in last
	commit.  

Tue Jun 10 15:38:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config.ent.in:

	configure.in 

Tue Jun 10 15:27:54 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	Fix the return type of ses_leave_location per pasky's request.  

Tue Jun 10 14:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.h:

	Oops, this wasn't supposed to be committed (yet). Sorry for a bogus
	commit.  

Tue Jun 10 14:49:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.h:

	Reindentation, basically.  

Tue Jun 10 14:47:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, added missing test for return value of ses_leave_location()
	inside of ses_unback().  

Tue Jun 10 14:46:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Added @dir parameter also to ses_leave_location(), fixed its
	documentation near go_away().  

Tue Jun 10 14:38:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	ses_leave_location() now returns the same thing as go_away() does.
	have_location() moved from ses_back() to ses_leave_location(),
	making the test to also take place in ses_unback().  

Tue Jun 10 14:35:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Tiny whitespace additions, documented roughly ses_leave_location().  

Tue Jun 10 13:41:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, elinksbook.dtd, manpages/Makefile.am,
	manpages/elinks.1.xml, manpages/elinkskeys.5.xml:

	Misc updates. Added dtd to use for configuring the doc/book
	processing, and make manpages use it. Minor fixes of the xml.  

Tue Jun 10 02:12:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc:

	Move DOCBUILDIR to Makefile.doc. Make sure the build subdirs are
	available.  

Tue Jun 10 00:24:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/html/parser.c:

	Two felonies corrected by the whitespace police.  

Mon Jun  9 23:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/.cvsignore, config/.vimrc, info/.cvsignore,
	info/.vimrc, intro/.cvsignore, intro/.vimrc:

	Addedd fairies.  

Mon Jun  9 23:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: .cvsignore, book/Makefile.am:

	Adding missing files to EXTRA_DIST and .cvsignore.  

Mon Jun  9 22:39:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.doc, manpages/Makefile.am:

	Experimented with building html. For now it is dumped in its own
	dir.  

Mon Jun  9 22:12:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Added checks for doctools.  

Mon Jun  9 22:11:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/Makefile.doc, book/manpages/Makefile.am,
	man/man5/elinkskeys.5:

	Manpages are now buildable from the doc/book/manpages dir only.  

Mon Jun  9 21:41:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Major cleanup and optimization of get_attr_val(). Performance
	improvment by partially duplicating code.  

Mon Jun  9 20:13:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/Makefile.am:

	Use EXTRA_* for everything.  

Mon Jun  9 19:43:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/book/Makefile.am, doc/book/Makefile.doc,
	doc/book/manpages/Makefile.am:

	Let's (auto)make buildsystem handle doc/book or die trying. General
	Makefile for inclusion added.  

Mon Jun  9 18:44:34 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Now useless variable was removed.  

Mon Jun  9 18:09:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	The strerror() output was uselessly dynamically allocated (useless
	for format-string msgboxes).  

Mon Jun  9 15:54:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Mon Jun  9 15:34:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Memleak on download error was fixed (bug 195). Patch by zardoz and
	me.  

Mon Jun  9 10:47:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Cleanup + comments.  

Mon Jun  9 10:29:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Entity handling in attribute cleanup.  

Mon Jun  9 10:24:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	add_chr() macro cleanup.  

Mon Jun  9 10:07:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Short labels and variables names in get_attr_val() were replaced by
	explicit ones.  

Mon Jun  9 09:57:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Label end_1 was renamed parse_error.  

Mon Jun  9 09:44:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some gotos were replaced by while loop.  

Mon Jun  9 01:48:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_element() now skip invalid attributes. It fixes bug 42. Please
	review and test extensively.  

Mon Jun  9 00:08:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	The character ":" was added to handle tag attribute like
	xml:lang="en" 

Sun Jun  8 23:59:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some useless tests were removed, one concerning exit on error, the
	other since TAG_DELIM() introduction.  

Sun Jun  8 23:36:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	tmp -> saved_eof_char.  

Sun Jun  8 23:34:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use TAG_START macro.  

Sun Jun  8 23:27:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	atchr() function is now a macro called ATTR_CHAR().  

Sun Jun  8 22:36:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, a compilation fix. Fast, before anyone notices! 

Sun Jun  8 22:35:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	More reducing of code duplication (=> merging stuff to go_away(),
	which now also takes dir parameter describing the exact action being
	performed).  

Sun Jun  8 22:26:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Removed wrapping-up of some warn() calls by ifdef DEBUG, it's
	useless.  

Sun Jun  8 22:24:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Since internal() doesn't dump core unless DEBUG anyway, call always
	internal() for fatal errors. So DEBUG mode now just increases
	verbosity by emitting error()s when warn*() is called.  

Sun Jun  8 22:22:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, memlist.c, string.c:

	error() now prints the message source's longitude and latitude by
	itself, so don't do a redundant job. Rather pass higher-level
	caller's coordinates to elinks_error() where appropriate.  

Sun Jun  8 22:17:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, string.c:

	Use elinks_internal() instead of int_error() if you already want to
	pass own errfile,errline.  

Sun Jun  8 22:12:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Don't highglight error.  

Sun Jun  8 22:11:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/cmdline.c, config/options.c,
	lowlevel/af_unix.c, lowlevel/interlink.c, lowlevel/select.c,
	lowlevel/signals.c, sched/session.c, scripting/lua/core.c,
	terminal/kbd.c, terminal/terminal.c, viewer/dump/dump.c:

	Normalized error() users: the messages are now localized where it
	makes sense, the messages text is edited for brevity, superfluous
	leading 'ERROR' strings removed etc.  

Sun Jun  8 21:57:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Use select_menu()'s window destroying loop inside of
	select_mainmenu(), the original one (inherited from Links) was buggy
	(but it is virtually never used, as we have only submenus inside of
	the main menu).  

Sun Jun  8 21:52:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Moved wtd checking from go_back() to go_away(). Now we check for
	ses->wtd even in go_unback(). Let's see what will happen ;-).  

Sun Jun  8 21:49:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Introduced go_away() static helper for go_back(), go_unback(). Okay,
	it doesn't contain much stuff for now ;-).  

Sun Jun  8 21:45:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Introduced static helper ses_leave_location(), merging common
	preparation code from ses_back() and ses_unback().  

Sun Jun  8 20:00:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Improve extension type lookup so it again only uses last extension
	part. Also fix for not freeing returned mime handler.  

Sun Jun  8 18:47:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h,
	backend/default.c, backend/mimetypes.c:

	Backend content type resolvers now explicitly take extension instead
	of url. Improved mimetypes resolving to try trimmed extensions.  

Sun Jun  8 17:42:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	Introduce get_extensionpart_from_url() and use it for guessing.  

Sun Jun  8 17:41:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Interpretation of /> was fixed.  

Sun Jun  8 17:18:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	More cleanup. Getting ready for better extension handling.  

Sun Jun  8 16:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Minor cleanup.  

Sun Jun  8 16:24:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimization in test order.  

Sun Jun  8 16:17:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Local variable flags was shadowing flags parameter. It was
	responsible of the "No" button untranslated bug.  

Sun Jun  8 16:13:51 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Variable declarations were moved close to their usage point.  

Sun Jun  8 15:20:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/conv.h, osdep/os_dep.c, osdep/os_dep.h:

	Move is_safe_in_shell() to util/ so it is completely independed
	again.  

Sun Jun  8 15:09:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Reverted previous changes. Use file_read_line() again.  

Sun Jun  8 14:54:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	*cough* 

Sun Jun  8 14:53:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Compilation fixes (stupid char vs. unsigned char), discovered by
	Jonas.  

Sun Jun  8 14:48:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	isA() cames back in atchr().  

Sun Jun  8 14:45:55 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.h:

	isA() is now a macro instead of a static inline function.  

Sun Jun  8 14:42:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Hint for compiler: register for e.  

Sun Jun  8 14:40:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	uu variable was renamed to quote.  

Sun Jun  8 14:39:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: file.c, file.h:

	Cleanup file_read_line(): leveling indentation and correctly handle
	reallocation.  

Sun Jun  8 14:29:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: file.c, file.h:

	Small tidy up.  

Sun Jun  8 14:28:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c:

	Handle correctly case of option.desc being NULL.  

Sun Jun  8 14:17:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Some generic util/error.* description, added parameter names to
	declarations where they were missing before.  

Sun Jun  8 14:14:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Documented dump_backtrace().  

Sun Jun  8 14:13:57 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jun  8 14:11:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Moving around of stuff (hopefully the final one now): first comes
	error reporting, then force_dump(), hten optimization games, and the
	backtrace function closes the suite.  

Sun Jun  8 14:06:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Documented force_dump(). Don't declare/define it if !defined(DEBUG).  

Sun Jun  8 13:59:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, util/error.h, util/lists.h:

	Documented do_not_optimize_here(). Introduced
	do_not_optimize_here_gcc_2_7() which expands to
	do_not_optimize_here() under gcc <= 2.7.*. All usages of
	do_not_optimize_here() converted to that.  

Sun Jun  8 13:58:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.h:

	Documented functions.  

Sun Jun  8 13:47:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Effectively reverted the last patch --- *eof is '\0', so we
	automagically test for eof at the most places, and frequently for
	free as it comes out as the negation of the other conditions.
	Compared to the state before the previous patch being applied, we
	now take more advantage from *eof being '\0', and the checks are
	placed more effectively somewhere.  

Sun Jun  8 13:30:55 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Stricter eof checking and infinite loop prevention in
	parse_element().  

Sun Jun  8 13:21:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, lowlevel/connect.c, protocol/ftp.c,
	sched/download.c, scripting/lua/core.c, util/memdebug.c,
	viewer/text/view.c:

	Fixes for label name collisions with error and int_error ->
	elinks_internal 

Sun Jun  8 13:04:05 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	atchr() now really does what it should.  

Sun Jun  8 12:55:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, lists.h, error.h:

	list_magic_error() now expands just to an internal() call, removed
	support function list_magic_error_().  

Sun Jun  8 12:46:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Sorted the error-reporting functions in order
	debug(),error(),internal(), both declarations and definitions.  

Sun Jun  8 12:44:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Now error() also shows __FILE__:__LINE__ where it happenned.  

Sun Jun  8 12:41:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Now error() messages are automagically prepended by '<b>ERROR</b>: '
	string as well.  

Sun Jun  8 12:37:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	To be sure, undef internal,error,debug before redefining them as
	wrappers to elinks_\&().  

Sun Jun  8 12:36:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	error() -> elinks_error(), error() is now just a macro wrapper.
	Moved error() declaration near internal() and debug() and documented
	error() behaviour.  

Sun Jun  8 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	int_error -> elinks_interal, debug_msg -> elinks_debug 

Sun Jun  8 12:33:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* TODO:

	Removed items that are in bugzilla and regrouped existing.  

Sun Jun  8 12:30:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Tiny reorganization, documented the debug() and internal() calls.  

Sun Jun  8 12:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: atrule.c, parser.c, ruleset.c,
	scanner.c, state.h, tree.c:

	Use assert().  

Sun Jun  8 12:19:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Introduced assert() macro. It does nothing if in FASTMEM mode,
	prints internal error in normal mode and prints error + crash in the
	DEBUG mode. Idea by Jonas, Zas, me, and many others over the
	timeline ;-).  

Sun Jun  8 11:54:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Small fixes of keybinding captions.  

Sun Jun  8 11:54:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Make --enable-fastmem compile even if we don't have alloca().  

Sun Jun  8 11:51:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation updated.  

Sun Jun  8 11:38:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, version.c, version.h, dialogs/info.c,
	lowlevel/signals.c, util/Makefile.am, util/error.c, util/version.c,
	util/version.h:

	Moved src/version.* to src/util/. This helps making util/ more or
	less standalone, and we will (soon) want to use src/version.h for
	something more interesting.  

Sun Jun  8 10:59:53 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	msgbox formattized :) 

Sun Jun  8 10:49:25 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, bookmarks/backend/xbel.c,
	config/kbdbind.c, config/opttypes.c, dialogs/menu.c,
	document/html/parser.c, document/html/renderer.c,
	elusive/parser/css/scanner.c, elusive/parser/css/tree.c,
	elusive/parser/html/parser.c, globhist/globhist.c,
	intl/gettext/bindtextdom.c, intl/gettext/dcigettext.c,
	intl/gettext/finddomain.c, intl/gettext/l10nflist.c,
	intl/gettext/libintl.c, intl/gettext/loadmsgcat.c,
	intl/gettext/localcharset.c, intl/gettext/localealias.c,
	lowlevel/dns.c, lowlevel/select.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c, osdep/os_dep.c, protocol/file.c,
	protocol/mailcap.c, protocol/http/auth.c, sched/connection.c,
	sched/download.c, sched/location.c, sched/sched.c, sched/session.c,
	terminal/terminal.c, util/blacklist.c, util/hash.c,
	util/snprintf.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/vs.c:

	for(), foreach(), while(), .... -> for (), foreach (), while ()...  

Sun Jun  8 10:40:09 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about ie. for () vs for() was added.  

Sun Jun  8 10:39:54 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, m4/gettext.m4, po/.cvsignore, po/Makefile.in,
	po/Makefile.in.in, po/POTFILES.in, po/be.po, po/bg.po, po/ca.po,
	po/cs.po, po/da.po, po/de.po, po/el.po, po/es.po, po/et.po,
	po/fi.po, po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po,
	po/is.po, po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po,
	po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po:

	Removed POTFILES.in usage, we now just assume that all *.[ch] files
	in src/ might contain stuff for l18n. This also involves
	po/Makefile.in.in -> po/Makefile.in.  

Sun Jun  8 02:24:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/parser.c:

	Now who said ELusive development was stalled. ;) Cleanups.  

Sun Jun  8 02:00:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Destroy file_read_line() and integrate it in parse_mailcap_file()
	all cleaned up. Also makes parsing more tolerant and optimized.  

Sat Jun  7 23:50:50 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun  7 23:42:42 2003  Laurent Monin <zas@norz.org>:

	* po/POTFILES.in:

	All source files were added to POTFILES.in, sometimes later it will
	be changed to be automagically generated.  

Sat Jun  7 23:42:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, default.c, mailcap.c,
	mimetypes.c:

	Store backends in a list. Simplifies multiplexing and could lead to
	some fun optimization of lookups and/or easier configuration of the
	order.  

Sat Jun  7 23:37:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	Minor tidyup.  

Sat Jun  7 23:31:43 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/elusive/README, src/ssl/TODO:

	Finish ciabot2 test.  

Sat Jun  7 23:30:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elusive/README, ssl/TODO:

	further test ciabot2 

Sat Jun  7 23:29:05 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	test ciabot2 

Sat Jun  7 23:08:55 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/info.c, dialogs/mime.c,
	globhist/dialogs.c, protocol/user.c, sched/download.c,
	sched/session.c, viewer/text/view.c:

	MSGBOX_EXTD_TEXT was renamed to a more appropriate MSGBOX_FREE_TEXT.  

Sat Jun  7 23:00:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	A test against buttons < 0 was added, in that case, we just return.  

Sat Jun  7 22:53:43 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jun  7 22:52:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplified extension type initialization. Unused #include removed 

Sat Jun  7 22:50:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Minor tidyup.  

Sat Jun  7 22:42:42 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Update the .po files suite.  

Sat Jun  7 22:37:10 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	More ciabot debugging.  

Sat Jun  7 22:36:01 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	Debugging ciabot.  

Sat Jun  7 22:18:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.h, backend/mailcap.c:

	Hint accepted. s/(int [a-z]+:1;)/unsigned \1/ 

Sat Jun  7 22:13:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Comment tidyups suggested by Miciah.  

Sat Jun  7 22:10:39 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	s/quadro/tetra/, thanks to Troska.  

Sat Jun  7 22:09:41 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Drop a note about bitfields usage and especially about how important
	it is to specify signedness near bit-sized structure field. *hint*
	*hint* 

Sat Jun  7 21:56:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/default.c, backend/mailcap.c:

	Use bitfield width of one for boolean members. If not faster it is
	prettier.  

Sat Jun  7 21:41:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	One add_to_menu() was forgotten.  

Sat Jun  7 21:39:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	document/html/parser.c, viewer/text/view.c:

	Introduced menu_item.no_intl and additional parameter to
	add_to_menu() with the same effect. If zero, menu system will again
	translate the menu items properly. If non-zero, the item won't be
	translated at all.  

Sat Jun  7 21:33:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	s/term/win->term/ 

Sat Jun  7 21:33:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Nasty sneaky DEBUG piece. Compilation fix.  

Sat Jun  7 21:31:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Yet Another Aftermath Compile Fix[tm] 

Sat Jun  7 21:31:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.c:

	Oops, typo fix.  

Sat Jun  7 21:28:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: hotkey.c, inphist.c, menu.c, menu.h:

	Introduced menu_item.no_intl and additional parameter to
	add_to_menu() with the same effect. If zero, menu system will again
	translate the menu items properly. If non-zero, the item won't be
	translated at all.  

Sat Jun  7 21:20:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Tiny tidy up fixing indentation.  

Sat Jun  7 20:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Minor reorder of fields, limit ignore_hotkey to 2 bits.  

Sat Jun  7 20:51:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	ignore_hotkey must be unsigned 

Sat Jun  7 20:51:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	Minor reorder of fields, limit ignore_hotkey to 2 bits.  

Sat Jun  7 20:08:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.h, dialogs/menu.c:

	menu_item.submenu is now boolean and takes only one bit.  

Sat Jun  7 20:05:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	document/html/parser.c:

	(menu_item.) in_m -> submenu 

Sat Jun  7 20:00:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Namespace cleanup --- _send_download() -> send_download_do().  

Sat Jun  7 19:44:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fixed now-misplaced comment.  

Sat Jun  7 19:07:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Cleanups: Use list functions (magic tests), make vars local, let the
	code breathe.  

Sat Jun  7 18:29:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Small cleanup. Use have_location().  

Sat Jun  7 17:53:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.c:

	Removed trailing newline.  

Sat Jun  7 17:53:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/group.c, dialogs/options.c:

	Group layouting functions now also can translate lists of strings by
	themselves if told so.  

Sat Jun  7 17:34:55 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	t2 -> term, fix previous patch.  

Sat Jun  7 16:21:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	Checkboxes layouting functions now also can translate lists of
	strings by themselves if told so.  

Sat Jun  7 15:43:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Save position of POST_CHAR in variable.  

Sat Jun  7 15:35:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, sched/error.c, sched/session.c:

	Picking up the broken pieces of pasky hacking frenzy 

Sat Jun  7 15:34:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	do_edit_dialog() now also takes parameter specifying whether it
	should translate the passed strings by itself.  

Sat Jun  7 15:29:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/auth.c:

	Fixed localization of the 'Auth. required for blabla' message in the
	authentication dialog.  

Sat Jun  7 15:25:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c:

	Make user dialogs (created by do_dialog) again translated properly
	(or at least most of them for now).  

Sat Jun  7 15:10:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/menu.c, scripting/lua/core.c,
	viewer/text/view.c:

	input_field() now takes additional parameter telling whether to
	translate the string parameters passed or not. Now the input_field()
	dialogs should be properly translated again as well.  

Sat Jun  7 15:01:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	@t is already localized, so msg_box() shouldn't try to further
	localize the strings passed.  

Sat Jun  7 15:00:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	All print_error_dialog() were setting the title to Error, so make it
	implicit.  

Sat Jun  7 14:56:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, sched/error.c, sched/error.h,
	sched/session.c, viewer/dump/dump.c:

	get_err_msg() now returns localized result when it makes sense.  

Sat Jun  7 14:51:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	When term is NULL, just go and straightly call gettext().  

Sat Jun  7 14:44:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	s/value/Value/ in option info dialog.  

Sat Jun  7 14:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Legalize _() calls with term == NULL.  

Sat Jun  7 14:40:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/session.c, viewer/text/view.c:

	Fix previous patch adding term to msg_text() + fix of MSG_* typo 

Sat Jun  7 14:40:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, connection.h, error.c, sched.c,
	sched.h:

	Moved msg_dsc from sched/sched.* to sched/error.*.  

Sat Jun  7 14:37:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, sched/Makefile.am, sched/download.c, sched/error.c,
	sched/error.h, sched/session.c, sched/session.h,
	viewer/dump/dump.c:

	Moved free_strerror_buf() and get_err_msg() from sched/session.* to
	sched/error.*.  

Sat Jun  7 14:16:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/info.c,
	dialogs/mime.c, globhist/dialogs.c, protocol/user.c,
	sched/download.c, sched/session.c, viewer/text/view.c:

	Pass term parameter to msg_text().  

Sat Jun  7 14:07:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reformatted Search string not found message to look more natural.  

Sat Jun  7 14:03:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Indentation fix.  

Sat Jun  7 14:02:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Translate option description in option info msgbox.  

Sat Jun  7 13:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/user.c:

	More clear error message when protocol has no handler.  

Sat Jun  7 13:54:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: msgbox.c, msgbox.h:

	Introduced msg_text_ni() along msg_text(), not performing automatic
	localization (msg_box() now automagically localizes the format
	string). Both those functions now use the same backend,
	msg_text_do().  

Sat Jun  7 13:46:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/button.c, bfu/text.c,
	document/html/parser.c:

	Removed now-useless AL_MASK. Also destroyed one forgotten
	AL_EXTD_TEXT, thanks Jonas.  

Sat Jun  7 13:45:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Tiny comment updates.  

Sat Jun  7 13:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: msgbox.c, msgbox.h:

	MSGBOX_INTL -> MSGBOX_NO_INTL and inverted its meaning. Now, w/o any
	flags all the string arguments are automagically localized.  

Sat Jun  7 13:27:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Small language update. Now da.po rates higher than de.po! ;)) 

Sat Jun  7 13:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Grammar fix of delete folder message.  

Sat Jun  7 13:17:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/inpfield.c, bfu/msgbox.c, bfu/msgbox.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/document.c,
	dialogs/info.c, dialogs/menu.c, dialogs/mime.c, globhist/dialogs.c,
	scripting/lua/core.c, protocol/url.c, protocol/user.c,
	sched/download.c, sched/session.c, viewer/text/view.c:

	Moved the msg_box() flags from enum format_align at bfu/align.h to
	enum msgbox_flags in bfu/msgbox.h. msg_box() now takes additional
	flags parameter. AL_* -> MSGBOX_*.  

Sat Jun  7 12:58:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c:

	AL_NO -> AL_NONE 

Sat Jun  7 12:54:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: align.h, msgbox.c, msgbox.h:

	Introduced AL_INTL msg_box() flag, which will make msg_box() to l18n
	all the passed strings for you. Must not be used in conjuction with
	msg_text(), though.  

Sat Jun  7 12:46:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c:

	Removed unused variables.  

Sat Jun  7 12:40:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Rewritten msg_text() description, it had nothing to do with
	gettextization ;-). Added note about its recommended usage.  

Sat Jun  7 12:30:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Documentation of the msg_box() call extended, reintroduced
	informations lost during the transition, bunch of grammar/typo
	fixes, some more docs about AL_EXTD_TEXT behaviour...  

Sat Jun  7 12:15:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Reformatted msg_box() declaration, it is not definiton but really a
	declaration ;).  

Sat Jun  7 12:13:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Removed the 'info' udata hack, pass directly the text as udata to
	the formatting function. Side effect is ungettextization of
	msg_box(). People should pass already gettextized strings to it.  

Sat Jun  7 12:08:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Typo fix.  

Sat Jun  7 12:07:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Reverted the last patch, it does bad thing at a bad place. We
	shouldn't assume that we can't have zero btutons, and the implicit
	Ok button insertion doesn't feel that great. It should be done
	differently, if at all... (I personally believe the current state of
	ok button being inserted explicitly is fine, *shrug*.) 

Sat Jun  7 12:05:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, group.c, hotkey.c,
	menu.c, text.c:

	Removed early gettextization from the BFU routines. All (or almost
	all) the strings getting into BFU routines should be already
	gettextized, as they may be constructed from various format strings
	etc. And double-gettextization is eeevil. Uff, now the harder part:
	look around the BFU users and properly gettextize everything.  

Sat Jun  7 11:35:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Removed useless fmttext variable from memory_inf(), format string
	can be used directly in msg_text().  

Sat Jun  7 11:00:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Insert VERSION_STRING to menu_copying()'s msg_box() thru %s, making
	gettext not choke on it.  

Sat Jun  7 10:58:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	ses_goto() really-post msg_box() cleanup --- make m1 a real format
	string, taking m2 as %s content.  

Sat Jun  7 10:57:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Missing type casting was fixed.  

Sat Jun  7 10:56:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/document.c,
	dialogs/info.c, globhist/dialogs.c, sched/download.c,
	sched/session.c, viewer/text/view.c:

	msg_box() / msg_text() calls tidyup --- minor reformatting and
	mainly reindentation of parameters. I know, stupid pasky changing
	his mind...  

Sat Jun  7 10:43:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	If buttons count is < 1, we always print default OK button. It will
	simplifies msg_box() calls too.  

Sat Jun  7 10:34:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Renamed internal snprintf implementation entry points to
	elinks_\&(), and defined the proper names to point at them by
	preprocessor (just like it is in util/string.h). This is to avoid
	linking and declarations shadowing problems.  

Sat Jun  7 10:27:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Include elinks.h.  

Sat Jun  7 10:24:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	If USE_OWN_LIBC is defined, pretend that we don't have any of the
	snprintf() routines and use the own ones.  

Sat Jun  7 10:24:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Attempt to clarify the #if maze just a little.  

Sat Jun  7 10:21:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Removed useless if discovered by Zas.  

Sat Jun  7 10:20:59 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Use add_one_to_ml() to simplify code.  

Sat Jun  7 10:20:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Removed useless SAFE_FREE macro.  

Sat Jun  7 10:16:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Moved #include <math.h> into the main TEST_SNPRINTF code piece.  

Sat Jun  7 10:15:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Minor reorganization of #includes, to follow more the ELinks
	standards.  

Sat Jun  7 10:03:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memlist.c, memlist.h:

	add1_to_ml -> add_one_to_ml 

Sat Jun  7 09:59:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Make VA_COPY declaration public, so that not only snprintf.c can use
	it.  

Sat Jun  7 09:56:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memlist.c, memlist.h:

	add1_to_ml() was introduced, it behaves like add_to_ml() but is
	faster when only one element is added.  

Sat Jun  7 09:56:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Reverted 'Internal *snprintf() functions can now be used when
	--enable-own-libc is set. Minor cleanup and portability
	improvments.'. It is doing too much stuff at the same time.  

Sat Jun  7 09:26:20 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun  7 09:01:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Dependancy to submenu label was removed in welcome message.  

Sat Jun  7 08:47:49 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Typo fix.  

Sat Jun  7 08:37:21 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.h:

	Test exists in configure script, so just use HAVE_VARIADIC_MACROS.  

Sat Jun  7 08:30:20 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/version.c, src/util/snprintf.h,
	src/util/string.h, src/util/version.c:

	USE_LIBC  was renamed to USE_OWN_LIBC.  

Sat Jun  7 08:22:54 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, util/version.c:

	Own_libc now appears in version string if was compiled with
	--enable-own-libc.  

Sat Jun  7 08:16:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Redundant VA_COPY test was removed, it is in snprintf.h.  

Sat Jun  7 08:14:07 2003  Laurent Monin <zas@norz.org>:

	* src/util/: snprintf.c, snprintf.h:

	Internal *snprintf() functions can now be used when
	--enable-own-libc is set. Minor cleanup and portability improvments.  

Sat Jun  7 03:55:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Add sanity check before freeing hash. Apparently needed when exiting
	a slave instance. Interesting.  

Sat Jun  7 03:13:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Cleanup memory info dialog to use msg_text().  

Sat Jun  7 01:55:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Check malloc() failure and give vsnprintf() full buffer size. This
	should round up the code part of the migration. Now po files needs
	to be synced and (re)translated 8/ 

Sat Jun  7 01:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/info.c, dialogs/mime.c,
	globhist/dialogs.c, protocol/user.c, sched/download.c,
	sched/session.c, viewer/text/view.c:

	Migrate to use printf format strings in msg_box 

Sat Jun  7 01:43:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/setup.h:

	Used in mimetypes backend. Hmmm.  

Sat Jun  7 01:04:05 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Minor optimizations: use variables for temporary results.  

Sat Jun  7 00:54:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Don't end string too soon 

Sat Jun  7 00:49:14 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Elinksification and whitespaces fix.  

Sat Jun  7 00:35:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.c:

	Move up #define of VA_COPY so it is reachable from vasprintf() 

Sat Jun  7 00:33:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: msgbox.c, msgbox.h:

	First step of migrating to using printf style strings in msg_box.  

Fri Jun  6 23:23:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Ditto as last commit for mailcap backend 

Fri Jun  6 23:20:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Use the option systems change_hook to control the backend.  We now
	store a local pointer to the mimetypes option tree and uses it for 
	getting all options this pointer.  

Fri Jun  6 23:14:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	A few cleanups adding missing #includes and changing the indentation
	level.  

Fri Jun  6 23:13:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	When using key prefix Ctrl-, automagically upcase the letter after
	the prefix, since normally we can't catch lowercase variant of this
	(but don't save the keybindings such transformed since in the
	future, this could change and that prefix could become perfectly
	valid). Should fix bug 34, reported by Stepan Roh.  

Fri Jun  6 23:06:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Whitespaces.  

Fri Jun  6 22:59:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/Makefile.am:

	Added DESIGN and TODO to EXTRA_DIST.  

Fri Jun  6 22:56:21 2003  Petr Baudis <pasky@ucw.cz>:

	* COPYING, src/elusive/LICENCE, src/elusive/Makefile.am,
	src/elusive/README:

	Relicenced ELusive to BSD licence (w/o advertising clause), as
	agreed upon in the bug 50. This should fix it.  

Fri Jun  6 21:18:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.h, default.c, mailcap.c, mimetypes.c:

	Add identifying name to backends.  

Fri Jun  6 20:34:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make wildcard lookup more compact and readable 

Fri Jun  6 20:22:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Further improve the clarity and testing.  

Fri Jun  6 20:07:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Remake previous fix to actually work. Missing #include added.  

Fri Jun  6 19:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Possible badness was fixed with type being NULL when formatting 

Fri Jun  6 19:24:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Finally ignore entries where testneedsfile or parsing of optional
	fields reported error.  

Fri Jun  6 19:13:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Always use strncasecmp. s/mailcap_map_entries/mailcap_map_size/.  

Fri Jun  6 19:04:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	A lot of small cleanups and improving comments. More sanity checks.  

Fri Jun  6 17:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Use lists. This also means introducing a hash item for each type
	that holds the list_head.  

Fri Jun  6 17:24:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Simplify code flow. Add missing allocated memory tests 

Fri Jun  6 16:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Cleanups and reduce code duplication by using pointer magic ;) 

Fri Jun  6 12:59:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Make mailcap use #defined backend name. Make mimetypes name reflect
	option system.  

Fri Jun  6 12:46:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Quite huge sorry.  Generalize and fix command formatting for
	bufferoverflows.  Formatting is prosponed to when needed.  The bogus
	file expansion removed. Fail if test needs file always! 

Fri Jun  6 11:41:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Completely change the flow of parsing the file. Nomore 'lazy'
	allocation of @entry. Moved most of @entry initialization to
	init_mailcap_entry() 

Fri Jun  6 11:14:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Rename to (done|init)_mailcap_entry(). Changed their order which
	will be usefull in next steps.  

Thu Jun  5 23:34:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Move variables to make them as local as possible.  

Thu Jun  5 23:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	Added missing mem_alloc() test.  

Thu Jun  5 22:46:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Add void to non args struct functions 

Thu Jun  5 22:40:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Greatly simplify the code flow in check_entries().  

Thu Jun  5 21:54:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Try to workaround buggy FreeBSD libc containing namespace-polluting
	***** like LIST_HEAD or list_head. Should fix bug 193, reported by
	Jonas.  

Thu Jun  5 16:55:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memlist.c:

	Reverted bad reindentation.  

Thu Jun  5 16:40:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A useless call to getml() was removed.  

Thu Jun  5 16:39:25 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memlist.c, memlist.h:

	Memlist debug now prints file and line.  

Thu Jun  5 15:45:05 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entities cache is now enabled (it will perhaps be disabled at
	0.5pre1 release). Please report any issue.  

Thu Jun  5 15:28:02 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/colors.c, lowlevel/af_unix.c,
	lowlevel/interlink.c, lowlevel/signals.c, osdep/os_dep.c,
	osdep/win32.c, protocol/ftp.c, protocol/url.h, sched/session.c:

	Functions declarations tidyup.  

Thu Jun  5 14:38:16 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, bfu/leds.c, bookmarks/bookmarks.c,
	bookmarks/backend/common.c, config/conf.c, config/kbdbind.c,
	config/options.c, cookies/cookies.c, dialogs/menu.c,
	util/version.c, document/html/parser.c, document/html/renderer.c,
	elusive/layouter/box.c, elusive/parser/syntree.c,
	elusive/parser/css/scanner.c, elusive/parser/css/tree.c,
	globhist/globhist.c, intl/charsets.c, intl/gettext/libintl.c,
	intl/gettext/localealias.c, lowlevel/home.c, lowlevel/select.c,
	lowlevel/sysname.c, lowlevel/timer.c, lowlevel/ttime.c,
	osdep/beos.c, osdep/os_dep.c, protocol/mailcap.c,
	protocol/http/auth.c, sched/connection.c, sched/download.c,
	sched/sched.c, sched/session.c, ssl/ssl.c, terminal/kbd.c,
	terminal/terminal.c, util/blacklist.c, util/error.c,
	util/memdebug.c, util/string.c:

	type func() -> type func(void) in declarations.  

Thu Jun  5 14:28:02 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about functions without parameters declaration was added.  

Thu Jun  5 14:23:54 2003  Laurent Monin <zas@norz.org>:

	* src/mime/: mime.c, mime.h:

	type func() -> type func(void).  

Thu Jun  5 14:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/: common.c, common.h, mailcap.c, mimetypes.c:

	type func() -> type func(void).  

Thu Jun  5 14:15:02 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mimetypes.c:

	Spaces fix.  

Thu Jun  5 14:00:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Move out the parsing of optional fields 

Thu Jun  5 13:49:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Nested error() call moved to the caller so less parameters are
	needed.  

Thu Jun  5 13:06:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	First step of cleaning ups mailcap support. Rework comments.  

Thu Jun  5 12:08:04 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Errors are now produced in --enable-debug mode if getml() or
	add_to_ml() are called with a NULL first element.  

Thu Jun  5 04:58:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Only freeml() if ml is not NULL.  

Thu Jun  5 00:41:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Free memory list also before the other two possible returns.  

Wed Jun  4 23:23:18 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Almost complete rewrite of memory list routines. Useless allocation
	for empty lists were removed. Comments were added.  

Wed Jun  4 22:43:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	-force-html option for compatibility with lynx introduced, doing
	essentially the same thing as -default-mime-type text/html. Fixes
	bug 8. Idea by Boris Filipovic <b.filipovic@centrum.cz>.  

Wed Jun  4 22:21:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/Makefile.am:

	Mark man pages as EXTRA_DIST. Fixes problem reported by Raul.  

Wed Jun  4 22:02:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	A potential memleak (when !dlg) was fixed. Reported by fabiob.  

Wed Jun  4 21:47:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	tab-* actions added .. and actions was reordered 

Wed Jun  4 20:05:55 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/dialogs.c, config/dialogs.h,
	util/secsave.c, util/secsave.h:

	Secsave error display was improved, now an internal message _and_ a
	strerror message are possible. Dialog refresh was fixed.  

Wed Jun  4 19:34:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Indentation cleanups to use tabs if possible in --enable section 

Wed Jun  4 19:26:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/common.c, backend/common.h:

	Cleanups correcting #include order, updating comments and parameter
	names for prototypes to be more guiding.  

Wed Jun  4 19:08:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/secsave.c:

	Trivial fix of cut'n'paste error reported by Zardoz.  

Wed Jun  4 19:04:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: Makefile.am, backend/Makefile.am, backend/common.c,
	backend/mimetypes.c, backend/mimetypes.h:

	This adds support for mime.types files. Inspired once again by Mutt
	and also existing mailcap support.  

Wed Jun  4 18:39:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h:

	Added get_extension_from_url() which should be moved to
	protocol/url.? ASAP Now mime/ should compile again. Sorry for the
	inconvenience.  

Wed Jun  4 18:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Make get_content_type() use get_extension_from_url() introduced in 
	http://bugzilla.elinks.or.cz/attachment.cgi?id=68&action=view 

Wed Jun  4 18:01:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, mailcap.c:

	Introduce utility function to walk through a PATH style string and
	use it in the mailcap backend.  

Wed Jun  4 17:20:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/mime.c:

	Dir was separator not correctly handled when extracting url
	extension, under cygwin it was taking \ as a dir separator even in
	ie. http URLs. Fixes bug 191, patch by Jonas.  

Wed Jun  4 17:15:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: secsave.c, secsave.h:

	enum secsave_errno_set -> enum secsave_errno 

Wed Jun  4 17:14:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, util/secsave.c, util/secsave.h:

	Fixed stupid namespace clash of secsave_errno_set enum and useless
	forcing of values on the enum members.  

Wed Jun  4 17:10:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Captialization fix, reduced regression caused by unknown error used
	instead of Secure open failed.  

Wed Jun  4 17:05:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, util/secsave.c, util/secsave.h:

	Errors handling in secsave was slightly modified, now an explicit
	message is printed when file saving is disabled by option (ie.
	-no-connect).  

Wed Jun  4 16:55:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Statification of get_content_type_default().  

Wed Jun  4 16:27:24 2003  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	write_config_error() now takes an error string as parameter instead
	of an error code. It removes that 2222 ret code from it, and will
	ease things (ie. when error reason will be set by secure_open(), to
	have correct messages when trying to save conf in -no-connect mode).  

Wed Jun  4 15:46:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Make no_str static instead of being dynamic. Also statify the symbol
	(not used anywhere outside of charsets.c). This should fix bug 115.
	Patch by Witek (and me).  

Wed Jun  4 13:32:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make ELinks compile using gcc version 3.3 with -O2 and -Werror
	(closes: #189) 

Wed Jun  4 10:26:41 2003  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/view.c, dialogs/info.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:23:10 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, ssl/ssl.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:17:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: finger.c, ftp.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:10:37 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: http/http.c, file.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:06:03 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, lowlevel/sysname.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:02:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 09:59:14 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, cookies/cookies.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 09:49:20 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 08:56:58 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	add_to_str() calls were replaced with less expensive
	add_chr_to_str() calls if applicable.  

Tue Jun  3 23:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, mailcap.c, mailcap.h:

	Only define backend symbols when they are required. Idea by
	kuser@...  

Tue Jun  3 20:23:35 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	elinks_memmove() was fixed (again).  

Mon Jun  2 17:05:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	memmove() should take void *, not char *. Suggested by zas.  

Mon Jun  2 16:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Some comments reorganization (very minor).  

Mon Jun  2 16:04:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Moved libc functions before string comparasion functions. Prevents
	'declared inline after being called' warnings, reported by zas.  

Mon Jun  2 15:55:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Reverted overloaded patch.  

Mon Jun  2 15:42:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fix bug (bug 184) when document.browse.links.wraparound skips link
	#1 and the last link (as it gets moved twice). Patch by
	Zardoz@users.sf.net (and me). Will need more work in future, maybe.  

Mon Jun  2 10:02:42 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	Replacement functions for strchr() and strrchr() were added, fixing
	an issue reported by Jonas. elinks_memmove() was fixed. All stub
	functions were moved at top of source file to prevent "declared
	inline after being called" warnings.  

Mon Jun  2 01:52:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix bug 188: Need to redraw after enter/enter-reload with a prefix.  

Sun Jun  1 18:57:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	When we receive \027[^]O\027], always assume it is alt+something,
	not only if the something is >= ' '. This enables even ie. alt+tab
	being catched. Based on patch by Miciah, fixing bug 186. Hopefully.  

Sun Jun  1 18:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Minor tidyup.  

Sun Jun  1 17:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	These are the cosmetical changes (minor indentation fixes).  

Sun Jun  1 16:50:43 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Prefer withval over default when looking for SSL libs. Perhaps
	co-fixes bug 7.  

Sun Jun  1 16:46:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Use prefix optionally passed along the --with parameters.  

Sun Jun  1 11:53:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	No need to redraw when the user is entering a key prefix (or did I
	miss some thing?) 

Sun Jun  1 11:37:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix for bug 187: Check that prefixes don't specify non-existent
	links.  

Wed May 28 09:59:23 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entity cache was greatly improved. memmove() call was removed. It
	uses iterative search + a kind of hashing on length + dichotomic
	search for not yet cached entities. Disabled for now but fully
	functionnal, please test and profile. Feel free to improve ;).
	Hashing whole entity table does not seem to improve things. Current
	solution is very effective.  

Wed May 28 08:41:40 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	A now useless test was removed (reported by Miciah). A comment about
	code redundancy between convert_string() and put_chars_conv() was
	added.  

Wed May 28 00:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.h:

	Sync header with new get_entity_string() definition which use const.  

Wed May 28 00:45:46 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Ooops, fix bug in &#1234; interpretation introduced by last patch
	and cleanup of experimental cache code (disable for now). Thanks to
	Master "Eye-Of-The-Awk" Pasky for the report.  

Tue May 27 22:12:58 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/gettext.m4:

	The bison detection was wrong, fixed by skim <skim@psi.cz>.  

Tue May 27 21:57:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, dialogs/options.c, sched/session.c,
	sched/session.h, terminal/terminal.c, terminal/terminal.h:

	Reverted patch changing title setting stuff by zas. It was
	overloaded and corrupted by some changes bad from the design
	standpoint. Needs to be reintroduced by smaller bits. Reopens bug
	178.  

Tue May 27 20:03:37 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, document/html/renderer.c:

	Entity decoding was inefficient since we were calling
	get_entity_string() for non-entity strings like &t=abc;. This was
	fixed. An experimental entity string cache was added (but disabled
	for now). Feel free to test and improve, have a look at
	src/intl/charsets.c near line 37 if interested.  

Tue May 27 07:58:59 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Fix a potential segfault introduced by my last patch, fix some
	comments.  

Mon May 26 08:51:00 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Copy TERM env variable before usage, code redundancy was reduced. It
	fixes bug 180. Issue reported by Pasky, partially fixed by Karsten,
	patch by me.  

Mon May 26 08:25:29 2003  Laurent Monin <zas@norz.org>:

	* po/: POTFILES.in, be.po, bg.po, ca.po, cs.po, da.po, de.po,
	el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po,
	is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po,
	ru.po, sk.po, sv.po, tr.po, uk.po:

	POTFILES.in was updated, .po files resynced and french translation
	updated.  

Sun May 25 11:29:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, sched/session.c:

	Internationalized TERM_TITLE_DEFAULT.  

Sun May 25 11:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, sched/session.c:

	Reverted TERM_TITLE_DEFAULT removal.  

Sun May 25 10:01:29 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, terminal/terminal.c, terminal/terminal.h:

	attach_terminal() was moved from main.c to terminal.{c,h},
	check_terminal_pipes() and close_terminal_pipes() were introduced.  

Sun May 25 09:41:44 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: signals.c, signals.h:

	Typo fixes. I prefer sizeof(var) against sizeof var, more consistent
	notation imho.  

Sun May 25 09:35:22 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, sched/session.c, sched/session.h,
	util/conv.c, util/conv.h, viewer/text/view.c:

	[encode|decode]_url() were renamed to
	[encode|decode]_shell_safe_url() and moved from session.{c,h} to
	conv.{c,h}.  

Sun May 25 09:22:53 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, sched/session.h, util/conv.c, util/conv.h:

	add_xnum_to_str() and add_time_to_str() were moved from
	session.{c,h} to conv{c,h}.  

Sun May 25 01:55:56 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, sched/session.c:

	TERM_TITLE_DEFAULT was dropped and replaced by a gettextized string
	in session.c.  

Sun May 25 01:39:45 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/options.c, sched/session.c,
	sched/session.h, terminal/terminal.c, terminal/terminal.h:

	set_terminal_title() was rewritten, now it belongs to session.c
	since it depends on session title, do_terminal_title is kept in
	terminal.c and was slightly modified. Now prefix, default title, and
	suffix are macros in setup.h, feel free to adapt them to your taste.
	These changes fix bug 178.  

Sat May 24 23:40:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Remove the space before the question mark in the 'Delete keybinding'
	confirmation box.  

Sat May 24 22:55:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	At least partially documented terminal-related structures. Doesn't
	feel bad to have structures look like this, does it? ;-) 

Sat May 24 22:32:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, bookmarks/bookmarks.c,
	config/kbdbind.c, config/options.c, util/lists.h:

	Introduced add_to_list_bottom(), which inserts stuff at the list's
	bottom, surprisingly. Use that instead of the ugly add_at_pos()
	hacks. Gloria turns out to be a KGB secret agent and blows up
	everything when she reaches the Simon's ranch, accompanied by
	John/Richard. Junior is kidnapped, frozen and his genotype is
	inserted into unnamed web browser's source.  

Sat May 24 22:07:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Somehow, we all of sudden have plenty of completely redundant code
	at the both sides of the magic border. So took it outside and
	unified. John visits Junior, introduces himself as Sally's good
	friend and praises for a lend. As Junior goes to the city to get
	some money, John seduces Gloria, steals some precious stuff at
	Junior's mansion and changes his name back to Richard. They catch a
	fly to Texas.  

Sat May 24 21:50:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Moved the del_from_list() (x) clearing hack to list_del_enforce(),
	non-magic counterpart introduced together with the dummy call in the
	non-magic del_from_list(). Sally meets Simon and discuss his
	attitude to John, together with Thomas and Fred's father Alan.
	Eventually, Sally discovers that John is in fact Richard. In the
	meantime, John arrives to L.A.  

Sat May 24 21:41:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Introduced harmless list_magic_*() macro calls to the list handling
	routines on the non-magic side. Junior takes Gloria to his maison
	and they spend a night together.  

Sat May 24 21:35:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Moved list_magic_error() to a better place, introduced dummy
	counterpart of it at the nonmagic side. Sally catches flight to
	Texas.  

Sat May 24 21:32:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	List magic checks encapsulated to a suite of macros
	(list_magic_check() and list_magic_chkbool(), wrapping up
	list_magic_correct()). In non-magic part, same named dummy macros
	are introduced. Simon discovered that Junior didn't abide the
	agreement they had and sold his part of the HBRCOPOITA Ltd. As John
	tells Sally about his visit at Simon's, tension starts to slowly
	develop and Sally is about to call Simon.  

Sat May 24 21:15:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Unified magic setting to list_magic_set(), LIST_SET_MAGIC() now
	wraps list_magic_set(). list_magic_set() exists both in magic and
	non-magic scenario (then it's empty). Sally meets John, who was
	previously introduced to Fred by Thomas in the airplane, when they
	were flying to Texas in order to visit Sally's mother (real,
	although none of them know) and Simon on their ranch.  

Sat May 24 21:08:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Tidyup. Hopeless attempt to orient myself inside ;-).  

Sat May 24 20:26:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: select.c, select.h, signals.c:

	Removed that terrible CHK_BH; thing, check_bottom_halves() now acts
	like CHK_BH and wraps do_check_bottom_halves() (original
	check_bottom_halves() ;). dcbh() is now slightly optimized. Sally
	goes after Richard, who she believes to secretly married her
	lately-divorced mother-in-law, daughter of Simon's nephew who went
	to Vietnam. In the meantime, Junior meets Gloria and something
	seemingly starts to develop between them.  

Sat May 24 20:16:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/signals.c, lowlevel/signals.h, main.c:

	Move cleanup.  

Sat May 24 14:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/setup.h:

	ELINKS_DOC_URL now points to http://elinks.or.cz/docmentation 

Sat May 24 13:52:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Fix crash caused by resizing with multiple tabs, closes bug 163.
	Patch by Witek (and me). Note that the comment may not be 100% true
	yet (and there may be some out-of-tabs drawing problems), but it
	will be true VERY soon ;). Stay tuned.  

Sat May 24 13:44:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.h:

	Oops, stale argument forgotten there.  

Sat May 24 13:38:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.h, terminal.c, window.c:

	Removed IF_ACTIVE and intrudced inactive_tab() instead, which has
	simpler usage and expands to a boolean expression with effect
	opposite to IF_ACTIVE. Hrm.. Oh, and some more minor whitespace
	cleanups could slip through.  

Sat May 24 13:30:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Whitespaces cleanup. Er.. ;) 

Sat May 24 11:38:34 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	get_entity_string() cleanup, optimization, comments.  

Sat May 24 10:24:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat May 24 09:38:52 2003  Laurent Monin <zas@norz.org>:

	* configure.in, src/version.c, src/util/version.c:

	Configure option --disable-backtrace is now fixed. An information
	about it was added in version info (only when disable). It closes
	bug 103.  

Sat May 24 08:55:58 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entities decoding was fixed and improved. It closes bug 175. Patch
	by Zardoz and me.  

Fri May 23 21:22:20 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, lowlevel/Makefile.am, lowlevel/select.c,
	lowlevel/select.h, lowlevel/signals.c, lowlevel/signals.h,
	osdep/os_dep.c, scripting/lua/core.c, terminal/terminal.c:

	Signals related functions were moved to lowlevel/signals.{c,h}.  

Thu May 22 14:35:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/encoding.c:

	Reverted Miciah' change (keep related stuff together).  

Thu May 22 14:29:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Slightly simlified code flow.  

Wed May 21 18:07:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/gen_translations_stats.sh:

	Fix for division by zero in awk part caused by parsing of error
	messages.  Also some minor alignment adjustments.  

Wed May 21 11:44:46 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Menu entries were added for tab navigation. Fix bug 156.  

Wed May 21 11:32:38 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	switch_to_[next|prev]_tab() were introduced.  

Wed May 21 10:19:19 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	s/Open in a new window/Open a new window/ 

Wed May 21 10:08:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: Makefile.am, menu.c, menu.h, hotkey.c, hotkey.h:

	Hotkeys functions were moved to hotkey.{c,h}.  

Wed May 21 10:00:28 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/encoding.c:

	Move encoding_names definition up to where that unnecessary
	prototype for it that I removed in the last commit was.  

Wed May 21 09:47:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Submenu mark was changed from > to >> to prevent conflict with > key
	shortcut (will be used for tabs). Please comment.  

Wed May 21 09:46:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/: encoding.c, encoding.h:

	Just for fun, s/\[ \]/[]/ and remove an unnecessary prototype.  

Wed May 21 09:32:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix for bug 162: open-link-in-new-window displays menu even if no
	link is selected.  

Wed May 21 08:35:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	A missing newline after version information is now printed on forced
	core dump.  

Wed May 21 07:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Is there any need to copy address to a buffer ? Please test,
	comment, improve or revert (if needed).  

Wed May 21 02:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.1, elinks.conf.5, elinkskeys.5.in:

	Manpages are now hosted in doc/man/ ...  

Wed May 21 02:02:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in, doc/Makefile.am,
	doc/book/manpages/elinks.1.xml, doc/man/.cvsignore,
	doc/man/Makefile.am, doc/man/man1/.cvsignore,
	doc/man/man1/Makefile.am, doc/man/man5/.cvsignore,
	doc/man/man5/Makefile.am:

	Installed manpages are now hosted in doc/man/ and maintained in
	DocBook format (elinks.conf.5 will join later). Automake dictates
	that we have to use separate Makefiles since path/to/manpage is not
	supported.  

Wed May 21 01:57:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	This is the file from the root dir moved to prepare installing
	manpages from doc/man dir.  

Tue May 20 22:41:46 2003  Laurent Monin <zas@norz.org>:

	* contrib/lua/hooks.lua.in:

	A dumb prefix bz and a smart prefix bug were added to fasten access
	to ELinks bugzilla. Idea by fonseca ;).  

Tue May 20 22:11:17 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Fixed problems with 'gg:foo bar' query parsing, patch by thement.  

Tue May 20 22:09:16 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, version.h, dialogs/info.c, util/version.c,
	util/version.h:

	Only print useful version information at backtrace time. A new
	parameter @more was added to get_dyn_full_version() to handle that..  

Tue May 20 21:54:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Emit panicking message when addrlen was too bad. We should catch
	this stuff.  

Tue May 20 21:47:08 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Er... static hostbuf is better ;).  

Tue May 20 21:33:41 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Fixes, cleanup and optimizations in parse_url(), useless calls to
	strchr() family were reduced, brackets tests simplified, a
	typo/compile error introduced by last patch fixed, see diff for more
	details. Please test extensively.  

Tue May 20 21:27:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/terminal/kbd.c:

	Translate bad chars in terminal string to -. Patch by Karsten and
	me, fixes bug 168.  

Tue May 20 19:35:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fixed potential crash pointed out by Sergey.  

Tue May 20 17:56:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Minor simplification in parse_url(), use safe_strncpy() instead of
	memcpy() and nulling.  

Tue May 20 17:44:57 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Added notice about Lua (and its required version).  

Tue May 20 10:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/config/urlhist.c:

	Ooops, forgot initialization of goto_url_history. Fixed.  

Tue May 20 10:07:25 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, version.h, config/urlhist.c, config/urlhist.h,
	dialogs/menu.c, util/encoding.c, util/version.c, util/version.h,
	util/encoding.h:

	Some global variables are now correctly (i hope) declared as extern
	in .h files. Compilation with -fno-common is now possible.  

Tue May 20 09:43:29 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, util/version.c:

	memset() call is useless, just set first byte to NUL char is
	sufficient.  

Tue May 20 09:41:34 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, util/version.c:

	Use safe_strncpy() instead of memcpy() + strlen() + comparaisons.
	Pointed out by Miciah.  

Mon May 19 23:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A potential buffer overflow (pointed by Karsten Scholzel) and some
	minor issues were fixed in IPv6 url handling. Please recheck for bug
	160.  

Mon May 19 14:12:29 2003  Laurent Monin <zas@norz.org>:

	* src/: Makefile.am, main.c, version.c, version.h, dialogs/info.c,
	util/error.c, util/version.c, util/version.h:

	version.{c,h} were introduced. Info box uses now a function to
	retrieve version, and backtrace or core dump now print some version
	information too. Some calls to fprintf() were replaced by fputs().
	Feel free to improve, it is not perfect yet.  

Mon May 19 13:23:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Gettextization of some strings (like "ELinks" or "gzip") was
	removed, spaces are now outside gettextized strings.  

Mon May 19 13:21:16 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/libintl.h:

	term == NULL case is now handled. It will help later ;).  

Mon May 19 08:46:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	s/(?<=encoding\.c)onn// to fix a tiny error by pasky in a comment 
	("Renamed 'c' identifier to 'conn'", 2003/05/18 16:05:18) 

Sun May 18 23:37:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Revert the reverted non-bug fix. If table cache was not initialized
	there is no need to search an entry in it.  

Sun May 18 23:14:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	ADD wasn't properly undef'd after the cleanup.  

Sun May 18 23:09:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed a bug which came through the last zas' cleanup.  

Sun May 18 23:05:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Ooops ;).  

Sun May 18 23:00:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Many minor cleanups, optim, and some comments.  

Sun May 18 16:30:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	If *headers starts by a newline, pretend it is empty.  

Sun May 18 16:27:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Default is like HTTP code is 200.  

Sun May 18 16:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	HTTP/0.9 documents are text/html. Thanks to Mikulas for
	implementation tips.  

Sun May 18 16:08:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Removed useless 'cache' variables, conn->cache used instead.  

Sun May 18 16:05:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Renamed 'c' identifier to 'conn'.  

Sun May 18 16:03:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Renamed 'e' identifier to 'cache'.  

Sun May 18 15:59:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Removed some now-dead code. Effectively reverted the whole previous
	zas' patch by now.  

Sun May 18 15:56:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Real HTTP/0.9 support. When we don't receive a header starting by
	/^HTTP\//, it is treated as no header and immediatelly a body. Fixes
	bug 14.  

Sun May 18 15:15:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	sent_version.major can never be zero now. We always hope for better
	;).  

Sun May 18 15:13:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/http/http.c:

	Removed protocol.http.bugs.http09, it does not seem really useful.  

Sun May 18 13:16:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Wha, stupid CVS! ;) 

Sun May 18 13:16:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Structurize (use struct http_version more agressively), indentation
	fixes (minor).  

Sun May 18 12:45:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Use a pointer to struct http_version in get_http_code(). Idea by
	fonseca ;).  

Sun May 18 12:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/http/http.c:

	Support from HTTP/0.9 was added. A new option
	protocol.http.bugs.http09 enables it. An issue still exists, since
	we have no content-type header, it always renders document as text.
	Please propose fix for that.  

Sun May 18 11:43:50 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	HTTP version handling was almost totally rewritten, major and minor
	version numbers are handled separately, get_http_code() is now able
	to handle any http version (past, present and future). A new struct
	http_version was introduced. Minor changes were made to prepare
	HTTP/0.9 support. Feel free to improve.  

Sat May 17 22:01:04 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	In bz already.  

Sat May 17 21:04:41 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	Fix bug 158: 'Add bookmark' and 'Search history' boxes too small.  
	layout_add_dialog and layout_hierbox_browser grow yet more
	similar...  

Sat May 17 20:53:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Minor cleanup.  

Sat May 17 20:43:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	When not resuming, open() file w/ O_TRUNC, fixing bug 27. Patch by
	Witek and me.  

Sat May 17 10:56:00 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	A useless call to _() was removed.  

Sat May 17 10:49:38 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Useless calls to _() were reduced.  

Sat May 17 10:28:11 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/libintl.h:

	An helper was added to detect redundant calls to _(). Should help
	with bug 141. To enable it, define DEBUG_IT in libintl.h 

Sat May 17 00:09:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	...and now properly wrap=hardize the textareas being sent. wrap=hard
	is now supported properly. hopefully.  

Sat May 17 00:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Reordering of file menu entries. Feel free to improve.  

Fri May 16 23:44:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Tidyup.  

Fri May 16 23:44:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Don't normally call format_text with wrap attribute being hard. That
	gives us weird result, by hard-inserting newlines there and thus
	smooth rewrapping not being done correctly.  

Fri May 16 23:31:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/terminal.c:

	Removed that terrible startup goto dialog hack, this also fixes
	various problems with tabs, redrawing and opening/closing while this
	is turned on. Fixes bug 142. Patch by Sergey and me.  

Fri May 16 23:09:26 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mailcap.c:

	Comments about a potential buffer overflow concerning
	convert_command() were added. Jonas please fix it asap.  

Fri May 16 22:49:12 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Cleanup, fixes (i hope), and optim.  

Fri May 16 22:38:41 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Fixed my last patch is...  

Fri May 16 22:30:06 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed a bug which slipped between my fingers and entered bugzilla
	already ;-).  

Fri May 16 22:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Cleanup and optimizations. fonseca please verify.  

Fri May 16 22:28:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Cleanup of the Help menu URL shortcuts, use a common function and
	per-item data (the URL).  

Fri May 16 22:25:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Minor help menu reordering, added some bars.  

Fri May 16 21:57:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	An additional magic check was added to free_list() macro.  

Fri May 16 21:25:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.h:

	Ooops, a field added for test pruposes was removed.  

Fri May 16 21:20:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.h:

	Reverted struct fields reordering, it causes bug 101. There's
	something very weird there. Fields order dependencies are very bad
	thind [tm].  

Fri May 16 19:42:32 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/menu.c:

	Help menu was reordered and modified. Lua documentation link was
	removed (it'll appear on documentation page). Two new links will
	appear in debug mode, one to cvsweb and the other to bugzilla. A
	macro is used as helper for this kind of menu entry. Cvsweb url is
	not definitive.  

Fri May 16 19:13:05 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	A useless test was removed.  

Fri May 16 19:06:40 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	In memset() we trust.  

Fri May 16 19:05:24 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Reverted last patch, space for NUL byte is in struct view_state.
	Thanks to Pasky.  

Fri May 16 17:47:00 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Reorganization, now it's almost the final new look, except the
	to-go-bugzilla bugs.  

Fri May 16 17:42:14 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed stuff insterted to bugzilla or fixed. Very minor updates.  

Fri May 16 10:01:48 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Allocated space was not enough to store ending NUL char of url
	string, please recheck.  

Thu May 15 23:37:11 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Pasky reverted a patch i made, result is buggy, well, as usual, so
	whats changed ? Bug disappears and cleanup. Please pasky dont revert
	it :) 

Thu May 15 23:02:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, viewer/text/view.c:

	Support for wrap=hard introduced (supporting few aliases as well),
	fixes bug 38. Patch by Witek and me.  

Thu May 15 22:42:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	A bug workaround was removed. Last patch about textarea renders it
	useless and it causes some issues. Textarea navigation seems to work
	well now. Thanks to witekfl.  

Thu May 15 22:40:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, renderer.c:

	Parse <head> contents even when viewing page source, closes bug 40.
	Patch by Witek and me.  

Thu May 15 22:28:19 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Rows limits were badly calculated in textarea code. Minor cleanup.
	Patch by witekfl and me.  

Thu May 15 21:43:38 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Download progress dialog was fixed and improved, it now uses
	ulongcat().  

Thu May 15 21:20:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	elinks_ulongcat() now supports base choice. elinks_ulonghexcat()
	function have disappear and is now a macro using elinks_ulongcat().  

Thu May 15 12:53:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	ulongcat() recent changes were ported to ulonghexcat(),
	add_[k]num_to_str() were fixed accordingly too.  

Thu May 15 08:10:17 2003  Laurent Monin <zas@norz.org>:

	* src/Makefile.am:

	mime subdir was added to enable libmime.a building. Idea by fonseca
	;) 

Thu May 15 08:01:50 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	stpcpu() detection will always fail, this is an error, removed ;).
	Thanks to fonseca.  

Wed May 14 22:48:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed weirdness of go_unbackwards() add_to_list() ussage, it was
	apparently incorrect. Now it is simpler but should be in fact
	correct. And appears to work. Closes bug 114. Discovered by zas.  

Wed May 14 21:08:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	We sometimes memmove() 0 bytes, fixed. An internal error detection
	was added to prevent a similar issue.  

Wed May 14 20:58:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	We sometimes memmove() 0 bytes, fixed.  

Wed May 14 17:20:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Reintroduced sanity paranoid checks into ulongcat().  

Wed May 14 16:59:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Gdb-friendly lists debugging....  

Wed May 14 16:34:38 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Always force segfault on bad list magic detection.  

Wed May 14 15:11:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	ulongcat() comment updates (stylistic fix and added comment about
	purpose and supposed usage).  

Wed May 14 15:03:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Initialize pos at declaration time.  

Wed May 14 13:08:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Clarified the return value description for ulongcat().  

Wed May 14 13:06:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Again moved start initialization to declaration.  

Wed May 14 13:06:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Comments tidyup and reduction to a useful rate.  

Wed May 14 12:48:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Fixed return value if truncated.  

Wed May 14 12:43:12 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	Fully tested ulongcat() version. Optimizations are welcomed, but
	take care.  

Wed May 14 12:00:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Changed return value of elinks_ulongcat(): now it returns -1 on
	error, 0 if ok and desired ideal width if truncated. Also some
	possible wrong value being returned at edge cases (reported by zas)
	should be fixed. Let's see ;).  

Wed May 14 11:49:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Directly initialize start.  

Wed May 14 11:47:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	With non-zero slen initial value, the resulting slen value was
	wrong, this should fix that. Pointed out, explained etc by zas.  

Wed May 14 11:43:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Do more paranoical pos value checks. Let's go the safe way ;-). Does
	not change the functionality.  

Tue May 13 23:57:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/view.c:

	Removed use of d_opt in context of init_bars_status(), it was
	completely wrong (it frequently points to some crap and should not
	exist altogether anyway; resulted in random shooting into memory).
	Now NULL is passed instead and code was added inside of
	init_bars_status() to try to retrieve the document_options from
	ses->screen->f_data in that case. Fixes bug 96.  

Tue May 13 22:53:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Huge reorganization of one-char identifier, resulting in something 5
	times larger, as usual. (Compilation fix.) Thanks, zas.  

Tue May 13 22:37:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inphist.c, config/urlhist.c:

	Tidyup and minor reindentations, attempting to clear out some
	probably buggy code.  

Tue May 13 15:48:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Prevention of calloc(0, sizeof(int)) calls.  

Tue May 13 14:29:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Minor tidyup. Fixed write_global_history() to handle properly
	elinks_home==NULL.  

Tue May 13 13:38:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Reverted recent save_cookies() change, we don't want to create
	./cookies randomly when not elinks_home. Instead, do not
	save_cookies() at all if not elinks_home.  

Tue May 13 13:34:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/common.c:

	Added missing elinks_home check to bookmarks_save(). Moved
	half-redundant !file_name check in bookmarks_load(), introduced by
	the previous patch.  

Tue May 13 13:29:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/urlhist.c:

	Added missing elinks_home check to save_url_history(). Fixed double
	free in load_url_history introduced by the previous patch.  

Tue May 13 12:27:44 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.c, config/conf.c,
	config/urlhist.c, cookies/cookies.c, globhist/globhist.c:

	Bug 102 is now fixed. elinks_home can be NULL, especially with
	-no-home option.  

Mon May 12 21:59:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed gettextization of cache_inf().  

Mon May 12 21:53:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Reverted memory_inf() changes (broke gettextization sanitization and
	paralel dialog instances), sanitized gettextization while at it ;).  

Mon May 12 21:46:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	This just slipped through, sorry. Linkage fix.  

Mon May 12 21:23:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	The variables change flow was made hopefully a little more
	intuitive.  

Mon May 12 21:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Added explicit parenthesis near signification, ensure that we have
	space for the - sign.  

Mon May 12 21:18:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	The variables change flow was made hopefully a little more
	intuitive.  

Mon May 12 20:43:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Minor reindentation.  

Mon May 12 20:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: conv.c, conv.c:

	Code redundancy reduced, removed the all-that-frequent generic
	reallocation code.  

Mon May 12 20:39:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Minor reindentation.  

Mon May 12 20:37:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, util/conv.c, util/conv.h, util/string.c,
	util/string.h:

	Moved sn*print() functions back to util/conv.h, where they belong.
	Moved u?long(hex)?cat() functions suite from util/string.* to
	util/conv.*, where it belongs.  

Mon May 12 20:24:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Leave more space for percentage counter. It can exceed 100%
	theoretically and it does no harm.  

Mon May 12 20:23:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, protocol/file.c,
	protocol/http/http.c, sched/download.c, sched/session.c:

	Undone the hyperscary &-ization of static strings in ulongcat()
	calls, introduced before for some unknown reason.  

Mon May 12 19:33:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Rewritten elinks_ulongcat() description in a comprehensible way.  

Mon May 12 19:09:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Whoops. Fixed the 'do you want to post form' msgbox().  

Mon May 12 19:06:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed confusing No/Cancel differentation in 'Shall I post that
	form' dialog. Now, the no possibility (which for some reason just
	stripped the POST string and went on) was removed and cancel
	possibility (cancelling the whole action) became the new no
	possibility. Fixes comment 6 of bug 2.  

Mon May 12 08:09:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* TODO:

	Ditto. Forgot to :wq.  

Mon May 12 08:07:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* TODO:

	Deleted some entries that have been moved to Bugzilla. I'll finish
	the job tomorrow, if pasky doesn't.  

Sun May 11 22:56:45 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Bug fix was fixed. Am i so tired ? 

Sun May 11 22:42:42 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	A stupid and fatal bug was fixed in longcat().  

Sun May 11 21:28:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Added Michail as author of Mutt's mailcap code + elinks.or.cz to
	self 

Sun May 11 19:49:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	A function ulonghexcat() was added to do fast convertion of integers
	to hexa strings. Bye bye snprintf(str, 8, "#%02x%02x%02x", color->r,
	color->g, color->b), you are 100x too slow for us.  

Sun May 11 18:34:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* AUTHORS:

	Update my E-mail address in AUTHORS and, while I'm editing the file, 
	put in the rest of my name.  

Sun May 11 16:28:14 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Two minor optimizations and very minor cleanup.  

Sat May 10 23:05:27 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Updated mailing list info.  

Sat May 10 23:03:12 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	The bugs now live in Bugzilla.  

Sat May 10 22:50:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	The count of remaining entries was wrong (by one), fixed. Cache
	entry refcount and data_size now appear in dialog when compiled with
	--enable-debug.  

Sat May 10 20:06:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Cleanup, elinksification, comments.  

Sat May 10 12:59:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	When closing tab, move to the _previous_ tab, not the next one.
	Fixes bug 35.  

Sat May 10 12:00:17 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A bug entry was removed. Thanks to Witekfl :) 

Sat May 10 11:55:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Tags were badly interpreted in plain documents. This is now fixed.
	Patch by Witold Filipczyk.  

Sat May 10 11:36:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Titles in link tags are now honoured. It helps to get significant
	bookmarks titles. Patch by Hugo Haas and me.  

Sat May 10 11:33:05 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Hugo Haas was added to AUTHORS document.  

Sat May 10 04:07:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Added default irc protocol handlers.  

Sat May 10 02:18:15 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A minor bug (term title and html<>souce) was added.  

Sat May 10 01:29:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h, string.h:

	add_knum_to_str() was rewritten. snprint() and snzprinf() are now
	macros using [u]longcat(), these were moved to string.h.  

Sat May 10 00:27:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	ulongcat(), longcat(), add_num_to_str() now returns int instead of
	void. add_num_to_str() was totally rewritten. Performance made a
	jump.  

Fri May  9 22:06:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/.vimrc:

	Added missing fairy 

Fri May  9 22:04:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate doc/man/man1/elinks.1 with info about sysconfdir 

Fri May  9 21:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Added man pages as EXTRA_DISTS.  

Fri May  9 21:58:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	Some small corrections and updates. Added info about bugzilla.  

Fri May  9 21:45:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/.cvsignore:

	Added man state files when export MANPATH=doc/man:$MANPATH 

Fri May  9 21:43:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/elinks.1.in, man5/elinkskeys.5:

	The docbook generated man pages.  

Fri May  9 21:42:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/.cvsignore, man5/.cvsignore:

	Added jade wrapper state files.  

Fri May  9 21:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Added navigation keys from elinks.1.  

Fri May  9 18:18:57 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: info.c, menu.c:

	Cleanup and cache info menu was re-enabled. A limit to the number of
	printed entries was added.  

Fri May  9 17:40:19 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	snprintf() -> ulongcat().  

Fri May  9 17:27:29 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	snprintf() -> ulongcat().  

Fri May  9 17:19:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	snprintf() -> ulongcat() for terminal size in user agent string.  

Fri May  9 17:11:37 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Another snprintf() -> ulongcat(): it concerns percentage info in the
	download progress dialog.  

Fri May  9 17:09:38 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	ulongcat() fix: returned length was one less than it should with
	fillchar set.  

Fri May  9 16:49:43 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	longcat() was introduced (identical to ulongcat() but accepts
	negative numbers (as long).  

Fri May  9 16:30:15 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/file.c, sched/session.c, util/string.c,
	util/string.h:

	ulongcat() fix (padding error) and behavior change. Now if fillchar
	parameter is not a NUL char, then padding is done with that char,
	one application can be seen in file.c.  

Fri May  9 15:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	The memset() call in ulongcat() was removed, since most times we'll
	use that function with less than 10 zero padding, gain is not
	significant imho.  

Fri May  9 15:11:39 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, sched/session.c, util/string.c,
	util/string.h:

	ulongcat() function is now able to print zeros before a number
	(00123), a macro wrapper is used to enforce correct typecasting, and
	it now replaces more snprintf() calls.  

Fri May  9 15:11:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/.vimrc, book/manpages/.vimrc, man/.cvsignore,
	man/.vimrc, man/man1/.cvsignore, man/man1/.vimrc,
	man/man5/.cvsignore, man/man5/.vimrc:

	More fairies 

Fri May  9 15:03:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	A few words to doc seekers ...  

Fri May  9 14:23:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: authors.xml, bookmarks.xml, configuration.xml,
	fdl.xml, installation.xml, introduction.xml, mailcap.xml,
	manual.xml, mime.xml, misc.xml, options-reference.xml, preface.xml,
	revision.xml, sample-configfile.xml, style.css, wordlist.xml:

	Giving doc/book/ a facelift. It will involve restructuring documents
	and introduce them one by one later when they are actually done.
	Hopefully it'll make it easier to get the buildsystem right.  

Fri May  9 13:43:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed missing typecast.  

Fri May  9 13:23:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, terminal/terminal.c:

	decode_session_info() now actually works properly (hopefully). It
	doesn't take len parameter but takes it from the first int in the
	session info data (which was not anticipated before, thus the whole
	decoding went tragical). It should fix various problems with elinks
	<url>, opening document in a new window and so on.  

Fri May  9 12:42:13 2003  Laurent Monin <zas@norz.org>:

	* src/: util/string.c, util/string.h, document/html/parser.c:

	An sprintf(foo, "%d", bar) was replaced by an ulongcat() call.  

Fri May  9 10:43:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Inserted new 'default keybindings'.  

Fri May  9 10:24:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Done cleaning up the last part.  

Fri May  9 01:25:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/README:

	Rewritten a bit 

Fri May  9 00:57:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/VERSION:

	Version will be maintained as an entity 

Fri May  9 00:43:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Still some work to be done to 'clean' it up in regards to coding
	style.  Also maybe needs to contain info about navigation keys (from
	elinks.1) 

Fri May  9 00:41:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	Moved info about system wide conf file over from elinkskeys man
	page.  

Thu May  8 23:03:06 2003  Laurent Monin <zas@norz.org>:

	* src/: main.h, config/urlhist.c, dialogs/document.c,
	dialogs/hierbox.c, dialogs/menu.h, document/html/renderer.c,
	intl/charsets.c, intl/gettext/localcharset.c, lowlevel/af_unix.c,
	lowlevel/connect.c, lowlevel/dns.c, lowlevel/home.c,
	lowlevel/interlink.c, lowlevel/timer.c, osdep/os_dep.c,
	protocol/url.c, protocol/http/auth.c, protocol/http/date.c,
	protocol/http/http.c, sched/connection.c, sched/download.c,
	sched/sched.c, scripting/lua/hooks.c, sched/session.c,
	ssl/connect.c, util/encoding.c, util/error.c, util/memdebug.h,
	util/snprintf.c, viewer/text/view.c, viewer/text/view.h:

	Many missing declarations + static. Big patch, sorry.  

Thu May  8 22:42:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	First attempt at cleaning up the main elinks manpage. This means
	moving all the keys stuff (some of which are dublicate) to the
	elinkskeys man page.  

Thu May  8 22:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/.cvsignore:

	Fairy added 

Thu May  8 22:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.h:

	win->type is enum.  

Thu May  8 21:50:07 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, cookies/cookies.c, cookies/cookies.h,
	dialogs/menu.h, document/html/parser.c, document/html/parser.h,
	document/html/renderer.h, document/html/tables.c,
	elusive/layouter/box.h, elusive/parser/syntree.h,
	globhist/dialogs.c, globhist/globhist.c, globhist/globhist.h,
	intl/charsets.c, intl/charsets.h, intl/gettext/gettextP.h,
	intl/gettext/libintl.h, intl/gettext/loadmsgcat.c,
	intl/gettext/localcharset.c, lowlevel/af_unix.c,
	lowlevel/af_unix.h, lowlevel/connect.c, lowlevel/home.h,
	lowlevel/interlink.c, lowlevel/interlink.h, lowlevel/select.c,
	lowlevel/select.h, lowlevel/sysname.h, lowlevel/timer.h,
	lowlevel/ttime.h, osdep/os_dep.c, sched/connection.c,
	sched/connection.h, sched/download.h, sched/sched.c, sched/sched.h,
	sched/session.h, ssl/ssl.h, terminal/kbd.h, terminal/terminal.c,
	terminal/terminal.h, util/blacklist.h, util/encoding.c,
	util/error.h, util/string.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 21:46:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, config/urlhist.h, osdep/os_dep.h,
	protocol/http/auth.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 21:42:57 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.h, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, config/conf.h, config/dialogs.c,
	config/kbdbind.c, config/kbdbind.h, config/options.c,
	config/options.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 18:13:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* BUGS:

	'The black blocked cursor bug' added. Due to the many bugs that has
	been found they have been grouped to give a better overview. Hope
	the groupings are sane enough.  

Thu May  8 15:39:58 2003  Laurent Monin <zas@norz.org>:

	* TODO, src/config/options.c, src/viewer/text/view.c:

	Highlight colour for text matched after a search is now
	configurable. TODO was updatecd.  

Thu May  8 14:19:48 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup and optimization of count_menu_size().  

Thu May  8 14:02:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c, TODO:

	Search string in "Search string not found" error box is now
	included. TODO was updated.  

Thu May  8 12:44:12 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	About gg: & co.  

Thu May  8 12:42:34 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Please maintain proper blanklining.  

Thu May  8 12:41:15 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Something about modularization and scripting.  

Thu May  8 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Please maintain proper blanklining.  

Thu May  8 12:11:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/options.c:

	Check o1->num_links_key == o2->num_links_key in compare_opt so that 
	document.browse.links.number_keys_select_link doesn't exhibit 
	seemingly random I'll-work-when-I-want-to behaviour.  

Thu May  8 11:51:33 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/options.c:

	Itty-bitty fix that really has no effect:
	document.browse.links.numbering is a boolean, use get_opt_bool, not
	get_opt_int, to get its value.  

Thu May  8 11:46:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix a logic inversion in jump_to_link_number that pasky made in his
	2003/05/06 14:52:12 commit when reverting one of zas' clean-ups.  

Thu May  8 11:39:23 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A new feature was added to BUGS file, now it triggers one ;).  

Thu May  8 11:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some bugs (infinite loop) in menu hotkeys handling were fixed. Code
	cleanup, mainmenu and menu use the same code now regarding hotkeys,
	2 new functions were introduced, one for handling hotkeys, the
	others to handle not_so_hot_keys ;).  

Thu May  8 11:07:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* BUGS, TODO:

	More BUGS and TODO items. Small changes requested by pasky.  

Thu May  8 06:12:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/preface.xml:

	s/elink/elinks/ thanks to witekfl 

Thu May  8 01:30:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Oops, forgot to pass length of the string to decode_session_info().  

Thu May  8 01:28:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Typo fix.  

Thu May  8 01:27:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Compilation fix, missing typecast.  

Thu May  8 01:24:34 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Minor coding style example correction.  

Thu May  8 01:23:15 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Debugging code is now cleaner and is useable with hard_read() too.  

Thu May  8 01:20:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Reindented and removed some useless temporary variables (insert
	param parsing output directly to the struct initial_session_info).  

Thu May  8 01:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Tiny cleanup.  

Thu May  8 01:16:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, sched/session.c:

	Rewritten open_in_new_tab() functional part to emit EV_INIT instead
	of EV_RESIZE, removed code duplicate with process_session_info() and
	make use of struct initial_session_info.  

Thu May  8 01:07:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info() -> process_session_info() 

Thu May  8 01:06:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/terminal.c:

	Store struct initial_session_info directly in ev->b, decoding it
	ASAP. read_session_info() now takes directly struct
	initial_session_info.  

Thu May  8 00:57:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, session.h:

	Introduced struct initial_session_info (being freed by newly
	introduced free_session_info), which carries the initial session
	information, converted from the session init string by newly
	introduced decode_session_info() (moved some code from
	read_session_info()).  

Thu May  8 00:40:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info(): minor reinentation, removed one useless
	argument.  

Thu May  8 00:38:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info() cleanup.  

Thu May  8 00:37:57 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	check_not_so_hot_keys() was introduced to check keys in menus, this
	one permits search of the next entry with first letter matching key.
	The behavior has changed: now selection wraps around the list of
	entries.  

Thu May  8 00:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	XMP tag support, patch by witekfl.  

Wed May  7 23:18:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys are now working in main menu. Fix a fix of a cleanup...  

Wed May  7 23:04:06 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Ooops, incomplete patch, fixed.  

Wed May  7 22:48:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.h:

	A bad patch was reverted, it fixes the bug known as the TODO bug.  

Wed May  7 20:57:20 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Some debugging code was added, dump hard_write data to stderr 

Wed May  7 18:26:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Miscelleanous optimizations and cleanups. Patch by zas.  

Wed May  7 18:19:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Default mime type will be moved to mime.default_type 

Wed May  7 18:07:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Compilation fix.  

Wed May  7 17:57:13 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.h:

	ASCII_BSD systems don't exist (yet).  

Wed May  7 17:46:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, globhist/globhist.c, sched/session.c,
	scripting/lua/core.c:

	Frame title may be NULL after witekfl's fix of <title> element
	handling.  

Wed May  7 17:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Use -rdynamic when available. It makes backtrace work right and it
	will be a must when dynamic .so modules will be introduced (not that
	it would be anytime soon). Looks like zero or only very minimal
	overhead.  

Wed May  7 16:43:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	SIGSEGV handler is critical. Thus don't postpone it to the select
	loop but handle it immediatelly. Fixes infinite loop upon segfault,
	reported by Jonas.  

Wed May  7 16:29:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	A new function was added (disabled for now). ulongcat() which may
	replace some sprintf("%d", x) calls later.  

Wed May  7 15:16:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Reduced the number of printed stack frames from 30 to 20.  

Wed May  7 15:11:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, util/error.c, util/error.h:

	Reverted bogus backtrace patch.  

Wed May  7 14:45:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.h:

	Reintroduced bitfields ;-).  

Wed May  7 14:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Explicit signedness to fix some portability issues
	
	(http://mailman.webdav.org/pipermail/neon/2001-December/000757.html). Thanks, zas.

Wed May  7 14:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.h:

	Reorganized the listbox structures to make sense again.  

Wed May  7 14:17:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	led.value isn't private data ;p 

Wed May  7 13:56:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Prevent shifting of the code too far at the right ;-).  

Wed May  7 13:45:24 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	ELinks is now either Normal or Debug regarding info box.  

Wed May  7 13:38:44 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.h:

	Minor cleanup.  

Wed May  7 13:03:29 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Some comments about structs.  

Wed May  7 12:59:24 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.h:

	Reordering and comment about struct fields order.  

Wed May  7 12:55:40 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/common.h:

	Order matters in struct bookmarks_backend.  

Wed May  7 12:54:03 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.h:

	Minor reordering in fields of struct bookmark.  

Wed May  7 12:49:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Fields reordering and comment about bounded to order struct
	widget_ops.  

Wed May  7 12:41:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Change in struct mneu_item fields order was reverted, a comment was
	added about it. Cleanup, optimization and more debugging code in
	menu.c.  

Wed May  7 11:55:07 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, util/error.c, util/error.h:

	Backtrace feature was simplified and now it works. SEGV signal must
	be handled by system at some time to perform core dump. Backtrace
	size is now 100 (we use many parameters in some functions).  

Wed May  7 10:49:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	Minor reorganization of struct menu_item fields.  

Wed May  7 10:47:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.h:

	Structs fields were reorganized. Bitfields were replaced by int
	type.  

Wed May  7 10:40:11 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/leds.h:

	Struct leds fields were reorganized.  

Wed May  7 10:39:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.h:

	Structs fields were reorganized.  

Wed May  7 10:35:14 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.h:

	Struct session fields were reorganized.  

Wed May  7 10:28:27 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Structs fields cleanup and minor changes.  

Wed May  7 10:13:36 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.h:

	Structs fields cleanup.  

Wed May  7 10:07:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.h:

	Structs fields were reorganized.  

Wed May  7 09:57:56 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/terminal.h:

	Struct terminal fields were reorganized.  

Wed May  7 09:49:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/: cache.c, cache.h:

	Structs were a bit reorganized. Made use of mem_calloc() instead of
	mem_alloc().  

Wed May  7 09:22:55 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/connection.c, sched/connection.h, sched/sched.c,
	sched/sched.h, sched/session.c, viewer/text/view.c:

	Some structs were reorganized to prevent memory padding. There was a
	badly initialized struct status, one field was missing, fixed now.  

Wed May  7 08:42:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h:

	Minor cleanup and optimization. Please take care of memory
	alignement of fields in structs.  

Tue May  6 23:10:45 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Ad frame bugs, s/plain-text/non-HTML/ as it happens for images etc
	as well. I'm sorry, Witek ;-).  

Tue May  6 23:09:51 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Removed some bugs fixed (and todo items implemented) by witekfl.  

Tue May  6 23:08:24 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Keep the text wrapped at 80th column.  

Tue May  6 23:07:37 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	More accurate description of the ^Z bug.  

Tue May  6 22:39:28 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Another entry was blasted by Witold.  

Tue May  6 22:36:24 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	The newline displayed before a list is superfluous when that list is
	nested under another list. Minor optimizations. Patch by Witold
	Filipczyk and me.  

Tue May  6 22:36:03 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Expand single ~ correctly in the URL. Patch by witekfl.  

Tue May  6 22:34:43 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	System functions (like getenv()) are enabled in global config.lua,
	so execute it first and _then_ set home_dir. Patch by witekfl.  

Tue May  6 22:00:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	check_queue() function was optimized, options are now cached.
	try_connection() wins two parameters.  

Tue May  6 21:48:47 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	Minor optimizations and cleanup: in calloc() we trust (II).  

Tue May  6 21:45:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reformatted goto_link() and fixed it so that it returns correct
	value now.  

Tue May  6 20:28:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	In calloc we trust.  

Tue May  6 20:28:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Reverted whitespace 'fix'.  

Tue May  6 20:25:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/draw.c:

	Reverted end removal. First optimizing for speed, now
	disoptimizing... I don't understand zas ;-).  

Tue May  6 20:16:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Partially reverted zas' 'cleanups'.  

Tue May  6 19:54:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Last part of mime system. Should be buildable now.  

Tue May  6 18:53:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: .cvsignore, .vimrc:

	How could I forget. More fairies.  

Tue May  6 18:39:14 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Code redundancy was reduced.  

Tue May  6 18:25:29 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.h, terminal/kbd.c:

	octal 033 was renamed ASCII_ESC.  

Tue May  6 17:24:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/common.c, backend/common.h,
	backend/default.h, backend/mailcap.c, backend/mailcap.h:

	First part of the restructuring of mime handling. It has been
	modelled after the bookmark handling. This is not yet integrated
	with the build system.  

Tue May  6 17:16:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/mime/Makefile.am, src/mime/backend/Makefile.am:

	Adding mime/ to build system.  

Tue May  6 16:47:44 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, osdep/os_dep.h,
	protocol/ftpparse.c, protocol/http/http.c, terminal/kbd.c,
	terminal/screen.c, util/string.h:

	Hard-coded ascii char (8,9,10,13,127) were renamed to macros
	ASCII_BS, ASCII_TAB ,ASCII_LF,ASCII_CR,ASCII_DEL.  

Tue May  6 16:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: .cvsignore, .vimrc:

	Stuff from fairyland 

Tue May  6 15:32:31 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/window.c:

	Reversion of zas's patches is not that easy :) Compilation bug
	fixed.  

Tue May  6 15:30:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Reverted part of previous cleanup, removed obsolete FIXME and some
	more pasky-style cleanups ;-).  

Tue May  6 15:20:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/window.c:

	Reverted cleanups.  

Tue May  6 14:58:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Reverted part of the previous cleanup.  

Tue May  6 14:55:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted cleanup.  

Tue May  6 14:52:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/view.c:

	Reverted cleanup.  

Tue May  6 14:49:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/hardio.c:

	Reverted the cleanup, the original form is slightly faster and IMHO
	equally clean.  

Tue May  6 14:24:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Minor cleanup.  

Tue May  6 14:18:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Inline + minor optim.  

Tue May  6 14:11:05 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: group.c, group.h:

	Cleanup, minor optim., staticification.  

Tue May  6 13:34:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Minor cleanup + optim.  

Tue May  6 12:10:02 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	More info about --enable-debug.  

Tue May  6 11:33:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Minor optimizations.  

Tue May  6 11:16:41 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Window title is now handled properly regarding tabs. Bad title when
	swapping tabs during document loading and window title flickering
	are now fixed.  

Tue May  6 10:10:11 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Tue May  6 10:03:55 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Tue May  6 09:56:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization of goto_link() by Miciah and me.  

Tue May  6 09:00:44 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One fresh bug was added.  

Tue May  6 08:38:09 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Minor update.  

Tue May  6 08:35:02 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Last entry was modified.  

Tue May  6 08:27:27 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry was added. Thanks to Zas ;).  

Tue May  6 08:04:35 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry have disappear. Thanks to Witold.  

Tue May  6 08:02:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Printing of title of plain text document containing text enclosed in
	<TITLE></TITLE> tags was fixed. Patch by Witold Filipczyk.  

Mon May  5 23:32:25 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry was removed. Thanks to Jonas.  

Mon May  5 23:27:13 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Tabs and backgrounded loading bug was fixed. Patch by Jonas Fonseca.  

Mon May  5 23:13:47 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Major cleanup.  

Mon May  5 22:36:57 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Minor cleanup.  

Mon May  5 22:18:50 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Some silly things were trashed. Idea by Miciah and Pasky. Well, now,
	i must find a hole in the ground and stay hiddenin it until the end
	of the time...  

Mon May  5 21:55:37 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: terminal.h, window.c:

	Cleanup and optimizations.  

Mon May  5 16:04:56 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	An entry about tabs/document loading issue was added.  

Mon May  5 16:00:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	A test for num_tabs was added. Safer.  

Mon May  5 15:40:03 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	Number of tabs can now be passed to switch_tab(), it prevents some
	useless calculations.  

Mon May  5 14:40:29 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Minor cleanup + optim.  

Mon May  5 14:19:08 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Minor cleanup.  

Mon May  5 14:08:02 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.h:

	Minor cleanup (2) ;) 

Mon May  5 14:06:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.h:

	Minor cleanup.  

Mon May  5 13:43:15 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	A function init_bars_status() was introduced. It updates information
	about bars visibility. Not yet perfect but a step...  

Mon May  5 10:33:44 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/terminal.c:

	Optimizations and cleanups: strcpy() -> memcpy(), whitespaces fixes,
	some comments were added.  

Mon May  5 09:37:51 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some "end" useless variables were removed.  

Mon May  5 09:27:21 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some useless mathematical calculations were removed.
	Temporary variables names are badly choosen. Feel free to find
	better ones.  

Mon May  5 09:17:26 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some useless mathematical calculations were removed.  

Sun May  4 21:53:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Use fprintf instead of printf in execinfo non-trouble
	dump_backtrace().  

Sun May  4 21:52:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Reformatted the pre-backtrace rant.  

Sun May  4 21:45:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, util/error.c, util/error.h:

	Couple of compilation fixes and gcchappying, thanks to zas.  

Sun May  4 21:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fixed indentation in ./configure --help. Sorry.  

Sun May  4 21:38:16 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Formatting fixes. *sigh* those ELinks developers...  

Sun May  4 21:37:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	--enable-libc -> --enable-own-libc 

Sun May  4 21:36:55 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/main.c, src/util/error.c,
	src/util/error.h:

	(Untested) support for dumping of backtrace upon segfault. Only
	glibc supported for now (I don't know of any other possibilities,
	however if you know about one, it should be pretty trivial to write
	a patch).  

Sun May  4 21:23:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	One ses->term -> ses->tab->term got missed for some reason. Fixed.  

Sun May  4 21:11:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed variable names conflict, reported by zas.  

Sun May  4 20:54:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Nasty tricky download.c, tsk tsk\! ->term -> ->tab->term, thanks to
	zas.  

Sun May  4 20:50:59 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	Attempt to make mouse and bars gentle with us.  

Sun May  4 20:44:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, sched/session.c:

	Renamed some variable names from win to tab. Added comment about
	brokenness of tabwin_func().  

Sun May  4 20:42:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, dialogs/document.c, dialogs/menu.c,
	document/html/renderer.c, protocol/url.c, protocol/user.c,
	scripting/lua/core.c, sched/download.c, sched/session.c,
	sched/session.h, viewer/text/view.c:

	Removed redundant term field from the struct session.  

Sun May  4 20:39:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	Renamed win to tab in struct session.  

Sun May  4 20:37:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.c, terminal.c:

	Blasted off the term 'root window', use 'tab' instead.  

Sun May  4 20:35:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: terminal/tab.c, terminal/tab.h, terminal/terminal.c,
	viewer/text/view.c:

	get_root_window() -> get_current_tab() 

Sun May  4 20:33:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.c, terminal.c, window.h:

	WT_ROOT -> WT_TAB 

Sun May  4 20:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	Use redraw_terminal() instead of redraw_terminal_cls(), it reduces
	flickering when swapping tabs. Reported and fixed by Pasky.  

Sun May  4 20:13:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Readded util/conv.h, thanks, zas.  

Sun May  4 20:10:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Oops, include own .h\! Thanks, zas.  

Sun May  4 20:08:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Fix missing is_blocked(), reported by zas.  

Sun May  4 20:06:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, sched/session.c, terminal/Makefile.am,
	terminal/tab.c, terminal/tab.h, terminal/terminal.c,
	terminal/terminal.h, terminal/window.c, viewer/text/view.c:

	Moved tab-related functions from terminal.* to tab.*.  

Sun May  4 19:54:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/inphist.c,
	bfu/inphist.h, bfu/menu.c, dialogs/refresh.h, sched/download.h,
	sched/session.c, sched/session.h, terminal/Makefile.am,
	terminal/terminal.c, terminal/terminal.h, terminal/window.c,
	terminal/window.h, viewer/text/view.c:

	Moved window-related functions (except tabs) from terminal.* to
	window.*.  

Sun May  4 19:40:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Removed duplicate typedef.  

Sun May  4 19:39:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: draw.h, terminal.h:

	Moved ATTR_FRAME from terminal.h to draw.h.  

Sun May  4 19:38:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Minor reindentation.  

Sun May  4 19:38:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: screen.c, screen.h, terminal.c:

	Moved erase_screen() from terminal.c to screen.*.  

Sun May  4 19:36:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: draw.c, draw.h, terminal.c:

	Moved clear_terminal() from terminal.c to draw.*.  

Sun May  4 19:30:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/leds.c, bfu/listbox.c, bfu/menu.c, bfu/text.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, document/html/tables.c,
	elusive/renderer/text/renderer.c, sched/download.c,
	sched/session.c, terminal/Makefile.am, terminal/draw.c,
	terminal/draw.h, terminal/terminal.c, terminal/terminal.h,
	viewer/text/view.c:

	Moved (virtual) screen drawing functions from terminal.* to draw.*.  

Sun May  4 19:19:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: screen.c, terminal.c:

	Moved the terminfo TODO from terminal.c to screen.c 

Sun May  4 19:11:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, terminal/Makefile.am, terminal/screen.c,
	terminal/screen.h, terminal/terminal.c, terminal/terminal.h:

	Moved some screen output routines from terminal.* to screen.*.  

Sun May  4 19:09:33 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sequence length cache thing is now fixed.  

Sun May  4 18:57:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/Makefile.am:

	Distribute my rants.  

Sun May  4 18:57:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/TODO:

	Some general blah blah.  

Sun May  4 18:49:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Trashed piece of some old junk.  

Sun May  4 18:11:45 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sequence codes length is now cached. Please review.  

Sun May  4 18:09:37 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Compilation fix: missing header.  

Sun May  4 17:51:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: Makefile.am, hardio.c, hardio.h, kbd.c,
	terminal.c, terminal.h:

	Moved hard_(read|write) from terminal.* to hardio.*.  

Sun May  4 17:50:54 2003  Laurent Monin <zas@norz.org>:

	* po/.cvsignore, src/.cvsignore, src/intl/gettext/.cvsignore:

	More files are now ignored by cvs.  

Sun May  4 17:45:58 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	An hotkey conflict in contextual menu was fixed.  

Sun May  4 17:36:49 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	The fix for a potential bug in menu scrolling code was reversed.
	Ancient code was ok, this patch causes the mouse click to have a
	strange behavior in menus.  

Sun May  4 17:26:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: kbd.h, terminal.h:

	Updated anti-reinclude defines.  

Sun May  4 17:23:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/Makefile.am, lowlevel/kbd.c, lowlevel/kbd.h,
	lowlevel/terminal.c, lowlevel/terminal.h, terminal/Makefile.am,
	terminal/kbd.c, terminal/kbd.h, terminal/terminal.c,
	terminal/terminal.h, main.c, main.h, bfu/align.h, bfu/button.c,
	bfu/button.h, bfu/checkbox.c, bfu/checkbox.h, bfu/dialog.c,
	bfu/dialog.h, bfu/group.c, bfu/group.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/leds.c,
	bfu/leds.h, bfu/listbox.c, bfu/listbox.h, bfu/menu.c, bfu/menu.h,
	bfu/msgbox.c, bfu/msgbox.h, bfu/text.c, bfu/text.h, bfu/widget.c,
	bfu/widget.h, bookmarks/dialogs.c, bookmarks/dialogs.h,
	config/conf.c, config/conf.h, config/dialogs.c, config/dialogs.h,
	config/kbdbind.c, config/kbdbind.h, cookies/cookies.c,
	cookies/cookies.h, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/edit.h, dialogs/hierbox.c,
	dialogs/hierbox.h, dialogs/info.c, dialogs/info.h, dialogs/menu.c,
	dialogs/menu.h, dialogs/mime.c, dialogs/mime.h, dialogs/options.c,
	dialogs/options.h, dialogs/refresh.c, dialogs/refresh.h,
	document/html/parser.c, document/html/renderer.h,
	globhist/dialogs.c, globhist/dialogs.h, intl/gettext/libintl.h,
	lowlevel/af_unix.c, lowlevel/interlink.c, lowlevel/select.c,
	lowlevel/timer.c, osdep/os_dep.c, scripting/lua/core.c,
	protocol/mime.c, protocol/mime.h, protocol/user.c, protocol/user.h,
	protocol/http/http.c, sched/download.c, sched/download.h,
	sched/session.c, sched/session.h, terminal/kbd.c,
	terminal/terminal.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/view.h:

	Moved lowlevel/(kbd|terminal).* to terminal/.  

Sun May  4 17:21:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/terminal/Makefile.am:

	Added src/terminal/ to the build system.  

Sun May  4 17:21:09 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A potential bug in menu scrolling cpde was fixed. Reported by Sergey
	Karpov.  

Sun May  4 17:13:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: .cvsignore, .vimrc:

	Fairies.  

Sun May  4 17:11:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: terminal.c, terminal.h:

	Changed get_root_window() to a #define in terminal.h.  

Sun May  4 17:11:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Paranoia test whether get_root_window() returned something.  

Sun May  4 16:58:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	sched/session.c, sched/session.h:

	win_func() -> tabwin_func() 

Sun May  4 16:52:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	sched/session.c:

	Introduced init_tab(), moved root window callocation and basic
	initialization from init_term() and open_in_new_tab() to there.  

Sun May  4 16:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Terminal title update is now done properly. An useless variable was
	removed. Reported by Petr Baudis aka pasky.  

Sun May  4 16:25:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Use mem_calloc() when allocating window. Proper allocation error
	handling.  

Sun May  4 14:50:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c:

	Enumerated win->type. Reformatted get_tab_number() and
	get_tab_by_number(), minor optimization of get_tab_number().  

Sun May  4 14:47:44 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	An hotkey conflict was solved in french translation.  

Sun May  4 14:42:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys conflict causes all concerned hotkeys to be highlighted in
	menu.  

Sun May  4 14:18:28 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkey debugging feature is now case-insensitive ;) 

Sun May  4 14:08:08 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys debugging feature: when --enable-debug is used, hotkeys used
	more than once in a menu are highlighted.  

Sun May  4 11:03:55 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	An helper script was added. It generates translation statistics
	(percentage). Improvements are welcomed.  

Sun May  4 10:06:28 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun May  4 01:45:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, session.h:

	A potential segfault and a memleak were fixed. Minor optimizations.  

Sun May  4 01:21:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Code reorganization, minor optimizations, and calls to
	set_terminal_title() are only done when needed.  

Sun May  4 00:17:25 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Tab bar didn't appear when opening a new tab on an empty window, it
	should be fixed. Please test. Reported by Pasky on #elinks, fix by
	Zas.  

Sat May  3 23:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Update status info. Very minor updates.  

Sat May  3 23:26:43 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c, sched/session.h:

	Calculation of usable screen for renderer with one or more visible
	bars is now fixed (i hope). Please test ;) 

Sat May  3 23:11:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	A tab number is now printed in status bar, if there are some tabs
	but show_tabs_bar is set to 0. It appears as [1] for tab 1, [2] ...  

Sat May  3 22:46:28 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c, BUGS:

	Menu accelerators are now case-insensitive.  

Sat May  3 22:42:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	del_from_list(term) before mem_free()ing it upon allocation failure.
	Reported by Miciah.  

Sat May  3 22:34:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Minor fix. Screen height calculation was wrong, and it still need to
	be tested, with one, two or three bars...  

Sat May  3 22:28:04 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed proxy-info-from-environment goal, already done.  

Sat May  3 22:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Reorganized TODO file, created several categories where the stuff is
	grouped now.  

Sat May  3 21:59:27 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Changed format of the TODO/BUGS items. Hopefully more readable now.  

Sat May  3 21:55:07 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Removed some obsolete items.  

Sat May  3 21:54:20 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Moved around certain items.  

Sat May  3 21:44:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/xbel.c, config/options.c,
	config/opttypes.c, dialogs/mime.c, sched/session.c:

	Removed superfluous includes, patch by Jonas.  

Sat May  3 21:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Reorganized the strchr/index ifdefs a little, patch by Jonas.  

Sat May  3 21:42:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Removed superfluous save possibility from some type query
	msg_box()es, patch by Jonas.  

Sat May  3 21:00:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	The cc is too detailist.  

Sat May  3 20:56:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Revert m_bar from 1 to 0, should fix some unused empty spots at the
	right side of some menus. Reported by zas.  

Sat May  3 20:42:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: terminal.c, terminal.h:

	Unexport and statify add_window_at_pos(), noone uses it anyway.  

Sat May  3 20:41:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Allocate windows w/ mem_calloc(). Very minor reorganization in
	init_term().  

Sat May  3 20:38:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Oops.  

Sat May  3 20:26:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Whitespace consistency.  

Sat May  3 19:49:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/kbd.c:

	Use mem_calloc() when allocating itrm.  

Sat May  3 19:44:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Reindentation.  

Sat May  3 19:40:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Poor code lament inserted. url is now NULL by default. Whitespace
	consistency is also important.  

Sat May  3 19:35:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Reindentation. Don't show any windows etc if session allocation
	failed.  

Sat May  3 19:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Actually translate the "Untitled" tab title.  

Sat May  3 19:29:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed one possible off-by-one visual overflow when showing tabs.  

Sat May  3 19:27:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Removed the xget_bfu_color() hack.  

Sat May  3 19:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/renderer.c,
	lowlevel/terminal.c, sched/session.c:

	ui.tabs_bar -> ui.tabs, ui.tabs_bar.show -> ui.tabs.show_bar,
	ui.tabs_bar.cycle -> ui.tabs.wraparound, moved tabs bar color
	settings to proper place, moved ui.tabs to proper place.  

Sat May  3 19:09:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Removed a bogus redundant add() call and restored the proper
	alphabetical order.  

Sat May  3 19:05:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Compute certain stuff just once.  

Sat May  3 18:14:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Oops, negated a condition.  

Sat May  3 17:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Blah.  

Sat May  3 17:13:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Hopefully fixed the stroked unselectable items bug.  

Sat May  3 17:11:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/os_dep.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved can_open_in_new() from viewer/text/view.* to osdep/os_dep.*.  

Sat May  3 17:07:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Open in new tab is available in all &ENV_CONSOLE environments now.  

Sat May  3 17:05:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	This changes the get_open_in_new() environment matching to a more
	natural behaviour. Now, we make sure that at least one of the
	environment bits is in the oinw[i].env of our choice rather than all
	the oinw[i].env bits are set in the environment bitmask (that made
	it ie. impossible to introduce multi-env oinw items).  

Sat May  3 17:02:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Reindenation.  

Sat May  3 17:01:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/kbd.c, osdep/os_dep.c:

	Some ad hoc environment bitmask setting moved from handle_itrm() to
	get_common_env(), value returned from whose is used and contemplated
	in get_system_env(). xwin -> env in handle_itrm() and use just the
	value got by get_system_env(). ENV_CONSOLE is now always set (for
	now and all the foreseeable future).  

Sat May  3 17:00:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.h:

	Describe the enum term_env_type.  

Sat May  3 16:33:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.h, osdep/os_dep.c:

	Introduced ENV_CONSOLE, which means the default text environment.
	Now term->environment == 0 is illegal. This enables bitmasking for
	ENV_CONSOLE, which will be very soon useful ;-).  

Sat May  3 15:24:38 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/viewer/text/view.c:

	Don't show 'Add link to bookmarks' in the Link menu in anonymous
	mode. Reported by Miciah (?).  

Sat May  3 15:21:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Don't be too enthusiastic when using own 'libc', it makes no sense
	to just use index() instead of strchr(). Also don't use bcopy() for
	memmove(), but the real implementation. Motion impulse by Jonas.  

Sat May  3 12:12:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed gcc3's warning and indentation. Patch by witekfl.  

Sat May  3 10:54:03 2003  Laurent Monin <zas@norz.org>:

	* BUGS, TODO:

	TODO and BUGS big updates by Miciah.  

Sat May  3 03:01:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Change default of document.colors.use_document_colors to 2, that is
	use even document-specific background. Let's hope this will get more
	attention (and bugfixes) to this feature.  

Sat May  3 02:58:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	But... but... zas should at least commit smaller bits and say what
	is he actually changing in particular. ;-) Refixed hotkeys displaing
	in open window menu.  

Sat May  3 02:49:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Removed that weird free_list() NULLifying. When you think about it,
	it maks no sense at all anyway. And it didn't work ;-).  

Sat May  3 02:43:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, viewer/text/view.c:

	submenu_indicator -> m_submenu 

Sat May  3 02:42:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Inlined few functions. Cleaned up term_send_event().  

Sat May  3 02:38:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Added space.  

Sat May  3 02:37:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Blah, compilation fix.  

Sat May  3 02:36:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Oops, compilation fix.  

Sat May  3 02:36:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Whitespaces added.  

Sat May  3 02:33:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Use term_send_event() instead of own crafted code.  

Sat May  3 02:31:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed unsigned vs signed issue.  

Sat May  3 02:29:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Bunch of compilation fixes.  

Sat May  3 02:27:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Tidyup.  

Sat May  3 02:25:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Cast properly.  

Sat May  3 02:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	[POLL] Shouldn't zas take more care about what he actually commits
	alongside the changes he intends to commit? ;-) 

Sat May  3 02:12:35 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Added email addy to our phantom.  

Sat May  3 01:55:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Spurious whitespace elliminated.  

Sat May  3 01:53:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Heavy reindation and a little bit of tidyup.  

Sat May  3 01:48:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Whitespace fix.  

Sat May  3 01:38:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	*sigh* ... put back my fix for free_list(). Either do it correctly
	or don't do it at all, hm? 

Sat May  3 01:30:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted (the most of) bogus 'cleanups'.  

Sat May  3 01:16:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reindentation & stuff.  

Sat May  3 01:11:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Whitespace fixes.  

Sat May  3 01:07:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	viewer/text/view.c:

	M_BAR was re-added, reverted menu item's rtext usage changes. I'm
	almost sure I broke something ;-).  

Sat May  3 00:41:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.h, dialogs/menu.c, document/html/parser.c,
	viewer/text/view.c:

	SUBMENU_INDICATOR -> M_SUBMENU 

Sat May  3 00:12:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed missing bracked. This will be a long night.  

Sat May  3 00:09:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Compressed cache declaration.  

Sat May  3 00:07:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Oops, compilation fix. Reported by zas.  

Sat May  3 00:04:22 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/kbdbind.c, config/kbdbind.h,
	lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	sched/session.c, viewer/text/view.c:

	Whitespaces cleanup by Jonas.  

Fri May  2 23:59:14 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c:

	True full screen, bars are handled cirrectly in screen size respect,
	but reloading of document may be necessary. Try to play with options
	that enable/disable main menu, status bar, tabs bar.  

Fri May  2 23:48:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	Reverted the keybindings-use FIXME removal. Apparently it still
	applies.  

Fri May  2 23:34:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Something terrible must've happenned. Reindented to correct style.  

Fri May  2 23:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Slightly moved now-harmless misplaced condition.  

Fri May  2 23:17:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed corner cases bugs in witekfl's marked items deletion patch.
	Now we traverse to the next item correctly, not blindly cycling in
	the frame of one level (which can be deadly).  

Fri May  2 22:39:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/dialogs.c, globhist/dialogs.c:

	ofs -> offset change reverted, the purpose of the original change is
	unknown, undocumented and so on.. you've no chance, infiltrator
	witekfl \! ;-)) 

Fri May  2 22:25:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed whitespace inconsistency.  

Fri May  2 22:20:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	abrt -> stop. sts -> status.  

Fri May  2 22:20:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Keep the namespace clean. _reload -> do_reload.  

Fri May  2 22:16:18 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, scripting/lua/core.c, sched/session.h,
	viewer/text/view.c, viewer/text/view.h:

	Stupid patch i made was reversed. Sorry for the inconvenience ;) 

Fri May  2 21:59:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp.c:

	If display_dir_entry() failed, return the error value it threw on
	us, not behave like there was no error at all.  

Fri May  2 21:58:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Reverted not exactly style-clean change.  

Fri May  2 21:43:44 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Original authors of the tab browsing patch were added. But who is
	John ? 

Fri May  2 21:25:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/align.h, config/options.c, document/html/renderer.c,
	lowlevel/terminal.c, sched/session.c:

	Color configuration was added for the tabs bar. An attempt to group
	tabs bar options under the same tree was done, please give your
	opinion. Little hack of get_bfu_color(). Minor fixes.  

Fri May  2 20:24:32 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	The cycle tab segfault is now fixed. Thanks to Jonas Fonseca.  

Fri May  2 16:33:00 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Fri May  2 16:08:03 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, lowlevel/terminal.c:

	Cycle tabs is now possible through ui.cycle_tabs_bar option.  

Fri May  2 15:41:15 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/renderer.c,
	sched/session.c:

	show_tabs_bar option was added. It defaults to 1 which is show tabs
	bar only if there are 2 or more visible tabs. Feel free to improve
	;) 

Fri May  2 14:55:05 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, sched/session.h, scripting/lua/core.c,
	viewer/text/view.c, viewer/text/view.h:

	Some stupid changes were reverted (frm->form and lnk->link thing).
	Sorry ;). And struct link -> struct a_link rename happenned, just to
	be surely reverted promptly by zas :^). --pasky 

Fri May  2 14:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Fix a bug in free_list(), temporary fix ;) 

Fri May  2 14:22:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Try to resolve more nicely the leftpad vs leftpad clash.  

Fri May  2 14:13:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Use more fantasy in naming of parameters ;-).  

Fri May  2 14:09:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Attempt to clarify that o.plain setting enigmatic code even more.
	How many more rewrites will it need? ;-) 

Fri May  2 13:53:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed free_list() ->next NULLifying.  

Fri May  2 13:50:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Whitespace fix.  

Fri May  2 13:44:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h, lists.h:

	Show affected expression when list_magic_error() occurs.  

Fri May  2 13:31:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	hashmagic -> HASH_MAGIC 

Fri May  2 13:26:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Removed some redundant bits.  

Fri May  2 13:00:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Minor reformatting.  

Fri May  2 12:10:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h, lists.h:

	listmagicerror -> list_magic_error, minor cleanup and invalid
	pointers resistance. Keep the namespace clean: _listmagicerror ->
	list_magic_error_.  

Fri May  2 11:15:09 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/kbdbind.c, config/kbdbind.h,
	document/html/renderer.c, lowlevel/terminal.c, lowlevel/terminal.h,
	osdep/os_dep.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Tabbed browsing support :). Patch by Sergey Karpov and me.  

Fri May  2 08:26:35 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a bug was removed, elinks_str[n]casecmp() functions
	were buggy.  

Fri May  2 08:25:30 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, sched/session.c, util/string.c,
	util/string.h, viewer/dump/dump.c, viewer/text/view.c:

	Minor compilation issues were fixed (with --enable-libc).
	elinks_strcasecmp() and elinks_strncasecmp() were fixed.  

Thu May  1 23:45:08 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A comment about --enable-libc and rendering issue was added...
	Should be fixed soon.  

Thu May  1 23:39:45 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in:

	Configure option --enable-libc was added. It forces the use of
	internal functions instead of system ones if they exist.  

Thu May  1 23:21:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	USE_LIBC was added. Many changes to permit debugging of replacement
	functions on a system that have some of these. It reveals a bug...  

Thu May  1 17:09:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanups.  

Thu May  1 11:08:03 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some useless refresh_hotkeys() calls were removed.  

Thu May  1 10:46:43 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about the wrong tilde expansion in goto dialog was added. A
	patch ? Nobody ? ;) 

Thu May  1 10:43:14 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, util/file.c:

	Fix of get_unique_name()/expand_tilde() was fixed. Patch by Jonas
	Fonseca.  

Thu May  1 00:22:02 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Ooops, this initialization prevents a compilation warning.  

Thu May  1 00:16:46 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Very minor cleanup.  

Thu May  1 00:04:20 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Cleanup.  

Wed Apr 30 23:55:58 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	A mailcap issue was fixed. Patch by fonseca and me.  

Wed Apr 30 22:17:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	An errno check was added around an strtoul() call.  

Wed Apr 30 21:56:52 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/menu.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	The url to links manual was replaced by a link to documentation page
	on ELinks website. Minor ELinksification in setup.h.  

Wed Apr 30 21:30:53 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup and optimizations.  

Wed Apr 30 21:06:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, dialogs/menu.c:

	Some compilation and hotkeys issues with --disable-nls were fixed.  

Wed Apr 30 18:28:45 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a known bug was added. It will be fixed soon.  

Wed Apr 30 17:34:55 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	An issue with mouse selection of menu items was fixed (finally).  

Wed Apr 30 17:28:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	An issue with mouse selection of menu items was fixed.  

Wed Apr 30 17:16:36 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 17:13:18 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 17:06:25 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 16:59:37 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/html/parser.c, viewer/text/view.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 12:24:41 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.h, dialogs/menu.c, document/html/parser.c,
	viewer/text/view.c:

	Hardcoded ">" string was replaced by a macro named
	SUBMENU_INDICATOR.  

Wed Apr 30 10:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c, po/be.po, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, src/bfu/menu.c, po/gl.po, po/hr.po, po/hu.po, po/id.po,
	po/is.po, po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po,
	po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po:

	Hotkeys colors are now fully configurable.  

Wed Apr 30 08:49:59 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Debugging output was removed :) 

Wed Apr 30 08:46:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup, optimizations, and correct handling of language changes.  

Tue Apr 29 17:34:59 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	A issue about hotkeys not printed in help menu was fixed.  

Tue Apr 29 17:24:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A debugging ouput was removed ;).  

Tue Apr 29 17:22:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Hotkeys are useless for that menu. Fixed.  

Tue Apr 29 17:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A superfluous continue force some branches to be visited twice.
	Fixed by Witold Filipczyk.  

Tue Apr 29 17:11:07 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	sched/session.c, viewer/text/view.c:

	Hotkeys handling was completly reworked. Performance was enhanced,
	issue with goto history completion was fixed, hotkeys now appear
	even when menu item is selected. Many changes were made, so please
	test a lot.  

Tue Apr 29 13:22:22 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A line was removed. Kooool.  

Tue Apr 29 13:18:21 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, globhist/dialogs.c, globhist/globhist.c:

	Marked items deletion was finally fixed. Thanks to Witold Filipczyk
	for the patch.  

Tue Apr 29 09:28:54 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:44:45 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, sched/download.h, viewer/dump/dump.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:34:11 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:30:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, ftp.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:25:28 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, protocol/http/http.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:20:37 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:03:17 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 07:59:21 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 07:53:08 2003  Laurent Monin <zas@norz.org>:

	* src/elusive/renderer/text/renderer.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 07:51:27 2003  Laurent Monin <zas@norz.org>:

	* src/elusive/layouter/syntree/layouter.c:

	A minor typecasting issue was fixed, a void * was used in
	arithmetic.  

Tue Apr 29 07:49:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: parser.c, tables.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 15:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, config/opttypes.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 15:33:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.c, bookmarks/backend/default.c,
	bookmarks/backend/xbel.c, intl/charsets.c,
	intl/gettext/dcigettext.c, intl/gettext/libintl.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 13:22:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Cleanup of some egnimatic code ;).  

Mon Apr 28 10:00:51 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Raúl Núñez de Arenas Coronado was added to AUTHORS document.  

Mon Apr 28 09:47:12 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, globhist/globhist.c:

	Workaround for bookmarks/globhist segfault caused by deletion of
	marked items. A real fix is needed there. Patch by Witold Filipczyk
	and me.  

Mon Apr 28 09:40:27 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, util/file.c:

	The problem with tilde expansion at get_unique_name() was fixed. The
	call to expand_tilde() inside get_unique_name() was substitued by a
	copy_string(). This patch may still need improvment but it works.
	Patch by Raúl Núñez de Arenas Coronado.  

Sat Apr 26 09:47:44 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	BUGS file was updated.  

Sat Apr 26 09:47:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Lists debugging feature is now enabled when --enable-debug is used.  

Sat Apr 26 09:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Cleanups and minor optimizations.  

Sat Apr 26 09:01:49 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Lists debugging was improved a bit. Some pointers are now set to
	specific values after action.  

Sat Apr 26 08:03:18 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Minor cleanup.  

Sat Apr 26 07:57:51 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	A list head structure initialization was fixed.  

Thu Apr 24 08:52:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix init_formatted() to be useable with listdebug feature. We should
	not rely a fixed size for struct list_head.  

Thu Apr 24 08:32:34 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	lists.h cleanup.  

Thu Apr 24 08:23:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.h, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/backend/xbel.c, config/kbdbind.c,
	config/kbdbind.h, config/options.c, config/options.h,
	cookies/cookies.c, dialogs/menu.c, document/cache.c,
	document/cache.h, document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	elusive/layouter/box.h, elusive/parser/property.h,
	elusive/parser/syntree.h, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h, lowlevel/dns.c, lowlevel/select.c,
	lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	protocol/http/auth.c, protocol/http/auth.h, sched/connection.c,
	sched/connection.h, sched/download.c, sched/download.h,
	sched/location.h, sched/sched.c, sched/sched.h, sched/session.c,
	sched/session.h, util/blacklist.c, util/error.c, util/error.h,
	util/hash.c, util/hash.h, util/lists.h, util/memdebug.c,
	viewer/text/view.c:

	Lists debugging feature was implemented. It still needs some work
	(and cleanup) but it already detects some bugs. To test edit
	src/util/lists.h and define LISTDEBUG. As a side effect list headers
	(next,prev pointers) are now defined as a macro providing a kind of
	encapsulation. Feel free to improve the patch.  

Tue Apr 22 15:51:57 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Marked bookmarks deletion segfault bug was added.  

Tue Apr 22 14:17:16 2003  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	fmem_alloc() and fmem_free() are always mem_alloc() and mem_free()
	but in one case. Fixed.  

Tue Apr 22 13:01:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A compile issue (type casting) was fixed. Patch by Jonas Fonseca.  

Tue Apr 22 10:09:24 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/html/tables.c,
	util/memory.h:

	fmem_alloc() and fmem_free() were introduced. When alloca() exists,
	and FASTMEM is defined (at configure time), then malloc() is
	replaced with alloca() and free() is not used, whenever possible. It
	will improve performance in functions allocating temporary memory.
	Read alloca() man page for further information, and be conscious
	that fmem_alloc() may only be used in some cases.  

Tue Apr 22 08:57:36 2003  Laurent Monin <zas@norz.org>:

	* BUGS, src/bookmarks/dialogs.c:

	Bug: Moving bookmarks to empty higher level folders... Fixed.  

Mon Apr 21 21:12:00 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a bug concerning moving bookmarks was added.  

Mon Apr 21 20:38:21 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	strdup() stub was improved.  

Mon Apr 21 20:16:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	An unused variable was removed.  

Mon Apr 21 20:04:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Minor code cleanup.  

Mon Apr 21 19:31:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some hardcoded chars were replaced by FRAME* chars, minor
	optimization in html_ol().  

Mon Apr 21 11:52:56 2003  Laurent Monin <zas@norz.org>:

	* po/: POTFILES.in, be.po, bg.po, ca.po, cs.po, da.po, de.po,
	el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po,
	is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po,
	ru.po, sk.po, sv.po, tr.po, uk.po:

	Keybinding descriptions were added to translations stuff. French
	translation was updated. Translators please think about updating
	your translations...  

Mon Apr 21 09:44:33 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Apr 21 09:30:27 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Minor optimization.  

Mon Apr 21 09:28:23 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Cleanup and code redundancy was reduced: transchars() and
	untranschars() functions were introduced.  

Sun Apr 20 15:05:49 2003  Laurent Monin <zas@norz.org>:

	* src/: util/string.c, bfu/inphist.c, document/html/parser.c:

	A potential issue was fixed. trim_chars() no more modify pointer to
	the start of string, it now uses memmove(). It may be responsible of
	issues when trying to free the string.  

Sun Apr 20 14:49:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Code redundancy was reduced. As a side effect it should improve
	speed a bit.  

Sun Apr 20 12:30:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix the Draw the frame lines connected patch. Please pasky recheck
	it.  

Sun Apr 20 10:35:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Draw the frame lines connected (by mikulas, from 0.99pre5).  

Sun Apr 20 09:08:34 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files and french translation were updated.  

Sun Apr 20 08:54:56 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Ooops. Missing \n fixed.  

Sun Apr 20 08:49:13 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	Fixed / -> _ URL translation when calling external helpers. Reported
	by John D. Boy <john@voidhobo.de>, patch by Fabio.  

Sun Apr 20 08:40:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Allow relative redirects while downloading (by mikulas, from
	0.99pre5).  

Sun Apr 20 08:37:54 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Convert '\' to '/' in HTTP requests (windows rulez) (by mikulas,
	from 0.99pre5).  

Sun Apr 20 08:35:09 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Added mising newline in protocol.http.bugs.broken_302_redirect
	description.  

Sun Apr 20 08:33:41 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/http/http.c:

	Introduced protocol.http.bugs.accept_charset which optionally
	prohibits sending of the infamous Accept-Charset header (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:29:48 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Do not abort loading main page when loading link fails (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:27:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Read uploaded files in binary mode (matters for OS/2) (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:25:32 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, sched/connection.c, sched/sched.c:

	connect.retries = 0 means unlimited retries (by mikulas, from
	0.99pre3).  

Sat Apr 19 19:15:09 2003  Laurent Monin <zas@norz.org>:

	* po/: Makefile.in, Makefile.in.in, be.po, bg.po, ca.po, cs.po,
	da.po, de.po, el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po,
	hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po,
	pt_BR.po, ro.po, ru.po, sk.po, sv.po, tr.po, uk.po:

	.po files and french translation were updated. msgmerge report was
	slightly modified (clearer).  

Sat Apr 19 18:45:57 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	error() + gettext().  

Sat Apr 19 18:39:56 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/home.c, scripting/lua/core.c:

	error() + gettext().  

Sat Apr 19 18:35:26 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	error() is now used instead of fprintf(stderr,...).  

Sat Apr 19 17:45:40 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were updated.  

Sat Apr 19 17:36:16 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	A namespace clash was fixed (now).  

Sat Apr 19 17:33:55 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Use error(). A namespace clash was fixed.  

Sat Apr 19 17:27:02 2003  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Use error() and gettext().  

Sat Apr 19 17:22:31 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	error() calls were fixed.  

Sat Apr 19 17:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	error() no more waits 1 second, and made use of fputc() instead of
	fprintf().  

Sat Apr 19 17:11:16 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Some fprintf(stderr,..) were replace by error().  

Sat Apr 19 17:00:23 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, protocol/mailcap.c:

	Minor cleanup.  

Sat Apr 19 12:25:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, util/lists.h:

	Removed usage of ternary operators from list routines, it brings
	portability problems. Thanks, Jose.  

Sat Apr 19 11:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: Makefile.in, gettextP.h, loadmsgcat.c,
	plural.c:

	Prefix __gettext was moved to gettext__.  

Sat Apr 19 11:00:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	ACT_NONE is now just zero instead of -1, thus it is enabled for use
	in config files etc. This way, default keybindings may be removed.
	Idea by Raul.  

Sat Apr 19 10:46:57 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, gettextP.h, hash-string.h, intl-compat.c, l10nflist.c,
	libgettext.h, libgnuintl.h, loadinfo.h, loadmsgcat.c,
	localcharset.c, localealias.c, ngettext.c, plural.c, plural.y,
	textdomain.c:

	char -> unsigned char + some fixes related to plural.c generation.  

Sat Apr 19 10:24:25 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: dcigettext.c, finddomain.c, gettextP.h,
	loadmsgcat.c, localealias.c:

	Some libc-specific code was removed.  

Fri Apr 18 09:34:02 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, finddomain.c, gettext.c,
	gettext.h, gettextP.h, intl-compat.c, l10nflist.c, loadmsgcat.c,
	localealias.c, ngettext.c, textdomain.c:

	Even more ELinksified. Most libc-specific stuff was removed.  

Fri Apr 18 08:13:03 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Translations were resynced with source code. French translation was
	updated.  

Fri Apr 18 07:44:08 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	current_url() no more returns post-data. Scripts that rely on the
	old behaviour should be rewritten to use a new API which should be
	written to return the post-data. Implementation of that new API is
	leaved to people who are doïng fancy stuff that needs post-data.
	Patch by Miciah.  

Fri Apr 18 07:38:59 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/view.c:

	Introduces document.browse.scroll_step option to configure the
	default number of lines that scroll-up and scroll-down scroll. Patch
	by Miciah.  

Fri Apr 18 07:35:12 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Removes layout_history_manager and uses layout_hierbox_browser.
	Ports some bookmarks code to globhist so the user can delete marked
	items, and delete using the Delete key. Patch by Miciah.  

Thu Apr 17 17:57:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	This avoids multiple [ Submit ] image inputs on a page like
	amazon.com's which uses image to record useful/useless
	recommendations but doesn't have alt attribute set. Patch by Zardoz.  

Thu Apr 17 17:48:56 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Two fixes -- one for processing tree below <xbel> node and another
	to fix crash when freeing attributes. Patch by Zardoz.  

Thu Apr 17 17:44:27 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	A missing header file is now included.  

Thu Apr 17 15:07:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Compression handling was finally fixed. Patch by Witold Filipczyk.  

Thu Apr 17 15:03:39 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, finddomain.c, gettext.c,
	gettextP.h, hash-string.h, l10nflist.c, libgnuintl.h, libintl.h,
	loadinfo.h, loadmsgcat.c, localealias.c, ngettext.c, plural.c,
	plural.y, textdomain.c:

	ELinksification. There's still remaining some libc specific stuff...  

Thu Apr 17 13:25:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	stpcpy() and mempcpy() replacements were added. It will help to
	simplify gettext code included in ELinks.  

Thu Apr 17 12:28:48 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, explodename.c, finddomain.c, gettext.c,
	hash-string.h, intl-compat.c, l10nflist.c, libintl.c, loadmsgcat.c,
	localcharset.c, localealias.c, ngettext.c, plural.c, textdomain.c:

	ELinksified function declarations and labels.  

Thu Apr 17 11:58:38 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, intl-compat.c, l10nflist.c, libintl.c, gettext.h,
	gettextP.h, hash-string.h, libgettext.h, libgnuintl.h, libintl.h,
	loadinfo.h, loadmsgcat.c, localcharset.c, localealias.c,
	ngettext.c, plural.c, textdomain.c:

	ELinksified indentation. Still not perfect but should help...  

Thu Apr 17 07:53:48 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Fancier features listing in info box, comma separators were added.  

Thu Apr 17 07:44:44 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_depx.h:

	Compilation fix. On some systems, PIPE_BUF redefinition causes
	compilation to fail.  

Wed Apr 16 21:36:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Workaround WebSitePro/2.5.4 headers termination bug, patch by
	witekfl.  

Wed Apr 16 21:28:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_depx.h:

	Portability fix, OS/2 hasn't PIPE_BUF. Patch by Mikulas and me.  

Wed Apr 16 21:25:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed some compression problems, reported by zas, patch by witekfl.  

Wed Apr 16 21:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Be more strict when taking number values from commandline or UI. Bug
	reported by Mikulas.  

Wed Apr 16 21:16:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/dns.c, lowlevel/dns.h:

	Do not use mem_*() inside of the resolving thread. Pointed out by
	Mikulas.  

Wed Apr 16 21:14:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	NULLify freed *dnsquery.addr, otherwise we get ghost references in
	the struct connection_info. Thanks, Mikulas! 

Wed Apr 16 12:47:58 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Witold Filipczyk.  

Wed Apr 16 12:43:30 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	A freed pointer wasn't nullified. It may be responsible of some
	bugs. Pasky, please have a look.  

Mon Apr 14 15:44:26 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: libintl.c, libintl.h:

	Accept-Language header is now correct with language "system". Patch
	by Fabio Bonelli.  

Mon Apr 14 15:35:18 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Partial fix for weird cursor behavior in some textareas (see
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=62368). Patch
	by Tim Waugh.  

Mon Apr 14 15:22:23 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Witold Filipczyk.  

Mon Apr 14 15:18:07 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A bug concerning document decompression was fixed. Patch by Witold
	Filipczyk.  

Mon Apr 14 15:05:47 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, lowlevel/ttime.c, lowlevel/ttime.h:

	Trivial cleanups. Patch by José Luis González González.  

Mon Apr 14 13:26:20 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A test against a zero-length string copy was added. It prevents a
	forced segfault with --enable-debug.  

Tue Feb 25 14:17:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: tree.c, tree.h:

	Still under work. The tree allocation used by the parsers in
	ruleset.c.  

Tue Feb 25 14:15:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: README, TESTING, TODO, atrule.c,
	atrule.h, parser.c, parser.h, ruleset.c, ruleset.h, scanner.c,
	scanner.h, state.h, test.c, test.h, util.c, util.h:

	Updates for the css parser.  

Mon Feb 24 12:12:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed estimated time displayed when resuming download of some file.  

Wed Feb 19 17:26:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fixed yet another crash in textarea editor code. Stupid.  

Mon Feb 10 18:47:13 2003  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Oops, Pergl -> Pergel. Sorry Martin :-). Idea by clock.  

Wed Feb  5 09:17:06 2003  Laurent Monin <zas@norz.org>:

	* TODO:

	Some entries were removed. A new section called "Permanent goals"
	was added ;).  

Wed Feb  5 08:58:08 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c, po/be.po, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po,
	po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po:

	LUA -> Lua ;) Thanks to Peter Wang.  

Sun Jan 26 23:02:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed registation of the protocol.http.trace option. Thanks to
	<Len_Lattanzi@StanfordAlumni.org> for a report.  

Sun Jan 26 19:48:56 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/protocol/http/http.c:

	Introduced support for the HTTP TRACE request (option
	protocol.http.trace), patch by Bennett Todd.  

Sun Jan 26 19:23:19 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	elinks.pld.org.pl -> elinks.or.cz, based on Bennett's suggestion 

Sun Jan 26 17:40:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, sched.c:

	Fixed possible removal of used cache_entry (altough I can't imagine
	well how could it happen).  

Sun Jan 26 17:34:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/connect.c, lowlevel/connect.h,
	lowlevel/dns.c, lowlevel/dns.h:

	Cleanup of DNS code, a lot of sockaddr -> sockaddr_storage changes.
	Hopefully fixes some possible overflow problems reported by Jose.  

Fri Jan 24 23:20:58 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	When sysconfdir is set explicitly, don't append the elinks/ part.
	Idea by DervishD <raul@pleyades.net>.  

Fri Jan 24 15:55:09 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/lt.po,
	po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, src/setup.h,
	src/dialogs/menu.c:

	An Help menu shortcut was added: LUA Reference manual, appears only
	when LUA support is compiled-in.  

Fri Jan 24 14:01:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/layouter.c:

	pdata -> lstate 

Fri Jan 24 11:54:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/layouter.c:

	Transformed a nice recursion over syntax tree to a particularily
	ugly single-level loop. This means support for layouting resuming.  

Thu Jan 23 23:15:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Oops! Quite a fatal bug which managed to somehow sneak along my
	sight for a *long* time. The resuming sometimes happenned...
	automagically, when the file already existed. Reported by Jose.  

Thu Jan 23 19:03:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed various stracpy(NULL) and similiar problems with smart
	download dialog. Reported by Jonas.  

Thu Jan 23 13:14:46 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Compilation fix: warning: pointer type mismatch in conditional
	expression.  

Thu Jan 23 13:07:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Introduced lun_cancel(), fixed possible problems with NULLs in
	lun_hop file variables.  

Thu Jan 23 13:03:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed problem with garbage showing up in the smart download dialog.  

Thu Jan 23 10:54:40 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan 23 03:13:34 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/: config.lua, hooks.lua.in:

	Introduce a possibility to the default lua hooks to see various
	source files with a highlighted syntax. Patch by witekfl.  

Thu Jan 23 02:47:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/download.c, sched/download.h,
	viewer/text/view.c:

	Introduced a "File exists" dialog, which asks user whether to
	overwrite the original file, save to an alternative file or resume
	the download. It's turned on by document.download.overwrite = 2 (new
	default). Please test extensively.  

Thu Jan 23 02:47:23 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.pot mess update.  

Thu Jan 23 02:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Unified also direct expand_tilde() to lookup_unique_name().  

Thu Jan 23 02:29:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Changed order of libraries when linking, can fix compilation. Patch
	by Fabio.  

Thu Jan 23 02:29:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h, sched/download.c, sched/sched.c, sched/sched.h:

	Moved one part of the download resuming core (seek()ing in the
	stream) to much more appropriate place. Introduced
	remaining_info.seek, which is now only set in the protocol backends
	and we handle what we need in download_data().  

Wed Jan 22 00:49:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, sched/download.h, viewer/text/view.c:

	Made create_download_file() asynchronous and its users as well ---
	preparation for the smart download dialog implementation.  

Mon Jan 20 18:02:43 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in:

	Added checks for __va_copy() and C99 compliant vsnprintf(). Taken
	from Samba.  

Mon Jan 20 17:50:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: Makefile.am, snprintf.c, snprintf.h:

	Introduced own implementation of snprintf(), ported from the Samba
	project. Will be improved yet.  

Mon Jan 20 16:23:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Add struct addrinfo check to the IPv6 checks.  

Mon Jan 20 16:21:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	Portability note.  

Mon Jan 20 15:09:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Restore stub declaration ifdefs - now they cause conflicts. So it's
	either -ansi or -Werror, it looks.  

Mon Jan 20 15:08:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Introduced qualifiers to declarations of the stub functions.  

Mon Jan 20 14:57:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/gettextP.h:

	Make gettext use our stubs.  

Mon Jan 20 14:56:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/string.c, src/util/string.h:

	Fixed strcasecmp() stub, declare stubbed functions everytime (since
	sometimes just declaration is suppressed, but the function exists so
	configure will detect it). Introduced strdup() stub.  

Mon Jan 20 14:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: dcigettext.c, gettextP.h, libintl.c:

	Introduced LANGUAGE variable which takes precedence to the LANGUAGE
	environment variable inside of gettext. Make set_language() to
	modify that variable instead of using unportable setenv().  

Mon Jan 20 13:58:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.h:

	Introduced stub for strcasecmp().  

Mon Jan 20 13:48:17 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	A check for variadic macros was added. For near future use.  

Mon Jan 20 13:38:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/string.c, src/util/string.h:

	Introduced stub for strcasecmp().  

Mon Jan 20 11:09:12 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS, TODO:

	Removed stale TODO item, updated NEWS.  

Mon Jan 20 10:22:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Updated the Move Front Rule comment.  

Mon Jan 20 10:19:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	When retrieving an item from the hash, move it to the head of list
	of the hash key values. The Links people call it MFR, inspired by
	them (probably PerM).  

Mon Jan 20 00:57:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: atrule.h, ruleset.h, scanner.h:

	Moved exported functions to css_* namespace.  

Sun Jan 19 20:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: atrule.h, parser.h, ruleset.h,
	scanner.h, state.h:

	The basic structure of the CSS parser.  

Sun Jan 19 20:03:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Fixed tiny but fatal bug in lua causing non-working pipe_read()
	(kinda problem, yes ;). Patch by witekfl.  

Sun Jan 19 18:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: README, TODO:

	The first glimpse of the CSS parser ...  

Sun Jan 19 18:25:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/: parser.h, html/parser.c:

	HTML state parsers now returns enum pstate_code.  Unneeded
	PSTATE_RECOVER removed.  

Sun Jan 19 18:00:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/: stack.c, stack.h:

	Possibility for optimizing parsers by reusing parser states through 
	state_stack_repush(). Basicly it just resets the state on top of the
	stack.  Equal to state_stack_pop() followed by state_stack_push().  

Sun Jan 19 17:51:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/: parser.h, html/parser.c:

	Generic return type for state parsers added to improve readability.  
	HTML parser updated to use it.  

Sun Jan 19 14:43:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Tiny cleanup.  

Sun Jan 19 14:42:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Oops. Fool me.  

Sun Jan 19 14:36:10 2003  Laurent Monin <zas@norz.org>:

	* src/elusive/renderer/text/renderer.c:

	Compilation fix : missing include.  

Sun Jan 19 14:28:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Compilation fix. Jonas refusing to commit anything to CVS ;-).  

Sun Jan 19 14:24:19 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/sched/connection.c, src/sched/sched.c:

	Fixes for extracting of proxy addresses from the variables - ignore
	/^protocol:\/\// and /\/.*$/. Patch by Alexey Tourbin
	<at@turbinal.org> and me.  

Sun Jan 19 14:13:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/user.c:

	Introduced %d modifier for protocol.user.* options, which is
	substitued by the path part of the URL. Based on Jupp's suggestion.  

Sun Jan 19 14:07:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	check_protocol() paranoia 

Sun Jan 19 13:53:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Introduced -default-mime-type commandline option, aliasing
	document.download.default_mime_type.  

Sun Jan 19 08:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed highlighting again. Thanks, Witold.  

Sat Jan 18 23:36:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	New keywords added. Reported by Doug Kearns
	<djkea2@mugca.its.monash.edu.au>.  

Sat Jan 18 23:35:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed highlighting.  

Sat Jan 18 23:27:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Use frame symbols instead of ascii art in the hiearchic listboxes.
	Based on patch by witekfl.  

Sat Jan 18 23:05:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, lowlevel/terminal.c, lowlevel/terminal.h,
	viewer/text/view.c:

	Set the ATTR_FRAME bit directly in the frame symbols declaration.  

Sat Jan 18 23:00:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Oops. Compilation fix.  

Sat Jan 18 22:58:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, document/html/tables.c, lowlevel/terminal.c,
	lowlevel/terminal.h, viewer/text/view.c:

	Introduced enum frame_char, converted most of frame codes to
	FRAME._* defined in this enum. Inspired by witekfl's patch.  

Sat Jan 18 14:47:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/common/: .cvsignore, .vimrc:

	Added fairies.  

Sat Jan 18 14:38:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed HTTP communication when compiled --without-cookies. Patch by
	Fabio.  

Sat Jan 18 14:16:14 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/conv/conf-links2elinks.pl:

	The attached diff updates the file
	'contrib/conv/conf-links2elinks.pl' in the elinks distribution to
	fix some problems in config file migration, specifically: 
	
	* the terminal.XXX.utf_8_io setting is now given a proper boolean
	value 
	
	* spaces in extension lists and mime-type lists are (properly)
	ignored 
	
	* regular expressions are converted to work in older Perl versions
	too 
	
	* the mime.handler.XXX.YYY.block setting is now given a proper
	boolean value 
	
	Patch by BC Sittler.  

Sat Jan 18 02:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/syntree/layouter.c,
	renderer/text/renderer.c:

	Introduced some trivial padding and virtual flow cursor. Fixed nasty
	mistake in syntree layouter and removed up strange hacks to
	workaround it. Now the indentation finally works perfectly ;-).  

Sat Jan 18 01:41:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: box.c, box.h:

	get_only_box_property() looks at the associated syntree node as
	well.  

Sat Jan 18 01:32:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/box.c, layouter/box.h, parser/syntree.c,
	parser/syntree.h:

	Introduced get_only_*_property(), looking only at the given node,
	without any additional automagical lookups.  

Sat Jan 18 01:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/box.c, parser/syntree.c:

	Make get_*_property() descend to the root if the property isn't
	found in the actual node/box. Enables the syntree indentation.  

Sat Jan 18 01:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/syntree/layouter.c,
	renderer/text/renderer.c:

	Introduced some support for padding-left property in the text
	renderer. Introduced indenting of syntax tree nodes in syntree
	layouter.  

Sat Jan 18 01:00:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/syntree/layouter.c,
	renderer/text/renderer.c:

	Fixed the last bits of layouting and rendering. Initial support
	looks more or less complete.  

Sat Jan 18 00:41:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/layouter.c:

	Improved format of output of the syntree layouter.  

Sat Jan 18 00:36:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, elusive/layouter/box.c,
	elusive/layouter/syntree/layouter.c, elusive/parser/property.c,
	elusive/parser/property.h, elusive/parser/syntree.c,
	elusive/parser/html/parser.c, elusive/renderer/text/renderer.c:

	Tons of random fixes. Now the renderer slowly starts to work in my
	testing environment...  

Fri Jan 17 23:16:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Random fix fix.  

Fri Jan 17 23:09:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/renderer.h:

	LAYOUTER_* -> RENDERER_* ;-) 

Fri Jan 17 23:06:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Random fixes.  

Fri Jan 17 22:38:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Attempted to implement some really trivial text renderer.  

Fri Jan 17 22:04:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: DESIGN, TODO, layouter/box.c, layouter/box.h,
	layouter/syntree/layouter.c, parser/Makefile.am, parser/attrib.c,
	parser/attrib.h, parser/property.c, parser/property.h,
	parser/syntree.c, parser/syntree.h, parser/html/parser.c,
	renderer/text/renderer.c:

	attribute -> property terminology change.  

Fri Jan 17 21:48:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: DESIGN, TODO, layouter/Makefile.am, layouter/box.c,
	layouter/box.h, layouter/layouter.c, layouter/layouter.h,
	layouter/rectangle.c, layouter/rectangle.h,
	layouter/syntree/layouter.c:

	rectangle -> box terminology change.  

Fri Jan 17 17:04:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Translations resync. French translation was updated.  

Fri Jan 17 16:47:54 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	How image links are enclosed is now configurable by options system.
	Please comment, fix, or revert. ;) 

Fri Jan 17 10:54:59 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, src/dialogs/document.c, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po,
	po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po:

	Erroneous translation was fixed ~Link -> Link.  

Fri Jan 17 09:58:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Many menu hotkeys were fixed.  

Thu Jan 16 21:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fixed segfault when -stdin was passed to ELinks. Evil.  

Thu Jan 16 14:35:13 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, config/opttypes.c, dialogs/options.c,
	protocol/http/http.c, viewer/dump/dump.c:

	Compilation with --disable-nls was fixed. Need more work.  

Thu Jan 16 11:34:16 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and fixed.  

Thu Jan 16 10:06:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po, src/config/options.c, src/viewer/dump/dump.c:

	Issue concerning call to gettext() with empty string as parameter
	was fixed.  

Tue Jan 14 11:54:01 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 13 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, bookmarks/backend/default.c,
	cookies/cookies.c, globhist/globhist.c, util/file.c, util/file.h:

	safe_fgets() was introduced. It fixes a bug in bookmarks loading and
	simplify code.  

Mon Jan 13 10:14:04 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Temporary fix for --help issue.  

Fri Jan 10 22:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/intl/gettext/loadmsgcat.c:

	Fixed compilation problems with the stpcpy() function.  

Fri Jan 10 17:50:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/default.c, config/urlhist.c,
	cookies/cookies.c, globhist/globhist.c, util/file.c:

	Fixed possible problems on systems where fgets() won't put NUL at
	the end of the string. Patch by Mikulas and me.  

Thu Jan  9 18:06:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	If file contained a NUL char, it wasn't sent completely to the
	server (occurred when uploading a file thru form). Patch by Mikulas.  

Thu Jan  9 14:09:37 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation updated. Need more work. Help welcome ;).  

Tue Jan  7 23:26:26 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Require explicit make update-po call to update the .po files
	accordingly to the source, like original gettext did (but it won't
	recreate .pot when making make dist, like original gettext did). See
	Note 3 in the source for other details.  

Tue Jan  7 23:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/lt.po,
	po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/options.c, src/sched/connection.c, src/sched/sched.c:

	Introduced document.cache.cache_redirects, which controls whether we
	should cache redirects received from server or not. By default we
	won't, which changes the current behaviour. See option description
	for details. Should fix problems with nytimes.com and other sites,
	reported by Jiang Qian <qian2@fas.harvard.edu>.  

Tue Jan  7 23:18:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.h, sched.h:

	Exported struct list_head queue (=> compilation fix).  

Tue Jan  7 19:57:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/cache.c, sched/connection.c, sched/connection.h,
	sched/sched.c, sched/sched.h:

	Moved is_entry_used() from sched/sched.* to document/cache.c and
	statified.  

Mon Jan  6 21:14:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Added support for application/xhtml+xml (just behave identically as
	with text/html) per RFC 3236.  

Sun Jan  5 16:48:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in, po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po,
	po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/main.c, src/bookmarks/dialogs.c, src/bookmarks/dialogs.h,
	src/config/dialogs.c, src/config/dialogs.h, src/config/options.c,
	src/cookies/cookies.c, src/dialogs/auth.c, src/dialogs/auth.h,
	src/dialogs/document.c, src/dialogs/document.h, src/dialogs/edit.c,
	src/dialogs/edit.h, src/dialogs/hierbox.h, src/dialogs/info.c,
	src/dialogs/info.h, src/dialogs/menu.c, src/dialogs/menu.h,
	src/dialogs/options.c, src/dialogs/options.h,
	src/dialogs/refresh.c, src/dialogs/refresh.h,
	src/document/Makefile.am, src/document/download.c,
	src/document/download.h, src/document/history.c,
	src/document/history.h, src/document/location.c,
	src/document/location.h, src/document/session.c,
	src/document/session.h, src/document/html/parser.c,
	src/document/html/parser.h, src/document/html/renderer.c,
	src/document/html/renderer.h, src/globhist/dialogs.h,
	src/lowlevel/af_unix.c, src/lowlevel/interlink.c,
	src/lowlevel/terminal.c, src/protocol/ftp.c,
	src/protocol/mailcap.c, src/protocol/url.c, src/protocol/url.h,
	src/protocol/user.c, src/protocol/user.h, src/protocol/http/auth.c,
	src/protocol/http/http.c, src/sched/Makefile.am,
	src/sched/connection.c, src/sched/download.c, src/sched/download.h,
	src/sched/history.c, src/sched/history.h, src/sched/location.c,
	src/sched/location.h, src/sched/sched.c, src/sched/session.c,
	src/sched/session.h, src/scripting/lua/core.c,
	src/scripting/lua/core.h, src/scripting/lua/hooks.c,
	src/scripting/lua/hooks.h, src/viewer/text/view.c,
	src/viewer/text/view.h, src/viewer/text/vs.c:

	src/document/download.*,location.*,history.*,session.* ->
	src/sched/.  

Sat Jan  4 22:40:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	Sync.  

Sat Jan  4 22:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Partial czech translation update.  

Sat Jan  4 21:59:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Documents -> Document.  

Sat Jan  4 21:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Newline added in description of language tree options.  

Sat Jan  4 21:27:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	connection.ssl.cert_verify gettextization fix.  

Sat Jan  4 21:11:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Removed dangerous fuzzy translation for the --version output.  

Sat Jan  4 21:01:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed listing of translated items in listbox.  

Sat Jan  4 20:57:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	Fixed off-by-one error causing random cores soon-after-startup. Make
	sure the generated filename string is null-terminated. Fixed scale
	of memory leaks.  

Sat Jan  4 20:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Jan  4 20:41:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Compilation fix by Jonas.  

Sat Jan  4 20:39:29 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Remove also *.gmo, patch by Jonas.  

Sat Jan  4 20:38:21 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Synced the .po files with the source. You've stuff to do,
	translators >:). (And me too ;-) 

Sat Jan  4 20:26:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized error messages and output of some option-commands (help,
	version, host, ...).  

Sat Jan  4 20:17:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Gettextized error messages and type help strings.  

Sat Jan  4 20:14:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Gettextized keybindings and error messages.  

Sat Jan  4 20:06:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized option descriptions.  

Sat Jan  4 17:17:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized option captions (and few first descriptions).  

Sat Jan  4 17:07:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Keybinding listbox_items are translated.  

Sat Jan  4 17:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Options listbox_items are translated.  

Sat Jan  4 17:04:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	If listbox_item.translated, call gettext on listbox_item.text when
	displaying it. Transformed listbox_item flags to a bit array.  

Sat Jan  4 17:00:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Translate the option description (non-op for translations yet).  

Sat Jan  4 16:45:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Fixed displaying of translation with non-fuzzy msgid "" (cs
	translation right now).  

Sat Jan  4 16:44:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Formatting fix.  

Sat Jan  4 15:26:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/dcigettext.c:

	Touched this file, aimed to help people fighting with the previous
	absence of dependency tracking in gettext sources (their elinks
	dumps core.. try make clean ;).  

Sat Jan  4 15:21:53 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Touched all files, so that they're rebuilt in the build tree.  

Sat Jan  4 15:19:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Build the .gmo files in the build tree, not source tree, if they
	differ. That allows us to run ELinks from the build tree directly
	without installation.  

Sat Jan  4 15:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	Minor cleanup of the hack.  

Sat Jan  4 15:08:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Introduced dependency tracking (ported from automake makefiles) 

Sat Jan  4 14:43:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	We can't use our memory/string utility functions *sniff* ;-(.  

Sat Jan  4 14:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: TODO, l10nflist.c, loadinfo.h, loadmsgcat.c:

	Look to the ELinks path + ../po/language.gmo for the translations
	aside of the install directory, enabling elinks to have correct
	translations even when being ran directly from the source tree.  

Sat Jan  4 13:46:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Some view.c line number changes. Hrmpf.  

Sat Jan  4 13:46:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: TODO, VERSION, libintl.h:

	Multiplex gettext() output terminal appropriately depending on the
	output terminal.  

Sat Jan  4 13:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Credits >:).  

Sat Jan  4 13:14:08 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Commented out .gz automatic gunzipping. Idea by witekfl ;-).  

Sat Jan  4 13:09:02 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/kbdbind.c, src/config/kbdbind.h,
	src/viewer/text/view.c:

	Introduced action toggle-numbered-links, by default bound to '.'.
	Patch by Wiktor Grebla <greblus@poczta.onet.pl>.  

Sat Jan  4 13:06:09 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	Normalized the huge strconcat() caring about the About dialog.
	Gettextized the feature names. Gettextized user_agent and
	saving_style startup warnings.  

Sat Jan  4 13:05:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jan  4 12:35:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Gettextized user_agent and saving_style startup warnings.  

Sat Jan  4 12:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed Copying dialog translation.  

Sat Jan  4 12:28:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Normalized the huge strconcat() caring about the About dialog.
	Gettextized the feature names.  

Sat Jan  4 12:20:37 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Explicitly said that you have to survive the circular dependency.  

Sat Jan  4 11:59:48 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Beautification.  

Sat Jan  4 11:53:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in, be.po, bg.po, ca.po, cs.po,
	da.po, de.po, el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po,
	hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po,
	pt_BR.po, ro.po, ru.po, sk.po, sv.po, tr.po, uk.po:

	Automatically update .po files when any of the gettextized sources
	changes. TODO: Run msgmerge only when the .pot changed.  

Sat Jan  4 11:39:24 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in, po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po,
	po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/bookmarks/backend/xbel.c:

	Gettextized some messages in bookmarks/backend/xbel.c. Based on
	Fabio's patch.  

Sat Jan  4 11:23:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	More to do.  

Sat Jan  4 11:18:57 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Polish translation update, patch by witekfl.  

Sat Jan  4 11:13:43 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Removed unused code.  

Sat Jan  4 11:06:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, el.po, fi.po, fr.po,
	gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po,
	pl.po, pt.po, pt_BR.po, ro.po, sk.po, tr.po, uk.po:

	Corrected Language-Team emails.  

Sat Jan  4 01:07:35 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, configure.in:

	Generate Makefiles in existing directories ;-).  

Sat Jan  4 01:06:59 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: .cvsignore, Makefile.am:

	Hrmpf. The suite.  

Sat Jan  4 01:05:45 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README:

	We can't get rid of this directory completely because automake will
	just give up. *sigh* 

Sat Jan  4 01:05:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/el.po:

	Another small syntax fix.  

Sat Jan  4 01:03:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Don't generate Makefiles in non-existing directories ;-).  

Sat Jan  4 01:02:05 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/gettext.m4:

	Removed useless stuff (we always use own gettext).  

Sat Jan  4 00:58:58 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/.cvsignore:

	*cough* 

Sat Jan  4 00:58:29 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, intl/Makefile.am, intl/README, intl/english.lng,
	intl/index.txt, intl/sync_vs_source.pl, intl/sync_vs_source.sh,
	intl/synclang, intl/synclang.awk:

	Removed now obsolete intl/ directory. Bye bye the old translation
	system - the last remnants should disappear with this commit.  

Sat Jan  4 00:56:58 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/icelandic.lng, intl/index.txt, po/is.po:

	Gettextized Icelandic translation. Uff.  

Sat Jan  4 00:54:43 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Fixed Armon Red's email.  

Sat Jan  4 00:53:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/finnish.lng, intl/index.txt, po/fi.po:

	Gettextized Finnish translation.  

Sat Jan  4 00:50:59 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/norwegian.lng, po/no.po:

	Gettextized Norwegian translation.  

Sat Jan  4 00:48:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.in:

	Removed fi leftover. Fixes the distclean target.  

Sat Jan  4 00:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/lithuanian.lng, po/lt.po:

	Gettextized Lithuanian translation.  

Sat Jan  4 00:44:06 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/estonian.lng, intl/index.txt, po/et.po:

	Gettextized Estonian translation.  

Sat Jan  4 00:41:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/croatian.lng, intl/index.txt, po/hr.po:

	Gettextized Croatian translation.  

Sat Jan  4 00:38:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/galician.lng, intl/index.txt, po/gl.po:

	Gettextized Galician translation.  

Sat Jan  4 00:35:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/hungarian.lng, intl/index.txt, po/hu.po:

	Gettextized Hungarian translation.  

Sat Jan  4 00:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/greek.lng, intl/index.txt, po/el.po:

	Gettextized Greek translation.  

Sat Jan  4 00:27:44 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/catalan.lng, intl/index.txt, po/ca.po:

	Gettextized Catalan translation.  

Sat Jan  4 00:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/dutch.lng, intl/index.txt, po/nl.po:

	Gettextized Dutch translation.  

Sat Jan  4 00:21:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/russian.lng, po/ru.po:

	Gettextized Russian translation.  

Sat Jan  4 00:17:57 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/swedish.lng, po/sv.po:

	Gettextized Swedish translation.  

Sat Jan  4 00:14:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/bulgarian.lng, intl/index.txt, po/bg.po:

	Gettextized Bulgarian translation.  

Sat Jan  4 00:13:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/be.po:

	"\n" inserted at copyright notice to remove msgfmt warning.  

Sat Jan  4 00:08:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Removed irrelevant commands (for gettext package). Also, libintl.h
	is not attempted to be autocreated and is not removed by make clean
	anymore. Should maybe fix bug reported by witekfl.  

Sat Jan  4 00:02:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/uk.po:

	Tried to fix error when processing uk.po. Thanks to witekfl and
	jonas for a report.  

Sat Jan  4 00:01:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/romanian.lng, po/ro.po:

	Gettextized Romanian translation.  

Fri Jan  3 23:55:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/turkish.lng, po/tr.po:

	Gettextized Turkish translation.  

Fri Jan  3 23:32:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/belarusian.lng, intl/index.txt, po/be.po:

	Gettextized Belarusian translationl.  

Fri Jan  3 23:22:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/ukrainian.lng, po/uk.po:

	Gettextized Ukrainian translation.  

Fri Jan  3 23:15:49 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/slovak.lng, po/sk.po:

	Gettextized Slovak translation.  

Fri Jan  3 22:58:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/spanish.lng, po/es.po:

	Gettextized Spanish translation.  

Fri Jan  3 22:53:14 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/brazilian_portuguese.lng, intl/index.txt,
	po/pt_BR.po:

	Gettextized Brazilian Portuguese translation.  

Fri Jan  3 22:48:17 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/portuguese.lng, po/pt.po:

	Gettextized Portuguese translation.  

Fri Jan  3 22:41:43 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/indonesian.lng, po/id.po:

	Gettextized Indonesian translation.  

Fri Jan  3 22:34:51 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/german.lng, intl/index.txt, po/de.po:

	Gettextized german translation.  

Fri Jan  3 22:27:51 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/french.lng, intl/index.txt, po/fr.po:

	Gettextized french translation.  

Fri Jan  3 22:03:35 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/danish.lng, intl/index.txt, po/da.po:

	Gettextized danish translation.  

Fri Jan  3 21:57:07 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Wrong translation for cannot edit option string fixed.  

Fri Jan  3 21:53:56 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed duplicate entry for David Mediavilla.  

Fri Jan  3 21:51:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/polish.lng, po/pl.po:

	Gettextized polish translation.  

Fri Jan  3 21:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/italian.lng, po/it.po:

	Gettextized italian translation. Some changes in the translation
	based on Fabio's patch.  

Fri Jan  3 21:38:56 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: czech.lng, index.txt:

	Removed czech translation from the old translation system.  

Fri Jan  3 21:24:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed Project-Id-Version.  

Fri Jan  3 04:26:29 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, po/cs.po:

	Tradaaa - a first translation available. Yes, it's czech (cs). More
	will appear tommorow - please don't send me patches re-adding your
	translation thru gettext (if the translation is already in the old
	format), wait until I'll add your translation and then send me
	possibly an update. Nite.  

Fri Jan  3 04:24:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	Do - -> _ when setting LANGUAGE environment variable. Changed ISO636
	code for czech from cz to cs, gettext will like it.  

Fri Jan  3 04:23:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/dcigettext.c:

	I'm happy to say that the GNU locale system is full of arcane
	undocumented and stupid extensions which break things in a strane
	way for users. Ie. if you have LANGUAGE set, but not LANG, LC_ALL
	nor LC_MESSAGES, you will get nothing - because set_locale() will
	default to "C" and the GNU people decided that they will ignore
	LANGUAGE value if any of the other variables is set to "C". Now we
	removed that GNU extension and if LANGUAGE exists, we just use it.
	Uff. Took quite a lot of debugging :-(.  

Fri Jan  3 03:43:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libgettext.h:

	Argh! I hate gettext ;-). Actually _use_ it instead of dummy
	definitions.  

Fri Jan  3 03:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	ui.language memory is not mapped to current_language anymore.  

Fri Jan  3 02:44:42 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in:

	Populated with list of sources making use of translations. Based on
	patch by Fabio. And I've elinks.pot already :P.  

Fri Jan  3 02:33:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	s/language/charset/.  

Fri Jan  3 02:29:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Fixed unused term variable warnings.  

Fri Jan  3 02:28:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	Compilation fixes (typos).  

Fri Jan  3 02:27:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Fixed missing item in include path.  

Fri Jan  3 02:24:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Call directly gettext() instead of N_().  

Fri Jan  3 02:23:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/menu.c, bfu/msgbox.c, bfu/text.c, bfu/widget.c,
	bookmarks/dialogs.c, config/dialogs.c, config/options.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/info.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/download.c,
	document/session.c, globhist/dialogs.c, scripting/lua/core.c,
	osdep/os_dep.c, protocol/url.c, protocol/user.c,
	protocol/http/auth.c, protocol/http/http.c, sched/connection.c,
	sched/sched.c, viewer/dump/dump.c, viewer/text/view.c:

	intl/language.h -> intl/gettext/libintl.h. Now the new gettext
	translation system should be activated.  

Fri Jan  3 02:22:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Removed zombie (de)initialization of the dead translation system.  

Fri Jan  3 02:17:03 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README, intl/gen-intl, src/intl/Makefile.am:

	Removed obsolete autogenerated language files rules and the gen-intl
	script.  

Fri Jan  3 02:15:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: Makefile.am, language.h:

	Removed language.h, the last source-related residuum of the old
	translations system. Welcome to the short no-translation-system
	period. Genesis 1:2: And the earth was without form, and void; and
	darkness was upon the face of the deep. And the Spirit of God moved
	upon the face of the waters.  

Fri Jan  3 02:12:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	language_iso639_code() -> language_to_iso639() 

Fri Jan  3 02:08:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/opttypes.c, dialogs/options.c:

	Use the new language<->name lookup table and interface.  

Fri Jan  3 02:08:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Introduced language<->name and language<->iso639 lookup table.
	Language is now a number.  

Fri Jan  3 02:05:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: Makefile.am, language.c:

	Removed language.c - won't be needed anymore. See you, true follower
	of sent by Mikulas, you served us good. *sniff* 

Fri Jan  3 02:04:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: libintl.c, libintl.h:

	Introduced language<->name and language<->iso639 lookup table.
	Language is now a number.  

Fri Jan  3 01:25:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, intl/gettext/Makefile.in, intl/gettext/libintl.c,
	intl/gettext/libintl.h:

	Re-enabled gettext interface. Added libintl.c. Introduced concurrent
	set_language() and current_language; also system_language.  

Fri Jan  3 01:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: intl/language.c, intl/language.h, viewer/dump/dump.c:

	get_english_translation() -> N_().  

Fri Jan  3 00:51:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Withdrawn gettext's _(),N_() declarations for now.  

Fri Jan  3 00:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/language.h:

	Tiny compilation fix - force to make use of _y_.  

Fri Jan  3 00:38:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/download.c, document/session.c,
	globhist/dialogs.c, intl/language.h, osdep/os_dep.c,
	protocol/url.c, protocol/user.c, sched/connection.c, sched/sched.c,
	scripting/lua/core.c, viewer/text/view.c:

	Use directly strings in the source instead of macros and magic
	translations system. We don't use gettext() yet. Right now, you will
	see only English around (will be fixed soon, please stand by). The
	base of the transition was generated by witekfl's script. Some
	special case manual corrections were inspired by Fabio's patch.  

Fri Jan  3 00:13:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Initialize gettext. You can already hear distant drums rolling
	(warmed up by Jonas).  

Fri Jan  3 00:04:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/document.c,
	dialogs/info.c, document/download.c, document/session.c,
	viewer/text/view.c:

	GT(N_(x),y) -> GT(x,y). Start holding your breah.  

Fri Jan  3 00:02:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/menu.c, bfu/msgbox.c, bfu/text.c, config/dialogs.c,
	dialogs/auth.c, dialogs/document.c, dialogs/info.c,
	document/download.c, document/session.c, intl/language.h,
	viewer/text/view.c:

	GT() -> _() 

Thu Jan  2 23:59:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/download.c, document/session.c,
	globhist/dialogs.c, intl/language.h, osdep/os_dep.c,
	scripting/lua/core.c, protocol/url.c, protocol/user.c,
	sched/connection.c, sched/sched.c, viewer/text/view.c:

	_() -> N_() 

Thu Jan  2 23:38:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: Makefile.in, libintl.h:

	Added interface between ELinks and gettext - libintl.h.  

Thu Jan  2 19:36:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.base, src/cookies/Makefile.am:

	Generic handling of test dependencies (src/util/). Cookie test
	building updated to use it. This also means tests are only build
	recursively when invoking 'make check' 

Thu Jan  2 18:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Dependency and compilator invocation fixes. Now gettext actually
	compiles ;-).  

Thu Jan  2 18:31:44 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/gettext.m4:

	_REALLY_ always use our own gettext implementation, never the system
	one.  

Thu Jan  2 18:31:05 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, autogen.sh:

	Put a notice at the top of acinclude.m4. Create dummy acinclude.m4
	in build tree in order to force aclocal/autoconf/... call when
	acinclude.m4 was modified (stupid automake's broken dependecies).
	Destroy acinclude.m4 upon make distclean.  

Thu Jan  2 18:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Automatically regenerate acinclude.m4.  

Thu Jan  2 18:09:42 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/gettext.m4, src/intl/gettext/TODO:

	Always use our own gettext implementation, never the system one.  

Thu Jan  2 17:57:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	intl/gettext/libintl.a -> @INTLLIBS@ 

Thu Jan  2 17:57:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Fix automatic Makefile rebuilding rule to depend on config.status
	with correct path.  

Thu Jan  2 17:56:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	Force to always use our own gettext.  

Thu Jan  2 17:52:34 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in:

	Set LOCALEDIR macro in config.h.  

Thu Jan  2 17:50:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Link ELinks against intl/gettext/libintl.a.  

Thu Jan  2 17:41:28 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Connected po/ to the build system.  

Thu Jan  2 16:31:40 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/intl/Makefile.am, src/intl/gettext/Makefile.in,
	src/intl/gettext/TODO, src/intl/gettext/VERSION,
	src/intl/gettext/bindtextdom.c, src/intl/gettext/config.charset,
	src/intl/gettext/dcgettext.c, src/intl/gettext/dcigettext.c,
	src/intl/gettext/dcngettext.c, src/intl/gettext/dgettext.c,
	src/intl/gettext/dngettext.c, src/intl/gettext/explodename.c,
	src/intl/gettext/finddomain.c, src/intl/gettext/gettext.c,
	src/intl/gettext/gettext.h, src/intl/gettext/gettextP.h,
	src/intl/gettext/hash-string.h, src/intl/gettext/intl-compat.c,
	src/intl/gettext/l10nflist.c, src/intl/gettext/libgettext.h,
	src/intl/gettext/libgnuintl.h, src/intl/gettext/loadinfo.h,
	src/intl/gettext/loadmsgcat.c, src/intl/gettext/localcharset.c,
	src/intl/gettext/locale.alias, src/intl/gettext/localealias.c,
	src/intl/gettext/ngettext.c, src/intl/gettext/plural.c,
	src/intl/gettext/plural.y, src/intl/gettext/ref-add.sin,
	src/intl/gettext/ref-del.sin, src/intl/gettext/textdomain.c:

	Gettext sources included in the ELinks source tree (and build
	system). Not used anywhere yet.  

Thu Jan  2 16:26:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/.cvsignore:

	Makefile.in shouldn't be ignored here.  

Thu Jan  2 16:24:50 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/gettext.m4:

	intl/ -> src/intl/gettext/ 

Thu Jan  2 16:17:21 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Distribute ABOUT_NLS.  

Thu Jan  2 16:10:13 2003  Petr Baudis <pasky@ucw.cz>:

	* config.guess, config.sub:

	config.guess and config.sub re-introduced. Gettext wants them.  

Thu Jan  2 16:02:44 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Added some gettext calls.  

Thu Jan  2 15:51:08 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/: codeset.m4, gettext.m4, glibc21.m4, iconv.m4, isc-posix.m4,
	lcmessage.m4, progtest.m4:

	Added gettext's m4s.  

Thu Jan  2 15:45:38 2003  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh:

	autogen.sh now also creates acinclude.m4 from m4/*.m4 and removes
	config.cache.  

Thu Jan  2 15:34:37 2003  Petr Baudis <pasky@ucw.cz>:

	* m4/.vimrc, src/intl/gettext/.cvsignore, src/intl/gettext/.vimrc:

	Added fairies.  

Thu Jan  2 15:33:49 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Distribute content of m4/.  

Thu Jan  2 15:32:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in, POTFILES.in:

	Added some base for po-files infrastructure.  

Thu Jan  2 15:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* ABOUT-NLS:

	Added gettext's ABOUT-NLS.  

Thu Jan  2 15:01:35 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed arekm's record from AUTHORS - it contained only gettext
	support, which is not used anymore and now with its reintroduction
	(completely new), it could be misleading.  

Thu Jan  2 14:34:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jan  2 12:28:45 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO, src/elusive/TODO:

	Document source colorization moved from ELinks TODO to ELusive TODO.
	Added link to ELusive TODO to ELinks TODO.  

Thu Jan  2 09:40:17 2003  Laurent Monin <zas@norz.org>:

	* TODO:

	Source colorization added.  

Thu Jan  2 05:37:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/download.c, document/session.c,
	globhist/dialogs.c, intl/language.h, osdep/os_dep.c,
	protocol/url.c, protocol/user.c, sched/connection.c, sched/sched.c,
	scripting/lua/core.c, viewer/text/view.c:

	Second step in the gettext transition - use a _() macro instead of
	the TEXT() macro. Patch by witekfl (no-hotkey updates by me).  

Thu Jan  2 05:25:12 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README, intl/belarusian.lng, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/croatian.lng,
	intl/czech.lng, intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bfu/inphist.c, src/bfu/menu.c, src/bfu/menu.h,
	src/dialogs/menu.c, src/dialogs/mime.c, src/dialogs/options.c,
	src/document/html/parser.c, src/osdep/os_dep.c, src/osdep/os_dep.h,
	src/viewer/text/view.c:

	Removed separate hotkey translations. Now hotkeys are directly in
	menu item translations, indicated by a tilde (~) preceding the
	hotkey. Should make things easier for translators, also gettext
	transition preparation step.  

Wed Jan  1 20:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: belarusian.lng, brazilian_portuguese.lng, bulgarian.lng,
	catalan.lng, croatian.lng, czech.lng, danish.lng, dutch.lng,
	english.lng, estonian.lng, finnish.lng, french.lng, galician.lng,
	german.lng, greek.lng, hungarian.lng, icelandic.lng,
	indonesian.lng, italian.lng, lithuanian.lng, norwegian.lng,
	polish.lng, portuguese.lng, romanian.lng, russian.lng, slovak.lng,
	spanish.lng, swedish.lng, turkish.lng, ukrainian.lng:

	Removed unused hotkeys.  

Wed Jan  1 20:36:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/menu.c, bfu/msgbox.c, bfu/text.c, config/dialogs.c,
	dialogs/auth.c, dialogs/document.c, dialogs/info.c,
	document/download.c, document/session.c, intl/language.h,
	viewer/text/view.c:

	_() -> GT() - first step in the gettext migration. Patch by witekfl.  

Wed Jan  1 20:30:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, dialogs/info.c, dialogs/menu.c,
	document/cache.c, document/download.c, document/download.h,
	document/history.c, document/location.h, document/session.c,
	document/session.h, lowlevel/Makefile.am, lowlevel/connect.c,
	lowlevel/connect.h, lowlevel/sched.c, lowlevel/sched.h,
	protocol/file.c, protocol/file.h, protocol/finger.c,
	protocol/finger.h, protocol/ftp.c, protocol/ftp.h, protocol/url.c,
	protocol/url.h, scripting/lua/hooks.h, protocol/http/http.c,
	protocol/http/http.h, protocol/http/https.c, protocol/http/https.h,
	sched/Makefile.am, sched/connection.c, sched/connection.h,
	sched/sched.c, sched/sched.h, ssl/connect.c, ssl/connect.h,
	viewer/dump/dump.c, viewer/dump/dump.h:

	Moved lowlevel/sched.* to sched/sched.*.  

Wed Jan  1 20:03:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: syntree.c, syntree.h, html/parser.c:

	Moved spawn_syntree_node from html/parser.c to syntree.*.  

Wed Jan  1 19:54:44 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Updated URLs for PLD's RPMs.  

Wed Jan  1 18:58:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: Makefile.am, stack.c, stack.h,
	html/parser.c:

	Moved the state stack toolkit implementation and interface from
	html/parser.c to common state.*.  

Wed Jan  1 18:19:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, config/options.c, dialogs/document.c,
	dialogs/menu.c, document/Makefile.am, document/history.c,
	document/location.h, document/session.c, document/session.h,
	document/view.c, document/view.h, document/vs.c, document/vs.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, elusive/renderer/text/renderer.c,
	lowlevel/terminal.c, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/Makefile.am, viewer/text/view.c, viewer/text/view.h,
	viewer/text/vs.c, viewer/text/vs.h:

	Moved document/view.* and document/vs.* to viewer/text/view.* and
	viewer/text/vs.*.  

Wed Jan  1 17:48:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, document/Makefile.am, document/dump.c,
	document/dump.h, document/view.c, viewer/dump/Makefile.am,
	viewer/dump/dump.c, viewer/dump/dump.h:

	Moved document/dump.* to viewer/dump/dump.*.  

Wed Jan  1 17:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Added the new dirs (sched, viewer, viewer/dump, viewer/text) to the
	build system.  

Wed Jan  1 17:40:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/Makefile.am:

	There're no real sources yet, Luke.  

Wed Jan  1 17:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/.cvsignore, sched/.vimrc, sched/Makefile.am,
	viewer/.cvsignore, viewer/.vimrc, viewer/Makefile.am,
	viewer/dump/.cvsignore, viewer/dump/.vimrc,
	viewer/dump/Makefile.am, viewer/text/.cvsignore,
	viewer/text/.vimrc, viewer/text/Makefile.am:

	Populated with fairies.  

Wed Jan  1 17:23:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/Makefile.am:

	Build updates for moving DocBook files to doc/book 

Wed Jan  1 17:18:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	Compilation fixes.  

Wed Jan  1 17:14:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/: text/renderer.c, text/renderer.h,
	renderer.h:

	Try to initialize text renderer output properly.  

Wed Jan  1 17:13:53 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/belarusian.lng:

	Belarusian translation by Yevgeny Gromov <yevgeny@tut.by>.  

Wed Jan  1 14:32:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/: renderer.c, renderer.h:

	Introduced renderer_state.input, containing input data from the
	viewer (ie. terminal specification).  

Wed Jan  1 14:28:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/text/renderer.c:

	text_layout -> text_render, include document/html/rednerer.h for
	now.  

Wed Jan  1 14:01:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Added else to clarify things a little. Doesn't matter factually.
	Thanks, Miciah.  

Wed Jan  1 01:58:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Show (it's togglable) human-readable captions of keybindings and
	keymaps in the keybinding manager. Patch by Jonas Fonseca and me.  

Wed Jan  1 01:26:55 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/german.lng:

	German translation update (huge ;) by Josef 'Jupp' Schugt
	<jupp@gmx.de>.  

Wed Jan  1 01:21:45 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/index.txt:

	Belarusian translation by Yevgeny Gromov <yevgeny@tut.by>.  

Wed Jan  1 01:21:01 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/belarusian.lng:

	file belarusian.lng was initially added on branch REL_0_4.  

Wed Jan  1 01:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, english.lng,
	estonian.lng, finnish.lng, french.lng, galician.lng, german.lng,
	greek.lng, hungarian.lng, icelandic.lng, indonesian.lng,
	italian.lng, lithuanian.lng, norwegian.lng, polish.lng,
	portuguese.lng, romanian.lng, slovak.lng, spanish.lng, swedish.lng,
	turkish.lng:

	Copyright notice updates. Mainly 2002 -> 2003 in my line, but some
	other tiny corrections in some translations.  

Wed Jan  1 01:01:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/http/http.c:

	Here is a patch for elinks (cvs version) ot make it more POSIX 
	compliant.  src/protocol/http/http.c uses PIPE_BUF without including 
	limits.h.  This breaks compilation with the diet libc 
	(http://www.fefe.de/dietlibc/).  
	
	Patch by Felix von Leitner.  

Wed Jan  1 00:52:30 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng:

	Partial spanish translation update by David Mediavilla.  

Wed Jan  1 00:51:14 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated David Mediavilla's email addy.  

Tue Dec 31 17:13:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/layouter.c:

	snprintf() requires stdio.h. Thanks, Jonas.  

Tue Dec 31 10:36:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Some return values checking and cleanup. Patch by zas and me.  

Tue Dec 31 10:32:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Use standard add_attrib() instead of own attrib_add().  

Tue Dec 31 01:50:55 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/.cvsignore:

	Added tiny fairie.  

Tue Dec 31 01:50:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: Makefile.am, syntree/Makefile.am:

	Build ELusive layouter.  

Tue Dec 31 01:49:39 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/elusive/Makefile.am,
	src/elusive/renderer/Makefile.am,
	src/elusive/renderer/text/Makefile.am:

	Added ELusive renderer to the build system.  

Tue Dec 31 01:48:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/renderer.c:

	Compilation fix. I just keep forgetting doing this.  

Tue Dec 31 01:44:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/: renderer.c, text/renderer.c,
	text/renderer.h:

	Dummy support for the text renderer - just some basements, nothing
	real.  

Tue Dec 31 01:37:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/renderer/: renderer.c, renderer.h:

	Generic renderer interface.  

Tue Dec 31 01:25:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/layouter.c:

	Added callback structure for syntree layouter.  

Tue Dec 31 01:16:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/TODO:

	Independence on ELinks considerations.  

Tue Dec 31 01:08:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Shit.  

Tue Dec 31 01:07:28 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/elusive/Makefile.am:

	Build ELusive layouter.  

Tue Dec 31 01:07:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/TODO:

	Updated record for syntree layouter.  

Tue Dec 31 00:48:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: layouter.h, rectangle.c,
	syntree/layouter.c:

	Bunch of misc compilation fixes.  

Tue Dec 31 00:30:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/rectangle.h:

	Oops. layout_rectangle.leafs is obviously struct list_head.  

Tue Dec 31 00:30:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/attrib.c:

	Typo fix.  

Tue Dec 31 00:06:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/layouter.c:

	The container rectangles have display:block.  

Mon Dec 30 23:57:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/rectangle.c, parser/syntree.c:

	Use memacpy() in get_*_attrib(). Idea by zas.  

Mon Dec 30 23:55:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: attrib.c, attrib.h:

	Introduced add_attrib().  

Mon Dec 30 23:51:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/syntree/: layouter.c, layouter.h:

	Basic syntree layouter.  

Mon Dec 30 18:15:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: layouter.c, layouter.h:

	Renaming fixes. Allow user to supply parsing engine to be used by
	the layouter.  

Mon Dec 30 18:04:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/layouter.c, layouter/rectangle.c,
	parser/html/parser.c:

	Fixed file headers.  

Mon Dec 30 17:58:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: layouter.c, layouter.h, rectangle.h:

	Added generic layouter interface.  

Mon Dec 30 17:49:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, html/parser.c, html/parser.h:

	html_backend -> html_parser_backend 

Mon Dec 30 17:01:03 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/Makefile.am:

	Generic header added.  

Mon Dec 30 16:47:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/DESIGN:

	Notice about independence on terminal size.  

Mon Dec 30 16:42:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, parser.h:

	elusive_*() -> elusive_parser_*(), obviously.  

Mon Dec 30 16:34:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: layouter/.cvsignore, layouter/.vimrc,
	layouter/syntree/.cvsignore, layouter/syntree/.vimrc,
	renderer/.cvsignore, renderer/.vimrc, renderer/text/.cvsignore,
	renderer/text/.vimrc:

	Added fairies.  

Mon Dec 30 16:30:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/layouter/: rectangle.c, rectangle.h:

	struct layout_rectangle definition and utility functions.  

Mon Dec 30 16:14:45 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, book/Makefile.am:

	Fixes for last commit: rename all -> alldocs in
	doc/manual/Makefile.am and typo in doc/Makefile.am 

Mon Dec 30 15:57:00 2002  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in, doc/Makefile.am, doc/book/Makefile.am:

	Manual added to build system. Small fixes when doing html doc
	building so css is only installed when docs where succesfully made.  

Mon Dec 30 15:51:23 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: authors.xml, bookmarks.xml, configuration.xml,
	fdl.xml, installation.xml, introduction.xml, mailcap.xml,
	manual.xml, mime.xml, misc.xml, preface.xml, revision.xml,
	sample-configfile.xml, wordlist.xml:

	<?xml version="1.0" encoding="ISO-8859-1"?> added to all files.
	Fixes xmlto encoding errors. We should investigate using UTF-8 and
	character entities instead. Also moving own defined entities up
	before include entities. This fixes internal links when using xmlto.  

Mon Dec 30 15:05:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: README, TODO, DESIGN:

	Moved structure description to the DESIGN file.  

Mon Dec 30 14:23:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: README, TODO:

	Moved the TODO list to the TODO file, restructured and elaborated.  

Mon Dec 30 14:22:46 2002  Laurent Monin <zas@norz.org>:

	* src/elusive/parser/parser.c:

	Minor simplification.  

Mon Dec 30 13:55:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/README:

	Removed legacy cruft.  

Mon Dec 30 12:44:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Fixed spawning of thousands of scary zero-length text fragments.  

Mon Dec 30 03:51:43 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, TODO, authors.xml, bookmarks.xml,
	configuration.xml, fdl.xml, installation.xml, introduction.xml,
	mailcap.xml, manual.xml, mime.xml, misc.xml, options-reference.xml,
	sample-configfile.xml, sample-configuration.xml, style.css,
	wordlist.xml:

	Last files added. Made some codingstyle updates. Guidelines needs to
	be written. CSS need to be rewritten. Use wordlist.xml for
	references to acronym and explanations.  

Mon Dec 30 02:56:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Fixed tags closing hiearchy corrections.  

Mon Dec 30 02:43:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Fixed matching of opening tag when parsing the closing one.  

Mon Dec 30 02:39:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Fixed double attribute records in node->attrs. Fixed parsing of
	"attrname= value" snippets.  

Mon Dec 30 02:27:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Tiny fix of attribute value reading logic.  

Mon Dec 30 02:21:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Some utility debug stuff (commented out). Fixed parsing of closing
	tags.  

Mon Dec 30 02:04:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, parser.h, html/parser.c:

	parser -> init,parse,done transformation for the parser functions.
	Added real_root and parser (enum parser_backend_type) items to the
	parser_state. Some memory (de)allocation moved/added to the
	init/done functions.  

Mon Dec 30 01:09:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/syntree.c:

	Fixed invalid node->str free()ing logic.  

Mon Dec 30 01:08:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Infinite loop while parsing fixes.  

Sun Dec 29 17:40:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Changed order of the parser functions to be in the correct... order
	:).  

Sun Dec 29 17:36:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Fixed early infinite loop.  

Sun Dec 29 17:26:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/parser.c:

	Call parser only if str and len is non-NULL.  

Sun Dec 29 14:42:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: syntree.c, syntree.h:

	Introduced done_syntree_node().  

Sun Dec 29 13:40:28 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/elusive/Makefile.am,
	src/elusive/parser/Makefile.am,
	src/elusive/parser/html/Makefile.am:

	Added ELusive compilation to the general infrastructure.  

Sun Dec 29 13:39:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, syntree.c, html/parser.c,
	html/parser.h:

	Compilation fixes.  

Sun Dec 29 13:22:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/parser.c:

	html_parser added.  

Sun Dec 29 12:42:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	HPT_TAG_ATTR_VAL parser. Random tiny fixes.  

Sun Dec 29 12:18:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	HPT_TAG_ATTR parser. Some minor updates. Legacy cruft destroyed.  

Sun Dec 29 11:30:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	HPT_TAG_NAME parser. Random fixes.  

Sun Dec 29 10:57:29 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, sample-configuration.xml, style.css:

		Various manual tilities.  

Sun Dec 29 10:53:33 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: TODO, VERSION, bookmarks.xml, configuration.xml,
	fdl.xml, mailcap.xml, misc.xml, preface.xml, revision.xml:

	The first few chapters. More to come.  

Sat Dec 28 19:49:20 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: README, TODO:

	A small step for the manual a big step for ELinks documentation. ;) 

Sat Dec 28 02:20:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/syntree.c:

	Properly initialize lists in init_syntree_node().  

Fri Dec 27 23:58:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	HPT_TAG_WHITE parser.  

Fri Dec 27 23:49:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Comments parser.  

Fri Dec 27 22:37:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	It's HPT, not HTP. Look, I already forgot what the HPT means... HTML
	Parser <Something>, I suppose ;)).  

Fri Dec 27 22:32:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Activate on-< switch to HTP_TAG in the HTP_PLAIN parser.  

Fri Dec 27 22:31:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	html_state_insert -> html_state_push, html_state_remove ->
	html_state_pop 

Fri Dec 27 22:29:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	spawn_syntree_node() introduced (and duplicate code scorched). Fixed
	the data union, updated comments, written the parser states scheme.
	And introduced HPT_TAG and appropriate parser (handles the start and
	the end of the tag and switches states properly).  

Fri Dec 27 17:52:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	The HTML parser state now forms a stack, where states are being
	inserted and removed. Much better now, it is.  

Fri Dec 27 14:59:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/: parser.c, parser.h:

	Very rough bones of the HTML parser - just a draft of the state
	machine and plain+entity parsing. And I'm going to rework it right
	after the commit ;-).  

Fri Dec 27 02:23:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/syntree.h:

	Merged name,namelen and src,srclen to str,strlen and forked out src.
	Now it all looks much saner.  

Fri Dec 27 01:19:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, parser.h, syntree.c, syntree.h:

	init_syntree_node() now doesn't take the root as a parameter
	anymore. Comment improvements.  

Fri Dec 27 00:01:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, parser.h:

	Introduced struct parser_state, which is now passed to
	elusive_parser() instead of the root node itself.  

Thu Dec 26 23:58:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: syntree.c, syntree.h:

	Introduced init_syntree_node() routine.  

Thu Dec 26 21:47:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, dialogs/mime.c, lowlevel/kbd.c, lowlevel/sched.c,
	lowlevel/select.c, lowlevel/terminal.c, protocol/file.c,
	protocol/http/http.c:

	Some more destatification ;-).  

Thu Dec 26 21:26:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Massive HTTP uncompression routine rewrite, patch by witekfl,
	polished and slightly extended by me. This should hopefully fix
	number of arcane uncompression bugs.  

Thu Dec 26 18:04:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Hmm, that open_encoded() move didn't work out.  

Thu Dec 26 12:26:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Use PIPE_BUF instead of 4096. I hope PIPE_BUF is everywhere ;-).  

Thu Dec 26 12:20:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Moved encoded stream initialization before the loop - this could fix
	some weird bugs when reading compressed pages.  

Thu Dec 26 03:11:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed unintentional aborting of some downloads - now abort really
	only when pressing the abort button.  

Thu Dec 26 03:06:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: download.c, history.c, session.c, view.c,
	html/parser.c, html/renderer.c, html/tables.c:

	Removed some nonsense inlines.  

Thu Dec 26 02:46:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: parser.c, parser.h:

	Added a primitive parser multiplexer.  

Thu Dec 26 02:31:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: attrib.h, syntree.c:

	Removed space for cached real values from struct attribute.  

Thu Dec 26 02:29:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: syntree.c, syntree.h:

	Added get_syntree_attrib().  

Wed Dec 25 00:30:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/parser.h:

	Some very basic parser interface.  

Wed Dec 25 00:18:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/syntree.h:

	When syntree_node.name is NULL, it's a text.  

Wed Dec 25 00:15:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: attrib.c, attrib.h:

	Added get_attrib() function.  

Wed Dec 25 00:10:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/: css/.cvsignore, css/.vimrc, dtd/.cvsignore,
	dtd/.vimrc, html/.cvsignore, html/.vimrc:

	Fairies following.  

Wed Dec 25 00:09:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/attrib.h:

	Add some basic attribute description.  

Tue Dec 24 23:54:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/syntree.h:

	Added proposed definition of one syntax tree node.  

Tue Dec 24 23:33:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/: .cvsignore, .vimrc, parser/.cvsignore,
	parser/.vimrc:

	Added some fairies.  

Tue Dec 24 13:38:56 2002  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.conf.5:

	Small fix in EXAMPLES. < and > should not be 'escaped'.  

Tue Dec 24 10:33:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/mime.c:

	Fixed one little memory leak. Was almost unnoticable hopefully.  

Tue Dec 24 09:52:24 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Downloads resuming support.  

Tue Dec 24 01:39:48 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/polish.lng:

	Polish translation update (partial) by Jakub Bogusz.  

Tue Dec 24 01:28:41 2002  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, elinks.1, elinks.conf.5, elinkskeys.5.in:

	Added elinks.conf man page and references to it. Also a small update
	to elinks man page with descriptions of --long-help and
	--config-help.  

Tue Dec 24 00:26:40 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Also print descriptions for option trees when doing --config-help.  

Tue Dec 24 00:23:51 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/download.c:

	Just another links -> einks change.  

Tue Dec 24 00:18:14 2002  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.conf.5:

	file elinks.conf.5 was initially added on branch REL_0_4.  

Tue Dec 24 00:05:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, document/download.h, document/view.c,
	util/file.c:

	Let expand_tilde() and get_unique_name() always return newly
	allocated string => let create_download_file() return real file name
	=> use that file name as down->file => fix a bug with timestamps not
	being set properly on the downloaded files reported by Peter Wang
	plus a handful of similiar hidden bugs.  

Mon Dec 23 21:36:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Attempt to fix cygwin compilation failure.  

Sun Dec 22 18:14:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/TODO, elusive/README:

	Moved most of the stuff from document/html/TODO to elusive/README,
	extended and fixed.  

Sun Dec 22 17:54:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	New "allow dark colors on black background" implementation,
	re-implementing support for other backgrounds as well. Please
	comment and improve, maybe all the choices aren't best, and a lot of
	them aren't certainly what are you used to.  

Sun Dec 22 16:34:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Fixed color table comment ;-).  

Sun Dec 22 16:29:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Add folders at the _bottom_ of the list, not at the top. Also move
	box->sel properly to the newly added folder/bookmark. Fixes problem
	reported by <muehlenhoff@gmx.de>.  

Sun Dec 22 14:32:18 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/bulgarian.lng:

	Bulgarian translation update.  

Sun Dec 22 11:47:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed selecting of the first listbox item by mouse, reported by
	Jonas. When you click at that +/- thing, the folder is (un)expanded.
	Idea by Jonas and Links-2.x people.  

Sun Dec 22 10:23:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Some of my experiments with bgcolor approximation adjusting saved
	for further reference (commented out) 

Sun Dec 22 09:52:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Agitation.  

Sun Dec 22 09:47:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, tables.c:

	More table cells bgcolors rendering fixes, we get rid of a lot of
	the color stains. But we won't get rid of some of them and this is
	probably not going to change anymore, since this would probably
	require a big rewrite :-( - so that one will come with the new html
	engine already.  

Sun Dec 22 00:05:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Oops - this leaked from the previous commit.  

Sun Dec 22 00:04:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser.h, renderer.c, renderer.h:

	Fixes in support for taking of background colors from the document.
	Now we should be almost perfect in this area, preventing a lot of
	black stains all around. Note that there's still a problem with cell
	colors leaking all around and too bright colors on white background
	(will fix these tommorow). Obviously this changes are visible only
	if you set document.colors.use_document_colors = 2 (it'll be default
	after the previously mentioned issues will be fixed). Have fun - I
	think with these changes, a lot of sites start to look damn cool
	with ELinks! :-) 

Sat Dec 21 22:26:25 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/polish.lng:

	Polish translation update, patch by witekfl.  

Sat Dec 21 20:52:40 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Alloc failures test, minor optim. tidy up.  

Sat Dec 21 20:21:07 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Minor fix: stracpy(NULL) call.  

Sat Dec 21 19:58:20 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Minor tidyup.  

Sat Dec 21 19:47:11 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Static + inline + minor things.  

Sat Dec 21 19:22:42 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	char -> unsigned char.  

Sat Dec 21 19:19:56 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Static + inline + tidy up + unsigned char + alloc tests + minor
	stuff.  

Sat Dec 21 19:00:41 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: mime.c, mime.h:

	Static + inline.  

Sat Dec 21 18:51:22 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Tidy up. One very-low-risk buffer overflow and one potential memleak
	were fixed. Bit fields were replaced by int type, since bit fields
	are not fully portable. Many minor optimizations.  

Sat Dec 21 18:05:55 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Minor staticfication.  

Sat Dec 21 18:03:21 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/file.c:

	Static + inline + tidy up.  

Sat Dec 21 17:00:21 2002  Jonas Fonseca <fonseca@diku.dk>:

	* intl/danish.lng:

	Minor danish update.  

Sat Dec 21 13:23:16 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, opttypes.c:

	Added option --config-help which is mostly intended for generating
	docs about the configuration options. The *-help printing has
	somewhat been made more generic. This includes pretty printing where
	several command line args can 'share' the same caption/description.
	Changed description of deprecated options to 'scare' users from
	using it.  

Sat Dec 21 02:59:22 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/portuguese.lng:

	Portuguese translation updates, patch by Andre.  

Sat Dec 21 02:56:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c:

	Night of hacking output: full support for user-specified background,
	instead of the bastardized unusable thing we had before; that should
	make some people happy. And it wasn't that simple as I supposed :-(.
	Also introduced some support for taking background color from the
	document, but it's weird yet (I'm forgetting to update something, I
	suspect) - I will investigate that later. Just keep
	document.colors.use_document_colors at 1 and you should be safe. But
	it looks damn cool anyway, maybe I'll change the default to follow
	document's background as well when it'll be done and ready ;-).  

Sat Dec 21 01:06:17 2002  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Readibility was improved (i hope).  

Fri Dec 20 23:31:47 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/options.c, src/dialogs/options.c,
	src/lowlevel/terminal.c:

	Transparency support (ie. transparent xterms or xterms with
	background colors (ok, not exactly xterms, but you get the idea ;)),
	patch by Tom Lear <tom@trap.mtview.ca.us>.  

Fri Dec 20 23:11:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, config/options.c,
	dialogs/options.c:

	Terminal options changed in their dialog are now properly marked as
	touched and thus properly saved with config.saving_style=3. Added
	Save button to the terminal options dialog. Thanks to Alexey Tourbin
	<at@turbinal.org> for the initial impulse ;-).  

Fri Dec 20 22:14:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed possible problem with NULL stracpy() when trying to
	download-image, reported by Jonas.  

Fri Dec 20 21:58:30 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/bm-to-elinks-bookmarks.lua:

	Lua script to convert Lua's bookmarks to ELinks' file format,
	contributed by Peter Wang.  

Fri Dec 20 21:58:16 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/bm-to-elinks-bookmarks.lua:

	file bm-to-elinks-bookmarks.lua was initially added on branch
	REL_0_4.  

Fri Dec 20 21:52:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Don't show *lua-function* binding in the manager. Thanks Peter Wang
	for the idea.  

Fri Dec 20 21:46:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h:

	Fixed problem with empty action bind commands being written when
	keybinding is removed (reported by Peter Wang).  

Fri Dec 20 17:39:59 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/: czech.lng, english.lng:

	Attempt to clarify error messages triggered by attempts to edit
	non-(options,keybindings). Might be helpful if you don't know that
	space unrolls the tree.  

Fri Dec 20 16:09:15 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	A memleak introduced by last patch was fixed. Triggered by Bookmarks
	file format option 1 -> 0.  

Fri Dec 20 15:26:28 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/: bookmarks.c, backend/default.c, backend/xbel.c:

	Fixes and cleanup. Fabio please verify that stuff.  

Fri Dec 20 10:40:23 2002  Laurent Monin <zas@norz.org>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, estonian.lng,
	finnish.lng, galician.lng, german.lng, greek.lng, hungarian.lng,
	icelandic.lng, indonesian.lng, italian.lng, lithuanian.lng,
	norwegian.lng, polish.lng, portuguese.lng, romanian.lng,
	russian.lng, slovak.lng, spanish.lng, swedish.lng, turkish.lng,
	ukrainian.lng:

	Ooops ;) 

Fri Dec 20 09:15:01 2002  Laurent Monin <zas@norz.org>:

	* intl/english.lng, intl/french.lng, src/dialogs/menu.c:

	Some translations were fixed and updated. T_HK_KEYBINDING_MANAGER
	was introduced.  

Thu Dec 19 15:35:45 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/elinks.spec.in:

	Updated RPM's contrib/elinks.spec (fixed documentation including),
	patch by Bennett Todd <bet@rahul.net>.  

Thu Dec 19 15:33:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Move the cursor to the active listbox item; makes things much easier
	for blind users, idea by Dave Mielke <dave@mielke.cc>.  

Thu Dec 19 12:17:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/croatian.lng,
	intl/czech.lng, intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c:

	Ignore OPT_ALIAS when traversing a tree when writing stuff (I mean,
	configuration ;) to disk. Fixes "set config_saving_style = " bug
	reported by Jonas.  

Thu Dec 19 09:36:59 2002  Jonas Fonseca <fonseca@diku.dk>:

	* intl/danish.lng:

	Translation for new keybinding and option manager messages.  

Wed Dec 18 22:54:07 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre0.CVS ;p 

Wed Dec 18 21:48:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Added some tiny notice about stat->data and non-zero start and
	struct download mess ;-).  

Wed Dec 18 21:30:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Fixed yet another bug causing random segfaults (if no-caching is
	allowed and conditions are really weird ;). Patch by witekfl.  

Wed Dec 18 21:23:31 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed stale TODO item, thanks Jonas.  

Wed Dec 18 21:23:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Options improvements ported from REL_0_4 (massive fixes of
	descriptions/captions, show captions in bookmarks manager).  

Wed Dec 18 16:31:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Fixed memory leak upon Lua error.  

Wed Dec 18 16:30:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Try to fix not caching stuff rewritten by lua.  

Wed Dec 18 16:25:09 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, config/urlhist.c, config/urlhist.h:

	We now only save history if modified (history_dirty mecanism).  

Wed Dec 18 16:17:02 2002  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, config/urlhist.h, bfu/inphist.c:

	We now only save history if modified (history_dirty mecanism).  

Wed Dec 18 15:30:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c, opttypes.c:

	Initialize capt and change_hook properly for autocreated options.
	Fixes subtle bug causing segfault when we modify autocreated option
	(reported by Jose). Also fixed hidden bug in tree_add()'s box_item
	condition.  

Wed Dec 18 13:51:13 2002  Laurent Monin <zas@norz.org>:

	* src/util/memdebug.c:

	A new memory debugger optionnal feature: log all (de-)allocations to
	stderr (huge and slow). Define LOG_MEMORY_ALLOC to try it.  

Wed Dec 18 12:07:07 2002  Laurent Monin <zas@norz.org>:

	* src/globhist/: globhist.c, globhist.h:

	We now saved globhist only when needed (through globhist_dirty
	mecanism). Staticfication.  

Wed Dec 18 11:55:46 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Ooops, COOKIES_DEBUG is now undefined ;).  

Wed Dec 18 11:35:05 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Cookies are now saved only if some change occured (cookies_dirty).  

Wed Dec 18 10:52:21 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Inline some small functions.  

Wed Dec 18 00:38:58 2002  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Static + inline.  

Tue Dec 17 23:58:43 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/dialogs/document.c:

	Show a message in header info box if there's no header info to show
	instead of an empty box. Translations++.  

Tue Dec 17 23:26:09 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated and fixed.  

Tue Dec 17 23:09:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Fixed problem with rendering of tables with slightly malformed HTML
	code (ie. google's labs sets problem reported by Jose).  

Tue Dec 17 21:45:42 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS, TODO:

	Removed some stale TODO items.  

Tue Dec 17 21:41:11 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre0 

