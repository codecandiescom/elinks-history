Sat Apr 17 18:56:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h:

	Remove unused member submitted_value->file_content.  

Sat Apr 17 18:06:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listmenu.c, menu.h:

	Introduce FREE_RECURSIVE_DATA and make free_menu() check the flags.  

Sat Apr 17 18:01:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use new_menu() and add_to_menu(). There are
	probably some issues with the fact that allocation failure in
	add_to_menu() will result in leak and add_to_menu() enables hotkeys
	I think.  

Sat Apr 17 17:52:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Decrease indentation by returning if data != -1 and
	stack size is zero.  

Sat Apr 17 17:49:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Group data == -1 code and improve error handling.  

Sat Apr 17 17:04:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/optgroup.html:

	Add test for <optgroup> handling.  

Sat Apr 17 16:26:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c, viewer/text/link.c:

	add_separator_to_menu() -> add_menu_separator().  

Sat Apr 17 15:35:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	count_menu_size(): Use foreach_menu_item().  

Sat Apr 17 15:11:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use @size for updating @item after reallocation of
	top.  

Sat Apr 17 14:54:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Kill line.  

Sat Apr 17 14:50:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use foreach_menu_item() to make code look more
	normal.  

Sat Apr 17 14:37:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	do_select_submenu(): Get rid of goto by asigning @sel if
	menu_contains() the item.  

Sat Apr 17 14:35:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	do_select_submenu(): Use int_min() for @def < 0.  

Sat Apr 17 14:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Apparently menu_labels() is the only place this MENU_FULLNAME flag
	is used and it only actually means anything for ordinary items and
	not submenu items.  

Sat Apr 17 14:20:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	menu_labels(): Cleanup base label allocation.  

Sat Apr 17 14:17:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	menu_labels(): Rename m -> item. We should consider what name to use
	for menu_item through out the code.  

Sat Apr 17 14:15:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	More foreach_menu_item usage.  

Sat Apr 17 14:14:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: menu.c, menu.h:

	Introduce foreach_menu_item iterator.  

Sat Apr 17 11:58:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hotkey.c, menu.c, menu.h:

	Ni wtf is ni ;) ahh it is the number of items. Renamed menu->ni to
	menu->size for shortness and descriptive value.  

Sat Apr 17 11:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hotkey.c, hotkey.h, menu.c, menu.h:

	Blast menu_head.  

Sat Apr 17 11:47:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use select_menu() and remove select_mainmenu().  

Sat Apr 17 11:39:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: menu.c, menu.h:

	Add struct mainmenu member to struct menu. The little extra added
	memory usage is on temporary dialog code. Now we can remove some of
	that stupid code duplication and it will be needed anyway when we
	introduce tabs for dialogs.  

Sat Apr 17 11:36:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Warn about mem_free_*if() possibly obfuscating their users.  

Sat Apr 17 11:34:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Always set freed pointer to NULL, as was discussed on #elinks.  

Sat Apr 17 11:28:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	struct main_menu's sp member is only asigned to which much mean it
	is bloat of the evil kind.  

Sat Apr 17 11:19:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Handle name is NULL case up front.  

Sat Apr 17 03:07:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Doh. realloc_event() off by one error :|.  

Sat Apr 17 02:48:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Fix mem_free_set_if_leak_debug() bug. We test @name right after so
	it should not be cleared.  

Sat Apr 17 02:39:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/text.c, document/docdata.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, sched/event.c, util/memory.h,
	util/string.h, viewer/text/form.c, viewer/text/search.c,
	viewer/text/textarea.c:

	Make the mem_align_alloc() macro apply the sizeof() to the object.  

Sat Apr 17 02:20:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h:

	Describe this little piece of code.  

Sat Apr 17 02:09:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, osdep/newwin.c, osdep/newwin.h,
	util/memory.h:

	This is a good example of how abstractions can make code harder to
	work with. Expose _const_ open_in_new so no copy allocation is
	needed. It is just another example of my if-it-works-$(do)-it-anyway
	where $(do) could be try-to or even play-with.  

Sat Apr 17 01:52:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	oinw -> open_in_new.  

Sat Apr 17 01:37:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Make them open_in_new data static.  

Sat Apr 17 01:35:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	open_new_window(): Inline exec_new_elinks().  

Sat Apr 17 01:30:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h, beos/beos.c, os2/os2.c,
	win32/win32.c:

	Centralize all them open in new functions by putting the default
	command in the open_in_new structure.  

Sat Apr 17 01:19:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Let the code breathe a bit.  

Sat Apr 17 01:13:15 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	When LEAK_DEBUG is defined, mem_free_if(p) set p to NULL after
	freeing it. This will cause some issues ;).  

Sat Apr 17 01:10:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, osdep/newwin.c,
	osdep/newwin.h, sched/session.c:

	Don't pass callbacks around but term_env_type for open in new window
	functions.  

Fri Apr 16 23:39:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	do_action() was moved so include obsolete.  

Fri Apr 16 17:41:01 2004  Karsten Schölzel <kuser@gmx.de>:

	* src/protocol/uri.c:

	Fix a bug in normalize_uri triggered if you enter
	"javascript:gourl('../../../');" as new url.  

Fri Apr 16 16:36:59 2004  Laurent Monin <zas@norz.org>:

	* src/: terminal/kbd.c, terminal/screen.c, terminal/tab.c,
	terminal/terminal.c, terminal/window.c, mime/dialogs.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c,
	scripting/lua/core.c, formhist/formhist.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:33:27 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, globhist/dialogs.c, globhist/globhist.c,
	lowlevel/connect.c, lowlevel/dns.c, lowlevel/home.c,
	lowlevel/interlink.c, protocol/proxy.c, protocol/uri.c,
	protocol/user.c, protocol/auth/auth.c, protocol/file/file.c,
	protocol/http/codes.c, protocol/http/http.c, sched/connection.c,
	sched/download.c, sched/event.c, sched/history.c, sched/session.c,
	sched/task.c, ssl/connect.c, util/fastfind.c, util/file.c,
	util/secsave.c, viewer/dump/dump.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/vs.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:29:58 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listmenu.c, bfu/menu.c,
	bfu/style.c, bookmarks/bookmarks.c, bookmarks/dialogs.c,
	bookmarks/backend/xbel.c, config/cmdline.c, config/dialogs.c,
	config/options.c, cookies/cookies.c, cookies/dialogs.c,
	dialogs/info.c, dialogs/status.c, document/document.c,
	document/css/stylesheet.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:27:01 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	mem_free_if_set() -> mem_free_set_if(), idea by Pasky.  

Fri Apr 16 16:26:39 2004  Karsten Schölzel <kuser@gmx.de>:

	* src/: document/html/parser.c, viewer/text/search.c:

	Compile fix.  

Fri Apr 16 16:16:43 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	mem_free_if(pointer) and mem_free_if_set(pointer, newpointer) were
	introduced.  

Fri Apr 16 11:10:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor simplification: use memacpy() instead of mem_alloc() +
	sprintf().  

Fri Apr 16 10:16:53 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	A minor compilation warning was fixed, using explicit type casting.  

Fri Apr 16 10:09:43 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, sched/session.c, sched/task.c:

	Trailing whitespaces were removed.  

Fri Apr 16 10:02:06 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/inphist.c, bfu/listbox.c, bfu/text.c, bfu/widget.c,
	bookmarks/backend/default.c, config/kbdbind.c, config/opttypes.c,
	dialogs/download.c, dialogs/menu.c, dialogs/options.c,
	dialogs/status.c, osdep/getifaddrs.c, protocol/http/http.c,
	sched/session.c, util/scanner.c, util/snprintf.c,
	viewer/text/form.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Include util/math.h where it is needed (last bits).  

Fri Apr 16 09:44:12 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.h, bfu/menu.c, document/refresh.c,
	document/css/scanner.c, document/css/value.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c,
	document/plain/renderer.c, protocol/auth/auth.c, sched/event.c,
	terminal/draw.c, terminal/screen.h, viewer/text/link.c,
	viewer/text/vs.c:

	Include util/math.h where it is needed.  

Fri Apr 16 09:42:13 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, util/Makefile.am, util/math.h:

	int_bounds() family was moved to new util/math.h.  

Fri Apr 16 09:23:40 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/: core.c, hooks.c:

	Perl scripting module compilation issues were fixed.  

Fri Apr 16 09:20:52 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, osdep/generic.h:

	Include system headers before redefining macros, it fixes some
	compilation failures on some systems.  

Thu Apr 15 17:30:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Fix assertion failure.  

Thu Apr 15 16:57:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Make everybody use open_url_in_new_window() as backend.  

Thu Apr 15 16:44:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/link.c:

	Hmm try to centralize newwin.h usage a bit more.  

Thu Apr 15 16:32:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/link.c,
	viewer/text/view.c, viewer/text/view.h:

	Move all the nice open in new window code.  

Thu Apr 15 16:16:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, viewer/text/view.c, viewer/text/view.h:

	Fully support the -remote 'openurl(..., new-win)' thing.  

Thu Apr 15 16:13:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Damn zas was right. I did break something :(.  

Thu Apr 15 15:35:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	foreach_oinw(): Everything to save a line of code. ;) .. fix bug
	from last patch.  

Thu Apr 15 15:28:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h:

	Gross memory waste by adding term_env_type to open_in_new struct.
	But it simplifies a lot.  

Thu Apr 15 15:25:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/newwin.c, osdep/newwin.h, viewer/text/view.c:

	get_open_in_new(): Take term arg and do one allocation by getting
	size from can_open_in_new().  

Thu Apr 15 14:58:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	can_open_in_new(): No need to allocate when a simple loop will do.  

Thu Apr 15 14:31:25 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Make debugging code more obviously separated from true code, got rid
	of awful and misleading accif() macro, all debuggung macros are now
	prefixed with FF_DBG_. It improves readibility of non-debugging
	code.  

Thu Apr 15 14:27:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/default.c, osdep/osdep.c, protocol/user.c:

	get_system_str(): Return static string and shrink using code.  

Thu Apr 15 14:21:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	get_user_program(): Use temp instead of wrapping funny code.  

Thu Apr 15 09:29:40 2004  Laurent Monin <zas@norz.org>:

	* NEWS:

	New options -remote and -ping were added.  

Thu Apr 15 09:18:57 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Apr 15 08:32:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Whoops bug in binary flag.  

Thu Apr 15 08:28:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, sched/session.c, sched/session.h:

	-remote-session was replaced by lazy mozilla compliant -remote
	handling. elinks -remote <urls> will just open <urls> in new
	backgrounded tabs and elinks -remote openURL(<url>, ...) will make
	it possible to do more finegrained control. Open in new window is
	still not supported.  

Thu Apr 15 02:39:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Move session info comments.  

Thu Apr 15 02:24:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, config/cmdline.c, sched/session.c,
	sched/session.h:

	Add support for -remote-session that will connect to an already
	running ELinks (or bail out) and open all the provided URIs. Again
	the intension is to support -remote argument similar to that of
	mozilla and either this can be a backend for that or just be a
	starting point for it.  

Thu Apr 15 00:55:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, config/cmdline.c, terminal/event.c:

	Implement a -ping command line argument that will hopefully help to
	make -remote handling easier. Else we can remove it later when
	-remote is running.  

Thu Apr 15 00:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c:

	Improve the term->spec reference counting by also locking the
	default one. Else assertion failure can appear if the connecting
	ELinks exists immediately.  

Wed Apr 14 23:35:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, osdep/osdep.h, terminal/terminal.c,
	terminal/terminal.h:

	Move get_cwd() and set_cwd() to osdep department.  

Wed Apr 14 22:59:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): The joy of switch statements. Decrease indentation.  

Wed Apr 14 22:55:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Ctrl+L should now be a RESIZE event in order to always force
	redrawing.  

Wed Apr 14 22:50:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event():Move comment.  

Wed Apr 14 22:47:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c, terminal.h:

	redraw_terminal_ev(): Use term_send_event() as backend an removing
	code duplication.  
	
	redraw_terminal_cls(): Was the only user of redraw_terminal_all()
	and is now the defined as the old redraw_terminal_all which just
	calls redraw_terminal_ev() and lets term_send_event() handle screen
	erasing and resizing.  

Wed Apr 14 22:35:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event(): Only resize and erase screen when handling INIT
	and RESIZE events. Inspired by redraw_terminal_ev().  

Wed Apr 14 22:30:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event(): Handle INIT, RESIZE and REDRAW events by sending
	them to all windwows.  

Wed Apr 14 22:10:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Evil hacks to restore appearance of input field lines.  

Wed Apr 14 22:03:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, inphist.c:

	tab_compl_n(): Use redraw_terminal() instead of lowlevel terminal
	event sending. It bypasses any possible dialog->handle_event() by
	that should not be a problem with the current usage. Makes it
	possible to make dialog_func() static.  

Wed Apr 14 21:53:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	redraw_terminal_ev(): Propagate EV_RESIZE even to inactive tabs like
	we do in in_term().  

Wed Apr 14 21:38:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): Use switch statement and breaks to get rid of ifs and
	gotos.  

Wed Apr 14 21:17:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, scripting/perl/core.c:

	Look mama I'm coding perl. Make ac ang av static. WTF are they
	handed to PERL_SYS_INIT() we don't support perl args on the command
	line anyway and the day we do I will fork my own ELinks ;).  

Wed Apr 14 21:01:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Update comment and more usage of connection state macros.  

Wed Apr 14 20:51:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Use add_string_to_stirng().  

Wed Apr 14 20:50:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup.  

Wed Apr 14 20:21:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_end(): Group -dump specific stuff.  

Wed Apr 14 20:14:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Maybe do it some other way but show which one (of
	multiple URLs) is the problem.  

Wed Apr 14 20:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Error reporting now handles unknown protocols.  

Wed Apr 14 20:11:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Show error for unsupported URI protocols.  

Wed Apr 14 20:07:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup.  

Wed Apr 14 20:02:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_formatted(): No need to return anything.  

Wed Apr 14 19:46:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/: select.c, select.h:

	@terminate belongs to main.h 

Wed Apr 14 19:43:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h:

	Make init() static.  

Wed Apr 14 19:40:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): More comments.  

Wed Apr 14 19:04:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/session.c, sched/session.h:

	create_session_info(): Take string argument.  

Wed Apr 14 19:03:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	done_string(): Make it possible to call it multiple times on a
	string by only checking the magic if free()ing something.  

Wed Apr 14 18:55:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session_info(): Use string utils.  

Wed Apr 14 06:30:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Improve signal handling logic.  

Wed Apr 14 06:08:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Replace obsolete FIXME with comment.  

Wed Apr 14 06:06:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Code duplication forever. Gotos never.  

Wed Apr 14 05:55:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Make distant goto users duplicate the code.  

Wed Apr 14 05:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, terminal/terminal.c, terminal/terminal.h:

	Unify signal setup and session info freeing in init().
	attach_terminal() now returns the created terminal.  

Wed Apr 14 05:44:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup2.  

Wed Apr 14 05:35:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup.  

Wed Apr 14 05:31:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup variable usage.  

Wed Apr 14 05:25:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Rearrange the connecting to an already running instance so
	it is grouped together with the -no-connect part.  

Wed Apr 14 05:12:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Use no-connect option for storing no connect info.  

Wed Apr 14 03:14:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/select.c:

	Uhh I love that funky code. Iterate while timer list is not empty
	and interval is less than or equal to zero.  

Wed Apr 14 03:04:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/select.c:

	Ehm .. cache_entry != timer.  

Wed Apr 14 02:35:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/: select.h, signals.c:

	Fix includes? 

Wed Apr 14 02:21:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Fix is_system_error() logic.  

Wed Apr 14 00:42:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Add stop member to file_download struct and remove stop arg from
	abort_download.  

Wed Apr 14 00:35:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	viewer/dump/dump.c:

	Last batch of state macros.  

Wed Apr 14 00:11:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, task.c:

	More is_in_result_State() usage.  

Wed Apr 14 00:09:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h, error.c:

	Move connection state macros and add/use is_system_error().  

Tue Apr 13 23:43:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Goto return madness. Sorry I couldn.t resist. ;) 

Tue Apr 13 23:15:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	Make get_real_opt() take care of all the option name translation.  

Tue Apr 13 22:47:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Group @fcp dependant code.  

Tue Apr 13 22:42:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Them string can never be empty if we have the
	extension option.  

Tue Apr 13 22:38:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Move option name translation and simplify error
	handling.  

Tue Apr 13 22:36:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Cleanup.  

Tue Apr 13 22:31:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Simplify dialog data initialization by making the
	struct extension strings be MAX_STR_LEN.  

Tue Apr 13 22:27:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	charset_list(), menu_language_list(): Cleanup.  

Tue Apr 13 18:58:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_file(): Use string utils for reallocation and avoid nasty
	hacks.  

Tue Apr 13 18:44:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove old comment.  

Tue Apr 13 18:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, protocol/file/file.c:

	Fix bug 377 by allowing reading from /dev/stdin when it is a pipe.  

Tue Apr 13 18:27:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_encoded_file(): Abuse switch noddle to handle errors.  

Tue Apr 13 18:11:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_encoded_file(): Minor simplification removing saved_errno.  

Tue Apr 13 16:36:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/dialogs.c, config/dialogs.c:

	Fix text before input fields with floating labels bottom padding.  

Tue Apr 13 16:30:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Right align floating labels up against the input field.  

Tue Apr 13 16:20:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Bitpicking.  

Tue Apr 13 16:17:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, protocol/auth/dialogs.c:

	Fix the input field floating label thing and convert last user.  

Tue Apr 13 16:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/file.h, document/css/css.c:

	Remove unused header and fix side fx.  

Tue Apr 13 15:59:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	More isspace() usage.  

Tue Apr 13 10:15:40 2004  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/connect.c, osdep/getifaddrs.h:

	System headers should be included before any local headers, this is
	fixing bug 439 reported by Victor Sahlstedt.  

Tue Apr 13 10:10:09 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation: typo fixes.  

Tue Apr 13 10:06:47 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Apr 12 23:28:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Cleanup.  

Mon Apr 12 23:01:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Check if the @rel[ative] parameter contains a protocol
	name and use translate_url() to 'set it up'.  

Mon Apr 12 22:49:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c, cookies/dialogs.c:

	By default add ': ' string to floating input field labels to reduce
	memory usage and needed error hanling.  

Mon Apr 12 21:38:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	check_number(): Make the error message guide the user.  

Mon Apr 12 08:22:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Apr 11 23:06:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Cleanups.  

Sun Apr 11 22:58:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_del_ext(): Make better usage of printf format.  

Sun Apr 11 21:11:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/conf.c:

	write_config_file(): Final cleanup.  

Sun Apr 11 20:46:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Rename write_config_error() -> write_config_dialog().  

Sun Apr 11 20:44:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, dialogs.h:

	Merge write_config_success() into write_config_error().  

Sun Apr 11 20:41:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Move write config dialog message composing.  

Sun Apr 11 20:13:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Avoid allocating args to msg_text() for the write_config_* dialogs.
	Also fixes potential leak when term was NULL for successfull writes.  

Sun Apr 11 17:24:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, viewer/text/form.c, sched/download.c:

	Avoid allocating args to msg_text().  

Sun Apr 11 17:23:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, mime/dialogs.c, protocol/user.c:

	Free args to msg_text() instead of adding them to getml().  

Sun Apr 11 16:10:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_error_dialog(): Decrease indentation.  

Sun Apr 11 16:08:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_error_dialog(): With msg_text() there is no need to
	stracpy() stuff.  

Sun Apr 11 15:47:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove useless test.  

Sun Apr 11 15:32:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/uri.c,
	sched/connection.c, sched/task.c:

	Introduce an unknown_protocol_backend that will pop up an unknown
	protocol dialog as the external handler.  

Sun Apr 11 14:38:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Fix access of free()d memory.  

Sun Apr 11 14:35:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Remove useless file_download cleanup. We
	only ever go there if i is NULL.  

Sun Apr 11 14:34:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Move tq initialization up so it can be used
	to shorten lines in the whole function.  

Sun Apr 11 14:28:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	common_download_do(): Cleanup and remove goto usage by extracting
	members from and freeing cmdw_hop early.  

Sun Apr 11 14:22:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup and remove double check of resume to get last_pos.  

Sun Apr 11 14:18:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Unify file_download initialization.  

Sun Apr 11 12:43:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	save_as(): Cleanup error handling.  

Sun Apr 11 12:42:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	common_download_do(): Cleanup error handling.  

Sun Apr 11 03:03:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Don't allow exmode when anonymous.  

Sun Apr 11 00:59:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, protocol/auth/dialogs.c:

	Fix bug 392 (badly formatted HTTP auth dialog) properly.  

Sun Apr 11 00:40:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix bug 390 caused by incompatibility in session info after support
	for multiple URIs on the commandline was added. This is done by
	introducing some basic session magic data that should make it
	possible in the future to detect what version the client is using
	and decode the session info appropriate. With this patch a new
	ELinks will not be able to pass URIs when connecting to an old
	ELinks however it will work the other way around. It is not perfect
	but I see no other clean way to fix this bug.  

Fri Apr  9 16:42:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Add FIXME about problems reading stuff from stdin to be viewed in
	text viewer (and not dump viewer) because of not allowing special
	files.  

Fri Apr  9 16:33:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Like if !isatty(stdin) also check if !isatty(stdout) and make -dump
	implicit.  This should fix debian bug #231663 "-dump 0 to stdout
	doesn't dump; -dump 0 to pager segfaults". The segfault was by Out
	of memory error that was fixed by previous patch setting x and y
	vars before calling get_terminal_size(). This will further fix it by
	improving usability of elinks in UNIX environment.  

Fri Apr  9 13:34:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Use STDIN_FILENO macro instead of just 0. Don't know if it is
	something we should test for in configure.  

Fri Apr  9 13:33:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	get_terminal_size() might not actually assign anything to the
	referenced arguments but will still return 0. This is a bit safer
	when stdout is a pipe.  

Fri Apr  9 04:37:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Proper fix for the unchecked allocated variable freeing.  

Fri Apr  9 03:43:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Use same procedure for sending same URI as referrer as sanding true
	URI. It is alreay the proxied URI so why all the fuzz.  

Fri Apr  9 03:40:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	The data member of URI is always set.  

Fri Apr  9 03:39:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Proposed fix for bug 436 leaking auth data through true referrer.  

Fri Apr  9 03:20:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Format enum members properly.  

Fri Apr  9 03:19:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, auth/auth.c, http/http.c:

	Add HTTP URI formatting classes.  

Fri Apr  9 03:13:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, scripting/lua/core.c:

	Introduce URI_ORIGINAL formatting class.  

Fri Apr  9 03:10:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, dialogs/document.c, dialogs/download.c,
	dialogs/menu.c, document/renderer.c, protocol/uri.h,
	protocol/file/cgi.c, sched/download.c, viewer/text/link.c:

	Introduce URI_PUBLIC formatting class that should be used for all
	the URIs showed in dialogs an stuff. Is that too strict or should it
	maybe be configurable whether to show password in public URIs? It is
	even used for CGI referrer altho' I don't if that is too strict.  

Fri Apr  9 03:05:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Revert URI component strangeness. Classes will be introduced
	shortly.  

Fri Apr  9 03:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Move unchecked allocated var passed to getml() to the end so it
	won't keep the other ml args from being registered and cause a leak.  

Fri Apr  9 02:19:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Decrease indentation.  

Thu Apr  8 19:47:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	add_url_to_http_string(): Rewrite to not allocate no post url copy.  

Thu Apr  8 19:36:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Small workaround for URI_DEFAULT_PORT adding. Hmm I will have to
	figure out something better.  

Thu Apr  8 19:21:48 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updated.  

Thu Apr  8 14:38:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/http.c:

	Add support for adding default port if the URI has no port specified
	using new URI_DEFAULT_PORT component.  

Thu Apr  8 14:14:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, task.c:

	Fix bug in URI reference counting and add assertion about
	ses->loading_uri. Thanks to iSteve for his irc presence that lead to
	triggering the bug.  

Thu Apr  8 13:17:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Initialize option lock.  

Thu Apr  8 13:05:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Comment out is_object_used(file_download) assertion and describe why
	we need to make it not fail when the time comes.  

Thu Apr  8 04:33:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix assertion failure when calling protocol function with unknown
	protocol.  

Thu Apr  8 02:52:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c:

	More download consistency checking. Should fix bug 399 (pasting crap
	into goto url dialog) caused by the input to start downloads and
	aborting them (using bottom halves) and then deleting before the
	bottom half gets called. Well we already know how racy the whole
	download code is so ...  

Thu Apr  8 02:00:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, util/types.h:

	Remove gross INFO_LIST hack.  

Wed Apr  7 22:24:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Show proxy URI info for cache entries.  

Wed Apr  7 22:14:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	parse_uri(): Remove useless test. If the protocol is unknown we bail
	out after skipping the '//'s.  

Wed Apr  7 22:10:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Improve and add comments.  

Wed Apr  7 21:53:15 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, if anyone cares.  

Wed Apr  7 21:45:25 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Style fix.  

Wed Apr  7 21:15:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add support for translating proxied URIs so even
	proxy://proxy.stuff/elinks.or.cz will work. And this proxy patch is
	even reasonably well tested. ;-) 

Wed Apr  7 21:05:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/core.c:

	What the hell does it here?!? 

Wed Apr  7 20:06:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Assert it is file:// URI that is past to transform_file_url().
	Update comment.  

Wed Apr  7 20:01:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Remove TODO/FIXME about first trying file:// since we infact do
	that.  

Wed Apr  7 19:58:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup.  

Wed Apr  7 19:53:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Clearify why we default to file:// when finding protocol.  

Wed Apr  7 19:44:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add FIXME about translating proxied URIs.  

Wed Apr  7 19:34:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Add support for proxy:// URIs on the command line. Before it caused
	an assertion failure and it is really not that much code.  

Wed Apr  7 19:12:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix need slash after host checking introduced a few patches ago.  

Wed Apr  7 16:15:43 2004  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Kalle Olavi Niemitalo was added to AUTHORS, for its Accept-Charset
	bug fix.  

Wed Apr  7 16:11:28 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Bug #242524(Debian) was fixed. Accept-Charset header was incorrect
	with protocol.http.bugs.accept_charset = 0. Thanks to Kalle Olavi
	Niemitalo and Peter Gervai.  

Wed Apr  7 15:46:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add FIXME about handling of irc. and other common protocol specific
	hostnames.  

Wed Apr  7 15:43:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	find_uri_protocol(): Cleanup and remove unneeded gotos.  

Wed Apr  7 15:40:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move and properly indent find_uri_protocol().  

Wed Apr  7 15:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move protocol detection to separate find_uri_protocol() function.  

Wed Apr  7 15:32:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Maintain which protocol name to add using enum
	protocol.  

Wed Apr  7 15:22:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Work on the allocated URI string. All tho' the protocol name finding
	will most certainly be run first you never know.  

Wed Apr  7 15:15:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Simplify tilde_expansion by doing it on entering translate_url().  

Wed Apr  7 15:06:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup.  

Wed Apr  7 15:03:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix detection of protocol name for URIs like www.sunpoint.net?k=1.
	Don't brainlesly add ending '/' but handle it using the
	URI_ERRNO_NO_HOST_SLASH.  

Wed Apr  7 14:24:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Improve host after slash handling by changing parse_uri() to assign
	URI host members before checking if slash is missing and
	translate_url() will now use URI host members to insert missing
	slash at the right position. http://www.sunpoint.net?k=1 will be
	translated to http://www.sunpoint.net/?k=1 and squid should be happy
	as well.  

Wed Apr  7 14:09:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Fix redirect info.  

Wed Apr  7 13:57:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix dir normalization for URIs like http://elinks.or.cz//bla to
	normalize to http://elinks.or.cz/bla 

Wed Apr  7 13:29:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Hrmpfh. Fix normalize dir example.  

Wed Apr  7 13:04:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Describe the dir nomalization loop. Simplify ending logic.  

Wed Apr  7 12:50:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	A little simplification and optimization. Move end_of_dir() check
	inside loop so we don't do it both in the loop invariant? and after
	it.  

Wed Apr  7 12:46:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Rewrite the direcory normalization loop without use of gotos. Fixes
	bug reported by lindi- and zas.  

Tue Apr  6 12:29:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix bug triggered on FreeBSD. Safeguarding against passing the wrong
	URI string to normalize_uri() by simplifying noparse macro.  

Tue Apr  6 11:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	This should fix bug 434 another sf download using document
	refreshing related thing. At least downloading w3m no longer spawns
	an extra type query box.  

Tue Apr  6 10:35:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Revert buggy insert_in_string() usage in form fields and areas.  

Tue Apr  6 09:50:42 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Assert add_to_string_list() and free_string_list() parameters.  

Tue Apr  6 09:36:10 2004  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Redundant test was removed: free_string_list() checks for empty
	list.  

Tue Apr  6 07:59:48 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/dump/dump.c:

	elinks -dump did not finish.  

Tue Apr  6 07:46:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/dump/dump.c:

	Fix for bug 433 (unknown protocol or bad uri with -dump).  

Tue Apr  6 07:07:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix directory normalization bug by handling // used by
	translate_file_url().  

Tue Apr  6 07:04:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	First part of directory normalization loop sanification.  

Tue Apr  6 01:35:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Fix leak.  

Tue Apr  6 01:34:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Rename translate_directories() to normalize_uri() since it now does
	more work. Macros are used for controlling whether to reparse or
	not. I am aware that directory translation is currently broken and
	intent to rewrite it in a sane way ASAP.  

Tue Apr  6 01:20:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	m33p.  

Tue Apr  6 01:20:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Use insert_in_string() for text fields and areas.  

Tue Apr  6 01:13:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Make @expanded the new URI string as soon as
	possible to simplyfy.  

Tue Apr  6 01:08:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix some strange double free error.  

Tue Apr  6 00:30:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, util/string.c, util/string.h:

	Rename insert_in_uri()  to insert_in_string() and move to string
	utils.  

Tue Apr  6 00:08:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_directories(): Always pass URI struct as argument and
	instead use uristring arg to signal whether to reparse.  

Mon Apr  5 17:41:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header. part
	3.  

Mon Apr  5 17:38:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header. part
	2 

Mon Apr  5 17:35:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header.  

Mon Apr  5 16:58:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, sched/connection.c:

	Disallow NULL args to get_uri_reference().  

Mon Apr  5 16:06:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	init_connection(): Assert that proxied_uri is not PROTOCOL_PROXY.  

Mon Apr  5 10:02:40 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Apr  5 05:35:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Shorten code by returning uristring from translate_directories().  

Mon Apr  5 05:31:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Use uri_errno switch.  

Mon Apr  5 05:22:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	A few assertions.  

Mon Apr  5 05:18:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Try to optimize away some of the calls to parse_uri() by making it
	possible to hand an already parse URI to translate_directories().  

Mon Apr  5 05:06:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Pass uri struct to translate_file_url().  

Mon Apr  5 04:57:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup translate_file_url() by using insert_in_uri().  

Mon Apr  5 04:44:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move up insert_in_uri().  

Mon Apr  5 04:33:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup transform_file_url() calling.  

Mon Apr  5 04:27:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	All that inlining is no good.  

Mon Apr  5 03:33:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Scary stuff. Complete (eek!) rewrite (Eek!) of translate_url()
	(EEK!). It now goto-loops (ehm since using a while loop would indent
	things too much? ;) a parse_uri() call + switch (the returned
	uri_errno) saving the previous uri_errno to check that progress is
	actually being made. The core part of translate_url() that figures
	out how to handle URIs without protocols is only changed to make use
	of new allocation scheme. Lots of duplicate code is removed and now
	even I can understanding what it does.  

Mon Apr  5 01:17:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, util/conv.h:

	Add support for case insensitive protocol and hostnames in the URI
	cache. It should be pretty cheap meaning no additional allocation
	needed. The basic idea is to ``prepare'' all URI strings before they
	are handed to get_uri().  
	
	It abuses that all URI composing ends up in translate_directories()
	which already mangles the string and now also lowercases the
	protocol and hostname part of the URI. The remaining part is that
	get_protocol() has been changed to use case insensitive comparing
	against known protocol names and get_user_program() will do an
	option lookup using the lowercased protocol name.  Strings handed to
	get_uri() is sanity checked before the URI is returned.  

Sun Apr  4 22:30:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c, protocol/uri.h:

	Make parse_uri() return new uri_errno that will hopefully make
	translate_url() more efficient by pinpointing the error.  

Sun Apr  4 22:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	object_nolock() cached URIs.  

Sun Apr  4 22:00:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix bad URI reference taking in -dump redirects. Thanks to lindi-.  

Sun Apr  4 22:00:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix bad URI reference taking in -dump redirects. Thanks to lindi-.  

Sun Apr  4 20:51:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix bug introduced in the struct uri introduction in translate_url()
	when it lived in src/protocol/url.c, revision 1.89->1.90 change.  

Sun Apr  4 17:42:01 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Compilation fix: @url -> @uri in maybe_pre_format_html().  

Sun Apr  4 17:31:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Make add_uri_to_string() only add slash after host if URI_DATA or
	URI_POST was specified. This makes it possible to use it instead of
	add_uri_host_to_string() in the HTTP code. I hope the it's not a
	security problem sending the real protocol string of the referrer.  

Sun Apr  4 17:04:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix bug in ses_goto() TASK_IMGMAP case where the new
	ses->goto_position would be point to free()d memory. Instead
	ses_goto() now allocates it.s own position pointer.  

Sun Apr  4 16:38:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	destroy_vs(): Takes care of free()ing the goto_position member.  

Sun Apr  4 16:26:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Cleanup and remove dead code.  

Sun Apr  4 16:05:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More sanity checking before requesting frame.  

Sun Apr  4 16:02:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Check length of URI string before + assert() string. Reported by
	lindi-.  

Sun Apr  4 07:40:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	I mean now cleanup and fix leak in get_uri_string().  

Sun Apr  4 07:34:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup get_uri_port().  

Sun Apr  4 07:19:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup get_protocol_length().  

Sun Apr  4 06:15:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Move extract_fragment() up and static inline it.  

Sun Apr  4 06:12:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/session.c:

	Turn get_translated_uri() into a Swiss army knife that can also just
	extract fragment and return URI from cache.  

Sun Apr  4 05:55:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/task.c,
	viewer/dump/dump.c, viewer/text/view.c:

	Introduce get_translated_uri() which get_uri() from translate_url()s
	and possibly extract_fragment().  

Sun Apr  4 05:22:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Like for the cache entry store both (proxy) uri and proxied uri for
	connections. The new member is named proxied_uri. It should
	hopefully not cost more than an extra reference and it simplifies
	the HTTP code a bit.  

Sun Apr  4 04:49:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Optimize the common case where there is no fragment in the requested
	frame uri.  

Sun Apr  4 04:44:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/html/frames.c,
	document/html/frames.h, sched/session.c:

	Make the frame description struct reference an URI.  

Sun Apr  4 04:28:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Cleanup useless test if protocol is invalid. It can
	never be at this point.  

Sun Apr  4 04:24:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	parse_uri(): Cleanup. get_protocol_end() is now
	get_protocol_length() to save lines.  

Sun Apr  4 04:15:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, uri.c, uri.h:

	Cleanup the uri <-> protocol interface. Since the uri parsing is the
	only user of known_protocol() it allows us to make the URI parser
	figure out the protocol part first and then query whether it is a
	known protocol. And then why not rename known_protocol() to
	get_protocol().  

Sun Apr  4 03:51:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Fix leading spaces.  

Sun Apr  4 03:46:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, protocol/uri.c, protocol/uri.h,
	sched/download.c:

	add_string_uri_filename_to_string() -> add_uri_filename_to_string()
	and take URI arg.  

Sun Apr  4 03:41:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/download.c,
	viewer/text/view.c:

	query_file(): Take URI as arg.  

Sun Apr  4 03:37:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Rename ses->dn_url to ses->download_uri and make it an URI struct
	pointer.  

Sun Apr  4 03:18:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix last patch.  

Sun Apr  4 03:15:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	download_link(): Change code layout.  

Sun Apr  4 03:09:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/conv.c, util/conv.h, viewer/text/view.c:

	I hope this is correct. send_open_in_new_window() now adds
	-base-session and -session-ring args to the parameter string.
	encode_shell_safe_url() renamed to add_encoded_shell_safe_url() and
	now works directly on the parameter string it gets passed.  

Sun Apr  4 02:56:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_in_new_window(): Change code layout.  

Sun Apr  4 02:50:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_in_new_window(): Same as for send_open_new_window(). Do
	not use ses->dn_url to store parameters. The new elinks instance
	will request the URI we could ofcourse preload it already but that
	is not the case anyway but added as a possible TODO.  

Sun Apr  4 02:44:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Introduce init_session_info_string() to initialize string and add
	-base-session and -session-ring parameters to it.  

Sun Apr  4 02:34:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_new_window(): dn_url -> parameters.  

Sun Apr  4 02:31:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_new_window(): Hmm puzzling why we assign the parameters of
	the new elinks instance to ses->dn_url. It makes no sense and let.s
	see what will happen if we simply remove that. The only sane usage
	of dn_url is for query_file() calls as a way to keep the string
	around for possible callbacks.  

Sun Apr  4 02:07:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Unify error handling.  

Sun Apr  4 01:48:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, sched/connection.h, sched/error.c:

	We might as well use the print_error_dialog() function for the
	javascript-not-supported popup.  

Sun Apr  4 01:40:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	More ænglish? 

Sun Apr  4 01:40:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.h, download.c, error.c, session.c,
	session.h, task.c:

	Introduce S_UNKNOWN_PROTOCOL and use it to substitute
	print_unknown_protocol_dialog() with print_error_dialog(..,
	S_UNKNOWN_PROTOCOL, ..).  

Sun Apr  4 01:26:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, sched/task.c,
	viewer/text/view.c:

	Simplify the error dialog interface so only the state and priority
	needs to be passed. If retry should be supported an additional URI
	arg can be passed as well.  

Sat Apr  3 20:26:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Fix redirect comparison.  

Sat Apr  3 17:42:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/object.h:

	Make lock debug output more human readable.  

Sat Apr  3 17:40:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	cache/cache.c, cache/cache.h, cache/dialogs.c, config/options.h,
	cookies/cookies.c, cookies/cookies.h, document/document.c,
	document/document.h, formhist/formhist.c, formhist/formhist.h,
	globhist/globhist.c, globhist/globhist.h, protocol/uri.c,
	protocol/uri.h, sched/download.c, sched/download.h, util/object.h:

	Improve object refcount debugging by introducing an object struct
	that holds the counter and if debugging is enabled also the type
	name of the object.  

Sat Apr  3 14:54:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Indentation fixes.  

Sat Apr  3 14:51:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Maintain the proxy URI in the cache entry. It should not cost
	anything but a reference and a little extra when deleting but cleans
	and speeds ups things quite nicely.  

Sat Apr  3 14:32:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/finger.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	protocol/smb/smb.c, sched/connection.c, sched/connection.h,
	sched/download.c, sched/history.c, sched/session.c, sched/task.c,
	viewer/dump/dump.c:

	Rename download->ce to download->cached and connection->cache to
	conneciton->cached.  

Sat Apr  3 14:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/status.c, document/document.c,
	document/document.h, document/renderer.c, document/css/css.c,
	document/html/frames.c, document/html/renderer.c,
	document/html/renderer.h, document/plain/renderer.c,
	document/plain/renderer.h, lowlevel/select.c, protocol/finger.c,
	protocol/file/file.c, sched/connection.c, sched/download.c,
	sched/session.c, sched/task.c, scripting/lua/core.c,
	viewer/dump/dump.c:

	Re-rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:51:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Re-rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:49:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Rename-rename cache entry variables to cached to improve
	grepability.  

Sat Apr  3 13:41:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, session.c, session.h:

	Rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:29:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/dump/dump.c, scripting/lua/core.c, sched/task.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:25:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/select.c, protocol/finger.c, sched/connection.c,
	sched/download.c, sched/download.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:14:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: html/renderer.c, html/renderer.h, document.c,
	html/renderer.c, plain/renderer.c, plain/renderer.h:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:10:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/dialogs.c, dialogs/document.c,
	document/html/frames.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:08:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Rename cache -> cache_entries.  

Sat Apr  3 13:06:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 12:58:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/conf.c:

	Fix assertion failure when trying to save config file an -no-home
	was specified.  

Sat Apr  3 12:33:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, document/html/renderer.c, sched/download.c,
	sched/session.c, sched/task.c, viewer/dump/dump.c:

	get_cache_uri_struct() is more used so rename it to get_cache_uri()
	which is then renamed to get_cache_uri_string().  

Sat Apr  3 12:20:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	redirect_cache(): Return URI being redirected to and document it.  

Sat Apr  3 12:11:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Fix assertion failure reported by Stephen Stocker.  

Sat Apr  3 07:43:23 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Compilation fix: return 0 instead of NULL pointer.  

Sat Apr  3 03:06:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Whoopsy .. missing part of last patch.  

Sat Apr  3 03:04:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Make ses_goto() take its own URI reference.  

Sat Apr  3 02:24:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Removing an assertion that is clearly useless.  

Sat Apr  3 02:21:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/frames.c,
	sched/download.c, sched/task.c, viewer/dump/dump.c:

	Make cache_entry->redirect point to an URI struct. This nicely
	cleans things up.  

Sat Apr  3 02:11:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/http/http.c:

	Change cache redirecting to resolve the URI being redirected to at
	the redirection time meaning either when the HTTP Location header is
	handled or when appending "/" to the directory path. Hopefully it is
	clear from the patch that it is just the body of
	get_cache_redirect_uri() that has been hacked a bit to behave.  

Sat Apr  3 01:35:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/frames.c,
	sched/download.c, sched/task.c, viewer/dump/dump.c:

	Always resolve redirects relative to the cache entry. Assertions
	added to see if this is not always the case .. well anyway next
	patch (that will be quite a treat) will make it all more clear I
	hope. ;-) 

Sat Apr  3 01:22:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/smb/smb.c:

	Redo the cache redirection interface to be more generic. Now it is
	all relative to the cache entry which makes sense because the
	connection uri is used anyway for creating the cache entry.  

Sat Apr  3 00:13:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_additional_file(): URI can never be invalid so remove that
	test.  

Sat Apr  3 00:10:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_additional_file(): Take URI arg.  

Fri Apr  2 23:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, sched/session.c, sched/session.h,
	sched/task.c:

	ses_change_frame_url(): Rename to ses_change_frame_url() and take
	URI struct arg.  

Fri Apr  2 23:43:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	format_frame(): Use the cache redirect URI facility. It should be
	more correct.  

Fri Apr  2 23:38:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Fix compile error from last patch and get rid of stupid @head
	assertions.  

Fri Apr  2 23:33:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Cleanup connection cache assignment.  

Fri Apr  2 23:30:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/smb/smb.c:

	Unify cache redirects to directories by appending /.  

Fri Apr  2 22:51:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove unused post_data_start().  

Fri Apr  2 22:48:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Remove useless post char mangling.  

Fri Apr  2 22:35:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove unparse_uri().  

Fri Apr  2 22:31:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove dead code that is getting really outdated.  

Fri Apr  2 22:27:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Oops more forgotten find_in_cache() calls this time in led land.  

Fri Apr  2 22:18:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Oops forgotten find_in_cache() call in lua land.  

Fri Apr  2 22:16:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	A little cleanup to improve readability by passing URI struct to
	rewrite_uri().  

Fri Apr  2 22:04:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/user.c,
	sched/task.c:

	A nicish patch that should hopefully make the last one all worth it.
	Pass URI struct to external protocol handler. Makes the job easier
	for user protocol handlers.  

Fri Apr  2 21:55:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Cleanup protocol usage.  

Fri Apr  2 21:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Another patch which is a bit fishy but it will all make sence in a
	moment. Move URI struct registering up before anything else in in
	do_follow_url() it is hopefully also more correct since any external
	handler will be passed the translated URI with all the file://,
	http:// etc crap (or will break some user protocol settings?).  

Fri Apr  2 21:36:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Is it probably not so nice either but 'if you have said A ...'
	anyways try to make better usage of URI struct in find_in_cache().  

Fri Apr  2 21:21:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	document/document.c, document/renderer.c, document/css/css.c,
	document/html/frames.c, protocol/http/codes.c, sched/connection.c,
	sched/task.c:

	find_in_cache(): Take URI arg.  

Fri Apr  2 21:10:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	It might look stupid and pointless at this stage but once we have
	CSS cache it will be less I hope, anyway aquire URI struct in CSS
	import handler.  

Fri Apr  2 18:58:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Merge check_protocol() into known_protocol().  

Fri Apr  2 18:41:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Removing path expansion from option parsing in the client. The bug
	is else where and it works perfectly without on FreeBSD.  

Fri Apr  2 18:15:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/refresh.c, protocol/proxy.c,
	protocol/uri.c, protocol/uri.h, sched/download.c, sched/session.c,
	sched/task.c, viewer/dump/dump.c:

	get_uri(): Take URI string length as arg. If -1 strlen() will be
	used.  

Fri Apr  2 18:07:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Oops. Forgotten get_cache_entry(struri(..)) call.  

Fri Apr  2 18:03:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Describe the URI cache interface.  

Fri Apr  2 17:58:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/uri.h:

	get_cache_entry(): Make proper use of URI struct arg by calling new
	macro get_proxied_uri().  

Fri Apr  2 17:45:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	protocol/finger.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/codes.c, protocol/http/http.c:

	get_cache_entry(): Take URI arg.  

Fri Apr  2 17:30:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, protocol/uri.c, protocol/uri.h,
	protocol/http/http.c, sched/download.c:

	get_extension_from_url(): Rename to get_extension_from_uri() and
	take URI arg. Also we now start searching for the extension at the
	uri->data position.  

Fri Apr  2 17:17:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	get_content_type(): Take URI arg.  

Fri Apr  2 17:13:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	get_temp_name(): Take URI arg.  

Fri Apr  2 16:58:03 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Check range of port, and let display an invalid syntax error message
	if provided one is out of range.  

Fri Apr  2 16:53:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.c, task.c, task.h:

	ses_goto(): Take URI struct as arg.  

Fri Apr  2 16:50:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	A few fixes of accessing free()d memory and useless checking.  

Fri Apr  2 16:39:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Oops .. fix return value.  

Fri Apr  2 16:38:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	A little preparing.  

Fri Apr  2 16:35:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Return URI struct.  

Fri Apr  2 16:16:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add TODO about lowercasing scheme and hostname part in the URI
	cache.  

Fri Apr  2 15:03:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: refresh.c, refresh.h:

	Use URI struct for document refreshing.  

Fri Apr  2 07:27:00 2004  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, document/html/tables.c,
	scripting/perl/hooks.c, terminal/kbd.c, viewer/dump/dump.c:

	Trailing spaces fixes.  

Thu Apr  1 18:34:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/proxy.c, protocol/proxy.h, sched/connection.c:

	Make get_proxy() return URI struct. Move proxy_uri validation to
	load_uri() and thus closer to the let-me-get-the-hell-out-of-here
	handler. Fix a few possible leaks in the error paths.  

Thu Apr  1 17:13:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Make the task struct use URIs.  

Thu Apr  1 16:42:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/task.c, viewer/dump/dump.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Pass URI struct to init_vs() so it can never fail.  

Thu Apr  1 16:31:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Cleanup.  

Thu Apr  1 16:21:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Cleanup dead code.  

Thu Apr  1 16:19:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless allocation.  

Thu Apr  1 16:01:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More crazy stuff.  

Thu Apr  1 15:59:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/location.h, sched/session.c,
	sched/session.h, sched/task.c, viewer/dump/dump.c,
	viewer/text/marks.c, viewer/text/vs.c, viewer/text/vs.h:

	Blast vs.url and vs.url_len and flush out all the crazy code that
	made it work.  

Thu Apr  1 15:45:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Improve zas' fix and just allow current_url to be NULL if we are
	lost.  

Thu Apr  1 15:29:38 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/rewrite/rewrite.c:

	Use have_location() to prevent segfault in goto_url_hook().  

Thu Apr  1 15:05:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Muddle up.  

Thu Apr  1 14:56:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/core.c,
	scripting/lua/hooks.c, scripting/perl/hooks.c, viewer/text/view.c:

	XPUSHs(sv_2mortal(newSVpvn(struri(cur_loc(ses)->vs.uri),
	strlen(struri(cur_loc(ses)->vs.uri))))); 

Thu Apr  1 14:45:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/rewrite/rewrite.c,
	sched/history.c:

	Convert a few vs.url to struri(vs.uri).  

Thu Apr  1 14:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, plain/renderer.c:

	If no document title set it to the current URI.  

Thu Apr  1 14:35:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, document/html/frames.c,
	scripting/guile/core.c, viewer/text/view.c:

	Convert all vs->url to struri(vs->uri).  

Thu Apr  1 07:56:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/proxy.c:

	Cleanup.  

Thu Apr  1 07:53:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Pass URI struct to get_proxy().  

Thu Apr  1 06:22:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, proxy.h:

	get_proxy() and friends using URI structs.  

Thu Apr  1 06:08:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	ALittleCleanup.  

Thu Apr  1 06:06:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, sched/task.c, viewer/dump/dump.c:

	load_url() -> load_uri() and take URI struct as arg.  

Thu Apr  1 05:57:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Compile fixes. Thanks to Zardoz.  

Thu Apr  1 05:18:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Translate real_url to an URI struct.  

Thu Apr  1 05:09:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass vs->uri to get_cached_document() and init_document().  

Thu Apr  1 05:03:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, scripting/lua/core.c:

	Tune a few view state URI composing.  

Thu Apr  1 05:02:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, viewer/text/view.c:

	View state comparing optimizations.  

Thu Apr  1 05:01:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/vs.c, viewer/text/vs.h, sched/session.c:

	Add URI struct member to view_state.  

Thu Apr  1 04:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, protocol/ftp/ftp.c, protocol/smb/smb.c:

	More get_uri_string() usage.  

Thu Apr  1 04:09:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Rename http_error_info->url to ->uri and change to point to an URI
	struct.  

Thu Apr  1 03:56:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	No good patch.  

Thu Apr  1 03:22:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix the leak introduced in file:/// fallback for non existing files
	fix.  

Thu Apr  1 02:59:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Take URI struct.  

Thu Apr  1 02:48:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h, sched/task.c:

	Change session->loading_uri to point to an URI struct.  

Thu Apr  1 01:51:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup return type checking.  

Thu Apr  1 01:47:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	type_query->url -> type_query->uri 

Thu Apr  1 01:30:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	type_query->url -> type_query->uri 

Thu Apr  1 01:25:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Change file_to_load->uri to point to an URI struct.  

Thu Apr  1 01:20:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	file_to_load->url -> file_to_load->uri 

Thu Apr  1 01:09:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h, sched/task.c:

	session->loading_url -> session->loading_uri 

Thu Apr  1 01:01:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Generalized redirect URI composer.  

Thu Apr  1 00:37:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Change file_download->uri to point to an URI struct. BTW there seem
	to have sneaked in a leak when aborting downloads. Well well 

Thu Apr  1 00:13:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	file_download->url -> file_download->uri 

Thu Apr  1 00:09:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/file/cgi.c:

	get_no_post_url() -> get_uri_string(..., ~URI_POST) 

Wed Mar 31 23:47:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Change connection referrer to point to an URI struct.  

Wed Mar 31 23:40:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_uri_reference(): Be lazy and handle NULL URIs too.  

Wed Mar 31 23:38:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	connection->ref_url -> connection->referrer 

Wed Mar 31 23:33:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, viewer/dump/dump.c:

	load_url(): Take referrer as URI struct.  

Wed Mar 31 23:32:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	Change session referrer to point to an URI struct.  

Wed Mar 31 23:17:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, session.c, session.h, task.c:

	session->ref_url -> session->referrer 

Wed Mar 31 22:42:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/session.h, sched/task.c:

	Use URI cache for documents. set_session_referrer() now takes URI
	struct.  

Wed Mar 31 22:39:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.h:

	Add macro to get the cache entry URI struct.  

Wed Mar 31 22:00:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/task.c, viewer/text/view.c:

	document->url -> document->uri 

Wed Mar 31 21:50:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_uri_reference(): Returned the locked URI.  

Wed Mar 31 20:31:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	lowlevel/connect.c, protocol/finger.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	protocol/smb/smb.c, sched/connection.c, sched/connection.h,
	sched/session.c:

	Make the connection struct use the URI cache. Make struri() take URI
	pointer.  

Wed Mar 31 20:29:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, document/renderer.c,
	protocol/http/codes.c, sched/task.c:

	Fix URI utility includes.  

Wed Mar 31 16:53:54 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Assert parameters in get_uri_cache_entry(), safer for now, imho.  

Wed Mar 31 16:47:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	protocol/uri.c, protocol/uri.h, viewer/dump/dump.c:

	Reintroduce the URI cache. Used for cache entries only.  

Wed Mar 31 00:11:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/scripting/lua/core.c:

	Test file existence to avoid Lua error reporting (under version
	5.x).  Fixes debian bug #231760 ('dbug 231760' using URI rewrite).  
	Patch by Kevin B. McCarty. Untested.  

Tue Mar 30 23:05:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	set_referrer(): Move to C file and rename to set_session_referrer().  

Tue Mar 30 15:42:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	detach_formatted(): Use free_link().  

Tue Mar 30 10:14:49 2004  Laurent Monin <zas@norz.org>:

	* test/underline.html:

	Underline tests.  

Tue Mar 30 00:50:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	We don.t support string escape seqs, yet.  

Tue Mar 30 00:47:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Temporary fix for inf. loop reported by pasky.  

Tue Mar 30 00:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Make background property value parsing loop look more sane.  

Tue Mar 30 00:22:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	More garbage. You can thank pasky for this.  

Tue Mar 30 00:10:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Simplify/optimize token skipping.  

Tue Mar 30 00:10:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix typo.  

Mon Mar 29 23:03:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	In translate_url(), if file_exists() returns false setting not_file
	to true is a bad assumption since @prefix is not changed which again
	causes any URI that is not recognized as being some other protocol
	to fallback to file:///.  Changing the @prefix is also not good
	since it gives the error message "Bad URI syntax". Leaving it like
	this will give a "No such file or directory" error.  Was introduced
	in 1.83 -> 1.84. A potential memleak of expanded is still there but
	I can.t figure this messy function.  
	
	Thanks to lindi- for helping to debug this thing. ;) 

Mon Mar 29 17:42:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Expand relative filenames in the client so they will always work
	when handled in the master. Idea by lindi-.  

Sun Mar 28 19:01:48 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/file/file.c:

	Fix: do not show .. for / directory.  

Sun Mar 28 18:37:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	One more use for table_frames stuff.  

Sun Mar 28 18:29:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use bitfields in struct table_frames.  

Sun Mar 28 18:25:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@tf -> @table_frames.  

Sun Mar 28 18:23:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Assert @result too in get_table_frames().  

Sun Mar 28 18:21:39 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Struct table_frames was introduced, it helps to get frames info from
	table frame fields through new get_table_frames() function.  

Sun Mar 28 18:00:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor code cleanup.  

Sun Mar 28 17:58:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Table frames related calculations cleanup.  

Sun Mar 28 17:48:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Unwanted background color appearing at left of tables was fixed (bug
	398). Patch by Jonas.  

Sat Mar 27 16:31:21 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/hierbox.c:

	Brainless workaround for bug 397. Real fix is needed.  

Fri Mar 26 18:15:02 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Minor tidyup. A useless FIXME was removed.  

Fri Mar 26 18:05:45 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Do not call safe_hard_write() if there is no byte to write.  

Fri Mar 26 17:56:53 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Label fr was renamed free_and_return.  

Fri Mar 26 17:55:50 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Fix wrong #include: kbd.c -> kdb.h.  

Fri Mar 26 17:49:52 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	@c -> @bytes_read 

Fri Mar 26 17:46:10 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	RD() macro was moved near the place where it is used.  

Fri Mar 26 17:42:05 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Code redundancy was slightly reduced by introducing
	safe_hard_write().  

Thu Mar 25 17:34:59 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	A lot of bconds. Added hooks.pl.  

Thu Mar 25 17:33:57 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/Makefile.am:

	Stubs for perl scripting engine.  

Wed Mar 24 19:35:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Revert wrong encoding optimization. I must be getting out of shape.  

Wed Mar 24 15:10:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Minor optimization of file encoding guessing.  

Tue Mar 23 20:44:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	ses_forward(): A little clarity and optimization of why we lower
	bound the URL length of the created location.  

Tue Mar 23 20:33:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Tidyup.  

Tue Mar 23 13:50:54 2004  Laurent Monin <zas@norz.org>:

	* test/tablebg.html:

	Table bgcolor test.  

Mon Mar 22 14:35:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	cookies/cookies.c, dialogs/document.c, dialogs/download.c,
	dialogs/menu.c, dialogs/status.c, document/document.c,
	document/document.h, document/refresh.c, document/renderer.c,
	document/html/frames.c, document/plain/renderer.c,
	lowlevel/connect.c, mime/mime.c, mime/mime.h, protocol/finger.c,
	protocol/uri.c, protocol/uri.h, protocol/user.c,
	protocol/auth/auth.c, protocol/file/cgi.c, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/http/blacklist.c,
	protocol/http/blacklist.h, protocol/http/codes.c,
	protocol/http/http.c, protocol/rewrite/rewrite.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/history.c, sched/location.c,
	sched/location.h, sched/session.c, sched/session.h, sched/task.c,
	util/string.h, viewer/dump/dump.c, viewer/text/marks.c,
	viewer/text/view.c, viewer/text/vs.c, viewer/text/vs.h:

	Revert the lot of struct uri changes. Pasky warned me that it
	sounded scary and the very first bug report plus the fact that it
	was all made in a proof of concept manner was too convincing. We
	should still persue the idea tho' because they rock.  

Mon Mar 22 04:51:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass URI directly to init_document() to avoid error handling.  

Mon Mar 22 04:32:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	done_uri(): Optimize to only lookup in the map when releasing URIs.  

Mon Mar 22 04:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Use URI struct for http error code handling.  

Mon Mar 22 04:03:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/session.c, sched/task.c,
	viewer/text/marks.c:

	Cleanup and don't allocate extra memory for the URI string.  

Mon Mar 22 04:00:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Oops clear local view state variable.  

Mon Mar 22 03:59:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: location.h, session.h:

	Remove deprecated comments.  

Mon Mar 22 03:58:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup and use local view state variable.  

Mon Mar 22 03:47:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, document/renderer.c,
	document/html/frames.c, sched/location.h, sched/session.c,
	sched/task.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Use struct URI for view states. Removing lots of dangerous code and
	simplifying things.  

Mon Mar 22 03:23:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/rewrite/rewrite.c,
	sched/history.c, sched/location.h, sched/session.c, sched/task.c:

	Use get_location_url() macro when dealing with view states.  

Mon Mar 22 03:01:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/renderer.c,
	document/html/frames.c, viewer/text/vs.h:

	Use get_vs_cache_entry() macro when dealing with view states.  

Mon Mar 22 02:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/marks.c:

	Getting ready for a hostile take over. Use mem_calloc() when dealing
	with view states.  

Mon Mar 22 02:44:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Tidy up.  

Mon Mar 22 02:43:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, viewer/text/view.c,
	viewer/text/vs.h:

	get_vs_url_copy(): Wrap the world.  

Mon Mar 22 01:18:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, protocol/uri.c, protocol/uri.h,
	protocol/http/http.c, sched/download.c:

	get_extension_from_url(): Take struct URI and rename to
	get_uri_extension().  

Mon Mar 22 01:08:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	Pass URI to get_content_type().  

Mon Mar 22 01:04:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Use struct URI for type queries.  

Sun Mar 21 23:55:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, sched/session.h, sched/task.c, viewer/dump/dump.c:

	Change both session->ref_url and connection->ref_url to use URI
	struct and rename to referrer.  

Sun Mar 21 23:26:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use URI for file_to_load struct.  

Sun Mar 21 23:18:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Use URI for file downloads.  

Sun Mar 21 22:57:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, document/plain/renderer.c,
	protocol/file/cgi.c:

	With the handy URI struct we can use get_uri_string() instead of
	get_no_post_url().  

Sun Mar 21 22:48:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Only maintain URI cache reference counter over the number of entries
	in the cache so it will be easier to reference URIs from outside.  

Sun Mar 21 22:43:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	set_session_referrer(): Take URI struct.  

Sun Mar 21 22:26:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	Move set_referrer() to .c file and rename it to
	set_session_referrer().  

Sun Mar 21 16:30:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/task.c, viewer/text/view.c:

	Add real URI to the document struct.  

Sun Mar 21 16:16:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Move URI refcounting to the URI struct.  

Sun Mar 21 15:58:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	lowlevel/connect.c, protocol/finger.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/session.c:

	Use URI cache for connection->uri. A lot of
	s/conn->uri\./conn->uri->/. We now always free the get_proxy() URI
	when initializing a connection.  

Sun Mar 21 15:39:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, document/plain/renderer.c,
	protocol/uri.c, protocol/uri.h, protocol/file/cgi.c,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/session.c:

	Last more or less trivial users of the URI data string. Blast old
	data string members. Boooooring. But now the fun can begin. :) 

Sun Mar 21 15:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Use the URI data string for the HTTP protocol stuff.  

Sun Mar 21 15:23:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Use the URI data string for the cookie stuff. Plus little cleanup.
	Eek 

Sun Mar 21 15:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/: cgi.c, file.c:

	Use the URI data string for the file protocol stuff.  

Sun Mar 21 15:08:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Use the URI data string for the user protocol stuff.  

Sun Mar 21 14:59:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add URI data string struct and use internally in URI land.  

Sun Mar 21 14:41:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Don't search for POST_CHAR that is the job of parse_uri().  

Sun Mar 21 14:30:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, protocol/file/cgi.c, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/session.c:

	uri->data -> uri->datastr 

Sun Mar 21 13:39:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	protocol/uri.c, protocol/uri.h, viewer/dump/dump.c:

	Introducing an URI cache.  

Sun Mar 21 02:22:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Blast old URI host nonstrings.  

Sun Mar 21 02:21:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c:

	Convert last users in connection land to use URI host string.  

Sun Mar 21 02:21:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Convert last users in cookie land to use URI host string.  

Sun Mar 21 02:10:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use the URI host string for the host connection stuff.  

Sun Mar 21 02:04:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	is_in_domain(): Take server as string struct.  

Sun Mar 21 01:56:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	check_domain_security(): Take server as string struct.  

Sun Mar 21 01:49:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More URI host string trivial usage.  

Sun Mar 21 01:45:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.h:

	Use URI host string.  

Sun Mar 21 01:41:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_to_string(): Use host string.  

Sun Mar 21 01:39:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	Bleh.  

Sun Mar 21 01:37:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.c, blacklist.h, http.c:

	Change the blacklist interface to use host strings.  

Sun Mar 21 01:31:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make the URI host string usable.  

Sun Mar 21 00:32:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Cleanup subst_cmd() by unifying adding of shell safe chars.  

Sun Mar 21 00:21:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, user.c, http/http.c:

	Store URI port info in a string struct.  

Sun Mar 21 00:04:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add ipv6 member to struct uri.  

Sat Mar 20 23:53:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Remove add_uri_host_to_string() and make it possible to use
	add_uri_to_string() instead.  

Sat Mar 20 23:35:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, protocol/user.c, sched/connection.c:

	A little cleanup of the URI host sequence capturing.  

Sat Mar 20 21:01:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, lowlevel/connect.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/http/http.c,
	sched/connection.c:

	uri->host -> uri->hoststr 

Sat Mar 20 21:01:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	More (yet unused) utils.  

Sat Mar 20 21:01:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	More (yet unused) utils.  

Sat Mar 20 18:55:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, auth/auth.c, ftp/ftp.c:

	Store protocol password info in a string struct.  

Sat Mar 20 18:32:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, protocol/auth/auth.c, protocol/ftp/ftp.c,
	sched/connection.c, util/string.h:

	Store protocol user info in a string struct. Add a few handy string
	struct macros.  

Sat Mar 20 14:39:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Check end pointer when using strto[u]l() to parse frame dimensions.
	Idea by Christian Haggstrom <c00chm@cs.umu.se> 

Fri Mar 19 16:10:20 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.base:

	Polished and fixed grammar.  

Fri Mar 19 08:45:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Fix non portable use of strtoul() that caused frames not to be
	rendered. Reported by Daniel E. Macks <dmacks@netspace.org> 

Wed Mar 17 09:08:22 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A segfault occuring while navigating through main menu was fixed
	(bug 394). It was a missing break statement.  

Tue Mar 16 09:14:39 2004  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	Take care of - char that may indicate a command line option, patch
	by Solar Designer.  

Sun Mar 14 06:22:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/dialogs.c:

	Removed draw_cookie. Set cookie->box_item->text instead.  

Sat Mar 13 17:57:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	IFrame-like handling for the <applet> tag (show alt and link to
	code).  

Sat Mar 13 17:27:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/: garbage.html, styletags.html:

	A few test cases.  

Sat Mar 13 15:17:03 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/dialogs.c:

	Block auth dialog after all memory allocation tests, safer.  

Sat Mar 13 15:12:23 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/dialogs.c:

	Auth dialog layout was improved a bit by using floating labels, and
	a workaround for bug 392 was provided, by using maximum width for
	dialog.  

Fri Mar 12 10:13:28 2004  Laurent Monin <zas@norz.org>:

	* NEWS:

	NEWS update: cookies creation and modification 

Thu Mar 11 13:54:09 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/dialogs.c:

	Tidy up.  

Thu Mar 11 13:43:09 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/dialogs.c:

	Do proper check for expires and secure cookies values using
	strtol().  

Thu Mar 11 04:44:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Possibility adding new cookies, but only for "old" servers.  
	Introduced listbox draw op: draw_cookie.  

Tue Mar  9 17:44:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/dialogs.c:

	New feature: editing cookies.  

Tue Mar  9 15:24:46 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bookmarks/backend/default.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	util/file.c, util/file.h:

	Get rid of weird/useless safe_fgets(), just use fgets().  

Tue Mar  9 15:05:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Add note about broken text alignment in CSS apllier.  

Tue Mar  9 14:09:13 2004  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor tidy up.  

Tue Mar  9 12:24:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/elinks.h, src/bfu/hotkey.c,
	src/bfu/menu.c, src/cache/dialogs.c, src/config/options.c,
	src/config/options.h, src/dialogs/menu.c, src/document/document.c,
	src/modules/version.c, src/osdep/stub.h,
	src/protocol/rewrite/rewrite.c, src/sched/connection.c,
	src/util/error.c, src/util/error.h, src/util/lists.h,
	src/util/memlist.h, src/util/object.h, src/util/profile.h,
	src/util/string.h:

	DEBUG -> CONFIG_DEBUG .. it seems that perl is a namespace polluter
	.. like we didn't know that already! ;-) 

Tue Mar  9 05:32:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Fri Mar  5 17:58:53 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/dialogs.c:

	Allow to add again previously deleted option.  

Fri Mar  5 10:41:10 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/: conf.c, options.h, options.c:

	Support for saving deleted options. Heavy use of watermarks.  
	Prevented unsetting builtin options.  

Fri Mar  5 01:05:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Summarize new stuff for those too lazy to read the ChangeLog file.
	Please help keeping it updated (although some of the entries added
	with this patch might be to unimportant?) 

Thu Mar  4 10:57:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Mar  3 18:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: view.c, link.c:

	Cleanup and use get_current_link().  

Wed Mar  3 18:10:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Use get_current_link() and shorten lines.  

Wed Mar  3 18:07:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Cleanup and use get_current_link().  

Wed Mar  3 18:03:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/view.h:

	Better checking before looking up the current link.  

Wed Mar  3 17:42:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/view.h, sched/session.c:

	Introduce get_current_link() macro.  

Wed Mar  3 17:27:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, scripting/lua/core.c:

	get_current_link() -> get_current_session_link().  

Wed Mar  3 17:08:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup and remove goto usage.  

Wed Mar  3 16:34:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix wrong width and height in comparison. Fixes bug 388.  

Wed Mar  3 12:00:05 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, protocol/http/http.c:

	Information how many bars is displayed by ELinks is sent in
	User-Agent header field. Note, that this information will be
	accurate for new instances only when they run with -no-connect
	option.  

Wed Mar  3 08:21:27 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* acconfig.h, configure.in:

	Missing commit.  

Tue Mar  2 17:06:15 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: Makefile.am, main.c, main.h, scripting/Makefile.am,
	scripting/scripting.c:

	Support for Perl scripting. Scripts are read from file 'hooks.pl'.  
	Example hooks.pl will be available later.  

Mon Mar  1 19:17:51 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, intl/charsets.c:

	Support for System codepage.  

Sat Feb 28 06:25:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Spelling fixes.  

Fri Feb 27 16:22:40 2004  Laurent Monin <zas@norz.org>:

	* src/intl/: charsets.c, charsets.h:

	Make get_entity_string() static since it is only used by charsets.c
	for now.  

Fri Feb 27 11:30:15 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix: copy http_version structure contents not structure pointer. How
	did it remain unnoticed until now ? 

Fri Feb 27 11:20:08 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: http.c, http.h:

	Provide and use macros to check http version, some FIXME were added.  

Fri Feb 27 10:46:27 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor tidyup: useless goto is gone, a typo in a comment was fixed,
	minor style changes.  

Fri Feb 27 09:27:52 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Feb 27 06:18:43 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Thu Feb 26 23:47:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Select the clicked tab when the last character of the tab is
	clicked. Really this time. Quazgaa promises.  

Thu Feb 26 17:35:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Compile fix. Reported by Zardoz.  

Thu Feb 26 16:48:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Group similar action handler calling using a magic variable. Don't
	know if this kind of optimization is stupid.  

Thu Feb 26 16:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	terminal/tab.c, terminal/tab.h:

	Add support for moving the current tab back and forth. Requested by
	Zellner.  

Thu Feb 26 01:13:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	In display_tab_bar, increment |tab->width| if it is the last tab so
	that the space at the end of the tab bar is counted as part of the
	last tab.  

Thu Feb 26 01:02:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	Preparatory clean-up: In display_tab_bar, store the actual tab width
	in |actual_tab_width|.  

Thu Feb 26 00:59:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	Trivial clean-up: In display_tab_bar, use @tab_ses instead of
	tab->data, as the latter has previously been assigned to the former.  

Thu Feb 26 00:50:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Fix behaviour when clicking on the tab-bar: ignore clicks on
	separators, and select the correct tab when clicking on the first
	character of a tab. Thanks to Quazgaa for taking my initial attempt
	at fixing this and making it work correctly when I was too stupid.
	This fixes bug 389.  

Mon Feb 23 11:20:33 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: main.c, config/cmdline.c, config/cmdline.h:

	Fixed elinks --version.  

Sun Feb 22 13:30:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Feb 21 06:29:27 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Expand tilde first, then test if file exists.  

Fri Feb 20 16:32:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Gettextize HTTP error document.  

Fri Feb 20 16:03:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Oops fix TODOer.  

Fri Feb 20 16:01:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: codes.c, codes.h, http.c:

	Use question_queuing to make it straight forward to i10n HTTP error
	messages. TODO: Freeing of http_error_info when freeing
	question_queue.  

Fri Feb 20 15:19:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.h, protocol/http/http.c:

	Fix do_auth_dialog() prototyping.  

Fri Feb 20 14:41:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/auth/dialogs.c,
	protocol/auth/dialogs.h, protocol/http/http.c, sched/session.c,
	sched/session.h:

	Make the question_queue more bottomhalf like taking data pointer.  

Fri Feb 20 14:24:48 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated hungarian translation.  

Fri Feb 20 10:56:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	Disable exmode by default. It is not useful bloat.  

Fri Feb 20 06:26:12 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	file_exists used instead of access.  

Thu Feb 19 20:43:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Make addrno writing/reading capable of dealing of partial
	write()s/read()s, this should fix random DNS failures on some
	systems with not-so-smooth-linux-glibc-like buffering.  

Thu Feb 19 17:48:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Be more paranoid about passing data from the async resolver.  

Thu Feb 19 15:43:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/stub.c:

	Fixed dangling 'unsigned'. Damn, people, this stuff has some given
	order ;-).  

Thu Feb 19 14:39:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: stub.c, stub.h:

	Use strictly (char *) instead of (unsigned char *) in the stubs,
	because that's how these functions are defined in the system.
	Otherwise you will run into problems like different problems in
	conditional expressions on systems not having these, like fissie
	just reported.  

Thu Feb 19 14:30:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/stub.h:

	util/stub.h -> osdep/stub.h. Happenned on Jan 28 but Jonas didn't
	commit it.  

Wed Feb 18 21:52:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Remove bogus compiler bug notice, the bug is in me.  

Wed Feb 18 21:46:22 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/document/html/tables.c:

	Prevent a crash caused by a compiler bug (?) on OS X 10.3.2/XCode
	1.1/gcc3.3, reported by Daniel Macks <dmacks@netspace.org>.  

Wed Feb 18 18:56:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Try to fix session auto saving by using ses->loading_url if
	get_current_url() fails.  

Wed Feb 18 18:46:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahead text drawing so the matched chars are properly
	highlighted.  

Wed Feb 18 14:03:10 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Feb 18 06:27:47 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	When url is without protocol use file:// if file with filename ==
	url exist.  

Tue Feb 17 19:17:36 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	ETag comparaison was fixed. We now take in account weakness or
	strongness of ETags, and compare them case-sensitively, compliance
	with RFC2616 section 3.11 and 13.3.3 was improved.  

Tue Feb 17 06:03:08 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/dialogs/menu.c:

	Added "Wrap text" menu entry.  

Mon Feb 16 06:33:19 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sun Feb 15 16:35:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Feb 15 16:33:40 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	"\%u" -> "%u". Prevent i18n issues in Info box of these options.  

Sun Feb 15 12:49:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Do not decode %7E in filenames.  

Sun Feb 15 12:48:48 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, viewer/dump/dump.c:

	Added configuration options:
	document.dump.{header,footer,separator}.  

Sun Feb 15 12:14:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Add support for table bordercolor attribute. To keep this patch as
	simple as possible we do not honour bordercolor attributes in tr/td
	tags (yet). Table bgcolor applies to all cell borders.  

Sun Feb 15 06:57:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/main.c:

	ELinks should no connect to previous instances when act as a pager.  

Sat Feb 14 13:56:11 2004  Laurent Monin <zas@norz.org>:

	* src/util/color.inc:

	Some notes of where this color list comes from where added. It is
	unclear if there is any copyright on it. Let me know if it is the
	case. Suggested by Pasky.  

Sat Feb 14 00:53:04 2004  Laurent Monin <zas@norz.org>:

	* src/util/: color.inc, color_s.inc:

	cvs Id were added.  

Fri Feb 13 20:33:31 2004  Laurent Monin <zas@norz.org>:

	* src/util/: Makefile.am, color.c, color.inc, color_s.inc,
	fastfind.c:

	Color names <-> rgb was improved. ELinks now understands almost all
	color names, old and small color table was moved to
	src/util/color_s.inc and will be used if ELINKS_SMALL is defined,
	new extended one is in src/util/color.inc and is used by default.
	Fastfind stuff was changed to handle up to 1024 keys (needed).
	"gray" color value was changed from 0x808080 to correct 0xBEBEBE.  

Fri Feb 13 18:33:12 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Feb 13 18:08:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Feb 13 17:52:47 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, intl/charsets.c, util/color.c,
	util/fastfind.c, util/fastfind.h:

	FastFind debugging features were improved: support for a comment,
	more stats. Tidy up.  

Fri Feb 13 17:11:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: bfu/leds.c, config/options.inc:

	Digital clock. Enable LEDs, timer and clock to make it work.  

Fri Feb 13 08:02:47 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/cmdline.c, config/cmdline.h, main.c:

	Removed obsolete option -stdin and stuff related with single url.  

Thu Feb 12 17:51:38 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/main.c:

	From now ELinks can act as pager.  

Thu Feb 12 17:11:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, search.c:

	Fix link typeahead fixups so current links will never be under the
	input line.  

Thu Feb 12 12:00:34 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Real translation update.  

Thu Feb 12 06:52:21 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Wed Feb 11 11:44:24 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po, src/config/options.inc:

	A note about rename() on OS/2 and Win32 systems was added to
	secure_file_saving option description, french translation was
	updated.  

Wed Feb 11 11:22:21 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/util/secsave.c:

	Test for fflush() and fsync() presence, and act accordingly in
	secure_close().  

Wed Feb 11 10:19:31 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Feb 11 10:12:34 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c, config/options.c,
	lowlevel/connect.c:

	Useless spaces were trimmed.  

Wed Feb 11 09:53:31 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Compilation fix: Define _GNU_SOURCE to have strcasestr() with glibc.  

Tue Feb 10 23:40:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, viewer/dump/dump.c:

	Restore the old handling of the url list in init(). dump_pre_start()
	just steals all the url strings and manages it's own queue.  

Tue Feb 10 20:29:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.h:

	struct list_head is expanded to list_head_elinks and we need to
	include the lists.h file or it could lead to bad things.  

Tue Feb 10 20:25:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Cleanup.  

Tue Feb 10 20:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use strstr() for link typeahead matching so we don't only match from
	the start of the link text. It is a bit buggy for wrapped links
	though. Hmm.  

Tue Feb 10 19:15:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Reintroduce usage of link->name for typeahead search because it is
	so neat and it should be made to work.  

Tue Feb 10 18:45:46 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: protocol/file/file.c, osdep/osdep.c:

	Fixed reading from stdin.  

Tue Feb 10 17:17:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Trim leading spaces from the link text. Visible at the software map
	at sf.net and making it harder to link typeahead.  

Tue Feb 10 06:35:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: main.c, viewer/dump/dump.c, viewer/dump/dump.h:

	Support for many urls in dump mode.  

Mon Feb  9 12:06:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	input_line_event_handler(): Catch redraw events from the history tab
	completion so new buffer data is propagated to the line handlers.  

Mon Feb  9 11:51:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	get_unique_name(): Replace sprintf() with longcat().  

Mon Feb  9 11:33:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Cl33nup.  

Mon Feb  9 11:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	A little almost-spring cleaning.  

Mon Feb  9 09:29:24 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Cleanup and simplification of secure_close(), error handling was
	improved and a potential file-not-closed-on-flush-errore was fixed.  

Mon Feb  9 02:59:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inphist.c, inphist.h:

	Minor simplification to make history completion functions work on
	dialog_data so it looks a bit higher level.  

Mon Feb  9 01:41:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Minor simplification.  

Mon Feb  9 01:33:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Add input line buffer to history when cycling next and previous
	item.  

Mon Feb  9 01:25:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Fight badly written spaghetti code with gotos.  

Sun Feb  8 20:36:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Expand the switch noodling to make it easy to add handlers for other
	terminal events. Yes I know it is not properly indented the elinks
	hacking.txt way, but I think that the extra indentation is just
	plain stupid and punishes the use of switch statments.  

Sun Feb  8 20:29:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, viewer/text/search.c:

	Remove the prompt member of the input_line struct. All we need is
	the data member.  

Sun Feb  8 20:20:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Remove stupid test.  

Sun Feb  8 20:15:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Use local widget_data variable to shorten lines.  

Sun Feb  8 17:37:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	No need to allocate another cache entry header. Just use existing
	one or empty string.  

Sun Feb  8 00:17:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/options.inc:

	s/ELINKS_LOCAL_CGI/CONFIG_CGI/ 

Sat Feb  7 10:58:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Drawin the download notification dialog when having the download
	browser open is apparently a little racy. Deleting the box item will
	update the download browser _after_ the notification dialog has been
	drawn whereby it will be hidden. This should make the download
	browser update before launcing any notification by removing the list
	box item.  

Sat Feb  7 01:39:49 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	Use stricter mask for local socket creation, so socket is only
	readable/writable by its user on systems honouring unix sockets
	permissions (see unix(7)).  

Sat Feb  7 01:04:52 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Comments about secure_file_saving were updated.  

Sat Feb  7 00:58:56 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Use fflush()/fsync()/fclose() sequence to ensure data is written to
	disk when using secure saving. This is needed since fclose() only
	calls fflush() which only flush libc buffers, so while fclose() may
	have returned, data may still be in kernel buffers. See fclose(2),
	fflush(2) and fsync(2) man pages for more information.  

Fri Feb  6 22:41:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.h, config/urlhist.c, dialogs/exmode.c,
	dialogs/menu.c, globhist/globhist.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use macros for input history initialization.  

Fri Feb  6 18:38:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c, plain/renderer.c:

	Move cache entry defragmentation checking to render_document().  

Fri Feb  6 15:58:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Make sort_links() static.  

Fri Feb  6 13:03:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/opttypes.c, util/color.c,
	util/color.h:

	get_color_name() -> get_color_string(), and take a hex color buffer
	as arg that will be filled and returned if no color name is found.  

Fri Feb  6 12:49:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/opttypes.c, util/color.c,
	util/color.h:

	get_color_name(): Don't allocate the returned color name.  

Fri Feb  6 12:47:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Cleanup.  

Fri Feb  6 12:31:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/options.h, globhist/dialogs.c:

	I was reading through some old patches and it reminded me that it
	would maybe be better to let the option value union have a
	big_number member of type long.  

Thu Feb  5 23:19:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix assert() failure in documents without links. Reported by Miciah.  

Thu Feb  5 23:17:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Fix assertm() reported by Daniel Macks <dmacks@netspace.org>.  

Thu Feb  5 19:47:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make text searching also honour the show_not_found option. So
	browsing search history in typeahead mode is actually useful.  

Thu Feb  5 19:43:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup.  

Thu Feb  5 19:33:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Add to history if we receive an ACT_EDIT_ENTER and the widget has
	history.  

Thu Feb  5 19:26:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minimize the (now pretty useless) mode change hacks to just call
	search_typeahead().  

Thu Feb  5 19:20:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Then of course there is this thing called search history that text
	typeahead should have.  

Thu Feb  5 19:18:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/search.c:

	Make the various typeahead directly accessible via actions (-link,
	-text and -text-back). Fixes some of bug 378 atleast.  

Thu Feb  5 16:46:25 2004  Laurent Monin <zas@norz.org>:

	* src/formhist/Makefile.am:

	Do not add formhist.o twice to libformhist.a. Reported by Daniel
	Macks.  

Thu Feb  5 15:46:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Thou shall always check if get_next_scanner_token() returns NULL.
	Fixes reappearing of bug 372 'crashes if <style> tag is cut off in
	fragment/file'.  

Thu Feb  5 12:52:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/exmode.c, protocol/rewrite/rewrite.c,
	protocol/rewrite/rewrite.h:

	Removed URI prefixes availability in exmode. It is wrong from the
	design standpoint, you have the goto url dialog for that (or just
	goto-url action arguments, for that matter).  

Thu Feb  5 11:03:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	fixup_typeahead_match(): Scrolling might update the current link but
	we don't want that so reset it to the matched one.  

Thu Feb  5 10:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahead link text coloring. If something already were typed we
	need to redraw in order to remove the coloring of the link text.  

Thu Feb  5 10:18:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, view.c, view.h:

	A nice little hack that will scroll the document view if the matched
	link is under the typeahead input line.  

Thu Feb  5 10:03:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Color the typeahead text of the current link.  

Thu Feb  5 00:22:31 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Avoid crash when saving files with encoding != UTF-8.  

Wed Feb  4 23:13:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/conf.h, dialogs/exmode.c:

	parse_config_command()'s @file updates propagate. This should fix
	the on-startup infinite loop.  

Wed Feb  4 16:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Command line options for redirects should not be listed with -help.
	Besides it looks hella ugly.  

Wed Feb  4 14:12:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/getifaddrs.c:

	max()? What max()? 

Wed Feb  4 13:58:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.c:

	Include the needed files.  

Wed Feb  4 13:58:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, dialogs/exmode.c:

	Compilation fix.  

Wed Feb  4 13:57:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/conf.h, dialogs/exmode.c:

	Allow config file commands (set, bind) to be executed from exmode.
	This involves exporting of parse_config_command() and enum
	parse_error.  

Wed Feb  4 13:27:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Random tidyup.  

Wed Feb  4 13:00:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Simplification of parse_config_file() --- removed the test_end label
	+ goto.  

Wed Feb  4 12:59:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Surged out the very command parsing multiplexer from
	parse_config_file() to parse_config_command().  

Wed Feb  4 12:51:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.h:

	Trailing whitespaces police strikes.  

Tue Feb  3 20:37:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix leak when viewing empty files.  

Tue Feb  3 20:31:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/search.c, viewer/text/search.h:

	Make the third arg of find_next() mean the direction. Thus making it
	possible to remove find_next_back().  

Tue Feb  3 20:12:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Try to make the @a arg to find_next() a bit more clear and remove
	the use for it.  

Tue Feb  3 20:04:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Cleanup.  

Tue Feb  3 19:28:04 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Feb  3 19:20:01 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/config/cmdline.c, src/lowlevel/connect.c,
	src/osdep/Makefile.am, src/osdep/getifaddrs.c,
	src/osdep/getifaddrs.h:

	Option -localhost now matches against all local addresses, gathered
	by getifaddrs() function, either from system or if not available
	from the new osdep/getifaddrs.{c,h} files. Please test heavily for
	cross platforms issues.  

Tue Feb  3 18:59:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h:

	Make search_for and search_for_back static.  

Tue Feb  3 18:56:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/search.c, viewer/text/search.h:

	search_dlg(): Now both initiates forward and backward search dialogs
	depending on @a.  

Tue Feb  3 18:38:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use document->nsearch as counter to get rid of disturbing macro.  

Tue Feb  3 16:00:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix leak of selector list when the syntax is all wrong.  

Tue Feb  3 10:12:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Fix some swappage that led to an internal error when one selected
	extended regexes in the search box and searched.  

Mon Feb  2 16:20:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	detach_formatted() should already take care of these.  

Mon Feb  2 16:11:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.h:

	Describe tags and nodes and then move things a bit.  

Mon Feb  2 15:58:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.h:

	Cleanup.  

Mon Feb  2 15:40:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Typeahead is not a hack anymore.  

Mon Feb  2 15:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Spit and polish.  

Mon Feb  2 15:24:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Cleanup initialisation of variables.  

Mon Feb  2 15:19:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Decrease indentation level.  

Mon Feb  2 15:12:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move link text searching to separate function.  

Mon Feb  2 15:04:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Rename charpos -> textlen, typeahead -> text, doc_view->document ->
	document.  

Mon Feb  2 13:54:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	Make dump_scanner() available if SCANNER_DEBUG is defined. Fix typo.
	Add state member to struct scanner useful for SGML scanner.  

Mon Feb  2 09:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don't show error dialogs for missing CSS stylesheets.  

Sun Feb  1 16:43:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Try to fix precedence checking for background property parsing.  

Sun Feb  1 16:42:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Some more checks needed for supporting NUL chars in cache data.  

Sun Feb  1 15:56:25 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	check_if_local_address6() is only if IPV6 is defined.  

Sun Feb  1 15:11:53 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Wrap tests for local addresses to functions.  

Sun Feb  1 13:35:29 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Save first errno to display proper error message. Use
	@at_least_one_remote_ip to clarify things.  

Sun Feb  1 05:52:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Some more checks needed for supporting NUL chars in cache data.  

Sun Feb  1 00:13:13 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was improved a bit.  

Sun Feb  1 00:07:22 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 31 14:10:41 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Sat Jan 31 06:00:05 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	First parameter should be basename not full path.  

Sat Jan 31 00:58:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Cleanup.  

Sat Jan 31 00:43:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.c, stylesheet.h:

	Ensure that the CSS @import can only be nested < MAX_REDIRECTS.  

Sat Jan 31 00:40:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Dropped @not_local_count, instead fail with S_LOCAL_ONLY only if the
	last attempt was local, because we do not have errno of previous
	non-local attempts.  

Sat Jan 31 00:37:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Tidyup.  

Sat Jan 31 00:36:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Do all the @local-testing things only if @only_local.  

Sat Jan 31 00:30:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	ACT_MENU_PREVIOUS_ITEM support, instead of the previous horrid
	ev->y+ACT_MENU_NEXT_ITEM hack.  

Sat Jan 31 00:29:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	ACT_EDIT_PREVIOUS_ITEM support.  

Sat Jan 31 00:28:37 2004  Laurent Monin <zas@norz.org>:

	* src/: config/cmdline.c, lowlevel/connect.c, sched/connection.h,
	sched/error.c:

	A new commandline option was introduced: -localhost, it limits
	elinks connections to loopback addresses for now, and with your help
	will limit to local addresses soon.  

Sat Jan 31 00:23:08 2004  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	Compilation fix....  

Fri Jan 30 23:01:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Added default keybinding to previous-(item|frame) to alt-tab, idea
	by Miciah.  

Fri Jan 30 22:38:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use option 'cache' for search dialog checkbox values.  

Fri Jan 30 19:54:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, dialogs/options.c:

	Generalize the terminal option cache thingy.  

Fri Jan 30 19:25:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix page down, scroll and end handling by using document view height
	and _not_ ... ;-) 

Fri Jan 30 19:13:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/event.h, terminal/kbd.c,
	viewer/text/view.c:

	Wrap mouse bit magic in macros. Actions too.  

Fri Jan 30 19:01:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, bfu/text.c, terminal/event.h,
	terminal/kbd.c, viewer/text/view.c:

	Wrap mouse bit magic in macros.  

Fri Jan 30 18:36:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Fri Jan 30 18:28:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Always compare to the current document view height and width and
	_not_ document options height or width. Fixes detection of links
	from mouse clicks when the terminal has been resized after the first
	rendering. Reported by zas.  

Fri Jan 30 18:16:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Compile fix.  

Fri Jan 30 15:25:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.c, parser.c, parser.h:

	css_parse_stylesheet() now takes @end variable. BTW idea by Zardoz.  

Fri Jan 30 15:15:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, util/scanner.c, util/scanner.h:

	Add end member to the scanner struct so we can start to support NUL
	chars in cache data.  

Fri Jan 30 10:14:25 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 30 08:22:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Standardization.  

Fri Jan 30 07:35:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Now with proper header comments and new options.  

Fri Jan 30 07:33:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Out put proper .\" comments.  

Thu Jan 29 13:32:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Make the selector mirroring function take only the property list of
	the original selector so that the ruleset parser can use an empty
	list. Should fix properties of already known selectors being added
	to others in the grouping.  

Thu Jan 29 13:21:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/parser.c, util/scanner.h:

	Some lame way of skipping current token.  

Thu Jan 29 13:10:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	Eh .. revert feature.h change.  

Thu Jan 29 13:08:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/document/css/parser.c, test/css/styletags.html:

	Add testing of the handling of selector groupings. It should that we
	need to pass css_parse_properties() an empty list head so that
	previous values do not end up being added to all other selectors.  

Thu Jan 29 13:02:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	Add selector grouping without block.  

Thu Jan 29 12:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Always check the returned value of get_scanner_token(). Don't check
	whether we skip to next ',' since the check at the start of the loop
	should catch it for us.  

Thu Jan 29 12:47:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Make the selector parsing a little less ambitious (don't allocate
	anything) and more tolerant.  

Thu Jan 29 12:16:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Raise the document.dump.width/-dump-width limits from 40/512 to
	1/65536.  

Thu Jan 29 11:09:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Only check if control char for the first char that is typed ahead.  

Thu Jan 29 07:54:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	'#?' now means search back.  

Thu Jan 29 07:49:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make '##' mean that no more control chars should be checked .. so
	that '/' can be typed as first char in link typeahead.  

Thu Jan 29 07:31:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inpfield.h:

	Add prompt member to struct input_line.  

Thu Jan 29 07:21:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move text_typeahead_handler() up before link_typeahead_handler.  

Thu Jan 29 07:18:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Add data member to struct input_line.  

Thu Jan 29 07:15:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	(Re)introduce a struct for maintaining input line data.  

Thu Jan 29 04:19:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Move selector lookup to end of loop so we don.t have to handle
	allocation if there is a syntax error.  

Thu Jan 29 04:16:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Make selector variable local.  

Thu Jan 29 04:13:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Use while loop instead of gotos so a lot of indenting.  

Thu Jan 29 04:05:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Don.t use static list head but simple pass it from the ruleset
	parser.  

Wed Jan 28 22:03:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fixed memory leak in case of wrong option.  

Wed Jan 28 20:06:50 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Jan 28 19:38:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Experimental support for the 'unset' command. It is useful in order
	to be able to get rid of the default external protocol handlers.  

Wed Jan 28 18:41:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Fixed a hole in the anonymous mode - user could launch the external
	editor and obviously then do whatever he wants there. Discovered by
	Solar Designer <solar@openwall.com>.  

Wed Jan 28 13:35:07 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Jan 28 10:39:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A happy hacking verion of typeahead for text searches. Type '#/' and
	pray that you will never have to typeahead to a link text starting
	with /. :P 

Wed Jan 28 09:18:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Add a toggle-css action so it is easier to see what it actually adds
	to the rendering. By default bound to '_' but maybe it shouldn't
	have one.  

Wed Jan 28 08:23:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix backspacing when typing ahead.  

Wed Jan 28 08:13:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Use enum for return values of input line handlers.  

Wed Jan 28 07:57:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A few comments. Thanks for cheering Quazgaa ;) 

Wed Jan 28 07:53:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, viewer/text/search.c:

	Move error function calling to typeahead input event handler.  

Wed Jan 28 07:39:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Check if there is typeahead text in the input handler.  

Wed Jan 28 07:35:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	When backspacing we just stay with the current link so let.s not
	waste any effort on it.  

Wed Jan 28 07:32:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup.  

Wed Jan 28 07:30:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Remove some more events that kbd_field() takes care of.  

Wed Jan 28 07:28:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, dialogs/exmode.c, viewer/text/search.c:

	Handle ACT_EDIT_CANCEL at top level.  

Wed Jan 28 07:24:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Bail out earlier if there is no chars to search for.  

Wed Jan 28 07:18:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, dialogs/exmode.c:

	Handle basic input line events. We have to do them before calling
	kbd_field().  

Wed Jan 28 06:43:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.h, viewer/text/search.c,
	viewer/text/search.h, viewer/text/view.c:

	Use input line interface for link typeahead. Removing all the cheap
	hacks and nicely encapsulates typeahead functions. Basicly the code
	from frame_ev() is now the input line handler that just grabs
	current doc_view and uses do_typeahead() as backend. All buffer
	management was purged from do_typeahead() but it should still be
	cleaned up and fine tuned.  

Wed Jan 28 06:34:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Fix logic.  

Wed Jan 28 06:16:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Revert typeahead part of last patch.  

Wed Jan 28 06:14:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Make the input line dialog inteface handle the low level event
	stuff.  

Wed Jan 28 05:44:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c:

	Move generic input line stuff to bfu/.  

Wed Jan 28 05:40:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Also pass the event handler to the input line initializer.  

Wed Jan 28 05:30:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	A few exmode -> input_line renames.  

Wed Jan 28 05:22:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Move generic input line stuff to separate function which
	exmode_start() wraps.  

Wed Jan 28 05:18:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Get rid of the exmode_data struct and just allocate like all other
	dialogs.  

Wed Jan 28 05:07:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode_exec() take only session and command buffer.  

Wed Jan 28 05:05:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Remove unused exmode data member.  

Wed Jan 28 02:56:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	add_document_node() now takes renderer as arg. Add compress as
	renderer member.  

Wed Jan 28 02:39:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Describe other plain_renderer members.  

Wed Jan 28 02:37:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Maintain current line number in struct plain_renderer.  

Wed Jan 28 02:32:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Make the template char part of struct plain_renderer.  

Wed Jan 28 02:29:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Pass renderer struct on to add_document_line().  

Wed Jan 28 02:25:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Bail out if there is no fragment data .. add_document_lines()
	asserts(!length).  

Wed Jan 28 02:18:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Add max_width member to struct plain_renderer used for doc_width
	calculation.  

Wed Jan 28 02:13:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Minor cleanups.  

Wed Jan 28 02:09:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Introduce a plain renderer struct.  

Wed Jan 28 01:34:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.c:

	Move init_scanner_info() to initializers and inline it.  

Wed Jan 28 01:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.c, util/scanner.h:

	map_scanner_string(): Now just takes the scanner as arg.  

Wed Jan 28 01:26:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, document/css/scanner.h, util/scanner.c,
	util/scanner.h:

	init_css_scanner() -> init_scanner() .. and move to util/.  

Wed Jan 28 01:23:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, document/css/scanner.h, util/scanner.h:

	Add initialized flag to struct scanner_info. Pass scanner_info to
	scanner initializer.  

Wed Jan 28 01:16:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.h:

	Make the scanner struct reference the scanner_info struct and move
	the scan() function to struct scanner_info.  

Wed Jan 28 01:12:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	Move scanner info stuff up before struct scanner.  

Wed Jan 28 00:57:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, document/css/scanner.h,
	util/Makefile.am, util/scanner.c, util/scanner.h:

	Give the generic scanner utilities a temporary home in util/.  

Wed Jan 28 00:42:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, osdep/Makefile.am, osdep/stub.c,
	util/Makefile.am, util/stub.c, util/stub.h:

	util/stub.* -> osdep/stub.* 

Wed Jan 28 00:38:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, protocol/http/Makefile.am,
	protocol/http/blacklist.c, protocol/http/http.h, util/Makefile.am,
	util/blacklist.c, util/blacklist.h:

	util/blacklist.* -> protocol/http/blacklist.* 

Wed Jan 28 00:35:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/stub.c, util/stub.c:

	Blank lines.  

Wed Jan 28 00:27:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Groups scanner c file in a generic part and a CSS part. Moving
	macros to header.  

Wed Jan 28 00:20:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Groups scanner head in a generic part and a CSS part.  

Wed Jan 28 00:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the language specific token scanner part of the scanner struct
	so it is well hidden.  

Wed Jan 28 00:11:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	css_token functions -> scanner_token.  

Wed Jan 28 00:04:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h, property.h,
	scanner.c, scanner.h, value.c, value.h:

	css_scanner -> scanner.  

Wed Jan 28 00:00:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	struct css_token -> struct scanner_token.  

Tue Jan 27 23:54:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	CSS_SCANNER_* -> SCANNER_*.  

Tue Jan 27 23:51:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make precedence checking more generalized. It is now a member of the
	token struct and should be passed to the skip function.  

Tue Jan 27 23:08:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed an apparently missing break (Jonas?) in the atrule parser,
	reported by <M.Miroslaw@elka.pw.edu.pl>.  

Tue Jan 27 20:05:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Remove support for talking scanners. It has to be added in a saner
	way.  

Tue Jan 27 19:08:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Have @name of the selector extracted in the same way as everything
	else.  

Tue Jan 27 18:45:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Allow namelen==-1 for init_css_selector() ergo get_css_selector().  

Tue Jan 27 18:43:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	When parsing a selector, save id/class/pseudo to separate variables
	instead of @selector members.  

Tue Jan 27 10:37:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Make it more clear how the action table in menu_keys() toggling is
	build.  

Tue Jan 27 02:28:33 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/selectors.html:

	Some simple selector support tests.  

Tue Jan 27 02:28:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Throw away id/class/pseudo selectors for now. They are just spoiling
	things by applying some specific styles to all the element instances
	etc. It is easy to reenable when we'll start really supporting them.  

Tue Jan 27 02:23:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	mem_free(pkg) properly even in the worst situation.  

Tue Jan 27 02:22:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Do not be so pathetic and do not free selector's id/class/pseudo
	upon syntax error... it's gonna bring us only trouble.  

Tue Jan 27 02:16:06 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/cascading.html:

	Trivial cascading testcase.  

Tue Jan 27 02:09:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Grm.  

Tue Jan 27 02:07:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Free up the selectors after we're done with them.  

Tue Jan 27 02:05:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Use kludgy wrapper struct selector_pkg to pass selectors around.  

Tue Jan 27 01:23:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Why it doesn't matter that we have multiple same properties in one
	selector.  

Tue Jan 27 01:15:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Misc. compilation fixes.  

Tue Jan 27 01:14:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Typo fix.  

Tue Jan 27 01:13:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Erhm, fixed the hybridness of mirror_css_selector().  

Tue Jan 27 01:12:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Support for multi-selector rulesets (sel1,sel2,sel3{rule}).  

Tue Jan 27 01:05:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Way back, committed the wrong file. Sorry 'bout that.  

Tue Jan 27 01:03:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Fixed init_css_selector() call.  

Tue Jan 27 01:03:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c:

	Oops, clone_css_selector() is actually used.  

Tue Jan 27 00:54:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	CSS_TOKEN_HASH/HEX_COLOR already contain the token string of ident,
	as pointed out by Jonas.  

Tue Jan 27 00:52:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Disable the unused functions.  

Tue Jan 27 00:49:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/apply.c, css/stylesheet.c, css/stylesheet.h,
	html/parser.c:

	Mirror @default_stylesheet to @css_styles in
	init_html_parser_state() so that we will not need to let the cascade
	fall into two stylesheets but only one. The real benefits will show
	as we will start to support more complex selectors, and it should be
	faster (can you spare a bit of memory, bro'?).  

Tue Jan 27 00:42:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	If we're fixing memory leaks...  

Tue Jan 27 00:24:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Fixed init_css_stylesheet() to also initialize selectors list.  

Tue Jan 27 00:23:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, stylesheet.c, stylesheet.h:

	Support for proper styles cascading. Hopefully.  

Tue Jan 27 00:16:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Construct a virtual selector for the style attribute instead of just
	properties list.  

Tue Jan 27 00:14:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Export (init|done)_css_selector().  

Tue Jan 27 00:13:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Moved (struct css_selector) destructor to done_css_selector().  

Tue Jan 27 00:11:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Make it possible to have NULL @css and/or @name passed to
	get_css_selector().  

Tue Jan 27 00:07:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Use static inlines instead of macros for token getter.  

Mon Jan 26 23:56:17 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/parser.c:

	Prevent a memleak.  

Mon Jan 26 23:37:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Chop indent2type to pieces. One generic part now does the table look
	up and the table is now also part of the scanner_info .. for no good
	reason it seems.  

Mon Jan 26 23:37:08 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/parser.c:

	s/css/scanner in get_next_css_token() calls.  

Mon Jan 26 23:30:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	struct css_indentifier -> struct scanner_string_mapping.  

Mon Jan 26 23:23:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Fixed init_css_stylesheet() decl.  

Mon Jan 26 23:22:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Introduced init_css_stylesheet().  

Mon Jan 26 23:18:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	Removed the horrible uniform indentation ;-).  

Mon Jan 26 23:03:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c:

	get_css_selector() now has init_css_selector() as internal backend
	and first does find_css_selector() and then init() if that one was
	unsuccessful; similiar to cache_entry obtainers.  

Mon Jan 26 23:01:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add '.' to char token group. It's needed for class selectors.  

Mon Jan 26 23:00:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Group selector functions.  

Mon Jan 26 23:00:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.c, stylesheet.h:

	get_css_selector() -> find_css_selector(), init_css_selector() ->
	get_css_selector() 

Mon Jan 26 22:59:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use scanner_info struct for holding the scanner's scan table and
	scan table initialization info.  

Mon Jan 26 22:57:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Added support for some parsing of id/class/pseudo selectors.  

Mon Jan 26 22:50:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move CSS scan table info up after the char group enum.  

Mon Jan 26 22:44:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix last patch. Only generic scanner stuff. ;) 

Mon Jan 26 22:40:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move generic scanner stuff to start of file.  

Mon Jan 26 22:36:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More assertions for the scan table ranges.  

Mon Jan 26 21:54:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.h, css/apply.c, html/parser.c,
	html/renderer.c:

	Also check color_mode != MONO in the document color macros. Rename
	so their usage is a bit more clear to use_document_(fg|bg)_colors().  

Mon Jan 26 21:15:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Improve the use of use_document_colors and color_mode options.  

Mon Jan 26 20:21:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Blank lines.  

Mon Jan 26 18:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/exmode.c, src/dialogs/menu.c,
	src/sched/action.c:

	Plug exmode into the configuration system (CONFIG_EXMODE).  

Mon Jan 26 18:27:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Surge out the selector parser to css_parse_selector().  

Mon Jan 26 18:06:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Always assume it's ruleset if it's not @rule, not only if the token
	is CSS_TOKEN_IDENT. And couple of TODOs.  

Mon Jan 26 17:20:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	Prefix tokens based on CSS_TOKEN_AT_KEYWORD by AT_.  

Mon Jan 26 11:58:29 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 26 08:14:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Fix backspace quiting so it don't all backspaces.  

Mon Jan 26 08:11:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Map ACT_MAIN_QUIT to ACT_MAIN_REALLY_QUIT.  

Mon Jan 26 08:05:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Backspace in empty buffer now quits.  

Mon Jan 26 08:05:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Cleanup.  

Mon Jan 26 07:00:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode URI rewriting a little more powerful by checking a few
	control chars. ':fm&' or ':g elinks &' will open the rewritten URI
	in a new backgrounded tab while adding a '+' to the end will open in
	a new tab.  

Mon Jan 26 06:26:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Remove leading ':'s from the exmode command.  

Mon Jan 26 06:24:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Rename end -> args.  

Mon Jan 26 06:20:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/exmode.c, protocol/rewrite/rewrite.c,
	protocol/rewrite/rewrite.h:

	Make it possible to use URI rewrite prefixes from the exmode line.
	It involves a little exposing of URI rewrite internals.  

Mon Jan 26 06:07:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Call cancel_dialog() instead of delete_window().  

Mon Jan 26 06:04:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Move action handling to new exmode_handler 'interface'. This will
	make it easier to add more bloat.  

Mon Jan 26 05:50:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: exmode.c, exmode.h, menu.c:

	Add exmode history.  

Mon Jan 26 05:45:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Complete make-over of the exmode handling. We now plug it directly
	into the dialog matrix making it possible to remove tons of
	duplicate code. Besides it will make it easier to get history up and
	running. I don.t expect anyone to read this big patch but understand
	that I think it is justified both because the exmode code is still
	pretty new and so major change should not be a threat to any kind of
	old features and finally "let the garbage man handle the garbage".
	;) 

Mon Jan 26 05:36:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Make it possible to get rid of all that fancy dialog stuff and only
	draw widgets.  

Mon Jan 26 05:06:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	We handle import now as well.  

Mon Jan 26 04:47:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Allocate the exmode buffer with together with the data.  

Mon Jan 26 04:42:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Add dialog struct to exmode_data and make inpfield member reference
	the dialog widget.  

Mon Jan 26 04:16:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode_data->inpfield_data point to
	exmode_data->dlg_data->widget_data.  

Mon Jan 26 04:10:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	get_prefix() -> get_uri_rewrite_prefix(), substitute_url() ->
	rewrite_uri().  

Sun Jan 25 15:28:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/exmode.c:

	Get the exmode rolling by supporting action execution. Also
	':goto-url fm' should work.  

Sun Jan 25 14:43:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Fix Help -> Keys toggling.  

Sun Jan 25 14:24:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Trim the main mappings. Only those currently in use remains.  

Sun Jan 25 14:10:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Trim the menu mappings. Only those currently in use remains.  

Sun Jan 25 14:04:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Moved delete_keybinding() in front of add_keybinding().  

Sun Jan 25 14:03:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	delete_keybinding() now drops @kb's KBDB_DEFAULT flag before
	free_keybinding() so that it's really *always* deleted. However its
	only user add_keybinding() sets KBDB_DEFAULT for the new keybinding
	taking place of the original default keybinding, so that if the new
	one is removed by the user, it is written to the configfile. This
	should fix the tons of none-binds appearing in configfile now.  

Sun Jan 25 13:59:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inphist.c, listmenu.c:

	Fix usage of ACT_MENU_NONE for menu entry actions. We should use
	main mapping everywhere for that.  

Sun Jan 25 13:57:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	I hope this is right. Use edit key map for exmode.  

Sun Jan 25 13:53:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Trim the edit mappings. Only those currently in use remains.  

Sun Jan 25 13:52:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Do not export delete_keybinding().  

Sun Jan 25 13:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Use ACT_EDIT_CANCEL for bailing out of exmode.  

Sun Jan 25 13:20:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Remove actions that are clearly not ACT_MAIN_.  

Sun Jan 25 13:17:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, bfu/text.c, config/dialogs.c, config/kbdbind.c,
	config/kbdbind.h, dialogs/info.c, dialogs/menu.c,
	dialogs/options.c, mime/dialogs.c, sched/action.c,
	viewer/text/link.c, viewer/text/view.c:

	s/ACT_/ACT_MAIN_/. Geronimooooo!! 

Sun Jan 25 13:09:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Swapped action/keymap guessing from item udata, therefore fixing
	adding a keybinding.  

Sun Jan 25 13:05:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	s/ACT_MENU_NONE/ACT_MAIN_NONE/ .. all menu entry actions are really
	main actions.  

Sun Jan 25 13:03:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Trivial tidyup.  

Sun Jan 25 13:03:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	assert() keymap when using it to lookup in action_table[].  

Sun Jan 25 12:52:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inphist.c, listmenu.c, menu.c:

	Use ACT_MENU_NONE for menu actions.  

Sun Jan 25 12:47:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Even more ACT_MENU_ usage.  

Sun Jan 25 12:44:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	More ACT_MENU_ usage.  

Sun Jan 25 12:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, viewer/text/form.c:

	s/ACT_/ACT_EDIT_/ 

Sun Jan 25 12:38:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	s/ACT_/ACT_MENU_/ 

Sun Jan 25 12:03:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Add 'Space' -> ' ' to @key_table and remove its special handling
	from make_keystroke().  

Sun Jan 25 10:19:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Tiny whitespace fix.  

Sun Jan 25 10:18:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	In make_keystroke, if !escape, print '<space>' instead of ' '. This
	affects the keybinding manager and Help->Keys box.  

Sun Jan 25 09:55:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don.t add CSS to globhist.  

Sun Jan 25 09:48:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	menu_keys() message box currently only have on button.  

Sun Jan 25 09:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/options.c, document/options.h, document/css/css.c,
	document/css/css.h, document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, sched/connection.h, sched/session.c:

	Add support for importing external stylesheets. It is done using the
	import callback to add urls to a new document->css_imports string
	list via html_special(). The patch also introduces an option for
	controling whether external stylesheets should be imported
	(document.css.import). Downloading of stylesheets have special
	PRI_CSS priority that amongst other things is used to avoid any
	ses_chktype() calls from file_end_load() so atleast it is useful.  

Sun Jan 25 08:17:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove some pseudo code. It messes up the css import patch.  

Sun Jan 25 07:31:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	When reloading use the original priority for files to load and not
	the hardcoded PRI_FRAME. This is needed for importing CSS documents.  

Sun Jan 25 07:19:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Sort the many CSS options.  

Sun Jan 25 05:02:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/parser.c, css/stylesheet.c,
	css/stylesheet.h, html/parser.c:

	Use callback for imports. It seems more easy and straight forward
	now. Any import will then be loaded and added before the rest of the
	stylesheet it was imported from. For the html parser we will just
	check cache to see if we can go ahead and parse it or need to call
	special_f(). Oh an patch is loaded with fixes for last patch.  

Sun Jan 25 04:20:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Ok .. read_encodede_file() wants the filename in a MAX_STR_LEN
	buffer so let's give it just that so it doesn't cause memory
	corruptions in try_encoding_extensions().  

Sun Jan 25 03:42:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c:

	Support url() imports. It seems importing non existing files cases
	memory corruption.  

Sun Jan 25 03:16:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c:

	We now trim string and url() tokens so token->string and
	token->length only contains the information we are interested in.  

Sun Jan 25 02:35:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Generate url() tokens.  

Sun Jan 25 02:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Try to handle imports for the default stylesheet. Very inefficient.
	We need some merge_stylesheet() and some kind of rating to control
	what gets in and what not.  

Sun Jan 25 02:08:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Add string list import member to struct css_stylesheet.  

Sun Jan 25 01:33:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/stylesheet.h, html/parser.c:

	Use macro for static initialization of stylesheets.  

Sun Jan 25 01:27:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_stylesheet(): Use a switch in the main loop so all @-rule
	tokens are routed to css_parse_atrule().  

Sun Jan 25 01:20:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, sched/session.c, terminal/tab.c,
	util/string.c, util/string.h:

	Make add_to_string_list() take length of added string. -1 means call
	strlen().  

Sun Jan 25 00:27:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/stylesheet.h:

	Describe stylesheet structs.  

Sun Jan 25 00:24:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Put a separator between the togglers and info/reload in the View
	menu.  

Sun Jan 25 00:23:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Moved ACT_RELOAD from File to View. This is maybe a little
	controversial, but well... ;) 

Sun Jan 25 00:21:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	sched/action.c:

	Added ACT_(MAIN_)RERENDER, by default not bound to anything, but
	available through the View menu. It rerenders the current document,
	thing useful in such a wide variety of scenarios.  

Sun Jan 25 00:11:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed more compilation problems.  

Sun Jan 25 00:09:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed misplaced #endif.  

Sun Jan 25 00:09:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Some other compilation fixes.  

Sun Jan 25 00:07:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Some compilation fixes.  

Sun Jan 25 00:04:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	...and also add the missed actions to the other keymap enums.  

Sun Jan 25 00:01:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	Reintroduced actions accidentally removed from enum main_action.  

Sat Jan 24 23:58:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	viewer/text/search.c:

	Use keymap-specific enum names for non-main actions.  

Sat Jan 24 23:55:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Add TODO about updating format cache when default stylesheet has be
	reloaded.  

Sat Jan 24 23:50:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	bfu/menu.h, config/kbdbind.h, dialogs/info.c, sched/action.c,
	sched/action.h, viewer/text/search.c, viewer/text/view.c:

	enum action -> enum {main,edit,menu}_action, edit,menu being just
	mindless clones of main now.  

Sat Jan 24 23:33:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Removed KEYACTS, which has no business in the modern actions
	organization. This also means one dirty'n'quick hack for
	@action_box_items and temporarily disabling menu_keys() toggling
	until the water will be calm again.  

Sat Jan 24 23:25:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Since enum action is gonna be split, remove its usage on places
	where generic non-keymap-specific action number will be used.  

Sat Jan 24 23:14:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Move ACT_SCRIPTING_FUNCTION up in the enum, so that it is grouped
	together with ACT_NONE as universal for all keymaps (by its very
	nature).  

Sat Jan 24 23:11:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/dialogs.c, config/kbdbind.c, config/kbdbind.h,
	sched/action.c:

	The action number is now keymap specific. From the outside the only
	change for now is that write_action() takes keymap along the action
	enum, from the inside the action_table was split into three yet
	identical copies (one for each keymap) and we carry enum keymap
	along enum action everywhere where we didn't yet for some reason.  

Sat Jan 24 22:52:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed toggle_display_action_listboxes() to handle the new
	organization.  

Sat Jan 24 22:52:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Make document.css.stylesheet description more clear.  

Sat Jan 24 22:52:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Make document.css.stylesheet description more clear.  

Sat Jan 24 22:45:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/css.c, protocol/file/file.c,
	protocol/file/file.h:

	Purge all the crappy code I added yesterday in an attempt to import
	css and use read_encoded_file() for sucking in the default css file.  

Sat Jan 24 22:35:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Reorganized the keybinding manager - now the actions are grouped by
	keymap instead of vice versa.  

Sat Jan 24 22:32:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Move file reading specific part of file_func() to separate function.  

Sat Jan 24 21:31:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	Removed trailing comma from the always-to-be-last enum members.  

Sat Jan 24 21:17:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Compilation fixes.  

Sat Jan 24 21:09:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	When keybinding is associated with ACT_NONE, it is like it wouldn't
	exist at all so don't ask for confirmation.  

Sat Jan 24 21:07:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Default keybindings are now flagged appropriatelly and are not
	deleted but just rebound to ACT_NONE, therefore also saved so to the
	configuration file. This should fix removed default keybindings
	reappearing after ELinks restart, reported by many people over the
	ELinks history.  

Sat Jan 24 20:37:54 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jan 24 20:28:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Split bind_config_string() core to single_bind_config_string().  

Sat Jan 24 20:08:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Split add_default_keybindings() to three
	add_keymap_default_keybindings().  

Sat Jan 24 20:05:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	The missing braces around for() body in bind_config_string() were
	making me nervous.  

Sat Jan 24 20:04:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	add_keybinding() reindentation.  

Sat Jan 24 20:03:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	add_keybinding() returns (struct keybinding *) 

Sat Jan 24 19:57:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/css.c:

	Terminate a sentence :-).  

Sat Jan 24 19:55:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Moved add_keystroke_to_string() and add_actions_to_string() from
	default kbdbinds neighbourhood near make_keystroke() where they seem
	to fit more naturally.  

Sat Jan 24 19:53:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Move config file tools at the end of file, particularily after
	default keybindings.  

Sat Jan 24 19:53:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Clarification.  

Sat Jan 24 19:20:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Support for CHECK_DOUBLE_FREE, by default enabled. It reported
	xflows before, which was quite confusing.  

Sat Jan 24 19:08:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Minor tidyup.  

Sat Jan 24 18:24:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/Makefile.am,
	dialogs/exmode.c, dialogs/exmode.h, sched/action.c:

	Basic framework for ex-mode (command line) support, triggered by
	'exmode' action (':'). It does nothing now, some action
	parser/executer needs to be implemented, but that's already work for
	someone else ;-).  

Sat Jan 24 17:57:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Simplify.  

Sat Jan 24 17:46:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	File style="{ ... }" testcase under garbage.  

Sat Jan 24 17:31:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Tidyup.  

Sat Jan 24 17:29:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix infinite loop in property parser when handling style="{ ... }".
	Reported by Zas.  

Sat Jan 24 13:00:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val_(): simplify test_only mode, just return as soon we
	found matching atttribute.  

Sat Jan 24 12:52:17 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 24 12:36:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_num(): use strtol() and a long variable @num, then check range
	and then only type cast to int. More correct, imho.  

Sat Jan 24 10:25:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Note one textmode User-Agent token user (OSNews.com) at least, shall
	someone even think about removing it.  

Sat Jan 24 10:25:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Describe the 'textmode' token.  

Sat Jan 24 10:09:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Do not dump @full_static_version twice if CONFIG_BACKTRACE and
	segfault was forced by force_dump().  

Sat Jan 24 10:08:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Try to make the I-crashed epitaph more brief so that the actually
	useful info is less likely to scroll out of the screen.  

Sat Jan 24 03:35:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, stylesheet.c:

	Use free_list(). Hmm.  

Sat Jan 24 02:53:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Move selector initialization to separate function.  

Sat Jan 24 02:41:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/parser.c:

	Move style sheet and selector stuff to own file.  

Sat Jan 24 02:04:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/Makefile.am, css/apply.c, css/css.c,
	css/parser.c, css/parser.h, css/stylesheet.c, css/stylesheet.h,
	html/parser.c:

	Move style sheet and selector stuff to own file.  

Sat Jan 24 01:17:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Try to hint that document.css.stylesheet is relative to ELinks' home
	dir.  

Fri Jan 23 23:59:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.h, parser.h:

	Add some small meditations about cascading and default stylesheets.  

Fri Jan 23 22:31:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Less confusing comment.  

Fri Jan 23 22:25:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	English fixes, little more applier info.  

Fri Jan 23 22:13:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/css.h:

	Prototypes instead of #inculdes.  

Fri Jan 23 20:59:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 23 20:26:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Fix segfault when document.css.stylesheet couldn't be loaded. Always
	empty the default stylesheet before reloading.  

Fri Jan 23 20:12:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix comment eating so we do the @string testing inside first if ().  

Fri Jan 23 20:08:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Make it possible to reimport default stylesheet. You still need to
	^R because css imports are async.  

Fri Jan 23 20:00:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, document/css/css.c:

	Move CSS options and change hook to module definitions.  

Fri Jan 23 19:27:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/Makefile.am,
	document/css/Makefile.am, document/css/apply.c, document/css/css.c,
	document/css/css.h, modules/module.c:

	Add support for a default stylesheet from which to get info about
	HTML layout. It is still a bit buggy. E.g. don't set
	document.css.stylesheet to a file that doesn't exist. ;) 

Fri Jan 23 19:24:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Move main module initialization back. No initializer should use
	options.  

Fri Jan 23 19:18:18 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val() was slightly modified to be more efficient. It was
	renamed to get_attr_val_() which takes two new parameters
	@test_only, used by has_attr() and @eat_nl used by get_url_val(). In
	test_only mode, it just test for attribute existence, so it dont
	allocate any memory for value, nor it does useless parsing or string
	conversion. Global variable @get_attr_val_eat_nl is gone.  

Fri Jan 23 18:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Init main modules after the option system has been booted so
	initializers can access options ;).  

Fri Jan 23 17:46:41 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 23 17:33:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Assume sizeof(void *) == sizeof(long).  

Fri Jan 23 09:37:42 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Jan 23 06:26:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Introduce char group of other token start chars so we can bail out
	eailer if the token is garbage.  

Thu Jan 22 23:48:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	If we don't use smart checking there is no need for a smart value.  

Thu Jan 22 23:29:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Add support for URI rewriting from the command line.  

Thu Jan 22 22:55:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Put some use to the second member of scan_table_info.data.string.  

Thu Jan 22 22:26:17 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/garbage.html:

	Better garbage.  

Thu Jan 22 22:18:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Our current text-decoration parsing is invalid.  

Thu Jan 22 22:17:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	Introduced css_parse_text_decoration_value(). NEVER overload single
	function for disjunct properties! 

Thu Jan 22 22:01:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	English fix.  

Thu Jan 22 21:40:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Make current->type token type checking against NONE/SKIP more
	explicit and also simpler.  

Thu Jan 22 21:38:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	English grammar fix.  

Thu Jan 22 21:37:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Fixed memory leak in do_tab_compl() triggered when there were no
	completion possibilities.  

Thu Jan 22 21:26:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	FIXME about unbased sizeof() equivalence assumptions.  

Thu Jan 22 21:18:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Enabled document.css.enable by default. It is important to let the
	CSS support to be extensively tested by people.  

Thu Jan 22 21:14:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	In ident2type(), use strlcasecmp() for token matching so that ie.
	'me' won't match 'media' (or is that ok?).  

Thu Jan 22 21:11:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Removed redundant identifiers2type record.  

Thu Jan 22 21:06:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	English grammar fixes.  

Thu Jan 22 20:53:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.c:

	Make sure someone won't pollute our nice clear simple code with
	fastfind too soon ;-).  

Thu Jan 22 20:47:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	Jonas is too French.  

Thu Jan 22 19:34:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove unneeded #includes.  

Thu Jan 22 19:32:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidyup comment.  

Thu Jan 22 19:31:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	The universal (match all) selector '*' is also a char token.  

Thu Jan 22 18:45:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Oops no revert plain render change from last patch. :/ 

Thu Jan 22 18:43:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/parser.c, css/parser.h, plain/renderer.c:

	Add comments to functions and one TODO.  

Thu Jan 22 18:34:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Add grammar info from ELusive as comments.  

Thu Jan 22 18:27:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_selector() -> css_parse_ruleset().  

Thu Jan 22 18:19:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	Removed unused @display variable.  

Thu Jan 22 18:09:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Revert my two last patches to the renderer. The one adding link
	state enum to struct link_state_info and the one trying to remove
	link_state updating hacks from put_chars(). They broke numbered
	links.  

Thu Jan 22 17:46:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Moved parse_frame_widths() & co from document/html/parser.* to
	document/html/frames.*.  

Thu Jan 22 16:22:21 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/osdep/osdep.c:

	Fixed xterm detection - except DISPLAY check also if either WINDOWID
	or KONSOLE_DCOP_SESSION env variable is present.  

Thu Jan 22 07:25:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move up identifier scanning.  

Thu Jan 22 06:49:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Bug in SGML logic.  

Wed Jan 21 18:16:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup.  

Wed Jan 21 17:49:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make the madness really end.  

Wed Jan 21 17:40:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Compile fix.  

Wed Jan 21 17:39:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Unify SGML tagsoup navigation and use native scanners to make it
	much more forgiving.  

Wed Jan 21 17:05:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidyup comments.  

Wed Jan 21 17:02:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Introduce a skip token and made CSS_TOKEN_NONE again mean stop
	scanning.  

Wed Jan 21 16:21:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Treat ".<number>%" as garbage so it is not broken up.  

Wed Jan 21 16:05:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Call update_link_state() those places that call put_chars(). Remove
	various hacks that did it before.  

Wed Jan 21 16:01:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add link state enum to struct link_state_info and use that in
	put_chars(). get_link_state() is now simply an updater.  

Wed Jan 21 15:49:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move link state information to a new struct link_state_info.  

Wed Jan 21 15:36:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Yuk .. another hack to solve memleaks because of changing link
	states. We have to globalize that thing somehow. Reported by lindi-
	and excellent test case by fabiob.  

Wed Jan 21 10:09:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/options.h,
	document/renderer.c, document/plain/renderer.c, sched/action.c,
	viewer/text/view.c, viewer/text/view.h, viewer/text/vs.h:

	Wrapping plain text support switched by Shift+W.  

Wed Jan 21 06:19:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	Check precedence of the current token so we do not skip '}' when
	looking for ';'. Fixes background property strangeness.  

Wed Jan 21 06:11:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle numbers starting with dots.  

Wed Jan 21 05:46:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	get_css_identifier_type(): Do length calculation + rename to
	ident2type() to minimize wrapping.  

Wed Jan 21 05:39:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix skipper that didn.t break out when getting to skipto char.  

Wed Jan 21 05:20:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	get_css_identifier_type(): Drop the inline. Cleanup.  

Wed Jan 21 05:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Ensure ending ')' even for rgb() function tokens. Use the ident2type
	table to check for known functions.  

Wed Jan 21 05:05:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Pass base type to identifier resolver. Fixes resolving and speeds up
	the lookup.  

Wed Jan 21 04:44:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	Generate specific @-keyword tokens. Required a little renaming of
	number identifier to type mapping.  

Wed Jan 21 04:29:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Tidyup definitions.  

Wed Jan 21 04:25:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	CSS_TOKEN_ATRULE -> CSS_TOKEN_AT_KEYWORD.  

Wed Jan 21 04:18:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Update comments and remove CSS_TOKEN_NAME.  

Wed Jan 21 04:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	There is no name token. It is only used for hashes.  

Wed Jan 21 04:03:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h:

	Make css_parse_properties() take scanner as argument. This means the
	applier needs to know about the scanner but it is really a paint to
	debug when property parsing spawns a new scanner + it is less
	efficient of course.  

Wed Jan 21 03:54:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	Tidyup.  

Wed Jan 21 03:45:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Moved dumping of scanner to dump_css_scanner().  

Wed Jan 21 03:04:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make the scanner debugging much more powerful showing both the
	generated tokens and compressed src position.  

Wed Jan 21 01:46:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove the used scanner function from debug info. It don.t work very
	well.  

Wed Jan 21 01:20:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make get_css_token_() into a macro.  

Wed Jan 21 01:00:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make get_next_css_token_() into a macro.  

Wed Jan 21 00:38:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	check_next_css_token(): Make it into a macro. With the amount of
	sanity checking we have now it should be safe.  

Wed Jan 21 00:27:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move scanner sanity checking to exits of scan_css_tokens().  

Wed Jan 21 00:11:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Return the current token.  

Wed Jan 21 00:02:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Unbytesize move_to_front. I was thinking about making
	scanner->tokens a pointer but that seems stupid now.  

Tue Jan 20 22:25:37 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, widget.h:

	Handling of mouse with text scrollbar was improved. Using right
	click will make it to scroll faster, and mouse wheel is now handled.  

Tue Jan 20 20:40:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the scanners current a css_token pointer.  

Tue Jan 20 20:09:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Make move_to_front byte sized.  

Tue Jan 20 20:00:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Make current a css_token pointer.  

Tue Jan 20 18:25:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make scan table initialization data driven. It is very generic and
	more readable (I hope). A bit slower but I am really a sucker for
	data driven coding. ;) 

Tue Jan 20 18:18:40 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Jan 20 17:49:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	Rearrange token types to group them better. Add comments. Rename
	CSS_TOKEN_IDENTIFIER to CSS_TOKEN_IDENT. It wouldn.t be C without
	abbreviations. ;) 

Tue Jan 20 17:28:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Generate hash tokens.  

Tue Jan 20 17:15:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Take precedence and string args into considerations when skipping
	functions.  

Tue Jan 20 17:12:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	More garbage.  

Tue Jan 20 16:40:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Improve precedence checking.  

Tue Jan 20 16:13:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Oops revert part from last patch and fix rgb comparison.  

Tue Jan 20 16:12:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Try to skip comments.  

Tue Jan 20 15:59:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	Use smarter scanning of functions skipping to ')' if it is unknown
	so tokens are not generated for every arg.  

Tue Jan 20 15:18:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	m33p.  

Tue Jan 20 15:12:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	Update.  

Tue Jan 20 14:57:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Don't remove garbage token as they might be used for some kind of
	recovery. 'None token' can now be used for tokens we want to skip
	plus it should now be more obvious that scanner->position could have
	become NULL.  

Tue Jan 20 07:05:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Make link type parser more data driven.  

Tue Jan 20 06:25:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Alphabetise css token types.  

Tue Jan 20 06:22:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Treat SGML comments as garbage.  

Tue Jan 20 05:11:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix assertion failure reported by Zardoz. It concerned string like
	"property:" with no expressions meaning skipping could not get next
	token.  

Tue Jan 20 04:54:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	Test case for the bug Zardoz pointed out.  

Tue Jan 20 04:37:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	Tidy-up: Wrap before &&, not after, and join a hanging ')' with the
	line above.  

Tue Jan 20 04:33:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	Drop some double-negation in look_for_tag and html_option.  

Tue Jan 20 02:37:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add more TODOs. Will we ever be done? 

Tue Jan 20 02:30:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle scanning of number identifiers.  

Tue Jan 20 02:12:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use strn* .. Doh! 

Tue Jan 20 02:09:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	First scan the number then the kind of number.  

Tue Jan 20 02:00:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	In order to handle end of tags when getting style info from <style>
	tags we need better signaling of whether to keep scanning since the
	CSS source doesn't end at the string end. We now recognize SGML tag
	ends in the scanner and generate a CSS_TOKEN_NONE while also setting
	scanner->position to NULL.  

Tue Jan 20 01:42:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_token(): Don't return anything.  

Tue Jan 20 01:05:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Two optimizations: never scan token if the scanner positon is at the
	end, never put garbage tokens in the token table.  

Tue Jan 20 00:56:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make token types default to CSS_TOKEN_GARBAGE.  

Tue Jan 20 00:44:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix off by one error in SGML comment scanning.  

Tue Jan 20 00:43:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Scan !important tokens.  

Tue Jan 20 00:37:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Add types for all kinds of token we have to support. If not for
	usage it will make the scanning more efficient.  

Tue Jan 20 00:23:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle scanning of floating point numbers.  

Tue Jan 20 00:16:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix SGML comment scanning.  

Tue Jan 20 00:13:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	CSS_TOKEN_DIGIT -> CSS_TOKEN_NUMBER 

Tue Jan 20 00:11:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Move css_token_type enum out of the css_token struct and describe
	tokens using patterns.  

Mon Jan 19 23:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make scan_css_tokens() static.  

Mon Jan 19 23:48:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Cleanup scanner validation.  

Mon Jan 19 23:31:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More paranoia checking. Make sure never to return CSS_TOKEN_NONE
	typed token.  

Mon Jan 19 23:21:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More usage of css_scanner_has_tokens() before accessing the scanners
	table.  

Mon Jan 19 23:10:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Be more paranoid and don't count in CSS_TOKEN_NONE tokens.  

Mon Jan 19 22:37:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use macros in checks.  

Mon Jan 19 22:36:15 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 19 22:04:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	<b> tag is not also red.  

Mon Jan 19 21:56:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	E&nbsp;L&nbsp;i&nbsp;n&nbsp;k&nbsp;s 

Mon Jan 19 21:35:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Disable CSS by default. It is highly experimental and Zardoz pointed
	out that http://blogs.law.harvard.edu/tech/2004/01/19 caused a
	strange assertion failure.  

Mon Jan 19 21:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h,
	modules/module.c, modules/module.h:

	Add a main_modules table. First entry is a module for the document
	subsystem. It will make it easy to move document options to
	document/options or even separate document/subdir file.  

Mon Jan 19 21:17:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Added assertions to check that the scanner token table is properly
	aligned, meaning checking the next token will be safer and will
	never force a rescan.  

Mon Jan 19 20:35:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c, modules/module.h:

	Module table handlers now take the table as arg.  

Mon Jan 19 19:58:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, document/options.c,
	document/options.h, document/html/parser.c:

	Make it possible to disable CSS support. Enabled by default.  

Mon Jan 19 19:26:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Support for adding properties to already defined selectors.  

Mon Jan 19 19:25:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	Add test for adding properties to an already known selector.  

Mon Jan 19 19:20:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Revert bad part of last patch.  

Mon Jan 19 19:19:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c:

	Minor optimization if no selectors have been added.  

Mon Jan 19 19:18:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix scary macros and loopings not enclosed in brackets.  

Mon Jan 19 19:01:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h:

	Move CSS selector lookup to separate function.  

Mon Jan 19 18:53:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Try to handle precedens of special char tokens when skipping.  

Mon Jan 19 18:52:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	We need to stop at '}' tokens when parsing properties of selectors.  

Mon Jan 19 18:48:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	More <style> tests.  

Mon Jan 19 17:05:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Describe why to use @props and now @properties.  

Mon Jan 19 17:03:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/apply.h, css/parser.c,
	css/parser.h, html/parser.c:

	Minimal support for grabbing CSS properties from <style> tags. Only
	clean html element selectors are handled.  

Mon Jan 19 17:00:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Fix last patch.  

Mon Jan 19 16:55:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Use list_head pointers preparing for the invasion of <style>
	handling. Uh oh and some renaming too. ;P 

Mon Jan 19 16:51:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	Add a test for using properties from <style> tags.  

Mon Jan 19 16:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the CSS scanner generate tokens for SGML comments.  

Mon Jan 19 14:43:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the scanner generate atrule tokens containtin @<ident>.  

Mon Jan 19 13:35:02 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/apply.c:

	Don't apply colors from styles if
	document.colors.use_document_colors is 0.  

Mon Jan 19 07:05:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Set string token type.  

Mon Jan 19 06:29:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	We cannot get rid of string delimiters because token->length is set
	later in the function .. but it should not matter.  

Mon Jan 19 06:25:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Cleanup.  

Mon Jan 19 06:10:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Fix comments.  

Mon Jan 19 06:05:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidy up.  

Mon Jan 19 06:03:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Store debug related info in the scanner struct so they do not have
	to be passed to the functions even when CSS scanner debug is
	disabled.  

Mon Jan 19 05:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Update scanner comments.  

Mon Jan 19 05:49:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Remove garbage macro.  

Mon Jan 19 01:02:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Remove old TODO.  

Mon Jan 19 01:00:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/: simplefont.html, simpletext.html:

	Add text-decoration: underline tests.  

Mon Jan 19 00:56:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, property.c, property.h, value.c:

	Add support for text-decoration: underline.  

Mon Jan 19 00:43:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Add comments to the rbg() parsers loop.  

Mon Jan 19 00:30:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Even use scanner for background property expression parsing.  

Mon Jan 19 00:24:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	css_parse_color_value(): Use the scanner for parsing. This partly
	introduces spaghetti code in the rbg() handling. But we use a loop
	so it should be easy to move things to separate function if we want
	maybe even some generic function arg scanner.  

Mon Jan 19 00:20:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Yes .. ermh buffer overflows .. that should be my apartment. This
	one got fixed tho' ;/ 

Mon Jan 19 00:02:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Also skip the % when scanning percentage tokens.  

Sun Jan 18 23:54:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add comma to char token list. Needed for function scanning.  

Sun Jan 18 22:59:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/simplecolors.html:

	Add test cases for short hex colors.  

Sun Jan 18 22:58:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	No need to touch slen.  

Sun Jan 18 22:57:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Add support for handling the short hexcolor format used by CSS.  

Sun Jan 18 22:48:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Check that hexcolors have the correct length. And disable debug
	flags.  

Sun Jan 18 22:38:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add support for scanning CSS strings.  

Sun Jan 18 22:25:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add CSS_TOKEN_FUNCTION that contains '<ident>(' string.  

Sun Jan 18 21:31:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove unused macro.  

Sun Jan 18 21:29:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add position member for maintaining where in the string the scanner
	should start scanning next. Well make it easier to debug and also
	simplifies code.  

Sun Jan 18 21:04:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Ensure that move_to_front in non negative.  

Sun Jan 18 20:51:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Be a little less buggy in scan_css_tokens(). I really hate
	memmove()s and this lowlevel coding.  

Sun Jan 18 20:15:38 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Sun Jan 18 20:11:05 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Sun Jan 18 18:21:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.h, value.c:

	Introduce macro to calculate the length of 'static' strings. They
	can cause bugs + we are lazy and like simple code.  

Sun Jan 18 18:11:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-style values.  

Sun Jan 18 18:06:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-* weight values. We should
	maybe have some get_css_token_number() that can handle both
	CSS_TOKEN_DIGIT and CSS_TOKEN_PERCENTAGE.  

Sun Jan 18 18:01:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-* identifier values.  

Sun Jan 18 17:57:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	css_parse_font_weight_value(): Use token types to see what to do.  

Sun Jan 18 17:54:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Digits can be part of name tokens so check if digit first when
	scanning.  

Sun Jan 18 17:48:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing text-align values.  

Sun Jan 18 17:43:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: property.h, value.c, value.h:

	Pass the scanners along to the value parsers that will yet only work
	on the string of the first token. Had to backend color value
	parsing.  

Sun Jan 18 17:24:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	The scanner is so kind to skip whitespace for us so obsolete
	skip_whitespace() call.  

Sun Jan 18 17:20:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, value.c, value.h:

	Make css_parse_value() take scanner arg instead of string.  

Sun Jan 18 17:14:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): code simplication.  

Sun Jan 18 17:13:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Move CSS_SCANNER_DEBUG macro to c file.  

Sun Jan 18 17:12:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Group function and macro definitions with the various structs.  

Sun Jan 18 17:09:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Don't use inlined scan table accessors and mutators.  

Sun Jan 18 17:09:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	foreach_values() macro was dropped. Reindentation.  

Sun Jan 18 17:02:39 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	This is a descriptive commit message.  

Sun Jan 18 17:00:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): check for @number greater than 100 if
	in percentage.  

Sun Jan 18 16:59:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Fixed superfluous @string shifting in rgb_component_parser(),
	spotted by Jonas.  

Sun Jan 18 16:59:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Sort alphabetically, spotted by Jonas.  

Sun Jan 18 16:47:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Minor cleanup and fix of scan table initialization.  

Sun Jan 18 16:45:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.c:

	Bound css_property_info by CSS_PT_LAST.  

Sun Jan 18 16:44:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c, src/document/css/property.c,
	src/document/css/property.h, src/document/css/value.c,
	src/document/css/value.h, test/css/simplecolors.html:

	Support for background property. It is broken in certain testcases
	but maybe it's scanner bug, I don't know, I'm not in the mood of
	tracing through 100 inlined scan_css_token() calls.  

Sun Jan 18 16:44:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): check for abnormally large @number
	values and prevent bad things by falling back to wildcard value.  

Sun Jan 18 16:35:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): initialize val to -1, use @number
	directly.  

Sun Jan 18 16:29:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some now useless initializations were dropped.  

Sun Jan 18 16:26:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Trailing whitespaces cleanup.  

Sun Jan 18 16:25:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.h, scanner.h:

	Improve comment.  

Sun Jan 18 16:24:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Fix typo.  

Sun Jan 18 16:24:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): part of it was moved to
	extract_rows_or_cols_values(). Use static for these new functions.  

Sun Jan 18 16:22:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Describe (as pasky so gracefully suggested) css_scanner.  

Sun Jan 18 16:12:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): handle returned value as it should, and fix a
	typo.  

Sun Jan 18 16:12:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Comment struct css_token.  

Sun Jan 18 16:08:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): a part of it was moved to
	distribute_rows_or_cols_that_left().  

Sun Jan 18 15:59:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Try to make it more clear the difference between char tokens and non
	char tokens. Non char tokens now start at 256.  

Sun Jan 18 15:59:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): a part of it was moved to
	distribute_rows_or_cols().  

Sun Jan 18 15:53:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	Moved CSS_TOKEN_NON_ASCII_END (*shudder*) to the end of the enum,
	therefore all the other tokens will have sane enum values.  

Sun Jan 18 15:52:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	CSS_TOKENS makes no sense in arbitrarily-numbered enum, therefore
	better remove it or it will confuse someone.  

Sun Jan 18 15:47:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	#include elinks.h 

Sun Jan 18 15:46:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): shorter lines by using a macro as @values
	iterator.  

Sun Jan 18 15:41:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/Makefile.am, css/parser.c,
	css/scanner.c, css/scanner.h:

	Introduce a CSS token scanner.  It maintains up to 10 tokens at a
	time to minimize the number of scans.  For scanning a scan table is
	used (idea by mozilla).  Only used in css_parse_properties() to
	minimize the impact.  

Sun Jan 18 15:38:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): localize @tmp_val.  

Sun Jan 18 15:34:54 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): fastmem mode minor optimization, let use
	alloca() here if possible.  

Sun Jan 18 15:32:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed unused variables.  

Sun Jan 18 15:32:33 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Removed the circular dependency hack, it results in a circular
	dependency even here now (dunno what happenned), so maybe it was
	silently resolved...  

Sun Jan 18 15:32:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): code flow cleanup.  

Sun Jan 18 15:30:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Assert for value_type in value parsers.  

Sun Jan 18 15:29:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	font-style and font-weight now uses separate value parsers.  

Sun Jan 18 15:28:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): localize and assert @divisor.  

Sun Jan 18 15:25:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	css_property_info.parser is now used instead of css_value_parsers[],
	which evaporated. Therefore the value parsers are now exported.  

Sun Jan 18 15:25:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): Use a loop instead of a goto, localize @number
	and @tmp_values.  

Sun Jan 18 15:19:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	css_value_parser_t is now redundant to css_property_value_parser 

Sun Jan 18 15:19:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): Use @tmp variable to cache calculations
	result.  

Sun Jan 18 15:18:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	css_value_parser_t now takes (struct css_property_info *) as its
	first argument.  

Sun Jan 18 15:14:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @nn -> @flag, local.  

Sun Jan 18 15:12:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): some comments were added.  

Sun Jan 18 15:10:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/.vimrc, src/bfu/.vimrc, src/bookmarks/.vimrc,
	src/bookmarks/backend/.vimrc, src/cache/.vimrc, src/config/.vimrc,
	src/cookies/.vimrc, src/dialogs/.vimrc, src/document/.vimrc,
	src/document/html/.vimrc, src/document/plain/.vimrc,
	src/encoding/.vimrc, src/formhist/.vimrc, src/globhist/.vimrc,
	src/intl/.vimrc, src/intl/gettext/.vimrc, src/lowlevel/.vimrc,
	src/mime/.vimrc, src/mime/backend/.vimrc, src/modules/.vimrc,
	src/osdep/.vimrc, src/osdep/beos/.vimrc, src/osdep/os2/.vimrc,
	src/osdep/riscos/.vimrc, src/osdep/unix/.vimrc,
	src/osdep/win32/.vimrc, src/protocol/.vimrc,
	src/protocol/auth/.vimrc, src/protocol/file/.vimrc,
	src/protocol/ftp/.vimrc, src/protocol/http/.vimrc,
	src/protocol/rewrite/.vimrc, src/protocol/smb/.vimrc,
	src/sched/.vimrc, src/scripting/.vimrc, src/scripting/guile/.vimrc,
	src/scripting/lua/.vimrc, src/ssl/.vimrc, src/terminal/.vimrc,
	src/terminal/graphics/.vimrc, src/terminal/text/.vimrc,
	src/util/.vimrc, src/viewer/.vimrc, src/viewer/dump/.vimrc,
	src/viewer/graphics/.vimrc, doc/.vimrc, src/viewer/text/.vimrc,
	doc/book/.vimrc, doc/book/config/.vimrc, doc/book/info/.vimrc,
	doc/book/intro/.vimrc, doc/book/manpages/.vimrc, doc/man/.vimrc,
	doc/man/man1/.vimrc, doc/man/man5/.vimrc, doc/tools/.vimrc,
	po/.vimrc, m4/.vimrc:

	. is now appended to 'runtimepath' instead of setting 'runtimepath'
	to .,$VIMRUNTIME, therefore evading ~/.vimrc etc.  

Sun Jan 18 15:07:51 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @m -> @maxval, @mj -> @maxpos.  

Sun Jan 18 15:06:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: .vimrc, parser.c, value.c, value.h:

	css_parse_value() now takes (struct css_property_info *) instead of
	{enum css_property_value_type}.  

Sun Jan 18 15:05:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @q -> @val, @qq -> @tmp_val.  

Sun Jan 18 15:03:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @oo -> @tmp_values, @n -> @number.  

Sun Jan 18 15:01:28 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @o -> @values, @ol -> @values_count.  

Sun Jan 18 14:58:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @op -> @new_values, @olp -> @new_values_count.  

Sun Jan 18 14:55:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @ww -> @max_value, @www -> @pixels_per_chars.  

Sun Jan 18 14:53:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Introduced css_property_info.(parser|parser_data). Unused yet.  

Sun Jan 18 14:52:55 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @a -> @str, @aa -> @tmp_str.  

Sun Jan 18 14:50:12 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @d -> @divisor.  

Sun Jan 18 14:43:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.c, property.h, value.c:

	CSS_DP_* -> CSS_PT_*, CSS_DV_* -> CSS_VT_* 

Sun Jan 18 14:41:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Clarify {struct css_property} description.  

Sun Jan 18 14:37:56 2004  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh, configure:

	Removed ./configure and ./configure-do -> ./configure, therefore
	restoring the original situation. This solution is not going to fly,
	./configure gets overwritten by automake rules.  

Sun Jan 18 14:25:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, property.h:

	css_property*.property -> .type 

Sun Jan 18 14:23:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: value.c, value.h:

	Tidyup.  

Sun Jan 18 14:23:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, parser.h:

	css_parse_decl -> css_parse_properties 

Sun Jan 18 14:22:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.h, value.c, value.h:

	css_decl_value -> css_property_value, css_decl_valtype ->
	css_property_value_type -> css_decl_property -> css_property_type 

Sun Jan 18 14:18:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Try to clarify more css_property_info.value_type.  

Sun Jan 18 12:54:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.h:

	Update css_parse_decl() description.  

Sun Jan 18 12:50:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Trivial clarification.  

Sun Jan 18 03:01:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, property.c, property.h:

	Remove @namelen from property info struct. It will be useles when we
	switch to fast find and we do not use it for other string to data
	mapping structs.  

Sun Jan 18 02:55:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/Makefile.am, css/parser.c,
	css/property.c, css/property.h:

	Move CSS property info to own file and expose css_property_info[].  

Sun Jan 18 02:40:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_decl(): Localize loop variables.  

Sun Jan 18 02:38:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.h:

	css_parse_decl(): Update comment.  

Sun Jan 18 02:36:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Minor cleanup.  

Sun Jan 18 02:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_decl(): Use while loop. Nothing changed other than
	indentation and removal of again label.  

Sun Jan 18 02:28:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fun with gotos so we don't parse declarations recursively anymore.  

Sun Jan 18 01:57:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Add css value type info to property_info struct. ObsoletesM
	prop2valtype.  

Sun Jan 18 01:50:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, parser.h:

	css_parse_decl(): Don't return anything. Caller can check
	list_empty() to see if anything was added.  

Sun Jan 18 01:48:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Remove function comment that is also in the header file.  

Sun Jan 18 00:59:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, config/conf.c, lowlevel/home.c:

	Use the new confdir/conffile option names (config-dir/config-file).  

Sun Jan 18 00:56:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Fixed -confdir/-conffile.  

Sun Jan 18 00:29:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	-confdir -> -config-dir, -conffile -> -config-file, idea by Doug
	Kearns <djkea2@mugca.its.monash.edu.au>.  

Sun Jan 18 00:17:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	I'm sorry Zas, but you *knew* this is coming. Please split it up.  

Sun Jan 18 00:16:11 2004  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, Makefile.am, autogen.sh, configure:

	autoconf ./configure -> ./configure-do. ./configure is for now a
	trivial wrapper but will do some automagic feature.h rewriting and
	so. You will need to rm ./configure && cvs up && ./autogen.sh after
	this commit.  

Sun Jan 18 00:10:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Complete parse_frame_widths() cleanup. Changes made do not affect
	behavior. Among them, explicit variables names, minor trivial
	optimizations, got rid of a goto, comments. Sorry, this patch is
	quite big but concerns only this function, and i did not want to
	flood with cvs commits ;).  

Sat Jan 17 23:20:52 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Jan 17 23:16:19 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jan 17 23:05:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Converted Jonas' strlcasecmp()s to strncasecmp()s, which actually
	make sense :^). Should fix 'text-align: right;' bug reported by
	Jonas.  

Sat Jan 17 22:49:40 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Hotkey conflicts fixes.  

Sat Jan 17 22:12:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Fixed string shufflink in TEXT_ALIGN value parser.  

Sat Jan 17 22:11:32 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Jonas' div right; testcase.  

Sat Jan 17 22:04:49 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Also a <div> test.  

Sat Jan 17 21:22:41 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Added text-align tests.  

Sat Jan 17 21:18:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Compilation fix.  

Sat Jan 17 21:17:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, property.h, value.c:

	Added support for text-align property.  

Sat Jan 17 20:24:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.h, value.c:

	Fixed support for lighter and normal values of font-* properties.  

Sat Jan 17 19:59:17 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplefont.html:

	Enhance the font-weight: normal testing.  

Sat Jan 17 19:53:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Added support for font-weight lighter, bolder and normal.  

Sat Jan 17 19:52:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	About current big design problems.  

Sat Jan 17 19:43:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed redundant skip_whitespace() from FONT_ATTRIBUTE parser.  

Sat Jan 17 19:40:26 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplefont.html, src/document/css/apply.c,
	src/document/css/parser.c, src/document/css/property.h,
	src/document/css/value.c:

	font-style property support.  

Sat Jan 17 17:35:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Alphabetize.  

Sat Jan 17 16:46:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/Makefile.am:

	Fixed linking of the CSS code.  

Sat Jan 17 16:46:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Sort CSS appliers like the css_decl_propery enum.  

Sat Jan 17 16:46:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed obsolete TODOs.  

Sat Jan 17 16:45:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Cleaned up the spaghetti rgb() parsing code by moving the color
	component extraction to rgb_component_parser().  

Sat Jan 17 16:36:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, apply.h, parser.c,
	property.h, value.c, value.h:

	Moved {struct css_property} from apply.h to property.h.  

Sat Jan 17 16:26:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.h:

	Moved generic stuff from parser.h to README.  

Sat Jan 17 16:23:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.h:

	Removed redundant struct list_head.  

Sat Jan 17 16:23:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.h, README, Makefile.am:

	Moved generic stuff from parser.h to README.  

Sat Jan 17 16:01:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/Makefile.am, css/apply.c, css/apply.h,
	css/css.c, css/css.h, html/parser.c:

	document/css/css.* -> document/css/apply.* 

Sat Jan 17 15:54:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, css.c, parser.c,
	parser.h:

	Moved the current stub of future CSS parser from document/css/css.*
	to document/css/parser.*.  

Sat Jan 17 15:46:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.h:

	Typo fix.  

Sat Jan 17 15:45:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, css.c, value.c, value.h:

	Moved CSS value parser from document/css/css.* to
	document/css/value.*.  

Sat Jan 17 15:40:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Removed already obsolete TODO.  

Sat Jan 17 15:36:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.h, css.h:

	Update the _H define.  

Sat Jan 17 15:32:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Oops, include document/css/css.h.  

Sat Jan 17 15:32:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Moved value parsing to separate functions.  

Sat Jan 17 15:25:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Statify the appliers.  

Sat Jan 17 15:22:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.h, css.h:

	Include some stuff required by {struct css_property}.  

Sat Jan 17 15:21:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/css/apply.c,
	document/css/css.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c, sched/session.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	Moved document/html/parser.h inclusion to the usual place, since it
	should be safe now.  

Sat Jan 17 15:18:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: Makefile.am, internal.h, parser.c, parser.h,
	renderer.c, tables.c:

	Moved the aggressive format/par_format #defines (together with
	html_top and html_stack) from document/html/parser.h to
	document/html/internal.h.  

Sat Jan 17 15:05:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, apply.h, css.c, css.h:

	Export {struct css_property}.  

Sat Jan 17 14:59:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Compilation fix.  

Sat Jan 17 14:57:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Moved proprety applying to separate functions.  

Sat Jan 17 14:49:07 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/idnes_mail.html:

	This is a nice test for font-weight, color, background-color on body
	etc. And it's all inlined in the style attributes.  

Sat Jan 17 14:44:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Make sure that background-color property on body element gets
	handled properly. Well, it's a mess.  

Sat Jan 17 14:38:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Compilation fix.  

Sat Jan 17 14:33:43 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/: simplecolors.html, simplefont.html:

	Separated font-related tests to simplefont.html, making them also
	more elaborate.  

Sat Jan 17 14:26:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c, apply.h, css.h:

	css_apply() now returns void instead of int because we do not use
	the return value anywhere anyway. Proposed by Jonas.  

Sat Jan 17 14:18:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/opttypes.c, cookies/parser.c,
	document/html/parser.c, document/html/tables.c,
	protocol/http/header.c, protocol/smb/smb.c, util/string.h:

	Removed the WHITECHAR() macro, we use the standard builtin isspace()
	macro instead which should be completely equivalent.  

Sat Jan 17 14:16:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/css/apply.c, document/css/css.c, util/string.h:

	Make util/string.h directly include its prerequisite <ctype.h>.  

Sat Jan 17 14:12:34 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	Made the bold tests a little more explicit.  

Sat Jan 17 14:09:39 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/dialogs/document.c:

	Made the Document info msgbox scrollable, usable ie. for long
	titles/urls (test/longtitle.html). Patch by David A. Capello
	<dacap@users.sourceforge.net>.  

Sat Jan 17 14:06:22 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/document/Makefile.am,
	src/document/html/Makefile.am, src/document/html/css.c,
	src/document/html/css.h, src/document/html/parser.c,
	src/document/css/Makefile.am:

	document/html/css.* -> document/css/css.* 

Sat Jan 17 07:49:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Make the font-weight evaluation correct. Values pointed out by
	Miciah.  

Sat Jan 17 07:43:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Make property name to property enum data driven.  

Sat Jan 17 07:23:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Add support for font-weight (bold) support.  

Sat Jan 17 07:22:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/simplecolors.html:

	Add background-color and font-weight tests.  

Sat Jan 17 06:45:38 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sat Jan 17 02:24:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Handle the background-color property.  

Sat Jan 17 02:09:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Use skip_whitespace() macro.  

Sat Jan 17 01:56:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	open_current_link_in_new_tab(): Merge in get_tab_link_url(). Fix
	leak related to url list introduction previous today.  

Sat Jan 17 01:53:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	Specialize open_in_new_tab() to open current link in new tab. Rename
	to open_current_link_in_new_tab().  

Sat Jan 17 01:50:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Call open_url_in_new_tab() directly.  

Sat Jan 17 01:48:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Merge backend for 'tab openers' with open_url_in_new_tab().  

Sat Jan 17 01:43:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	Make open_in_new_tab() more generic to also handle backgrounded
	tabs.  

Sat Jan 17 01:29:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/Makefile.am:

	We actually don't use libhtml.a anywhere, so it'd be good to say so.  

Sat Jan 17 01:26:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, css/apply.c, css/apply.h, css/css.c,
	css/css.h, html/Makefile.am, html/css.c, html/css.h, html/parser.c:

	Very trivial CSS support introducted. It includes mostly the most
	basic framework for the style managment (basically just a temporary
	properties list), bunch of ideas in comments, and the initial
	css_apply(), which now just orders parsing of the element's style
	attribute (no real stylesheet yet, therefore). Oh and only 'color'
	property is supported for now, however it should be easy to
	introduce more. Have fun.  

Sat Jan 17 01:21:15 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	Very simple test case for the 'color' property specified in the
	'style' attribute of an element.  

Sat Jan 17 01:20:11 2004  Petr Baudis <pasky@ucw.cz>:

	* test/Makefile.am:

	New css/ directory.  

Sat Jan 17 01:09:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Rename @i to @current_frame_number and initialize it to 0 if it is
	-1 (no frame has been chosen yet). This fixes drawing of title for
	backgrounded tabs containing frame documents.  

Sat Jan 17 00:27:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, util/string.c, util/string.h:

	Define a string item struct for string lists moving list members out
	of struct string. Requested by pasky.  

Sat Jan 17 00:11:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: util/color.c, util/color.h, config/options.c,
	document/html/parser.c, config/opttypes.c:

	decode_color() now takes the source string length as an additional
	argument.  

Sat Jan 17 00:05:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/color.c:

	Make more use of @slen in decode_color().  

Fri Jan 16 23:49:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, sched/session.c, sched/session.h,
	terminal/tab.c:

	Use string lists instead of url_list structure and remove lot of
	trivial boring code.  

Fri Jan 16 23:48:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Add support for string lists. This adds list members to struct
	string but since we mostly use it via local variables it should not
	have a big impact.  

Fri Jan 16 22:31:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	do_open_in_new_tab(): Only add an url to list if it is non NULL
	since we test !list_empty() in process_session_info().  

Fri Jan 16 20:30:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Skip the 'MAP@' part of uris when dumping link references.  

Fri Jan 16 20:26:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Only dump link titles which are not empty.  

Fri Jan 16 20:08:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, config/cmdline.h:

	Simplify the composing of the @url_list by using function variable
	and passing the list_head pointer to parse_option(). Let
	parse_option() return the first url again to simplify @url setup.  

Fri Jan 16 19:50:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	No empty @url in the case where the url list returned from
	parse_options() is empty is also a fatal error.  

Fri Jan 16 18:51:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor fastmem mode optimization in parser.  

Fri Jan 16 18:21:05 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c, config/cmdline.h,
	sched/session.c, sched/session.h, terminal/tab.c:

	Support for more than one url on command line. ELinks will open new
	tabs for them. For now, -dump and -source will only consider first
	url given (ideas?). Patch by Witold Filipczyk, slightly modified by
	me.  

Fri Jan 16 18:09:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	We the normal people put system include to other system includes. We
	do not want to end up again like Links or some other software
	packages, do we? 

Fri Jan 16 17:49:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: .cvsignore, .vimrc:

	Add control files.  

Fri Jan 16 16:30:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Update link_state using get_link_state() safer since there might be
	some corner cases.  

Fri Jan 16 16:29:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix the leak related to <sub> and <sup> the Right Way[tm].  

Fri Jan 16 16:18:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Revert last patch. It broke link numbering.  

Fri Jan 16 15:35:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Make the HTML renders link_state variable global so recursive calls
	to put_chars() also updates the outer put_chars() link_state. Should
	fix leaks related to links in <sub> and <sup> tags.  

Fri Jan 16 14:49:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add some temporary assertions for detecting leak in the renderer.  

Thu Jan 15 22:51:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use directly @doc_view when gettin current link for globhist.  

Thu Jan 15 22:51:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, session.h:

	Introduced get_current_link_in_view() which is same as
	get_current_link() but takes directly struct document_view as an
	argument.  

Thu Jan 15 22:51:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, session.h:

	Introduced get_current_link_in_view() which is same as
	get_current_link() but takes directly struct document_view as an
	argument.  

Thu Jan 15 22:36:11 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Jan 15 21:44:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use get_current_link() to get @historyitem, instead of copy of the
	code.  

Thu Jan 15 21:30:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A missing header inclusion was added.  

Thu Jan 15 17:34:27 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Simplify and fix scroll_menu(). It now behaves like it should when
	paging down in View menu.  

Thu Jan 15 17:02:24 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Simplify menu_page_(up|down)().  

Thu Jan 15 16:11:18 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Move menu page up/down code to separated functions.  

Thu Jan 15 16:04:19 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix a segfault occuring when pressing page down on empty Link
	submenu of main menu.  

Thu Jan 15 05:01:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Rename a few functions' parameters and local variables from @down to
	@file_download 

Thu Jan 15 04:41:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Create a new function, is_in_downloads_list, to check whether the
	passed struct file_download * is in @downloads (the global variable
	that points into the list of running file downloads).  
	
	Replace the equivalent code in display_download with a call to this
	function.  
	
	In common_download_do and continue_download_do, only add
	@file_download to the download manager _after_ calling load_url or
	change_connection, respectively, and only if
	is_in_downloads_list(file_download).  
	
	This fixes a bug reported by dacap on IRC whereby ELinks would crash 
	when one attempted to download a file while the download manager was
	open.  

Wed Jan 14 19:54:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Add temporary fix for redrawing after calling find_next*(). It broke
	during do_action() generalization.  

Wed Jan 14 18:22:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/download.c:

	Swap two lines. This should fix bug 366.  

Wed Jan 14 18:00:06 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fix.  

Wed Jan 14 17:40:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bug 231 (memory corruption in html renderer) should be fixed now.
	Patch by Miciah and me.  

Wed Jan 14 17:10:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	bfu/menu.h, config/dialogs.c, config/kbdbind.c, config/kbdbind.h,
	dialogs/info.c, sched/action.c, sched/action.h,
	viewer/text/search.c, viewer/text/view.c:

	Rename keyact enum to action. Function names changed to reflect
	this.  

Wed Jan 14 16:53:06 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Binding keys to ACT_NONE is useful to get rid of default
	keybindings. Suggested by Jonas.  

Wed Jan 14 12:25:21 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Jan 13 18:46:57 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updated.  

Tue Jan 13 16:13:24 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Jan 13 15:37:41 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Do not display ACT_NONE action in keybinding manager, bind keys to
	this action is useless.  

Tue Jan 13 15:05:32 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix mouse click detection on main menu (introduced by main menu
	previous patch).  

Tue Jan 13 14:54:39 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, mime/dialogs.c:

	FREE_ANY macro is now used to shorten lines, it is equivalent to
	(FREE_LIST|FREE_TEXT|FREE_RTEXT|FREE_DATA).  

Tue Jan 13 14:48:51 2004  Laurent Monin <zas@norz.org>:

	* src/mime/dialogs.c:

	No need to pass @xxx to do_menu(), just use NULL instead. Safer
	imho.  

Tue Jan 13 14:41:41 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some assertions were added (related to bug 366).  

Tue Jan 13 14:26:48 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix handling of various spacing in main menu.  

Tue Jan 13 14:22:55 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listmenu.c:

	Use macros to check end of menu.  

Tue Jan 13 14:13:15 2004  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	Move ACT_NONE at start of enum keyact and use zero as value for it.
	It was breaking contextual menus display and perhaps other stuff.  

Tue Jan 13 08:45:53 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 12 18:23:07 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Updated italian translation.  

Sun Jan 11 22:16:17 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sun Jan 11 18:18:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	GPLv2 only. Reminded by Jonas.  

Sun Jan 11 18:13:57 2004  Petr Baudis <pasky@ucw.cz>:

	* COPYING:

	Removed ELusive part for the foreseeable future.  

Sun Jan 11 17:48:25 2004  Petr Baudis <pasky@ucw.cz>:

	* COPYING:

	GPLv2, not any future version.  

Sun Jan 11 05:41:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/status.c, sched/task.c:

	Instead of zeroing the session's 'visited' flag in display_tab_bar, 
	zero it in ses_forward.  
	
	This is more logical and efficient, as we now zero the flag once, 
	when we finish loading the page, instead of repeatedly, once every
	time we update the tab bar, from when we first start trying to load
	the page to when we finish or fail.  
	
	More importantly, it fixes a bug whereby we would leave the tab
	highlighted as freshly loaded even if the page failed to load.  

Sat Jan 10 11:16:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 10 11:03:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Made -confdir/-conffile captions more consistent and fixed -confdir
	description. Idea by Doug Kerans <djkea@mugca.its.monash.edu.au>.  

Sat Jan 10 06:10:36 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Fri Jan  9 21:30:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Explode count_menu_size() in 4 functions.  

Fri Jan  9 21:04:19 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Got rid of @s, and initialize mx to zero.  

Fri Jan  9 20:48:01 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	count_menu_size() was cleaned and fixed. Next step will be to cache
	text and rtext widths, as well as display-related infos, it will
	simplify things a lot (we currently make and remake many useless
	calculations) 

Fri Jan  9 15:20:59 2004  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bfu/menu.c:

	Use constants and make calculations explicit, code simplification,
	MENU_HOTKEY_SPACE disappears, locally defined macros replace it,
	improving code clarity.  

Fri Jan  9 14:14:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	...except this little mistake. Fixed segfaults when opening menu
	thru kbd.  

Fri Jan  9 14:14:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reverted bogus Miciah' fix, what we did previously was ok...  

Fri Jan  9 14:07:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Fix segfaults resulting from pasky's menu-handler butchering.
	(@win->data->win is _not_ the same as @win.) 

Fri Jan  9 13:12:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/backend/xbel.c:

	In the XBEL bookmark code, when adding a folder, do not bother to
	set ->root or ->box_item->type, as add_bookmark does that for us.  

Fri Jan  9 13:07:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	Itty-bitty whitespace fix.  

Fri Jan  9 12:57:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	#undef macros once we're done with them.  

Fri Jan  9 12:38:30 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Added feature.h. Oops.  

Fri Jan  9 11:08:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Pass @fwd to mainmenu_kbd_handler().  

Fri Jan  9 11:08:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved @s from mainmenu_handler() to mainmenu_kbd_handler().  

Fri Jan  9 11:00:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Readded DIST macro, which got chopped most of it off during
	reindentation.  

Fri Jan  9 10:56:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In draw_menu_left_text_hk, rename the @len parameter to @hotkey_pos.  

Fri Jan  9 10:51:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Remove an inaccurate comment.  

Fri Jan  9 10:44:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved menu/kbd event handling from mainmenu_handler() to
	mainmenu_(mouse|kbd)_handler().  

Fri Jan  9 10:40:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Blanklines.  

Fri Jan  9 10:39:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved menu/kbd event handling from menu_handler() to
	menu_(mouse|kbd)_handler().  

Fri Jan  9 10:38:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	#undef macros once we're done with them.  

Fri Jan  9 10:36:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Remove useless test. Spotted by Miciah.  

Fri Jan  9 10:27:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file/file.c:

	In stat_user and stat_group, don't check for the case where a
	successful stat(2) call gives a uid or gid of -1. If it ever does,
	why not humour the system and proceed to use the values it has
	provided to us? 

Fri Jan  9 10:25:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use @menu->selected instead of @s. Spotted by Miciah.  

Fri Jan  9 10:22:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed the Jonas' strangeness.  

Fri Jan  9 10:09:31 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Revert last patch, it was correct. Sorry, Miciah ;).  

Fri Jan  9 09:52:55 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Start on first main menu item displayed. Suggested by Miciah.  

Fri Jan  9 09:42:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Do not give the B_ENTER flag to the 'Do not show anymore' button in
	the 'Write config success' box.  

Fri Jan  9 09:36:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	When closing the current tab, switch to the previous tab _first_, so
	that the next tab doesn't lose its 'unvisited' highlighting.  

Fri Jan  9 09:31:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Fix session saving to bookmark tabs from left to right.  

Fri Jan  9 09:27:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Remove an obsolete comment.  

Fri Jan  9 09:26:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Update a comment: s/item_free/flags/ 

Fri Jan  9 09:14:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Remove the @link parameter from get_tab_link_url. The parameter only
	says whether to return NULL or to actually do something, so move
	that check to the callers.  

Fri Jan  9 07:20:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Include util/ttime.h for ttime.  

Fri Jan  9 01:22:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	I hope this is strange enough.  

Fri Jan  9 01:10:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Remove a few ending action description dots.  

Fri Jan  9 01:08:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Minor cleanup of action listbox initialization. No longer gettext
	action names but only the descriptions.  

Fri Jan  9 01:06:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Add description to 'none' action.  

Fri Jan  9 00:43:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Don't add listbox for ACT_SCRIPTING_FUNCTION since we hide it anyway
	and the current generic hierbox handling always unhides all root
	level boxes.  

Fri Jan  9 00:21:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix off by one error, which is really not my fault because we
	skipped 'none' before.  

Fri Jan  9 00:14:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Alphabetise action_table and keyact enum. Hmm 

Thu Jan  8 23:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix startup goto dialog. Patch by Zardoz.  

Thu Jan  8 23:26:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/options.h, config/options.inc,
	mime/backend/mailcap.c:

	We only use alias description and captions for commandlines so no
	need to store them for 'regular' options.  

Thu Jan  8 22:26:04 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	automatic session saving/restoring support 

Thu Jan  8 22:22:23 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.9.CVS. Please backport all the relevant bugfixes to REL_0_9_1rc1
	branch. Expected 0.9.1-final release: Sunday. What a mess.  

Thu Jan  8 22:15:46 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.9.1rc1 

Thu Jan  8 22:14:57 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	Revert extra patch made by Jonas. It has nothing to do there.  

Thu Jan  8 22:14:44 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	now: feature.h and <object>.  

Thu Jan  8 22:08:11 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Thu Jan  8 22:03:15 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Jan  8 22:03:08 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Jan  8 22:00:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Typo fix.  

Thu Jan  8 21:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Jan  8 21:54:48 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 21:54:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c,
	document/renderer.c:

	Hmm or was it document.browse.forms.input_size. :-P 

Thu Jan  8 21:51:12 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Jan  8 21:48:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	'Twas document.browse.forms.input_size.  

Thu Jan  8 21:43:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	document.html.default_forms_input_size ->
	document.browse.frames.input_size. It wasn't introduced that long
	ago so I think it doesn't deserve an alias ;-).  

Thu Jan  8 21:26:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	get_bgcolor() now again bails out when it smells mono color_mode.
	Zas removed this, but he didn't mention it in the log message so I
	believe it was just a mistake.  

Thu Jan  8 21:17:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Add the ELinks VERSION header only when we are writing the file from
	scratch.  

Thu Jan  8 21:07:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Sort Document :: Cache options.  

Thu Jan  8 21:00:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Punct. fix.  

Thu Jan  8 18:37:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	dialogs/info.h, dialogs/menu.c, sched/action.c:

	Add resource-info action and cleanup res_info() renaming it to
	resource_info() and trimming args.  

Thu Jan  8 17:58:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Update elinks.conf.5 copyright and sync with current option tree.  

Thu Jan  8 17:53:06 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Thu Jan  8 17:49:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Various fixes and cleanups.  

Thu Jan  8 17:24:37 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarion translation update.  

Thu Jan  8 17:17:36 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Remove ending dots in captions.  

Thu Jan  8 17:14:41 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Extend caption test to i18n captions.  

Thu Jan  8 16:58:17 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French grammar fixes.  

Thu Jan  8 16:53:04 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	ELinks version is now written at top of configuration file.  

Thu Jan  8 16:07:48 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Only add a slash to config file name when needed, it prevents double
	slashes in filename displayed in message boxes.  

Thu Jan  8 15:41:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 15:25:18 2004  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Touch option when toggling, suggested by Jonas, and test for term in
	write_config_success().  

Thu Jan  8 14:59:53 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 14:57:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, sched/session.c:

	Rename ui.sessions.homepage_url to ui.session.homepage, and change
	the behaviour so that "" means use getenv(WWW_HOME) instead. Also
	restore the fallback to WWW_HOME_URL.  

Thu Jan  8 14:56:35 2004  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, dialogs.c:

	Test for ui.success_msgbox was moved to write_config_success(). A
	new button [ Do not show anymore ] permits to toggle
	ui.success_msgbox from the message box.  

Thu Jan  8 14:25:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Do a little wrapping to make it possible to call enter() through
	do_frame_action().  

Thu Jan  8 14:19:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/: options.h, html/parser.c, html/renderer.c:

	Use macros to wrap comparaisons of use_document_colors.  

Thu Jan  8 13:47:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/: options.c, options.h, html/parser.c,
	html/renderer.c:

	Use "colors" instead of "colours" since it seems the first one is
	the most used in ELinks code.  

Thu Jan  8 13:37:08 2004  Laurent Monin <zas@norz.org>:

	* src/: document/options.c, viewer/text/marks.c:

	Trailing spaces fixes.  

Thu Jan  8 13:32:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Jan  8 13:28:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c:

	Normalise exit_prog(). It now takes a @query argument inverting the
	previous meaning.  

Thu Jan  8 13:13:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, lowlevel/signals.c:

	Don't call exit_prog() but queue terminal destruction directly.
	exit_prog() is a high level ui function and should not be called
	from a signal handler.  

Thu Jan  8 10:04:05 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 09:53:06 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/action.c, sched/session.c,
	sched/session.h:

	As requested by Jonas, ui.sessions.homepage_url option now controls
	default homepage. And ui.sessions.ignore_www_home permits to force
	use of ui.sessions.homepage_url value instead of env. var. WWW_HOME.
	Note that WWW_HOME_URL still exists in setup.h and is used as
	default value for ui.sessions.homepage_url 

Thu Jan  8 09:09:35 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	Typo fixes.  

Thu Jan  8 03:48:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix action for submit-form-reload.  

Thu Jan  8 03:44:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c:

	Introduce submit-form and submit-form-reload actions mostly to use
	them for menus and simplify submit_form_do() [renamed to
	submit_form()] by calling it through do_frame_action().  

Thu Jan  8 03:28:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c:

	Introduce reset-form action and handle it in do_action() making it
	possible to handle form reseting entries in the link menu via the
	action object model and frontend reset form via do_frame_action().  

Thu Jan  8 03:15:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	do_action(): Handle enter and enter-reload for menu code. Nuke
	send_enter_reload().  

Thu Jan  8 02:50:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup double up on action kbd_action() call.  

Thu Jan  8 02:48:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Complete merging of send_event() stuff with do_action(). Quit.  

Thu Jan  8 02:34:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle quit and lua-console actions.  

Thu Jan  8 02:23:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Woopsi, forgot to check whether !anonymous before downloading link.  

Thu Jan  8 02:20:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Another adventures simplification. Merge frm_download() goodies into 
	download_link().  We do not need the link->type checking parts since 
	get_link_url() will take care of those for us. Instead of passing
	some new enum the action enum is passed to download_link(), much
	simpler. As for the "MAP@" checking it should hopefully not harm
	anything else we could surround it in ACT_DOWNLOAD or something.  

Thu Jan  8 02:02:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	Another big simplification possible by using do_frame_action() as
	front end.  It is now used to handle download and download-image
	actions.  send_download() is now equivalent to download_link().  

Thu Jan  8 01:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Make it possible to pass magic numbers to the do_frame_action()
	@func handler.  

Thu Jan  8 01:34:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Rename send_image() to view_image() and use it through
	do_frame_action().  

Thu Jan  8 01:26:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c:

	do_action(): Handle image and link menu actions. Eh patch is bloated
	by a few cleanups.  

Thu Jan  8 01:09:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Backend the goto url bi'nez using the get_current_*url() functions.  

Thu Jan  8 00:57:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	do_action(): Handle the rest of the goto url actions.  

Thu Jan  8 00:39:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Move goto home page code to separate function to keep the switch
	noodle clean.  

Thu Jan  8 00:29:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Move lots of action handling from send_event() to do_action().  

Wed Jan  7 23:53:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Bug when trying to get_opt_*() an alias.  

Wed Jan  7 23:26:12 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  7 23:24:29 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Debug mode helper to detect ending dot in option captions. It will
	emit a debug message in this case.  

Wed Jan  7 22:55:37 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Ending dot was removed in option caption.  

Wed Jan  7 21:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, viewer/text/search.c:

	Move typeahead options to document.browse.search.* and make them
	more generic so they might even be used for other search actions.  

Wed Jan  7 20:02:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	html_iframe() now handles id as a synonymum to name attribute.  

Wed Jan  7 20:01:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Implemented very simplistic, quick'n'dirty <object> element support.
	Now it just wraps either html_iframe() or html_img() or it just does
	nothing. You can test it ie. at http://digitasaru.net/ (the
	navbar.html is an object of type text/html).  

Wed Jan  7 19:32:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c:

	menu_save_url_as() -> save_url_as() and drop some args.  

Wed Jan  7 19:27:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Use local term variable.  

Wed Jan  7 19:18:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	terminal/terminal.c, terminal/terminal.h:

	Rename menu_shell() to exec_shell() and move to terminal files.  

Wed Jan  7 19:11:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_frame_action(): Assert the view state.  

Wed Jan  7 19:08:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Rename menu_save_formatted() to save_formatted_dlg() and use
	do_frame_action() as backend (or is it front end ;).  

Wed Jan  7 18:57:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	More #include fixes related to the recent action patches.  

Wed Jan  7 18:52:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, terminal/tab.c,
	viewer/text/view.c:

	Remove / fix #includes related to the recent action patches.  

Wed Jan  7 18:26:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Mention what '~' in string mean that hotkeys should be unique.  

Wed Jan  7 17:02:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle save-* actions. Saving formatted should always
	be interactive so we hardcode that in menu_save_formatted() now.  

Wed Jan  7 16:46:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Update the anonymous setup menu to use the new *buzz* action object
	model *buzz ;-) 

Wed Jan  7 16:42:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Save option and open terminal option dialog was added.  

Wed Jan  7 16:29:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	Move some frame related action handling to do_action(). It uses
	do_frame_action() as a backend which is just a moved version of
	menu_for_frame().  

Wed Jan  7 15:23:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c:

	Introduce INIT_MENU_ACTION() to decrease the noise of unused
	arguments.  

Wed Jan  7 14:53:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Use add_menu_action() in link_menu().  

Wed Jan  7 14:47:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c, viewer/text/link.c:

	Make add_menu_action() reflect that no data can be passed. Also
	purge the flag arg since it is not used.  

Wed Jan  7 14:44:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, sched/action.c, sched/action.h,
	viewer/text/view.c:

	do_action(): Don't take any data arg. We handle that in the
	function.  

Wed Jan  7 14:41:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/link.c,
	viewer/text/view.c:

	Move bookmark adding action handling to do_action().  

Wed Jan  7 12:13:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/link.c,
	viewer/text/view.c:

	Move ACT_OPEN_* handlers to do_action().  

Wed Jan  7 08:44:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  7 03:49:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, bookmarks/dialogs.h, dialogs/menu.c,
	sched/action.c:

	Handle ACT_BOOKMARK_TABS in do_action(). Normalise the dialog to
	only take the terminal.  

Wed Jan  7 03:47:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Ensure we are not in anonynous mode before autosaving.  

Wed Jan  7 03:42:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Don.t add bookmark entries when running in anonymous mode.  

Wed Jan  7 03:18:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, bookmarks/dialogs.h, cache/dialogs.c,
	cache/dialogs.h, config/dialogs.c, config/dialogs.h,
	cookies/dialogs.c, cookies/dialogs.h, dialogs/download.c,
	dialogs/download.h, formhist/dialogs.c, formhist/dialogs.h,
	globhist/dialogs.c, globhist/dialogs.h, sched/action.c:

	Normalise manager functions. They are nolonger menu functions so
	there is no need to pass bogus arguments to them.  

Wed Jan  7 03:02:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Presenting the missing good parts from last patch. Removing
	#includes. I sense a small break in the moaning from paskys build
	box.  

Wed Jan  7 02:57:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Oops forgot to remove menu functions so do_action() is used.  

Wed Jan  7 02:53:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Remove a superfluous |continue| introduced in
	src/document/html/renderer.c:1.254->1.255.  

Wed Jan  7 02:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: globhist/dialogs.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle the manager actions. Also drop the anonymous
	checking since unwanted buttons will not be shown. For globhist
	manager it basicly becomes more like the cache manager, and
	option/keybinding manager will only let the user read descriptions
	and do we really want to deprive anonymous users this educational
	experience? ;-) 

Wed Jan  7 02:01:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Move the rest of the document option toggling in send_event() to
	do_action().  

Wed Jan  7 01:57:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Ahh the joy of generalization. Toggling document option that is.  

Wed Jan  7 01:22:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, dialogs/menu.c, dialogs/menu.h,
	sched/Makefile.am, sched/action.c, sched/action.h,
	viewer/text/view.c:

	Move do_action() to separate file.  

Wed Jan  7 01:09:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_event(): Use do_action().  

Wed Jan  7 00:58:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, dialogs/menu.c, dialogs/menu.h:

	Optionalize whether to bug or not when the action was not handled
	and also return the action if it handled or ACT_NONE. This should
	make it usable for send_event() later.  

Wed Jan  7 00:40:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/renderer.c, viewer/text/link.c, viewer/text/link.h:

	Finish the moving of sort_links() by also moving done_link_members()
	used by it and others only in document/. Fix #include of stdlib.h
	for qsort (on FreeBSD atleast).  

Wed Jan  7 00:38:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Instead of defining a wrapper function for each sub menu define
	do_submenu() and pass the sub menu items as the data.  

Wed Jan  7 00:21:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	do_action(): Handle close all tabs but current action and normalize
	the function since it no longer needs to be a menu function.  

Wed Jan  7 00:12:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Handle most used toggling actions.  

Wed Jan  7 00:06:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Handle ACT_DOCUMENT_INFO, ACT_HEADER_INFO and
	ACT_KILL_BACKGROUNDED_CONNECTIONS.  

Tue Jan  6 23:59:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	It was unanimously decided to use minimize instead of shrink.  

Tue Jan  6 23:39:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Insert all unhandled actions so it will be easier to
	muddle on.  

Tue Jan  6 23:26:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	Add ACT_CACHE_SHRINK action and use it for do_action(). The concept
	is muddled so I chose shrink since to me it only indicates some best
	effort kind of thing but the action description should be quite
	clear.  

Tue Jan  6 23:02:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Add ACT_RELOAD handling.  

Tue Jan  6 22:55:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Add ACT_GOTO_URL and sort actions alphabetically for
	now.  

Tue Jan  6 22:47:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Blast menu wrappers in favour of do_action() handling.  

Tue Jan  6 21:48:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, viewer/text/link.c,
	viewer/text/link.h:

	Moved sort_links() from viewer/text/link.c to document/renderer.c.
	It really operates on {struct document} exclusively, so it really
	belongs to document/.  

Tue Jan  6 21:43:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Add a notice to the force_dump() that what happenned is not a
	regular segfault but rather an internal error, and therefore users
	shouldn't report it as a segfault but internal error. Really tired
	of those 'ELinks segfaulted' reports, being just assertion failures
	in disguise.  

Tue Jan  6 21:00:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/menu.h:

	Introduce do_action() for handling session oriented actions. It can
	hopefully gradually evolve into some backend for frame_ev() or
	send_event(). To start with it is used for menus since - after Zas'
	menu action hacking - we begin to use generic action event handlers.
	It is called when the menu function is NULL and the action !=
	ACT_NONE. A macro add_menu_action() ease the dynamic adding of such
	menu entries.  

Tue Jan  6 19:35:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix bookmark adding from plain document (where link->name is NULL)
	and improve the 'name' by checking if globhist can provide us with a
	title.  

Tue Jan  6 06:28:15 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/dialogs/status.c:

	Displaying of received after resume was broken.  

Mon Jan  5 19:47:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Fix compiling globhist with warnings. The write timer is unused.  

Mon Jan  5 19:44:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Add missing #include <stdarg.h> 

Mon Jan  5 16:55:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/download.c:

	Removed ancient FIXME, I'm not gonna fix anything anymore :-).  

Mon Jan  5 13:33:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Use tab instead of bunch of spaces to indent link target.  

Mon Jan  5 13:32:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Fixed an off-by-one overflow when iterating through links.  

Mon Jan  5 11:29:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Remove unused menu macro.  

Mon Jan  5 11:11:19 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	gcc flag -fno-inline was removed (--enable-debug mode). It causes
	compilation failure with old gcc/glibc. Errors like undefined
	reference to __strcpy_small are shown, and linking fails.  

Mon Jan  5 08:51:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	Print the title with each link when a title is available.  

Mon Jan  5 08:42:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	In the dump output, when printing the link footnotes below the
	document, include the first link.  

Mon Jan  5 06:14:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In page_down, remove some useless assignments to @newpos, which were
	introduced in src/viewer/text/view.c:1.302->1.303.  

Mon Jan  5 05:51:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Remove do_format, which was made a pretty well useless wrapper in
	src/document/html/renderer.c:1.344->1.345, and instead call
	parse_html directly from format_html_part.  

Mon Jan  5 04:54:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: osdep/os2/os2.c, viewer/text/view.c, util/error.h:

	Update a few occurrences of the error(), debug(), wdebug(), and
	internal() macros (now ERROR(), DBG(), WDBG(), and INTERNAL(),
	respectively) in comments and commented-out code.  

Sun Jan  4 23:40:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Use dynamic menu interface for tab completion menus.  

Sun Jan  4 20:57:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Fix the is-that-a-folder check introduced by zas.  

Sun Jan  4 20:54:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Removed some seemingly forgotten condition if (range) in the middle
	of source.  

Sun Jan  4 20:36:26 2004  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	pasky.ji.cz -> pasky.or.cz 

Sun Jan  4 20:18:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.h:

	Name the listbox item type enum so we can use exact type in
	functions.  

Sun Jan  4 20:02:42 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Jan  4 18:56:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: download.c, status.c, status.h:

	Move download_is_progressing() to header (that is now included in
	the .c file) so it can be used by the download dialog code.  

Sun Jan  4 18:13:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.h:

	Declare input_history now used for global_history.  

Sun Jan  4 17:53:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Update copyright.  

Sun Jan  4 17:42:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Sun Jan  4 16:54:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Removed some funny semicolons.  

Sun Jan  4 16:47:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 16:22:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.inc:

	Introduced ui.success_msgbox which controls displaying of the
	file-was-saved-successfully msgbox. Like it would be so difficult,
	Jonas and Zas.  

Sun Jan  4 16:20:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/dialogs.c, config/dialogs.h,
	dialogs/options.c:

	Moved options saving success reporting from individual save button
	handlers to write_config_file().  

Sun Jan  4 15:56:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 15:41:15 2004  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/conf.h, config/dialogs.c,
	dialogs/options.c:

	A success message is now displayed when options and terminal options
	are sucessfully saved through UI.  

Sun Jan  4 15:40:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	display_timer() tidyup.  

Sun Jan  4 15:05:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, globhist/globhist.c:

	Use macros to add to and delete from input_history.  

Sun Jan  4 15:04:40 2004  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Option modify/info dialogs now shows valid range for boolean,
	integer, and long types.  

Sun Jan  4 15:03:03 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.h:

	Use long type for struct option min and max fields since value may
	be long.  

Sun Jan  4 14:53:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Cleanup and unify finalizers.  

Sun Jan  4 14:40:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Cleanup.  

Sun Jan  4 14:11:22 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Show a simple message when pressing Info on a folder in an hierbox
	browser. "Press space to expand this folder." is now displayed in
	this case. It works in Cookies manager. Jonas please check if it is
	done as it should or not.  

Sun Jan  4 11:57:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/: dialogs.c, globhist.c, globhist.h:

	Replace global_history_list with input_history. 'One struct to rule
	them all ..' Well maybe we should s/input_history/history_list/ but
	it makes good sense .. also in the perspective of history modules.  

Sun Jan  4 11:42:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Remove usage of struct globhist_cache_entry that only takes up extra
	memory since struct hash_item does all the work.  

Sun Jan  4 06:21:29 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Jan  4 01:47:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 01:42:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/: history.c, history.h:

	Comment out the definition and use of compress_history (introduced
	in src/sched/history.c:1.59->1.60 and src/sched/history.h:1.23->1.24
	to fix bug 309) as they were preventing session items from beïng
	added when one follows a link in a frame or a link to a fragment
	identifier on the current page.  

Sun Jan  4 01:40:36 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	Add -fno-inline to CFLAGS when gcc and --enable-debug are used. It
	permits to get more meaningfull backtrace.  

Sun Jan  4 00:56:29 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listmenu.c:

	Some TODO were added.  

Sun Jan  4 00:44:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Test was simplified.  

Sun Jan  4 00:40:45 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Testing against NULL is done in strlcasecmp(), extra test was
	removed.  

Sun Jan  4 00:38:08 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Prevent useless computation of constant string length by caching its
	value. Test with strlcasecmp() were simplified since now NULL string
	is correctly handled. An assertion was added to check name and
	*name.  

Sun Jan  4 00:20:31 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_text() will now simply return on negative length case, when
	assertions are disabled.  

Sun Jan  4 00:17:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	An assertion failure was fixed. It was triggered by resizing
	download dialog in progress to a very low width: negative length for
	text, badly accepted by draw_text().  

Sun Jan  4 00:07:50 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Some assertions were added to resize_screen(). Use size_t type
	instead of int for size and bsize variables.  

Sat Jan  3 23:43:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Remove functions that are now macros.  

Sat Jan  3 16:04:42 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/listmenu.h, document/html/parser.h, viewer/text/form.c:

	Now useless header declarations were removed. bfu/listmenu.h is now
	included in viewer/text/form.c.  

Sat Jan  3 15:10:26 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Include listmenu.h.  

Sat Jan  3 15:10:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Last bits of list menus changes.  

Sat Jan  3 15:08:46 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: Makefile.am, listmenu.c, listmenu.h:

	List menu functions were moved from parser.c to separate files.  

Sat Jan  3 15:07:43 2004  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	clr_spaces() was moved from document/html/parser.c to conv.c. It is
	needed since next patch will move list menu functions to
	bfu/listmenu.{c,h}.  

Sat Jan  3 13:59:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, cookies/dialogs.c:

	Make it possible to remove cookie folders.  

Sat Jan  3 13:12:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c,
	cookies/dialogs.c:

	Cookies are now grouped by server. Patch contains some changes to
	make clearing work. It is still not possible to delete a server
	folder.  

Sat Jan  3 13:08:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/palette.inc:

	Compilation fix for CONFIG_256_COLORS.  

Sat Jan  3 11:56:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Backend add_listbox_item().  

Sat Jan  3 11:07:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, listbox.h:

	Add free_empty_folder member to listbox_item.  

Sat Jan  3 10:58:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.h, listbox.h:

	Move up the listbox_item depth member and define it to -1 for
	hierbox_browser root boxes.  

Sat Jan  3 06:53:19 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	Now executables (when not in CGI path) are displayed as normal
	files.  Displaying of error dialog box was annoying.  

Sat Jan  3 01:11:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/Makefile.am:

	Fixed linking parsetst when having separate srcdir and builddir,
	patch by Harold L Hunt II <huntharo@msu.edu>.  

Sat Jan  3 01:11:31 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, Makefile.base:

	Fixed make testutils when having separate srcdir and builddir, patch
	by Harold L Hunt II <huntharo@msu.edu>.  

Fri Jan  2 22:06:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Remove unused variables left untouched from last patch. BTW Miciah
	pointed out the suspicious code that lead to the fix.  

Fri Jan  2 21:58:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Whoops major bookmark corruption since we do smarter text management
	and this part was not updated.  

Fri Jan  2 20:05:44 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed hotkey conflict.  

Fri Jan  2 19:54:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, util/color.c:

	Better cast the color to (unsigned long), to stay safe on 16-bit
	systems.  

Fri Jan  2 19:33:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cache/cache.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	init_listbox_item() -> add_listbox_item().  

Fri Jan  2 18:37:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bfu/listbox.c,
	bookmarks/bookmarks.c, bookmarks/bookmarks.h, bookmarks/dialogs.c,
	cache/cache.c, cache/cache.h, cache/dialogs.c, config/dialogs.c,
	config/kbdbind.c, config/kbdbind.h, config/options.c,
	cookies/dialogs.c, dialogs/download.c, formhist/dialogs.c,
	globhist/dialogs.c, globhist/globhist.c, globhist/globhist.h:

	Add a root listbox item to the hierbox_browser struct. It will ease
	hierarchic cookies and other stuff.  

Fri Jan  2 17:53:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Remove default keybinding for tab-close-all-but-current action.  

Fri Jan  2 17:51:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, bookmarks/dialogs.c, cache/dialogs.c,
	config/dialogs.c, cookies/dialogs.c, dialogs/download.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Use macros to intialize hierbox_browser structs.  

Fri Jan  2 16:19:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Revert last patch. It breaks wraparound.  

Fri Jan  2 16:14:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use link->name if available to compare with in typeahead searching.  

Fri Jan  2 15:47:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed indentation of ACT_SAVE_AS.  

Fri Jan  2 15:39:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	It's ok to pass NULL strings to strl*cmp() now. Suggested by zas.  

Fri Jan  2 15:38:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Reverted useless same_*str(), I explicitly said no to them before
	their introduction.  

Fri Jan  2 15:35:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	strl*cmp() non-zero return value meaning is undefined.  

Fri Jan  2 15:29:38 2004  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	same_str() and same_casestr() were introduced. Their behavior is
	similar (and in most cases) to strlcmp() and strlcasecmp() but well
	defined. They return 1 if strings match (regarding rules we defined)
	and 0 in all others case, they accept NULL pointers as strings, but
	returns always 0 in that case. If passed string length is negative,
	then nul char is used to detect end of comparaison. In near future,
	almost all occurrences of strl[case]cmp() will be replaced by those,
	and trashed. Feel free to propose better names, but not *strcmp*
	since it may be confusing.  

Fri Jan  2 14:42:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Fixed missspeling.  

Fri Jan  2 13:29:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Show references list header only when we have some links to print.  

Fri Jan  2 12:42:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Test against NULL strings before calling strlcasecmp(), it prevents
	assertions failure.  

Thu Jan  1 23:40:56 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, util/string.h:

	empty_string_or_() and null_or_stracpy() macros were moved to
	util/string.h.  

Thu Jan  1 23:36:44 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/tables.c,
	util/string.h:

	is_same_str() -> !strlcasecmp(). Idea by Jonas and Pasky ;).  

Thu Jan  1 22:02:12 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/tables.c,
	util/string.h:

	is_same_str(name, namelen, what, whatlen) was introduced. It
	shortens lines and is equivalent to ((namelen) == (whatlen) &&
	!strncasecmp((name), (what), (whatlen))), especially in parser.c.  

Thu Jan  1 20:08:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Update the comment for the <ctype.h> inclusion to mention that we
	now also use isprint().  

Thu Jan  1 19:18:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/events.txt:

	Improve the description of the goto-url event.  

Thu Jan  1 18:52:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Move Alt-< (beginning-of-buffer) and Alt-> (end-of-buffer) to the
	edit keymap, as suggested by pasky and Jonas.  

Thu Jan  1 18:50:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	s/if/ifdef/ so that ELinks can compile with CONFIG_LEDS enabled.  

Thu Jan  1 18:21:55 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, config/options.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c, sched/task.c,
	viewer/text/link.c:

	Macro null_or_stracpy() was introduced to shorten lines. It is
	equivalent to (str ? stracpy(str) : NULL).  

Thu Jan  1 16:56:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.c:

	foreach_(mime backend_module () ...  

Thu Jan  1 16:42:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Sort #includes.  

Thu Jan  1 16:34:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h, src/lowlevel/signals.c,
	src/modules/version.c, src/util/error.c, src/util/error.h:

	BACKTRACE -> CONFIG_BACKTRACE.  

Thu Jan  1 16:15:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Glum glum.  

Thu Jan  1 15:54:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/dialog.c, src/bfu/listbox.c, src/bfu/menu.c,
	src/bfu/text.c, src/modules/version.c, src/osdep/osdep.c,
	src/osdep/os2/sysinfo.h, src/osdep/unix/unix.c,
	src/terminal/event.c, src/terminal/kbd.c, src/viewer/text/view.c:

	USE_MOUSE -> CONFIG_MOUSE.  

Thu Jan  1 15:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/options.c, src/terminal/color.c,
	src/terminal/color.h, src/terminal/draw.c, src/terminal/draw.h,
	src/terminal/screen.c:

	USE_256_COLORS -> CONFIG_256_COLORS.  

Thu Jan  1 15:47:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/mime/mime.c, src/mime/backend/common.c,
	src/mime/backend/mailcap.c, src/mime/backend/mailcap.h,
	src/mime/backend/mimetypes.c, src/mime/backend/mimetypes.h,
	src/modules/module.c, src/protocol/rewrite/rewrite.c,
	src/protocol/rewrite/rewrite.h, src/sched/task.c:

	URI_REWRITE, MAILCAP and MIMETYPES was prefixed with CONFIG_.  

Thu Jan  1 15:38:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Removed close(p) from exec_thread(). We do that later and better in
	the caller (by Mikulas; from 0.99pre15).  

Thu Jan  1 15:36:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/cookies/cookies.c, src/cookies/dialogs.c,
	src/cookies/parser.c, src/cookies/parsetst.c, src/dialogs/menu.c,
	src/modules/module.c, src/protocol/file/cgi.c,
	src/protocol/http/http.c, src/viewer/text/view.c:

	COOKIES -> CONFIG_COOKIES. More code is now excluded when cookies
	are disabled.  

Thu Jan  1 15:24:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Fixed delayed signal delivery, or so ;) (by Mikulas; from
	0.99pre15).  

Thu Jan  1 15:20:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: signals.c, signals.h:

	Volatilize @critical_section and @pending_alarm (by Mikulas; from
	0.99pre15).  

Thu Jan  1 15:16:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	check_protocol(): Handle NULL backends and insert NULL backend if we
	are not supporting SMB.  

Thu Jan  1 15:14:47 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Normalize anti-recursive #define.  

Thu Jan  1 15:14:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Use CONFIG_XBEL_BOOKMARKS.  

Thu Jan  1 15:12:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/: common.c, xbel.c:

	Reverted part of the CONFIG_XBEL_BOOKMARKS introduction, which was
	already vetoed by me before introduction, didn't undergo discussion
	and the usual overloaded-patch stuff. I feel touchy now, too little
	sleep, so better don't do these things to me today.  

Thu Jan  1 15:04:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and some hotkeys conflict were fixed.  

Thu Jan  1 14:51:00 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed invalid translation.  

Thu Jan  1 14:50:06 2004  Laurent Monin <zas@norz.org>:

	* test/imgmap.html:

	A test file for image map was added.  

Thu Jan  1 14:47:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bookmarks/bookmarks.c,
	src/bookmarks/backend/common.c, src/bookmarks/backend/xbel.c:

	HAVE_LIBEXPAT usage converted to use CONFIG_XBEL_BOOKMARKS 

Thu Jan  1 14:34:58 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Code simplification, i variable is uneeded.  

Thu Jan  1 14:34:57 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Rather desperate attempt to try to clarify translation of Toggle
	display.  

Thu Jan  1 14:33:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Fixed accidentally swapped colors of .tabs.univisited.  

Thu Jan  1 14:28:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Regression bug was fixed. USEMAP should now work as it should and
	show all map entries.  

Thu Jan  1 14:24:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/hierbox.c, src/bookmarks/bookmarks.c,
	src/bookmarks/bookmarks.h, src/bookmarks/dialogs.c,
	src/bookmarks/dialogs.h, src/bookmarks/backend/common.c,
	src/bookmarks/backend/default.c, src/bookmarks/backend/xbel.c,
	src/dialogs/menu.c, src/globhist/dialogs.c, src/modules/module.c,
	src/sched/session.c, src/terminal/terminal.c,
	src/viewer/text/link.c, src/viewer/text/view.c:

	BOOKMARKS -> CONFIG_BOOKMARKS.  

Thu Jan  1 14:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/leds.c, src/bfu/leds.h, src/dialogs/status.c,
	src/modules/module.c, src/sched/session.c, src/sched/session.h:

	USE_LEDS -> CONFIG_LEDS.  

Thu Jan  1 13:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file/cgi.c, smb/smb.c:

	Exclude even more includes.  

Thu Jan  1 13:54:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/protocol/file/cgi.c, src/protocol/file/file.c:

	ELINKS_LOCAL_CGI -> CONFIG_CGI.  

Thu Jan  1 13:54:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/: smb.c, smb.h:

	Exclude more includes.  

Thu Jan  1 13:38:36 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	ELINKS_SMB -> CONFIG_SMB 

Thu Jan  1 11:53:36 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	s/myself/pasky/, noticed by Jonas.  

Thu Jan  1 10:12:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/main.c:

	ELINKS_ROOT_EXEC -> CONFIG_NO_ROOT_EXEC + move dependencies. Now it
	should be correct and not the inverted behaviour.  

Thu Jan  1 10:04:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, feature.h, src/protocol/protocol.c,
	src/protocol/smb/smb.c, src/protocol/smb/smb.h:

	ELINKS_SMB -> CONFIG_SMB + make it possible to not compile in the
	smb code when disabled.  

Thu Jan  1 09:56:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/document.c, src/dialogs/menu.c,
	src/document/html/parser.c, src/globhist/dialogs.c,
	src/globhist/globhist.c, src/modules/module.c, src/sched/session.c,
	src/viewer/text/view.c:

	GLOBHIST -> CONFIG_GLOBHIST.  

Thu Jan  1 09:52:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/menu.c, src/formhist/formhist.c,
	src/modules/module.c, src/util/base64.c, src/viewer/text/form.c,
	src/viewer/text/view.c:

	FORMS_MEMORY -> CONFIG_FORMHIST.  

Thu Jan  1 09:42:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	A few glitches, a few fixes.  

Thu Jan  1 07:21:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Add default bindings of Alt-< to beginning-of-buffer and Alt-> to
	end-of-buffer.  

Thu Jan  1 07:16:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/form.c,
	viewer/text/textarea.c, viewer/text/textarea.h:

	Add beginning-of-buffer and end-of-buffer actions. This closes bug
	147.  

Thu Jan  1 07:03:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/conf.c, protocol/http/header.c:

	Improve some comments: s/whitespaces/whitespace/, and clarify
	skip_white's description.  

Thu Jan  1 04:17:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/encoding/encoding.c:

	Add .tbz to bzip2_extensions.  

Thu Jan  1 03:40:10 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h:

	Reintroduced ELINKS_SMB.  

Thu Jan  1 03:27:48 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/marks.c:

	index_from_char() was added to marks.c, it permits to reduce size of
	array used by converting valid chars to an index in the marks array.
	Some macros were added to clarify the code.  

Thu Jan  1 03:25:48 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized ELINKS_SMB.  

Thu Jan  1 03:16:53 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized Local CGI Support.  

Thu Jan  1 03:09:13 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Moved USE_MOUSE to feature.h.  

Thu Jan  1 02:53:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Updated copyright notice. Welcome to the year 2004! 

Thu Jan  1 02:53:00 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Capitalize captions.  

Thu Jan  1 02:22:21 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized FORMS_MEMORY.  

Thu Jan  1 02:06:03 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Examples of the URI rewriting.  

Thu Jan  1 01:49:23 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Cleanup.  

Thu Jan  1 01:46:19 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h:

	Oops, BACKTRACE still must be here. Spotted by zas.  

Thu Jan  1 01:06:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	Disable root user was featured.  

Thu Jan  1 00:47:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	URI rewriting was featured.  

Wed Dec 31 23:52:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 23:26:34 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 23:19:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	No ELusive yet. See the tireless army of ELinks hackers, not even
	taking their break for new year celebrations. Happy new one, btw.  

Wed Dec 31 22:15:38 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Removed now-obsolete --without-xbel.  

Wed Dec 31 22:02:40 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Fixed forced disabling of the xbel/backtrace.  

Wed Dec 31 22:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Move backtrace printing support enabling to feature.h.  

Wed Dec 31 21:52:31 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Added notice to developers about what to include in this file and
	how.  

Wed Dec 31 21:44:20 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Added details about what happens if disabled or why to enable it to
	features missing it.  

Wed Dec 31 21:35:10 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Cleanup of the MIME/256colors entries.  

Wed Dec 31 21:31:49 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Moved cookies and global history to features.h.  

Wed Dec 31 21:28:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Quite big update featuring the color cleanups and additions, auto
	save stuff and sorting changes.  

Wed Dec 31 21:26:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	Move mailcap, mimetypes and 256 color configuration to feature.h
	file.  

Wed Dec 31 19:13:20 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, acconfig.h, configure.in, feature.h:

	Introduced feature.h, which should hold most of the fine-tuned
	compile-time features configuration. As an example case, leds and
	bookmarks were already moved there. Idea stolen from vim.  

Wed Dec 31 18:47:48 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Whitespaces cleanup.  

Wed Dec 31 17:43:49 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 14:26:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.h, version.c:

	Move builtin_modules declaration.  

Wed Dec 31 14:25:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 31 13:32:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.c, module.h, version.c:

	Introduce module iterators to ease module hacking.  

Wed Dec 31 12:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	.. and move libmime.a to link correctly.  

Wed Dec 31 12:53:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/Makefile.am, dialogs/menu.c, dialogs/mime.c,
	dialogs/mime.h, mime/Makefile.am, mime/dialogs.c, mime/dialogs.h:

	dialogs/mime.* -> mime/dialogs.*, suggested by Jonas.  

Wed Dec 31 10:44:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.c:

	Remove MAX(). It is already defined.  

Wed Dec 31 10:42:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/mailcap.c, mime/backend/mimetypes.c,
	util/string.h:

	Move skip_whitespace() macro.  

Wed Dec 31 08:50:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.h, mime/backend/common.c, mime/backend/common.h,
	mime/backend/default.c, mime/backend/mailcap.c, sched/download.c:

	Introduce mime handler initializer and allocate the program with the
	struct so freeing is easier.  

Wed Dec 31 08:37:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/smb/smb.c:

	Glum.  

Wed Dec 31 08:14:10 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/smb/smb.c:

	Small, untested optimisation.  

Wed Dec 31 07:53:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/dialogs.c:

	In push_login_button, allow the title of the "Form not saved"
	message box to be localised.  

Wed Dec 31 07:25:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Whoops, bfu/style.h _does_ need to be included. Pointed out by
	Jonas.  

Wed Dec 31 06:20:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/rewrite/rewrite.c:

	Remove a superfluous test.  

Wed Dec 31 04:48:00 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Remove an unnecessary #include.  

Wed Dec 31 02:57:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Include terminal/terminal.h for cls_redraw_all_terminals(). This
	effectively reverts src/config/options.c:1.415->1.416. My first
	reversion, and it is a patch by pasky, too. How 'bout that.  

Wed Dec 31 02:49:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.h:

	Declare struct download instead of struct dowload, and include
	cache/cache.h for enum cache_mode.  

Wed Dec 31 00:34:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Simplified tabs.unselected description.  

Tue Dec 30 22:44:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec 30 22:20:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	*INIT_OPT_COLORS(), more swapping due to pasky, it is an idiot.  

Tue Dec 30 21:49:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	*INIT_OPT_COLORS(), has first f g coming well, then b g follows.
	Haiku is exciting.  

Tue Dec 30 21:37:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Hmm, a lot of new stuff, not finished yet.  

Tue Dec 30 21:28:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 30 21:28:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Default fg color for tabs.unvisited changed from green to darkblue.
	It _is_ the best choice, fullstop (green is totally unreadable).  

Tue Dec 30 19:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Fix hotkey.  

Tue Dec 30 19:37:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, renderer.c, html/renderer.c:

	Reintroduce needs_width but be less optimistic and always set it to
	1 for HTML documents. A half way fix is added out commented but it
	will be non trivial to fix it for all cases.  

Tue Dec 30 18:45:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Hotkey conflict is now detected even for first menu item. It fixes
	bug 350.  

Tue Dec 30 18:44:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, config/options.inc:

	Optionalize hotkey underlining (ui.dialogs.underline_hotkeys) off by
	default.  

Tue Dec 30 18:36:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Rename document_view -> doc_view.  

Tue Dec 30 18:26:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, options.c, options.h, renderer.c,
	html/parser.c:

	Patches concerning plain text resizing issue and needs_width
	introduction were reverted. Jonas will fix that soon.  

Tue Dec 30 17:54:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Underline hotkey chars to make them more visible. Maybe it should be
	configurable anyway it is of course disabled if the terminal
	underline option is.  

Tue Dec 30 16:38:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix up() and down() handling so they call page_up() and page_down()
	when link wraparound is disabled. I believe that is the old
	behaviour.  

Tue Dec 30 13:57:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/html/parser.c:

	Default form input size is now configurable through
	document.html.default_form_input_size. It helps with textarea
	without cols attribute.  

Tue Dec 30 13:02:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, options.c, options.h, renderer.c:

	Separate document options comparaison functions to better handling
	terminal size changes, it should fix cache growing on height change.  

Tue Dec 30 12:45:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/: options.c, options.h, renderer.c, html/parser.c:

	A field needs_width was added to struct document_options. We now use
	it as needs_height. It fixes non rerendering of plain text documents
	on width change. Please report any side-effect this patch may have.  

Tue Dec 30 11:22:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/refresh.c:

	Compilation fix: include config/options.h header file needed for
	get_opt_int().  

Tue Dec 30 10:48:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Always use the color mode set in the document options since the
	global one might have a color mode different from the current mode.
	Fixes wrong drawing of current link when changing back and forth
	between color modes.  

Tue Dec 30 08:17:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/refresh.c:

	Add option to control the minimum time used for document refreshing.
	By default set to 1 second (is this fair?). Fixes last part of bug
	309 (Broken go back).  

Tue Dec 30 00:25:20 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Add itrm queue debug code, and new escape sequences are now
	recognised, it fixes impossibility to bind some function keys under
	rxvt-like terminals, now Shift-F5 should work more often.  

Mon Dec 29 22:47:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor french grammar fix.  

Mon Dec 29 22:43:46 2003  Laurent Monin <zas@norz.org>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Trivial cleanup: use enum keyact type for action, drop 2 useless
	variables in really_add_keybinding() and make it call
	really_really_add_keybinding() instead of add_keybinding().  

Mon Dec 29 22:36:23 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Mon Dec 29 21:10:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec 29 21:02:02 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/session.c, terminal/terminal.c:

	ui.auto_save_restore_session tristate option was replaced by two
	boolean options ui.sessions.auto_save and ui.sessions.auto_restore.  
	Folder name is now configurable through
	ui.sessions.auto_save_foldername.  It fixes issues related to i18n
	of this folder name.  

Mon Dec 29 20:20:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor translation fix.  

Mon Dec 29 20:15:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.c:

	Redo the bogus fix for hierbox browser cursor position restoring
	(bug 36) by saving the complete box data and check it is till valid
	when initializing a new browser.  

Mon Dec 29 19:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Jonas told me about cvs admin -m <rev>:<msg> <file> and suddenly...  

Mon Dec 29 19:43:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Ooops twice the same message... Previous patch changed order of
	parameter in realloc_line() from y,x to x,y as other functions
	there. This commit is a dummy one i just added a new line.  

Mon Dec 29 19:38:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Order of parameters of realloc_line() was modified: y,x -> x,y.  

Mon Dec 29 19:35:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Move some code from add_document_lines() to new functions add_node()
	and init_template() and make them more generic.  

Mon Dec 29 19:04:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	We now call get_uri_length() only if we are at the start of line or
	we have two consecutive alpha chars.  

Mon Dec 29 18:27:06 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanup.  

Mon Dec 29 17:54:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Code cleanup.  

Mon Dec 29 17:46:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Minor code simplification.  

Mon Dec 29 14:05:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.c, history.h:

	A cleanuped up version of the history compression patch pasky
	attached to bug 309. It ensures that the added history location is
	unique and that redirects can be bypassed. It does not fix it for
	the bug URI tho' since it uses document refresh with time set to
	zero.  

Mon Dec 29 13:15:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.h:

	Cleanup workaround.  

Mon Dec 29 12:24:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: document/plain/renderer.c, intl/charsets.c,
	intl/charsets.h:

	Add CSM_NONE to enum convert_string_mode for the plain-text
	renderer. I hope that this works! 

Mon Dec 29 12:23:09 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, simplify to eliminate a variable.  

Mon Dec 29 11:59:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Optimizations and clean up. Now useless debug code was removed.  

Mon Dec 29 11:42:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Replace bad chars but tab before calling convert_string(). It
	preserves previous behavior.  

Mon Dec 29 11:33:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Fix an off-by-one error in the plain-text renderer's linkyfying
	code.  

Mon Dec 29 11:28:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In the plain text renderer, perform character-set conversion on the
	input _before_ expanding tabs. Closes bug 351. Thanks to zas for
	finding the problem.  

Mon Dec 29 08:25:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Keep state of whether link lines was drawn. Only draw link lines if
	we actually put some and if the background color is different from
	the default one.  Fixes bug 326.  

Mon Dec 29 08:04:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Whoops revert stupid part of last patch.  

Mon Dec 29 07:58:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Improve forcing of current scaling to last position in the
	scrollbar.  

Mon Dec 29 07:43:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Partly revert previous scollbar fixes and only adjust the offset of
	current (@step) to hit the last position.  

Mon Dec 29 07:34:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use set_screen_dirty() macro.  

Sun Dec 28 20:56:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use explicit constants instead of hardcoded numbers.  

Sun Dec 28 20:02:48 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use a while loop instead of a goto.  

Sun Dec 28 20:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Improve/fix scroll meter drawing by removing adjustment of widget
	height according to y set by dlg_format_text_do() and by scaling
	current to be last when it should be.  

Sun Dec 28 19:53:03 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Take in account space used by right scroll main menu indicator
	(appears when term width is insufficent to display all the main menu
	entries).  

Sun Dec 28 19:27:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Even with minimum width for stuff like "\n\n" this line should be
	added. Also allow starting space needed when scrolling so we do not
	ignore empty lines. Fixes scrolling in text widget.  

Sun Dec 28 18:45:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Use ACT_ENTER for 'Follow link' and ACT_ENTER_RELOAD for 'Follow
	link and reload' in the link menu. Could the actions also be used
	for submit form (and reload)? 

Sun Dec 28 15:44:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Assertions and debugging code were added to help to track down nul
	chars insertion in plain renderer output, an ssertion is triggered
	now for that. Help is welcomed here. Note previous patch fixed bug
	317.  

Sun Dec 28 13:58:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Use strlen() to gather true length of line after convert_string()
	call. It fixes trailing chars garbage in some cases.  

Sun Dec 28 10:42:43 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Dec 28 09:24:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Colors the status bar with white background, so the progress bar
	works.  

Sun Dec 28 06:25:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Sort protocol.file.cgi.*.  

Sun Dec 28 06:24:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Sort protocol.file.*.  

Sun Dec 28 06:12:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Set window title in GNU Screen. (Backport from 1.81.2.1->1.81.2.2,
	ELUSION branch.) 

Sun Dec 28 06:11:19 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Dec 28 06:11:19 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Introduce is_gnuscreen(). (Backport from 1.81->1.81.2.1, ELUSION
	branch.) 

Sun Dec 28 05:58:35 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	Fix a hotkey conflict on the ~Help menu between ~ELinks homepage and
	~ELinks CvsWeb (now ~ELinks CvsWeb). See bug 350 for why this wasn't
	spotted long ago.  

Sun Dec 28 05:21:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hotkey.c:

	In is_hotkey, declare and assign @key_pos outside the DEBUG code and
	eliminate the thus superfluous braces and duplicate return
	statement.  

Sun Dec 28 05:19:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Improvements in Polish translation. Patch by Mikolaj Machowski.  

Sun Dec 28 05:05:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Hook change_hook_html to the document.codepage option tree.  

Sun Dec 28 04:56:34 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Give the "V~iew image" menu item the correct @action argument.  

Sun Dec 28 03:34:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Drop whitespaces on empty lines and trailing whitespaces before
	rendering plain text. It reduces memory usage a bit, please tell me
	if it has any other impact.  

Sun Dec 28 03:14:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Support for goto marked listbox_items. Fixes bug 123.  

Sun Dec 28 02:58:51 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	ACT_TOGGLE_PLAIN_COMPRESS_EMPTY_LINES is now bind by default to "w"
	(like whitespaces/lines).  

Sun Dec 28 02:55:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Compress_empty_lines now handles line containing only whitespaces
	too. It gives obvious result on BZ source.  

Sun Dec 28 02:39:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Add mono/colors ui.color options together to ensure sync and slim
	code (removes ~300 lines of code. :-) 

Sun Dec 28 02:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	quiting ->quitting.  

Sun Dec 28 02:19:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Add mono trees together with the color one.  

Sun Dec 28 02:16:13 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Keyact ACT_TOGGLE_PLAIN_COMPRESS_EMPTY_LINES was added. No default
	keystroke.  

Sun Dec 28 02:12:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Introduce INIT_OPT_COLOR_TREE() for adding relative color trees.  

Sun Dec 28 02:07:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Getting ready to unify colors/mono color option declaration.  

Sun Dec 28 02:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use a copy since first hop may be freed. It fixes a segfault when
	adding an already used keystoke.  

Sun Dec 28 01:58:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify tab color options.  

Sun Dec 28 01:55:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify status and searched color options.  

Sun Dec 28 01:53:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify dialog color options.  

Sun Dec 28 01:45:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify menu bar color options.  

Sun Dec 28 01:34:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	config/options.inc, sched/session.c, terminal/terminal.c:

	A hackish prototype for auto save/restoring session (as in tabs)
	using ui.auto_save_restore_session option. 0 is off, 1 is save but
	no restore, 2 is save and restore if no URI is given.  

Sun Dec 28 01:31:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Clean the folder where the terminal tabs should be bookmarked under.  

Sun Dec 28 01:31:12 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	A change hook was added to document.plain. It prevents reload of
	document after changing document.plain.compress_empty_lines option.  

Sun Dec 28 01:06:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Plain renderer was inserting useless nul chars in formatted
	document, these were invisible on screen but visible in a file
	generated by save formatted as. Jonas please review carefully.  

Sat Dec 27 23:33:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.c:

	Save state of the latest selected item in a browser.  

Sat Dec 27 23:06:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 22:58:19 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/plain/renderer.c:

	Option document.plain.compress_empty_lines was added. It makes
	successive empty lines appear as one. Try
	http://pasky.ji.cz/~pasky/dev/links/README for a demo. This option
	is off by default.  

Sat Dec 27 22:18:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h:

	Confirm close also when attempting to close all tabs but the current
	one.  

Sat Dec 27 22:05:15 2003  Laurent Monin <zas@norz.org>:

	* src/util/color.c:

	Silent a possible warning under Cygwin.  

Sat Dec 27 22:03:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/file/file.c:

	Use explicit type casting to quiet gcc 3.3.1 under Cygwin. It should
	not harm.  

Sat Dec 27 21:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Use really_close_tab() function always.  

Sat Dec 27 21:56:08 2003  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Type cast color_t to unsigned int in order to prevent a compiler
	warning, notably on Cygwin. Reported by fredlwm.  

Sat Dec 27 21:51:07 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Horizontal main menu scrolling was fixed, now part of last visible
	option may be printed, it gives a smoother effect.  

Sat Dec 27 20:03:45 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	In display_text, eliminate a superfluous int_max().  

Sat Dec 27 19:35:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, terminal/tab.c, terminal/tab.h:

	Make the open in new tab take backend work on url strings and add
	open_url_in_new_tab().  

Sat Dec 27 18:21:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. 1162 messages ;).  

Sat Dec 27 17:36:01 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Do not show Description: in option info dialog if there is no
	description text.  

Sat Dec 27 17:31:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, bookmarks/dialogs.h, config/kbdbind.c,
	config/kbdbind.h, dialogs/menu.c:

	Add support for bookmarking all tabs for a terminal. Entry was added
	to tab menu. ACT_ADD_BOOKMARK_TABS also added with no default value
	bound.  

Sat Dec 27 17:18:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Attempt to fix division by zero problem reported by zas caused by
	paskys 'wide' hacking using evil gotos to bypass essentiel tests.
	;-) 

Sat Dec 27 17:02:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Translation fix.  

Sat Dec 27 16:11:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix tab-close-all-but-current action name.  

Sat Dec 27 15:52:44 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 15:46:26 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SAVE_OPTIONS was added. No default keystroke.  

Sat Dec 27 15:38:22 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SHOW_TERM_OPTIONS was added. No default keystroke.  

Sat Dec 27 15:16:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Populate with menu_item macros, and correctly handle i18n regarding
	hotkeys. It fixes incorrect not so hot keys behavior in translated
	language menu.  

Sat Dec 27 14:59:43 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Display iso639 code at right of language menu, as proposed by Jonas.
	As a side effect it displays which code is associated with the
	system language.  

Sat Dec 27 14:49:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 14:33:28 2003  Laurent Monin <zas@norz.org>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	A confirmation dialog was added when attempting to bind a keystroke
	which is already used elsewhere.  

Sat Dec 27 14:28:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Oops we only need @term non NULL.  

Sat Dec 27 14:27:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/tab.c, viewer/text/view.c:

	close_all_tabs_but_current(): NULL current means look it up your
	damn self. ;) 

Sat Dec 27 14:14:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Add close all but current tab action. By default bound to 'i'.  

Sat Dec 27 14:13:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h:

	Move close all but current function to tab file.  

Sat Dec 27 13:55:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Add ACT_TAB_MENU action bound to 'e' by default.  

Sat Dec 27 13:41:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Dialog width takes now in account title length. Long dialog titles
	were displayed outside message box before (ie. in "Invalid
	keystroke" message box).  

Sat Dec 27 13:35:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Finally got the close all but current menu action working.  

Sat Dec 27 13:21:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Cleanup the naming. No need for two variables for the same thing.  

Sat Dec 27 13:08:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: tab.c, tab.h:

	Introduce tab iterator macros.  

Sat Dec 27 12:50:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Raised LEDS_COUNT to 6, so that the progress meter will look nicer.  

Sat Dec 27 12:50:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Now, if not @full, show ETT instead of elapsed time and ETA instead
	of estimated time.  

Sat Dec 27 12:47:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Swapped @wide and @full in get_stat_msg(). So now if @wide, we
	already show avg/cur, but we show the full strings only if @full.  

Sat Dec 27 12:44:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/: bookmarks.c, dialogs.c, backend/xbel.c:

	add_bookmark(): Set the box_item to BI_FOLDER if url is NULL or "".  

Sat Dec 27 12:36:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	get_stat_msg()'s @full behaviour changed. Now, when showing it in
	the statusbar, it is set only if > 130 (empirical value) and it now
	prevents from displaying the current/average speed (it always
	displays just the speed) and elapsed time (it displays just the
	estimated time).  

Sat Dec 27 12:27:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: leds.c, leds.h:

	Removed support for leds coloring. We'll do things like progress-bar
	on the background and this would interfere.  

Sat Dec 27 12:17:20 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Hotkeys conflict were fixed.  

Sat Dec 27 12:14:40 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, viewer/text/view.c:

	ACT_OPEN_OS_SHELL was added. Minor changes to make it working. No
	default keystroke.  

Sat Dec 27 11:45:02 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, viewer/text/view.c:

	ACT_SAVE_URL_AS was added. No default keystroke.  

Sat Dec 27 11:37:07 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SAVE_AS was added. No default key for now.  

Sat Dec 27 11:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Show kill all backgrounded connections keystroke in menu.  

Sat Dec 27 11:25:56 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	ACT_KILL_BACKGROUNDED_CONNECTIONS keyact was added. No default key
	for now (idea?).  

Sat Dec 27 08:13:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Shift percentage text 1 to the right because it looks better.  

Sat Dec 27 07:41:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Only do progress stuff when size > 0.  

Sat Dec 27 04:34:33 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/msgbox.h:

	Include bfu/dialog.h for struct dialog_data.  

Sat Dec 27 04:29:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.h:

	Declare struct window.  

Sat Dec 27 04:14:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.h:

	Include bfu/widget.h for struct widget_data.  

Sat Dec 27 04:09:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.h:

	Declare struct term_event.  

Sat Dec 27 03:27:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.h:

	Alphabetise those includes. (Whoops!) 

Sat Dec 27 03:21:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.h:

	Include bfu/style.h for enum format_align.  

Sat Dec 27 03:12:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.h:

	Declare struct link.  

Sat Dec 27 01:38:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Main menu horizontal scrolling was improved a bit. It still doesnt
	work very well when resizing terminal while menus are opened.  

Sat Dec 27 01:26:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.h:

	Declare struct list_head and remove extra declarations of struct
	session and struct menu_item.  

Sat Dec 27 00:56:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Various calculations were tuned. Display is improved.  

Fri Dec 26 23:53:24 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/proxy.c, protocol/http/http.c, sched/download.c,
	terminal/kbd.c:

	Trailing spaces were removed.  

Fri Dec 26 23:16:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.h:

	Declare struct terminal (forgotten when removing the #include for
	terminal/terminal.h in 1.9->1.10).  

Fri Dec 26 17:23:20 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Nullify rtext when possible.  

Fri Dec 26 17:14:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	DEBUG mode visual helper to detect useless rtext if an action is
	given.  

Fri Dec 26 17:06:09 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	rtext can now be set to NULL instead of hardcoded string, since we
	use dynamic keybindings.  

Fri Dec 26 16:57:47 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Align antislashes in macro description to improved readibility.  

Fri Dec 26 16:43:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 26 16:28:41 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Main menu is now able to scroll horizontally, ever by keyboard or
	mouse actions. An indicator now appears when menu is truncated.
	Still need to tune up.  

Fri Dec 26 16:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/status.c:

	Restore behavior and default values of loading tab color.  Make
	unvisited tab text color green by default so it is distinct.  Tab
	progress uses dialog.meter colors.  Ideas by pasky.  

Fri Dec 26 14:21:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Remove https_real_uri and use @uri instead. Proxy URIs should always
	contain data so assert it.  

Fri Dec 26 14:14:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	An action ACT_FORMHIST_MANAGER was added, associated default key is
	F.  

Fri Dec 26 14:10:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Setup ssl connection establishment earlier .. improve error
	handling. Patch by Timo Lindfors.  

Fri Dec 26 14:08:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Unbind ACT_COPY_CLIPBOARD from Ctrl-C.  

Fri Dec 26 14:02:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Don't be so optimistic we need atleast around 6 chars to make the
	meter usable.  

Fri Dec 26 13:57:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Add temporary status load progress meter next to leds.  

Fri Dec 26 13:40:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Empty rtext string was replaced by NULL.  

Fri Dec 26 13:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/search.c, viewer/text/search.h,
	viewer/text/view.c:

	Add typeahead search to menu.  

Fri Dec 26 13:17:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	A minor taste of what macros can do to reduce trivial color option
	code.  

Fri Dec 26 13:15:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.h, dialogs/menu.c,
	dialogs/options.c, document/html/parser.c, viewer/text/link.c,
	viewer/text/view.c:

	We do not need empty strings as rtext anymore, just use NULL.  

Fri Dec 26 13:08:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, dialogs/menu.c:

	Display current keybinding in menus, if no key action, then provided
	right text is used.  

Fri Dec 26 12:55:10 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	viewer/text/link.c, viewer/text/view.c:

	Key actions were added to menu items.  

Fri Dec 26 12:20:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	@keyact -> @action in struct menu_item, since we use action
	elsewhere (in kbdbind.c).  

Fri Dec 26 12:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	add_keystroke_to_string() was introduced. It returns a string
	representing a keystroke, for @action and @map.  

Fri Dec 26 12:08:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	A field keyact of enum keyact type was added to struct menu_item.  

Fri Dec 26 12:01:16 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Right text is no more translated by default, a flag RIGHT_INTL was
	added to menu_item flags to force translation.  

Fri Dec 26 11:48:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use draw_menu_left_text{,_hk}() for main menu.  

Fri Dec 26 11:11:31 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/options.inc:

	Mainmenu specific-colors are not used anymore. Though they are not
	yet aliased in options.inc.  

Fri Dec 26 10:55:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Do not add 1 to xbase, let the caller do it.  

Fri Dec 26 10:49:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	draw_menu_left_text_hk() and draw_menu_left_text() are now used to
	draw left text in menus.  

Fri Dec 26 10:19:10 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	draw_menu_right_text() was introduced.  

Fri Dec 26 10:10:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/download.c, dialogs/download.h,
	dialogs/status.c:

	Revive loading tab color so it is used for drawing progress bar in
	backgrounded tabs that are loading. We use unvisited color for the
	non progress part.  

Fri Dec 26 09:56:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use macro to determine whether download is progressing.  

Fri Dec 26 09:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/status.c, sched/session.h:

	Add support for fresh color in unvisited or incomplete tabs.  

Fri Dec 26 09:54:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	document/html/parser.c, viewer/text/link.c:

	M_SUBMENU was dropped. Macro mi_is_submenu() is used, and m_submenu
	string is no more exported.  

Fri Dec 26 09:41:53 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	mi_text_translate() macro is now used instead of direct flags
	comparaison against NO_INTL.  

Fri Dec 26 09:34:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	mi_is_submenu() is now used instead of direct flags comparaison.  

Fri Dec 26 09:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	viewer/text/link.c:

	M_BAR was dropped, horizontal separator is now marked by NO_SELECT
	flags, used for unselectable menu items too. Most tests were
	replaced by macros. More to come.  

Fri Dec 26 08:53:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): Make it possible to pass the meter color
	again. NULL means use dialog.meter (and who says C doesn.t support
	default arg values ;-).  

Fri Dec 26 08:46:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): Make it possible to pass strings that will
	be coloured. NULL means draw percentage string.  

Fri Dec 26 08:33:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Set ui.language to "System" if writing in conf file when configured
	--without-nls. Patch by Timo Lindfors <lindi@kurp.hut.fi>.  

Fri Dec 26 08:23:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Make progress bar drawing more safe and prioritize drawing of the
	progress 'colouring' if width is small.  

Fri Dec 26 08:04:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Move up the progress bar drawing.  

Thu Dec 25 17:59:33 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	ELinks-0.5.0 -> ELinks-0.9.0, inspired by AnAnt.  

Thu Dec 25 15:09:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Use new draw_text() when drawing the progress bar.  

Thu Dec 25 15:01:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_text(): NULL color now means only set the data parts.  

Thu Dec 25 14:02:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): It is not a widget formatter (yet) and is
	used for other progress stuff so take @y as clean int.  

Thu Dec 25 13:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Compile fix. Pasky please check.  

Thu Dec 25 13:10:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use term instead of ses->tab->term.  

Thu Dec 25 12:11:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Pass directly ses->tab->term to field_op_do(), instead of just @ses.  

Thu Dec 25 12:10:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Separated the field_op() grand switch to field_op_do(), patch by
	Martin Bays <elinks-dev@zugzwang.port5.com>.  

Thu Dec 25 12:04:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Grand field_op() switch tidyup.  

Thu Dec 25 12:01:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Removed the b label from the grand field_op() switch.  

Thu Dec 25 11:21:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix more infinit looping in some rare corner cases.  

Thu Dec 25 10:46:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	If there is no current link use 0. Fixes previous patch.  

Thu Dec 25 10:02:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix first bug introduced in 0.9.0
	(viewer/text/search.c:1.142->1.143) :/.  

Thu Dec 25 09:57:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h,
	viewer/text/search.c:

	Fix link numbers prefixes matching search strings (bug 57).  

Thu Dec 25 08:29:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make typeahead case sensitive using the document.browse.search.case
	option. Fixes 3rd part of bug 344.  

Thu Dec 25 08:17:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup of hit top/botton dialog calling.  

Thu Dec 25 08:09:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahed so both inf. looping in some rare occasions and wrap
	around so it always works (also for the last link being matched). We
	now assert that anyone mangling the link position (@i) keeps it
	valid.  

Thu Dec 25 08:06:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move typeahead error handling to separate function to avoid evil
	gotos in next patch >:).  

Thu Dec 25 06:59:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation fixes.  

Wed Dec 24 22:06:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Removed compatibility aliases ui.shadow and config_saving_style,
	both added before 0.4.0.  

Wed Dec 24 18:40:23 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 24 18:14:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	ELinks-0.9.0.CVS 

Wed Dec 24 18:04:32 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	ELinks-0.9.0 

Wed Dec 24 17:18:01 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec 24 17:08:14 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec 24 15:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Disable scrollability for hierbox browsers info buttons (for now).  

Wed Dec 24 14:18:39 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More update.  

Wed Dec 24 14:01:43 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Dec 24 13:39:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc, doc/man/man5/elinks.conf.5:

	Fix bogus option description.  

Wed Dec 24 12:22:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/small.txt:

	--without-x only removes possibility to restore the old window
	title.  

Wed Dec 24 12:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Translators can also update existing .po files. :) 

Wed Dec 24 12:15:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Fix typo.  

Wed Dec 24 12:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	No good update.  

Wed Dec 24 11:55:21 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation update.  

Wed Dec 24 11:07:29 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Missing tags were added to smb:// page output.  

Wed Dec 24 11:02:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Dec 24 10:45:19 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Mouse-related code was enclosed in #ifdef USE_MOUSE/#endif.  

Wed Dec 24 02:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc4.CVS 

Wed Dec 24 02:03:55 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc4 

Wed Dec 24 01:29:48 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec 24 00:59:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Fixed handling of the $FTP_PROXY, patch by Timo.  

Wed Dec 24 00:31:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix bug 315 - Tilde expansion doesn't work in file upload form
	fields.  

Wed Dec 24 00:30:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Comment on the code related to bug 282.  

Wed Dec 24 00:11:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 23 23:59:37 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po:

	.po files were resynced.  

Tue Dec 23 23:51:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Last-minute attempt to fix possible segfault when passing
	close_socket() a NULL pointer, extracted from Timo's patch.  

Tue Dec 23 19:24:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Sort prefixes.  

Tue Dec 23 19:08:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Position the now unblockable cursor where text is typed in the
	typeahead statusline. Fixes second part of bug 344 and improves
	i18n.  

Tue Dec 23 17:30:17 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Decompression bug fix was reintroduced, it should now work in any
	case. Please review and test with special attention. Patch by Jonas.  

Tue Dec 23 17:08:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted. freshmeat.net gzipped index page is not
	decompressed anymore. So the fix was not a good one.  

Tue Dec 23 17:01:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Unattended decompression of .tgz files was fixed by Jonas. We now
	use guess_encoding().  

Tue Dec 23 16:59:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Redraw screen when entering typeahead mode so the status line is
	updated. Fixes first part of bug 344.  

Tue Dec 23 14:19:11 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Dec 23 13:45:15 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Dec 23 12:44:04 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc3.CVS 

Tue Dec 23 12:41:11 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc3 

Tue Dec 23 12:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 23 12:28:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Only send keyboard and mouse events to the current tab. Should fix
	strange behaviour of two tabs and one Alt-d aka bug 296. Untested
	tho' as I cannot reproduce it anymore.  

Tue Dec 23 12:08:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Use the NUL-terminated @domain string instead of the @server string
	when checking if part of the cookie domain matches. Was introduced
	in my struct uri introducing summer hacking. Fixes bug 308 so ELinks
	works with yahoo groups/mail again.  

Tue Dec 23 12:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	More verbose COOKIES_DEBUG domain security violation reporting. This
	is harmless as it is in normally-dead part of code.  

Tue Dec 23 11:34:28 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Tue Dec 23 11:11:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Revert part of patch adding ACT_REDRAW keybinding (in
	event.c:1.20->1.21) that removed the hardcoded ^L. The user can
	still define new keybindings but now overrule this one for now. We
	need some universal keybinding handler to better handle this.  

Tue Dec 23 11:04:31 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/dialogs.c:

	Formhist info dialog layout was improved a bit. Fields list is now
	separated from header by a newline, and field types are displayed in
	a fancy manner.  

Tue Dec 23 10:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Make witekfl's fix to not decompress files with .gz or .bz2
	(http.c:1.220->1.221) also handle URIs with query parts, like the
	ones at http://www.icculus.org/openbox/download.php. Reported by
	Quazgaa.  

Tue Dec 23 10:10:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Really really fix the off by one error in the progress bar. We have
	to consider both starting and ending brackets.  

Tue Dec 23 06:08:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Tue Dec 23 01:24:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make CGI support depend on the presence of setenv().  

Mon Dec 22 23:35:58 2003  Laurent Monin <zas@norz.org>:

	* doc/man/man1/elinks.1.in:

	Manpage date was updated.  

Mon Dec 22 22:55:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Fix help2tool to properly handle '('s in strings so now the default
	for http user agent should be correct.  

Mon Dec 22 22:55:05 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/Makefile.am:

	We should dump the generated manpage back to the srcdir, not
	builddir.  

Mon Dec 22 22:55:05 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/Makefile.am:

	We should dump the generated manpage back to the srcdir, not
	builddir.  

Mon Dec 22 22:53:25 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/Makefile.am:

	Make update-manpages to actually work.  

Mon Dec 22 22:50:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Fix to proper test the $(ELINKS) binary, plus use top_builddir
	reported by pasky.  

Mon Dec 22 22:40:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/elinks.1.in, man5/elinks.conf.5:

	Add -conffile descriptiong to elinks.1 and update for user agent
	string in elinks.conf.5.  

Mon Dec 22 22:00:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	I will think out some punishments for those who remove blank lines.
	Someone may get hurt the next time, zas.  

Mon Dec 22 21:22:01 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Mon Dec 22 21:06:54 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, intl/gettext/libintl.c:

	Provide translations for language menu.  

Mon Dec 22 20:39:34 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Dec 22 20:21:30 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc2.CVS 

Mon Dec 22 18:24:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc2 

Mon Dec 22 18:24:01 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: ru.po, sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Dec 22 18:23:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Dec 22 17:45:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Partially revert last patch. No off by one here, but somewhere else.  

Mon Dec 22 17:18:16 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Fix an off by one error, preventing display of scrollbar when only
	one element is out of visible range. Stricter values checking.  

Mon Dec 22 17:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Oops, swapped '_' and '-' in my last fix.  

Mon Dec 22 16:31:33 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Restore rev 1.134 option description layout: a extra newline before
	Description: and one after it. It makes msgbox easier to read.  

Mon Dec 22 16:25:47 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use isspace() and drop only the first space char after a split.  

Mon Dec 22 13:42:52 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Typeahead searches support.  

Mon Dec 22 13:13:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Fixed not showing the last link in the list.  

Mon Dec 22 12:15:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Changed the default User-Agent string from ELinks (ver; sys; dim) to
	ELinks/ver (textmode; sys; dim). I know it is quite late to do this,
	but it is really important that we get this right in 0.5.0 ;-).
	Uncovered long ago by Cliff Cunnington.  

Mon Dec 22 11:54:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Removed one really ancient TODO sticked to _parse_options().  

Mon Dec 22 11:54:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Try to fix compatibility problems with lynx using underscores in
	their argument names vs. we using dashes (-force-html in
	particular).  

Mon Dec 22 11:45:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Trivial cleanup. I know. But this is an exception ;).  

Mon Dec 22 09:57:19 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec 22 09:53:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Revert previous illicit lets-fix-end-in-textarea part.  

Mon Dec 22 09:49:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/: dump/dump.c, text/textarea.c:

	Setup the link numbering option before the call to
	init_document_options(). Fixes references to links being dumped
	without the link numbers appearing.  

Mon Dec 22 07:44:43 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Dec 22 04:30:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/widget.h:

	Improve the comments for widget_data.info.text.*.  

Mon Dec 22 04:14:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Add the guideline that trees should be sorted before non-trees.  

Mon Dec 22 03:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc1.CVS 

Mon Dec 22 03:42:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc1 

Mon Dec 22 03:41:05 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, Czech translation updated.  

Mon Dec 22 03:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Fix ACT_HOME in textareas.  

Mon Dec 22 03:01:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	.xif elipmoC 

Mon Dec 22 02:53:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c:

	Introduced -conffile, through which you can specify alternate
	configuration file name. Fixes bug 302, suggested by zas.  

Mon Dec 22 02:15:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Initialize @term in download_data_store(). Spotted by Jonas.  

Mon Dec 22 02:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Ensure correct handling of get_download_ses() returning NULL.  

Mon Dec 22 02:10:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Handle allocation failure.  

Mon Dec 22 02:09:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, download.h:

	get_download_ses() now --- when the original session is not around
	anymore --- prefers session belonging to the same terminal as the
	original one. This is accomplished by introduction of
	file_download.term.  

Mon Dec 22 02:07:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	When destroying session, do not destroy downloads to external
	handlers if we have another session belonging to that terminal,
	which could still handle these. Being reported by Miciah, this
	should fix bug 226.  

Mon Dec 22 01:45:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, viewer/dump/dump.c:

	Introduced commandline argument -no-numbering, which turns out
	numbering of links in the dump output. Numbering of links in the
	dump output is now the default behaviour.  

Mon Dec 22 01:19:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	Add new command line options, some undocumented env. variables and
	finally new ~/.elinks/ files.  

Mon Dec 22 01:12:41 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/viewer/dump/dump.c:

	If the links are numbered, show their list at the dump output
	footer. Patch by Jakub Horak <thement@hysteria.sk>, cleaned up by
	me.  

Mon Dec 22 00:24:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Dec 22 00:10:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Add multiple new actions.  

Sun Dec 21 23:56:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/menu.c, config/kbdbind.c,
	config/kbdbind.h:

	Remake ACT_TOGGLE_EXPAND into ACT_SELECT bound to ' ', and handle
	ACT_SELECT as ACT_ENTER in the other dialog kbd event handlers. This
	is a clean fix for the previous patch making hierbox browser keys
	configurable.  

Sun Dec 21 23:23:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Fix alphabetic order of actions.  

Sun Dec 21 23:19:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, config/kbdbind.c, config/kbdbind.h:

	Make hierbox browser keys configurable through ACT_TOGGLE_EXPAND,
	ACT_EXPAND and ACT_UNEXPAND.  

Sun Dec 21 23:02:40 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	HTTPS proxy support.  

Sun Dec 21 22:46:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	For now drop the @uttered_glyph and associated proposed fix for bug
	171 (<frameset> should be ignored if not the very first thing after
	<head>). It broke virtually all framesets because whitespaces were
	considered as 'anything' as well. It is much less pressing now,
	tho', so the real fix has to wait.  

Sun Dec 21 22:45:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Fix and improve last jonas patch: we now detects 3 types of end of
	lines and display lines as it should.  

Sun Dec 21 22:30:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed nonsensical unreachable comment near a statement in
	parse_html(). It is perfectly reachable. I guess it was me who
	sticked it there, tho' ;-).  

Sun Dec 21 22:20:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, terminal/screen.c, terminal/terminal.h:

	Changed back order of TERM_FREEBSD and TERM_KOI8 not to reposition
	TERM_KOI8. This keeps backward compatibility, although I'm not sure
	if we have *any* koi8 users now... whatever ;-).  

Sun Dec 21 22:15:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	In the description for terminal._template_.type, add FreeBSD and
	correct the value of KOI-8. Raise the maximum value for the option
	by one so that selecting KOI-8 as the terminal type does not crash
	ELinks with an internal error.  

Sun Dec 21 22:01:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	In display_text, when the text widget is selected, ignore the block
	cursor setting and always display the cursor at the top-left corner
	of widget. This is done to aid screen readers that depend on the
	position of the cursor, as well as to help the user see that the
	text widget is selected.  

Sun Dec 21 21:54:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/plain/renderer.c:

	Don't show \r in "\r\n" as '.'. Requested by zas.  

Sun Dec 21 21:52:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	Display the scroll bar's elevator in the correct position, instead
	of always at the top of the bar, when the text widget is not
	selected.  

Sun Dec 21 21:42:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	Remove an obsolete TODO for scroll bars.  

Sun Dec 21 21:41:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Make URI rewrite prefix selection dependant on whether args was
	passed. So dumb prefixes won't shadow smart ones.  

Sun Dec 21 21:28:39 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in, src/protocol/rewrite/rewrite.c:

	The prefixes were copied from lua hooks to URI rewrite plugin.  

Sun Dec 21 21:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Revert last bogus patch.  

Sun Dec 21 21:25:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Use file_history for 'Save URL as' dialog and not goto_history.  

Sun Dec 21 21:18:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Use setup defines for URIs and add some useful #ifdef DEBUG smart
	prefixes.  

Sun Dec 21 21:14:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	document.browse.forms.show_formhist is by default off for now. I
	believe it is currently rather annoying for most of the ELinks user
	audience, has some rough edges etc.  

Sun Dec 21 20:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix possible leak in last patch.  

Sun Dec 21 20:50:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Use expand_tilde() always on possible file:// requests. Fixes bug
	331.  

Sun Dec 21 20:46:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Grammar fix in a comment.  

Sun Dec 21 19:40:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Finish zas' fixes for link wrap around to also include pressing down
	on last link.  

Sun Dec 21 19:29:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Add support for ACT_KILL_TO_BOL and ACT_REDRAW.  

Sun Dec 21 19:18:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make the typeahead searching work both forward and backwards so
	up/down can also be used to navigate matching links.  

Sun Dec 21 19:09:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c, vs.c:

	Rename c_in_view() to current_link_is_visible().  

Sun Dec 21 19:08:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Force a reload when the document refresh URI is the current one.
	Idea by pasky.  

Sun Dec 21 18:30:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	The <noframe> element content is now also printed when its parent
	<frameset> wasn't processed.  

Sun Dec 21 18:25:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Introduced search_html_stack() (+ debug facility dump_html_stack).
	@encountered_body was removed and instead we now check whether the
	stack contains the BODY element.  

Sun Dec 21 18:17:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix page up to not move change current link if we do not have to.
	Same for page down.  

Sun Dec 21 17:55:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	sleep(1) when error was encountered so that user can read it.  

Sun Dec 21 17:25:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Do not report configuration file errors through elinks_error(). It
	was really quite clumsy as elinks_error() is designed just for
	rather internal errors reporting. It looked ugly, slowed down
	startup by great deal as it was beeping at each line, etc. Let's
	live in a happier world ;-).  

Sun Dec 21 17:20:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted the detach_formatted() changes. You can't just blast it off
	madly like that, it should only clean up well-defined items. At
	least examine the users before doing such a thing, please, so that
	you will see you just introduced bunch of segfaults when the
	detached document will be del_from_list()'d.  

Sun Dec 21 17:09:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Track CPPFLAGS along CFLAGS when hunting -I directives.  

Sun Dec 21 17:04:09 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Dec 21 17:03:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Dropped really horrid zas' hack. If we are going to fix the
	warnings, we have not to do it in such a pervert way. ;p 

Sun Dec 21 17:01:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h, view.c:

	Make typeahead keys configurable.  

Sun Dec 21 16:54:34 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Attempt to fix a weird configure time warning, please review and
	propose a better fix if any.  

Sun Dec 21 16:44:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Fixed l10n of error message when deleting error occurs.  

Sun Dec 21 16:37:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	detach_formatted(): Cleanup and simplification.  

Sun Dec 21 16:33:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	A possible fix (although I don.t know if it is even the correct one)
	for some image option configuration that breaks numbered links.
	Reported by Zellner.  

Sun Dec 21 16:30:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Slightly alter the typeahead status appearence and position the
	cursor there.  

Sun Dec 21 16:26:43 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sun Dec 21 16:22:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Dec 21 15:20:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Fixed negation bug introduced by the Jonas' cleanups ;-). This fixes
	uncancellable mainmenu aka bug 334.  

Sun Dec 21 14:56:54 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, cache/cache.c,
	document/document.c, document/renderer.c, document/html/parser.c,
	document/html/tables.c, globhist/globhist.c, lowlevel/interlink.c,
	lowlevel/select.c, protocol/uri.c, protocol/ftp/ftp.c,
	sched/session.c, sched/task.c, ssl/ssl.c, terminal/color.c,
	terminal/screen.c, util/error.h, util/file.c, util/lists.h,
	util/memory.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/view.c:

	internal() -> INTERNAL().  

Sun Dec 21 14:51:18 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/listbox.c, cache/cache.c, config/options.c,
	cookies/cookies.c, dialogs/status.c, document/html/parser.c,
	document/html/tables.c, lowlevel/dns.c, mime/mime.c,
	osdep/os2/os2.c, protocol/auth/auth.c, sched/connection.c,
	ssl/connect.c, ssl/ssl.c, util/error.h, util/object.h:

	debug() -> DBG(), wdebug() -> WDBG().  

Sun Dec 21 14:46:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Yeah, sure, go ahead, kill me. Typo fix.  

Sun Dec 21 14:41:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/dialogs.c:

	Supertypo fix.  

Sun Dec 21 14:39:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	internal() -> assertm() 

Sun Dec 21 14:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Changed the listbox_item info composition to be done the cookies way
	- sequence of add_format_to_string()s. This will hopefully ease the
	translation and overally sanitize this stuff. ;-) 

Sun Dec 21 14:13:19 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, bookmarks/backend/xbel.c, config/cmdline.c,
	config/options.c, intl/gettext/libintl.h, lowlevel/home.c,
	lowlevel/interlink.c, lowlevel/select.c, mime/backend/mailcap.c,
	scripting/lua/core.c, terminal/event.c, terminal/kbd.c,
	util/error.h, util/memory.c, viewer/dump/dump.c:

	error() -> ERROR().  

Sun Dec 21 14:08:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Include title in the info string for bookmarks.  

Sun Dec 21 13:53:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Renamed er()'s @sleep to @shall_sleep. Spotted by zas.  

Sun Dec 21 13:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reverted accidental change to the if (!s) condition.  

Sun Dec 21 12:51:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	debug() now doesn't sleep() anymore. Introduced wdebug() which still
	sleep()s.  

Sun Dec 21 12:40:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Tidyup of in_term().  

Sun Dec 21 12:33:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Removed some redundant keybindings introduced by Jonas.  

Sun Dec 21 12:25:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, options.c, options.inc:

	Moved cmdline options and option handlers from config/options.* to
	config/cmdline.c.  

Sun Dec 21 12:04:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Blank lines and trivial reindentation.  

Sun Dec 21 11:32:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Trivial cleanup.  

Sun Dec 21 11:25:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Group destructors in dump_formatted().  

Sun Dec 21 06:55:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/core.c:

	Handle malloc failures in init_guile.  

Sun Dec 21 06:54:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/: core.c, hooks.c:

	Fix problems that occur when a binary that is compiled with Guile
	support is started with the -no-home argument: 
	
	1. In init_guile, if elinks_home is NULL, 
	   return before attempting to straconcat it with a filename.  
	   This fixes an assertion failure upon starting ELinks.  
	
	2. In Guile's ELinks event hook handlers, when looking up the
	   corresponding Guile code functions, handle (i.e., ignore) any
	   exceptions.  This fixes the problem that ELinks immediately dies 
	   when the Guile code attempts to look up an undefined hook.  
	
	Note: Altho these changes seem to work, I don't know Guile; they
	might be entirely cruddy.  

Sun Dec 21 02:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Some minor cleanups.  

Sun Dec 21 02:06:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/menu.c, config/kbdbind.c,
	config/kbdbind.h:

	Introduce ACT_CANCEL as a configurable version of KBD_ESC, and
	ACT_NEXT_ITEM as a configurable version of KBD_TAB.  

Sun Dec 21 00:40:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, config/kbdbind.c:

	Make select and submit button keybinding configurable.  

Sun Dec 21 00:30:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, config/kbdbind.c,
	config/kbdbind.h, terminal/event.c, viewer/text/form.c,
	viewer/text/view.c:

	Introduce ACT_REDRAW used for redrawing the terminal. Bound to
	ctrl-(l|L) in all mappings.  

Sat Dec 20 23:54:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Remove macro that was made obsolete in last patch.  

Sat Dec 20 23:53:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c:

	Move some builtin keybindings to default keybindings and remove some
	that already existed.  

Sat Dec 20 23:42:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Arrange default keybindings so they are sorted by the key.  

Sat Dec 20 23:06:20 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.inc, src/protocol/proxy.c,
	src/protocol/http/http.c:

	HTTPS proxy support, patch by Timo Lindfors <lindi@kurp.hut.fi>,
	presumably also with some minor help of Jan Sembera
	<jan.sembera@flexible.cz>. This will probably yet need some little
	tuning, but seems generally ok.  

Sat Dec 20 23:02:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Add missing values for meta key in default keybindings.  

Sat Dec 20 22:42:53 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, INSTALL, configure.in, src/scripting/lua/core.h:

	Lua5 support, patch by Christian Cornelssen <ccorn@cs.tu-berlin.de>.  

Sat Dec 20 22:42:36 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	HACKING -> doc/hacking.txt 

Sat Dec 20 22:41:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c, config/kbdbind.h:

	Add ACT_MARK_ITEM used for hierbox browser item marking so it is
	user configurable.  

Sat Dec 20 22:18:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c:

	Bring keybinding to the listbox browser so people with a tendency to
	weird keymappings can have their way.  

Sat Dec 20 22:12:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	cp2utf_8() optimization by witekfl from 2003-05-22. Chars < 128 are
	never translated so may be returned right away w/o even looking for
	the conversions. This should be quite measurable improvement. Again
	thanks to Miciah for bringing this to my attention.  

Sat Dec 20 22:07:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Use macro to cleanup some builtin keyboard combos.  

Sat Dec 20 22:06:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Finally commited witekfl's patch from 2003-05-22, removing redundant
	ei->name tests (it is never NULL). Thanks to Miciah for refreshing
	my memory.  

Sat Dec 20 21:57:21 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/scripting/lua/core.c:

	va_list may not be a pointer on all systems, so such a usage is
	invalid. This fixes compilation on alpha-linux platform, bug 322,
	and is work of Jakub Bogusz.  

Sat Dec 20 21:49:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Do not proceed with html_frameset() when we already either
	encountered the <body> tag or printed something to the document.
	This should +/- fix conformance problem triggered by
	
	(http://www.w3.org/MarkUp/Test/HTML401/current/tests/16_2-BF-01.html) aka bug 171, reported by zardoz.

Sat Dec 20 21:41:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	In the dialog KBD handler, use KM_MENU instead of KM_MAIN. Should
	fix various dialog navigation bugs. Introduced and reported by Jonas
	;-))).  

Sat Dec 20 21:22:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	SP_COLOR_LINK_LINES is triggered only for the first <body> tag in
	the document. This should fix weird link coloring when multiple
	<body> tags are in the document. This fixes bug 325.  

Sat Dec 20 19:00:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/auth/Makefile.am:

	Build dialogs.*.  

Sat Dec 20 18:59:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Some minor tidyup.  

Sat Dec 20 18:55:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Be more terse when babbling about SMB.  

Sat Dec 20 18:53:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	--enable-smb -> --disable-smb (by default enabled now), we check for
	smbclient presence (idea by zas).  

Sat Dec 20 18:48:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: mime/mime.c, protocol/file/file.c, sched/connection.c,
	sched/connection.h:

	src/util/encoding.* -> src/encoding/encoding.* 

Sat Dec 20 18:35:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Adjusted a little the linking order to link libauth.a after
	libhttp.a.  

Sat Dec 20 18:35:16 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/encoding/Makefile.am,
	src/encoding/encoding.c, src/encoding/encoding.h,
	src/util/Makefile.am, src/util/encoding.c, src/util/encoding.h:

	src/util/encoding.* -> src/encoding/encoding.* 

Sat Dec 20 18:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/Makefile.am:

	src/dialogs/auth.* -> src/protocol/auth/dialogs.*,
	src/protocol/http/auth.* -> src/protocol/auth/auth.*. And integrated
	to the build system.  

Sat Dec 20 17:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/encoding/: .cvsignore, .vimrc:

	Fairies.  

Sat Dec 20 16:59:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/dialogs/Makefile.am, src/dialogs/auth.c, src/dialogs/auth.h,
	src/protocol/auth/Makefile.am, src/protocol/auth/auth.c,
	src/protocol/auth/auth.h, src/protocol/auth/dialogs.c,
	src/protocol/auth/dialogs.h, src/protocol/http/Makefile.am,
	src/protocol/http/auth.c, src/protocol/http/auth.h,
	src/protocol/http/http.c, src/viewer/text/view.c:

	src/dialogs/auth.* -> src/protocol/auth/dialogs.*,
	src/protocol/http/auth.* -> src/protocol/auth/auth.*. And integrated
	to the build system.  

Sat Dec 20 16:42:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/auth/: .cvsignore, .vimrc:

	Fairies.  

Fri Dec 19 23:37:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Check for @url protocol in request_additional_file() and take
	appropriate protocols if it is strange. This fixes crash reported by
	zas at http://www.contenido.de. I hope we have all the possible URL
	entry points hardened now.  

Fri Dec 19 23:21:24 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/sched/task.c:

	Update @protocol in do_move() when redirected, so that
	PROTOCOL_UNKNOWN redirects are catched and dismissed and the right
	handler is used when we were redirected to a different @protocol.
	Spotted and proposed fix by Martin Bays
	<elinks-dev@zugzwang.port5.com>.  

Fri Dec 19 22:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Localize @fn in do_follow_url().  

Fri Dec 19 18:30:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sysname.c:

	Removed a newline. Just wanted to trigger a commit ;-).  

Fri Dec 19 16:27:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, mime/backend/mailcap.c:

	Moved the protocol.mailcap compatibility aliases from
	config/options.inc to mime/backend/mailcap.c.  

Fri Dec 19 16:24:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	protocol.mailcap.description is now alias to
	mime.mailcap.description like all the other protocol.mailcap
	options. Jonas, please review. Spotted by Zas.  

Fri Dec 19 14:29:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanups.  

Fri Dec 19 12:07:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Clarify confusing (or confused?) description of
	replace_listbox_item().  

Fri Dec 19 12:03:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	cache/cache.c, config/kbdbind.c, config/options.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	Renamed *horribly* misnamed functions: init_browser_box_item() ->
	init_listbox_item(), replace_box_item() -> replace_listbox_item(),
	done_browser_box() (!!!) -> done_listbox_item().  

Fri Dec 19 11:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Blank lines changes.  

Fri Dec 19 11:32:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): free_ct -> plaintext_follow 

Fri Dec 19 11:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): Unify end and free_ct 

Fri Dec 19 11:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): ret1 -> do_not_follow 

Fri Dec 19 08:29:28 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 18 22:37:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, menu.c:

	Removed some strange redundant kbd event tests *puzzlement*.  

Thu Dec 18 20:55:15 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* configure.in:

	Reverted last modification, it is useless now.  

Thu Dec 18 20:52:34 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Fabio, tell me, what is this rint() thing for? 

Thu Dec 18 20:38:08 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Dec 18 20:34:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/config/options.inc:

	Typo fix.  

Thu Dec 18 20:25:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* configure.in:

	Link against libm even if we don't compile LUA stuff.  Spotted by
	Zardoz@users.sourceforge.net.  

Thu Dec 18 17:05:44 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	Simplify fabio's last patch by using int_max().  

Thu Dec 18 13:47:58 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Distribute tab size in a more uniform way.  

Wed Dec 17 20:28:46 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More translation update 

Wed Dec 17 19:54:55 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Tranlsation update 

Wed Dec 17 17:42:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 17 14:54:04 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec 17 14:05:55 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation fixes.  

Wed Dec 17 13:29:36 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Tue Dec 16 20:35:44 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/: bookmarks.c, bookmarks.h:

	s/const char */char */ 

Tue Dec 16 20:34:10 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated .po files and Italian translation.  

Tue Dec 16 19:54:56 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Check if get_attribute_value() returns NULL with the href attribute.  
	This is a sort of workaround for bug #150 (avoid crashes with
	invalid XBEL).  

Tue Dec 16 06:41:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	s/tab/karta/. Patch by Mikolaj Machowski.  

Mon Dec 15 20:21:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Removed obsolete comment about bzlib weirdness.  

Mon Dec 15 06:39:04 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	POST method should be handled correctly now.  

Mon Dec 15 06:21:07 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Dec 15 06:15:42 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Do not decompress files with suffixes 'gz' and 'bz2' sent via http.  

Sun Dec 14 14:46:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use isspace() and ispunct(), and fix handling of newline char when
	splitting: only first one should be ignored after a split.  

Sun Dec 14 14:09:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	@dlg_width -> @width.  

Sat Dec 13 10:03:52 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 13 05:29:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Eliminate the @new_url variable from goto_url_with_hook and
	follow_url, and re-use the @url parameter instead.  

Sat Dec 13 05:25:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Improve the typeahead error message with the help from Miciah.  

Sat Dec 13 05:22:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Complete the previous commit.  

Sat Dec 13 05:17:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/: guile/hooks.c, lua/hooks.c:

	Fix memory leaks in the Guile and Lua follow-url event hooks,
	following Jonas' pattern for the goto-url event hooks.  

Sat Dec 13 04:40:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/: core.c, hooks.c:

	Compilation fixes: Add the void *data parameters to event hooks per
	src/sched/event.h:1.7->1.8, and add the struct module *module
	parameter to the module initialisation callback (wow, has Guile
	support been broken since it was modularised?!).  

Sat Dec 13 03:46:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	2 is pop up msg_box() and 1 is b33p in typeahead error handling.  

Sat Dec 13 01:53:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Make it possible to use the user defined keyactions for navigating
	widgets in the dialogs. Idea by Mikolaj Machowski <mikmach@wp.pl>.  

Sat Dec 13 01:41:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Make it possible to use the user defined keyactions in the main
	menu. Idea by Mikolaj Machowski <mikmach@wp.pl>.  

Sat Dec 13 00:39:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Quickly fix last patch before pasky starts complaining. ;) 

Sat Dec 13 00:32:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.inc,
	dialogs/status.c, sched/session.h, viewer/text/search.c,
	viewer/text/search.h, viewer/text/view.c:

	Melodic patch in hack minor adding support for typeahead searching
	of link text.  

Fri Dec 12 23:38:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Tree tagged. Prepare for assault attack... Three! Two! One! Let's
	go, first three at the right wing, next three at the left wing, me
	and seven and eight will keep at the centre. Target coordinates zero
	dot fife papa romeo echo one two, designation dot charlie victor
	sierra. Right wing, go. Left wing, go. The middle follows me.  

Fri Dec 12 23:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12. I'm a revisionist! 

Fri Dec 12 23:25:42 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12.CVS 

Fri Dec 12 23:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12 

Fri Dec 12 23:18:30 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	_builtin_ user prefixes support 

Fri Dec 12 23:14:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed keybinding info for Tab::Go forward ('->' -> 'u') as well.  

Fri Dec 12 23:13:45 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed hotkeys conflict.  

Fri Dec 12 23:01:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Fri Dec 12 14:36:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	done_string(): Also clear the string magic.  

Fri Dec 12 14:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, util/string.c, util/string.h:

	Remove copy_string().  

Fri Dec 12 14:05:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Fix goto-url event (part II).  

Fri Dec 12 08:24:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 12 07:19:56 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/sched/session.c:

	Avoid overlapping dialogs upon first start up.  

Fri Dec 12 06:30:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Thu Dec 11 12:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Wrap <sys/time.h> #include in HAVE_SYS_TIME_H.  

Thu Dec 11 10:54:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/hooks.c, lua/hooks.c:

	Free goto-url before setting it to NULL. Prevents ``Boom'' 

Thu Dec 11 10:41:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Added hotkey to Tab::Go forward.  

Thu Dec 11 10:41:07 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Dec 11 10:27:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed useless prototype.  

Thu Dec 11 06:42:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated .po and Italian translation.  

Wed Dec 10 21:34:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed shortcut of File::Go forward.  

Wed Dec 10 19:02:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	A few hotkey fixes.  

Wed Dec 10 17:14:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Add a few separators to the link menu.  

Wed Dec 10 17:05:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c:

	Add more fun stuff to the tab menu.  

Wed Dec 10 16:42:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Move the tab_menu() so more handlers are accessible.  

Wed Dec 10 15:50:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Other part of fix for goto-url leak.  

Wed Dec 10 11:21:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/menu.c:

	Add missing #ifdef BOOKMARKS.  

Wed Dec 10 05:07:35 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Compilation fix.  

Wed Dec 10 04:47:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.h:

	Handle the led panel like everything else in the status struct. Also
	fixes a bug causing leds from other that the current tab to be
	drawn.  

Wed Dec 10 03:45:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Pass the session for the selected tab to the tab menu.  

Wed Dec 10 03:38:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add bookmark entry to the tab menu.  

Wed Dec 10 02:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Properly adjust the position of the tab menu so entries are not
	accidentially envoked.  

Wed Dec 10 01:49:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Remove unused text color.  

Wed Dec 10 01:45:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Simplify getting of meter color.  

Wed Dec 10 00:24:09 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Enabled leds and local-cgi.  

Wed Dec 10 00:13:39 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Dec 10 00:12:08 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/task.c:

	The cursor was repositioned at the first link of a frame, if a link
	(of this frame) opens page in another frame. It should be fixed now.  

Tue Dec  9 23:08:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/rewrite/rewrite.c, scripting/guile/hooks.c,
	scripting/lua/hooks.c:

	Fix leak in relation to goto-url event.  

Tue Dec  9 22:59:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Hopefully fix the resetting to original title regression.  

Tue Dec  9 22:13:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Fixed internationalization and a trivial cleanup of
	push_login_button().  

Tue Dec  9 21:09:40 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update + menu hotkey binding fixes.  

Tue Dec  9 20:18:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, inpfield.c:

	Move DIALOG_MIN_WIDTH usage to the cause of the problem - the input
	field formatter.  

Tue Dec  9 17:33:57 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation update.  

Tue Dec  9 16:37:00 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Dec  9 13:59:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Moved smb_get_cache() to _even_ better spot.  

Tue Dec  9 13:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Whoops, moved READ_SIZE undef back where it was.  

Tue Dec  9 13:58:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	smb_read_data() now just uses READ_SIZE instead of taking ssize_t
	long. Besides, I have my doubts about ssize_t portability. (Dunno.) 

Tue Dec  9 13:51:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Moved smb_get_cache() to a better spot.  

Tue Dec  9 13:47:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Test for datalen instead of struri(conn->uri) in end_smb_func().
	This was porting error.  

Tue Dec  9 13:42:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	+-----------------------------+ | Do NOT remove blanklines!!! | 
	+-----------------------------+ 
	               | 
	               | 
	               | 
	               | 
	               | 
	               | 

Tue Dec  9 13:40:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Undef MAX_SMBCLIENT_ARGS.  

Tue Dec  9 13:39:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	smb port is now again 139. It doesn't break anything and looks nice.  

Tue Dec  9 13:38:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Overflow risk was handled by zas' in previous patch so shortened the
	FIXME.  

Tue Dec  9 13:38:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	error() introduced by zas was reverted back to fprintf(). stderr is
	standard error reporting channel.  

Tue Dec  9 11:37:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Add #includes needed by FreeBSD.  

Tue Dec  9 09:34:06 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	An assertion to detect possible overflow was added. error() is used
	instead of fprintf().  

Tue Dec  9 09:21:25 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Protocol port is now zero, 139 is a non sense here. smbclient
	options were commented, and debug level was set to zero to preserve
	display even if we have a global smb.conf debug level set.  

Tue Dec  9 08:56:18 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Code redundancy reduction by introducing smb_get_cache(). Previous
	change about assertion was changed again since i am not sure about
	what to do in uri.datalen == 0 case.  

Tue Dec  9 08:44:21 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Reduce code redundancy by introducing smb_read_data(). A wrong
	assertion was replaced by a test.  

Tue Dec  9 07:15:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update and fix.  

Tue Dec  9 03:38:47 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/dialogs.c:

	Do not allow Login for dontsave pages in Form history manager (fix
	for bug #306). Implemented with a dialog that informs the user.  

Mon Dec  8 23:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/rewrite.c:

	A colon can separate smartprefix from its arguments as well.  

Mon Dec  8 23:00:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, protocol/rewrite/Makefile.am:

	librewrite.a -> liburirewrite.a 

Mon Dec  8 22:58:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Removed now-redundant assignment.  

Mon Dec  8 22:57:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Fixed rlimit code introduced by zas.  

Mon Dec  8 22:45:33 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Bunch of comments, fixme, minor cleanup. Sorry but i have no time
	for fixing it now, but this patch will give some directions.  

Mon Dec  8 19:45:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Dec  8 19:36:56 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced 

Mon Dec  8 17:53:02 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Dec  8 16:16:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Do not show . in smb directory list, and use a better way to close
	all unneeded file descriptors.  

Mon Dec  8 11:06:35 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec  8 09:23:55 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Mon Dec  8 02:56:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Funky stuff .. the previous buggy '_template' actually worked.  

Mon Dec  8 02:51:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	For builtin templates set the description to the one in the template
	when adding the option.  

Mon Dec  8 00:39:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, bfu/dialog.c:

	Ensure that dialogs (and especially the _template_ option edit ones
	that contains no text to increase it) has a comfortable minimum
	width. Set to the magic number of 42.  

Mon Dec  8 00:24:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Do not add the proxy URI but the 'real' URI to globhist. Regression
	introduced when the adding of URIs in frames fixed.  

Mon Dec  8 00:22:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Validate sanity check although it should not happen.  

Sun Dec  7 23:34:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed hotkey.  

Sun Dec  7 21:40:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Hopefully a fix of an off by one error in the progress bar filed as
	bug 320.  

Sun Dec  7 21:39:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Compile fix for FreeBSD frame patch.  

Sun Dec  7 21:26:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Update widgets count. Spotted by Jonas.  

Sun Dec  7 21:03:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/options.c, terminal/screen.c, terminal/terminal.h:

	Support for FreeBSD frames (by mikulas, from 0.99pre14).  

Sun Dec  7 20:49:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Improved HTTP code 204 handling (by mikulas, from 0.99pre14).  

Sun Dec  7 20:18:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Reorder cases in the @type switch to eliminate a goto.  

Sun Dec  7 20:17:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Convert @type checking to a switch.  

Sun Dec  7 20:15:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	close() can spoil @errno, so save errno before.  

Sun Dec  7 20:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Abort connection with state S_OUT_OF_MEM instead of -errno after
	allocation failure, spotted by Jonas.  

Sun Dec  7 16:51:43 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	SMB protocol, goto rewritting. Kicked to do that by Jonas.  

Sun Dec  7 16:45:15 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, src/Makefile.am,
	src/protocol/Makefile.am, src/protocol/protocol.c,
	src/protocol/protocol.h, src/protocol/smb/Makefile.am,
	src/protocol/smb/smb.c, src/protocol/smb/smb.h:

	Introduced support for SMB protocol (you need to have smbclient
	installed), by default disabled at compile time (--enable-smb) (by
	mikulas, from 0.99pre12).  

Sun Dec  7 15:59:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Compilation fixes.  

Sun Dec  7 12:50:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed another possible aliasing bug in lists handling (by mikulas,
	from 0.99pre14).  

Sun Dec  7 12:01:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/: .cvsignore, .vimrc:

	Fairies.  

Sun Dec  7 11:55:05 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/man/man1/elinks.1.in:

	ELinks was written by a team.  

Sun Dec  7 11:52:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/event.c:

	Fixed possibility of invalid intercom communication crashing ELinks
	(by mikulas, from 0.99pre10).  

Sun Dec  7 11:39:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed possible aliasing bug in lists handling (by mikulas, from
	0.99pre10).  

Sun Dec  7 11:34:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed incorrect file truncation of file on 304 reply (by mikulas,
	from 0.99pre10).  

Sun Dec  7 11:29:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Set IPTOS_THROUGHPUT on data sockets (assumably by either mikulas or
	brain, from 0.99pre10).  

Sun Dec  7 11:24:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Localized the @fd variable in ftp_retr_file().  

Sun Dec  7 11:17:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Do not retry DNS failures (by mikulas, from 0.99pre10).  

Sun Dec  7 02:45:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Added some TODOs.  

Sun Dec  7 02:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Cleanup to use macro for array sizes.  

Sun Dec  7 02:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Cleanup.  

Sun Dec  7 01:57:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Add .  

Sun Dec  7 01:45:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Elaborate a bit in the URI rewriting option description.  

Sun Dec  7 00:59:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Sun Dec  7 00:50:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/Makefile.am, src/modules/module.c,
	src/protocol/Makefile.am, src/protocol/rewrite/.cvsignore,
	src/protocol/rewrite/.vimrc, src/protocol/rewrite/Makefile.am,
	src/protocol/rewrite/rewrite.c, src/protocol/rewrite/rewrite.h,
	src/sched/task.c:

	Support for URI rewriting like the one scripting extensions provide.
	Prefix enable options are on by default since it can lead to
	confusion if it does not seem to work because of this when first
	rewrite rule is defined by the user. Patch by kuser and me.  

Sun Dec  7 00:26:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	File::Bookmark document has now 'a' as its hotkey. Idea by Jonas.  

Sun Dec  7 00:26:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reassigned menu hotkeys in the File menu to make some actual sense,
	cleaning up some historical twists. This oughta happen once.  

Sun Dec  7 00:22:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reverted 1.62 (by me) and re-add 'add bookmark' menu item.  

Sun Dec  7 00:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Moved @tools_menu near do_tools_menu().  

Sat Dec  6 23:37:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Missing include sched/event.h added. Spotted by Jonas.  

Sat Dec  6 23:02:35 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre11.CVS 

Sat Dec  6 23:00:11 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre11 

Sat Dec  6 22:59:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Dec  6 22:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Dec  6 22:37:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed parsing of the Status HTTP header.  

Sat Dec  6 21:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Removed useless include.  

Sat Dec  6 21:58:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, task.c:

	Bunch of compilation fixes.  

Sat Dec  6 21:57:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Compilation fix.  

Sat Dec  6 21:57:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Reverted Jonas' removal of setting @bookmark_dirty when a folder
	expansion was changed.  

Sat Dec  6 21:04:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Fixed names of members of struct session_task.  

Sat Dec  6 21:03:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Compilation fix.  

Sat Dec  6 17:10:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Removed useless include left there by Jonas ;-).  

Sat Dec  6 17:05:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Compilation fix.  

Sat Dec  6 17:04:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.c, session.h, task.c,
	task.h:

	More task-related routines were moved from sched/session.* to
	sched/task.*.  

Sat Dec  6 16:44:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Trivial tidyup.  

Sat Dec  6 16:44:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.c, session.h, task.c:

	Introduced struct session_task, session.task* moved there,
	session.task is now of that type.  

Sat Dec  6 16:34:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.h:

	Declare struct terminal instead of including terminal/terminal.h.  

Sat Dec  6 09:52:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed leaking of @d if Status: 101 header occurs. Introduced by me,
	reported by Jonas. So the edification is not to write new code when
	sleeping.  

Sat Dec  6 09:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed REFERER_SAME_URL HTTP_REFERER-related leak introduced by me,
	reported by Jonas.  

Sat Dec  6 09:48:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file/cgi.c, http/http.c:

	Fixed send_cookies()-related leaks introduced by me, reported by
	Jonas.  

Sat Dec  6 02:57:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix typo.  

Sat Dec  6 02:56:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, dialogs/menu.c, document/refresh.c,
	document/html/parser.c, sched/Makefile.am, sched/session.c,
	sched/session.h, sched/task.c, sched/task.h, viewer/text/link.c,
	viewer/text/view.c:

	Move the goto family to task oriented file.  

Sat Dec  6 02:53:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	This is unfortunately necessary since we have a few leaks.  

Sat Dec  6 02:27:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Minor simplification to use uri.protocol instead of string
	comparing.  

Sat Dec  6 00:30:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	SERVER_PROTOCOL is now HTTP/1.1. Hmm, I think the CGI environment is
	more-or-less complete now, modulo some really tiny details.  

Sat Dec  6 00:25:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Added support for the 'Status' HTTP header. It can get there from a
	CGI script.  

Sat Dec  6 00:04:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Typo fix.  

Sat Dec  6 00:02:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/file/cgi.c:

	Compilation fixes.  

Fri Dec  5 23:52:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_COOKIE.  

Fri Dec  5 23:45:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	send_cookies() now does not take the @header argument anymore and
	returns a string on its own, without leading 'Cookie: ' and trailing
	'\r\n'.  

Fri Dec  5 22:58:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/: cookies.c, cookies.h:

	send_cookies() now returns struct string *, for now being the passed
	@header if some cookies were actually appended there or NULL
	otherwise.  

Fri Dec  5 22:46:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: Makefile.in, localealias.c:

	Use LOCALEDIR defined in configure.in to /locale since HP-UX' cc
	preprocessor cannot handle all these -D args.  

Fri Dec  5 22:31:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fixed invalid zas' cleanup. Trivial algebra ;-).  

Fri Dec  5 22:30:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Compile fix for HP-UX' cc that do not like bogus ';' in structs.  

Fri Dec  5 22:22:00 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Abnormal link wraparound from top to low part of document view when
	going up was fixed.  

Fri Dec  5 22:13:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Now, subdirs of the CGI path directories are allowed when testing
	validity of CGI script path. Internally, we now pass the path with
	trailing slash to test_path().  

Fri Dec  5 22:01:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	choose_mouse_link(): cleanup, comments and code simplification.  

Fri Dec  5 21:37:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Code simplification, using int_upper|lower_bound() and temp. vars.  

Fri Dec  5 21:19:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	find_link(): @l -> @link_pos, improved readibility by introducing
	ymin and ymax.  

Fri Dec  5 21:00:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Tiny tidyup of test_path().  

Fri Dec  5 20:49:07 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	get_link_url(): use @link instead of @,  use a switch here since it
	looks more appropriate when matching enum values.  

Fri Dec  5 20:27:31 2003  Laurent Monin <zas@norz.org>:

	* po/sk.po:

	Fix missing \n in a translation.  

Fri Dec  5 19:12:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Damned unsigned chars makes it necessary to put all kinds of garbage
	casts in the code. ;-) 

Fri Dec  5 19:02:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	When setting QUERY_STRING and using the query string we need to
	temporarily insert NUL char on the @post position if there is any.  

Fri Dec  5 18:53:25 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Dec  5 18:21:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	TODO about HTTP auth.  

Fri Dec  5 18:20:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_PRAGMA and HTTP_CACHE_CONTROL to no-cache if appropriate.  

Fri Dec  5 18:18:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_IF_MODIFIED_SINCE.  

Fri Dec  5 18:17:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT_LANGUAGE more properly.  

Fri Dec  5 18:14:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT_LANGUAGE.  

Fri Dec  5 18:12:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Explain why we won't set HTTP_ACCEPT_ENCODING.  

Fri Dec  5 18:11:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Protect against vim's cindent bugs ("*/*" messed it up).  

Fri Dec  5 18:08:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT to */*.  

Fri Dec  5 18:07:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Do not check for setenv("HTTP_USER_AGENT") failure.  

Fri Dec  5 18:07:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_REFERER.  

Fri Dec  5 18:02:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_USER_AGENT.  

Fri Dec  5 18:02:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: http.c, http.h:

	Export subst_user_agent().  

Fri Dec  5 17:53:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_PROTOCOL to ELGI/1.0.  

Fri Dec  5 17:49:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	It is possible to have QUERY_STRING in POST query, so added support
	for that to set_vars().  

Fri Dec  5 17:48:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Added blank line ;-).  

Fri Dec  5 17:47:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Cleaned up setting SCRIPT_NAME to be uniform to the others.  

Fri Dec  5 17:45:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set REMOTE_ADDR to 127.0.0.1. Empty string could be maybe better,
	though.  

Fri Dec  5 17:41:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set GATEWAY_INTERFACE to CGI/1.1.  

Fri Dec  5 17:40:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_NAME to localhost. Empty string could be maybe better,
	though.  

Fri Dec  5 17:38:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Convert handling of c_pipe() error to goto end1 in execute_cgi().  

Fri Dec  5 17:37:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	close() pipes on error, if they were created already.  

Fri Dec  5 17:31:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_SOFTWARE to ELinks/<VERSION>.  

Fri Dec  5 17:11:58 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Stahuju -> stahuji 

Fri Dec  5 17:10:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed bug of ELinks not closing local CGI connections.  

Fri Dec  5 15:17:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Only compare document options width if the document is not plain.  

Fri Dec  5 13:50:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, renderer.c, html/parser.c:

	A nice little hack that will mark those document that actually
	depend on a specific document height (those that contain textareas
	or frames). This means we can better check if we need to compare the
	height and determine if we need to rerender.  

Fri Dec  5 08:38:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Convert assertion to test, and extends it to check for uri->hostlen
	== 0, which is correct but do not have sense here. It shold fix bug
	280 (...).  

Fri Dec  5 05:41:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/viewer/text/view.c:

	Middle click opens links in a new backgrounded tab.  

Fri Dec  5 05:18:16 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/viewer/text/view.c:

	Invert behaviour of the mouse wheel on tabs, wheel down jumps to the
	next tab. Based on new IThinkIsBetterThisWay(TM) technology.  

Thu Dec  4 19:40:15 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated translation.  

Thu Dec  4 18:20:42 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/: config/options.c, cookies/dialogs.c:

	Indentation and whitespace fixes.  

Thu Dec  4 18:05:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/file.c:

	Trivial tidyup.  

Thu Dec  4 16:31:26 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Thu Dec  4 16:01:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Dec  4 13:42:57 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec  4 12:28:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Bunch of minor fixes: split_line() is now clever in some rare cases
	of unsplittable text. Some assertions were added, cleanup. Note that
	more work is needed we still have weird issues here.  

Thu Dec  4 11:11:03 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/config/options.inc,
	src/protocol/file/cgi.c, src/protocol/file/file.c:

	Support for local CGIs is now controlled by --enable-local-cgi
	configure option. Whitespaces and ending dots were fixed too.  

Thu Dec  4 09:27:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, dialogs/status.c, document/renderer.c,
	sched/session.c, sched/session.h, viewer/text/view.c:

	Move session status info to new session_status struct.  

Wed Dec  3 23:23:12 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Glorified Jonas a little.  

Wed Dec  3 23:21:15 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Slightly updated Mikulas' record.  

Wed Dec  3 23:20:42 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed BFU colorization from my record.  

Wed Dec  3 23:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, NEWS:

	Local CGI support.  

Wed Dec  3 23:18:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec  3 18:32:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Increase padding so also Ctrl-Insert is within the limit.  

Wed Dec  3 18:31:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Compile fix for FreeBSD.  

Wed Dec  3 17:16:08 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Do not attempt to display text widget if there is no room for it in
	dialog.  

Wed Dec  3 17:10:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Make it possible to cycle tabs by mouse wheeling in the tab area.  

Wed Dec  3 17:07:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/view.c:

	Add small (right clickable) tab menu.  

Wed Dec  3 16:40:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	Previous patch was breaking loading of file URIs (ie .), reported by
	Jonas. Now we check if protocol needs a slash after host or not and
	fail if there is no host part for concerned protocols.  

Wed Dec  3 15:30:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Fix the hotkey listed for the menu item 'Open in external editor':
	s/Ctrl-E/Ctrl-T/.  

Wed Dec  3 15:15:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/download.c:

	In dlg_abort_download and dlg_undisplay_download, use @file_download
	instead of dlg_data->dlg->udata as we've assigned the latter to the
	former.  

Wed Dec  3 14:08:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Give do_refresh_dialog() the static keyword.  

Wed Dec  3 13:58:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/download.c:

	In push_delete_button, use @file_download instead of
	dlg_data->dlg->udata as we've assigned the latter to the former.  

Wed Dec  3 13:03:51 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	When there's no host part in url, we should just emit a bad url
	syntax error instead of attempting to create a connection to an
	obviously invalid host. This patch does that and should fix bug 280.  

Wed Dec  3 13:02:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Clean up draw_frames: Remove an unused variable, add a blank line,
	and simplify the bounding of current_link.  

Wed Dec  3 12:37:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Remove a TODO that was done by pasky in
	src/globhist/globhist.c:1.53->1.54: Do not read/write globhist when
	anonymous.  

Wed Dec  3 11:27:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Give request_frameset() the static keyword.  

Wed Dec  3 07:29:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Remove an unnecessary |if (ml)|: freeml() checks that its argument
	is not NULL before dereferencing it.  

Wed Dec  3 07:23:28 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In get_form_url, improve upon (i.e., fix) my previous fix for a
	memory leak that could occur when malloc fails
	(src/viewer/text/form.c:1.60->1.61).  

Wed Dec  3 01:19:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Dec  3 01:16:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Hopefully restore test_path() handling to original one.  

Wed Dec  3 01:06:05 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec  3 00:49:52 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/hierbox.c:

	s/can not/cannot/ 

Wed Dec  3 00:46:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Remove an #include for document/document.h, which was made
	unnecessary in src/config/options.c:1.410->1.411.  

Tue Dec  2 23:48:31 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Revert attempt to fix bug 304.  

Tue Dec  2 20:53:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, dialogs/status.h, document/renderer.c,
	viewer/text/view.c:

	Blast off init_bars_status(). We now update the (status) bars when
	needed and makes sure the document is also updated.  

Tue Dec  2 20:18:46 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Fix in Italian translation.  

Tue Dec  2 20:18:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Rerender the document when the tab bar visibility changes. Fixes bug
	87.  

Tue Dec  2 19:57:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.c, terminal/window.c:

	Update ses->visible_tabs_bar in update_status() and call it when
	opening and closing tabs.  

Tue Dec  2 19:16:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/status.c, dialogs/status.h:

	Move status updating to update_status() and call it from the ui
	changehook.  

Tue Dec  2 19:07:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/window.h:

	Comment the window struct.  

Tue Dec  2 18:38:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Make it possible to add actions for any key map and add a toggle
	button to the keys dialog. Reveals some bugs in the text scrolling
	widget.  

Tue Dec  2 17:31:41 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Simple mouse support for text widget scrollbar.  

Tue Dec  2 16:51:19 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Define BIG_READ as 65536 and use it instead of hardcoded number.  

Tue Dec  2 16:26:39 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec  2 16:00:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	HTTP code 307 is now handled (as a 302, not perfect but should do
	the job).  

Tue Dec  2 14:58:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Fixed potential bug created in rev1.10 by Jonas, when cache_entry
	could be freed and then used in init_document(), in particularily
	pathological case.  

Tue Dec  2 14:49:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Fixed capital letters in download window.  

Tue Dec  2 14:42:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Use hardcoded comma, not separator, between elapsed and estimated
	time, to keep it at one line and thus make the download window more
	compact.  

Tue Dec  2 14:36:04 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	Use @separator instead of hardcoded string.  

Tue Dec  2 14:22:58 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hotkey fix.  

Tue Dec  2 11:23:45 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Do not copy post data when copying old to new session. This patch
	should fix bug 304.  

Tue Dec  2 10:54:12 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Vertical scrollbar display was tuned a bit, not yet perfect, but
	better. format_and_display_text() was introduced to shorten
	kbd_text().  

Mon Dec  1 23:44:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	m33p.  

Mon Dec  1 21:50:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Cleanup.  

Mon Dec  1 21:47:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Don't be so optimistic.  

Mon Dec  1 21:46:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move window title code to display_window_title().  

Mon Dec  1 21:06:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Cleanup title trimming.  

Mon Dec  1 20:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Merge print_current_title() with other title tab displaying and
	rename it display_tab_bar().  

Mon Dec  1 20:44:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, viewer/text/link.h, viewer/text/view.c:

	Move print_current_title() to the status dialog file.  

Mon Dec  1 20:42:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fix IP address detection to be less naive and drastically reduce
	false positives (triggered ie. by elinks -dump links-2.1pre14 bug
	reported by Jonas).  

Mon Dec  1 20:31:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/status.c, sched/session.c,
	sched/session.h:

	Cache ui.window_title option in the session struct so we don't check
	in the status updating hotspot.  

Mon Dec  1 19:49:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, terminal/kbd.c:

	We cannot check option values in slaves because their option system
	may be out of sync. This was done for the ui.window_title option.
	Instead check it at the top level in print_screen_status().  
	
	Fixes debian bug #209303: "window_title gets ignored by secondary
	instances".  

Mon Dec  1 19:04:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	When I say fix, I mean fix.  

Mon Dec  1 19:03:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Whoops, fixed typo fix introduced in the latest patch. Spotted by
	Jonas.  

Mon Dec  1 19:01:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Revert part of rev. 1.13 Jonas' merge of shrink_format_cache() and
	delete_unused_format_cache_entries(). The two-phase cache cleanup
	was reintroduced, thus hopefully fixing huge memory leaks
	(basically, almost no documents were voluntarily freed from the
	cache. This could also somehow affect bug 297, but probably not.  

Mon Dec  1 18:55:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Reverted latest shrink_format_cache() change, it is still wrong.  

Mon Dec  1 18:42:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Do not break when the format cache size is within the value of
	format.size but keep looping to also check out of sync entries. This
	is more in the spirit of the original cache shrinking code.  

Mon Dec  1 18:28:38 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Typo fix.  

Mon Dec  1 18:28:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed trying to run already running connection.  

Mon Dec  1 18:23:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/document.c, document/document.h:

	Check that format_cache_entries is in sync and do not allow
	recalculation.  

Mon Dec  1 18:13:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass cache_entry to init_document() so cache locking is handled in
	the document lifecycle functions. Also move global document option
	re-initialization.  

Mon Dec  1 18:06:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/common.c:

	If @filenamelen is zero in get_next_path_filename(), return NULL.
	This fixes infinite loop in protocol/file/cgi.c:test_path().  

Mon Dec  1 16:33:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Added missing includes.  

Mon Dec  1 16:08:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use horizontal border line as tab separator.  

Mon Dec  1 16:05:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/refresh.c,
	document/renderer.c, document/plain/renderer.c,
	protocol/protocol.c, protocol/user.c, sched/session.c,
	terminal/event.c, terminal/tab.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/vs.c:

	Fsck #includes.  

Mon Dec  1 15:45:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Minor simplifications.  

Mon Dec  1 15:35:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c, sched/session.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	Defer inclusion of document/html/parser.h because of introduced
	unsafe macros (ie. 'format').  

Mon Dec  1 15:30:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Include document/html/frames.h for struct frameset_param.  

Mon Dec  1 15:29:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:28:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/widget.c:

	Added missing include bfu/inphist.h.  

Mon Dec  1 15:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.h:

	Declare struct menu_head.  

Mon Dec  1 15:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, dialog.h:

	Include terminal/window.h in bfu/dialog.h, dlg_data->win->term is so
	common that...  

Mon Dec  1 15:23:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/button.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:23:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/widget.h:

	Added missing struct term_event decl.  

Mon Dec  1 15:21:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Added missing includes.  

Mon Dec  1 15:20:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.h:

	Fixed missing struct doucment declaration.  

Mon Dec  1 15:19:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.h, checkbox.h, dialog.h, group.h, hierbox.h,
	hotkey.h, inpfield.h, inphist.h, listbox.h, menu.h, msgbox.h,
	text.h, widget.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 15:11:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.h:

	Reinclude document/view.h, we dereference struct document_view.  

Mon Dec  1 15:09:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Re-include document/document.h because of enum cp_status.  

Mon Dec  1 15:06:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include document/document.h.  

Mon Dec  1 15:04:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 15:02:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:01:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Restore alphabetical order of includes.  

Mon Dec  1 15:01:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include document/view.h.  

Mon Dec  1 15:00:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.h, document/plain/renderer.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:55:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Revert accidentally committed incomplete patch.  

Mon Dec  1 14:51:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/session.h:

	Fixed missing include document/document.h.  

Mon Dec  1 14:51:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.h, download.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:41:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/style.c:

	Added missing include terminal/terminal.h.  

Mon Dec  1 14:40:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: frames.h, parser.h, renderer.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:36:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/style.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:33:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: refresh.h, renderer.h, view.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:31:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Typo fix.  

Mon Dec  1 14:31:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Include config/option.h instead of declaring struct option. We
	rename it to option_elinks.  

Mon Dec  1 14:24:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: color.h, draw.h, screen.h, tab.h, terminal.h,
	window.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:21:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:17:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Declare struct screen_char instead of including terminal/draw.h.  

Mon Dec  1 14:15:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, cookies/cookies.h,
	document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, document/html/renderer.h, lowlevel/dns.c,
	lowlevel/select.c, protocol/http/date.c:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:13:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Include util/error.h only when debugging.  

Mon Dec  1 14:11:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:10:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Declare struct string instead of including util/string.h.  

Mon Dec  1 14:10:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	TODO about using string fields for the struct uri members.  

Mon Dec  1 14:08:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: form.h, link.h, search.h, textarea.h, view.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:02:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:01:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:00:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.h:

	Declare struct connection instead of including sched/connection.h.  

Mon Dec  1 14:00:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: connect.h, dns.h:

	Removed ancient comment.  

Mon Dec  1 13:56:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.h:

	Added missing include <string.h>.  

Mon Dec  1 13:55:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/download.c, globhist/globhist.c,
	globhist/globhist.h, lowlevel/Makefile.am, lowlevel/ttime.c,
	lowlevel/ttime.h, sched/connection.c, sched/connection.h,
	sched/download.c, sched/download.h, sched/session.c,
	util/Makefile.am, util/conv.h, util/ttime.c, util/ttime.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 13:50:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/file/cgi.c, sched/connection.c,
	sched/connection.h:

	Merge connection.cgi_* to connection.cgi_pipes.  

Mon Dec  1 12:30:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Minor tidyup.  

Mon Dec  1 11:28:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move tab bar updating to display_tab_bar().  

Mon Dec  1 11:23:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move status bar updating to display_status_bar().  

Mon Dec  1 11:15:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Remove unused variable.  

Mon Dec  1 10:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Replace ugly usage of strchr with scriptlen.  

Mon Dec  1 10:51:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Don't mangle conn->uri but use memacpy and length variable instead.  

Mon Dec  1 10:43:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Fix last patch.  

Mon Dec  1 10:42:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Make test path take the path length and don't do any string
	mangling.  

Mon Dec  1 09:16:38 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec  1 06:23:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, protocol/file/Makefile.am,
	protocol/file/cgi.c, protocol/file/cgi.h, protocol/file/file.c,
	sched/connection.c, sched/connection.h, sched/error.c:

	Buggy CGI support.  

Mon Dec  1 05:58:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sun Nov 30 19:45:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, sched/history.c, sched/session.c,
	sched/session.h, viewer/text/link.c, viewer/text/view.c:

	Move session status management to separate file.  

Sun Nov 30 18:36:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, sched/session.c:

	Move ses->visible_(title|status)_bar management to change_hook.  

Sun Nov 30 16:13:36 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updates/fixes.  

Sun Nov 30 06:42:48 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/: http.c, http.h:

	Preparation for CGI support.  

Sun Nov 30 00:22:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Change horizontal scrolling back to it was before (1.276 -> 1.277) 

Sat Nov 29 23:01:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	@separater -> @separator in get_stat_msg().  

Sat Nov 29 21:58:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Let's not use capital letters in the middle of sentence in
	get_stat_msg().  

Sat Nov 29 21:55:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/error.c, sched/error.h,
	sched/session.c, sched/session.h:

	Move get_stat_msg() back home. Requested by pasky.  

Sat Nov 29 21:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Finally fixed the auto-file://-assuming. Now also absolute paths
	will work.  

Sat Nov 29 21:37:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Make the download progress meter look like "[  7%  ]". It uses less
	space and looks spiffy too.  

Sat Nov 29 21:20:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed ./elinks bla.html usage, broken by changes in file:// URI
	semantics changes.  

Sat Nov 29 20:55:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Disable abort and delete file button in the download manager. The
	locking causing assertion failures.  

Sat Nov 29 20:39:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Show download meter in the download manager.  

Sat Nov 29 19:16:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Calculate x and y after layouting.  

Sat Nov 29 19:09:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Do not use dialog refreshing for the download dialog but control it
	the old way.  

Sat Nov 29 19:03:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Expose redraw_dialog() and make it control the calling of the
	layouter bassed on boolean argument.  

Sat Nov 29 18:33:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Use get_stat_msg() for the download dialog.  

Sat Nov 29 18:32:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	Make even the state message separater configurable.  

Sat Nov 29 18:18:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Oops fix floating point exception. >:) 

Sat Nov 29 18:07:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	Make the caller control the 'wide terminal' heuristics.  

Sat Nov 29 17:50:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	For URL 'file://', go to the current directory.  

Sat Nov 29 17:49:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Show elapsed time info in the status message and change the 'wide
	terminal' heuristics.  

Sat Nov 29 17:45:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed handling of absolute paths in transform_file_url().  

Sat Nov 29 17:37:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Inform that the speed is infact the speed.  

Sat Nov 29 17:31:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_stat_msg(): If the terminal is wide enough use longer names for
	values.  

Sat Nov 29 17:12:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_stat_msg(): Use macros for the calculations.  

Sat Nov 29 16:58:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless global_doc_opts declaration.  

Sat Nov 29 16:56:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	get_stat_msg() was moved to sched/error.* 

Sat Nov 29 16:46:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	get_stat_msg(): Decrease indentation by moving get_err_msg() up
	front.  

Sat Nov 29 16:12:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/header.c:

	parse_http_header(): Use memacpy and improve comment.  

Sat Nov 29 16:02:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/header.c:

	parse_http_header(): Fix off by one error eating non whitespace
	chars.  

Sat Nov 29 13:37:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Compilation fix.  

Sat Nov 29 13:14:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@h -> @value, @g -> @valend in parse_http_header().  

Sat Nov 29 13:13:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Swapped @h and @g declaration in parse_http_header().  

Sat Nov 29 13:13:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Described a little the value part parsing in parse_http_header().  

Sat Nov 29 13:10:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@i -> @itempos in parse_http_header().  

Sat Nov 29 13:09:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Minor simplifications in parse_http_header().  

Sat Nov 29 13:08:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	No need to rename parse_http_header_param().  

Sat Nov 29 13:06:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Comment a bit what's going on in parse_http_header().  

Sat Nov 29 13:02:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @i even more in parse_http_header().  

Sat Nov 29 13:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@f -> @pos in parse_http_header().  

Sat Nov 29 13:00:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Minor tidyup of parse_http_header().  

Sat Nov 29 13:00:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @h in parse_http_header().  

Sat Nov 29 12:59:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Simplification of @h handling in parse_http_header().  

Sat Nov 29 12:59:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @i, @g in parse_http_header().  

Sat Nov 29 06:01:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix previous patch not handling lines being lower than max height.  

Sat Nov 29 05:40:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Simplify bounds checking and handle more keyboard actions.  

Sat Nov 29 05:21:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Always ensure that the maximum number of lines are available.  

Sat Nov 29 04:31:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/text.c, config/options.inc:

	Make real scroll bar for scrollable text. Not perfect yet (the
	scroll bar steps are not that smooth).  

Sat Nov 29 02:40:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Only make room for top and bottom space and one button line.  

Sat Nov 29 02:38:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use text scrollable for hierbox item info.  

Sat Nov 29 02:26:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix some issues with resizing and add set cursor to (trivially) show
	that the text is selected.  

Sat Nov 29 02:13:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Cleanup widget_is_focusable() by creating text_is_scrollable()
	macro.  

Sat Nov 29 01:46:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Readd scrollable text widgets. Basicly it is the first version but
	with a few flaws fixed. Stuff like correct trimming so we do not
	draw an extra new line and forcing the dialog to be the width of the
	longest line.  

Sat Nov 29 01:06:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Introduced download-manager action, by default bound to 'D'.  

Sat Nov 29 00:53:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/file.c:

	Make it clear that the file URI we work on is pre-chewed by
	transform_file_url().  

Sat Nov 29 00:49:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	transform_file_url(): @cwdlen localized to the if() body inserting
	cwd.  

Sat Nov 29 00:48:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Keep the conventions - transform_file_uri() -> transform_file_url() 

Sat Nov 29 00:47:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	transform_file_uri() was cleaned up, goto converted to if() body.  

Sat Nov 29 00:45:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Zas' piggy comment sanitization in transform_file_uri().  

Sat Nov 29 00:44:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	insert_wd() -> transform_file_uri(), added function description.  

Sat Nov 29 00:40:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Changed file URL sanitization in insert_wd(). Now, it is more
	standard-compilant, respecting the host part of URI, modulo few
	practical extensions to help maintain backwards compatibility (disk
	in host part for dosfs and '.' in host part denoting the current
	working directory). However, this notation is NOT
	backwards-compatible per se. It shouldn't hurt pretty much anything
	though, I believe. Note that even non-localhost hostname is assumed
	to express the local system, although that may well not be the case
	:/.  

Sat Nov 29 00:16:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	insert_wd() cleanup - shift @url so that we don't work with big
	offsets later.  

Fri Nov 28 20:53:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, listbox.c:

	Calculate max dialog height like we calculate max width. This makes
	manager dialogs scale better.  

Fri Nov 28 19:49:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	widget_is_focusable() was make static inlined.  

Fri Nov 28 19:49:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Check if the selected is still focusable after the layouter has been
	called since dimension changes can affect it.  

Fri Nov 28 19:38:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Revert my monster scrollable text widget patch.  

Fri Nov 28 18:05:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Like vertical scrolling don't scroll horizontally when the rest of
	the document is already visible.  

Fri Nov 28 16:55:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix compile error.  

Fri Nov 28 16:32:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Implement support for scrollable text widgets. First usage is the
	Keys message box.  It is not perfect yet but has not segfaulted for
	a long time now and I would like to have a reference for further
	hacking.  
	
	Text widgets can now be focusable but only when there is actually
	anything to scroll.  This is checked after calling the layouter
	whether we should cycle focus.  
	
	Forcing redrawing while the textwidget is scrollable will resize the
	dialog (and lead to unwanted recalculations of the line splitting.
	This should maybe be fixed. Also I'd like to have some percentage
	overview (like the title bar) when we are scrolling.  

Fri Nov 28 16:16:45 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Nov 28 16:12:06 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More translation updates.  

Fri Nov 28 16:00:18 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation updated.  

Fri Nov 28 15:59:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Strip the post data part of URL when setting document title.  

Fri Nov 28 14:47:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	ui subtree is now auto-sorted. This should fix misplaced LED folder,
	reported iirc by zas.  

Fri Nov 28 14:02:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/widget.c:

	Remove an unnecessary #include "bfu/listbox.h".  

Fri Nov 28 13:47:48 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Nov 28 10:57:59 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Nov 28 04:59:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix whitespace noise in last patch.  

Fri Nov 28 04:58:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h, link.c:

	Add reset action to the link menu.  

Fri Nov 28 04:57:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Minor simplification.  

Fri Nov 28 03:49:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Add support for delete the file when stopping a download. Idea from
	links-2.1pre8.  

Fri Nov 28 02:24:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, dialogs/download.c,
	sched/download.c, sched/download.h:

	Make dialog refreshing more controllable like signaling that there
	is no need to redraw. Add dirty flag to file_download so we only
	update the dialog when needed. This should restore behaviour from
	before usage of dialog refreshing.  

Fri Nov 28 02:22:30 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Nov 28 02:18:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/download.c:

	Stop -> Abort in the downloads manager.  

Fri Nov 28 01:51:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Always beep when download is finished, if we are supposed to.  

Fri Nov 28 01:46:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c:

	Use real dialog refresh for the download dialog.  

Fri Nov 28 01:40:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Removed strange and obvious comment.  

Fri Nov 28 01:31:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reverted making the notify beeping more buggy^Wclever, it breaks
	document.download.notify_bell == 2 case. Sorry Jonas, shouldn't have
	advise you w/o actually looking at the code.  

Fri Nov 28 01:06:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Make the notify b33ping even more clever.  

Fri Nov 28 00:57:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Eliminate gettext() call and error() calls from check_signals(),
	both presumably quite unsafe.  

Fri Nov 28 00:53:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Remove file_download->ask that is apparently unused.  

Fri Nov 28 00:53:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: link.c, textarea.c, textarea.h:

	Add 'Open in external editor' item to the Link menu for textarea
	form item. Hope this makes this feature more visible ;-).  

Fri Nov 28 00:48:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Documented assertm() being called in signal handler.  

Fri Nov 28 00:46:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Eliminate memset() (function unsafe in signal context) from
	install_signal_handler().  

Fri Nov 28 00:39:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	done_document(): Blast off global document option pointer if the
	document is the `owner' so we don't have a dangling pointer. Could
	fix global_doc_opts corruption reported by Zas.  

Fri Nov 28 00:26:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Revert change to src/viewer/text: link.c (1.108 -> 1.109). "Links
	are sorted horizontally. See bug 11 for reasons." It breaks numbered
	links.  

Fri Nov 28 00:21:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: Makefile.am, refresh.c, refresh.h:

	We now have more integrated dialog refreshing so remove the old one.  

Fri Nov 28 00:17:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Use the generic refreshed message box.  

Fri Nov 28 00:17:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c, msgbox.h:

	Add generic refreshed message box. When refreshing we also have to
	call the layouter now.  

Thu Nov 27 21:52:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Refresh downloads in the manager so we can show progress with simple
	percentage. Implementing meter should not be that hard now.  

Thu Nov 27 21:51:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Add support for more generic dialog refresh.  

Thu Nov 27 21:20:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: auth.c, mime.c:

	A bunch of compile fixes.  

Thu Nov 27 19:40:41 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: dialogs.c, formhist.c:

	Indentation beautification.  

Thu Nov 27 19:26:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	I cannot see how the auth dialog could have worked before since the
	text field data was not synced to the auth entry. At least it should
	be now.  

Thu Nov 27 19:12:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Set loaded = 1 when successfully saving formhist file, this should
	definitely close bug #295-take2.  

Thu Nov 27 18:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, dialogs/mime.c:

	Use default ok button handler.  

Thu Nov 27 18:43:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use default ok button handler.  

Thu Nov 27 18:39:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/dialog.c, bfu/dialog.h, bfu/widget.h,
	dialogs/edit.c, scripting/lua/core.c:

	Introduce a default ok handler to make a cleaner interface than the
	current dlg->refresh(_data).  

Thu Nov 27 16:02:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Create wrapper for cell formatting.  

Thu Nov 27 14:17:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Correctly pass the delete error type.  

Thu Nov 27 14:08:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Check if the item is used before asking whether the user wants to
	delete it.  

Thu Nov 27 14:05:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c:

	Lock the 'real' term->spec .. not the _template_ :/ 

Thu Nov 27 13:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix hierbox delete actions by propagating delete properties from
	parents to children.  

Thu Nov 27 13:56:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Just another compile fix[tm].  

Thu Nov 27 13:53:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Lock the term->spec option tree so it won't be deleted.  

Thu Nov 27 13:16:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix superfluous blank line between text and OK button in the
	Help::Keys dialogs.  

Thu Nov 27 13:09:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Remove FIXME.  

Thu Nov 27 13:08:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Paranoid handling in mailcap / mimetypes MIME when running in
	anonymous mode. They will now disable themselves. Enable checking
	was moved to the entry functions.  

Thu Nov 27 12:42:01 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/bfu/leds.c:

	Description of LEDs is now more complete. .po files were resynced
	and french translation was updated.  

Thu Nov 27 12:16:56 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and improved.  

Thu Nov 27 11:34:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Try to hint more to the new users - in the info window, show that
	space expands the folder if you open the info window upon a folder.  

Thu Nov 27 11:16:01 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A segfault occuring when calling keybinding manager was fixed, it
	was introduced by rev 1.123. No ops case is now handled correctly.
	It closes bug 298.  

Thu Nov 27 08:11:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 27 06:56:48 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, session.c:

	Simplification.  

Thu Nov 27 06:31:59 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Thu Nov 27 03:47:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use print_delete_error().  

Thu Nov 27 03:13:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	When resizing ensure that the selected item is moved into the
	hierbox browsers visible area. Fixes bug 58.  

Thu Nov 27 02:14:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	No need to call ok_dialog() since we just want to cancel the dialog.  

Thu Nov 27 02:06:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	No need to call ok_dialog() since input_field_ok() already does
	everything it does. Use macro to check whether to add to history.  

Thu Nov 27 01:55:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	No need to call ok_dialog() since we have already done everything it
	does and we really just want to nuke the dialog.  

Thu Nov 27 01:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Ok I try once more (although I should really go to bed). Dialog
	checking should now be ok when adding mime extensions.  

Thu Nov 27 01:43:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Fix last patch. We should of course also check dialog data.  

Thu Nov 27 01:19:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Use real button handler in the add mime extensions dialog.  

Thu Nov 27 01:06:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Don't allow to bookmark glohist entries in anonymous mode.  

Thu Nov 27 01:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Don't show terminal option save button in anonymous mode.  

Thu Nov 27 00:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Fix last patch to proxy ok button handler.  

Thu Nov 27 00:38:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use button handler to do the terminal resizing and not dlg->refresh.  

Thu Nov 27 00:29:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Fix bad usage of dlg->refresh_data .. instead use dlg->udata.  

Thu Nov 27 00:05:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/html/renderer.c:

	Add new option to control handling of non breaking space. If set it
	means do not honour non breaking space (the nbsp entity) but allow
	to wrap the text.  This can help keeping the width of documents down
	so no horizontal scrolling is needed. This is a partial fix of bug
	292 "Text should wrap on screen boundary".  

Wed Nov 26 23:49:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c:

	Add support for listbox specific drawing operations. For now it is
	used by download to trim long urls with ending dots.  

Wed Nov 26 23:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Rename delete_info -> context.  

Wed Nov 26 23:02:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Rename action_info -> context.  

Wed Nov 26 23:01:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Replace hierbox_action_info structure with listbox_context.  

Wed Nov 26 22:55:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Add listbox_item and fix comment.  

Wed Nov 26 22:44:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use listbox_context in test_search() when moving to parent box.  

Wed Nov 26 22:42:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Initialize html_top.invisible to 1, not ELEMENT_DONT_KILL.  

Wed Nov 26 22:35:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listbox.c, listbox.h:

	Move box_context to header and rename to listbox_context. This
	should be shared so we don't end up with 30 context data structure.  

Wed Nov 26 22:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Make it explicit in the info dialog that forms are saved for the
	given URL. I'm getting a bit tired'n'sleepy so maybe this isn't 100%
	best, but it looks like a good idea now :).  

Wed Nov 26 22:30:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Dontsave button label changed from 'Toggle enable' to 'Toggle
	saving'.  

Wed Nov 26 22:27:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Do not permit adding of new keybindings in anonymous mode.  

Wed Nov 26 22:26:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Update the includes, we moved stuff.  

Wed Nov 26 22:25:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Disallow bookmarks changes in anonymous mode.  

Wed Nov 26 22:21:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	dislpay_listbox_item(): Minor simplification.  

Wed Nov 26 22:16:32 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/protocol/Makefile.am,
	src/protocol/file.c, src/protocol/file.h,
	src/protocol/file/Makefile.am, src/protocol/file/file.c,
	src/protocol/file/file.h:

	protocol/file.* -> protocol/file/file.* 

Wed Nov 26 22:14:29 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/protocol/Makefile.am,
	src/protocol/ftp.c, src/protocol/ftp.h, src/protocol/ftpparse.c,
	src/protocol/ftpparse.h, src/protocol/ftp/Makefile.am,
	src/protocol/ftp/ftp.c, src/protocol/ftp/ftp.h,
	src/protocol/ftp/ftpparse.c, src/protocol/ftp/ftpparse.h:

	src/protocol/ftp(parse).* -> src/protocol/ftp/ftp(parse).* 

Wed Nov 26 22:10:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Reindentations, to keep the indentation at least a little in
	control.  

Wed Nov 26 22:06:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Remove useless prototype.  

Wed Nov 26 22:05:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Correct protocol/ftpparse.h inclusion.  

Wed Nov 26 22:01:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file/.cvsignore, file/.vimrc, ftp/.cvsignore,
	ftp/.vimrc:

	Added fairies.  

Wed Nov 26 21:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix error introduced in parser.c (1.270 -> 1.271). Spotted by pasky.  

Wed Nov 26 21:58:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Complete SP_FRAMESET root frameset setting condition, being lost in
	Jonas' not passing of @document to create_frameset(). (r1.379) 

Wed Nov 26 21:52:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Add button to toggle formhist_data->dontsave requested by zas (and
	also fix call to ensure that form history has been loaded when the
	manager is opened.  

Wed Nov 26 21:48:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Reindent some tiny bits more intelligently than Jonas ;-).  

Wed Nov 26 21:39:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Add flag member to hierbox_button to signal whether the button
	should be shown when elinks runs in anonymous mode. This is (IMHO) a
	more proper fix compared to paskys previous (buggy ;-) patch that
	dublicated code since hierbox_browser() will take care of the logics
	for us.  

Wed Nov 26 21:33:15 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Do not optimize-thru-group structures if that would break logical
	structure.  

Wed Nov 26 21:27:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Minor fix_next_link_in_search() tidyup.  

Wed Nov 26 21:27:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Localize the variables to an inner loop in
	fix_next_link_in_search().  

Wed Nov 26 21:15:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Mention mimetypes file support as part of new MIME subsystem. Add
	download manager and displaying of URIs in plain text documents.  

Wed Nov 26 21:08:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	When !cookies.expire, its more usual meaning is just that the cookie
	should not be saved and expires with ELinks quitting.  

Wed Nov 26 20:58:44 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Skip fields lines if any, even if dontsave is set.  

Wed Nov 26 20:35:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/uri.c, protocol/uri.h, sched/session.c:

	extract_position() -> extract_fragment() 

Wed Nov 26 20:34:25 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov 26 20:30:13 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/dialogs.c:

	Info about save/dontsave was added to dialog.  

Wed Nov 26 19:39:31 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: dialogs.c, formhist.c, formhist.h:

	Formhist was fixed.  A field dontsave was added to struct
	formhist_data.  Load/save functions are now named
	load_forms_from_file() and save_forms_to_file(),
	form_already_saved() was renamed to form_exists(), old names were
	ambiguous (save to memory or file).  Cleanup and simplifications.  

Wed Nov 26 18:27:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Do not show the lua console in anonymous mode.  

Wed Nov 26 18:24:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Do not save cookies in anonymous mode.  

Wed Nov 26 18:21:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: formhist/dialogs.c, cookies/dialogs.c:

	Do not offer the [ Save ] button in anonymous mode.  

Wed Nov 26 18:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Never save formhist to disk in anonymous mode.  

Wed Nov 26 18:17:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix wrong error message order.  

Wed Nov 26 18:14:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, viewer/text/view.c:

	Enable bookmark manager even for anonymous users, but never actually
	save anything to disk. Useful for having some predefined bookmarks
	for the anonymous users.  

Wed Nov 26 18:09:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Do not read/write globhist when anonymous.  

Wed Nov 26 17:59:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Paranoia: disallow anonymous users to save formatted.  

Wed Nov 26 17:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make delete error printing more generic and handle undeletability
	(;/) even tho' it is a corner case.  

Wed Nov 26 17:41:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov 26 17:35:54 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Wed Nov 26 16:44:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Minor clarification of traverse_listbox_items_list() description.  

Wed Nov 26 16:19:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Recovery path for assertm().  

Wed Nov 26 14:31:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Don't center hierbox message boxes that contains additional item
	info.  

Wed Nov 26 14:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Don't allocate the box_context but use a local one.  

Wed Nov 26 14:10:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add missing NULL_MENU_ITEM in the tools menu.  

Wed Nov 26 13:39:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/memlist.c:

	Clarify freeml's second comment.  

Wed Nov 26 13:13:23 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In get_form_url, fix a memory leak that could occur if malloc
	failed.  

Wed Nov 26 13:00:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	In try_encoding_extensions, use memcpy instead of safe_strncpy as we
	already have the length of the string.  

Wed Nov 26 12:44:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	In bookmark_search_do, use assertm() instead of if and internal().  

Wed Nov 26 12:33:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Fix an omission in my last commit: Explain the significance of @fn's
	return value.  

Wed Nov 26 12:28:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Rewrite traverse_listbox_items_list's comment for clarity and
	accuracy.  

Wed Nov 26 11:45:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Give tp_cancel() and tp_free() the static keyword.  

Wed Nov 26 11:34:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	Now that the items have their own menu with many keyboard
	accellerators free, change the accellerators for the items on the
	Tools menu to be more intuitive. This also fixes a conflict between
	Global histor~y and Form histor~y that was introduced in
	src/dialogs/menu.c:1.196->1.197.  

Wed Nov 26 11:29:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c,
	cache/cache.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	Rename init_browser_box to init_browser_box_item and rename its @box
	variable to @item.  

Wed Nov 26 11:19:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Fix some memory leaks that could occur if malloc failed.  

Wed Nov 26 04:47:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	The download main menu item has been made obsolete by the download
	manager.  

Wed Nov 26 04:43:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, dialogs/download.h, dialogs/menu.c,
	sched/download.c, sched/download.h:

	More tools. Presenting a new and shiny download manager using under
	132 lines of code. The managers sure are cheap these days. :) 

Wed Nov 26 04:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix leak when deleting by proceeding even if msg is NULL.  

Wed Nov 26 04:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Compile fix.  

Wed Nov 26 04:07:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	object_nolock(cookie) when initializing.  

Wed Nov 26 03:19:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Rename all widget_data variables to widget_data.  

Wed Nov 26 01:29:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/Makefile.am, dialogs/download.c,
	dialogs/download.h, dialogs/menu.c, sched/download.c,
	sched/download.h:

	Move download dialog to separate file.  

Wed Nov 26 01:27:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Include own header.  

Wed Nov 26 00:18:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/menu.c:

	Moved the managers to the Tools menu.  

Tue Nov 25 22:59:45 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Cookies manager, cache manager 

Tue Nov 25 22:57:00 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Forms history.  

Tue Nov 25 22:56:09 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Marks support.  

Tue Nov 25 22:55:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/kbdbind.c, config/kbdbind.h,
	sched/session.h, viewer/text/Makefile.am, viewer/text/marks.c,
	viewer/text/marks.h, viewer/text/view.c:

	Marks support. Rather simple for now, especially you can jump only
	between marks set in the current document for now. (The marks have
	only single namespace over all the documents, though.) 

Tue Nov 25 22:03:41 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 25 21:58:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, opttypes.c:

	Re-fixed bug 216, ELinks should now correctly save already-saved
	aliases. It would be better if it actually deleted the aliases, but
	that'd be more complicated and I don't want to get into *this*
	trouble right now.  

Tue Nov 25 21:45:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	The redir_*() handlers having tons of duplicate code were unified to
	just frontends to a single wrap_or_() backend. F33r d4 pr3pr0c3ss0r.  

Tue Nov 25 21:27:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Reverted my old fix (1.86) for bug 216 (invalid saving of aliased
	options). It does not work, it turns out, and needs to be approached
	from entirely different way.  

Tue Nov 25 21:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Simplify parse_config_file()'s inner loop a little.  

Tue Nov 25 21:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	goto-url-home was rebound from 'm' to 'H' (by default) 

Tue Nov 25 19:48:01 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Tue Nov 25 19:46:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Removed apparently-dead kbdprefix.prefix.  

Tue Nov 25 19:35:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Fix compile error.  

Tue Nov 25 18:04:03 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Nov 25 16:08:25 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Nov 25 13:29:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/bookmarks.c, bookmarks/dialogs.c, config/kbdbind.c,
	config/options.c, globhist/dialogs.c:

	Remove listbox_items box member. That part of the design was (to me)
	a bit confusing since the items should not need know anything about
	the listbox_data because it is dynamic and we can easily derive the
	``correct'' box data in all functions that uses it.
	traverse_listbox_items_list() was updated to take the box data as an
	argument.  

Tue Nov 25 12:51:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Minor simplification.  

Tue Nov 25 10:09:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Fix can_delete_option to check whether the _parent_ option has the
	auto-create flag.  

Tue Nov 25 08:42:29 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/dialogs/menu.c:

	Hotkey was added for form history menu entry. French translation was
	updated and .po files resynced.  

Tue Nov 25 01:12:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Use generic delete button in the option manager.  

Tue Nov 25 01:07:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/dialogs.c, cache/dialogs.c, config/dialogs.c,
	cookies/dialogs.c, formhist/dialogs.c, globhist/dialogs.c:

	Add can_delete() method to listbox_ops.  

Tue Nov 25 00:34:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, options.h:

	Introduce listbox_ops implementation for options and use it for the
	info button.  

Mon Nov 24 23:41:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Add comments for each button sectino and remove legacy code.  

Mon Nov 24 23:34:23 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: dialogs.c, formhist.h:

	Formhist item info box is now more complete.  

Mon Nov 24 23:22:25 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Typos fixes, oops. Compare types too in form_already_saved().  

Mon Nov 24 23:22:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/: dump/dump.c, text/vs.c, text/vs.h:

	Hrmpf. Reverted the view_state refcounting. It is not the way for
	the thing I ponder about ;-).  

Mon Nov 24 23:11:11 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Full field type information is now saved. formhist file format
	changed again (but now is more coherent), new file format will be
	automagically used and old files converted.  

Mon Nov 24 23:06:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	lock/unlock @vs we create for render_document() just in case we'd do
	something with it refcounting-wise along the way.  

Mon Nov 24 22:58:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.h:

	Introduced release_vs(), which unlocks view_state and destroy it if
	it becomes unused.  

Mon Nov 24 22:56:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: vs.c, vs.h:

	Added view_state.refcount.  

Mon Nov 24 22:39:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Finally fixed segfault on <frameset rows="200,*"> on FreeBSD (and
	maybe other BSD flavours). This was reported by various people,
	especially thanks to #linux.cz staff and guli for providing account
	on FBSD so that I could fix this. The fix was inspired by a patch
	(http://www.freebsd.org/cgi/query-pr.cgi?pr=3Dports/56668) by Mário
	Freitas <sub_0@netcabo.pt> included in the FreeBSD port, but it is
	slightly more paranoid.  

Mon Nov 24 20:46:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Nov 24 18:22:21 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Nov 24 17:35:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Mark the password entry in formhist file. This is a format change,
	please add a '*' at the beginning of each password entry in the
	file.  

Mon Nov 24 17:07:09 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: dialogs.c, formhist.c, formhist.h:

	Load saved forms on formhist dialog opening.  

Mon Nov 24 17:01:17 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Fix a memory leak.  

Mon Nov 24 16:42:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Add login button to the form history manager. It uses the generic
	hierbox goto handler.  

Mon Nov 24 16:35:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/sched/: download.c, session.c, session.h:

	Fix a crash when trying to download from a unknown protocol.  

Mon Nov 24 16:34:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Fix comment.  

Mon Nov 24 16:34:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Fix off by one error that caused the last button to be hidden.  

Mon Nov 24 16:23:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, formhist/Makefile.am, formhist/dialogs.c,
	formhist/dialogs.h, formhist/formhist.c, formhist/formhist.h:

	Add form history manager.  

Mon Nov 24 13:30:01 2003  Laurent Monin <zas@norz.org>:

	* contrib/lua/: bm.lua, hooks.lua.in, md5check.lua:

	Dumbprefix "bug" now exists and is a synonym of "bz", linked to
	"http://bugzilla.elinks.or.cz". Trailing spaces were removed.  

Mon Nov 24 13:15:48 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Elinksification.  

Mon Nov 24 12:00:33 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bookmarks/backend/default.c,
	bookmarks/backend/xbel.c, config/conf.c, config/urlhist.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	scripting/lua/core.c, viewer/text/search.c:

	Macros are now used for all filenames.  

Mon Nov 24 08:18:45 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Nov 24 06:54:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Back to previous version.  

Mon Nov 24 06:46:36 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Grammar fix.  

Mon Nov 24 04:45:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/text/link.c:

	Links are sorted horizontally. See bug 11 for reasons.  

Mon Nov 24 01:22:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	scripting/lua/core.c, viewer/text/search.c:

	Use get_dialog_offset() all over the place to get added dialog
	memory.  

Mon Nov 24 01:10:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, hierbox.c, listbox.c, listbox.h:

	Allocate listbox_data as 'add_size' when creating the hierbox
	browser.  

Mon Nov 24 00:33:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Store the number of buttons in the hierbox browser. A little faster
	and a little smaller.  

Mon Nov 24 00:23:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Remove add size usage from hierbox browsers. It seems to be pure
	legacy code not in use by anything anymore.  

Sun Nov 23 23:07:53 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fix.  

Sun Nov 23 23:02:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Oops fix leak when clearing and something is already in use. :/ 

Sun Nov 23 23:01:07 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: formhist.c, formhist.h:

	@submit is now a pointer, should fix bug #288 + check for allocation
	failures.  

Sun Nov 23 22:48:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() take the initial value of the item
	member so my buggy hack can be gracefully avoided. Thanks Miciah.  

Sun Nov 23 18:52:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	[6 / 6] Use new data driven design for global history manager.  

Sun Nov 23 18:52:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	[5 / 6] Use new data driven design for cookie manager.  

Sun Nov 23 18:52:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	[4 / 6] Use new data driven design for cache manager.  

Sun Nov 23 18:49:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	[3 / 6] Use new data driven design for option and keybinding
	manager.  

Sun Nov 23 18:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	[2 / 6] Use new data driven design for bookmark manager.  

Sun Nov 23 18:47:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	[1 / 6] Make hierbox browser more data-driven by introducing a
	button structure (so the number of buttons is dynamically
	calculated) and storing the manager title in the browser structure.  

Sun Nov 23 17:33:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Make it official that hierbox_browser() button handlers always uses
	B_ENTER for the key and never passes any udata.  

Sun Nov 23 17:22:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Remove useless passing of session as button handler udata.  

Sun Nov 23 17:09:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Remove useless passing of session as button handler udata.  

Sun Nov 23 17:07:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Add TODO about making when_*() handler take dialog_data instead of
	dialog.  

Sun Nov 23 17:06:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Prefer deriving the session from dlg_data->dlg->udata rather than
	the button udata. We already does this for the generic goto handler
	do it for the bookmark edit button handler as well.  

Sun Nov 23 16:35:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Comment the fix for bug 289.  

Sun Nov 23 13:59:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	We apparently still need to bail out if a type query is in progress
	for a refreshed URI. Fixes endless downloading of refreshed document
	aka. bug 289.  

Sun Nov 23 06:41:19 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Sun Nov 23 02:03:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Doh! Italian translation fixed.  

Sun Nov 23 02:01:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Sat Nov 22 22:05:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, cache/dialogs.c, globhist/dialogs.c:

	Use the goto button for bookmark and globhist browsers .. and eh add
	a goto button to the cache manager although it might not be too
	useful we need lots of shiny buttons, right? ;) 

Sat Nov 22 22:02:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Add generic hierbox goto button handler.  

Sat Nov 22 21:42:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Add support for various info requests like URI (usable for generic
	goto button) or full info.  

Sat Nov 22 20:49:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Merge info and delete button finalizers into
	done_hierbox_action_info().  

Sat Nov 22 20:47:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Restore behavior when ui.timer.enable == 2 that was broken by the
	introduction of the leds enable option.  

Sat Nov 22 20:39:28 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, src/bfu/hierbox.c, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/leet.po, po/lt.po, po/nl.po, po/no.po, po/pl.po,
	po/pt_BR.po, po/pt.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po:

	Missing space fix. .po files were resynced.  

Sat Nov 22 20:25:55 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Nov 22 19:19:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/timer.c:

	Set interactivity countdown timer to -1 after killing it. Fixes an
	assertion failure triggered when enabling/disabling it.  

Sat Nov 22 19:07:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Add option to control enabling of leds at runtime. It is only used
	in the led code so there is still a bit of overhead. Proposed fix
	for bug 287.  

Sat Nov 22 17:05:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, config/opttypes.c:

	Use add_to_list_end() instead of add_at_pos().  

Sat Nov 22 17:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix some locking issues.  

Sat Nov 22 16:50:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/backend/common.c:

	Remove useless #undef.  

Sat Nov 22 16:48:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() static.  

Sat Nov 22 16:28:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	We now require the info button text before locking the object so no
	need to subtract one to the refcount.  

Sat Nov 22 16:22:55 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Nov 22 16:18:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Use generic info button handler.  

Sat Nov 22 16:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Add delete button to cache manager.  

Sat Nov 22 16:16:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Implement all the listbox_ops for cache_entries.  

Sat Nov 22 16:10:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Merge get_cookie_info() and get_cookie_item_info().  

Sat Nov 22 16:10:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Not "Delete item <name>" but just "Delete <name>" 

Sat Nov 22 15:50:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/dialogs.c, globhist/dialogs.c:

	Use generic clear button for cookie and globhist browser.  

Sat Nov 22 15:43:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Add generic hierbox clear button handler.  

Sat Nov 22 15:38:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Fix wrong button numbers.  

Sat Nov 22 15:09:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() take traverse_listbox_items_list()
	function instead of integer.  

Sat Nov 22 14:38:27 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, session.c:

	Hopefully fixed all issues related with rendering plain documents in
	frames.  

Sat Nov 22 14:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Expand the get_info() string to include all history item info and
	use hierbox info button handler.  

Sat Nov 22 14:19:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/dialogs.c:

	Provide generalized hierbox info button handler and use it for the
	cookie browser.  

Sat Nov 22 14:08:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	More action info generalization. get_hierbox_delete_info() renamed
	to init_hierbox_action_info() and now takes @scan_marked arg.  

Sat Nov 22 14:02:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Cleanup moving delete_hierbox_item_info to c file and renaming it
	hierbox_action_info since it can be used for implementing other
	button actions too.  

Sat Nov 22 13:54:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Add support for deleting cookies in the cookie manager.  

Sat Nov 22 13:45:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Make global history use the new (listbox item deletion) interface.  

Sat Nov 22 13:45:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Make bookmarks use the new interface.  

Sat Nov 22 13:44:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listbox.c, listbox.h:

	Remove @del function from the listbox_ops. It has been replaced.  

Sat Nov 22 13:42:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Provide generic interface for deleting items in a hierbox_browser.  

Sat Nov 22 12:28:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Ideally the hierbox deletion helpers should handle any dialog stuff
	so no need to pass a term.  

Sat Nov 22 12:06:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Also add item finalizer to listbox_ops.  

Sat Nov 22 11:55:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Add object refcount utility and an info retriever to the
	listbox_ops.  

Sat Nov 22 10:25:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/download.c:

	Zas, please test! 

Sat Nov 22 03:04:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In done_browser_box, do not check whether box_data->sel and
	box_data->top are NULL before comparing them to @box_item: @box_item
	has already been asserted to be non-NULL, and besides, nothing
	horrible will come from passing replace_box_item a NULL pointer.  

Sat Nov 22 02:40:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	globhist/dialogs.c:

	Generalize hierbox delete info setup using
	get_hierbox_delete_info().  

Sat Nov 22 02:30:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, bookmarks/dialogs.c:

	Use generic delete structure for bookmark browser.  

Sat Nov 22 02:28:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Small fix for last patch. Also check if the selected item has an
	object attached.  

Sat Nov 22 02:16:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, globhist/dialogs.c:

	Create a generic hierbox delete info structure.  

Sat Nov 22 01:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	globhist/dialogs.c:

	Provide a generic hierbox delete button handler.  

Sat Nov 22 01:27:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Move browser item visibility setup to the event handler.  

Fri Nov 21 23:38:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	add_opt(): Pass the real option when initializing the listbox_item
	since all needed members has already been setup.  

Fri Nov 21 23:17:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	The check for NBSP_CHAR in the dump viewer should now be unneeded
	with the last patch.  

Fri Nov 21 23:15:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Wipe out the NBSP_CHAR encoding in the HTML renderer when we have
	registered it in the space list.  

Fri Nov 21 23:07:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.h:

	Define hierbox_browsers as extern.  

Fri Nov 21 22:39:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.h, cookies/dialogs.h, globhist/dialogs.h:

	Declare hierbox_browsers extern.  

Fri Nov 21 22:36:34 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Minor cleanup.  

Fri Nov 21 22:31:32 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Cleanup/minor optim. related to strange_chars.  

Fri Nov 21 22:23:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/xbel.c, intl/charsets.c, intl/charsets.h,
	terminal/event.c:

	Attempt to fix some issues consisting of char 1 to be printed in
	place of space when &nbsp; is encountered: one issue in xbel.c, and
	a simplification in terminal/event.c.  

Fri Nov 21 21:27:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, listbox.c, listbox.h:

	Move listbox_data initialization to init_listbox(). This looks like
	were it was designed to be done although error handling is not
	possible.  

Fri Nov 21 16:18:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Remove unused listbox_item members and save a few bytes.  

Fri Nov 21 16:15:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/dialogs.c, config/dialogs.c,
	globhist/globhist.c:

	Generalize replacing of the selected and top box item in
	done_browser_box().  The code is not equivalent to all the current
	way of doing it since it is basicly doing it the globhist way. This
	however seems more correct and it should now be consistent across
	all hierbox browsers. Also note that this seem to fix a bug where
	before it was not possible to highlight the bottom box unless the
	browser was first scrolled up.  

Fri Nov 21 11:01:49 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	l_current_title() now cleans the title from bad chars before
	returning it. It should fix bug 183. Miciah, please verify.  

Fri Nov 21 10:22:20 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, intl/charsets.c, intl/charsets.h,
	viewer/dump/dump.c:

	Use NBSP_CHAR and NBSP_CHAR_STRING macros to mark the use of special
	encoding for non-breaking spaces. It clarifies char 1 related
	issues. Thanks to Mikulas.  

Fri Nov 21 04:57:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, history.c, session.c,
	session.h:

	Rendering of plaintext document in frames should be fine now.  

Fri Nov 21 04:54:33 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/session.c:

	Added field target_frame to struct ftl.  

Fri Nov 21 04:52:23 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, session.c:

	Additional parameter for ses_chktype.  

Fri Nov 21 04:50:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Introduced list of struct tq.  

Fri Nov 21 04:47:50 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, session.h:

	tp_* functions use struct tq * instead of struct sesssion *.  

Fri Nov 21 04:45:10 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/download.c,
	sched/download.h, viewer/text/view.c:

	Additional param for query_file 

Fri Nov 21 01:13:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, cache/cache.c,
	cache/cache.h, cache/dialogs.c, config/dialogs.c, config/kbdbind.c,
	config/kbdbind.h, config/options.c, config/options.h,
	cookies/dialogs.c, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h:

	The hierbox_browser now 0wnz the boxes list_head. Idea by Miciah.
	(Fixes bug with wrong ordering of list_head pointers introduced with
	the hierbox_browser structure) 

Fri Nov 21 00:59:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	The hierbox_browser now 0wnz the dialog list_head. Idea by Miciah.  

Fri Nov 21 00:44:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/renderer.c:

	Clean up a comment that was introduced in
	src/document/html/renderer.c:1.278->1.279. @o was renamed to
	@doc_opts long ago, and it never was named @0.  

Thu Nov 20 21:27:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	A weird line was reintroduced to prevent ^A chars to be printed in
	dumps (reported by zardoz).  

Thu Nov 20 16:17:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Access globhist enable option value directly.  

Thu Nov 20 16:09:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Use the bookmark title as the listbox text.  

Thu Nov 20 14:27:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Prospone the dialog list setup to the event handler.  

Thu Nov 20 13:07:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use temporary variable to avoid funny wrapping.  

Thu Nov 20 12:37:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Update hierbox_browser() argument comment.  

Thu Nov 20 12:33:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Move struct hierbox_dialog_list_item to c file.  

Thu Nov 20 09:46:32 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Compilation fix.  

Thu Nov 20 04:21:23 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Thu Nov 20 02:51:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	In menu_cache_manager, ignore the return value of hierbox_browser
	and eliminate the @dlg_data variable.  

Thu Nov 20 02:49:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	Complete Jonas Fonseca's previous change: Generalize visibility
	setup.  

Thu Nov 20 02:14:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Update the option browser in add_opt_rec() _when_ the box item has
	been actually added.  

Thu Nov 20 01:14:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, bookmarks/dialogs.h, cache/cache.c,
	config/dialogs.c, config/dialogs.h, config/kbdbind.c,
	config/options.c, cookies/cookies.c, globhist/globhist.c:

	Use standard done_browser_box() function so hierbox browser dialogs
	are updated when deleting items.  

Wed Nov 19 23:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	A goto was nuked. Instead use switch breaking.  

Wed Nov 19 23:46:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	It seems the bookmarks are already marked dirty the relevant places.  

Wed Nov 19 23:44:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Decrease indentation level.  

Wed Nov 19 18:38:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	A weird line was disabled and heavily commented. Please help, this
	point needs to be clarified.  

Wed Nov 19 18:15:49 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, document/plain/renderer.c,
	viewer/dump/dump.c, viewer/text/search.c, viewer/text/view.c:

	struct line: @d -> @chars.  

Wed Nov 19 17:59:18 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.h, document/html/renderer.c,
	document/plain/renderer.c, viewer/dump/dump.c,
	viewer/text/search.c, viewer/text/view.c:

	struct line: @l -> @length.  

Wed Nov 19 17:22:10 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Indentations fixes.  

Wed Nov 19 16:49:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make the default abort handler part of the event handler so the
	abort handler is usable for private dialog cleanup. Idea by Miciah.  

Wed Nov 19 08:58:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_lines, use memchr instead of strcspn to compute the
	width of the line. Now, the full line is displayed even if it
	contains the null character.  

Wed Nov 19 08:18:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Delete an ancient comment that was never even accurate (it
	originated in src/dialogs/globhist.c:1.3->1.4 and was incorrectly
	copied in src/document/globhist.c:1.20->1.21).  

Wed Nov 19 07:48:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In hierbox_browser(), handle do_dialog() returning NULL.  

Wed Nov 19 07:44:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.h:

	Put back the #include "util/lists.h", which was dropped in
	src/bfu/hierbox.h:1.15->1.16 (the introduction of struct
	hierbox_browser).  

Wed Nov 19 05:15:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In src/viewer/text/textarea.c, complete kuser's fix (1.30->1.31:
	"Set @y to 0.") for his earlier change (1.29->1.30: "Don't use gotos
	in a row.") to textarea_op_(up|down): He forgot to fix
	textarea_op_down, only fixing textarea_op_up.  

Wed Nov 19 02:29:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/: dialogs.c, globhist.c:

	No need to allocate the listbox item text + use init_browser_box().  

Wed Nov 19 02:09:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Generalize visibility setup.  

Wed Nov 19 02:08:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Fix hotkey take 2.  

Wed Nov 19 01:55:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Cleanup.  

Wed Nov 19 01:45:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/cache.c, cache/dialogs.c, cache/dialogs.h, config/dialogs.c,
	cookies/cookies.c, cookies/dialogs.c, cookies/dialogs.h,
	globhist/dialogs.c, globhist/dialogs.h, globhist/globhist.c:

	Generalize even more of the hierbox code by taking next step and
	introduce a hierbox_browser structure with the most important lists
	and the listbox operations.  

Wed Nov 19 01:39:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Make l the hotkey for kill background connection. #ifdef cookie
	manager although we probably can't build without cookies.  

Wed Nov 19 01:29:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Add missing #include.  

Wed Nov 19 00:02:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Added missing include.  

Wed Nov 19 00:02:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Enlarge @cur_len to strlen(entry->data) when matching yet the
	original string. Also always set @longest_common_match if it has
	been zero.  

Tue Nov 18 23:59:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Make the @match initialized to NULL.  

Tue Nov 18 23:53:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Simplify loop condition.  

Tue Nov 18 23:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Instead of staring at the tangled original code, let's just use
	common sense. This changes do_tab_compl_unambiguous() to make some
	sense :).  

Tue Nov 18 23:49:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Comment :-).  

Tue Nov 18 23:17:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, globhist/dialogs.c:

	Yay more uncompiled code (untill pasky fixes his patches ;). Use
	hierbox_dialog_list_item.  

Tue Nov 18 23:08:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Finally fixed @width computation.  

Tue Nov 18 23:07:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Fixed @width computation in add_document_lines()'s loop.  

Tue Nov 18 23:05:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed missing include.  

Tue Nov 18 22:59:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Fixed missing include.  

Tue Nov 18 22:58:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Fixed missing trailing semicolon.  

Tue Nov 18 22:53:38 2003  Laurent Monin <zas@norz.org>:

	* po/cs.po:

	Compilation fix ;).  

Tue Nov 18 22:52:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	@longest_match_len -> @longest_common_match 

Tue Nov 18 22:46:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Simplify make_keystroke().  

Tue Nov 18 22:41:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Probably fixed XMP tag handling, broken by removing traces of the
	plaintext handling.  

Tue Nov 18 22:23:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: docdata.h, html/renderer.c, plain/renderer.c:

	Unified realloc_points().  

Tue Nov 18 22:19:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	realloc_document_links() is now just an ALIGN_LINK() frontend.  

Tue Nov 18 22:18:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/docdata.h:

	document/docdata.h requires document/document.h 

Tue Nov 18 22:18:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, docdata.c, docdata.h,
	html/renderer.c, plain/renderer.c:

	Unified realloc_lines() from document/*/renderer.c to
	document/docdata.c.  

Tue Nov 18 22:14:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, docdata.h, html/renderer.c,
	plain/renderer.c:

	Moved ALIGN_LINE, ALIGN_LINES and LIN*_GRANULARITY from
	document/*/renderer.c to document/docdata.h.  

Tue Nov 18 22:04:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	realloc_lines() now returns struct line * instead of int.  

Tue Nov 18 22:02:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	return NULL if_assert_failed inside of realloc_lines().  

Tue Nov 18 21:55:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Trivial whitespace cleanup.  

Tue Nov 18 21:52:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/session.c, viewer/text/view.c,
	viewer/text/view.h:

	draw_formatted() now takes a @rerender argument describing whether
	to rerender the documnet as well or not. This fixes a regression
	introduced by Jonas in the renderer multiplexing patch.  

Tue Nov 18 21:40:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.h, renderer.h, view.h:

	Removed useless includes, added missing includes and struct
	declarations.  

Tue Nov 18 21:35:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Set @y to 0. Lost this in a patch by me :( 

Tue Nov 18 20:54:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	Added cookie-manager action, by default bound to 'K'.  

Tue Nov 18 20:52:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Let 'k' be the Cookies hotkey in File menu.  

Tue Nov 18 20:44:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Another minor reindentation in get_srch().  

Tue Nov 18 20:43:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Minor reindentation in get_srch().  

Tue Nov 18 20:38:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 18 20:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Do not touch directly the cache entry content in
	add_document_line().  

Tue Nov 18 20:16:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Simplified (and fixed for NUL chars) the @width computation in
	add_document_lines().  

Tue Nov 18 20:07:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Fixed accidentally removed @convert_table declaration.  

Tue Nov 18 20:05:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Pass @length to add_document_lines(). This could fix displaying of
	\0 chars in the plaintext renderer.  

Tue Nov 18 20:03:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Each line is converted separately now. This makes the conversion to
	happen after substitution of dangerous chars like \0.  

Tue Nov 18 19:59:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/tables.c:

	Use @int_min.  

Tue Nov 18 19:57:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	For low values of @line_char, use '.' instead of ' '.  

Tue Nov 18 19:51:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Trivial whitespace fix.  

Tue Nov 18 17:40:38 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Resynced .po and updated Italian translation.  

Tue Nov 18 17:23:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	NUL char will produce a parse errror and breaks some loops, wherever
	needed.  

Tue Nov 18 16:22:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Label end was renamed parse_error. Comments about unhandled cases
	were added.  

Tue Nov 18 16:05:20 2003  Laurent Monin <zas@norz.org>:

	* src/cache/dialogs.c:

	Minor tidy up of displayed info in Cache Manager 

Tue Nov 18 15:09:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Use @int_(min|max).  

Tue Nov 18 14:32:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Indentation fix.  

Tue Nov 18 13:29:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, cookies/dialogs.c:

	Introduce hierbox_dialog_list_item.  

Tue Nov 18 11:51:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/vs.c:

	Use @int_upper_bound.  

Tue Nov 18 11:40:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/view.c:

	Use @int_(bounds|lower_bound).  

Tue Nov 18 11:15:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Don't use gotos in a row.  

Tue Nov 18 11:07:44 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_upper_bound. Also fix last patch.  

Tue Nov 18 10:59:50 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_lower_bound.  

Tue Nov 18 10:55:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Reintroduced @longest_match_len description removed by Miciah.  

Tue Nov 18 10:55:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	@last -> @matchpos 

Tue Nov 18 10:54:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	last_match* -> match* 

Tue Nov 18 10:53:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	shortest_match_len -> longest_match_len 

Tue Nov 18 10:53:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	starting_len -> base_len 

Tue Nov 18 10:49:45 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_(lower|upper)_bound. @int_bounds could be used if
	@frm->(cols|rows) > 0 can be assumed.  

Tue Nov 18 10:48:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Last patch was fixed.  

Tue Nov 18 10:38:32 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Reorder loop to make it more readable.  

Tue Nov 18 10:37:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_element() now treat NUL char as any other char, we rely on eof
	for exiting loops. We do not set *eof to NUL anymore, and just
	return -1 on parse error (as before but without goto stuff). Code
	was simplified a lot.  

Tue Nov 18 10:03:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), replace that awful while loop with a
	nicer for loop.  

Tue Nov 18 09:56:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), eliminate a useless check (I hope)
	and simplify the check for whether we hit the end of @last.  

Tue Nov 18 09:48:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Fix infinite loop when opening binary files.  

Tue Nov 18 09:44:54 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	Finish previous commit: Introduce hierbox_browser_box_build(),
	replacing *_box_build().  

Tue Nov 18 09:25:39 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Nov 18 09:21:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), initialise last_match to
	widget_data->cdata and s/!last_match/last_match ==
	widget_data->cdata/ to eliminate an ugly ternary expression in the
	loop.  

Tue Nov 18 09:12:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), rename cdata_len to starting_len,
	match_len to last_match_len, max to shortest_match_len, match to
	last_match, c to cur, m to last, and len to cur_len.  

Tue Nov 18 07:52:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	config/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Introduce hierbox_browser_box_build(), replacing *_box_build().  

Tue Nov 18 05:51:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h:

	Use reference counting macros for bookmarks and global history
	items.  

Tue Nov 18 05:44:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/bookmarks.c, globhist/globhist.c:

	Use mem_calloc to allocate bookmarks and global history items.  

Mon Nov 17 23:42:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Cookie hotkey conflict with OS shell.  

Mon Nov 17 22:59:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Mon Nov 17 22:44:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Nov 17 22:27:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Reinserted the removed semicolon (=> compilation fix).  

Mon Nov 17 22:22:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Add save button.  

Mon Nov 17 22:17:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Remove superfluous ';' ;) 

Mon Nov 17 22:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Fix dialog title spotted by pasky.  

Mon Nov 17 22:11:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: dialogs.c, dialogs.h:

	Add dialog file. Eh.  

Mon Nov 17 22:10:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/Makefile.am, cookies/cookies.c, cookies/cookies.h,
	dialogs/menu.c:

	Adding start of cookie manager based on cache manager code. Only
	info button is available. This means cookies need to be moved to
	cookies.h and have both refcount and box_item member.  

Mon Nov 17 22:10:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/link.c:

	Use int_(upper|lower)_bound.  

Mon Nov 17 21:48:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/link.c:

	Rename @width to @height. The old name didn't fit.  

Mon Nov 17 21:41:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Alphabetize includes.  

Mon Nov 17 21:40:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Compilation fix.  

Mon Nov 17 21:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Fixed invalid usage of get_cache_uri() in delete_cache_entry().  

Mon Nov 17 21:36:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	ACT_CACHE_MANAGER is now handled properly.  

Mon Nov 17 21:33:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Removed antique cache_entry_nolock() macro.  

Mon Nov 17 21:32:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Include util/error.h even if DEBUG_REFCOUNT for debug() call.  

Mon Nov 17 21:31:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Removed some strange suspicious include.  

Mon Nov 17 21:31:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Whitespace trivial fix.  

Mon Nov 17 21:31:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	refcount_sanity_check() -> object_sanity_check() 

Mon Nov 17 18:47:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Remove now needless test.  

Mon Nov 17 18:45:20 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move test for preceding spaces before the loop.  

Mon Nov 17 18:43:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/object.h:

	Add object.h file. Doh.  

Mon Nov 17 18:40:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show the Flags field only if we can show something inside.  

Mon Nov 17 18:39:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Do not translate strings ETag and Refcount.  

Mon Nov 17 18:39:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	document/document.c, document/document.h, document/renderer.c,
	sched/connection.c, sched/download.c, sched/session.c,
	util/Makefile.am, viewer/text/link.c:

	Generalize object refcount debugging.  

Mon Nov 17 18:38:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Simplify a bit.  

Mon Nov 17 18:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added the 'Redirect' field.  

Mon Nov 17 18:34:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'ID tag' field to the debugmode area.  

Mon Nov 17 18:33:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Separate the header visibly.  

Mon Nov 17 18:33:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show the newline _before_ Flags, not after.  

Mon Nov 17 18:33:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show refcount-1 in the info dialog.  

Mon Nov 17 18:31:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'ETag' field.  

Mon Nov 17 18:29:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Moved 'Last modified' below sizes.  

Mon Nov 17 18:29:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Oops, properly initialize @msg in push_info_button().  

Mon Nov 17 18:28:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show refcount and complete header in the debug mode.  

Mon Nov 17 18:25:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added Flags field, possibly getting 'incomplete' and/or 'invalid'
	values.  

Mon Nov 17 18:23:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Do not be so elaborate. It's clear.  

Mon Nov 17 18:22:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Last modified time -> Last modified 

Mon Nov 17 18:22:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'SSL Cipher' and 'Encoding' fields.  

Mon Nov 17 18:20:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	cache_entry.data_size contains the loaded size, so show length in
	the 'Size' field of the info msgbox instead and add another field
	'Loaded size'.  

Mon Nov 17 18:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	The cache entry info message composing was changed to look more like
	loc_msg()'s. Show URI rewritten without the password and post data
	as a side-effect.  

Mon Nov 17 18:06:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Removed the default uppercase keybindings for various actions where
	we have already bound the same lowercase keybindings to it. Do not
	pretend case-insensitivity when we are case-sensitive anyway and
	there is not that much keys on the keyboard. We might need them all
	in the future ;p.  

Mon Nov 17 18:03:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	Introduced cache-manager action, by default bound to 'C'.  

Mon Nov 17 18:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: dialogs.c, dialogs.h:

	Fix #includes. *tsk* 

Mon Nov 17 18:00:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: info.c, menu.c:

	Removed now-obsolete Cache info dialog (cache_inf()).  

Mon Nov 17 17:58:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/Makefile.am, cache/cache.c, cache/cache.h,
	cache/dialogs.c, cache/dialogs.h, dialogs/menu.c:

	Introduced very simplistic and trivial cache manager.  

Mon Nov 17 17:23:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/dialogs.c:

	Includes in alphabetical order.  

Mon Nov 17 17:18:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Missing ELEMENT_* thing.  

Mon Nov 17 17:01:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, sched/session.c:

	Mark the led as used in register_led().  

Mon Nov 17 17:00:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Removed obsolete comment.  

Mon Nov 17 16:59:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, sched/session.c, sched/session.h:

	The first led is now a SSL indicator. It shows 'S' if the current
	document was received through a secure channel.  

Mon Nov 17 14:34:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Generalize usage of end_of_tag() macro.  

Mon Nov 17 14:27:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use macros in parse_element().  

Mon Nov 17 13:18:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	html_element.dontkill renamed to type using html_element_type enum.
	0 -> ELEMENT_KILLABLE, 1 -> ELEMENT_DONT_KILL, 2 ->
	ELEMENT_IMMORTAL.  

Mon Nov 17 12:21:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Desperately strive to avoid infinite loops in HTML parser.  

Mon Nov 17 11:11:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Compilation fix.  

Mon Nov 17 11:10:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Compilation fix. Do not include sched/session.h but instead just
	assert existence of struct session.  

Mon Nov 17 11:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Sync leds for each session.  

Mon Nov 17 11:06:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	T now by default opens link in new tab instead of opening new tab in
	background. This is probably more useful. Idea by Tony.  

Mon Nov 17 10:58:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Fixed missing trailing ;.  

Mon Nov 17 10:56:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, bfu/leds.h, sched/session.c, sched/session.h:

	Make the leds localized to a session.  

Mon Nov 17 10:47:23 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	0 | SUBMENU -> SUBMENU.  

Mon Nov 17 10:34:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, bfu/leds.h, sched/session.c:

	draw_leds() now take struct session instead of struct terminal.  

Mon Nov 17 06:51:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Mon Nov 17 02:04:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/session.c, viewer/dump/dump.c, viewer/text/vs.c,
	viewer/text/vs.h:

	Add the @plain parameter to init_vs(). Now ses_forward() needn't
	save vs->plain and restore it after calling init_vs(), but need
	merely pass vs->plain to init_vs().  

Mon Nov 17 01:48:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Fix two logic inversions in download_data_part() introduced in
	src/sched/download.c:1.160->1.161.  

Mon Nov 17 00:37:45 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/frames.c:

	#include cache/cache.h in src/document/html/frames.c for struct
	cache_entry and find_in_cache().  

Mon Nov 17 00:33:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/frames.c:

	#include document/document.h in src/document/html/frames.c for
	document_has_frames().  

Sun Nov 16 23:20:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	In l_current_document(), return the integer 1, not a complex number:
	The latter is unnecessary and less portable. Seriously, fix a typo
	introduced in src/scripting/lua/core.c:1.127->1.128.  

Sun Nov 16 17:28:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Cleanup.  

Sun Nov 16 17:07:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Cleanup.  

Sun Nov 16 15:46:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h, renderer.c:

	create_frameset(): Don't pass the @document but handle it locally.  

Sun Nov 16 15:25:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h, parser.c, renderer.c:

	Remove frame_param struct. I think we can manage to pass the 3
	members. Knock out create_frame() and just use add_frameset_entry()
	directly.  

Sun Nov 16 15:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.h:

	document_has_frames() already lives in document.h.  

Sun Nov 16 15:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h:

	No need to export format_frame().  

Sun Nov 16 14:34:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/inphist.c, bfu/listbox.h, bfu/menu.c,
	bfu/menu.h, dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	document/html/parser.c, viewer/text/link.c, viewer/text/view.c:

	In struct menu_item, enum item_free was replaced by more general
	enum menu_item_flags, fields item_free, submenu and no_intl are
	joined in one flags field. Related functions and macros were
	modified to reflect that change. FREE_NOTHING was replaced by a
	shorter 0, everywhere. MENU_FULLNAME special case (parser.c) is now
	handled as other flags.  

Sun Nov 16 13:01:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Fixed a logic error regarding the setting of o->plain depending on
	vs->plain. Now, o->plain is set if vs->plain is _NOT_ -1.  

Sun Nov 16 12:57:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, sched/download.c:

	Unreverted the witekfl's plain-in-frames patch. Please do not rush
	so much to revert patches :-).  

Sun Nov 16 12:34:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reverting my last patch, as the goto is needed :( 

Sun Nov 16 12:11:22 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Comment the hackish goto, scheduling it for removal :) 

Sun Nov 16 11:41:53 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, sched/download.c:

	Patch from Witek was reverted for now. It breaks rendering of html
	documents in frames.  

Sun Nov 16 06:48:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/html/frames.c, sched/download.c:

	Rendering of plain documents in existing frames is good now.  

Sun Nov 16 06:28:59 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: session.c, session.h:

	ses_forward now returns view_state *. vs->plain is preserved, 
	because is used by renderer.  

Sun Nov 16 06:25:12 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Introduction of struct tq.  

Sun Nov 16 03:19:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	document/document.c, document/renderer.c, document/html/frames.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/session.c,
	scripting/lua/core.c:

	Make find_in_cache() and get_cache_entry() actually return the
	cache_entry.  

Sun Nov 16 01:23:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Only display known protocol URIs.  

Sun Nov 16 01:11:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Cleanup allocation code.  

Sun Nov 16 01:03:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Making some bit field hacks more explicit.  

Sun Nov 16 01:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	set_cookie(): No need for @term variable or to return anything.  

Sun Nov 16 00:19:13 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Useless debugging code was removed. It is legal for getml() to be
	called with NULL as first parameter, so no need to check for that.  

Sun Nov 16 00:14:36 2003  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, config/cmdline.c, config/conf.c,
	cookies/cookies.c, dialogs/mime.c, globhist/globhist.c,
	sched/download.c:

	empty_string_or_() macro was introduced.  

Sat Nov 15 23:44:17 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	getml() will do nothing if first argument is NULL, so this test is
	useless.  

Sat Nov 15 23:36:04 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Sat Nov 15 23:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/sched/error.c:

	A typo was fixed. Revealed without any will by Tony
	<falcon611@yahoo.com> on ml.  

Sat Nov 15 22:33:02 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/cookies.c:

	In accept_cookie_dialog(), don't pad or terminate the string created
	by strftime(): The padding is useless, and we only use the string as
	an argument to memacpy(), which terminates its result. This also
	fixes a bug: Previously, when strftime() returned 0, signalling an
	error, we would pad the empty string, memacpy() it, and assign the
	copy to @expires, instead of leaving @expires to NULL to indicate
	that we should print "unknown" as the expiration date.  

Sat Nov 15 20:40:42 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Restore original behaviour.  

Sat Nov 15 20:38:54 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reorder @find_next_link_in_search in a clean way.  

Sat Nov 15 20:21:34 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename @xp,@yp,@xx,@yy to @xmin,@ymin,@xmax,@ymax.  

Sat Nov 15 20:11:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename @xpv and @ypv to @xoffset and @yoffset.  

Sat Nov 15 20:05:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reindentation.  

Sat Nov 15 19:53:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename s1v to search_start.  

Sat Nov 15 19:05:21 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Build fix.  

Sat Nov 15 19:01:16 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Search only on visible data. Should fix bug 250.  

Sat Nov 15 18:51:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move regcomp to the start, so we save needless allocation in case
	regcomp fails.  

Sat Nov 15 18:44:37 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.inc, viewer/text/search.c:

	Remove overlapping regex searches, assuming nobody uses this ;) 

Sat Nov 15 18:29:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	do_html_select(): @lbls -> @labels, @mw -> @max_width, @la ->
	@label, simplify max_width calculation.  

Sat Nov 15 18:15:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	add_select_item() is now a function.  

Sat Nov 15 17:43:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Format the expire time with code from protocol/file.*.  

Sat Nov 15 17:25:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	new_menu_item(): @nmenu -> @new_menu_item, test name before
	menu->stack_size.  

Sat Nov 15 17:20:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	new_menu_item(): variables declarations moved to inner block, old
	commented code was removed, tidy up.  

Sat Nov 15 17:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Add support for asking user whether to accept or reject cookies.  

Sat Nov 15 17:10:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre10.CVS 

Sat Nov 15 17:07:07 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre10 

Sat Nov 15 17:05:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation was updated.  

Sat Nov 15 17:02:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Reverted the ask cookie policy implementation. It comes in feature
	freeze.  

Sat Nov 15 16:55:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Add support for ask cookie policy.  

Sat Nov 15 16:53:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	In clr_spaces(), remove an extra check: *nm is already checked as
	the loop condition.  

Sat Nov 15 16:39:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.c, document.h:

	is_document_locked() -> is_document_used() 

Sat Nov 15 16:38:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Grammar fix: it's -> its. Who needs to take more English classes? :) 

Sat Nov 15 16:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	Include util/error.h (if needed), providing the assert() used in the
	macros.  

Sat Nov 15 16:36:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	get_document_locks() -> get_document_refcount() 

Sat Nov 15 16:36:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	document.locks -> document.refcount 

Sat Nov 15 16:35:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	Try to repair @refcount/@locks in the case of underflow.  

Sat Nov 15 16:31:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	*_sanity_check() now does something only if DEBUG.  

Sat Nov 15 16:29:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Finish locks -> refcount.  

Sat Nov 15 16:25:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, cache/cache.h, sched/connection.c:

	is_cache_entry_locked() -> is_cache_entry_used() 

Sat Nov 15 16:23:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	get_cache_entry_locks() -> get_cache_entry_refcount() 

Sat Nov 15 16:18:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	cache_entry.locks -> cache_entry.refcount 

Sat Nov 15 16:06:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Reinserted deleted blank line. Please do not remove blank lines
	unless you are sure what are you doing ;-).  

Sat Nov 15 15:47:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/connection.c,
	viewer/dump/dump.c:

	Add valid field to cache_entries to avoid nasty uri hack.  

Sat Nov 15 15:38:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/renderer.c,
	sched/connection.c, sched/download.c, sched/session.c,
	viewer/dump/dump.c:

	Encapsulate uri string access.  

Sat Nov 15 15:20:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Always prefer to output color names.  

Sat Nov 15 15:06:57 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre9.CVS 

Sat Nov 15 15:03:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre9 

Sat Nov 15 15:03:06 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	No ELusive.  

Sat Nov 15 15:01:21 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Nov 15 14:53:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Always prefer to have color names. Feature will be added after pre9.  

Sat Nov 15 14:48:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	unparse_uri(&conn->cache->uri) before we clear it, so that the uri
	structure doesn't contain dangling pointers pointing to some strange
	places.  

Sat Nov 15 14:43:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	Introduced unparse_uri().  

Sat Nov 15 14:15:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	struct list_menu was introduced. It will help to generalize list
	menu functions.  

Sat Nov 15 14:11:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync elinks.conf.5. Contains rearrangements from moving options to
	modules.  

Sat Nov 15 14:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Make the assert() completentary to color_mode switch in
	set_term_color().  

Sat Nov 15 14:00:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	It seems testing against char 1 is useless. So related code was
	removed. Minor simplification in clr_spaces().  

Sat Nov 15 06:37:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sat Nov 15 00:19:55 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	src/sched/session.c:1.229->1.230 introduced a very stupid bug. It
	should be fixed now. Reported by Miciah.  

Fri Nov 14 22:55:01 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Fix --disable-root.  

Fri Nov 14 21:21:18 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	ELinks can be ran as root by default.  

Fri Nov 14 20:50:41 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/main.c:

	A configure option named enable-root was added. By default, ELinks
	will refuse to be executed by user root, this option overrides this
	safe limitation.  

Fri Nov 14 19:42:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.h:

	Fix typo.  

Fri Nov 14 19:22:22 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Compilation fix (debug code): oops, disable debug.  

Fri Nov 14 19:21:59 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Compilation fix (debug code).  

Fri Nov 14 18:30:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/info.c,
	document/html/renderer.c, sched/connection.c, sched/download.c,
	sched/session.c, viewer/dump/dump.c:

	Add struct uri member to struct cache_entry.  

Fri Nov 14 16:54:10 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Debugging code was added to get_content_type().  

Fri Nov 14 15:55:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Properly free cell fragment ids. Reported by Zas.  

Fri Nov 14 15:35:28 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Trailing spaces fix.  

Fri Nov 14 15:30:09 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt, src/document/document.h:

	A notice was moved to hacking.txt.  

Fri Nov 14 15:03:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Proper support for table fragment ids. The previous one was
	completely bogus.  

Fri Nov 14 15:03:06 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Accept [] in url, needed to recognise IPv6 urls.  

Fri Nov 14 15:00:27 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	An assertion was reintroduced, it checks again negative value of
	color_mode.  

Fri Nov 14 14:38:01 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Add comments on lines where post data may be copied again in memory.
	Since post data may be large we should avoid this. Please add
	comments to lines where you think it may the case.  

Fri Nov 14 14:24:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	No space in URIs.  

Fri Nov 14 13:59:39 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Disable document.plain.display_links by default.  

Fri Nov 14 13:53:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Url in plain text file detection was improved.  

Fri Nov 14 13:44:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup.  

Fri Nov 14 13:27:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup to fit line within 80 chars. No need to - 1 on the returned
	link length.  

Fri Nov 14 13:19:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Split up add_document_link() to improve error handling. Idea by
	Miciah.  

Fri Nov 14 12:49:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Check @was_xmp rather then ei->func. Idea by Miciah. Fixes last xmp
	/ plain cleanup patch.  

Fri Nov 14 12:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c:

	Revert change to parse_uri() to require host or data part.  

Fri Nov 14 12:39:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Useless get_no_post_url_length_() was removed.  

Fri Nov 14 12:38:08 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, sched/session.c, viewer/dump/dump.c:

	Use *post* functions wherever possible. post_data_start() was
	simplified (am i so dumb ?).  

Fri Nov 14 12:29:23 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, protocol/uri.h, sched/download.c:

	post_data_start() was introduced.  

Fri Nov 14 12:04:56 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	add_url_to_http_string() is now using get_no_post_url(), number of
	parameters was reduce by one.  

Fri Nov 14 12:00:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Compilation fix.  

Fri Nov 14 11:51:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use get_no_post_url_length() instead of using POST_CHAR directly.  

Fri Nov 14 11:47:00 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/info.c, protocol/uri.c, protocol/uri.h:

	get_post_start() was replaced by get_no_post_url_length(), which is
	simpler. A bug introduced by get_post_start() patch was fixed in
	get_no_post_url().  

Fri Nov 14 11:38:15 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Use get_post_start() in cache_inf().  

Fri Nov 14 11:31:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	get_post_start() was introduced and get_no_post_url() was modified
	to use it. It will help to reduce occurences of POST_CHAR in various
	source files.  

Fri Nov 14 11:21:41 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Old staled code was removed.  

Fri Nov 14 11:15:46 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Use get_no_post_url() in extract_proxy(). Miciah, please review this
	one carefully, thanks ;).  

Fri Nov 14 09:26:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Nov 14 09:18:30 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	Some cases where moved at end of switch, idea by Pasky.  

Fri Nov 14 08:40:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Add the @attr parameter to set_fragment_identifier(), and use
	set_fragment_identifier() in html_a().  

Fri Nov 14 08:28:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Rename set_id_attribute() to set_fragment_identifier() and its @attr
	parameter to @attr_name.  

Fri Nov 14 06:16:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Nov 14 03:39:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move illicit chars.  

Fri Nov 14 03:27:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Stop when finding illicit URI chars.  

Fri Nov 14 03:17:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Even trim " so href="<uri>" also work better.  

Fri Nov 14 03:12:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Improve error handling. Fix possible leaks.  

Fri Nov 14 03:04:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Add support for mailto URIs. Only allocate link->where.  

Fri Nov 14 02:49:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move URI parsing to add_document_link().  

Fri Nov 14 02:31:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Another compilation fix for that patch.  

Fri Nov 14 02:29:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move uri end finding to separate function.  

Fri Nov 14 02:28:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Compilation fix for my last patch.  

Fri Nov 14 02:20:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix indentation and only jump with accepted URIs.  

Fri Nov 14 02:15:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c:

	Require valid URIs to have something after the <scheme>':'.  

Fri Nov 14 02:07:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Be more aggressive when looking for URIs. Trim ending ')', '>', ','
	and '.'.  

Fri Nov 14 02:06:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/document.c, dialogs/info.c, sched/session.c,
	scripting/lua/core.c:

	Fix some calls to msg_box() to localise when appropriate and _only_
	when appropriate.  

Fri Nov 14 01:35:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/plain/renderer.c:

	Add support for displaying links in plain pages. Not perfect yet.  

Fri Nov 14 00:25:30 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Resolve a minor compilation error (unused variable) that occurs when
	OpenSSL is not used.  

Thu Nov 13 23:40:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c:

	sort_links() in render_document().  

Thu Nov 13 22:56:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Describe why we call goto_url_frame().  

Thu Nov 13 22:44:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Trailing newline removed.  

Thu Nov 13 22:44:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Always comment ``dead'' code.  

Thu Nov 13 22:43:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny ses_chktype() reindentation.  

Thu Nov 13 22:42:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny kill_downloads_to_file() reindentation.  

Thu Nov 13 22:41:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny destroy_downloads() reindentation.  

Thu Nov 13 22:40:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Outcomment proposed fix for bug 60.  

Thu Nov 13 22:39:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	write_cache_entry_to_file() foreach() loop body reindentation.  

Thu Nov 13 22:38:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	download_data_store()'s state != S_OK case reindentation.  

Thu Nov 13 22:35:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reduced download_data_store() indentation levels even more
	drastically.  

Thu Nov 13 22:33:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reindented download_data_store().  

Thu Nov 13 22:31:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	download_data()'s end_store label -> store 

Thu Nov 13 21:42:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h:

	Reverted the changes introduced in a "fix" for bug 12 by witekfl.
	They need to be reintroduced with some clear description of what
	each of them do and especially why does it do it.  

Thu Nov 13 21:39:53 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Nov 13 21:02:14 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 13 20:32:46 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Nov 13 18:44:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/menu.c, dialogs/menu.h,
	terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	Option to ask for confirmation when closing a tab (by default off).
	Fixes bug 43. Ask to quit when closing last tab. Fixes bug 44.  

Thu Nov 13 18:18:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Handle id attributes for table tags. Fixes bug 39.  

Thu Nov 13 17:56:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Add plain / html toggle button to Info -> Keys. Requested by Miciah.  

Thu Nov 13 17:56:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Add escape variable to make_keystroke() so keystroke string for
	dialogs is more correct.  

Thu Nov 13 17:43:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Merge write_key() into make_keystroke() .. less dirty ;) 

Thu Nov 13 17:22:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add points to links when justifying text. Fixes bug 60.  

Thu Nov 13 14:50:40 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were updated and french translation was updated.  

Thu Nov 13 14:28:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Show the url as title for plain text document. Doh.  

Thu Nov 13 14:25:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove traces of plain text renderer in the html renderer.  

Thu Nov 13 14:23:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove traces of plain text parser in the html parser.  

Thu Nov 13 13:17:27 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/uri.c,
	sched/session.c, viewer/dump/dump.c:

	PROTOCOL_INVALID was added to enum protocol, it is used to handle
	unknown protocols in a clever way. This should fix bug 245.  

Thu Nov 13 10:01:46 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Nov 13 09:24:41 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	My entry was completed a bit ;) 

Thu Nov 13 09:20:16 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Simon Wilkinson was added to AUTHORS, as author of X509 client
	certificates support.  

Thu Nov 13 09:17:23 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/: connect.c, ssl.c:

	Support for X509 client certificates. Patch by Simon Wilkinson. Tidy
	up by me.  

Thu Nov 13 01:46:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	In add_keyactions_to_string(), use add_char_to_string() instead of
	add_bytes_to_string() to add the newline.  

Wed Nov 12 23:32:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Removed redundant comment.  

Wed Nov 12 23:15:20 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mailcap.c:

	Tidy up.  

Wed Nov 12 21:17:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Nov 12 17:35:39 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Nov 12 17:28:27 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Wed Nov 12 16:52:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Make Info -> Keys show the current keybindings. Fixes bug 25.  

Wed Nov 12 15:52:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	get_protocol_end() was introduced, it returns a pointer to end of
	protocol scheme.  

Wed Nov 12 15:52:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Only set hX align if no alignment is set. Fixes bug 9.  

Wed Nov 12 15:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Fix potential leak and improve error handling.  

Wed Nov 12 13:18:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix tab expansion by maintaining the number of expanded chars.  

Wed Nov 12 09:53:05 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/auth.c:

	A debug compile-time option was added to http auth code.  

Wed Nov 12 09:19:25 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, terminal/screen.c:

	Trailing spaces fix.  

Wed Nov 12 09:17:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	An assertion failure introduced by Miciah was fixed. Miciah please
	review that change ;) 

Wed Nov 12 08:42:35 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	In the Info box (opened by '=' or View->Document info), display any
	available information from global history about the selected link.
	This fixes bug 118.  

Wed Nov 12 07:46:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	In process_link(), if link_state is LINK_STATE_SAME, catenate the
	new text to the old link's name. This fixes bug 92.  

Wed Nov 12 06:03:16 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: sched/download.c, sched/history.c, sched/session.c,
	sched/session.h, document/html/frames.c:

	Partial fix for bug 12. Rendering of plaintext documents in existing
	frames is good now. The rest of the fix be later, but in this year.  
	I don't like wait too long for the response! 

Wed Nov 12 05:17:40 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Nov 12 01:44:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	Remove a stray semicolon.  

Wed Nov 12 01:42:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	Fix logic errors in revision 1.24 of src/protocol/protocol.c that
	prevented the revision from making any effective difference.  

Wed Nov 12 01:29:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/session.c:

	Pass int options to signal whether to set referrer or not. No
	referrer for goto_url() (goto dialog, globhist, bookmarks) calls.
	Had to change document refresh to use goto_url_frame() so the
	referrer gets set.  

Wed Nov 12 01:15:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename: *goto_url_w() to *follow_url().  

Wed Nov 12 01:07:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Revert last bogus patch.  

Wed Nov 12 00:52:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don't set any referrer when the url comes from the goto dialog. Idea
	by Dmitry Pinchukov <dpinch@zen.com.ua>.  

Wed Nov 12 00:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Don't set the referrer for local files. Idea by Dmitry Pinchukov
	<dpinch@zen.com.ua>.  

Wed Nov 12 00:38:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	In doc_end_load(), add to global history the document that was just
	loaded, not the currently displayed document--an important
	distinction with frames. Fixes bug 48.  

Wed Nov 12 00:33:30 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Add comment from Miciah about enum cache ordering and a related
	TODO.  

Wed Nov 12 00:29:45 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Useless stuff was removed.  

Wed Nov 12 00:21:04 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, session.h:

	Field reloadlevel of struct session has now enum cache_mode type. An
	upper bound (CACHE_MODE_NEVER) is now enforced for reloadlevel in
	reload().  

Wed Nov 12 00:16:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	set_referrer(): Introduce to wrap access to session->ref_url. It
	will ease avoiding setting referrer for certain protocols.  

Wed Nov 12 00:10:33 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, dialogs/auth.c, dialogs/menu.c,
	sched/session.c, viewer/text/view.c:

	CACHE_MODE_INCREMENT was added to struct cache_mode. -1 occurences
	were replaced by it.  

Tue Nov 11 23:44:30 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/protocol.c:

	gett_protocol_external_handler() was modified to be able to
	differentiate case where no protocol scheme is found from case where
	no known protocol is found. End of scheme protocol detection is now
	stricter, but related code should be moved elsewhere. We will need
	that later to prevent bug 245.  

Tue Nov 11 22:32:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, protocol/http/http.c, sched/connection.c:

	Reverted the last zas' patch. Exact matches exclusively are
	hindering readability, efficiency and ease of changing of the enum
	cache_mode content.  

Tue Nov 11 22:26:04 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/color.c:

	Trigger an internal() error immediately when the invalid mode
	COLOR_MODES is given to set_term_color().  

Tue Nov 11 22:03:11 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, protocol/http/http.c, sched/connection.c:

	Got rid of CACHE_MODE_CHECK_IF_MODIFIED, and make only exact matches
	against enum type.  

Tue Nov 11 21:57:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, sched/connection.c, sched/download.c,
	sched/history.c, sched/session.c:

	CACHE_MODE_DEFAULT -> CACHE_MODE_NORMAL 

Tue Nov 11 21:47:50 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, sched/download.c, sched/history.c,
	sched/session.c:

	enum cache_mode NC_* -> CACHE_MODE_*.  

Tue Nov 11 21:43:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Describe enum cache_mode a little.  

Tue Nov 11 21:25:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Update document width so horizontal scrolling is usable.  

Tue Nov 11 21:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Ok so my lousy plain text renderer did not handle tabs. But now it
	does. Reported by pasky.  

Tue Nov 11 21:00:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move plain line adding to separate function.  

Tue Nov 11 20:25:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 11 20:23:11 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Nov 11 20:15:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Nov 11 20:11:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	document.browse.refresh is now by default enabled.  

Tue Nov 11 19:08:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Fix terminal option dialog.  

Tue Nov 11 17:50:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Kill document refresh in release_document(), so detach_formatted()
	will ensure consistency that ses->doc_view->document->refresh is the
	active refresh. Fixes bug 278.  

Tue Nov 11 17:26:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Removed the comparing of old and new cache size - do not set @whole
	if user changed the cache limit, we have no reason to flush the
	cache. Also removed the raising of cache size limit to the minimal
	possible cache size at the given time. Basically, we want to shrink
	on when some of the cache entries now used will be unused, and it's
	rather confusing behaviour for the user. See mailing list for more
	reasons.  

Tue Nov 11 15:48:12 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Let compiler warn about untested enum elements in switch(). More
	error messages for secsave errors.  

Tue Nov 11 15:35:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:31:41 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/select.c, bfu/listbox.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:29:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Let compiler warn about untested enum elements in switch(). Handle
	FC_RESET as FC_SUBMIT in get_succesful_controls(), please check if
	correct.  

Tue Nov 11 15:25:06 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:20:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.c:

	Let compiler warn about untested enum elements in switch().
	Inclusion of headers was moved to top of file with others.  

Tue Nov 11 15:12:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:08:16 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:05:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:00:40 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:52:20 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:43:20 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, form.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:39:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: color.c, screen.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:26:18 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Let compiler emits a warning for unhandled case instead of using
	runtime assertion. Previous issue should have been detected sooner.  

Tue Nov 11 14:17:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	ui.colors.color.tabs.separator.text default value was changed from
	red to brown after thorough usability and visibility tests and is
	actually likely to stay so for some time now ;-).  

Tue Nov 11 14:16:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	An assertion failure triggered by http://bd.ji.cz/ was fixed.
	WIDGET_FIELD_PASS was forgotten as a possible case.  

Tue Nov 11 13:45:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Only force redrawing when something changed.  

Tue Nov 11 13:38:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	No need for termopt_hop. Allocate checkbox values with the dialogs.  

Tue Nov 11 13:32:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Cleanup and simplify button handlers.  

Tue Nov 11 13:19:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make terminal option dialog more data driven.  

Tue Nov 11 12:42:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: stub.c, stub.h:

	A few compile fixes for FreeBSD.  

Tue Nov 11 09:13:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Fix a bug introduced two frinking weeks ago in
	src/scripting/lua/core.c revision 1.100: Text fields are not
	initialised in xdialogs.  

Tue Nov 11 06:28:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	Fix '[' to properly ignore hidden box_items when computing the
	offset to pass to box_sel_move; now it will not jump past the folder
	to which it should be jumping.  

Tue Nov 11 00:11:34 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Mon Nov 10 23:36:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/file.c:

	Fix an issue revealed by linux /proc exploration with ELinks,
	concerning rendering of unreadable fs links.  

Mon Nov 10 22:57:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	Fix bug introduced in src/bfu/hierbox.c revision 1.54: '[' (or '-'
	or '_') no longer jumps to the parent folder when a leaf is
	selected.  

Mon Nov 10 22:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/main.c:

	@u -> @url.  

Mon Nov 10 22:36:11 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Nov 10 22:31:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Eliminate superfluous assertions.  

Mon Nov 10 21:29:57 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/download.c:

	Fix a crash by restoring the old behaviour.  

Mon Nov 10 21:29:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/document/Makefile.am, src/document/renderer.c,
	src/document/plain/Makefile.am, src/document/plain/renderer.c,
	src/document/plain/renderer.h:

	Readd plain text renderer. Fixes some bug.  

Mon Nov 10 21:27:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c:

	Generalize cache defragmentation.  

Mon Nov 10 20:53:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/Makefile.am,
	document/renderer.c, document/renderer.h, document/html/frames.c,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/view.c:

	Move the document rendering multiplexing to document/.
	cached_format_html() -> render_document(), html_interpret() ->
	render_document_frames(). We call render_document_frames() from
	draw_formatted() now since they seem to go together.  

Mon Nov 10 20:45:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Use by default red for the tabs separator, instead of green. Green
	is already used for highlighting the current tab, so red will stand
	out more, I think. It is also more visible on white.  

Mon Nov 10 20:35:32 2003  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh, configure.in, ltmain.sh, src/.cvsignore,
	src/Makefile.am, src/scripting/guile/.cvsignore,
	src/scripting/guile/Makefile.am, src/scripting/lua/.cvsignore,
	src/scripting/lua/Makefile.am:

	Blast off the libtool for good. We aren't going to have DSO modules
	anytime soon anyway, and this will make the world suddenly again so
	much brighter place.  

Mon Nov 10 20:19:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/: .cvsignore, .vimrc:

	Jonas: when copying fairies, take big care about their contents or
	just copy them over from some suitably ordinary directory at the
	same level in the directory hiearchy (that is, not from the parent
	directory).  

Mon Nov 10 17:06:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Fix testing of whether we are dealing with a radio button.  

Mon Nov 10 16:49:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/session.c:

	Include fix for bug 270 from links-0.99pre13 

Mon Nov 10 15:45:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/: .cvsignore, .vimrc:

	Fairies.  

Mon Nov 10 15:35:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Return -1 that is not a valid group id. We can now enjoy space
	before the buttons in the terminal option dialog again.  

Mon Nov 10 15:13:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Nov 10 15:08:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/widget.h,
	viewer/text/search.c:

	Introduce float_group dialog layout option and blast the search
	dialog layouter.  

Mon Nov 10 14:12:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Maximize dialog width (to honour the hack).  

Mon Nov 10 09:42:35 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Mon Nov 10 00:51:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/widget.h, config/dialogs.c:

	Funky stuff to be able to float input field labels so we can use
	generic layouter for option edit dialogs.  

Mon Nov 10 00:32:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, bfu/text.c, bfu/text.h, bfu/widget.h,
	dialogs/auth.c, dialogs/options.c:

	Text widget can now be marked as being labels which means they do
	not put space afterwards. This is used to add labels to checkbox
	groups in the terminal option dialog.  

Mon Nov 10 00:15:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/dialog.c,
	dialogs/options.c:

	Add checkbox formatting to the generic dialog layouter and use it
	for the terminal option dialog. Features a nice little treat to
	visually group checkboxes in same group.  

Sun Nov  9 23:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/checkbox.c:

	dlg_format_checkbox(): Make more generic.  

Sun Nov  9 23:54:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Remove very hackish lua dialog layouters and use the generic one.
	Now if someone objects we can always add dlg->layout.force_50 ;) 

Sun Nov  9 23:43:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_data(): Minor simplification.  

Sun Nov  9 23:16:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Comments were added.  

Sun Nov  9 23:02:56 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Populate with get_no_post_url().  

Sun Nov  9 22:56:19 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Populate with get_no_post_url().  

Sun Nov  9 22:50:56 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Make use of get_no_post_url(), and reflects change in parameters
	list.  

Sun Nov  9 22:50:07 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	get_no_post_url() has a new int * parameter which may be set to
	length of the returned url.  

Sun Nov  9 22:41:51 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Make use of get_no_post_url(), and cleanup.  

Sun Nov  9 22:40:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	A function returning an allocated string from an url, without post
	data was introduced. Its name may not be well choosen, please
	propose good name.  

Sun Nov  9 22:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Part of download_data() was moved to download_data_store().  

Sun Nov  9 15:35:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Do not print POST part of the url in cache info.  

Sun Nov  9 15:24:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.h:

	There is no input_field_layouter().  

Sun Nov  9 15:22:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.h:

	Try to actually make dialog_layout.padding_top description
	comprehensible :).  

Sun Nov  9 15:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Remove nopad_widgets layout member. We always add horizontal space
	between widgets.  

Sun Nov  9 15:16:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Use text widget and the generic dialog layouter.  

Sun Nov  9 15:09:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, inpfield.c:

	Add fit_datalen layout member and use it for input_field() dialog
	layouting.  

Sun Nov  9 15:07:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, text.c, text.h:

	layout_text_widget() -> dlg_format_text(). Now text widget's format
	function is named as all nice widget format functions would always
	like to be.  

Sun Nov  9 15:05:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/text.c, bfu/text.h,
	config/dialogs.c, dialogs/auth.c, sched/download.c:

	dlg_format_text() -> dlg_format_text_do() 

Sun Nov  9 15:01:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	layout_widgets() -> format_widgets() 

Sun Nov  9 14:55:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/hierbox.c, bfu/msgbox.c,
	dialogs/edit.c, dialogs/mime.c, sched/download.c:

	Replace dlg->align with a dialog_layout bit array.  

Sun Nov  9 14:30:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c:

	Handle text widgets in the generic dialog layouter and make
	msg_box() use it. Note a small regression in that we do not pad the
	top of the text box. Will be fixed with layout bitarray.  

Sun Nov  9 14:24:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Use the text widget.  

Sun Nov  9 14:24:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Oops forgot to add text widget info update.  

Sun Nov  9 14:23:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: text.c, text.h:

	Provide text widget layouter. Add align member to text widget info.  

Sun Nov  9 14:09:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.h, msgbox.h:

	Fix typo.  

Sun Nov  9 14:02:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Compilation fix. Blablabla ;).  

Sun Nov  9 14:02:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Attempt to clarify layout_widget()'s WIDGET_BUTTON case description.  

Sun Nov  9 14:01:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Fix grammar .. describe the default close button.  

Sun Nov  9 13:53:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Describe hierbox_browser().  

Sun Nov  9 13:44:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Trivial style fix.  

Sun Nov  9 13:44:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/options.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Show me anyone who wouldn't want his dialog to be centered at the
	screen. He'd be pretty weird, I think. draw_dialog()'s @align
	parameter dropped, and AL_CENTER alignment made implicit.  

Sun Nov  9 13:40:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Newlines fix.  

Sun Nov  9 13:33:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: hierbox.c, listbox.c:

	When dealing with listbox_item.expanded, first check whether it is
	BI_FOLDER. This means some minor optimizations and fix of potential
	strangeness when clicking with mouse at bad places in the listbox.  

Sun Nov  9 13:31:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Whitespace tidyup.  

Sun Nov  9 13:28:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	If selected hierbox item is not a folder, pass the space keypress
	event on. So it behaves like enter and triggers the button. This
	reinforces the Miciah's muscle reflex in globhist dialog ;-).  

Sun Nov  9 13:23:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Describe a bit what is going on in hierbox_dialog_event_handler().  

Sun Nov  9 13:10:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	We rely on the fact of listbox being at particular position in the
	widget list that it's in fact confusing to say that explicitly at
	one place ;-). (And it's not last anymore anyway.) 

Sun Nov  9 13:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Minor reindentation and tidyup.  

Sun Nov  9 13:04:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Limit dialog data x,y,width and height values. It prevents some
	assertion failures.  

Sun Nov  9 12:27:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Prevent an assertion failure and other bad things when width of
	terminal is very low.  

Sun Nov  9 11:40:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, hierbox.c, listbox.c, listbox.h:

	Use generic layouter for hiebox browsers. This requires to pass down
	the terminal height which might be usefull for other things later.  

Sun Nov  9 11:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Use generic dialog layouter.  

Sun Nov  9 11:22:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/edit.c, bfu/dialog.c, bfu/dialog.h:

	Make the edit layouter the generic dialog layouter.  

Sun Nov  9 11:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Move widget layouting to separate function. We now use not AL_NONE
	to figure out when to trim width.  

Sun Nov  9 03:55:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Cleanup and make the layouter generic to update width if dlg->align
	is AL_BLOCK.  

Sun Nov  9 03:39:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Cleanup.  

Sun Nov  9 03:30:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Make hierbox layouter and event handler static.  

Sun Nov  9 03:27:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Use hierbox_browser().  

Sun Nov  9 03:17:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, globhist/dialogs.c:

	Cleanup after the hierbox browser in the event handler and reserve
	the abort handler for browser specific cleanups.  

Sun Nov  9 03:13:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, text.c, text.h, widget.h:

	Add support for text widgets. Not used yet but it will make a
	generic layouter much more useful.  

Sun Nov  9 03:12:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Use generic hierbox event handler. It does the same and more useless
	stuff but what the hay ...  

Sun Nov  9 02:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Fix inf. loop prevention when cycling widgets.  

Sun Nov  9 00:19:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/Makefile.am, bfu/hierbox.c, bfu/hierbox.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/Makefile.am,
	dialogs/hierbox.c, dialogs/hierbox.h, globhist/dialogs.c:

	Move hierbox.* from dialogs/ to bfu/.  

Sun Nov  9 00:11:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Use hierbox_browser().  

Sat Nov  8 23:46:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/dialogs.c, bfu/hierbox.c, bfu/hierbox.h,
	dialogs/hierbox.c, dialogs/hierbox.h:

	hierbox_browser() dialog initializer added. Same idea as for
	msg_box().  

Sat Nov  8 23:43:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_hline_width() contained some weird code since a long time it
	seems. It was fixed and cleaned up. Behavior should remain the same
	as before.  

Sat Nov  8 22:36:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, globhist/dialogs.c:

	Cleanup manager widgets number macros.  

Sat Nov  8 22:23:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/hierbox.c,
	dialogs/hierbox.h:

	Provide generic hierbox dialog abort handler.  

Sat Nov  8 21:25:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/hierbox.c,
	globhist/dialogs.c:

	Move listbox widget to be the first widget. Use macros to get the
	listbox_data. This will allow for various generalizations.  

Sat Nov  8 19:07:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, listbox.c, widget.h:

	cycle_widget_focus(): Handle unfocusable widgets like
	WIDGET_LISTBOX.  

Sat Nov  8 18:44:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	cycle_widget_focus() in cycle_widget_focus() 

Sat Nov  8 16:58:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Low limit for tab_width is 1, it prevents a segfault when resizing
	term with tabs displayed.  

Sat Nov  8 16:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/document.h:

	Always check locks sanity. Previously it was enabled by
	DEBUG_DOCUMENT/CACHE_LOCKS.  

Sat Nov  8 16:28:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.h:

	Ooops, i forgot to disable document locks debugging. Sorry.  

Sat Nov  8 16:24:29 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/document.h:

	Comment about locks usage.  

Sat Nov  8 16:20:24 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	viewer/text/link.c:

	Field refcount of struct document was renamed locks. Macros are
	wrapping locks handling and enable a debug mode for document locks.  

Sat Nov  8 13:11:41 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Improved debugging output.  

Sat Nov  8 13:03:50 2003  Laurent Monin <zas@norz.org>:

	* src/cache/: cache.c, cache.h:

	Cache entries locks debugging was added.  

Sat Nov  8 12:48:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.c,
	document/html/renderer.c, sched/download.c, sched/session.c:

	cache_entry_lock_inc() -> cache_entry_lock(), cache_entry_lock_dec()
	-> cache_entry_unlock() 

Sat Nov  8 12:47:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Nothing uses cache_entry_unlock().  

Sat Nov  8 12:34:15 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, cache/cache.h, dialogs/info.c,
	document/document.c, document/html/renderer.c, sched/connection.c,
	sched/download.c, sched/session.c:

	Field refcount of struct cache_entry was renamed locks. Macros are
	provided to manipulate locks of a cache entry. Code was updated to
	reflect that change. It will ease debug and trace concerning cache
	entries handling.  

Sat Nov  8 12:13:05 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	More debug info at gc start. Simplify DEBUG_CACHE (de)activation.  

Sat Nov  8 12:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Assertion about cache_size was moved to enlarge_entry() which is now
	used in delete_entry_content(). One assertion about entry data size
	was added. Minor change in debug cache output macro.  

Sat Nov  8 05:51:27 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Add support for GNU Screen's clipboard.  

Sat Nov  8 05:23:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/dialogs.c:

	Add a 'Bookmark' button to the global history dialogue box, using
	the new launch_bm_add_dialog() function. Has ugly stuff; will pasky
	revert it? 

Sat Nov  8 05:21:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/: dialogs.c, dialogs.h:

	Add launch_bm_add_dialog(), to launch an 'Add bookmark' dialogue box
	for the given URL and title. Use it as the backend for
	launch_bm_add_doc_dialog() and launch_bm_add_link_dialog().  

Sat Nov  8 05:17:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.h:

	Reformat, add parameter names, and expand comments.  

Sat Nov  8 05:09:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Refresh after open-link-in-new-(tab(|-in-background)|window). Call
	me blunt...  

Sat Nov  8 05:04:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Explain the meanings of the various possible values for @x in
	frame_ev().  

Sat Nov  8 05:00:50 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/edit.c, globhist/dialogs.c:

	Whitespace.  

Sat Nov  8 02:37:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @overlay loop control cases were swapped until now.
	The one who did the original cleanup of this function did a *realy*
	BAD job. Looks like zas is to be blamed.  

Sat Nov  8 02:29:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @h -> @frag 

Sat Nov  8 02:27:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @l -> @new_frag_len 

Sat Nov  8 02:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @nf -> @new_frag 

Sat Nov  8 02:25:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @g -> @adj_frag 

Sat Nov  8 02:23:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): Reverse @overlay sign, IMHO it's more logical now.  

Sat Nov  8 02:22:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Fixed defrag_entry(), fundamentally broken by some older cleanup
	patch.  

Sat Nov  8 02:13:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @f -> @first_frag 

Sat Nov  8 02:10:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Rename resize_entry() back to enlarge_entry(). Rationale:
	resize_entry() gives no hint about direction to which the value is
	added, in fact it rather hints that the second argument is a new
	size as is. And nothing is bad on enlarging to negative ;-).  

Sat Nov  8 02:06:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Described garbage_collection().  

Sat Nov  8 02:03:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Moved @entry to an inner scope.  

Sat Nov  8 02:01:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Reindentation.  

Sat Nov  8 01:59:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Whitespace here, whitespace there...  

Sat Nov  8 01:58:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Label g -> shrinked_enough.  

Sat Nov  8 01:56:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Commented the execution flow and
	individual scanning passes.  

Sat Nov  8 01:41:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Debug/assert prints consistency, make
	them actually print out some useful stuff, reformatting.  

Sat Nov  8 01:36:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @(old_)opt_cache_memory_size ->
	@(old_)opt_cache_size 

Sat Nov  8 01:35:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @opt_cache_gc_size -> @gc_cache_size 

Sat Nov  8 01:33:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Declarations minor reorder and most of
	the variables described.  

Sat Nov  8 01:14:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @ccs -> @old_cache_size 

Sat Nov  8 01:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @no -> @obstacle_entry 

Sat Nov  8 01:09:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: ncs -> new_cache_size, newncs ->
	newer_cache_size 

Sat Nov  8 01:06:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/: cache.c, cache.h:

	cache_entry.tgc -> cache_entry.gc_target 

Sat Nov  8 00:56:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Restore bound of search dialog like in the previous input field
	patch.  

Sat Nov  8 00:49:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Try to fix so it is more like the behaviour when <widget>_width()
	functions was used.  

Sat Nov  8 00:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A negative value caused a segfault, value is now ensured to be >= 0.  

Sat Nov  8 00:13:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Allocate name and type info for the edit option dialog in one go.  

Fri Nov  7 23:59:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	A batch of compile errors with the help of zas.  

Fri Nov  7 23:51:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c:

	Generalize feature to put label and input field on the same line
	when align is AL_NONE.  

Fri Nov  7 23:27:08 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Another update.  

Fri Nov  7 23:19:31 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Nov  7 23:14:06 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Disabled replacing '+' by ' ' in decode_uri_string.  Local files
	like index_linux+.html were badly decoded.  

Fri Nov  7 22:36:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update to use input field labels.  

Fri Nov  7 22:27:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix assertion. Spotted by Miciah.  

Fri Nov  7 22:20:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/search.c, dialogs/options.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c:

	Update to use input field label.  

Fri Nov  7 22:20:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inpfield.h:

	Integrate input field label as part of the widget.  

Fri Nov  7 21:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c:

	Now that all input field dialogs that should have maximum width are
	handled explicit in the layouters lets remove the maximizer in
	dlg_format_field().  

Fri Nov  7 21:04:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	We always want max width for edit dialogs so no need to maintain
	@rw.  

Fri Nov  7 20:56:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	We always want max width for input field dialogs so no need to
	maintain @rw.  

Fri Nov  7 20:52:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	We always want max width for search dialogs so no need to maintain
	@rw.  

Fri Nov  7 18:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: button.c, button.h, checkbox.c, checkbox.h, group.c,
	group.h, text.c, text.h:

	Remove unneeded <widget>_width() functions.  

Fri Nov  7 18:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	No need to call <widget>_width() when we have this wonderful hack
	for calculating the dialog width.  

Fri Nov  7 18:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: w -> max_width, remove TODO.  

Fri Nov  7 18:27:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	split_line(): Simplify the loop.  

Fri Nov  7 17:26:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/text.c:

	@tx -> @next_split 

Fri Nov  7 17:24:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/text.c:

	assertm() -> assert() 

Fri Nov  7 16:39:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	No need to use x and line_x positions.  

Fri Nov  7 16:22:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: w -> dlg_width, rw -> real_width.  

Fri Nov  7 16:20:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Oops it was not that cheap. ;) 

Fri Nov  7 16:17:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Handle AL_RIGHT .. yeah it is bloat but it is cheap bloat.  

Fri Nov  7 16:14:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Don't calculate shift if we are not drawing.  

Fri Nov  7 16:10:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Use for loop.  

Fri Nov  7 16:00:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Move line splitting to split_line().  

Fri Nov  7 15:59:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Prefer to use line_width over split.  

Fri Nov  7 15:50:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Minor cleanup.  

Fri Nov  7 15:45:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Also assert the line_width value.  

Fri Nov  7 15:39:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Establish some basic sanity checking.  

Fri Nov  7 15:28:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Roll back to pre 1.24 state. We are gonna take this one i slow mo'.
	;) 

Fri Nov  7 15:04:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed the potential TODO of moving html_frameset() to frames.c.
	This is just parsing the HTML tag, thus correct to have in parser.  

Fri Nov  7 15:02:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Fri Nov  7 14:42:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Trim url when have the real width so we show as much of the url as
	possible.  

Fri Nov  7 14:36:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Oops minor fix for last patch.  

Fri Nov  7 14:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 14:32:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Pass real width arg to dlg_format_<widget>.  

Fri Nov  7 14:21:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup download url trimming to only allocate needed string.  

Fri Nov  7 13:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, dialogs/auth.c, globhist/dialogs.c:

	do_dialog() can return NULL so we better check before using it. Fix
	potential leak by freeml().  

Fri Nov  7 13:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 13:32:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/group.c, bfu/inpfield.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/options.c,
	viewer/text/search.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 11:45:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	In dlg_format_<widget> we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 00:39:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	I don't really see the point of using the dialog <widget>_width()
	functions. a) it makes us calculate width 3 times, b) with
	reasonable initialized dialog width we do not need to bound the
	width. A whole tree patch doing this for all dialog layouter will
	save us 120 lines of code that only seems to slow us down.  

Fri Nov  7 00:35:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, text.c:

	Bahh the upper bound can be lower than the lower bound in
	int_bound() which caused the dialog width to become 0 and thus
	triggered an assertion failure.  

Thu Nov  6 23:49:01 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Fix a typo introduced in rev 1.41. It may affect bug 264. Witold
	please check.  

Thu Nov  6 23:46:14 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Thu Nov  6 23:38:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, text.c:

	Fix infinite loop under tiny dimensions.  

Thu Nov  6 23:28:06 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po were resynced and french translation was updated.  

Thu Nov  6 22:45:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Local variables renaming.  

Thu Nov  6 22:25:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Intermediate variable to improve readibility and perhaps more.  

Thu Nov  6 22:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.h, bfu/group.c, bfu/inpfield.c, bfu/msgbox.c,
	config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Set dialog max default width by using a macro.  

Thu Nov  6 22:01:27 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	It seems /proc/#/statm is unreliable, values reported in it are not
	well defined and are different in  2.4 and 2.6 linux kernels. Have a
	look at http://mail.nl.linux.org/linux-mm/2003-08/msg00073.html
	thread for more info. Since it was only used in debug mode and is
	not portable, i prefer to drop it for now.  

Thu Nov  6 21:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix to not skip any characters when forcing a split.  

Thu Nov  6 20:11:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/group.h,
	bfu/inpfield.c, bfu/inpfield.h, bfu/msgbox.c, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/hierbox.h, dialogs/mime.c,
	dialogs/options.c, globhist/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	Rename: dlg.fn to dlg.layouter and rename layout functions to end
	with *_layouter.  

Thu Nov  6 19:03:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix some text wraparound issues by adding increasing the search
	string by one byte.  

Thu Nov  6 18:36:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	If we can.t find a place to split force one.  

Thu Nov  6 17:29:23 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Compilation fix: use new draw_dialog().  

Thu Nov  6 16:59:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	sched/download.c, viewer/text/search.c:

	Rename: draw_dlg() -> draw_dialog().  

Thu Nov  6 16:52:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	sched/download.c, viewer/text/search.c:

	draw_dlg(): Merge in center_dlg() using an align parameter + take
	width and height parameter.  

Thu Nov  6 16:45:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Use local term variable.  

Thu Nov  6 16:43:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/checkbox.h:

	Fix space.  

Thu Nov  6 14:47:04 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup and variables renaming in download_progress_bar(), more
	generic now.  

Thu Nov  6 14:34:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, terminal/draw.c, terminal/draw.h:

	Reverted download_progress_bar() -> draw_progress_bar() change +
	cleanups in the same commit. Please do not move code and change it
	at once (except strictly necessary changes to keep it working, of
	course). (Note that this is different from the reverts of Jonas
	patches - cause of this revert is not undesirability of the
	direction nor staying in the way, just grave formal mistake.) Please
	split the patch up and reintroduce it.  

Thu Nov  6 14:22:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Completely rewrite to only have one main loop.
	Find split positions smarter in separate function and don.t
	calculate shift if we don't need to draw the text.  

Thu Nov  6 11:42:43 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, terminal/draw.c, terminal/draw.h:

	download_progress_bar() was replaced by draw_progress_bar(), more
	generic. It was cleanup and moved to draw.c.  

Thu Nov  6 09:45:58 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, intl/charsets.c, sched/session.c,
	viewer/text/link.c:

	d_opt was renamed global_doc_opts.  

Thu Nov  6 02:38:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Introduce is_unsplitable() macro.  

Thu Nov  6 01:59:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Don.t move to next line if the shift needs to be corrected.  Fix off
	by one error? reported by Miciah so we do not draw the ending space
	charecter.  

Thu Nov  6 01:02:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: xx -> line_x, ww -> line_width.  

Thu Nov  6 00:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: s -> split, tt -> split and turn make that the working
	pointer.  

Thu Nov  6 00:15:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Use draw_text() to draw one line at a time
	instead of one char.  

Thu Nov  6 00:07:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Cleanup.  

Wed Nov  5 22:55:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Variable rp was renamed part.  

Wed Nov  5 22:51:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Some local variables were renamed: o -> doc_opts, l -> vs. A comment
	was updated.  

Wed Nov  5 22:09:21 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	dlg_format_(field|text)(): Only accept one term argument.  

Wed Nov  5 20:28:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/listbox.h, dialogs/hierbox.c:

	dlg_format_box(): Only accept one term argument.  

Wed Nov  5 20:24:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c,
	viewer/text/search.c:

	dlg_format_field(): Only accept one term argument.  

Wed Nov  5 20:21:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	dlg_format_group(): Only accept one term argument.  

Wed Nov  5 20:18:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	dlg_format_checkboxes(): Only accept one term argument.  

Wed Nov  5 20:16:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/msgbox.c, bfu/text.c,
	bfu/text.h, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/mime.c, sched/download.c, viewer/text/search.c:

	dlg_format_text(): Only accept one term argument.  

Wed Nov  5 20:08:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/button.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	sched/download.c, viewer/text/search.c:

	dlg_format_buttons(): Only accept one term argument.  

Wed Nov  5 15:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	It.s guile_scripting_module not lua_.. ;) 

Wed Nov  5 15:09:21 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/scripting/guile/README:

	Lower the Guile FUD. You should be able to use Guile and Lua at once
	now.  

Wed Nov  5 15:06:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Simplify case 2 of the @om switch to a fall-thru in
	distribute_widths().  

Wed Nov  5 14:50:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, scripting/lua/core.c:

	More uncompiled code that fixes remaining? dialog extra data off by
	one errors.  

Wed Nov  5 14:47:45 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Nov  5 14:46:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Considerably simplified the lines splitting as outlined in my
	comments to the witekfl's patch.  

Wed Nov  5 14:44:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update some missing lua bits from last patch. Untested :/ 

Wed Nov  5 14:23:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, viewer/text/search.c:

	Make the add_dlg_<widget>() macros operate and update on
	dlg->widgets_size directly instead of a passed dlg->widgets[]
	position.  add_dlg_end() now only asserts that the number of widgets
	is what we think it is.  I think it also fixes a potential bug in
	msg_box(). When no button label is passed since we could potentially
	overwrite the previous button before.  

Wed Nov  5 13:39:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Minor fix in the comments.  

Wed Nov  5 11:30:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	is_safe_in_shell() now considers : char as safe. Please check if
	correct. It fixes bug 273.  

Wed Nov  5 10:56:15 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, viewer/text/search.c, viewer/text/view.c:

	Old commented code was removed.  

Wed Nov  5 10:46:53 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: window.c, window.h:

	Fields xp,yp of struct window were renamed x,y. set_window_ptr()
	macro was modified a bit.  

Wed Nov  5 10:40:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Fields xp,yp of struct menu were renamed parent_x,parent_y.  

Wed Nov  5 10:34:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Fields xw,yw of struct menu were renamed width,height.  

Wed Nov  5 09:23:18 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Fields xw,yw of struct dialog_data were renamed width,height.  

Wed Nov  5 08:09:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov  5 00:52:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Synced .pos and updated Italian translation.  

Wed Nov  5 00:45:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Oops, forgot N_() for the button text and to mention this fixes bug
	#240.  

Wed Nov  5 00:40:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/connection.c:

	Fix bug 266 introduced in rev 1.58 :) 

Wed Nov  5 00:40:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Added the "Never try to remember the form for this site" button in
	the form dialog.  

Tue Nov  4 23:35:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Fix off by one error in edit dialog. It is similar to the one in the
	option manager. Reported by Miciah.  

Tue Nov  4 23:25:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/group.c, bfu/group.h,
	dialogs/options.c, viewer/text/search.c:

	Do the translation when adding the radio or checkbox widget (as we
	do with buttons) and save a few _() calls.  

Tue Nov  4 23:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Extended memory info string tidyup.  

Tue Nov  4 23:17:32 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov  4 23:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Finish off the minor tidyup of zas.  

Tue Nov  4 23:12:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	shrink_format_cache(): If !whole, break the loop as soon as
	format_cache_entries <= format_cache_size.  

Tue Nov  4 23:10:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Mimick the order of original shrink_format_cache() loop.  

Tue Nov  4 23:06:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	shrink_format_cache(): Unify document->refcount. Mine is better!
	;-))) 

Tue Nov  4 23:04:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	Eliminate an extra check for document->refcount in
	shrink_format_cache().  

Tue Nov  4 22:43:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.c:

	Do not attempt to remove used document when shrinking cache. It
	prevents assertion failure reported in bug 272.  

Tue Nov  4 22:01:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	text_width() now accepts NULL as minwidth or maxwidth parameters.
	min_/max_text_width() were removed.  

Tue Nov  4 21:56:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: group.c, group.h:

	group_width() now accepts NULL as min_width or max_width parameters.
	min_/max_group_width() functions were definitively removed.  

Tue Nov  4 21:50:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	min/max_buttons_width() were replaced by a modified buttons_width()
	which can now take NULL as min or max width parameter.  

Tue Nov  4 20:15:54 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Nov  4 19:56:01 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Nov  4 17:11:57 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/session.c:

	Tab separator colors are now configurable.  

Tue Nov  4 17:04:17 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Some assertions were added to add_opt_rec().  

Tue Nov  4 15:28:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Extended memory info using /proc/self/statm. It works only on linux,
	and will simply give no info on systems without /proc. Please check
	units are correct. Only available when LEAK_DEBUG is used.  

Tue Nov  4 14:25:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	group_width() was introduced. It does the same of both min_/max_
	group_width() functions. Code was populated with it, and old ones
	are commented out for now.  

Tue Nov  4 13:46:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Update underline state + compare attributes when we are dealing with
	space (which probably defeats the whole idea about this branch).
	Fixes underlining of the top and wide links on the mandrake security
	site.  

Tue Nov  4 13:41:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Clear deleted built-in autocreated option. Fix segfault when
	deleting extensions in mime.extension.* 

Tue Nov  4 10:04:33 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Cleanup of handling of protocol.http.accept_ui_language in
	http_send_header().  

Tue Nov  4 09:41:42 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/tables.c:

	Fix bug 269, by renaming yw to height and not width.  

Mon Nov  3 15:26:26 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	parse_http_header_param("", "name") now returns NULL, instead of
	triggering an assertion failure. It fixes bug 268.  

Mon Nov  3 15:06:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Broken end action was fixed, bug introduced by me in rev 1.245. It
	closes bug 263.  

Mon Nov  3 13:55:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, document.h:

	id parameter should be unsigned.  

Mon Nov  3 10:10:49 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor tidyup.  

Mon Nov  3 09:37:58 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	A typo (bad search/replace) was fixed.  

Mon Nov  3 09:32:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Attempt to rewrite some weird tests. Please have a look to these
	changes.  

Sun Nov  2 21:37:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use WIDTH_AUTO and WIDTH_RELATIVE in distribute_widths().  

Sun Nov  2 06:27:54 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/conf.c:

	No need for '\n' in descriptions.  

Sun Nov  2 00:10:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Make links standout in mono mode and decrease lightness again. They
	were broken when I moved active link option handling out of the
	renderer.  

Sat Nov  1 22:38:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed broken compilation w/ --disable-nls.  

Sat Nov  1 22:35:03 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/small.txt:

	Linking fails on unresolved __hton(s|l) symbols when compiling with
	-fno-inline on cygwin. Reported by Frederic <0@pervalidus.tk>.  

Fri Oct 31 22:37:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/Makefile.am, document/view.c, document/view.h,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/link.c, viewer/text/view.c, viewer/text/view.h:

	Reverted moving of some document_view specific functions. These
	functions are about _viewing_ the document on some device, thus
	inherently 100% viewer stuff, and have no business at all to live in
	document processing.  

Fri Oct 31 22:33:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, document/view.h, document/html/frames.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, sched/session.c:

	Reverted moving of document_view setup from the renderer to document
	view file. This bit is in principle not bad, but it is stucking
	clumsily in the way of the future reverting. This should be
	reintroduced later.  

Fri Oct 31 22:28:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, plain.c, plain.h, view.c,
	html/parser.c, html/renderer.c:

	Removed plaintext 'renderer'. Other patches to be reverted depend on
	it. Also, it should live in own directory. This could otherwise be a
	good bit in principle, but it is in the way.  

Fri Oct 31 22:18:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/document.c, dialogs/info.c,
	dialogs/menu.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h, viewer/text/link.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Reverted the includes fix from document/ split up, other patches to
	be reverted depend on it.  

Fri Oct 31 22:15:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, draw.c, draw.h, plain.c:

	Removed the drawing library, other patches to be reverted depend on
	it. Drawing belongs to viewer, viewer _views_ the document.  

Fri Oct 31 21:51:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, dialog.h:

	Hmm, I deleted the wrong part of the patch. This one wasn't supposed
	to be reverted, for one.  

Fri Oct 31 21:46:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Clean up resize terminal dialog after Jonas.  

Fri Oct 31 21:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/msgbox.c,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c, bfu/widget.h:

	Reverted removal of add_dlg_end().  

Fri Oct 31 20:40:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: draw.c, draw.h, plain.c:

	Setup default colors in get_document_line().  

Fri Oct 31 19:54:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, draw.c, draw.h, plain.c:

	Start up a document drawing library.  

Fri Oct 31 19:14:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain.c:

	Setup document bg color.  

Fri Oct 31 18:16:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove traces of plain text handling in the html parser.  

Fri Oct 31 18:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Remove unused html init feature.  

Fri Oct 31 17:56:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h:

	Encapsulate document backend lifecycles.  

Fri Oct 31 17:32:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/document.c, dialogs/info.c,
	dialogs/menu.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h, viewer/text/link.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Fix #includes from document/ split up.  

Fri Oct 31 17:32:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: view.c, html/renderer.c:

	Sort links in the common render function.  

Fri Oct 31 17:11:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, plain.c, plain.h, view.c,
	html/renderer.c:

	Introducing a plain text renderer. This should fix bug 260 and move
	us towards backending various document type handling.  

Fri Oct 31 12:58:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, document/Makefile.am:

	Build only one libdocument archive.  

Fri Oct 31 12:57:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/view.c:

	Include own header file. :/ 

Fri Oct 31 12:57:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/Makefile.am:

	Fix comment.  

Fri Oct 31 12:42:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/view.c, document/view.h, document/html/frames.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, sched/session.c:

	Move document_view setup from the html renderer to the document view
	file. This also fixes a fix #includes.  

Fri Oct 31 06:53:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Fri Oct 31 02:08:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/document.h,
	document/refresh.c, document/refresh.h, sched/session.c,
	sched/session.h:

	Move document refresh stuff to own file.  

Fri Oct 31 01:59:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/view.c, document/view.h,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/link.c, viewer/text/view.c, viewer/text/view.h:

	Move some document_view specific functions.  

Fri Oct 31 01:38:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/view.h,
	document/html/frames.c, document/html/frames.h, sched/session.h,
	viewer/text/link.h, viewer/text/textarea.h, viewer/text/vs.c:

	Move the precious document_view struct to it's own file.  

Fri Oct 31 01:11:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h:

	Cleanup.  

Thu Oct 30 22:57:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	Use (init|done)_html_parser_state() when formatting tables.  

Thu Oct 30 22:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	html_stack_dup(): Take dontkill arg.  

Thu Oct 30 19:34:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Cleanup goto mess.  

Thu Oct 30 19:34:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Readd sanity checks.  

Thu Oct 30 19:29:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h,
	sched/connection.c:

	Merge shrink_format_cache() and
	delete_unused_format_cache_entries().  

Thu Oct 30 18:30:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c:

	Move format cache lookup function to document.* 

Thu Oct 30 18:25:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, html/renderer.c:

	init_document(): Add document to format_cache.  

Thu Oct 30 18:23:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.c:

	cached_format_html(): Split out format cache lookup.  

Thu Oct 30 18:12:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	sched/session.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Rename link_types from L_<type> to LINK_<type>, L_LINK is now
	LINK_HYPERTEXT.  

Thu Oct 30 17:53:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, viewer/text/view.c:

	Reactivate (put to start of list) when releasing a document so
	format cache shrinking can be faster.  

Thu Oct 30 17:51:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields used and spanned of struct table_cell were renamed is_used
	and is_spanned.  

Thu Oct 30 17:49:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field b of struct table_cell was renamed ... is_header.  

Thu Oct 30 17:45:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	viewer/text/link.c:

	decrement_document_refcount(): Move to document/ and rename to
	release_document().  

Thu Oct 30 17:43:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct s_e was renamed html_start_end and its fields s,e ->
	start,end.  

Thu Oct 30 17:38:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields cellsp, cellpd, vcellpd in struct table were renamed
	cellspacing, cellpadding, vcellpadding.  

Thu Oct 30 17:27:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Macros and variables renaming.  

Thu Oct 30 17:13:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, document/Makefile.am:

	Update buildsystem to handle cache/ 

Thu Oct 30 17:07:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate src/cache/Makefile.  

Thu Oct 30 17:04:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	w -> width. Field c of struct table was renamed columns_count.  

Thu Oct 30 17:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, cache/Makefile.am, cache/cache.c,
	cache/cache.h, config/options.c, dialogs/document.c,
	dialogs/info.c, document/cache.c, document/cache.h,
	document/document.c, document/html/renderer.c, lowlevel/select.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h,
	sched/download.c, sched/download.h, sched/session.c,
	sched/session.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/view.c:

	Moved cache stuff from document/cache.* to cache/cache.*.  

Thu Oct 30 16:57:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/: .cvsignore, .vimrc:

	Fairies.  

Thu Oct 30 16:49:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	Remove support for passing renderer hook to parse_html(). It was a
	feature we didn't use. Instead we now setup the hooks in the call to
	init_html_parser().  

Thu Oct 30 16:48:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Function get_c_width() was renamed get_column_width().  

Thu Oct 30 16:44:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field cols of struct table was renamed columns.  

Thu Oct 30 16:36:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field r_heights of struct table was renamed rows_height.  

Thu Oct 30 16:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field w_c of struct table was renamed columns_width.  

Thu Oct 30 16:15:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/leds.c:

	Use intermediate variables xpos, ypos.  

Thu Oct 30 16:12:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Some missing terminal width / height renaming bits.  

Thu Oct 30 15:50:53 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/group.c, bfu/inpfield.c, bfu/inphist.c,
	bfu/listbox.c, bfu/menu.c, bfu/msgbox.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/hierbox.c, dialogs/info.c,
	dialogs/mime.c, dialogs/options.c, protocol/http/http.c,
	sched/download.c, sched/session.c, scripting/lua/core.c,
	terminal/draw.c, terminal/event.c, terminal/screen.c,
	terminal/tab.c, terminal/terminal.c, terminal/terminal.h,
	terminal/window.c, viewer/text/search.c, viewer/text/view.c:

	Fields x,y of struct terminal were renamed width,height.  

Thu Oct 30 15:29:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, ssl/ssl.c, config/options.inc,
	mime/mime.c:

	Sort trees to which you add stuff in modules.  

Thu Oct 30 15:05:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.h:

	Move x and y back so it is not compared.  

Thu Oct 30 14:27:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Fields xp,yp of struct part were renamed x,y.  

Thu Oct 30 14:09:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Field xmax of struct part was renamed max_width.  

Thu Oct 30 14:04:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Fields x,y of struct part were renamed height,width.  

Thu Oct 30 13:52:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	TODO: rename struct table field. Please help here since most fields
	have undescriptive names.  

Thu Oct 30 13:50:20 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field x_width of struct table_cell was renamed width.  

Thu Oct 30 13:43:11 2003  Laurent Monin <zas@norz.org>:

	* src/: document/options.h, document/html/frames.c,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/view.c:

	Use x,y instead of xp,yp in struct document_options.  

Thu Oct 30 13:30:32 2003  Laurent Monin <zas@norz.org>:

	* src/: document/options.h, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c, sched/session.c,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Use width,height instead of xw,yw in struct document_options. A bad
	bound checking was fixed in view.c.  

Thu Oct 30 13:12:58 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.h, document/html/renderer.c,
	viewer/text/view.c:

	Use last_x,last_y instead of xl,yl in struct document_view.  

Thu Oct 30 12:04:58 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	Use x,y instead of xp,yp in struct document_view.  

Thu Oct 30 11:57:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Use width,height instead of xw,yw in struct frameset_param.  

Thu Oct 30 11:51:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Use x,y instead of xp,yp in struct frameset_desc.  

Thu Oct 30 11:41:16 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/html/frames.c,
	document/html/frames.h, document/html/parser.c, sched/session.c,
	viewer/text/view.c:

	Field f of struct frameset_desc was renamed frame_desc.  

Thu Oct 30 11:22:10 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.c, viewer/text/view.c:

	Use width,height instead of x,y in struct frameset_desc.  

Thu Oct 30 11:17:08 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated/fixed translation.  

Thu Oct 30 02:25:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c:

	Revert buggy part of last patch and add a big fat TODO.  

Thu Oct 30 02:15:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Fix version string.  

Thu Oct 30 01:53:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c,
	html/renderer.h:

	Move management of the formatted cache to document utilities.  

Thu Oct 30 01:25:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.h, formhist/formhist.c,
	formhist/formhist.h, viewer/text/form.c, viewer/text/link.c,
	viewer/text/link.h, viewer/text/textarea.h, viewer/text/view.c:

	Fix includes.  

Thu Oct 30 01:08:24 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, link.c, search.c, textarea.c, view.c,
	vs.h:

	Use x,y instead of view_posx,view_pos in struct view_state.  

Thu Oct 30 00:54:55 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.h, document/html/renderer.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Use width and height instead of xw,yw in struct document_view.  

Thu Oct 30 00:34:33 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.c, viewer/text/view.c:

	Use width and height instead of xw,yw in struct frame_desc.  

Thu Oct 30 00:34:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	More absurd hacks to make some probably strange autoconf version
	behave.  

Thu Oct 30 00:28:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Fix overflow in edit dialog (bug 259) and badness in last patch.  

Thu Oct 30 00:11:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Fix double edit button in option manager.  

Wed Oct 29 23:59:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Update the search dialog to use the new radio button and group
	handling.  

Wed Oct 29 23:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Update the terminal options dialog to use the new checkbox/radio
	handling.  

Wed Oct 29 23:58:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: group.c, group.h:

	Use widget->text instead of a label table.  

Wed Oct 29 23:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: checkbox.c, checkbox.h:

	Store the checkbox or radio label in widget->text, and use it when
	formatting and calculating width. Make dlg_format_checkboxes() look
	more mainstream.  

Wed Oct 29 23:00:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix some #includes.  

Wed Oct 29 22:58:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.h:

	Move link_bg declaration nearer to document_view.  

Wed Oct 29 22:35:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Reorder the parser header and give the special function a proper
	type.  

Wed Oct 29 22:18:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h:

	Don't export scan_http_equiv().  

Wed Oct 29 22:11:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, document/html/parser.h,
	viewer/text/form.h:

	Move form_control and friends to the viewer.  

Wed Oct 29 21:58:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	init_html_parser(): Move to the parser. Note g_ctrl_num
	initialization was moved back to format_html().  

Wed Oct 29 21:51:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	init_html_parser(): Initialize the document title string and startf
	/ eoff variables.  

Wed Oct 29 21:40:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Rename push_base_format() to init_html_parser() + move some parser
	variables initialization to it.  

Wed Oct 29 21:27:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Introduce *_html_parser_state() to encapsulate various parser
	variables.  

Wed Oct 29 20:53:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, renderer.c:

	Also move empty stack assertion to done_html_parser().  

Wed Oct 29 20:30:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Encapsulate struct form global variable in the html parser.  

Wed Oct 29 20:18:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/dialogs.h, config/options.c, document/html/frames.c,
	document/html/parser.h, viewer/text/form.h, viewer/text/vs.c,
	viewer/text/vs.h:

	Move form_state to viewer (the only user) and cleanup a few
	dependency hacks.  

Wed Oct 29 19:59:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	viewer/text/link.c:

	Introduce link_is_textinput() macro.  

Wed Oct 29 19:43:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, sched/session.c, viewer/text/link.c,
	viewer/text/view.c:

	Rename document opt to options.  

Wed Oct 29 19:30:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Rename node variables to node + simplify the get_srch() loop.  

Wed Oct 29 19:29:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, tables.c:

	Rename node variables to node.  

Wed Oct 29 19:17:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	document/html/tables.c, viewer/text/search.c:

	Rename struct node xw and yw fields to width and height.  

Wed Oct 29 17:51:06 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, viewer/dump/dump.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/view.c:

	Fields x and y of struct document were renamed width and height.
	Please use x and y for horizontal and vertical position not for
	height and width.  

Wed Oct 29 17:47:44 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Compilation fix. add_dlg_end() is no more used.  

Wed Oct 29 17:17:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, viewer/text/search.c:

	Maintain the number of widgets in a dialog, and don't recount each
	time. Now we only allocate n - 1 widgets.  

Wed Oct 29 16:29:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.h:

	Even move the node and tag structs.  

Wed Oct 29 16:27:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	#include memory as well.  

Wed Oct 29 16:24:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/document.c,
	document/document.h, document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	Move lifecycle functions and add new document files to build system.  

Wed Oct 29 16:14:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.h:

	Move link and search structs + friends.  

Wed Oct 29 16:10:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/frames.h, html/parser.h:

	Move struct document to own file.  

Wed Oct 29 15:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Remove useless #includes.  

Wed Oct 29 15:38:44 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bfu/inphist.c:

	MAX_HISTORY_ITEMS was renamed MAX_INPUT_HISTORY_ENTRIES.  

Wed Oct 29 15:25:38 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, sched/location.c, sched/session.c:

	Use frame variable name for struct frame. Fix a one-byte leak in a
	frame allocation.  

Wed Oct 29 15:01:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inphist.c, inphist.h, widget.c:

	Field d of struct input_history_entry was renamed data.  

Wed Oct 29 14:56:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, inpfield.c, inphist.c, inphist.h, widget.h:

	struct input_history_item was renamed struct input_history_entry.  

Wed Oct 29 14:47:13 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bfu/inphist.c, bfu/inphist.h,
	config/urlhist.c, dialogs/menu.c, scripting/lua/core.c,
	viewer/text/search.c:

	Field items of struct input_history was renamed entries.  

Wed Oct 29 14:31:35 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	An one-byte leak was fixed. A useless initialization to zero was
	removed.  

Wed Oct 29 14:27:40 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.h, dialogs/options.c, viewer/text/search.c:

	add_dlg_radio() was introduced, and add_dlg_checkbox() was
	simplified.  

Wed Oct 29 14:09:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/listbox.h,
	bfu/widget.c, bfu/widget.h, dialogs/options.c,
	viewer/text/search.c:

	Reverted zas' overloaded cummulative patch introducing
	add_dlg_radio() etc.  

Wed Oct 29 13:38:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, modules/version.c, sched/connection.c:

	Whitespaces fix.  

Wed Oct 29 13:26:45 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	This patch fixes a segfault when pressing login button on
	freshmeat.net however I don't know if it breaks form data posting. A
	far as I can see encode_multipart() and encode_controls() sets d_opt
	with the sole purpose of having d_opt->plain available in
	convert_string(). What an ugly way to do it. Instead I've add a new
	CSM_FORM convert mode so we can test if CSM_FORM was passed in
	convert_string().  Patch by Jonas.  

Wed Oct 29 11:12:03 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Uniformize number of widgets per dialog macro name:
	something_WIDGETS_COUNT.  

Wed Oct 29 10:51:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/listbox.h,
	bfu/widget.c, bfu/widget.h, dialogs/options.c,
	viewer/text/search.c:

	add_dlg_radio() was introduced and add_dlg_checkbox() loose two
	paremeters. Comments about checkbox/radios were added. struct
	input_history_item field d was renamed data, a one-byte leak was
	fixed. Minor tidyup.  

Tue Oct 28 21:28:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated and fixed.  

Tue Oct 28 20:50:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	get_ssl_connection_cipher(): Cleanup.  

Tue Oct 28 20:38:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: checkbox.c, checkbox.h:

	Outcomment unused function.  

Tue Oct 28 19:03:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, bfu/button.h, bfu/checkbox.c,
	bfu/checkbox.h, bfu/dialog.c, bfu/group.c, bfu/inpfield.h,
	bfu/listbox.h, bfu/widget.h:

	Rename widget_type from D_<type> to WIDGET_<type>. Convert last
	widget_type users (lua) outside bfu/.  

Tue Oct 28 17:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	clear_dialog(): no need to rename, just added a comment about what
	it does.  

Tue Oct 28 16:38:02 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Use only one local variable.  

Tue Oct 28 16:28:47 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Use intermediate variable, make code easier to read.  

Tue Oct 28 14:36:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Fix last patch. Don't use flags use bflags ;) 

Tue Oct 28 14:34:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Use add_dlg_button().  

Tue Oct 28 14:14:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	set_term_color(): Assert the color mode.  

Tue Oct 28 12:47:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, viewer/text/link.c:

	Replace current boolean color members with a color_flag enum in
	document_options. This nicely centralizes the terminal color
	handling.  

Tue Oct 28 12:25:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_links(): Ensure we always have a document options pointer, by
	falling back to the options of the document (we draw the link for)
	if d_opt is NULL.  

Tue Oct 28 11:20:48 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Bunch of FIXME for you, Jonas ;).  

Tue Oct 28 11:10:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/options.h:

	Use correct type for color_mode.  

Tue Oct 28 10:17:58 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Got rid of a useless goto.  

Tue Oct 28 10:12:35 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Fix one byte memleak.  

Tue Oct 28 09:48:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Space fix.  

Tue Oct 28 09:45:23 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Fix last patch: return EVENT_NOT_PROCESSED, when it is the case.  

Tue Oct 28 09:29:02 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/group.c, bfu/inpfield.c, bfu/inpfield.h,
	bfu/widget.c, bfu/widget.h, dialogs/auth.c:

	widget_has_history() macro was introduced.  widget_is_textfield()
	macro was introduced.  They help to do stricter checks about whether
	a widget has or no history.  add_dlg_field_pass() do not take
	history parameter anymore (forced to be NULL) since we never use
	history for such field.  

Tue Oct 28 09:26:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, ssl/ssl.c:

	Move SSL options to modules.  

Tue Oct 28 08:07:08 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Tue Oct 28 03:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Removed ELusive from HEAD for now. 0.6 stuff. ELusive will live in
	the ELUSIVE branch for now.  

Tue Oct 28 02:51:24 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre8.CVS 

Tue Oct 28 02:48:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre8 

Tue Oct 28 02:47:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Oct 28 02:46:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Oct 28 02:44:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Sort ordinary options behind tree options, this time for real.  

Tue Oct 28 01:42:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Substitute shell-unsafe chars in string passed to shell by %<hex>
	instead of just _. Idea by Felix von Leitner <felix-elinks@fefe.de>,
	fixes bug 243.  

Tue Oct 28 01:25:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/unix/unix.c:

	Compilation fix.  

Tue Oct 28 01:22:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/unix/unix.c:

	Minor tidyup.  

Tue Oct 28 01:21:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Call suspend_mouse() / resume_mouse() when suspending or recovering
	from a suspend. This should maybe fix bug 55.  

Tue Oct 28 01:18:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: osdep.c, osdep.h, os2/os2.c, unix/unix.c:

	Introduced suspend_mouse() and resume_mouse() - for GPM driver they
	suspend the mouse temporarily, or resume it from sleep respectively.  

Tue Oct 28 00:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp.c:

	Include osdep/osdep.h.  

Tue Oct 28 00:35:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.h:

	Compilation fix, spotted by Jonas.  

Tue Oct 28 00:34:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos/.cvsignore, beos/.vimrc, os2/.cvsignore,
	os2/.vimrc, riscos/.cvsignore, riscos/.vimrc, unix/.cvsignore,
	unix/.vimrc, win32/.cvsignore, win32/.vimrc:

	Populated with fairies.  

Tue Oct 28 00:28:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/newwin.c:

	Oops, forgot to include newwin.h. Spotted by Jonas.  

Tue Oct 28 00:27:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/Makefile.am:

	There's no sysinfo subdir.  

Tue Oct 28 00:27:05 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Don't generate Makefile for src/osdep/sysinfo/.  

Tue Oct 28 00:23:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: system.h, beos/Makefile.am, beos/sysinfo.h,
	os2/Makefile.am, os2/sysinfo.h, riscos/Makefile.am,
	riscos/sysinfo.h, unix/Makefile.am, unix/sysinfo.h,
	win32/Makefile.am, win32/sysinfo.h:

	Moved sysinfo/*.h -> */sysinfo.h.  

Tue Oct 28 00:20:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate osdep Makefiles.  

Tue Oct 28 00:17:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os2.c, os2.h, osdep.h, riscos.c,
	riscos.h, unix.c, unix.h, win32.c, win32.h, os2/Makefile.am,
	os2/os2.c, os2/os2.h, riscos/Makefile.am, riscos/riscos.c,
	riscos/riscos.h, unix/Makefile.am, unix/unix.c, unix/unix.h,
	win32/Makefile.am, win32/win32.c, win32/win32.h:

	Moved system-specific files to their own directories.  

Tue Oct 28 00:04:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, Makefile.am, beos/Makefile.am:

	Build fix.  

Tue Oct 28 00:00:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/newwin.h:

	Compilation fix.  

Mon Oct 27 23:58:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: modules/module.c, ssl/ssl.h:

	Properly export the SSL module .. ok 'nough SSL fun from me. ;) 

Mon Oct 27 23:58:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, main.c, bfu/inpfield.c, config/conf.c,
	dialogs/menu.c, lowlevel/connect.c, lowlevel/dns.c,
	lowlevel/interlink.c, protocol/file.c, protocol/user.c,
	protocol/http/http.c, sched/download.c, terminal/kbd.c,
	terminal/screen.c, terminal/terminal.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/view.c:

	Do not include osdep/osdep.h by default anymore.  

Mon Oct 27 23:55:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Revert bogus init_gnutls() cleanup.  

Mon Oct 27 23:53:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: osdep.c, osdep.h:

	Removed unused check_file_name().  

Mon Oct 27 23:46:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: system.h, beos/beos.c, beos/overrides.c,
	beos/overrides.h, beos/sysinfo.h:

	Moved BeOS POSIX emulation from beos/beos.c and sysinfo/beos.h to
	beos/overrides.*.  

Mon Oct 27 23:45:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Move PATH_MAX definition inside #ifdef HAVE_OPENSSL.  

Mon Oct 27 23:43:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	init_gnutls(): Cleanup.  

Mon Oct 27 23:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.c, beos.h, osdep.h, beos/beos.c,
	beos/beos.h:

	osdep/beos.* -> osdep/beos/beos.*.  

Mon Oct 27 23:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.h, os2.h, osdep.h, riscos.h,
	system.h, unix.h, win32.h, beos/beos.h, beos/sysinfo.h, os2/os2.h,
	os2/sysinfo.h, riscos/riscos.h, riscos/sysinfo.h, unix/sysinfo.h,
	unix/unix.h, win32/sysinfo.h, win32/win32.h:

	Moved system-definition records (plus things which need to be
	propagated to *everywhere*) from <system>.h to sysinfo/<system>.h.
	The <system>.h includes will instead serve just as osdep.h (which
	won't be globally included) backends. Do not delete the empty ones.  

Mon Oct 27 23:38:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Split up lifecycle functions into *_openssl() and *_gnutls() and
	initialize via the submodules.  

Mon Oct 27 23:30:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Remove bitching comment. ;) 

Mon Oct 27 23:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	init_ssl_connection(): Cleanup.  

Mon Oct 27 23:26:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	Updated comment about external commands.  

Mon Oct 27 23:25:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, setup.h, intl/gettext/dcigettext.c,
	mime/backend/default.c, mime/backend/mailcap.c, osdep/Makefile.am,
	osdep/newwin.c, osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h:

	osdep/os_dep.* -> osdep/osdep.* - the inconsistencies were here for
	too long and writing the underscore all the time can really get on
	your nerves.  

Mon Oct 27 23:22:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, osdep/Makefile.am, osdep/newwin.c,
	osdep/newwin.h, osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h, viewer/text/link.c, viewer/text/view.c:

	Moved stuff related to new windows business from osdep/os_dep.* to
	osdep/newwin.*.  

Mon Oct 27 23:14:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/: connect.c, ssl.c, ssl.h:

	Partially reverted ssl_t localization - moved the defintion back to
	ssl.h, but without the accompanied SSL library includes.  

Mon Oct 27 23:09:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Whitespace cleanup.  

Mon Oct 27 23:08:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, protocol/http/https.c,
	sched/connection.c, ssl/connect.c, ssl/ssl.c, ssl/ssl.h:

	Remove the whole fight club experience by moving ssl header includes
	to ssl/connect.c and declaring ssl_t in both ssl/ files.  

Mon Oct 27 22:53:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, protocol/http/https.c,
	sched/connection.c, ssl/connect.c, ssl/ssl.c, ssl/ssl.h:

	Change the ssl connection interface to take struct connection
	pointer instead of ssl_t.  The initializer [init_ssl_connection()]
	returns S_OK or S_SSL_ERROR to signal success or failure.  The
	cleanup function [done_ssl_connection()] now sets conn->ssl to NULL
	after freeing it.  

Mon Oct 27 22:51:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os2.c:

	Statify winch_thread().  

Mon Oct 27 22:44:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os2.c:

	Statify winch().  

Mon Oct 27 22:32:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, ssl/connect.c, ssl/connect.h, ssl/ssl.c,
	ssl/ssl.h:

	Add #ifdefs around users of ssl code and remove them inside the ssl
	code.  

Mon Oct 27 22:07:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Remove useless prototype.  

Mon Oct 27 21:46:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Minor tidyup.  

Mon Oct 27 21:44:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Shield extern ssl_module declaration by #ifdef.  

Mon Oct 27 21:43:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c, modules/version.c, ssl/ssl.c,
	ssl/ssl.h:

	Modulize ssl.  

Mon Oct 27 21:36:48 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Oct 27 21:04:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Make module string functions static.  

Mon Oct 27 20:57:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.c, version.c:

	Use builtin modules for version string composing. This means we have
	to export builtin_modules and make it NULL terminated.  

Mon Oct 27 20:48:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Capitalize history.  

Mon Oct 27 16:42:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Move check for duplicate entries before allocation so if there is a
	dublicate entry we can just move it to the start of the list.  

Mon Oct 27 16:19:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Rename variables to be more consistent and remove trace of urlhist
	connection.  

Mon Oct 27 16:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Compilation fix.  

Mon Oct 27 15:59:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Reverted nonsensical second part of the patch.  

Mon Oct 27 15:57:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Fixed bug reported by Stepan Kasal <kasal@ucw.cz>, FTP couldn't be
	proxied through HTTP proxy like squid, even though that's a valid
	setup and supported by other clients.  

Mon Oct 27 15:56:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update lua input history to new struct layout.  

Mon Oct 27 15:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/menu.c, viewer/text/search.c,
	viewer/text/search.h:

	Make search history static and free the list locally.  Rename
	load/save functions to init/done since the input history already
	provides these functions.  

Mon Oct 27 15:40:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c,
	dialogs/menu.c, viewer/text/search.c:

	Rename input_history.n to size.  

Mon Oct 27 15:33:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c,
	config/urlhist.h, viewer/text/search.c:

	Add dirty and nosave member to input history to generalize the code
	(and store dirty state for search history) 

Mon Oct 27 10:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Remove unused term variable passed to *buttons_width().  

Mon Oct 27 09:52:51 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/unix.c:

	No comment.  

Mon Oct 27 09:40:00 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation updated.  

Mon Oct 27 03:29:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os2.c:

	Removed ancient commented out code.  

Mon Oct 27 03:29:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c, unix.c, unix.h:

	USE_GPM -> GPM_MOUSE (consistency with OS2_MOUSE) 

Mon Oct 27 03:27:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, unix.c, unix.h:

	Define USE_GPM in unix.h.  

Mon Oct 27 03:26:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.h, os2.h, os_dep.c, win32.h:

	Make the appropriate header files prototype system-specific
	open-in-new handlers.  

Mon Oct 27 03:18:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/beos.c, osdep/beos.h,
	osdep/os_dep.h, osdep/overrides.h:

	Abadonded the osdep/overrides.h. Dissolved to osdep/beos.h and
	osdep/os_dep.h. NO_OVERRIDES -> BEOS_SELF.  

Mon Oct 27 03:13:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, osdep/Makefile.am, osdep/ascii.h,
	osdep/os_dep.h, protocol/ftpparse.c, protocol/http/http.c,
	terminal/kbd.c, terminal/screen.c, util/string.h,
	viewer/dump/dump.c, viewer/text/form.c:

	Moved ASCII_* constants from osdep/os_dep.h to osdep/ascii.h.  

Mon Oct 27 03:10:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/beos.c:

	Declare NO_OVERRIDES.  

Mon Oct 27 03:09:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Introduced NO_OVERRIDES condition around inclusion of
	osdep/overrides.h.  

Mon Oct 27 03:08:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Detailed comments regarding the 'bootup' includes.  

Mon Oct 27 03:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/generic.h,
	osdep/overrides.h:

	Moved overrides of the standard functions by out stubs from
	osdep/generic.h to osdep/overrides.h.  

Mon Oct 27 02:58:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	No it's bad idea to include generic.h before system.h. Do it between
	system.h and os_dep.h ;-).  

Mon Oct 27 02:55:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Include first osdep/generic.h, then the other osdeps.  

Mon Oct 27 02:55:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/os_dep.h:

	Include osdep/system.h directly in elinks.h, not in osdep/os_dep.h.  

Mon Oct 27 02:52:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/generic.h,
	osdep/os_depx.h:

	mv osdep/os_depx.h osdep/generic.h 

Mon Oct 27 02:50:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/unix.c:

	Removed useless include.  

Mon Oct 27 02:49:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: generic.h, os_depx.h:

	Removed some forever-commented-out fragment.  

Mon Oct 27 02:47:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Removed obsolete TODO.  

Mon Oct 27 02:47:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2.h, os_dep.c:

	USING_OS2_MOUSE -> OS2_MOUSE 

Mon Oct 27 02:46:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.h, system.h:

	Moved USING_OS2_MOUSE define from system.h to os2.h.  

Mon Oct 27 02:45:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	GPM is UNIX-specific so remove it from the deciding process of
	USING_OS2_MOUSE.  

Mon Oct 27 02:44:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os2.c, riscos.c, unix.c, win32.c:

	In the system-specific .c files, include osdep/system.h early
	(before system includes) and decide whether to proceed right away.
	This eliminates various compilation errors.  

Mon Oct 27 02:41:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.h, os2.h, system.h:

	THREAD_SAFE_LOOKUP #define moved to the system-specific header
	files.  

Mon Oct 27 02:40:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/dns.c, osdep/system.h:

	THREAD_SAFE_LOOKUP seems to be the exact opposite of its name. So
	this turns it around.  

Mon Oct 27 02:37:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.h, os2.h, riscos.h, system.h,
	unix.h, win32.h:

	Splitted system-specific stuff in system.h to
	beos.h,os2.h,riscos.h,unix.h,win32.h.  

Mon Oct 27 02:30:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	Questionable tidyup.  

Mon Oct 27 02:29:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	The funny __EMX__ stuff is part of OS2.  

Mon Oct 27 02:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.h, system.h:

	Moved system-specific macros from os_dep.h to system.h, which is
	included from os_dep.h at that place.  

Mon Oct 27 02:25:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.h:

	Removed some really ancient comment.  

Mon Oct 27 02:24:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.h:

	Cleanup of the system decision procedure.  

Mon Oct 27 02:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os2.c, riscos.c, win32.c:

	Normalized the headers.  

Mon Oct 27 02:19:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.c, unix.c:

	Moved GPM mouse handling from os_dep.c to unix.c.  

Mon Oct 27 02:18:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: version.c, version.h:

	Moved to modules/version.* 

Mon Oct 27 02:17:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/info.c, lowlevel/signals.c,
	modules/Makefile.am, modules/version.c, modules/version.h,
	util/Makefile.am, util/error.c, util/error.h:

	Move util/version.* to modules/version.*.  Trim get_version() from
	the interface.  Move full_static_version[] to util/error.* since it
	is the reason for that mess.  

Mon Oct 27 02:08:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.c, riscos.c:

	Moved RISCOS specific stuff from os_dep.c to riscos.c.  

Mon Oct 27 02:04:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Put back accidentally removed get_ctl_handle(). Spotted by Jonas.  

Mon Oct 27 02:00:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/osdep/os_dep.c, src/osdep/os_dep.h:

	While at it kill pthreads support as well, dead as clone() support.  

Mon Oct 27 01:59:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/osdep/os_dep.c, src/osdep/os_dep.h:

	Killed clone() support, long-disabled and useless and so on, for
	good.  

Mon Oct 27 01:50:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/win32.c:

	Added standard includes suite.  

Mon Oct 27 01:38:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, win32.c:

	Moved win32 bits from os_dep.c to win32.c.  

Mon Oct 27 01:33:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, os_dep.h:

	Export get_e(), os2.c needs it.  

Mon Oct 27 01:30:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c:

	Moved some hopefully last bits of OS/2 stuff.  

Mon Oct 27 01:24:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os_dep.c:

	Migrated BeOS-specific exe().  

Mon Oct 27 01:21:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c:

	Made OS2-specific can_open_os_shell().  

Mon Oct 27 01:20:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Removed some unused OS/2 garbage.  

Mon Oct 27 01:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c:

	Moved OS/2 mouse handling from os_dep.c to os2.c.  

Mon Oct 27 01:17:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, os_dep.h:

	Moved defining of USING_OS2_MOUSE from os_dep.c to os_dep.h.  

Mon Oct 27 01:12:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c:

	Tons of OS/2-specific stuff moved from os_dep.c to os2.c. What a
	relief.. not everything yet, though.  

Mon Oct 27 01:12:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bookmarks/bookmarks.c, cookies/cookies.c,
	formhist/formhist.c, globhist/globhist.c, mime/mime.c,
	mime/backend/default.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c, scripting/scripting.c,
	scripting/guile/core.c, scripting/lua/core.c:

	Make the module name useful for version strings.  

Mon Oct 27 01:05:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os2.c:

	Added some dummy os2.c.  

Mon Oct 27 01:03:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/beos.c:

	Fixed include of os_depx.h.  

Mon Oct 27 01:02:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os_dep.c:

	Moved some BeOS-specific bits from os_dep.c to beos.c.  

Mon Oct 27 00:55:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Removed redundant preprocessor branch.  

Mon Oct 27 00:55:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/beos.c:

	Rearrange. Standard includes.  

Mon Oct 27 00:46:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/beos.c:

	Id tag and stuff.  

Mon Oct 27 00:37:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_dep.c:

	Split out GPM-specific parts of (un)handle_mouse() to
	(init|done)_mouse().  

Sun Oct 26 23:43:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add change hook to update d_opt active link members.  

Sun Oct 26 23:29:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/link.c, document/options.h,
	document/html/renderer.c:

	Move all active link handling to the viewer.  

Sun Oct 26 23:23:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, connection.h:

	Use conn instead of c in struct download.  

Sun Oct 26 23:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/: document/cache.c, lowlevel/connect.c, protocol/finger.c,
	protocol/http/https.c, sched/connection.c:

	Use conn for struct connection *.  Use keep_conn for struct
	keepalive_connection *.  Use host_conn for struct host_connection *.  
	Use ce for struct cache_entry *. (not finished, nor definitive) 

Sun Oct 26 22:22:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Pass document color flags when coloring link lines. Spotted by
	pasky.  

Sun Oct 26 19:49:00 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/widget.h, config/conf.c, dialogs/menu.c,
	dialogs/options.c, lowlevel/dns.c, mime/backend/mimetypes.c,
	osdep/os_depx.h, terminal/event.c, terminal/hardio.c,
	terminal/kbd.c:

	Trailing spaces were trimmed.  

Sun Oct 26 19:37:45 2003  Laurent Monin <zas@norz.org>:

	* src/modules/module.c:

	Use sizeof() to calculate number of builtin modules.  

Sun Oct 26 19:18:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.h, cookies/cookies.h:

	Move enum cookies_accept to cookie header.  

Sun Oct 26 19:11:02 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes suggested by beatricet@libero.it.  Thank
	you Beatrice.  

Sun Oct 26 19:10:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	Fix buggy #ifdef.  

Sun Oct 26 18:41:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/options.inc, formhist/formhist.c,
	formhist/formhist.h, modules/module.c:

	Modularize forms history and move options to the new module.  

Sun Oct 26 18:25:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Access cookies options directly.  

Sun Oct 26 18:13:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, cookies/cookies.c:

	Move cookies options to module.  

Sun Oct 26 18:09:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Access global history options directly.  

Sun Oct 26 18:00:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, globhist/globhist.c:

	Move global history options to the module.  

Sun Oct 26 17:53:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Whoops .. module name should be "global history" 

Sun Oct 26 17:22:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/default.c:

	Added association for image/png.  

Sun Oct 26 16:56:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, mime/mime.c:

	Move #define of default mime type to setup.  

Sun Oct 26 16:53:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Access mime options directly.  

Sun Oct 26 16:47:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, mime/mime.c,
	mime/backend/default.c:

	Move remaining mime options to mime/. Initialize default mime
	template options like ``ordinary'' options.  

Sun Oct 26 16:29:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/: .cvsignore, .vimrc:

	Added fairies. What a poor soul am I, having to do everything myself
	;-).  

Sun Oct 26 16:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Clean up whitespaces after zas.  

Sun Oct 26 16:23:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Initialize and free widget history only if needed.  

Sun Oct 26 16:23:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Make it possible to turn UTF8 I/O off when some poor soul turned it
	on once ;-).  

Sun Oct 26 16:11:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/inpfield.h, bfu/widget.c,
	bfu/widget.h, viewer/text/search.c:

	History only concerns text fields, so move history-related fields to
	union.  

Sun Oct 26 16:02:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Call change hook after the last change, not after the first change
	to the terminal options.  

Sun Oct 26 15:59:12 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, group.c, inpfield.c, listbox.c, widget.c,
	widget.h:

	Use w (for width) instead of l in struct widget_data. So now we have
	x,y,w,h ;).  

Sun Oct 26 15:47:24 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.h, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/msgbox.c, bfu/widget.c,
	bfu/widget.h, scripting/lua/core.c, viewer/text/search.c:

	Use datalen instead of dlen in struct widget.  

Sun Oct 26 15:37:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, dialog.c, inpfield.c, inphist.c, widget.c,
	widget.h:

	Use unnamed struct in unions. Use union in struct widget_data for
	per-widget infos.  

Sun Oct 26 15:24:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Compile fix by #including modules/module.h 

Sun Oct 26 15:20:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: modules/module.c, main.c:

	Moved triggering of the quit event back to
	terminate_all_subsystems() - it just doesn't sound right
	architecturally to have it in done_modules(). It prevents using
	done_modules() in different contexts than quitting, for example.  

Sun Oct 26 15:19:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.h, checkbox.c, checkbox.h, dialog.c, inpfield.c,
	inpfield.h, listbox.h, msgbox.c, widget.h:

	Use an union to handle struct widget per widget type infos.  

Sun Oct 26 15:12:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c:

	Move triggering of the quit event to done_modules().  

Sun Oct 26 15:10:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, globhist/globhist.c, globhist/globhist.h,
	modules/module.c:

	Modularize global history.  

Sun Oct 26 15:00:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Remove #include for things that has been modularized.  

Sun Oct 26 14:58:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, main.c, cookies/cookies.c, cookies/cookies.h,
	modules/module.c:

	Modularize (yes money of Danish taxpayers have been wasted on me)
	cookies.  

Sun Oct 26 14:30:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/leds.c, bfu/leds.h, modules/module.c:

	Modulize leds.  

Sun Oct 26 14:20:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/mailcap.c, viewer/dump/dump.c:

	Remove ending spaces.  

Sun Oct 26 14:14:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.h:

	Fix typo.  

Sun Oct 26 14:04:09 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/dialog.c,
	bfu/group.c, bfu/group.h, bfu/inpfield.c, bfu/inphist.c,
	bfu/listbox.c, bfu/msgbox.c, bfu/widget.c, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	globhist/dialogs.c, sched/download.c, viewer/text/search.c:

	Always use widget_data for struct widget_data*.  

Sun Oct 26 14:02:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, modules/module.c,
	modules/module.h, scripting/scripting.c, scripting/guile/core.c,
	scripting/guile/core.h, scripting/lua/core.c, scripting/lua/core.h:

	Rename module.events to module.hooks and module_struct to
	struct_module.  

Sun Oct 26 13:47:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Actually use the scripting modules. ;) 

Sun Oct 26 13:46:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	Modulize guile scripting backend.  

Sun Oct 26 13:46:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/: core.c, core.h:

	Modulize lua scripting backend.  

Sun Oct 26 13:46:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, scripting/scripting.c, scripting/scripting.h:

	Modulize scripting core.  

Sun Oct 26 13:26:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, modules/module.c,
	modules/module.h:

	Add an event_hook_info table to struct module. Rename INIT_MODULE to
	module_struct.  

Sun Oct 26 13:25:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/group.c, bfu/inpfield.c, bfu/listbox.c, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, globhist/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	Use widgets_data instead of items in struct dialog_data.  

Sun Oct 26 13:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.c,
	scripting/scripting.h, scripting/guile/hooks.c,
	scripting/guile/hooks.h, scripting/lua/hooks.c,
	scripting/lua/hooks.h:

	Rename struct scripting_hook to event_hook_info and make it part of
	the event system.  

Sun Oct 26 13:12:06 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/dialog.c, bfu/dialog.h,
	bfu/inpfield.c, bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/edit.c, dialogs/mime.c, globhist/dialogs.c,
	scripting/lua/core.c, viewer/text/search.c:

	Use widgets instead of items in struct dialog.  

Sun Oct 26 12:52:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/inphist.c, bfu/listbox.c, bfu/msgbox.c,
	bfu/widget.c, bfu/widget.h, bookmarks/dialogs.c, dialogs/hierbox.c,
	globhist/dialogs.c, scripting/lua/core.c, viewer/text/search.c:

	Use widget variable name for struct widget *.  

Sun Oct 26 12:26:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, inphist.c,
	listbox.c, widget.h:

	selected_widget() macro and init_widget() function were introduced.
	Tidyup.  

Sun Oct 26 07:35:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Revert to version from 5 October.  

Sun Oct 26 03:00:19 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Explicit 0x25254545 as LISTMAGIC3 

Sun Oct 26 02:46:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.h:

	Workaround for the 0x25254545 segfault.  

Sat Oct 25 22:34:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make DEFAULT_MAILCAP_PATH available through option WITHOUT screwing
	up compatibility. :) 

Sat Oct 25 22:30:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, modules/module.h:

	Add @data to INIT_MODULE() args.  

Sat Oct 25 22:26:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Revert the bad part like the last mailcap path.  

Sat Oct 25 22:23:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/mailcap.c:

	Reverted patch breaking mailcap functionality for users with default
	value of mime.mailcap.path in their configuration file [rev 1.62].  

Sat Oct 25 22:21:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Make DEFAULT_MIMETYPES_PATH available through option.  

Sat Oct 25 22:11:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Access mimetypes options directly.  

Sat Oct 25 22:09:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make DEFAULT_MAILCAP_PATH available via the option.  

Sat Oct 25 22:03:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Cleanup and fix last patch.  

Sat Oct 25 21:46:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Added module.data.  

Sat Oct 25 21:43:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Captionized some comments.  

Sat Oct 25 21:43:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Access mailcap option directly.  

Sat Oct 25 21:40:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Describe the lifecycle functions.  

Sat Oct 25 21:39:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Clarified uniqueness of module.name.  

Sat Oct 25 21:34:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.c:

	Fixed missing include of the paired .h file.  

Sat Oct 25 19:53:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, mime/backend/mimetypes.c:

	Move mimetypes options to the backend.  

Sat Oct 25 19:52:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix. And that's it. I'm disgusted and exhausted, I
	really do not want to touch the options system logic for at least
	few days. Brrr.  

Sat Oct 25 19:50:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Femtotidyup.  

Sat Oct 25 19:48:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	gqap 

Sat Oct 25 19:47:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Sort all OPT_TREEs before the other options.  

Sat Oct 25 19:46:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, mime/backend/mailcap.c:

	Move mailcap options to the backend.  

Sat Oct 25 19:38:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	We must track the listboxes (major PITA ;) independently to options
	in the foreach in add_opt_rec(). If no assert()s will fail, and
	everything will be symmetric enough, this could even finally work.  

Sat Oct 25 19:29:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	add_opt_rec(): Introduced @bcat, mirroring @cat but for
	listbox_item.  

Sat Oct 25 19:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Compile fix[tm].  

Sat Oct 25 19:24:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved @cat to inner scope in add_opt_rec(). This means elaborating
	at some places but the overall result is IMHO more elegant.  

Sat Oct 25 19:22:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Try to fix the problem with listbox_item being added to itself.  

Sat Oct 25 19:17:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mimetypes.c, mimetypes.h:

	Modulize mimetypes mime backend.  

Sat Oct 25 19:17:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mailcap.h:

	Modulize mailcap mime backend.  

Sat Oct 25 19:17:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: default.c, default.h:

	Modulize default mime backend.  

Sat Oct 25 19:16:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	Move lifecycle functions out of mime_backend and into mime
	submodules. The begining.  

Sat Oct 25 19:10:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, modules/module.c:

	Introduce a mime module.  

Sat Oct 25 18:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	[no log message] 

Sat Oct 25 17:55:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Oct 25 17:14:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Sort box_items properly as well if OPT_SORT.  

Sat Oct 25 16:38:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/main.c,
	src/bookmarks/bookmarks.c, src/bookmarks/bookmarks.h,
	src/modules/Makefile.am, src/modules/module.c,
	src/modules/module.h:

	Introducing struct module. Behaviour of submodules handling is not
	tested. Fixes unknown option errors at startup.  

Sat Oct 25 16:32:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation fix.  

Sat Oct 25 16:19:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	config_root-parent options won't care about its listbox at all.  

Sat Oct 25 16:06:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Stop traversing in traverse_listbox_items_list() when cnext is NULL,
	instead of crashing happily.  

Sat Oct 25 16:05:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make the config_options->box_item invisible.  

Sat Oct 25 15:22:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Do the del_from_list() test right.  

Sat Oct 25 15:19:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	del_from_list(option->box_item) only if it is in any list (that's
	not the case for config_options->box_item.  

Sat Oct 25 15:15:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Forgot one instance of introduction of the new OPT_LISTBOX meaning.  

Sat Oct 25 15:09:58 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Revert brain-dead and useless changes. Thanks to Pasky.  

Sat Oct 25 14:49:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Changed OPT_LISTBOX behaviour so that it makes listbox even on the
	option which has it set itself.  

Sat Oct 25 14:41:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/options.h, document/html/tables.c,
	intl/charsets.c, util/lists.h, viewer/text/view.c:

	Make namespace pollution fixing macros look like <original struct
	name>_elinks.  That should be unique enough and our keyboards will
	be more likely to survive debugging sessions.  

Sat Oct 25 14:09:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, config/options.c, config/options.h:

	Make option registration via [un]register_options().  Previous
	internal [un]register_option() was merged with [init|done]_options() 

Sat Oct 25 13:49:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c, options.h, opttypes.c:

	Removed config_option_box_items, config_options->box_item exists
	now.  

Sat Oct 25 13:44:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	init_listbox_item() reindentation.  

Sat Oct 25 13:26:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Cleaned up possibly confusing form of typecast.  

Sat Oct 25 13:25:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Reenabled the OPT_SORT implementation, let's see what will happen.  

Sat Oct 25 13:13:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	add_at_pos -> add_to_list_end in add_opt_rec().  

Sat Oct 25 13:01:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, sched/download.c:

	Add temporary file name prefix macro. Make indentation consistent.  

Sat Oct 25 12:59:06 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Fix a memleak caused by unfreed lua console history.  

Sat Oct 25 12:50:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Oct 25 12:49:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Detector of options which were not properly unregistered. It ignores
	autocreated options, maybe it shouldn't.  

Sat Oct 25 12:45:08 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use calloc_dialog().  

Sat Oct 25 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Unregister options through unregister_option_info().  

Sat Oct 25 12:31:05 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Use calloc_dialog().  

Sat Oct 25 12:28:07 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use calloc_dialog(). Fix the count of widgets in main options
	dialog.  

Sat Oct 25 12:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bfu/msgbox.c, bookmarks/dialogs.c,
	dialogs/refresh.c:

	Use calloc_dialog().  

Sat Oct 25 12:17:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.h:

	calloc_dialog(n, add_size) and sizeof_dialog(n, add_size) macros
	were introduced.  

Sat Oct 25 12:13:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Initialize @i to zero in unregister_option_info(). Spotted by Zas.  

Sat Oct 25 12:02:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Call unregister_option_info() from done_bookmarks().  

Sat Oct 25 11:54:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Introduced unregister_option_info().  

Sat Oct 25 11:46:31 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:42:55 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/hierbox.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:39:19 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: listbox.c, widget.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:33:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:29:58 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, group.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:18:23 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 10:45:37 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, config/options.c:

	Use setup.h to define default user protocols handlers, and save few
	bytes using static const strings.  

Sat Oct 25 10:42:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Reorganization, no source changes.  

Sat Oct 25 10:31:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.h:

	Populated with some more comments + little reorganization.  

Sat Oct 25 10:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	globhist/globhist.c, globhist/globhist.h:

	finalize_*() -> done_*() 

Sat Oct 25 10:19:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Reverted unapproved witekfl's patch [rev 1.99].  

Sat Oct 25 10:17:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Temporarily comment out the OPT_SORT implementation, it causes
	segfaults upon startup.  

Sat Oct 25 05:39:33 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	More BRs.  

Sat Oct 25 04:45:58 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/conf.c:

	Smart config is even smarter now. '\n' could be removed from
	descriptions.  

Sat Oct 25 04:39:07 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file.c:

	Length must be recalculated after decoding string.  

Sat Oct 25 01:32:54 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Oct 25 00:53:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Oct 25 00:52:55 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, leet.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	.po files were resynced.  

Sat Oct 25 00:37:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Added support for OPT_SORT option flag, automagically sorting
	subtree options. The flag is set on the config_options root tree.  

Sat Oct 25 00:04:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Actually register the options.  

Fri Oct 24 23:59:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Added include for N_().  

Fri Oct 24 23:53:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, config/options.c, config/options.h,
	config/options.inc:

	Moved bookmarks options registration from config/options.inc to
	bookmarks/bookmarks.c. It will probably get a wrong order in the
	tree, but it is going to serve nicely as a testbed for the New
	Order.  

Fri Oct 24 23:49:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Cleanup removing useless #define.  

Fri Oct 24 23:46:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, bookmarks/bookmarks.h:

	Introduced init_bookmarks().  

Fri Oct 24 23:39:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	set_dlg_*() -> add_dlg_*(). Okay, I probably should've thought about
	this before spreading it all over the source ;-).  

Fri Oct 24 23:36:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, config/dialogs.c,
	globhist/dialogs.c:

	Introduced set_dlg_listbox().  

Fri Oct 24 23:35:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/inpfield.h, sched/download.c:

	A few trivial fixes.  

Fri Oct 24 23:31:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	set_dlg_end() introduced. Probably the most useful one ;-).  

Fri Oct 24 23:24:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Dialog titles don't contain hotkeys.  

Fri Oct 24 23:24:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.h:

	We cannot use @history because it would get expanded on both sides
	of the assignment.  

Fri Oct 24 23:23:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.h, dialogs/auth.c:

	set_dlg_field_pass() introduced, and used in the HTTP auth dialog.  

Fri Oct 24 23:19:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	scripting/lua/core.c, viewer/text/search.c:

	Introduced ses_dlg_field().  

Fri Oct 24 23:08:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use ses_dlg_button(). Blah. I wonder what did I mess up during this.  

Fri Oct 24 22:57:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless end goto.  

Fri Oct 24 22:46:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.h, dialogs/options.c:

	Moved set_dlg_button() from dialogs/options.c to bfu/button.h, and
	added udata parameter to it.  

Fri Oct 24 22:38:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.h, dialogs/options.c, viewer/text/search.c:

	Moved set_dlg_checkbox() from dialogs/options.c to bfu/checkbox.h,
	and used in viewer/text/search.c.  

Fri Oct 24 22:33:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	set_term_opt*() -> set_dlg*() 

Fri Oct 24 22:30:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c:

	Moved the keep_unhistory check from really_goto_url_w() (completely
	inappropriate, IMNSHO) to ses_history_move().  

Fri Oct 24 22:25:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	clean_unhistory() in ses_forward().  

Fri Oct 24 21:19:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Now we can again use cur_loc() in go_(un)back() ;-).  

Fri Oct 24 21:17:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/history.h, sched/session.h, viewer/text/view.c:

	Okay, no help, moved go_(un)back() from sched/history.h to
	sched/session.h. It belongs there more anyway.  

Fri Oct 24 21:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	cur_loc() is session.h's thing, so don't use it in go_(un)back()
	definitions.  

Fri Oct 24 21:11:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	#undef history_menu_model 

Fri Oct 24 21:11:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reduced code duplication for (un)history_menu(), now it is done
	through history_menu_model() macro.  

Fri Oct 24 21:05:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed abort_loading() from go_historywards() because it is already
	done in go_history().  

Fri Oct 24 21:05:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fix go_history() definition.  

Fri Oct 24 21:04:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Removed obsolete go_history() comment.  

Fri Oct 24 21:03:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	go_(un)backwards() unified to go_historywards().  

Fri Oct 24 21:02:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	The only dangling prototype in this .h file which had unnamed
	parameter, the black sheep ses_history_move(). Tsk.  

Fri Oct 24 21:00:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	About the dangers of go_history().  

Fri Oct 24 20:57:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Tidyup.  

Fri Oct 24 20:56:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h,
	viewer/text/view.c:

	go_history() exported. go_(un)back() now just wraps going right to
	the previous/next location in the history.  

Fri Oct 24 20:52:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	go_away() -> go_history().  

Fri Oct 24 20:51:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c, session.h:

	TASK_(UN)BACK unified to TASK_HISTORY.  

Fri Oct 24 20:49:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Do the same thing when coming forward from nowhere to a redirect as
	when coming back from nowhere. *mumble* 

Fri Oct 24 20:46:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed going in history to a document which was a redirect.  

Fri Oct 24 20:39:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.h, session.c:

	Unified ses_leave_location(), ses_back() and ses_unback() to
	ses_history_move().  

Fri Oct 24 20:32:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Factored out go_(un)back() just to call of go_away().  

Fri Oct 24 20:11:54 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Always use dlg for struct dialog*, dlg_data for struct dialog_data*.  
	Use counter for dialog creation.  

Fri Oct 24 20:02:16 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Always use dlg for struct dialog*, dlg_data for struct dialog_data*.  
	Use counter for dialog creation.  Prefix lua hackish dlg_data and
	xdialog_data structures with lua_.  

Fri Oct 24 19:43:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, globhist/globhist.c, globhist/globhist.h:

	Move global history change_hooks back home.  

Fri Oct 24 19:35:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c:

	Move mailcap/mimetypes change_hooks back home.  

Fri Oct 24 19:08:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 24 17:25:22 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert(). Always use file_download for struct file_download *.  

Fri Oct 24 17:12:38 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 17:05:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/session.c,
	sched/session.h:

	ses_goto() takes additional task_target_location parameter, which is
	in turn harvested by ses_(un)back() and is used instead of assuming
	the item next/previous to the cur_loc(). This should fix bug 255.  

Fri Oct 24 17:04:37 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:55:22 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:50:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h:

	add_document_to_string(): Centralize the ``dump'' code. Only user is
	lua backend since it hurts performance for --dump a bit.  

Fri Oct 24 16:47:41 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:44:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:36:21 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:34:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c:

	Move over the mailcap/mimetypes change hooks.  

Fri Oct 24 16:30:39 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 16:26:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:14:36 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:04:50 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 16:00:07 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:54:32 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:37:51 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:11:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A potential bug was fixed: loops should exit if nul char is
	encountered by parser.  

Fri Oct 24 14:10:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Drastically simplify (un)history menu handling - don't pass steps as
	data, but directly the target location pointer.  

Fri Oct 24 13:36:51 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	"Do not specify variable names in prototypes" recommendation was
	removed.  

Fri Oct 24 12:07:24 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Oct 24 12:00:28 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	read() -> safe_read(), write() -> safe_write().  

Fri Oct 24 11:52:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation update.  

Fri Oct 24 11:41:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, lowlevel/dns.c, protocol/ftp.c,
	terminal/event.c, terminal/hardio.c:

	Cleaned up the whitespace mess created by last zas' patch ;-).  

Fri Oct 24 11:41:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Moved safe_read() back to the while() condition.  

Fri Oct 24 11:21:18 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, intl/gettext/loadmsgcat.c,
	lowlevel/connect.c, lowlevel/dns.c, osdep/os_depx.h,
	protocol/ftp.c, protocol/http/http.c, sched/download.c,
	terminal/event.c, terminal/hardio.c, terminal/kbd.c,
	util/encoding.c, viewer/text/form.c:

	Attempt to workaround the EINTR mess.  

Fri Oct 24 09:35:40 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Old inactive code was removed.  

Fri Oct 24 09:01:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hotkey fix.  

Fri Oct 24 08:11:41 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Frecnh translation was updated.  

Fri Oct 24 01:41:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reset cur_loc() only if it didn't change.  

Fri Oct 24 01:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	And yet another fix of obsolete test in menu_history().  

Fri Oct 24 01:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed some stupid obsolete measure from the history_menu()'s loop,
	runing my day.  

Fri Oct 24 01:17:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed the history_menu()'s for loop.  

Fri Oct 24 01:09:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed the potential theoetical bad-num-of-steps problem in
	go_(un)back().  

Fri Oct 24 01:02:39 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Oct 24 00:59:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Reverted bogus change by zas [options.c:1.317] - add globhist
	options even if globhist support is not compiled in.  

Fri Oct 24 00:58:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Minor tidyup. Always add document.browse.forms.show_formhist.  

Fri Oct 24 00:49:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.c:

	Compilation fix.  

Fri Oct 24 00:33:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Compilation fixes.  

Fri Oct 24 00:28:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: menu.c, menu.c:

	Compilation fix.  

Fri Oct 24 00:27:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Oops, ses_history.history is not a pointer, really.  

Fri Oct 24 00:23:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Compilation fix.  

Fri Oct 24 00:22:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	This should be the final fix for the (un)history menu - set the
	original document as cur_loc() when calling go_(un)back(), as
	expected by the cleanup workers. Now I should actually test the
	whole beast ;-).  

Fri Oct 24 00:21:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix so globhist changehook will not result in fetching non existent
	option.  

Fri Oct 24 00:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h,
	viewer/text/view.c:

	go_(un)back now takes the 'destination location' as second
	parameter.  

Fri Oct 24 00:09:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Don't set referer to the previous document when moving through
	history.  

Fri Oct 24 00:00:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Sanitize the history menus handler so that it actually has a chance
	to work.  

Thu Oct 23 23:53:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	del_from_history(): if there's something in history, move there,
	otherwise if there's something in unhistory, move there, otherwise
	set it to NULL.  

Thu Oct 23 23:52:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	copy_option(): Fix bug in last patch. option->udata should point to
	the resulting option not the template.  

Thu Oct 23 23:49:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Fixed del_from_history() to move @current to the previous location,
	not to the next location.  

Thu Oct 23 23:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h:

	Unify the history and unhistory to one single list, with
	ses_history.current acting as a movable pivot inside indicating the
	current location.  

Thu Oct 23 23:44:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	init_option_listbox_item(): Introduced.  

Thu Oct 23 23:35:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 23 23:23:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	delete_option(): Merge in free_option_value() and free_option().
	Should cleanup the namespace a little.  

Thu Oct 23 23:09:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Add document color toggling to View menu. Fix link numbering toggle
	handler.  

Thu Oct 23 23:00:04 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 23 22:50:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Actually remove location from list in free_history().  

Thu Oct 23 22:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Quick fix colliding hotkeys.  

Thu Oct 23 22:42:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	Fix typos spotted by zas.  

Thu Oct 23 22:39:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Made document.cache.memory.size long. It is supposed to be so from
	the very time when this changed units to bytes, and I'd bet it *was*
	so for at least some time. At least all users happily get_opt_long()
	it anyway. And it's the right thing. Trust me. My name is Pasky.  

Thu Oct 23 22:37:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/os_depx.h:

	Introduced MAXLONG definition, mimicking the MAXINT one.  

Thu Oct 23 22:35:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Improve comments.  

Thu Oct 23 22:29:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Removed never-used add_to_unhistory(). We may reintroduce it later,
	but it'd only complicate stuff now.  

Thu Oct 23 22:27:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c:

	clean_unhistory() now always does so.  

Thu Oct 23 22:22:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, config/kbdbind.c, config/options.c,
	document/html/frames.c, mime/backend/mailcap.c, util/lists.h:

	add_to_list_bottom() -> add_to_list_end(). Much more accurate, IMHO.  

Thu Oct 23 22:20:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	ses_history.current is used now.  

Thu Oct 23 22:20:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Update cur_loc() and have_location() to use ses_history.current.  

Thu Oct 23 22:19:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Keep session existence tests outside download_error_dialog(),
	cleaner imho.  

Thu Oct 23 22:18:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c:

	Use cur_loc() more.  

Thu Oct 23 22:16:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, options.inc:

	Rename option info initializers from add_opt_<type> to
	INIT_OPT_<type>.  

Thu Oct 23 22:16:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Alphabetize includes.  

Thu Oct 23 22:15:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.h, location.c, location.h,
	session.c:

	Keep ses_history.current up-to-date. Newly introduced
	del_from_history() helps with that task.  

Thu Oct 23 22:05:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Removed useless historical note.  

Thu Oct 23 21:54:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/download.c, sched/history.c,
	sched/history.h, sched/session.c, sched/session.h:

	Session history was moved from sched/session.h to sched/history.h,
	history functions calling convention was changed to take just
	{struct ses_history}. Corrected a little the session.location (part
	of the move) hype advertised in the associated comment.  

Thu Oct 23 21:46:12 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 23 21:43:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.h, document/html/renderer.h, sched/session.h:

	Remove tons of useless cross-including, hopefully finding some way
	from this terrible maze and nest of overhead.  

Thu Oct 23 21:40:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Indent options.  

Thu Oct 23 21:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h, options.inc:

	Store options in tables. One for config options and one for command
	line options.  This means a new flag (OPT_ALLOC) is introduced to
	mark which options (and option names) to free when an option is
	released. Major cleanups ahead.  

Thu Oct 23 16:41:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Translation updated.  

Thu Oct 23 16:01:47 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Oct 23 15:18:53 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	A new menu entry was added to toggle link numbering. It is not yet a
	per-document action, but it will help newbies to know about "."
	shortcut existence.  

Thu Oct 23 15:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Introduce INIT_OPTION() macro.  

Thu Oct 23 14:51:21 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	A new menu entry was added to toggle images rendering. It is not yet
	a per-document action, but it will help newbies to know about "*"
	shortcut existence.  

Thu Oct 23 14:47:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.inc:

	Move autocreated function to their own function.  

Thu Oct 23 13:44:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Some comment updates regarding (un)history.  

Thu Oct 23 13:21:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Tidyup.  

Thu Oct 23 10:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Thu Oct 23 10:11:25 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Oct 23 09:48:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Don't allocate alias full path strings.  

Thu Oct 23 09:18:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Whoops. Tiny typo fix.  

Thu Oct 23 09:11:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved over register_change_hooks() to a more honorable place.  

Thu Oct 23 09:09:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Export register_change_hooks().  

Thu Oct 23 08:59:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	...and reindent of the opttype info switch.  

Thu Oct 23 08:59:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Tiny cleanup...  

Thu Oct 23 08:57:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved the common opttype info prefix (path,saved,option->name,help)
	before the switch. This also reduces the translation strings to the
	interesting part.  

Thu Oct 23 08:50:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Converted the opttype info printing to a switch.  

Thu Oct 23 08:49:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use stricter checks while parsing attributes. It prevents infinite
	loop triggered by garbage.html test file.  

Thu Oct 23 08:43:54 2003  Laurent Monin <zas@norz.org>:

	* test/garbage.html:

	Special garbage file ;) test it and see. Be prepared to bad things
	[tm]. A fix is on the road.  

Thu Oct 23 08:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 23 08:42:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	As long as we assert right things.  

Thu Oct 23 08:39:05 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Oct 23 08:32:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	I assert, you assert, everyone asserts. We are one happy asserting
	family.  

Thu Oct 23 08:26:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct 23 08:20:27 2003  Laurent Monin <zas@norz.org>:

	* po/Makefile.in:

	Specify which language (C) we use. It prevents some warnings about
	.inc files when doing make update-po.  

Thu Oct 23 08:11:45 2003  Laurent Monin <zas@norz.org>:

	* po/Makefile.in:

	msgid-bugs-address xgettext option is not supported on all xgettext
	versions, so it prevents this stuff to work on some platforms.  

Thu Oct 23 07:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Reverted patch by Jonas ("sanitization" of translation strings)
	[1.332]. This kind of changes break languages with different order
	of words than English. It needs to be done less agressively.  

Thu Oct 23 01:45:01 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Cosmetic changes.  

Thu Oct 23 00:59:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.inc:

	Centralize change hook registration. I hope this is elegant enough!
	;) 

Thu Oct 23 00:39:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, options.inc:

	add_opt_codepage(): Call get_cp_index() in the macro.  

Thu Oct 23 00:26:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	get_opt_(): Do better sanity checking.  

Thu Oct 23 00:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Sync.  

Thu Oct 23 00:12:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Try to make help printing format strings a little saner from a
	translation standpoint.  

Wed Oct 22 23:57:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Cleanup.  

Wed Oct 22 23:53:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Add flag to xgettext to set "Report-Msgid-Bugs-To:
	elinks-dev@linuxfromscratch.org" 

Wed Oct 22 23:44:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in, src/config/options.inc:

	A few hacks and po file updating should work again.  

Wed Oct 22 22:50:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: Makefile.am, options.c, options.inc:

	Move option adding to separate file to make po files more stable.  

Wed Oct 22 21:59:40 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup: added some comments about tempnam(), removed an obsolete
	TODO, moved download error dialog code to a separate function.  

Wed Oct 22 21:55:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Described the order of items in session.(un)history.  

Wed Oct 22 21:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Make the changehooks a bit smarter.  

Wed Oct 22 21:35:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, opttypes.h:

	More option value unionization comment updates.  

Wed Oct 22 21:23:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Update help printing comments.  

Wed Oct 22 21:14:44 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* doc/small.txt:

	ELinks doesn't depend on libxml.  

Wed Oct 22 21:13:03 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Little fix.  

Wed Oct 22 20:56:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove FIXME.  

Wed Oct 22 20:52:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	str_dup(): Revert and don't use memacpy().  

Wed Oct 22 20:44:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Fixed add_opt_str_tree(), broken by the un-ionization.  

Wed Oct 22 20:22:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	gen_cmd(): Cleanup.  

Wed Oct 22 20:19:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Misc. cleanups. Int and long options now use common num_set()
	function.  

Wed Oct 22 20:13:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	color_set(): Cleanups.  

Wed Oct 22 20:07:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Cleanup.  

Wed Oct 22 20:00:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Wed Oct 22 19:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	str_dup(): Use memacpy().  

Wed Oct 22 19:57:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	Don't return anything in option_types[type]->dub() functions.  

Wed Oct 22 19:50:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use &options_root_tree instead of options_root.value.tree.  

Wed Oct 22 19:46:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Make free_option_value() static.  

Wed Oct 22 19:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use delete_option() and cleanup indentation.  

Wed Oct 22 19:42:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Check for option value allocation error.  

Wed Oct 22 19:24:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/conf.c, config/options.c, config/options.h,
	config/opttypes.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/backend/default.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c, protocol/user.c, viewer/text/search.c,
	viewer/text/view.c:

	Use union type for option values. Improves type safety, startup time
	and memory usage.  I've not yet found a sane way to cast to the
	requested type in get_opt_*() calls so for now we cast locally.  

Wed Oct 22 17:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	menu_handler(): Don't propagate the event when calling
	delete_window_ev().  Bug was reproducable with backgrounded tab and
	opening link menu and clicking outside the menu.  This is the same
	as the fix for bug 33 (bfu/menu.c rev 1.92).  One delete_window_ev()
	that propagate the event remains .. should it also be changed? 

Wed Oct 22 17:20:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Oct 22 16:57:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	New attempt to fix bug 42: Font tags are not handled correctly but
	shown verbatim. Please test heavily since parser is concerned, this
	patch may break some other things (but it should not).  

Wed Oct 22 15:11:29 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	A typo preventing gmo compilation was fixed. Witekfl please review.  

Wed Oct 22 14:00:56 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Wed Oct 22 12:53:25 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	This should fix the mouse handler issue when calling OS Shell (bug
	55).  

Wed Oct 22 11:45:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	do_move(): When handling TASK_FORWARD do a lookup to see if any
	external handlers are defined. If so use that and do not attempt to
	run the connection. Fixes bug 253.  

Wed Oct 22 10:48:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Wrap assignment of boolean expression in ().  

Wed Oct 22 10:37:27 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Oct 22 10:09:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Expand 1 chars less. Make slrn.sf.net and /. look better.  

Wed Oct 22 08:54:11 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Oct 21 15:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/search.c:

	An option to enable/disable dialogs when search hits top or bottom
	of the document was added. Default is 1.  

Tue Oct 21 15:27:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Tidyup.  

Tue Oct 21 15:24:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fixes.  

Tue Oct 21 15:22:59 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Translation of type field in options manager info boxes was fixed.  

Tue Oct 21 15:12:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h, view.c:

	has_search_word(): Introduced as inlined function to simplify search
	word testing.  

Tue Oct 21 14:36:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Comment on some old code.  

Tue Oct 21 14:34:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Highlight current link after search strings. Idea by Johannes
	Zellner.  

Tue Oct 21 13:26:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	assert(func) in run_connection(). Regarding bug 253.  

Tue Oct 21 13:20:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add comment about why to check part->cx.  

Tue Oct 21 09:15:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanup.  

Tue Oct 21 00:29:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_link_number(): Readd check for part->cx == -1 that was
	wrongfully removed by me in version 1.312 and which caused underflow
	of part->spaces. Thanks to Zardoz once again for helping out and
	spotting my bad patches.  

Mon Oct 20 21:52:21 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Oct 20 19:48:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Simplify call to realloc_spaces() and check if allocation is needed.  

Mon Oct 20 18:22:57 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated translation, 94.40% 

Mon Oct 20 17:37:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix off by one error that caused centered string to be a little to
	the left. Together with the previous patch the right/center
	alignment regression should have been fixed.  

Mon Oct 20 17:32:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix off by one error introduced between 1.253 and 1.254 by me. Jonas
	r00lez! 

Mon Oct 20 16:55:50 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Oct 20 16:36:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/leet.po:

	Bad string translation fix.  

Mon Oct 20 16:34:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Oct 20 16:23:02 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Oct 20 16:22:51 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/small.txt:

	Various typo fixes and similiar changes. Added note about non-diet
	gcc and -O's.  

Mon Oct 20 16:10:13 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fix.  

Mon Oct 20 15:51:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	There's no xterm256, only xterm-256color.  

Mon Oct 20 15:50:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Elaborate on the dangers of config.i18n ;-).  

Mon Oct 20 15:47:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Little tidyup and some typo fixes.  

Mon Oct 20 15:42:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Factor out some art from the translation strings.  

Mon Oct 20 15:39:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Form memory -> Forms memory in dialog title, spotted by Jonas.  

Mon Oct 20 15:38:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/kbdbind.c, osdep/os_dep.h:

	Removed NEWLINE. It's getting to be too much hassle and the libc
	should emulate that properly for us anyway, if the system is
	non-standard.  

Mon Oct 20 15:38:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/leet.po:

	l337 VV45 0p7.  

Mon Oct 20 15:24:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	100% pure Italian translation.  

Mon Oct 20 15:22:32 2003  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, options.c, options.h:

	An option to control configuration file localization was added, off
	by default.  

Mon Oct 20 15:15:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Remove useless #include.  

Mon Oct 20 14:54:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, default.c, mailcap.c,
	mimetypes.c:

	Store mime backends in a table instead of a list. My intensions
	never got realized. Hopefully fixes local file crash.  

Mon Oct 20 13:58:13 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Remove -Os gcc flag, and add -Os diet flag instead. Updated results,
	using gcc-2.95.3.  

Mon Oct 20 11:46:14 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/conf.c:

	elinks.conf is now localized.  

Mon Oct 20 09:16:15 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Details about --enable-small effects.  

Mon Oct 20 08:59:05 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Note about executable compression (example using UPX): 200kb static
	elinks.  

Mon Oct 20 08:49:27 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Some cflags were added, and a note about smaller results with
	gcc-3.2.x than with gcc-2.95.x.  

Mon Oct 20 08:42:30 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	Disable fastfind when compiled with --enable-small, and fix a
	compilation issue when fastfind is disabled.  

Mon Oct 20 08:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Compilation fix when globhist is disabled.  

Mon Oct 20 08:12:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Minor cleanup.  

Sun Oct 19 22:29:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: README, bookmarks.txt, color-model.txt, small.txt:

	Plain text documentation files got aspelled.  

Sun Oct 19 22:28:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/files.xml, config/mime.xml, config/syntax.xml,
	intro/installation.xml:

	DocBook files got aspelled.  

Sun Oct 19 20:42:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/small.txt:

	Fix typos.  

Sun Oct 19 19:07:48 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Sun Oct 19 18:12:24 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Sun Oct 19 18:12:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char16(): Checking of the bold attribute is also needed for 16
	mode even though we still have the bold bit in the color byte. Hmm
	fixes "links on freshmeat.net are sometimes bold sometimes not"
	reported by zas.  

Sun Oct 19 18:00:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Explain what struct connection's @socket and @data_socket is.  

Sun Oct 19 17:57:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/ftp.c, sched/connection.c, sched/connection.h:

	connection.sock2 -> connection.data_socket 

Sun Oct 19 17:51:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/finger.c, protocol/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	connection.sock1 -> connection.socket 

Sun Oct 19 15:23:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/align.html:

	Add right align test case from
	http://www.czech-tv.cz/program/1063623931-17.10.2003-22:00-1.html
	that is currently broken.  

Sun Oct 19 14:59:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync "Mention expand_table_columns to break overall layout"
	description improvement.  

Sun Oct 19 13:58:53 2003  Petr Baudis <pasky@ucw.cz>:

	* .vimrc:

	*.inc files are C files in the ELinks tree.  

Sun Oct 19 13:45:16 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Done. 100%.  

Sun Oct 19 13:31:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix, reported by fissie. Three people continued happily
	committing even to uncompilable tree. Looks like noone here bothers
	actually compiling the beast anymore. See the bad example I give.  

Sun Oct 19 12:56:05 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Oct 19 12:50:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Moved now-useless struct option; prototype to #if 0 innards.  

Sun Oct 19 12:41:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Enlarged non-ELINKS_SMALL span by the <hr />.  

Sun Oct 19 12:20:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	No need to check part->cx we do that already in put_chars().  Use
	int_lower_bound() to ease formatting and possibly save an asignment.  

Sun Oct 19 11:31:15 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, dialogs/hierbox.c, lowlevel/home.c,
	scripting/lua/core.c, terminal/color.c, viewer/text/form.c,
	viewer/text/link.c:

	Ending spaces removal.  

Sun Oct 19 11:23:27 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/codes.c:

	Shorter message if ELINKS_SMALL is defined, save more bytes.  

Sun Oct 19 11:19:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Remove useless thing.  

Sun Oct 19 11:12:50 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	enable-small configure option was added, it helps to get a very
	small static binary suitable for mini-distributions. Useless
	intermediate variable was removed.  

Sun Oct 19 11:10:23 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/config/kbdbind.c,
	src/config/options.h:

	enable-small configure option was added, it helps to get a very
	small static binary suitable for mini-distributions.  

Sun Oct 19 11:08:54 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Small ELinks howto.  

Sun Oct 19 09:41:22 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Oct 19 07:12:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Mention expand_table_columns to break overall layout (some lines
	overflowing from the defined boxes etc), reformat and small typo fix
	(vertical -> vertically).  

Sun Oct 19 00:44:21 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Oct 19 00:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	New option .. new version.  

Sat Oct 18 23:48:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Improve the document.html.expand_table_columns option description.  

Sat Oct 18 23:42:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/tables.c:

	Introduce document.html.expand_table_columns. Maybe it can help to
	pin point what sort of pages are better or worse. Off by default.  

Sat Oct 18 23:14:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	File menu hotkey fixes. Grm.  

Sat Oct 18 23:12:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Mention the default keybinding for the opening new tab action in
	file menu.  

Sat Oct 18 23:07:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Fix the --elinks=* option eating an argument.  

Sat Oct 18 23:06:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync to include typo fixes and some new options.  

Sat Oct 18 22:39:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Oct 18 22:32:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	document.browse.links.active_link.bold description typo fix: test ->
	text.  

Sat Oct 18 22:31:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Normalize document.browse.images.image_link_tagging description.  

Sat Oct 18 22:30:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation update.  

Sat Oct 18 22:15:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	ACT_OPEN_NEW_TAB bound to 't' by default, _IN_BACKGROUND to 'T'.  

Sat Oct 18 22:13:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Introduced all the four actions relevant to tab opening.  

Sat Oct 18 22:01:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Open in new tab -> Open new tab in the File menu.  

Sat Oct 18 22:00:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/link.c:

	Fix the open_in_new_tab*() suite so that it opens the active link at
	correct times. The old behaviour was some strange mindtwist of mine,
	mixing opening in background and opening upon a link ;-).  

Sat Oct 18 21:45:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Duh, this is terrible. Again fixed get_link_url() calling ;-).  

Sat Oct 18 21:44:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Fixed calling of get_link_url().  

Sat Oct 18 21:41:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.h, tab.c:

	Compilation fix.  

Sat Oct 18 21:41:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/link.c:

	open_in_new_tab*() is now called directly, not through the annoying
	send_open*_new_window() wrapper.  

Sat Oct 18 21:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Remove useless @exe_name parameter from do_open_in_new_tab().  

Sat Oct 18 21:17:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Compilation fix.  

Sat Oct 18 21:16:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Oops, use send_open_new_window instead of send_open_in_new_window in
	file_menu11.  

Sat Oct 18 21:14:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	send_open_*new_xterm() -> send_open_*new_window().  

Sat Oct 18 21:10:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, osdep/os_dep.c, viewer/text/link.c:

	Moved the opening in new tab [in background] from the New window
	submenu.  

Sat Oct 18 20:40:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Removed useless prototype (already in the .h file).  

Sat Oct 18 20:27:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, terminal/tab.c, terminal/tab.h:

	Moved *open_in_new_tab*() from osdep/os_dep.c to terminal/tab.*.  

Sat Oct 18 19:49:47 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/document/html/parser.c:

	document.browse.images.show_any_as_links introduced (by default on).
	If off, images are shown only as their alt attribute, but aren't
	selectable links. Requested by and inspired by a patch of Johannes
	Zellner <johannes@zellner.org>.  

Sat Oct 18 19:46:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* autogen.sh:

	Add configure fixup for broken autotool on FreeBSD. Fixes "ltconfig:
	you must specify a host type if you use `--no-verify'" reported by
	Dmitry Pinchukov <dpinch@viart.com.ua> and me.  

Sat Oct 18 19:23:05 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Reverted the --without-x11 - it is completely redundant to
	--without-x, already provided by autoconf.  

Sat Oct 18 19:17:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp.c:

	Avoid *blatant* lies in directory listing.  

Sat Oct 18 17:38:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/gen_translations_stats.sh:

	Fix prefix number removal with FreeBSD sed.  

Sat Oct 18 17:16:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	No need for DEFAULT_COLOR_FLAGS after all. d_opt rules! 

Sat Oct 18 17:10:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	get_format_screen_char(): Use d_opt to acquire color_flags as it is
	more "stable" than using part->document.opt, fixes a few stains.  

Sat Oct 18 17:04:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	get_format_screen_char(): Clear @color_flag before updating it,
	initialize it to the default color options.  

Sat Oct 18 16:55:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Rename: xset_hchars() to draw_frame_hchars(), xset_vchars() to
	draw_frame_vchars().  

Sat Oct 18 16:48:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Added a few comments.  

Sat Oct 18 16:41:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Yes .. being a lazy programmer commiting uncompiled code makes you
	look more active with all the following fixups.  

Sat Oct 18 16:37:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchars(): Add assertion "xl > 0" again.  

Sat Oct 18 16:33:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Acquire color_flags from the document options. This fixes the
	problem with table border drawing.  

Sat Oct 18 16:28:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_{h,v}chars(): Factor out common part into get_frame_char().  

Sat Oct 18 16:12:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Make xset_vchars() look like xset_hchars() by moving template
	preparation out the loop.  

Sat Oct 18 16:07:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xset_hchars() with set_hchars().  

Sat Oct 18 16:02:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	clear_hchars(): Introduced as a specialized version of set_hchars().  

Sat Oct 18 15:38:38 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	A configure option named without-x11 was added to prevent linking
	against libx11 even if it is available.  

Sat Oct 18 13:33:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Improve usage help.  

Sat Oct 18 13:32:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Change order of arguments.  

Sat Oct 18 13:24:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Prevent manpage updating when elinks has not been build.  

Sat Oct 18 13:14:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, tools/help2doc:

	Add update-manpages build rule. Please help keeping the elinks.conf
	manpage up to date when options are changed.  

Sat Oct 18 13:11:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Update against current option tree.  

Sat Oct 18 13:08:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Only use "(DISABLED)" in option description.  

Sat Oct 18 12:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add comment about when the aliases has been added.  

Sat Oct 18 12:29:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, config/options.c:

	Properly fix the get_bfu_style(..., "dialog") issue by introducing
	ui.colors.*.generic color and aliasing ui.colors.*.dialog.background
	to *.generic.background.  

Sat Oct 18 09:14:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	No trailing spaces in ui.window_title description.  

Sat Oct 18 09:12:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Only few config options descriptions and
	most of commandline options descriptions left.  

Sat Oct 18 01:37:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	"dialog" is not a valid bfu style name. Use dialog.frame instead.  

Sat Oct 18 01:19:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Make links standout again in mono mode.  

Sat Oct 18 01:16:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Oct 18 00:57:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	viewer/text/link.c:

	Add active link bold option.  

Sat Oct 18 00:38:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char16(): Like in add_char256() handle boldness as if it is not
	part of the color byte when USE_256_COLORS.  

Sat Oct 18 00:26:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Propagate the bold attribute from the foreground color brightness
	and check the screen_char->attr bolt bit when drawing.  

Sat Oct 18 00:14:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Clear the bold bit. Fixes color weirdness.  

Sat Oct 18 00:09:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Fix COLOR_INCREASE_CONTRAST comment.  

Sat Oct 18 00:01:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 23:54:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use macros when comparing fore- and background colors.  

Fri Oct 17 23:52:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use macros when assigning fore- and background colors.  

Fri Oct 17 23:27:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix option text, set ensure_contrast on by default.  

Fri Oct 17 22:57:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Sync with current option tree, fix path to imported xml files.  

Fri Oct 17 22:57:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Minor cleanup.  

Fri Oct 17 22:45:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Makes ftp directory listing looks like local directory listing. It
	lies a bit, and is a hack for now. Feel free to improve.  

Fri Oct 17 21:37:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. A giant leap, we're getting near :^). Got
	over de.po again as well as hu.po and leet.po...  

Fri Oct 17 21:29:34 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 20:57:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c, viewer/text/link.c:

	Lots of nice link options to play with: 
	
	document.browse.links.active_link 
	        tree with underline / invert colors / default color options.  
	
	document.html.underline_links 
		this is not perfect yet it seems (some weirdness in underline
		drawing) 

Fri Oct 17 20:16:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fixes in comment.  

Fri Oct 17 19:58:33 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update: 94.93% 

Fri Oct 17 19:53:02 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 18:57:34 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update, now 92.13% 

Fri Oct 17 18:46:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c, terminal/color.c, terminal/color.h,
	viewer/text/link.c:

	Add document.colors.ensure_contrast option. Patch by Johannes
	Zellner and me.  

Fri Oct 17 18:44:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 18:18:10 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Fri Oct 17 18:12:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	viewer/text/link.c:

	Color info about whether to allow dark on black is passed using
	color_flags.  For link colors we have to lookup the option value.
	This is done using a nice int option value pointer.  

Fri Oct 17 17:40:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of pasky ;-) 

Fri Oct 17 17:37:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	Introduce color_flags to control how a view color is converted to a
	terminal color.  This is nicely mixed with a few renames so pasky
	will be even more worried about how broken the color conversion is.  
	Lots of TODOs.  

Fri Oct 17 16:25:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Oct 17 15:46:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, screen.c:

	Improve redrawing to only care about the background color when
	dealing with ``space''.  

Fri Oct 17 15:31:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, dialogs/menu.c, document/html/renderer.c,
	sched/session.c, sched/session.h, viewer/text/view.c,
	viewer/text/vs.c:

	struct session screen field was renamed doc_view.  

Fri Oct 17 15:24:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	t -> term, l -> link.  

Fri Oct 17 15:20:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.h:

	Improve terminal_screen->dirty_* comment.  

Fri Oct 17 15:15:18 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 15:13:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Minimize dirty_to if >= the terminal height.  

Fri Oct 17 15:12:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 15:09:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Only iterate for the range of dirty lines. Mostly dialog drawing
	benefits.  

Fri Oct 17 15:08:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/draw.c, terminal/screen.c,
	terminal/screen.h, terminal/tab.c:

	Maintain a dirty range instead of a dirty flag. dirty_from <=
	dirty_to means the screen is dirty.  

Fri Oct 17 14:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view + minor cleanup.  

Fri Oct 17 14:19:43 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.h, view.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:16:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:11:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/vs.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:10:51 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Rename struct document_view variables to doc_view. Final part.  

Fri Oct 17 14:08:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Rename struct document_view variables to doc_view + minor cleanup.  

Fri Oct 17 14:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:58:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Rename struct document_view variables to doc_view. Part 1.  

Fri Oct 17 13:50:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Rename struct document_view variables to doc_view.  Simplify
	l_current_link(LS) to use get_current_link().  

Fri Oct 17 13:46:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 13:42:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:39:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: search.c, search.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:35:19 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:26:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, document/html/frames.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:25:50 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: textarea.c, textarea.h, textarea.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:20:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:13:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, document/html/frames.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:05:35 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Always use document variable name for struct document *.  

Fri Oct 17 13:04:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, viewer/dump/dump.c:

	Use document variable name for struct document *.  

Fri Oct 17 13:00:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use document variable name for struct document *.  

Fri Oct 17 12:56:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Always use document variable name for struct document *.  

Fri Oct 17 12:35:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, view.c:

	Always use document variable name for struct document *.
	has_form_submit() cleanup.  

Fri Oct 17 12:26:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, renderer.c, tables.c:

	Always use document variable name for struct document *.  

Fri Oct 17 11:39:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/cache.h:

	Make boolean members unsigned. Felt by Miciah.  

Fri Oct 17 11:12:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/: cache.c, cache.h, html/frames.h, html/renderer.c:

	Renamed struct cache_entry count field and struct document use_tag
	field to id_tag. cache_count is now id_tag_counter. Use document
	variable name for struct document * variables, instead of confusing
	ce or screen.  

Fri Oct 17 10:47:51 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Oct 17 09:32:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.h:

	Use bitfields for boolean fields in struct cache_entry.  

Fri Oct 17 09:07:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Now useless comment was removed.  

Fri Oct 17 07:56:21 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Fri Oct 17 07:38:27 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Fix typo.  

Fri Oct 17 05:11:44 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Null chars are replaced by spaces. www.gazeta.pl is viewable now.  

Thu Oct 16 23:02:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 16 22:31:33 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Got in front of Hungary, hope de.po won't
	get too near :-). (But of course don't get discouraged, kuser ;-) 

Thu Oct 16 21:17:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of fonseca ;-) 

Thu Oct 16 21:09:19 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of fonseca ;-) 

Thu Oct 16 19:23:07 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 16 15:53:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	s/Info/Informazioni/ 

Thu Oct 16 14:01:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 16 13:36:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Explain what the HTTP referer is and why can it be bad in
	protocol.http.referer description.  

Thu Oct 16 13:29:26 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and fr,hu,pl,it translations were updated.  

Thu Oct 16 13:14:36 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Unixware should be written UnixWare, should prevent some SCO
	lawsuits... ;).  

Thu Oct 16 13:12:02 2003  Laurent Monin <zas@norz.org>:

	* doc/: mailcap.html, book/info/preface.xml,
	book/intro/installation.xml, man/man5/elinks.conf.5:

	Bunch of typo fixes with the help of
	http://fgouget.free.fr/typos/typos program.  

Thu Oct 16 13:08:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/leds.c, config/options.c, document/html/parser.c,
	elusive/parser/css/TESTING, elusive/parser/css/atrule.c,
	elusive/parser/css/parser.c, protocol/uri.h, protocol/http/codes.c,
	protocol/http/http.c, sched/connection.c, sched/event.c,
	util/fastfind.c:

	Bunch of typo fixes with the help of
	http://fgouget.free.fr/typos/typos program.  

Thu Oct 16 11:02:28 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	Little hack to make translation stats correctly sorted.  

Thu Oct 16 08:35:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Use cep variable name instead of f (which is used for fragment
	elsewhere) in find_in_cache() and get_cache_entry().  

Thu Oct 16 08:31:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Use ce variable name instead of f (which is used for fragment
	elsewhere) in garbage_collection().  

Thu Oct 16 08:28:19 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	A macro FRAGSIZE() was added and is now used.  

Thu Oct 16 08:20:19 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Declarations moved near variable usage.  

Thu Oct 16 08:16:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Declaration moved near variable usage.  

Thu Oct 16 05:01:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Removed test for null characters in header.  Some buggy servers eg.
	www.gazeta.pl send them.  

Thu Oct 16 02:17:45 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Oct 15 22:31:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Oct 15 21:40:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	enlarge() was renamed resize_entry() since it may reduce entry size
	too. Misc cleanups.  

Wed Oct 15 20:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Added default settings for xterm-256color.  

Wed Oct 15 19:39:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed broken defaults for terminal._template_.underline - it is now
	by default off, which is much safer and more reasonable.
	Co-suggested by Jonas, fixes bug 252.  

Wed Oct 15 19:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Massive Czech translation update. Jonas has no chance.  

Wed Oct 15 19:22:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix by Zardoz to handle --with-gnutls=/path/to/gnutls again.  

Wed Oct 15 17:15:02 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Oct 15 16:59:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Better handling of memory cache size reduction by user while cache
	usage is currently over given value. document.cache.memory.size
	option changes are now detected and minimal cache size is tested and
	eventually modified to be a reasonable value.  

Wed Oct 15 14:19:40 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	Sort lines by percentage of translation and alphabetic order of .po
	file.  

Wed Oct 15 14:02:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Light unfuzziation and continued new translation.  

Wed Oct 15 13:56:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Removed exporting util/profile.h to the whole ELinks source. It is
	useless for most of it and slows down compilation etc.  

Wed Oct 15 13:42:45 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Wed Oct 15 13:17:04 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Wed Oct 15 11:59:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Really fix problem reported by David Gómez where openssl was
	disabled when calling configure with --without-gnutls.  

Wed Oct 15 11:01:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	defrag_entry() minor cleanup.  

Wed Oct 15 10:55:57 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	document.cache.memory.size is in bytes not in kilobytes.  

Wed Oct 15 10:50:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Cache debug macros cleanup, use debug() instead of internal() for gc
	failure, defrag_entry() cleanup.  

Wed Oct 15 07:51:19 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/connect.c:

	Fix compilation error due to unused label.  

Tue Oct 14 20:06:05 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation updated to 84.68% 

Tue Oct 14 18:43:54 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Fixed typos in Italian translation.  

Tue Oct 14 18:43:02 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/html/parser.c:

	Move mem_free(href) where it belongs, pasky sees everything.  

Tue Oct 14 15:57:27 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/ssl/connect.c:

	Removed unreached goto.  

Tue Oct 14 14:15:31 2003  Laurent Monin <zas@norz.org>:

	* src/: util/Makefile.am, util/profile.h, elinks.h:

	Moved CLK_* macros to util/profile.h 

Tue Oct 14 14:00:35 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Remove useless ; at end of CLK_STA() and CLK_STO() definitions.  

Tue Oct 14 13:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Fix stupid stuff in last patch. No need to use do {} while (0) with
	CLK_STA() and CLK_STO().  

Tue Oct 14 13:52:48 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Process cpu time gathering utilities to help developpers in
	profiling ELinks functions. These tools are not so hi-resolution as
	possible but they should be portable since only clock() is used.
	These macros are only effective in debug mode. Feel free to improve.  

Tue Oct 14 11:16:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/html/parser.c:

	Prevent a memory leak if !label, 'cause every byte is sacred, every
	byte is great, if a byte is wasted god gets quite irate.  

Tue Oct 14 10:27:36 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Translation fixes.  

Mon Oct 13 22:40:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Trim a few tags and use | for the markup .. we can use the
	indentation to figure out what's a section title.  

Mon Oct 13 21:49:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/version.c:

	Show whether mailcap and/or mimetypes are compiled in.  

Mon Oct 13 21:45:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/mimetypes.c:

	assert(mimetypes_tree), something weird seems to happen there...  

Mon Oct 13 18:55:36 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* doc/: README, bookmarks.txt, color-model.txt, configure.txt,
	events.txt, feedback.txt, hacking.txt:

	Bunch of typo fixes.  

Mon Oct 13 18:39:13 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* README:

	Fixed a typo.  

Mon Oct 13 12:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Textarea wrap attribute value is now by default virtual (as almost
	everyone else does as well, it seems); implemented wrap=(none|off).
	Idea by Benjamin Schwenk (DerBenni).  

Sun Oct 12 21:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre7.CVS 

Sun Oct 12 21:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre7 

Sun Oct 12 20:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Some random changes my xgettext did.  

Sun Oct 12 20:33:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Another small step in cs.po updates.  

Sun Oct 12 19:35:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Sun Oct 12 19:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/manpages/elinkskeys.5.xml, man/man5/elinkskeys.5:

	Sync documentation fixes mentioned in Debian Bug#210305: man page
	typos: "each of this keys" by <agcosta@gis.net>.  

Sun Oct 12 15:28:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed standards-violating behaviour when we ignored TITLE outside of
	HEAD tags pair (the HEAD element has both start and end tag
	optional). Pointed out by DerBenni.  

Sun Oct 12 10:12:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/leet.po:

	Unfuzzing.  

Sun Oct 12 10:03:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Unfuzzy and translate a few oneliners.  

Sat Oct 11 22:13:29 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated, .po files were resynced.  

Sat Oct 11 18:57:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Added info about syntax file and else a bit reformatting.  

Sat Oct 11 16:25:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Some light markup was added and the document reformatted.  

Sat Oct 11 13:56:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Ideas about an ELinks DocTool.  

Sat Oct 11 13:20:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix screen_driver comment.  

Sat Oct 11 13:15:37 2003  Laurent Monin <zas@norz.org>:

	* src/: cookies/cookies.c, protocol/uri.c, protocol/uri.h:

	end_with_known_tld() was introduced, to reduce code redundancy.  

Sat Oct 11 12:30:11 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Some typos in comment were fixed.  

Sat Oct 11 10:49:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.h, sched/download.c:

	Fix #including of terminal/screen.h: renderer.h is remnants from the
	summer cleanup so removed, download.h needs beep_terminal().  

Sat Oct 11 05:39:45 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/msgbox.c:

	Added comment.  

Sat Oct 11 05:35:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Oct 10 20:32:27 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Also show a message if the search hits the top.  

Fri Oct 10 19:55:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug where '^.' matches every character, not only the first in
	a line.  

Fri Oct 10 19:49:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Sync is_in_range_regex to get_searched_regex.  

Thu Oct  9 16:12:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* AUTHORS:

	Cristiano Guadagnino and criguada@libero.it are the same physical
	entity.  

Thu Oct  9 15:49:17 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes in order to please the Accademia della
	Crusca.  

Thu Oct  9 12:27:12 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated, unfuzzied some older bits. Have to keep
	some jump in front of Jonas.  

Thu Oct  9 10:36:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Add comments.  

Thu Oct  9 10:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation micro update.  

Thu Oct  9 10:09:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Thu Oct  9 09:55:02 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update, 77.41% done 

Thu Oct  9 09:49:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, html/parser.c:

	Add "meta" link display option to struct document_options so
	changing it will automagically rerender the page.  

Thu Oct  9 09:41:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct  9 09:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Reverse links are now printed (reported by Peter Gervai), html link
	display format was improved.  

Thu Oct  9 09:09:59 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Do not call trim_chars() if string has zero length, it prevents
	segfault reported by Stephane Chazelas, when calling add_bookmark()
	with a read-only empty string in do_add_folder().  

Thu Oct  9 05:57:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/msgbox.c:

	Deinlining msg_text_do. With inline elinks segfaults on Cygwin.  

Thu Oct  9 05:54:39 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/: os_dep.h, win32.c:

	When Cygwin is treated as UNIX cursor is visible. Before it wasn't.  

Thu Oct  9 05:51:21 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Enabled 256 colors.  

Wed Oct  8 21:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Don't send Cache-Control: reload but Cache-Control: no-cache for
	NC_RELOAD, the Radim's request contained a mistake.  

Wed Oct  8 17:06:47 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 17:01:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove dot from confdir caption.  

Wed Oct  8 15:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/stub.c:

	Fix elinks_memmove(), cases where n == 0 or src == dst were not
	handled correctly. May be reported by Stephane CHAZELAS ;) 

Wed Oct  8 14:51:49 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 13:30:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/tools/help2doc:

	Minor simplification needed to make the script run on FreeBSD.  

Wed Oct  8 13:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Updated to reflect the current state of options.  

Wed Oct  8 13:07:30 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Oct  8 12:59:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup and optimization of last patch, now truncated url ends with
	three dots.  

Wed Oct  8 12:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Truncate very long urls in download progress dialog, it prevents
	progress info to be hidden in such a case.  

Wed Oct  8 12:26:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make ui.startup_goto_dialog by default enabled. This is probably
	much easier for the newbies.  

Wed Oct  8 11:08:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Add header .. fix typo .. add note.  

Wed Oct  8 10:45:31 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	More ideas.  

Wed Oct  8 07:49:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/hierbox.c:

	Select the parent item, if there is one, when '[' is pressed on a
	leaf item or collapsed folder in a listbox.  
	
	Warning: Excessive indentation and roundabout code. It took me ages 
	to figure how to select an arbitrary listbox item; we need a better
	way.  

Tue Oct  7 23:24:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some comments about configuration and tidyup of the example.  

Tue Oct  7 22:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Added vim: textwidth modeliner .. Lots of reformatting .. Added
	comment about availability .. A few type/grammar fixes.  

Tue Oct  7 22:28:46 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	Some ideas (as is) that may be bad ;).  

Tue Oct  7 22:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A bit hackish fix so that the "Search hit bottom" msg_box is not
	shown when the search string is not found.  

Tue Oct  7 20:42:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Some rant about the state of the implementation (AFAIK, that is;
	please write up on that) and especially the expected availability
	(my opinion on that).  

Tue Oct  7 20:30:47 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated vinnui contact email addy.  

Tue Oct  7 20:21:03 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Typo/grammar fixes.  

Tue Oct  7 20:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Tiny whitespace fix.  

Tue Oct  7 18:56:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: color-model.txt, configure.txt:

	Add CVS Id tag and TODOs.  

Tue Oct  7 18:51:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some thoughts/excerpts/links about color models 

Tue Oct  7 17:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	s/links-current/elinks-current/ 

Tue Oct  7 16:49:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Allocate 9 widgets .. fixes spurious segfaults I was having.  

Tue Oct  7 14:54:58 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Tue Oct  7 12:04:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Show a 'Search hit bottom, continuing at top.' notice to the user
	when the search wraps to the start of the document.  

Tue Oct  7 11:59:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Fixed case insensitivity reversed after Jonas' cleanups.  

Tue Oct  7 09:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Fix two potential memleaks, regfree() should be called before
	return. Code preparation to handle regexp errors messages, but we
	need to pass term, or to display messages in calling functions.  

Tue Oct  7 08:43:26 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Mon Oct  6 23:35:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Oops .. commiting late and uncompiled code is bad.  

Mon Oct  6 23:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Cleanup.  

Mon Oct  6 21:52:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Add case sensitivity radiogroup to the search dialog.  

Mon Oct  6 21:36:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed sorting error (folders after regular options) introduced few
	revs ago by me.  

Mon Oct  6 21:35:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, viewer/text/search.c:

	Introduced document.browse.search.case, controlling case sensitivity
	of the searches (by default off, mimicking the current behaviour).
	Hold me back while the damage done on the searching code is actually
	reversible.  

Mon Oct  6 20:58:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Remove some cruft left from the removal of view_state.view 
	(src/sched/session.c:1.168->1.169).  

Mon Oct  6 20:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	KEEP OPTIONS IN ALPHABETICAL ORDER. ;-) 

Mon Oct  6 19:38:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Wishful dreams of optimization of the string searches.  

Mon Oct  6 19:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Try to be more consistent in enumeration lists in the description -
	always use /^\d (is|means|for)/. Inspired by fabio.  

Mon Oct  6 18:49:41 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/options.c, src/dialogs/info.c, src/sched/session.c:

	s/url/URL/ and resynced .pos.  

Mon Oct  6 18:05:03 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Mon Oct  6 00:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	globhist/dialogs.c, protocol/protocol.c, protocol/user.c,
	sched/download.c, viewer/text/form.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Always use OK label for message boxes with only one choice. Cancel
	is not appropriated since no action is cancelled by pressing the
	button, a better one can be Close, but most dialogs are using OK
	already. It makes UI more coherent.  

Sun Oct  5 23:19:27 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sun Oct  5 22:42:08 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Error dialog button is now OK instead of Cancel, it makes more sense
	and is a more common label for this kind of box.  

Sun Oct  5 21:33:33 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix crash which showed then pressing 'n' after the searching pattern
	has cleared.  

Sun Oct  5 20:47:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	Compress the search type selector to one line.  

Sun Oct  5 20:18:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Only display codepage info if @frame is not NULL. Catched by Miciah.  

Sun Oct  5 20:13:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, viewer/text/search.c, viewer/text/search.h:

	Add search history file support.  

Sun Oct  5 20:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Added TODO about checkboxes on one line.  

Sun Oct  5 20:03:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	load_input_history(): Rename fp -> file, url -> line.  

Sun Oct  5 19:55:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: checkbox.c, checkbox.h:

	Don't export dlg_format_checkbox().  

Sun Oct  5 19:55:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c:

	Move input history file loading and saving.  

Sun Oct  5 19:53:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Dirty stuff coming. Let the user choose search type (normal, regex,
	...) in the search dialog. Unfortunately I had to clone
	input_field() & co in order to do this :-(.  

Sun Oct  5 19:44:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/urlhist.c:

	Split url history load and save functions into a generic part and
	...  

Sun Oct  5 19:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Reindent loop innards in select method.  

Sun Oct  5 18:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	assertm() without message? Converted to assert().  

Sun Oct  5 16:36:44 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug, where a regex matches string of length 0 e.g. '.*'.  

Sun Oct  5 16:11:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Restrict regex so that '.' doesn't match a newline.  

Sun Oct  5 16:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Sun Oct  5 15:49:26 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	kuser is random hacker and implemented regex searches.  

Sun Oct  5 15:48:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Make it possible to search empty string - it just cancels the
	previous search, effectively unhighlighting it.  

Sun Oct  5 15:40:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Include <sys/types.h> before <regex.h> to make off_t defined on
	FreeBSD.  

Sun Oct  5 15:09:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Removed nonsensical inlinization of display_field_(_pass)().  

Sun Oct  5 14:07:10 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, SITES:

	Update SITES - weed out out-of-date URIs etc. Patch by Frédéric L.
	W. Meunier <0@pervalidus.tk>.  

Sun Oct  5 14:05:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, sched/session.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Remove view_state.view, it is useless now - nothing uses it anymore
	(by mikulas, from 0.99pre9).  

Sun Oct  5 13:58:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 3: look_for_link. Splitting complete.  

Sun Oct  5 13:55:30 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 2: look_for_tag.  

Sun Oct  5 13:37:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 1: look_for_map.  

Sun Oct  5 13:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Update URIs ... no need to mention how to request features or report
	bugs twice.  

Sun Oct  5 13:16:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Commented out some strange frameset test in request_frame() (by
	mikulas, from 0.99pre9).  

Sun Oct  5 12:54:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Insert space between codepage string and notice in parentheses.  

Sun Oct  5 12:54:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	In current_frame(), take @fd from ses->screen, not
	cur_loc(ses)->vs.view (by mikulas; from 0.99pre9).  

Sun Oct  5 12:48:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use @frame instead of @location->vs.view (by mikulas, from
	0.99pre9).  

Sun Oct  5 12:40:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed some ancient linksherited commented out stuff from
	request_frame(). Even Mikulas removed it in 0.99pre9 ;-).  

Sun Oct  5 12:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/os_depx.h, terminal/kbd.c:

	Workaround broken cfmakeraw() on AIX (by mikulas, from 0.99pre9).  

Sun Oct  5 11:34:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	DEBUG_CACHE cleanups - @f -> @frag, @e -> @entry, @c -> @comment.  

Sun Oct  5 11:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	Macroize dump_frag*(), merge dump_all_frag() and dump_frags(),
	change fprintf()s to debug()s. Hope zas will kill me fast and won't
	let me suffer.  

Sun Oct  5 05:26:53 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Removed ncurses-devel from BuildRequires 

Sun Oct  5 04:44:38 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Spelling fixes.  

Sat Oct  4 23:16:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	The manpages has been moved to the man/ dir already.  

Sat Oct  4 22:31:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug with regex searching.  

Sat Oct  4 22:21:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/search.c,
	viewer/text/search.h:

	Moved search dialog functions from dialogs/menu.* to
	viewer/text/search.*.  

Sat Oct  4 22:19:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/urlhist.h:

	Make config/urlhist.h standalone - it depends on bfu/inphist.h so
	include it inside.  

Sat Oct  4 21:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c:

	Make usage of tabindex optional (document.browse.links.use_tabindex)
	.. on by default like the current behaviour.  

Sat Oct  4 21:40:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, viewer/text/search.c:

	Add extended regular expressions. And move a wrong #ifdef/#endif.  

Sat Oct  4 21:19:39 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Change the comment of the regex option if disabled.  

Sat Oct  4 21:15:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Make regex searching depend on HAVE_REGEX_H.  

Sat Oct  4 21:03:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* acconfig.h, configure.in:

	Add test for regex.h and regex_t to configure.  

Sat Oct  4 20:56:04 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/README:

	Spelling/grammar fixes. Huh.  

Sat Oct  4 20:50:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Corrected scripting/ note.  

Sat Oct  4 20:43:02 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added regex searches.  

Sat Oct  4 20:42:40 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added 256 colors support.  

Sat Oct  4 20:33:02 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @get_searched_regex and use it. Regex searching is useable ;) 

Sat Oct  4 20:24:54 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @is_in_range_regex and use.  

Sat Oct  4 20:19:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Add options for regular expressions searching.  

Sat Oct  4 20:03:11 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@get_searched_plain in preparation of regex searching. Also removing
	some unneeded variables.  

Sat Oct  4 19:53:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@is_in_range_plain in preparation of regex searching.  

Sat Oct  4 18:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Add TODO about using color_flags instead of color_type.  

Sat Oct  4 18:26:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a off by one error, that prevented the last character to match.  

Sat Oct  4 18:08:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, viewer/dump/dump.c:

	Introduce COLOR_MODE_DUMP so dump_pos does not need to be exported.  

Sat Oct  4 14:01:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Trivial whitespace and comment cleanups.  

Sat Oct  4 14:00:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Use int_(lower|upper)_bound.  

Sat Oct  4 13:25:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Trash last patch and provide proper fix of was_li usage to handle
	<li><li> correctly.  

Sat Oct  4 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use was_li again but put the control in html_li(). <li><li> is still
	broken but any following <li> will be rendered correctly.  

Sat Oct  4 12:46:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Tidyup.  

Sat Oct  4 12:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Only do table cell ``offset´´ fix up in 256 color builds. It is a
	bad hack.  

Sat Oct  4 11:37:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Send Pragma: reload if cache_mode is >= NC_RELOAD. Idea by Radim
	Kolar <hsn@cybermail.net>.  

Sat Oct  4 08:59:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	home can be NULL.  

Sat Oct  4 01:58:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	box_sel_move(): Use local box_context variable instead of allocating
	one.  

Sat Oct  4 01:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/options.c:

	Highlight marked listbox items in addition to putting asterisks next
	to them. Fixes bug 137.  

Fri Oct  3 18:31:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	``Cache'' the color type and mode so they can be used as fallback
	when part->document is NULL. Fixes some ugly stains on google and
	freshmeat.  

Fri Oct  3 18:28:01 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call to gettext into test_confdir and use N_ to mark the
	messages instead. inspired by fonseca ;-) 

Fri Oct  3 17:47:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: lowlevel/home.c, config/options.c:

	If -confdir option or ELINKS_CONFDIR begin with a dir_sep treat them
	as absolute paths.  

Fri Oct  3 17:36:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, lowlevel/home.c:

	Add commandline option '-confdir'.  

Fri Oct  3 17:12:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove no longer needed envconfdir.  

Fri Oct  3 17:10:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Test if path is valid.  

Fri Oct  3 17:06:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Use a 'else' and remove goto.  

Fri Oct  3 17:03:32 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add error_message to test_confdir and show it on failure.  
	
	Also add a missing NULL to straconcat.  

Fri Oct  3 16:45:26 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move building of the confdir into test_confdir.  

Fri Oct  3 16:28:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 16:25:41 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move one strip_trailing_dir_sep to test_confdir.  

Fri Oct  3 16:18:23 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	elinks_home should be home_elinks in this call.  

Fri Oct  3 16:15:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change the behaviour of ELINKS_CONFDIR, so that "/elinks" is not
	appended and elinks will try to create the dir specified by
	ELINKS_CONFDIR.  

Fri Oct  3 15:57:37 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 15:44:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove mem_free(home) calls and use 'goto end;'.  

Fri Oct  3 15:32:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call elinks_dirname(path_to_exe) to initialization of home.  

Fri Oct  3 15:17:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add strip_trailing_dir_sep(unsigned char *path) and use it.  

Fri Oct  3 13:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	The change hooks should never initialize the map .. we do that only
	when needed.  

Fri Oct  3 12:50:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Only initialize the mimetypes map when requested for a MIME type
	mapping.  

Fri Oct  3 12:35:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	init_mimetypes(): Split out map initialization to
	init_mimetypes_map().  

Fri Oct  3 12:26:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Only initialize the map when a user actually requests a mailcap mime
	handler. This should reduce the startup time.  

Fri Oct  3 12:05:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Split map initialization into init_mailcap_map().  

Fri Oct  3 11:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Use mem_calloc() when allocating the mime_handler.  

Fri Oct  3 11:51:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	get_mime_handler_mailcap(): Split out the mailcap_hash lookup to
	get_mailcap_entry().  

Fri Oct  3 11:44:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Test if mailcap is enabled each time it is called.  

Fri Oct  3 11:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Whitespace fix.  

Fri Oct  3 11:25:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Improve comments.  

Thu Oct  2 23:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix cleanup.  

Thu Oct  2 23:51:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Minor cleanup and macrofy color adding.  

Thu Oct  2 23:36:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char_color(): Introduced as a fast and specialized alternative
	to add_format_to_string(). It could maybe even be considered for use
	by 16 color mode.  

Thu Oct  2 23:33:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix yet another one of my off by oners. :( 

Thu Oct  2 22:51:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Expand the comment with info from discussion on #elinks.  

Thu Oct  2 22:40:56 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Added comment.  

Thu Oct  2 22:25:58 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Commented out LI related stuff. Fixed bug 208.  

Thu Oct  2 22:08:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Spec polished.  

Thu Oct  2 21:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Provide a color_mode_info fallback when 256 color are not compiled
	in.  

Thu Oct  2 21:28:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Make COLOR_MODE_256 visible even when 256 color support is not
	enabled. As fabiob says never trust the users.  

Thu Oct  2 20:49:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/kbdbind.c:

	Remove unneeded header.  

Thu Oct  2 20:13:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of the char data.  

Thu Oct  2 17:28:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use white not purple as fallback.  

Thu Oct  2 17:27:37 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Whitespace fix.  

Thu Oct  2 17:21:01 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Oct  2 17:16:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix comment.  

Thu Oct  2 17:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h, screen.c:

	Update screen_char->color[] to have 2 chars in a 256 color build.  
	Add add_char256() and 256 color mode loop to redraw_screen().  

Thu Oct  2 17:12:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make it possible to choose 256 color mode.  

Thu Oct  2 17:10:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add 256 color mode info and setting.  

Thu Oct  2 17:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, acconfig.h:

	Add configuration of 256 color support.  

Thu Oct  2 16:42:14 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Simplify loop.  

Thu Oct  2 16:37:06 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/util/conv.h:

	Typo fix in comment.  

Thu Oct  2 16:25:54 2003  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Free u if needed at function end only, reducing code redundancy,
	variables declarations were moved near usage, useless return were
	removed.  

Thu Oct  2 16:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move add_cursor_move_to_string().  

Thu Oct  2 15:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/cache.c, document/html/renderer.c:

	Use whole instead of less significant u.  

Thu Oct  2 15:37:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix off by one error. ;P 

Thu Oct  2 15:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Obsolete commented out code was removed.  

Thu Oct  2 15:18:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elusive/renderer/text/renderer.c, terminal/color.c,
	terminal/draw.c, terminal/draw.h, terminal/screen.c:

	Make screen_char->color an array. ELusives unmaintained code is a
	PITA.  

Thu Oct  2 15:02:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	No need for add_chars16() so removed.  

Thu Oct  2 14:58:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Macrofy add_chars() .. Although it is a bit ugly this way we can
	reduce code dublication I hope.  

Thu Oct  2 14:36:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Functions were provided to ease cache debugging (disabled by
	default).  

Thu Oct  2 14:05:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Use trigger_event_name().  

Thu Oct  2 14:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	enlarge() is now an inlined function instead of a macro.  

Thu Oct  2 13:38:28 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: main.c, dialogs/menu.c:

	Use trigger_event_name where appropriate.  

Thu Oct  2 13:35:18 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/: event.c, event.h:

	Add trigger_event_name(unsigned char *name, ...) 

Thu Oct  2 13:24:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* doc/events.txt:

	Add description of dialog-lua-console and free-history to
	doc/events.txt 

Thu Oct  2 12:54:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: viewer/text/view.c, scripting/lua/core.c,
	scripting/lua/core.h, scripting/lua/hooks.c:

	Use event system for dialog_lua_console.  

Thu Oct  2 12:47:15 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: dialogs/menu.c, scripting/lua/core.c, scripting/lua/core.h,
	scripting/lua/hooks.c:

	Use event system for free_lua_console_history.  

Thu Oct  2 12:29:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/core.c:

	Compile fix because of wrong pointer type.  

Thu Oct  2 12:16:04 2003  Karsten Schölzel <kuser@gmx.de>:

	* contrib/lua/bm.lua, contrib/lua/config.lua,
	contrib/lua/hooks.lua.in, contrib/lua/remote.lua,
	src/scripting/lua/core.c:

	Make elinks_home available for Lua and use it.  

Thu Oct  2 11:09:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/: core.c, core.h:

	Move run_lua_func near l_bind_key and make it static.  

Thu Oct  2 10:46:22 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/kbdbind.c, config/kbdbind.h, scripting/lua/core.c,
	scripting/lua/core.h, viewer/text/view.c:

	Use event calls to provide keybinding functionality for scripting
	backends.  

Thu Oct  2 08:43:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix bold attribute detection by using ch->color again.  

Thu Oct  2 05:53:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	- Polish translation update 

Thu Oct  2 00:07:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Compile fix. Hmm time to sign off ;) 

Thu Oct  2 00:06:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Wrap color comparison and copying in macros.  

Wed Oct  1 23:48:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Wed Oct  1 23:24:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup and a small "experimental" simplification.  

Wed Oct  1 23:12:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/renderer.c,
	terminal/color.c, terminal/color.h, terminal/screen.c:

	Move the underline color enhancement to set_term_color() and out of
	the critical screen drawing loop so it can be simplified. This is
	done using a new COLOR_ENHANCE type. Underlining is now part of the
	document options.  

Wed Oct  1 22:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Alphabetize #includes.  

Wed Oct  1 22:18:35 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Bug 86 is now fixed, nothing to do ifno fragment in cache entry.  

Wed Oct  1 20:02:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix segfault when trying to /. openoffice.org's 1.1 feature page.  

Wed Oct  1 18:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed alignment of a condition.  

Wed Oct  1 17:39:57 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Title and url are now sanitized before adding or modifying a
	bookmark, starting/ending spaces are removed, and bad chars are
	repplaced with spaces in title, and causes error if in url.  

Wed Oct  1 17:16:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, util/conv.h, util/string.c, util/string.h:

	trim_chars() was moved from string.c to conv.h, since this function
	modifies strings.  

Wed Oct  1 16:38:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/hooks.c:

	Use evhook_use_params() to silence compiler warnings, uncommented
	fetching of @ses from @va even if unused.  

Wed Oct  1 16:37:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Introduced evhook_use_params(), universal usage enforcer of all
	evhook parameters ;-). Idea by kuser and jonas.  

Wed Oct  1 15:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix my reckless programming in previous patch. We need to va_arg()
	ses but still silence any compiler warnings.  

Wed Oct  1 15:09:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/Makefile.am:

	Add palette.inc to list of files.  

Wed Oct  1 15:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/configure.txt:

	Fix minor typos and add info about string magic.  

Wed Oct  1 14:52:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Wrap unused event parameters in #if 0 #endif 

Wed Oct  1 14:52:44 2003  Laurent Monin <zas@norz.org>:

	* doc/configure.txt:

	Descriptions of debug and fastmem configure options were added (idea
	by Jonas). Feel free to complete and fix.  

Wed Oct  1 14:19:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Fix add_format_to_string.  There must be `width + 1' instead of
	`newlength´ as argument to vsnprintf because the size attribute of
	vsnprintf includes the trailing null, but the return value doesn't.  
	Patch by Karsten Schölzel.  

Wed Oct  1 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.h, guile/hooks.c, lua/hooks.c:

	Introduce NULL_SCRIPTING_HOOK ..  

Wed Oct  1 10:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.c,
	scripting/scripting.h, scripting/guile/hooks.c,
	scripting/lua/hooks.c:

	Add a data pointer to event_handler and scripting_hook, which can be
	set through register_event_hook to save a hook specific data
	pointer. It is especially useful for binding keys from scripting
	backends, e.g. if you register one callback to two different events,
	you can distinguish both events with the data pointer, if you set
	them to different values.  
	
	This patch and the 3 previous by Karsten Schölzel.  

Wed Oct  1 10:26:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Move libscripting before scripting backends.  

Wed Oct  1 10:25:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix wrong variable name.  

Wed Oct  1 10:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Return enum evnhook_tatus.  

Wed Oct  1 00:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Hack of the day: Repaint the link line background when
	use_document_colours = 2. Might need some fine tuning.  

Wed Oct  1 00:35:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix blackspace.  

Tue Sep 30 23:49:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Add Guile scripting and HTML meta refresh ..  

Tue Sep 30 23:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	Missing update of pld-linux.org for links rpms, drop
	elinks.pld.org.pl and point to the community page for mailinglist
	info.  

Tue Sep 30 23:18:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Add toggle-document-colors ...  

Tue Sep 30 23:15:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/completion.tcsh:

	Painfully out of date so better remove it.  

Tue Sep 30 16:31:51 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po were resynced.  

Tue Sep 30 16:22:06 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fix (missing \n).  

Tue Sep 30 11:49:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add missing #include and comments.  

Tue Sep 30 11:47:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify things to how they was before I unrolled the code array.  

Tue Sep 30 08:43:23 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Fix brackets escaping (with-gnutls and with-openssl configure
	options).  

Tue Sep 30 00:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Checkbox the color mode choosing.  

Tue Sep 30 00:17:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/parser.c,
	document/html/renderer.c, viewer/dump/dump.c, viewer/text/link.c:

	struct document_options: Rename @col to @color_mode.  

Tue Sep 30 00:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes (part two).  

Mon Sep 29 23:51:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes + fix #include.  

Mon Sep 29 23:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Store the color mode in the screen drivers.  

Mon Sep 29 23:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Make the terminal._template_.colors option hold the color mode.  

Mon Sep 29 23:36:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Cleanup.  

Mon Sep 29 23:32:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Factor out the looping into add_chars16() + rename
	print_char() to add_char16().  

Mon Sep 29 23:09:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.h:

	Fix comment.  

Mon Sep 29 23:07:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Introducing struct color_mode_info and use the color mode to control
	the blending.  Finally rename find_nearest_color() to get_color().  

Mon Sep 29 22:28:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add 256 color mode to enum and move out 16 color mode setting to
	seperate function.  

Mon Sep 29 22:13:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	set_term_color(): Take color mode as an argument.  

Mon Sep 29 21:15:45 2003  Laurent Monin <zas@norz.org>:

	* src/util/version.c:

	get_dyn_full_version() was fixed. In some cases, features line ended
	with a comma.  

Mon Sep 29 20:45:08 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/ssl.c:

	Gnutls needs extra options to talk to https://login.yahoo.com, this
	patch should fix it. Patch by Zardoz.  

Mon Sep 29 17:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops @name is shadows by my wrong merging of last patch .. not good
	so fix it.  

Mon Sep 29 16:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Update the event hash if @events got relocated. Patch by kuser.  

Mon Sep 29 14:18:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Moved PUTC declaration into the llop.  

Mon Sep 29 14:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	@e -> @translit in convert_string().  

Sun Sep 28 23:44:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Minor optimization to only do two multiplications.  

Sun Sep 28 23:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Restyle "if(" code snippet. Shame on me.  

Sun Sep 28 23:31:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: error.c, error.h:

	Prevent cancellation of one assertion by another, first assertion
	failure triggers first if_assert_failed met, which reset
	assert_failed. This behavior makes legal assert(a); assert(b);
	if_assert_failed return;.  

Sun Sep 28 22:55:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Simplification of end_load().  

Sun Sep 28 22:38:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup in do_move().  

Sun Sep 28 22:29:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	select_menu_item(): Use menu_func. ;) 

Sun Sep 28 22:17:29 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Minor optimization: url is absolutely not null here. Patch by
	Witold.  

Sun Sep 28 22:12:38 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Open tab bug was fixed again ;). Reported and reintroduced by Jonas.  

Sun Sep 28 21:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix assertion failure reported by darix when downloading md5summer
	from http://fileforum.betanews.com.  

Sun Sep 28 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use granular allocation for dynamic menues.  

Sun Sep 28 19:55:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	"Eew" someone cried. Under normal circumstances the mere sight of
	such ill formed creatures would make any sane person want to give it
	all up, turn around and head back. But there was no way back. No
	sane way out of this one. Only forward one step at a time.  

Sun Sep 28 18:38:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Simplify 'No link selected' testing to see if the menu item list is
	empty 

Sun Sep 28 18:23:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	A missing obvious user of menu_func.  

Sun Sep 28 18:22:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, contrib/elinks.spec.in:

	RPM spec update by darix.  

Sun Sep 28 16:10:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Seems we can keep the goodies and eat it too (or how was that saying
	;) so clean away temporary variables since menu->data is passed (so
	no segfaulting like a few patches ago).  

Sun Sep 28 16:04:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Remove dublicate code by making select_(main)menu() wrap
	select_menu_item().  

Sun Sep 28 15:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Further simplify dejavu code in select_(main)menu().  

Sun Sep 28 15:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Reordering of declarations.  

Sun Sep 28 15:33:00 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use SET_MENU_ITEM() in add_to_menu().  

Sun Sep 28 15:16:39 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Got rid of a useless #else.  

Sun Sep 28 15:12:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Declarations were moved near variable use.  

Sun Sep 28 15:05:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup (logical operators at start of lines).  

Sun Sep 28 14:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	x?1:0 things were rewritten !!x.  

Sun Sep 28 14:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use SET_MENU_ITEM() when setting up select menus.  

Sun Sep 28 13:43:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/html/parser.c, viewer/text/link.c,
	viewer/text/view.c:

	Replace MENU_FUNC* with a typedef. Should it be made so the cast is
	(menu_func *)? 

Sun Sep 28 13:07:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Use INIT_MENU_ITEM() when defining NULL_MENU_ITEM 

Sun Sep 28 13:02:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use MENU_HEAD macro.  

Sun Sep 28 13:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup patch was reverted. It causes a weird segfault when opening
	new tab. Reported by Jonas.  

Sun Sep 28 12:09:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Small update by Witold.  

Sun Sep 28 00:13:16 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/bfu/dialog.c, src/bfu/listbox.c,
	src/bfu/menu.c, src/osdep/os_dep.c, src/sched/session.c,
	src/terminal/event.c, src/terminal/kbd.c, src/util/version.c,
	src/viewer/text/view.c:

	A configure option --disable-mouse was added. If used, it undefines
	USE_MOUSE which control compilation of mouse-related code. A bunch
	of #ifdef/#endif was spread among the code for that.  

Sat Sep 27 22:23:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	As the guile and lua backends no longer conflict with global
	function names, it should be possible for the user to select both
	backends at the same time. This patch removes logic from configure
	which blocked this.  --Karsten Schölzel 

Sat Sep 27 16:10:00 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Check what $RPM_BUILD_ROOT actually is before rm -rf'ing it.
	Suggested by darix. I wonder what darix actually experienced before
	suggesting this ;-).  

Sat Sep 27 15:26:31 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	(void *) 1 thing seems useless, i replaced it with NULL, please let
	me know if it has any impact.  

Sat Sep 27 15:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Tidyup.  

Sat Sep 27 15:17:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Tidyup.  

Sat Sep 27 14:03:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Tidyup.  

Sat Sep 27 13:56:19 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Old inactive code was removed. Cache info menu item is now displayed
	only in debug mode (as it needs more work).  

Sat Sep 27 13:47:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, viewer/text/view.c, viewer/text/vs.c:

	Wrap testing of whether a document has frames in
	document_has_frames() macro.  

Sat Sep 27 13:16:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Generalizing offsetof() in elinks.h was a bad idea - reverted. Mixed
	in is removal of ISSLASH() macro in favor of our own dir_sep().  

Sat Sep 27 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Move offsetof() macro definition to elinks.h 

Sat Sep 27 12:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove a debug() call that should not have been part of last patch.  

Sat Sep 27 12:01:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/html/renderer.c,
	viewer/dump/dump.c:

	init_document_options(): Clear the struct. This hopefully fixes the
	mess I created in the last couple of patches.  

Sat Sep 27 11:40:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, viewer/dump/dump.c:

	Rename mk_document_options() to init_document_options() and move
	more code shared by dump and text viewer to it. Doing memset() (in
	the light of zeroing out padding bytes, sorry I overlooked this) is
	on the TODO list but this causes problems that has to be fixed
	first.  

Sat Sep 27 11:27:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sat Sep 27 00:32:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Make boolean fields more visible and drop the bogus blame of @xw and
	@yw.  

Fri Sep 26 23:06:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Rearrange members of struct document_options so compare_opt() can be
	divided into a part compared using memcmp() and a part (from
	@framename) that need special or no comparing. This is very
	experimental but padding bytes should not be a problem since
	document_options are allocated via document allocation using
	mem_calloc()! 

Fri Sep 26 22:12:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	English style issues fixed in s-i-t-l dialog :-).  

Fri Sep 26 21:42:14 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6.CVS 

Fri Sep 26 21:39:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6 

Fri Sep 26 21:36:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fix http://lists.pld-linux.org/ - Host: header sending was broken if
	URL contained : and IPv6 support was compiled in. Patch by Jakub
	Bogusz and me.  

Fri Sep 26 21:18:05 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added nest elinks pool RPM binaries link (more up-to-date), as
	suggested by witekfl.  

Fri Sep 26 21:16:04 2003  Petr Baudis <pasky@ucw.cz>:

	* po/uk.po:

	Ukrainian translation update, patch by Dmitry.  

Fri Sep 26 21:13:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files resynced, Polish translation update (by witekfl).  

Fri Sep 26 21:07:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	Add generalization TODO item and reformat.  

Fri Sep 26 21:05:02 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Specify further in which cases should the macro initializers be used
	;-).  

Fri Sep 26 20:58:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Reverted zas' introduction of INIT_STON() and relatives. It is IMHO
	unnecessary complication and overhead for such a simple and fairly
	localized structure as strtonum is.  

Fri Sep 26 20:39:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Always propagate the event + removed useless increasing of length in
	call to memacpy().  

Fri Sep 26 19:59:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Output asterisks instead of ¤ in case of unknown unicode values.
	That character is not ASCII nor transliterated to proper terminal
	codepage.  

Fri Sep 26 19:57:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Always propagate the event.  

Fri Sep 26 19:05:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Some preachment about EHS_LAST and how shouldn't you use it.  

Fri Sep 26 18:32:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Fixed namespace pollution. You guys will never learn, will you? 

Fri Sep 26 18:28:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/ttime.h:

	Do not include config.h in a .h file! What was I *smoking*?? This
	fixes compilation w/ --enable-own-libc. You wouldn't guess, would
	you? ;-) 

Fri Sep 26 17:44:42 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about wrapping hard struct initializations was added.  

Fri Sep 26 17:35:44 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, config/kbdbind.c,
	document/html/parser.c, document/html/parser.h:

	Various hard initializations to macros conversion.  

Fri Sep 26 16:56:14 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	use *_MENU_ITEM macros.  

Fri Sep 26 15:50:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Strange english fix.  

Fri Sep 26 15:49:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Grammar fix.  

Fri Sep 26 14:00:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	Add TODO to EXTRA_DIST.  

Fri Sep 26 12:56:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Be a little smarter and pre allocate the last menu item by calling
	mem_align_alloc() with 'size + 2'.  

Fri Sep 26 12:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Print ¤¤¤¤¤ instead of &#24505;&#24213;&#20837;&#38272;. Unicode
	entities values are now handled up to 0xFFFFFFFF.  

Fri Sep 26 12:36:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Remove temporary workaround for tab completion bug fixed in last
	patch.  

Fri Sep 26 12:33:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Fix ancient bug by reallocationg items before the last memset(). Zas
	discovered this yesterday. It was exposed by the move to using
	mem_align_alloc() with more than 256 items in gotohist.  

Thu Sep 25 23:35:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Bug found...  

Thu Sep 25 21:47:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add some probably useless MRU mechanism and fix some whitespasms.  

Thu Sep 25 21:08:17 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Use intermediate variables to clarify code.  

Thu Sep 25 20:52:31 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Use widget and widget_data intermediate variables to clarify code.  

Thu Sep 25 20:13:19 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/tables.c, globhist/dialogs.c:

	Ending spaces fix.  

Thu Sep 25 19:54:39 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	struct event -> struct term_event. No more.  

Thu Sep 25 19:50:40 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, form.h, link.c, link.h, textarea.c,
	view.c, view.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:45:49 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: event.c, kbd.c, terminal.c, window.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:44:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Fix get-proxy hook bug from last patch.  

Thu Sep 25 19:37:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, session.c, session.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:32:17 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/timer.c, osdep/os_dep.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:26:56 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:21:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/hierbox.c,
	dialogs/hierbox.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Correctly handle propagation in the get-proxy hook.  

Thu Sep 25 19:17:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inphist.c, listbox.c, menu.c:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 19:11:33 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/event.h, terminal/terminal.h, terminal/window.h,
	bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/widget.h:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 18:53:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Cleanup and make the get-proxy handler propagate the event when an
	error occurs.  

Thu Sep 25 18:44:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	For now only one comment by pasky but please feed more ideas to this
	file.  

Thu Sep 25 17:08:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	It is guile_scripting_backend instead of lua_scripting_backend! 

Thu Sep 25 16:56:06 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Ooops, forgot some and made an error, fixed.  

Thu Sep 25 16:43:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Make use of enum hotkey_state values instead of hardcoded integer
	values.  

Thu Sep 25 16:42:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Rearrange and reduce the number of variables passed to
	pre-format-html.  

Thu Sep 25 16:39:43 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	*MENU_ITEM macros are now used everywhere in this file.  

Thu Sep 25 16:25:29 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c:

	ignore_hotkey field was renamed hotkey_state and is now an enum.
	Macros were introduced to wrap struct menu item initializations.
	Transition partly done.  

Thu Sep 25 16:08:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Cleanup.  

Thu Sep 25 16:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Some forgotten str_event_code() calls was changed to just return
	EHS_* code.  

Thu Sep 25 16:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Next step in jonas' insane and untested scripting hacks. Minimize
	the number of variables passed to goto-url and follow-url events.  

Thu Sep 25 15:48:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_(goto|follow_url(): Be more strict and propagate the
	event if an error occurs. Only set @new_url if the hook function
	returns smt. valid.  

Thu Sep 25 15:25:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Explicitly use EHS_* and return EHS_NEXT without modifying.  

Thu Sep 25 14:59:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Bring the code back to look and work as the
	original one.  

Thu Sep 25 14:55:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Alphabetize #includes 

Thu Sep 25 14:29:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	Use an enum instead of an int for edit dialog type and remove
	obsolete BM_ in macros.  

Thu Sep 25 14:17:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Improve descriptions.  

Thu Sep 25 01:05:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Really really rename newurl to new_url in goto_url_with_hook().  

Thu Sep 25 00:50:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:46:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Rename variables and change hooks function for goto-url and
	follow-url to act like the original ones.  

Thu Sep 25 00:38:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	A few renames and changes to support the original scripting hook
	interface when handling goto-url and follow-url.  

Thu Sep 25 00:36:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Describe the scripting events in use.  

Tue Sep 23 20:30:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.c, scripting.h, guile/core.c,
	guile/core.h, lua/core.c, lua/core.h:

	Further backend the scripting subsystem by introducing struct
	scripting_backend. Only handles init/done calls and hook management.  

Tue Sep 23 19:25:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	libscripting.a is not a noinst_LTLIBRARIES so s/LT//. ;) 

Tue Sep 23 18:44:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, scripting/scripting.c, scripting/scripting.h:

	Introduce generic scripting setup and teardown functions that just
	call the backends.  

Tue Sep 23 15:03:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/Makefile.am:

	Deltize libscripting.a. *shudder* Sick from you, Jonas! ;-) 

Tue Sep 23 14:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.c:

	Attribute comment to me.  

Tue Sep 23 14:17:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Minor tidyup.  

Tue Sep 23 14:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h:

	Event hook handler is now covered by type event_hook.  

Tue Sep 23 14:03:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h,
	scripting/lua/hooks.c:

	Event hooks return {enum evhook_status}.  

Tue Sep 23 13:53:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Tiny regrouping.  

Tue Sep 23 08:40:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/scripting.c:

	Fix scripting hook registration. Most events don't exist so create
	them.  

Tue Sep 23 08:30:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Make the scripting goto_url_* functions work when no scripting hooks
	are registered.  

Tue Sep 23 07:36:11 2003  Laurent Monin <zas@norz.org>:

	* src/Makefile.am:

	Linking failure due to libscripting introduction was fixed.  

Tue Sep 23 00:47:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/: core.c, hooks.c, hooks.h:

	Use generic hook registration. (define untested-and-uncompiled true) 

Tue Sep 23 00:45:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/: core.c, hooks.c, hooks.h:

	Use generic hook registration.  

Tue Sep 23 00:45:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: Makefile.am, scripting.c, scripting.h:

	Add generic functionality for registering hooks.  

Tue Sep 23 00:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_pre_format_html(): Cleanup. Please test since I am not
	that big a lua extension user.  

Mon Sep 22 23:59:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_get_proxy(): Cleanup.  

Mon Sep 22 23:52:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	script_hook_follow_url(): Cleanup.  goto_url_w(): Always use @newurl
	but test if non NULL.  

Mon Sep 22 23:49:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): More streamlining.  

Mon Sep 22 23:34:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Always use @newurl and test if it is non NULL in
	goto_url_with_hook().  This greatly simplifies the lua
	script_hook_goto_url().  

Mon Sep 22 23:19:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_quit(): Cleanup.  

Mon Sep 22 23:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Oops missed one t.h.i.n.g to keep the flow intact although all these
	"" seems pretty pointless.  

Mon Sep 22 23:02:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Cleanup.  

Mon Sep 22 22:21:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix problem reported by David Gómez where openssl was disabled when
	calling configure with --without-gnutls.  

Mon Sep 22 22:00:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Note who to blame for the event system.  

Mon Sep 22 21:54:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h, main.c, scripting/guile/core.c,
	scripting/guile/core.h, scripting/guile/hooks.c,
	scripting/guile/hooks.h:

	Move guile hooks to the event system. --Karsten Schölzel 

Mon Sep 22 21:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, protocol/proxy.c:

	Use the event system to call the scripting hooks, calling
	set_event_id() to get rid of unnecessary event id lookups. --Karsten
	Schölzel 

Mon Sep 22 21:46:19 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	One byte memleak was fixed. Cleanup and optimization of
	shrink_dns_cache().  

Mon Sep 22 19:45:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.h:

	Safer macro definition for set_event_id().  

Mon Sep 22 18:41:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Remove useless #includes. Patch by kuser.  

Mon Sep 22 18:37:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.h:

	Introduces set_event_id(event, name) macro. --Karsten Schölzel 

Mon Sep 22 16:35:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Call done_event in terminate_all_subsystems as late as possible to
	make the event system usable in cleanup stage. --Karsten Schölzel 

Mon Sep 22 16:23:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add variable declaration needed by the last patch.  

Mon Sep 22 16:21:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Move out the known mime type strings to a structure that can be
	looped.  Use assertion and cleanup so we don't leak.  

Mon Sep 22 15:44:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	new_form(): Use one byte less when allocating the url.  

Mon Sep 22 15:39:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_err_msg(): Minor optimization and allocate one byte less.  

Mon Sep 22 15:31:11 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	One byte memleak was fixed.  

Mon Sep 22 15:25:24 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	More one-byte memleaks fixed. Please review this one carefully ;) 

Mon Sep 22 15:15:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	sizeof(struct frame_desc) bytes memleak was fixed.  

Mon Sep 22 15:10:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	One byte memleak fixed.  

Mon Sep 22 15:08:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Rename free_mimetype_entry() to done_... + allocate
	mimetype_entry->extension with the entry and save a few bytes.  

Mon Sep 22 15:06:49 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	One byte memory leak was fixed.  

Mon Sep 22 14:59:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	We already allocate mailcap_entry->command with the entry. Make it
	'official' and save a few bytes. ;) 

Mon Sep 22 14:59:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inphist.c, inphist.h:

	One byte memory leak was fixed.  

Mon Sep 22 14:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	1 byte is already reserved for cmd_buffer in struct
	ftp_connection_info, so no need to allocate it. I think there is
	some other places with the same minor issue (well, 1 byte memory
	leak per allocation), please help me to fix them.  

Mon Sep 22 14:22:35 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, http/date.c:

	Previous bug was cutnpasted to date.c, fixed. Small month2num()
	wrappers are now inlined.  

Mon Sep 22 14:14:37 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftpparse.c:

	A stupid bug introduced by month2num() patch was fixed. Now ftp
	should work as usual ;).  

Sun Sep 21 14:47:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inphist.c, globhist/dialogs.c,
	osdep/os_dep.c, sched/session.c, terminal/draw.c, terminal/tab.c,
	terminal/window.c, util/base64.c, util/error.c, util/hash.c,
	viewer/text/form.c, viewer/text/view.c:

	Trivial whitespace fixes.  

Sun Sep 21 14:13:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	More whitespace fixes.  

Sun Sep 21 14:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.h:

	Fix whitespace.  

Sun Sep 21 13:01:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	Comment about the need to pass lowercased strings to month2num() was
	added.  

Sun Sep 21 13:00:12 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/date.c, protocol/ftpparse.c, util/conv.c,
	util/conv.h:

	month2num() was introduced, and is now used in protocol/http/date.c
	and protocol/ftpparse.c.  

Sun Sep 21 12:35:25 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was even more optimized.  

Sun Sep 21 12:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month(): got rid of these useless break.  

Sun Sep 21 12:24:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was optimized.  

Sun Sep 21 12:02:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: date.c, date.h:

	char -> unsigned char, my_timegm() now takes a pointer to a struct
	tm as parameter.  

Sun Sep 21 11:24:48 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Cleanup and harmonisation: handle errors at end of functions.  

Sun Sep 21 11:08:11 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	l_current_url() code was simplified.  

Sun Sep 21 10:48:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep 21 00:15:27 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	I've got such associations: c - text/html spec - text/plain 
	
	but elinks recognize .spec as .c and display as html.  This patch
	"repair" it. In addition dot.in.middle.c like names should be
	handled correctly, too.  -- Witold Filipczyk tohu-bohu 
	<witekfl@poczta.gazeta.pl> 

Sun Sep 21 00:12:31 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Cleanup.  

Sat Sep 20 12:05:30 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	Compilation bug under Cygwin was fixed. Patch by Witold.  

Fri Sep 19 22:30:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add dummy shadow.text option. This was causing get_bfu_color() to
	fetch a non existing option. Reported by darix.  

Fri Sep 19 15:41:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	I am in a maze with passages all alike .. and this cut'n'paste error
	is haunting me.  

Fri Sep 19 15:37:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	invalid_event_id(): Test == EVENT_NONE last since last will not be
	used in current code, but it protects against bad thing if
	EVENT_NONE becomes > 0 for some reason as zas pointed out.  

Fri Sep 19 15:33:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops cut'n'paste error in last patch spotted by kuser.  

Fri Sep 19 15:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Rebounding cleanup.  

Fri Sep 19 14:43:43 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.c:

	Short lines were "compressed" a bit, make use of event variable name
	everywhere, make use of register attribute, cleanup,
	invalid_event_id() inlined function was added.  

Fri Sep 19 14:09:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use TERM_STRING() and friends for the underline sequences.  

Fri Sep 19 13:55:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce TERM_STRING() and add_term_string() to simplify the
	frame_seq handling.  

Fri Sep 19 13:48:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	This might be a bit abusive. Use mem_align_alloc() to cleanup link
	point setup.  

Fri Sep 19 13:14:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/Makefile.am, sched/event.c, sched/event.h:

	Shiny new event system by kuser .. spiced up with comments by pasky
	and me.  

Thu Sep 18 19:04:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Removed trailing newlines ;-).  

Thu Sep 18 13:07:11 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h,
	terminal/window.h, viewer/text/view.c:

	Mouse click detection was improved and fixed regarding variable-size
	tabs, get_tab_number_by_xpos() function was added.  

Thu Sep 18 12:33:10 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Distribute remaining spaces among all tabs, and draw last tab
	correctly. Issue reported by Miciah.  

Wed Sep 17 15:43:22 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Ooops, fix for stupid thing in last patch ;).  

Wed Sep 17 15:32:02 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Auth dialog was badly formatted. We now consider sticker text width
	before drawing it.  

Wed Sep 17 01:30:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	convert_string(): Fix potential leak.  

Wed Sep 17 01:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Purge mem_gralloc() and grmask(). IMHO the idea of aligned
	allocation much more straight forward than the ALLOC_GR ``oriented''
	so I hope this is ok.  Move ALLOC_GR and comment the alignment mask.  

Wed Sep 17 01:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Use mem_align_alloc().  

Wed Sep 17 00:02:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Use mem_align_alloc().  

Tue Sep 16 23:57:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	get_searched(): Use mem_align_alloc().  

Tue Sep 16 23:54:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	encode_multipart(): Use mem_align_alloc().  

Tue Sep 16 23:38:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	do_html_select(): Use mem_align_alloc().  

Tue Sep 16 23:33:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	add_chr(): Use mem_align_alloc().  

Tue Sep 16 23:27:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	do_tab_compl(): Use mem_align_alloc(). Never tried it before ..
	great feature! :) 

Tue Sep 16 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Use mem_align_alloc() for bad html mem. management.  

Tue Sep 16 18:25:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_frames(): Simplification.  

Tue Sep 16 18:11:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Add missing assertion handling.  

Tue Sep 16 18:08:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Rename: [HV]_LINE_X() -> [HV]_FRAME_POSITION() ... or should we
	static inline it all? 

Tue Sep 16 18:00:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup [HV]_LINE_X() macros to bug via an assertion instead of via
	the cruel *(unsigned char *)NULL.  

Tue Sep 16 14:58:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: hash.c, hash.h:

	Allocate hash and hash->hash in one time, X31 strhash() was
	optimized by unrolling the loop, some variables are now unsigned int
	instead of int, general cleanup.  

Tue Sep 16 00:04:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Slightly more elegant fix.  

Mon Sep 15 23:24:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix input field off by one bug.  

Mon Sep 15 22:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Minor code diet using memset() instead of for loops.  

Mon Sep 15 22:18:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Since item->l = w, int_bounds(rw, item->l, w) is is useless.  

Mon Sep 15 21:30:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Remove unused macros.  

Mon Sep 15 21:29:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Tidyup.  

Mon Sep 15 21:28:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Blast off xset_hchar() and use xset_hchars() instead. Less is more
	;) Finally abuse that xset_[hv]chars() are specialized for table
	border drawing so there's no need to pass the bgcolor (hint
	par_format.bgcolor) and the attribute.  

Mon Sep 15 21:25:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): Store [HV]_LINE_X() lookups in local variables
	and general cleanup.  

Mon Sep 15 21:23:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_[hv]line(): Cleanup, use BORDER_* enums, add asserts." 

Mon Sep 15 21:14:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Move static variables inside the user functions.  

Mon Sep 15 21:13:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	See? It's all an illusion.  

Mon Sep 15 21:11:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_vline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:11:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_hline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:10:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:08:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Assert @charslen.  

Mon Sep 15 21:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	display_table_frames(): Store table frame pointers in an array and
	allocate space in one snap.  

Mon Sep 15 20:57:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Propagate the _table_ arg all the way down the frame drawing macro
	hell. If you see any variables named 'term' it is an illusion ;) ...
	Hmm apparently some whitespace clashing that makes the patch
	slightly bigger.  

Mon Sep 15 20:50:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use macros to simplify the trivial code and make adding new term
	options easier.  

Mon Sep 15 20:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Bug fix: put_chars() asserts chars != NULL and put_chars_conv() call
	it with chars == NULL. Instead assert that charslen != 0.  

Mon Sep 15 20:45:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewy(): Cleanup (and a compile fix for free).  

Mon Sep 15 20:44:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewx(): Cleanup and variable renaming.  

Mon Sep 15 20:43:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Rename variables.  

Mon Sep 15 20:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	done_link_members(): Added. Free()s the link members.  

Mon Sep 15 20:40:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	set_link(): Cleanup.  

Mon Sep 15 20:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Add macro abstraction for clearing color.  

Mon Sep 15 20:32:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/renderer/text/renderer.c:

	Don't use INIT_SCREEN_CHAR().  

Mon Sep 15 20:30:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Purge INIT_SCREEN_CHAR().  

Mon Sep 15 20:29:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area(): Rewritten to not use INIT_SCREEN_CHAR().  

Mon Sep 15 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_text(): Use last char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:27:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix bad merging.  

Mon Sep 15 20:24:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Allocate an extra link_bg element to work on to avoid
	local variables.  

Mon Sep 15 20:23:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use first char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:22:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Use local variable instead of multiple POS().  

Mon Sep 15 20:19:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Doh! The patch monkey climped the wrong tree. Revert part of last
	patch. :( 

Mon Sep 15 20:17:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	set_hchars(): Abandon usage of INIT_SCREEN_CHAR().  

Mon Sep 15 20:17:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Don't use local variable for initialization but the
	last char.  

Mon Sep 15 20:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Wipeout SLEN().  

Mon Sep 15 16:59:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce a link state type and get_link_state(). It is called
	before doing any link handling (the old way) and takes care of
	free()ing old link variables etc.  This patch fixes
	test/tabindex.html which have been broken for a long time since the
	old code didn't take the #targets into account. Sorry for taking so 
	long to fix this.  

Mon Sep 15 14:23:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	No need to allocate one byte for nul char, l was renamed to loc.  

Mon Sep 15 14:15:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:11:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 14:09:20 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:06:19 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 13:54:01 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Use vs->url_len instead of strlen(vs->url).  

Mon Sep 15 13:40:32 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Field url_len from struct view_state was not used as it should be.
	Fixed.  

Sun Sep 14 03:03:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Add EMACS-style ^A, ^E, ^N, ^P, ^V, and Alt-V and Vi-style ^F and ^B 
	key bindings to listboxes.  

Sun Sep 14 02:15:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, uri.c, uri.h:

	Encode links in file: listings, and decode them when following a
	file: link.  This is slightly slower, uses slightly more memory, and
	required that I reënable the decode_uri_string function, but is more
	correct and robust.  

Sun Sep 14 01:04:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/: dump/dump.c, text/vs.c:

	Only mem_alloc and memset sizeof(struct view_state) + strlen(url), 
	not sizeof(struct view_state) + strlen(url) + 1: struct view_state
	has unsigned char url[1], so the extra space necessary for the null
	terminator is already there, included in the sizeof(struct
	view_state).  
	
	This fixes the bug whereby ELinks overflow memory when displaying a
	file of an unrecognised type. It also saves a byte(!) of memory when
	-dump is used.  

Sat Sep 13 23:23:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Starting ELinks with -no-home specified make ELinks die on entering
	a site with forms. The attached patch solves the problem with
	elinks_home being NULL. Patch by Karsten Schölzel.  

Sat Sep 13 21:32:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Move some variable declarations closer to where the variables are
	used.  

Sat Sep 13 21:25:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	loc_msg: Check the return value of ctime(). Use a constant instead
	of calling strlen() on the string returned by ctime(). Add comments.
	Bleh.  

Sat Sep 13 06:55:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/hierbox.c:

	One can now recursively collapse or expand a folder in a
	hierarchical listbox using '-', '_', or '[' (collapse) or '+', '=',
	or ']' (expand). This closes bug 37 (until pasky reverts the patch).  
	
	I used gotos because: 
	 - similar code elsewhere uses gotos (of course there are TODOs; 
	   in that code indicating a desire to eliminate those gotos...) 
	 - they make the code more efficient, shorter, and thus--IMO--easier
	 to read; 
	- they bug pasky and Jonas.  
	
	Zas will love me, pasky will hate me, and Jonas will be ticked until
	I remind him about ui.colors.color.tabs.loading.{text,background}.  

Sat Sep 13 05:03:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Mangling pattern those JavaScript URLs on allmusic.com.  

Sat Sep 13 04:58:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Typo fix.  

Sat Sep 13 04:57:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Smartprefixes for the Open Directory Project and Cambridge's
	dictionary.  

Sat Sep 13 04:50:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Allow lambdas for smartprefixes, and add three examples. I'm a bit
	proud of the CVSweb smartprefix, and less proud of the Debian
	package contents smartprefix and Gmane.org smartprefix. They all are
	a bit hackish, tho.  

Sat Sep 13 04:41:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	New dumb- and smartprefixes, and updated URL for the 'dict'
	smartprefix (the old URL still works, but as it forwards to the new
	URL, we might as well use the new URL in the first place).  

Sat Sep 13 00:51:56 2003  Laurent Monin <zas@norz.org>:

	* src/util/memory.c:

	Inline is a non sense here -> dropped.  

Sat Sep 13 00:32:32 2003  Laurent Monin <zas@norz.org>:

	* src/util/: stub.c, stub.h:

	Two headers were added to ease compilation with dietlibc.  

Sat Sep 13 00:30:48 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/loadmsgcat.c:

	Use of caddr_t type was dropped for simpler (void *) casts in
	loadmsgcat.c.  

Fri Sep 12 23:41:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	Ooops, off by one error ;).  

Fri Sep 12 23:37:16 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/location.c, viewer/text/vs.c, viewer/text/vs.h:

	A field url_len was added to struct view_state, and an assertion in
	copy_vs() now protects against bad things.  

Fri Sep 12 23:23:35 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	A note about an overflow risk was added in copy_vs().  

Fri Sep 12 22:49:57 2003  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/vs.h, sched/session.h:

	It seems safer to move struct view_state at end of struct frame,
	copy_vs() called from copy_location() let us think there s a risk to
	corrupt redirect_cnt.  

Fri Sep 12 22:22:24 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, download.h:

	Minor cleanup.  

Fri Sep 12 22:00:20 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some variables declarations were moved near their use.  

Fri Sep 12 21:46:46 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some code from download_window_function() was moved to new functions
	download_progress_bar() and download_progress_string().  

Fri Sep 12 21:40:33 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Fri Sep 12 21:14:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/download.c, util/error.h:

	Add a do_not_optimize_here_gcc_3_x() macro and use it instead of
	do_not_optimize_here_gcc_3_3() in tp_display(). This works around a
	bug that I experience with GCC 3.2.3-6 on Debian whereby ELinks 
	crashes when I tell it to display a file of an unknown file-type.  

Fri Sep 12 20:59:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Stupid Miciah forgot to commit src/config/options.c, which actually
	adds the ui.colors.color.tabs.loading.{text,background} options.
	Thanks, zas! No more black tabs.  

Fri Sep 12 18:51:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	New ui.colors.color.tabs.loading.{text,background} options: Colours
	for tabs that are loading in the background.  
	
	I have this vague memory of pasky telling to commit only small
	changes, passing larger patches by him before committing; or maybe
	it was all just a beautiful dream... I'm hoping just now that it was
	the latter.  

Fri Sep 12 15:15:05 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use int_max() instead ... ;) Thanks to Jonas.  

Fri Sep 12 12:56:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some stains do not appear anymore, thanks to Jonas. Minor
	optimizations by me.  

Fri Sep 12 10:48:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c,
	dialogs/document.c, dialogs/mime.c, elusive/parser/stack.h,
	elusive/parser/css/atrule.c, elusive/parser/css/parser.c,
	elusive/parser/css/ruleset.c, elusive/parser/css/test.c,
	elusive/parser/css/test.h, elusive/parser/css/tree.h,
	protocol/http/header.c, scripting/guile/hooks.c, ssl/ssl.h,
	terminal/screen.c:

	Whitespace fixes.  

Fri Sep 12 10:40:21 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some of download_data() code was moved to new
	write_cache_entry_to_file() and set_file_download_win_handler().
	Tidyup.  

Wed Sep 10 19:23:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_spaces() with realloc_spaces() and use granular
	allocation.  

Wed Sep 10 19:15:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_line() with realloc_line().  realloc_line() now calls
	realloc_lines().  Use X() and Y() macros to get the canvas position.  

Wed Sep 10 18:43:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_lines() with realloc_lines().  

Wed Sep 10 18:12:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, util/memory.h:

	Make the granular allocation code generic.  

Wed Sep 10 16:06:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce ALIGN_LINK().  

Wed Sep 10 15:49:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Minor cleanup remove useless assignments.  

Wed Sep 10 14:40:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Switch @from and @to macro names. Some say it is more correct ;) 

Wed Sep 10 14:10:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link navigation bug introduced in 1.250.  

Wed Sep 10 08:16:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Use a variable to save a few calls to current_frame() in
	print_screen_status().  

Wed Sep 10 06:06:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Eliminate some superfluous #includes.  
	
	When I suggested, made, and forgot to commit this change a few
	months ago, pasky had this comment: 
	
	20:21:10< pasky> Miciah: i'd not be against reducing it to
	                 ssl/ssl.h, as long as you will make clear in the log message that
			 pasky wishes this not to become a precedent and such things MUST be 
			 considered on case-by-case basis 20:21:35< pasky> i really don't
	                 want to see a flood of "removed redundant includes from ABC, it is
	included by XYZ as well" 

Wed Sep 10 03:41:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add TODO about how to avoid last_* variables allocation and freeing.  

Wed Sep 10 03:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Use format.form instead of last_form.  

Wed Sep 10 03:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge link initialization from process_link() into new_link().  

Wed Sep 10 00:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup dir_sep() trimming.  

Wed Sep 10 00:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cut the b33p and just access @first_use directly.  

Wed Sep 10 00:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup.  

Wed Sep 10 00:26:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Move directory testing to test_confdir(). Inspired by
	kuser.  

Wed Sep 10 00:04:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): No need to allocate config_dir. Inspired by kuser.  

Tue Sep  9 23:32:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Split out path_to_exe directory name extraction to
	elinks_dirname(). Patch by kuser.  

Tue Sep  9 21:57:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	move_links(): Cleanup indentation.  

Tue Sep  9 21:52:52 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/draw.c, viewer/text/view.c:

	Cursor positionning was fixed regarding block_cursor option.  

Tue Sep  9 21:33:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link numbering.  

Tue Sep  9 21:16:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Cleanup and optimize whitespace trimming.  

Tue Sep  9 20:46:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move up and call get_format_screen_char() from set_hline().
	Simplifies put_chars().  

Tue Sep  9 20:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Last patch fixed handling of <a href="foo">123<sup>456</sup>789</a>.
	:) 

Tue Sep  9 20:07:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	A bit experimental patch moving link processing after the
	set_hline() and the format changing. Passes fm! ;) 

Tue Sep  9 19:45:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Simplify the format change handling code. It is now done in
	get_format_screen_char() returning a pointer to a template
	screen_char 

Tue Sep  9 19:07:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move sub/super state variables closer to user.  

Tue Sep  9 18:58:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Whitespace fixes.  

Tue Sep  9 18:00:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Minor cleanup.  

Tue Sep  9 17:50:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elusive/renderer/text/renderer.c, terminal/draw.c,
	terminal/screen.c, viewer/text/link.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	Introduce copy_screen_chars() macro to wrap memcpy()s.  

Tue Sep  9 13:11:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	An issue related to weird html links was fixed. It was revealed by
	an assertion failure when accessing to
	http://www.etla.org/articles/filter/.  

Tue Sep  9 10:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A useless label was removed in parse_element(), minor cleanup.  

Tue Sep  9 10:11:55 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Slightly improved get_attr_val() performance by moving some tests
	outsided loops (especially if (found) test)), gain is 25% mininum
	compared to previous code.  

Mon Sep  8 23:16:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	do_document_refresh(): Check if any type query is in progress and if
	it is for the same url bail out.  

Mon Sep  8 22:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/draw.c, terminal/draw.h,
	terminal/screen.c, terminal/screen.h, viewer/text/link.c:

	Revert the last 3 hours of patches from me. This stuff needs more
	thought.  

Mon Sep  8 21:16:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	set_term_color(): Bail out if !d_opt.  

Mon Sep  8 21:07:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, terminal/screen.c, terminal/screen.h:

	Add color_size to the document option structure.  

Mon Sep  8 20:54:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add (kindof) support for the color array.  

Mon Sep  8 20:37:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix spurious redraws because of bad color comparison.  

Mon Sep  8 19:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/draw.c, terminal/draw.h,
	terminal/screen.c, viewer/text/link.c:

	Make the screen_char color an array. This will be necessary when
	moving towards support for 256. The patch contains a few hacks for
	when a local screen_char stack variable are needed because the color
	array can have various sizes. Also set_hline() is now responsible
	for making the format change in the renderer.  

Mon Sep  8 17:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix set_term_color() type.  

Mon Sep  8 15:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Oops fix comment.  

Mon Sep  8 15:43:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	Encapsulate the fg and bg color levels + drop 8 from
	set_term_color8().  

Mon Sep  8 15:22:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Move comment about color encoding to header.  

Mon Sep  8 15:10:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor optimizations (mainly tests reordering and intermediate
	results caching).  

Mon Sep  8 12:32:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor cleanup and optimization in format_frames().  

Sun Sep  7 21:41:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	get_system_name(): Use snprintf() it's simpler and zas said I should
	do it. ;) 

Sun Sep  7 21:03:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sysname.c:

	Cleanup of get_system_name(). Now code dependant to popen() has its
	own function, some useless memset() were removed, struct utsname
	extraction do not use memory allocation (and free) anymore, some
	gotos are gone, and some hidden awful little bugs were added.  

Sun Sep  7 20:23:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tiny tidyup.  

Sun Sep  7 20:09:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Ooops, sizeof(struct signal_info) -> sizeof(signal_info) ;).  

Sun Sep  7 20:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: signals.c, signals.h:

	Signals handling code was simplified, struct signal_handler and
	signal_mask have been replaced by struct signal_info and is no more
	exported.  

Sun Sep  7 19:13:22 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/os_dep.c:

	get_system_str() minor optimization and cleanup.  

Sun Sep  7 18:11:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.h:

	This is a pure test, some time ago fields reorganization in struct
	cache_entry caused some issues, it doesnt seem to cause any problem
	know. So i moved fields and let see.  

Sun Sep  7 11:12:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep  7 11:08:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	A bug in truncate_entry() was fixed, a useless call to enlarge() has
	now some use, fixing a minor memory leak it seems. Some
	optimizations were made by caching some constant results.  

Sun Sep  7 00:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix <hr> drawing + minor cleanup of last patch.  

Sun Sep  7 00:10:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	terminal/color.c, terminal/color.h, terminal/draw.c,
	terminal/draw.h, viewer/text/link.c:

	I keep redoing the same patch over and over again. This time code is
	actually removed, it's slightly less hackish and adding support for
	xterm256 will hopefully be easier since a screen char is now passed
	to the color blender which btw is now renamed to set_term_color8().  

Sat Sep  6 22:50:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	Improve comments with help from Dickey's scripts.  

Sat Sep  6 22:33:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, palette.inc:

	Use the included palette16.  

Sat Sep  6 22:27:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	For the 16, 88 and 256 color palettes.  

Sat Sep  6 21:02:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Shit. Jonas pointed out that ITU copyright doesn't permit us to
	actually include that SGR 38 documentation. I think we have right to
	quote from it but let's stay safe :/.  

Sat Sep  6 20:36:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Eliminate an assignment that was made superfluous by a change in
	revision 1.180 of src/viewer/text/view.c.  

Sat Sep  6 20:33:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Added documentation of the mysterious SGR 38 (thanks to deltab
	again). It is precious and valuable enough to live in the source
	:-).  

Sat Sep  6 19:48:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_link_number(): Split out from process_link().  

Sat Sep  6 19:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	process_link(): Cleanup.  

Sat Sep  6 19:37:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Split out the whole process_link goto ``snask'' (Danish
	word for uncertain mixed things) into separate process_link()
	function.  

Sat Sep  6 15:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Cleanup and require that @attr != NULL.  

Sat Sep  6 15:44:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, terminal/draw.h,
	terminal/screen.c, viewer/text/link.c:

	Move the check of wether to use inverse sequence in mono mode to
	color blending.  The flag used is a new SCREEN_ATTR_STANDOUT
	inspired by vim. This makes it possible to really make links
	standout in mono mode so navigation is improved.  

Sat Sep  6 15:29:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	6.5 on the richter^H^Hack scale. Propagate attributes up from the
	color blender.  

Sat Sep  6 15:09:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, terminal/kbd.c,
	viewer/text/link.c:

	Unify the color handling into one function get_term_color8().  

Sat Sep  6 10:44:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Minor update. (Why are this sooooo boring ;) 

Sat Sep  6 10:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Cosmetic changes by Witold.  

Fri Sep  5 22:44:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated. po files were resynced.  

Fri Sep  5 21:29:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Put the static int @loaded local to load_saved_forms().  

Fri Sep  5 21:18:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Don't call base64_decode with an empty string. This fixes an
	assertion failure when a saved form field is blank.  

Fri Sep  5 20:33:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Expand the description for the document.browse.refresh option.  

Fri Sep  5 17:55:43 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Test for @url and @name parameters were added to
	get_form_history_value() to prevent bad things (like a segfault).
	Issue reported by Jonas.  

Fri Sep  5 13:40:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Support for html meta refresh. Patch by Witold and me.  

Fri Sep  5 13:25:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_special(): Cleanup.  

Fri Sep  5 12:02:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	doc_end_load(): Cleanup.  

Fri Sep  5 10:47:27 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Heh, we still have some. links -> ELinks.  

Fri Sep  5 09:41:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated, .po files were resynced.  

Fri Sep  5 02:01:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Update comment.  

Fri Sep  5 01:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_border_cross(): Use BORDER_* enums in the lookup table.  

Fri Sep  5 00:29:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Tidyup + rename rgb_cache_entry->l to level.  

Fri Sep  5 00:17:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): No need to poison the cache since @level
	should always be > 0.  

Thu Sep  4 23:33:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation updated by Witold 

Thu Sep  4 19:05:46 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sending TWIN and XWIN sequences seems to make the thing work well at
	least with xterm, rxvt, linux console. Please test in other env. if
	it still works. Screen should be restored at exit, and mouse should
	always work as usual.  

Thu Sep  4 18:16:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Reduce the document line granularity. This maybe needs more tuning
	and/or only enabled for big documents.  

Thu Sep  4 18:14:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.c:

	Fix the document option comparison that was causing the extra memory
	usage. :P 

Thu Sep  4 16:58:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Fix grmask error. But how could it work before? 

Thu Sep  4 14:42:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Issue concerning alternate screen handling and xterm/rxvt was fixed,
	i hope.  

Thu Sep  4 14:14:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	send_term_sequence() -> send_done_sequence() 

Thu Sep  4 12:31:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/options.c, sched/session.h,
	util/version.c:

	Information is like water, there is no plural.  
	
	-- Witold Filipczyk tohu-bohu <witekfl@poczta.gazeta.pl> 

Wed Sep  3 23:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h:

	Change the color encoding so the bold bit is now between bg and fg
	bits making it much simpler.  Adjusting of fg when bg == fg is now
	(more correctly) done using a fg_color[] lookup.  

Wed Sep  3 22:43:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove strange (bg & 0x02) and use make the foreground color bold if
	fg == bg.  This means that fg color will _always_ be visible (so I
	guess this is a bug fix).  

Wed Sep  3 22:34:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.h, terminal/screen.c:

	Update comments and move ``generic option cache'' TODO to better
	place..  

Wed Sep  3 22:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/form.c:

	Option document.browse.forms.show_formhist was added. It turns
	on/off the forms history dialog. Please improve description in
	options.c. Feature requested by Jonas.  

Wed Sep  3 22:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix a stupid bug: next <-> prev error.  

Wed Sep  3 22:05:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/options.c, terminal/screen.c:

	Update screen_drivers change_hook style.  

Wed Sep  3 21:17:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, terminal/screen.c, terminal/screen.h:

	Dynamically allocate screen drivers ... getting ready for
	change_hook updating.  

Wed Sep  3 20:14:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Silence gcc 3.3.* warnings even for --disable-debug builds.  

Wed Sep  3 16:21:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Do not use fmem_alloc() since using alloca() (fastmem only) prevents
	the function to be inlined.  

Wed Sep  3 16:15:30 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A segfault produced at exit in normal or fastmem mode was fixed. Why
	does it work with --enable-debug and segfault in other modes? 

Wed Sep  3 16:03:11 2003  Laurent Monin <zas@norz.org>:

	* src/util/: snprintf.c, snprintf.h, string.c, string.h:

	Changes were made to be able to compile ELinks with -Winline flag.
	Some functions were not inlined as it should. A bit hacky so feel
	free to improve.  

Wed Sep  3 12:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c:

	elinks -dump <somefile and elinks -dump - <somefile are now
	accepted. It works with -source too.  

Wed Sep  3 09:27:22 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor code simplification.  

Wed Sep  3 09:24:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Use url_size ;).  

Wed Sep  3 09:22:25 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	forget_forms_with_url() was introduced. It replaces previous
	get_form_with_url() + a loop.  

Tue Sep  2 21:21:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5.CVS 

Tue Sep  2 21:14:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5 

Tue Sep  2 21:13:32 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated po files.  

Tue Sep  2 21:11:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Minor update.  

Tue Sep  2 20:27:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Adding prefilled screen_drivers. If not for speed they make the
	defaults clearer.  

Tue Sep  2 19:54:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	init_screen_driver(): Moved and group with the screen driver struff.  

Tue Sep  2 19:47:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optim.  

Tue Sep  2 19:33:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Comments members of struct screen_driver.  

Tue Sep  2 19:25:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup UTF8 I/O and move most logic to init_screen_driver().  

Tue Sep  2 19:02:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of frame sequences when changing frame state.  

Tue Sep  2 18:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Handle ``frame char translation'' genericly depending on
	screen_driver->frame.  

Tue Sep  2 18:26:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge fill_option_cache() and get_frame_table() into
	init_screen_driver().  

Tue Sep  2 16:20:24 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optimizations.  

Tue Sep  2 14:04:58 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A useless list initialization was removed. Reported by Jonas.  

Tue Sep  2 14:01:00 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Goto fail is better ;) Spotted by Jonas.  

Tue Sep  2 13:55:01 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Allocate space for url + struct formhist_data in one time.  

Tue Sep  2 13:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move screen_state->frame to the screen_driver.  

Tue Sep  2 13:38:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: opt_cache -> driver.  

Tue Sep  2 13:37:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Last bits of formhist fix.  

Tue Sep  2 13:32:55 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.h, formhist.c:

	Form history was fixed. Major tidyup. Please report any issue, all
	previous versions have some bad bugs and design errors.  

Mon Sep  1 23:59:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Always do two fg_color[] adjustments like in the old code.  

Mon Sep  1 23:53:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Can't sleep before this is done. Revert bogus patch that caused
	visited links and many other things to be drawn wrong.  

Mon Sep  1 23:31:12 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Code cleanup. Code redundancy was reduced. A potential memleak was
	fixed.  

Mon Sep  1 22:44:46 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forget_form() is now used.  

Mon Sep  1 21:11:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Revert fg_color[] white/bright white change that I applied to cure
	symptoms of terminal color bugs.  

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: rs_opt_cache -> screen_driver 

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Do fg_color correction before applying attribute color enhancements.  

Mon Sep  1 20:46:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link color mixing to be as in 0.5pre4.  

Mon Sep  1 20:38:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Moved format_change put_chars() fragment into separate function
	put_chars_format_change().  

Mon Sep  1 20:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Code cleanup and reordering. Statification. It fixes some issues
	with formhist feature. Formhist dialog do not pop up twice anymore,
	and multiple identical entries in formhist should not occur anymore.  

Mon Sep  1 20:16:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, viewer/text/link.c:

	Fix hovering of links to be like pre4 (even though always having
	bold links is more readable IMHO).  

Mon Sep  1 19:38:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Fixed !allow_dark_on_black brokenness when lookup in the xlat
	(@fg_color) table didn't reflect bold attribute being set. As a
	result, the behaviour slightly deviated from the correct 0.5pre4 one
	and there were dark colors on dark backgrounds. Fix based on
	cooperation with jonas :-).  

Mon Sep  1 19:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix: comparaison failed because test order was inverted, having for
	effect to return false on form_already_saved() call. There are some
	bugs left.  

Mon Sep  1 13:17:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use int_bounds().  

Mon Sep  1 13:13:32 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, form.c, link.c:

	Use int_bounds().  

Mon Sep  1 13:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, terminal/draw.c:

	Use int_bounds().  

Mon Sep  1 13:02:46 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, document/html/tables.c:

	Use int_bounds().  

Mon Sep  1 12:59:06 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: auth.c, edit.c, hierbox.c, mime.c:

	Use int_bounds().  

Mon Sep  1 12:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c:

	Use int_bounds().  

Mon Sep  1 12:52:25 2003  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, bfu/button.c, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c:

	int_bounds() was introduced, it replaces int_lower_bound(&x, a) and
	int_upper_bound(&x, b) with int_bounds(&x, a, b), and should be
	faster.  

Mon Sep  1 12:35:10 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Optimization: struct widget_data *dlg_item = &dlg->items[dlg->n -
	1]; 

Mon Sep  1 12:15:57 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/hierbox.c:

	Trivial optimization, cache dlg->n - 1.  

Sun Aug 31 22:49:07 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Aug 31 22:27:03 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Aug 31 22:21:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with options in 0.5pre4.CVS 

Sun Aug 31 22:14:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix --(config|long)-help color printing.  

Sun Aug 31 19:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Handling of underlining is now fully optional and hopefully with
	minimal overhead [two tests in print_char()].  

Sun Aug 31 17:28:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Draw underlines based on the terminal option.  

Sun Aug 31 17:24:19 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Aug 31 17:20:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h, screen.c:

	Replace TERM_COLOR_BOLD with SCREEN_ATTR_BOLD.  

Sun Aug 31 17:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make terminal underline option appear in the terminal options
	dialog.  

Sun Aug 31 17:03:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix terminal restrict_852 description and add underline optinos.  

Sun Aug 31 15:51:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Cleanup the use negative image testing + only init @underline when
	appropriate.  

Sun Aug 31 13:07:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix color encoding comment.  

Sun Aug 31 12:51:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Merge INT2RGB() into HASH_RGB() and use INIT_RGB() if we have to
	calculate distance.  

Sun Aug 31 12:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	Generalization via macros.  

Sun Aug 31 10:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Use memacpy() in copy_string().  

Sun Aug 31 10:30:23 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	xstrcmp() optimization.  

Sun Aug 31 09:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	Profiling and optimization of find_nearest_color(), measured
	improvment is significative. Perhaps we can optimize a bit more by
	merging INT2RGB() and HASH_RGB() in this functions.  

Sun Aug 31 09:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Code optimization in redraw_screen(), memcmp() call was removed,
	tests were optimized in the 2 levels loop.  

Sun Aug 31 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Completely rewrite the color encoding into one function. There's
	still some dark corners that don't make sense to me maybe someone
	can hit me with a cluebat? 

Sun Aug 31 00:19:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Transmorphed into just the foregroud color lookup table.
	Comments updated.  

Sun Aug 31 00:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Add comments and #define for bold rendering.  

Sat Aug 30 20:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Comment the color encoding and try to simplify it (not used yet).  

Sat Aug 30 19:36:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Change octal numbers to hex.  

Sat Aug 30 11:32:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, protocol/file.c, protocol/ftp.c:

	A few cleanups of color option handling.  

Sat Aug 30 11:08:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.c:

	dlg_set_history() was reworked.  

Sat Aug 30 08:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Reverted trivial simplification, it causes a segfault when accessing
	terminal options, and IMHO, is not faster nor more readable.  

Sat Aug 30 01:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Get rid of hardcoded colors and use status.status-text instead.  
	Also don't initialized @fgcolor of unused leds but fallback to
	default.  

Sat Aug 30 00:27:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: leds.c, leds.h:

	Updated to use the current color handling and terminal drawing.
	Colors are badly hardcoded.  

Sat Aug 30 00:06:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add TODOs and small cleanup.  

Fri Aug 29 23:57:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	color_distance(): Fix braindamaged off by 4 error from last patch.  

Fri Aug 29 23:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Update comments and remove test of color arg since it is assert()ed.  

Fri Aug 29 23:28:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	Due to the change moving color mangling out of print_char() drawing
	of frame lines now requires that a color_pair is specified. Make all
	helpers take this color arg.  

Fri Aug 29 23:27:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Explain in the source why altscreen isn't used for xwin.  

Fri Aug 29 23:06:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	Fixed bug 244, compilation failures caused by expansion of 'format'
	tokens (#define'd at document/html/parser.h). Reported by Felix von
	Leitner <felix@fefe.de>.  

Fri Aug 29 21:39:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Trivial simplification.  

Fri Aug 29 21:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/: formhist.c, formhist.h:

	Moved descriptions of public functions to the header file.  

Fri Aug 29 21:27:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	A small patch making rendering of tables more correct. Some pages
	might look a lot different. E.g. www.linux.org has some strange
	coloring in the bottom while but /. is much better.  

Fri Aug 29 21:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Comments cleanup.  

Fri Aug 29 21:21:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Normalize (+ minor reindentation and tiny cleanup).  

Fri Aug 29 21:18:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.h:

	Normalize.  

Fri Aug 29 21:03:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Fixed invalid negation in (my?) comment.  

Fri Aug 29 18:18:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Use INIT_COLOR_PAIR() wrapper.  

Fri Aug 29 17:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove legacy code and check @dump_pos only in mix_attr_color().  

Fri Aug 29 17:28:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	color_to_string(): Use %06x fragment for converting the @color.  

Fri Aug 29 15:41:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cache intermediate results even more, misc. cleanups and
	optimizations.  

Fri Aug 29 15:08:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Cleanups and optimizations.  

Fri Aug 29 14:38:30 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Use int_[upper|lower]_bound().  

Fri Aug 29 14:30:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Use a temporary variable to prevent useless calculation, populate
	with int_max()/int_*/bound().  

Fri Aug 29 14:29:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Use a temporary variable to prevent useless calculation.  

Fri Aug 29 14:09:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Various minor optimizations, populate with int_max() and
	int_[upper|lower]_bound().  

Fri Aug 29 12:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): Rename l -> level.  

Fri Aug 29 11:50:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): Always add ' ' as fall back.  

Fri Aug 29 11:39:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Use memcmp() for exact matching.  

Fri Aug 29 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup the frame table handling to be more generic.  

Fri Aug 29 11:16:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/screen.c:

	Move the terminal color handling out of document/html/renderer.* and
	into terminal/color.* this way find_nearest_color() and fg_color() 
	can be static inline'd but the real benifit is the last chunk that 
	moves 3 lines of code outside print_char() which (at least in
	profiling) gives a small boost or said another way it doesn't hurt
	performance! ;) 
	
	The numbers: 
	
	  %   cumulative   self              self     total 
	 time   seconds   seconds    calls  ms/call  ms/call  name 
	  9.5       6.14     1.73  9142934     0.00     0.00  print_char
	  [27] 8.2       7.58     1.53  9107494     0.00     0.00 
				   print_char [29] ^^^^^^^ This must be because redraw_screen() can
	more correctly compare colors.  (btw. the case is scrolling up and
	 down twice on a page cat'd from 20 /. pages and a page of all debian
	unstables packages. 776 subpages) 

Fri Aug 29 11:13:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Make the ``mostly used'' string utils inlined.  

Fri Aug 29 09:47:05 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Many minor optimizations and cleanups. Some old staled code was
	removed. Speed was significantly improved since 0.5pre4.  

Fri Aug 29 04:40:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_func(): Don't propagate the event when calling
	delete_window_ev(). Fixes bug 33.  

Fri Aug 29 03:33:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, viewer/text/view.c:

	draw_border_char(): Check @color before mixing it. Fixes bug 242.  

Thu Aug 28 23:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	*.pld.org.pl -> *.pld-linux.org 

Thu Aug 28 19:48:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	cookies.max_age description cleanup. Changed default to -1 (no
	preset deadline for the poor little cookies), unless someone will
	come with a sound reason for keeping it upon 1 year. (IMHO file
	growth is not an issue..) 

Thu Aug 28 19:43:13 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Reduce overflow risk to zero and drop some comments.  

Thu Aug 28 19:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Commenting on possible buffer overflow at forcehtml_cmd().  

Thu Aug 28 19:28:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	assertm() 

Thu Aug 28 19:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Massive grammar fixes in comment introduced in rev 1.8 and bound the
	workaround to bug 237.  

Thu Aug 28 19:17:47 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp tidyup and slight mostly cosmetical altering of the output.
	If fancy, then fancy. ;-) 

Thu Aug 28 18:17:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Major optimization in get_searched(), use tolower() and pre-lowered
	string comparaison instead of expensive strncasecmp(). Some
	arithmetic operations were moved out of loops, cleanup.  

Thu Aug 28 17:29:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Add missing snprintf.h #include.  

Thu Aug 28 17:22:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, intl/gettext/dcigettext.c,
	intl/gettext/l10nflist.c, intl/gettext/loadmsgcat.c,
	intl/gettext/localealias.c:

	#include the stubs via elinks.h. Makes elinks compile on FreeBSD
	again.  

Thu Aug 28 17:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/l10nflist.c:

	Remove useless pop() declaration.  

Thu Aug 28 17:01:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Add missing #include.  

Thu Aug 28 17:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/loadmsgcat.c:

	source_tree_filename(): Cleanup and rename to
	add_filename_to_string().  

Thu Aug 28 16:40:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Typo fix in comment.  

Thu Aug 28 09:19:50 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Aug 28 09:00:38 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	fr.po space fix.  

Wed Aug 27 16:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Make @used, @spanned and @b members boolean.  

Wed Aug 27 16:03:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Remove useless variables.  

Tue Aug 26 23:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Instead of using brightwhite on white use brightgrey.
	Improves /.  

Tue Aug 26 23:35:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	copy_chars(): Use memcpy().  

Tue Aug 26 23:23:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix compile error.  

Tue Aug 26 23:14:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use memcpy().  

Tue Aug 26 23:10:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hline(): Move test outside the loop.  

Tue Aug 26 23:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line() + set_hchars(): Use memcpy().  

Tue Aug 26 12:50:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Tue Aug 26 12:40:19 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Minor cleanup.  

Tue Aug 26 09:35:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	Generic cleanup.  

Mon Aug 25 23:52:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	encode_color(): Remove in favor of mix_color_pair().  

Mon Aug 25 22:32:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area() showed up as a real show stopper in profiling so lets
	try with a nu scheme: Draw first line and memcpy() the rest of the
	area from this.  

Mon Aug 25 22:22:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_line(): Use memcpy().  

Mon Aug 25 22:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Small optimization.  

Mon Aug 25 21:25:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Mon Aug 25 12:04:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, cookies/cookies.c:

	An option for control of max. age of cookies was added
	(cookies.max_age). It permits to control expiration of cookies: no
	check(old behavior), always expires at session end, or limit to a
	number of days (default is 365 days). Idea by Miciah and me.  

Mon Aug 25 07:28:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Readd the inlined code documentation. Requested by Miciah.  

Mon Aug 25 06:56:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	struct line: Remove @bgcolor since par_format.bg is always used.  

Mon Aug 25 02:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	inline and loose seq_len() macro.  

Mon Aug 25 02:45:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/hardio.c:

	Trival blackspace fix.  

Mon Aug 25 02:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	typedef uint32_t color_t.  

Mon Aug 25 02:43:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	assert on !list_empty instead of list.next.  

Sun Aug 24 20:26:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	write_sequence(): Macro that wraps the hard_write().  

Sun Aug 24 14:30:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.c,
	viewer/text/view.c:

	toggle-document-colors action added. Activator defaults to '%'.  

Sun Aug 24 13:57:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Oops somebody didn't test and compile before committing. ;( 

Sun Aug 24 13:55:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Tidyup of comments.  

Sun Aug 24 13:35:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Empty the color cache when a switch between a mono and color term is 
	detected. Fixes lookups of wrong colors and reduces the memory
	usage.  

Sun Aug 24 12:01:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Alternate term screen handling seems to be incompatible with mouse
	handling in X, i disabled support for alt screen under X for now.
	Mouse clicks are partially ignored if we use alt screen and ie.
	xterm, but it works on linux console. Miciah please have a look at
	that. ;) 

Sun Aug 24 02:54:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/link.c:

	Store link color as struct color_pair.  

Sun Aug 24 02:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	mix_colors(): Rename to mix_color_pair().  

Sun Aug 24 02:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Expand color info to also include option tree pointers to the
	colors.  This way the colors can be updated for each lookup.  

Sun Aug 24 00:32:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Merge alternate screen support; fixes bug 28.  

Sat Aug 23 18:24:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, sched/session.c, viewer/text/link.c,
	viewer/text/view.c, viewer/text/vs.c:

	struct document: Remove @frame and just test @frame_desc instead.  

Sat Aug 23 18:18:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	struct document: Remove unused @time_to_get.  

Sat Aug 23 18:17:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Merge do_for_frame() and menu_for_frame().  

Sat Aug 23 18:16:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frm_download(): Move and make static.  

Sat Aug 23 18:15:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, view.c, view.h:

	decrement_fc_refcount(): Move and rename s/fc/document/.  

Sat Aug 23 18:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.h:

	Regroup and comment prototypes + correct #includes.  

Sat Aug 23 18:11:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup and merge print_current_title() and print_current_titlex().  

Sat Aug 23 18:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	clear_formatted() + destroy_formatted(): Merged to done_document().  

Sat Aug 23 17:54:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, elusive/renderer/text/renderer.c,
	viewer/text/view.c, viewer/text/view.h:

	init_document(): Introduced.  

Sat Aug 23 17:48:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/renderer/text/renderer.c:

	Renames to better fit the structs.  

Sat Aug 23 17:45:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	cached_format_html(): Lots of renames.  

Sat Aug 23 17:34:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	realloc_line[s](): Cleanup and remove unneeded variables from struct
	line.  

Sat Aug 23 16:53:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, document/html/renderer.h:

	Tidyups.  

Sat Aug 23 16:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/style.c, bfu/style.h, bfu/text.c, bfu/text.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, sched/download.c,
	sched/session.c, scripting/lua/core.c, terminal/draw.c,
	terminal/draw.h, viewer/text/search.c, viewer/text/view.c:

	struct screen_color: Replace with color_pair.  

Sat Aug 23 16:33:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/style.c, config/options.c, config/options.h,
	config/opttypes.c, document/options.c, document/options.h,
	document/html/Makefile.am, document/html/colors.c,
	document/html/colors.h, document/html/frames.c,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c,
	terminal/Makefile.am, terminal/color.c, terminal/color.h,
	terminal/draw.c, terminal/draw.h, util/Makefile.am, util/color.c,
	util/color.h, viewer/text/link.c:

	Split color handling.  

Sat Aug 23 16:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Handle @attr the same way as colors; Cache it.  

Sat Aug 23 15:52:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup draw_frame_*() macros.  

Sat Aug 23 15:18:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchars(): Make @bgcolor argument a color_t pointer. When
	shifting and aligning NULL can now be used to signal that the
	original bgcolor should used which means no stains when
	use_document_colors = 2.  

Sat Aug 23 15:08:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Cleanup.  

Sat Aug 23 15:07:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchar(): Only used by xset_hchar() so they were merged.  

Sat Aug 23 15:06:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Propagate @bgcolor to set_hchar*.  

Sat Aug 23 10:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Limit expiration date to one year from now, in set_cookie(). Is this
	ok ?.  

Sat Aug 23 10:41:58 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Loading/saving of expired cookies was disabled, especially whose
	that should expire with the session, please review, i am still
	unsure about the good behavior...  

Sat Aug 23 06:37:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_form_control(): Fix big leak from prev patch. (merge ;) 

Sat Aug 23 06:19:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h:

	struct part: Remvoe the @uf member. It was used to trash form
	controls and we migth as well free the controls if there's no
	document.  

Sat Aug 23 06:18:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/form.c, viewer/text/form.h, viewer/text/view.c:

	destroy_fc(): Move and rename to done_form_control().  

Sat Aug 23 06:15:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Cleanup macros.  

Sat Aug 23 05:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	init_term(): Cleanup and fix a possible leak. (merge) 

Sat Aug 23 05:43:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Revert some bogus patches. Somebody must've been sleeping ... :( 

Sat Aug 23 04:54:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Moved things to style.* 

Sat Aug 23 04:46:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Merge small optimization in link drawing from ELUSION.  

Sat Aug 23 04:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, config/opttypes.c,
	document/options.c, document/options.h, document/html/colors.c,
	document/html/colors.h, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	document/html/tables.c, elusive/renderer/text/renderer.c,
	protocol/file.c, protocol/ftp.c, terminal/draw.c, terminal/draw.h,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Merge color_t introduction from ELUSION. Contains patches from 6th
	to 8th of August.  

Sat Aug 23 04:42:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Compilation fix.  

Sat Aug 23 04:33:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: style.c, style.h:

	The missing link in the bfu color handling.  

Sat Aug 23 03:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/Makefile.am, bfu/button.c, bfu/button.h,
	bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h, bfu/group.c,
	bfu/hotkey.c, bfu/inpfield.c, bfu/inpfield.h, bfu/listbox.c,
	bfu/listbox.h, bfu/menu.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, document/html/frames.h, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c,
	document/html/tables.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Merge bfu color handling from ELUSION. This is a patchset of ELUSION
	patches applied between 3rd and 6th of August.  

Sat Aug 23 03:05:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix useless adjustments of the view positions when searching. Thanks
	ElectricElf ;) 

Sat Aug 23 01:27:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge misc. cleanups from ELUSION.  

Sat Aug 23 01:01:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h,
	terminal/screen.c:

	Merge underline support in the lowest terminal layer from ELUSION.  

Sat Aug 23 00:01:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/codepage.inc:

	The fixed thingy from last patch.  

Fri Aug 22 23:46:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix tr usage (part II ;) .. though there still a bug I think because
	spaces are removed from strings? 

Fri Aug 22 21:43:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix `tr' usage so "VISCII 1.1" (spaces in aliases) are handled
	correctly.  

Fri Aug 22 15:13:17 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forms history feature now saves forms in ~/.elinks/formhist file
	instead of ~/.elinks/password, just move it to new name before
	starting elinks to update.  

Fri Aug 22 15:07:47 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Various variables were renamed, a potential memleak fixed, minor
	cleanup.  

Fri Aug 22 10:38:50 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor cleanup and bugfixes (potential memleaks).  

Fri Aug 22 10:11:04 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Tidyup and sscanf() replacement.  

Thu Aug 21 14:55:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memory.h, string.c:

	grmask() and mem_gralloc() macros were introduced to simplify
	granular allocation code.  

Thu Aug 21 14:29:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Partial fix for bug 237.  

Thu Aug 21 13:06:47 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore, Unicode/.cvsignore, contrib/.cvsignore,
	contrib/guile/.cvsignore, contrib/lua/.cvsignore, doc/.cvsignore,
	doc/book/.cvsignore, doc/book/config/.cvsignore,
	doc/book/info/.cvsignore, doc/book/intro/.cvsignore,
	doc/book/manpages/.cvsignore, doc/book/tools/.cvsignore,
	doc/man/.cvsignore, doc/man/man1/.cvsignore,
	doc/man/man5/.cvsignore, intl/.cvsignore, po/.cvsignore,
	src/.cvsignore, src/bfu/.cvsignore, src/bookmarks/.cvsignore,
	src/bookmarks/backend/.cvsignore, src/config/.cvsignore,
	src/cookies/.cvsignore, src/dialogs/.cvsignore,
	src/document/.cvsignore, src/document/html/.cvsignore,
	src/elusive/.cvsignore, src/elusive/layouter/.cvsignore,
	src/elusive/layouter/syntree/.cvsignore,
	src/elusive/parser/.cvsignore, src/elusive/parser/css/.cvsignore,
	src/elusive/parser/dtd/.cvsignore,
	src/elusive/parser/html/.cvsignore,
	src/elusive/renderer/.cvsignore,
	src/elusive/renderer/text/.cvsignore, src/formhist/.cvsignore,
	src/globhist/.cvsignore, src/intl/.cvsignore,
	src/intl/gettext/.cvsignore, src/lowlevel/.cvsignore,
	src/mime/.cvsignore, src/mime/backend/.cvsignore,
	src/osdep/.cvsignore, src/protocol/.cvsignore,
	src/protocol/http/.cvsignore, src/sched/.cvsignore,
	src/scripting/.cvsignore, src/scripting/guile/.cvsignore,
	src/scripting/lua/.cvsignore, src/ssl/.cvsignore,
	src/terminal/.cvsignore, src/terminal/graphics/.cvsignore,
	src/terminal/text/.cvsignore, src/util/.cvsignore,
	src/viewer/.cvsignore, src/viewer/common/.cvsignore,
	src/viewer/dump/.cvsignore, src/viewer/graphics/.cvsignore,
	src/viewer/text/.cvsignore, test/.cvsignore:

	*.swp files (temporary vim files) are now ignored by cvs.  

Thu Aug 21 13:03:54 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/renderer.c,
	intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	Attempt to fix &nbsp&nbsp bug without reintroducing bug 213. Please
	review for side effects.  

Thu Aug 21 07:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Another base64_decode() fix, ending nul is now added... Thanks to
	Zardoz.  

Wed Aug 20 11:11:44 2003  Laurent Monin <zas@norz.org>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp was improved, so we get fancier codepage.inc. Please review
	for portability issues.  

Wed Aug 20 10:10:31 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Cleanup and optimizations.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.h:

	file splash.h was initially added on branch ELUSION.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.c:

	file splash.c was initially added on branch ELUSION.  

Tue Aug 19 11:45:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files and french translation were updated.  

Tue Aug 19 07:26:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	A stupid bug was fixed, patch by Zardoz.  

Mon Aug 18 19:46:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	The first two fixes keep old form data around and avoid crashing on
	null value fields.  
	
	The last fix is my crude attempt to delete forms in and outside of
	lists without underflow/overflow. There should probably be a
	free_list_with_callback version that calls a per-element freer on
	each list member to reduce the number of times that lists are freed
	incorrectly.  
	
	Patch by Zardoz.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.c:

	file canvas.c was initially added on branch ELUSION.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.h:

	file canvas.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.h:

	file splash.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.c:

	file splash.c was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.h:

	file refresh.h was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.c:

	file refresh.c was initially added on branch ELUSION.  

Sat Aug 16 23:41:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	'Fix' narrow edit dialogue boxes again (bug 158).  I fixed this
	before but Zas reverted that fix with src/dialogs/edit.c 1.35: 
	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.c, util/colors.c:

	file colors.c was initially added on branch ELUSION.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.h, util/colors.h:

	file colors.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.h:

	file display.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.c:

	file display.c was initially added on branch ELUSION.  

Tue Aug  5 01:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/cache.c:

	Minor tidyups.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:32:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	I am rolling form memory back to where it was before I messed it up.
	Only a few renames + memorize_form() in formhist/ remains. I have
	kept my changes in the ELUSION branch where I will be doing most of
	my patches from now on. If I get it fixed we can merge it later.  

Mon Aug  4 18:54:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Tidyup.  

Sun Aug  3 04:55:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, renderer.h,
	tables.c:

	Last big nasty patch separating screen_char color and attr. Is this
	a bad solution: In order for html_hr() to put out border_chars, an
	extra argument for passing around the char attributes is missing so
	I added it to put_ch*r*.  

Sun Aug  3 03:44:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, document/html/renderer.c, terminal/draw.c,
	terminal/draw.h, terminal/screen.c, viewer/text/link.c,
	viewer/text/view.c:

	Another big nasty patch ;-P ... A stepping stone towards separating
	color and attribute in struct screen_char ... which will make us
	able to support more attributes like underline.  

Sun Aug  3 00:15:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Stranded renaming bits.  

Sat Aug  2 20:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Revert something that was not supposed to have been commited.  

Sat Aug  2 20:17:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, util/string.c:

	memorize_form(): Possible fix for determining whether to save the
	form values.  

Sat Aug  2 20:05:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Some weird bug forces me to do this weird thing.  

Sat Aug  2 19:03:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	#define FORM_HISTORY_FILENAME.  

Sat Aug  2 18:58:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Do like globhist and be more careful about @elinks_home.  

Sat Aug  2 18:20:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	write_form_history(): Introduced. Now add_form_history_item() just
	marks the history dirty. We can always add save timer like globhist
	later.  

Sat Aug  2 18:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	remember_form(): Rename to add_form_history_item() and use the given
	@item purging unwanted submitted values instead of allocating new
	ones.  

Sat Aug  2 17:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Add more comments.  

Sat Aug  2 17:50:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	init_form_history_item(): Introduced. We now allocate url and item
	in one chunk.  

Sat Aug  2 17:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	read_item_submit_list(): Introduced to make init_form_history()
	simpler. Now we even close the file when bailing out.  

Sat Aug  2 17:16:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	get_saved_control_value(): Renamed to get_form_history_value().
	Comment moved to header.  

Sat Aug  2 17:03:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Make @form_history static.  

Sat Aug  2 17:02:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Move done_form_history().  

Sat Aug  2 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.c:

	Use ~/.elinks/formhist as filename.  

Sat Aug  2 16:03:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Rename: @saved_forms -> @form_history, load_saved_forms() ->
	init_form_history().  

Sat Aug  2 15:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	done_form_history_item(): Rename @form -> @item.  

Sat Aug  2 15:51:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, formhist/formhist.c, formhist/formhist.h:

	Rename: free_formsmemory() -> done_form_history().  

Sat Aug  2 15:46:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	Rename: free_form() -> done_form_history_item() and make it private.  

Sat Aug  2 15:39:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	Removed private'' functions from header and made them static.  

Sat Aug  2 15:35:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	memorize_form(): Move to formhist/. Link in correct archive. ;) 

Sat Aug  2 15:22:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): No need to free the form controls just return NULL
	and let get_form_url() will do it.  

Sat Aug  2 15:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.o:

	Oops this one shouldn't have been added. Sorry.  

Sat Aug  2 15:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	formhist/formhist.o, viewer/text/form.c:

	Rename: struct formsmem_data -> struct form_history_item.  

Sat Aug  2 14:59:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/main.c,
	src/formhist/.cvsignore, src/formhist/.vimrc,
	src/formhist/Makefile.am, src/formhist/formhist.c,
	src/formhist/formhist.h, src/formhist/formhist.o,
	src/viewer/text/form.c:

	s/formsmem/formhist/ 

Sat Aug  2 08:42:26 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Only create arrays once.  

Fri Aug  1 22:19:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.h, screen.h:

	Move struct screen_char.  

Fri Aug  1 21:56:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): Init the @fm_data->submit list.  

Fri Aug  1 21:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	base64_decode(): Fix warning: comparison is always false due to
	limited range of data type.  

Fri Aug  1 20:55:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A bug introduced in my last patch was fixed, we want lower_bound
	instead of upper_bound... ;).  

Fri Aug  1 20:22:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Re-implementation of base64_decode(), to prevent usage of strchr()
	which may return NULL on bad chars, causing bad things. New version
	should detect errors. Adapted from a public domain source code.  

Fri Aug  1 19:37:20 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup.  

Fri Aug  1 19:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	No need to allocate the submit list_head.  

Fri Aug  1 18:55:57 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Fix password form detection.  

Fri Aug  1 18:47:02 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Introduced memorize_form() and moved code from get_form_url() to it.  

Fri Aug  1 18:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	fmem_data -> fm_data, since fmem_ prefix is already used elsewhere.  

Fri Aug  1 17:32:15 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore:

	Ignore libtool.  

Fri Aug  1 17:28:36 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/Makefile.am, src/main.c,
	src/util/base64.c, src/util/base64.h, src/util/version.c,
	src/viewer/text/form.c:

	HTML form manager, please improve and tune. Patch by Fabio Bonelli
	and me.  

Fri Aug  1 15:26:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.h:

	Tidyup and a comment update.  

Fri Aug  1 15:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	init_leds(): Knock out last COL() user. Hinted by Zas.  

Fri Aug  1 15:17:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	unregister_led(): Use assertm().  

Fri Aug  1 15:14:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Sync'ed with the current drawing code.  

Fri Aug  1 14:59:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, document/html/parser.c, terminal/draw.c,
	terminal/draw.h:

	Purge frame_char and ATTR_FRAME.  

Fri Aug  1 14:46:30 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/ttime.c:

	Newline fix.  

Fri Aug  1 14:42:04 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: select.c, signals.c:

	Assertification.  

Fri Aug  1 14:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Populate with int_[upper|lower]_bound() + assertm().  

Fri Aug  1 14:24:28 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 14:12:34 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/auth.c:

	MIN() -> int_min().  

Fri Aug  1 13:58:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:13:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:05:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:39:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:16:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:03:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:51:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:49:51 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: auth.c, hierbox.c, mime.c:

	Cleanup.  

Fri Aug  1 11:44:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	set_char() compilation failure fixed (reported by pekdon).  

Fri Aug  1 11:41:35 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/mime.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/hierbox.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:32:53 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/auth.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:28:45 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:25:37 2003  Laurent Monin <zas@norz.org>:

	* src/config/opttypes.c:

	Do not memcpy() int or long + use int_upper_bound().  

Fri Aug  1 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/default.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:13:44 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, inphist.c, listbox.c,
	menu.c, msgbox.c, widget.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	assert() was removed. It forces include error.h, and this is a bad
	thing, so no check is done for what == NULL, but it shouldnt be a
	problem.  

Fri Aug  1 11:07:37 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Use assert().  

Fri Aug  1 10:39:45 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Instead of returning on outbound values, just limit them to valid
	ones, and continue. It makes things nicer with very low terminal
	size.  

Fri Aug  1 10:38:00 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_upper_bound() and int_lower_bound() were introduced.  

Fri Aug  1 10:11:22 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, viewer/text/view.c:

	More int_min().  

Fri Aug  1 09:58:55 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Make use of int_min().  

Fri Aug  1 09:58:16 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_min() and int_max() were introduced, these are better than MIN()
	and MAX() macros, since arguments are only evaluated once, but they
	only work for int type.  

Thu Jul 31 21:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Long line was wrapped.  

Thu Jul 31 21:55:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	frame_trans was made static and moved to set_xchar() body.  

Thu Jul 31 21:48:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Useless startx and starty vars were dropped from fill_area() + minor
	optimizations and whitespaces fixes.  

Thu Jul 31 21:35:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Major cleanup, draw_assert() is gone (sorry jonas), useless
	intermediate variables like screen were removed, correct assertions
	were added, out_of_range(term, x, y) macro is used to check coords
	against term dimensions, position variable is now always the same
	thing.  

Thu Jul 31 17:41:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_assert(): Introduced and just returns if the assertion don't
	hold. Apparently there's some bugs in the dialog code that requires
	more than trivial work. Work that nobody wants to do right now. ;) 

Thu Jul 31 17:29:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c,
	bfu/menu.c, document/html/colors.c, document/html/colors.h,
	document/html/frames.h, document/html/renderer.c, sched/download.c,
	sched/session.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	Remove last sign of color and char ``encoding'' by making also 
	find_nearest_color() return unsigned char and fill_area() take color
	as unsigned char. This patch also purges the get_screen_char_*() and
	COL() macros.  

Thu Jul 31 16:56:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/button.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/text.c, bfu/text.h, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/search.c:

	This is a big patch doing mostly trivial stuff.  get_bfu_color():
	return unsigned char. No shifting of the color.  set_char(): Take
	color as unsigned char.  draw_frame(): Take color as unsigned char.  
	print_text(): Take color as unsigned char.  
	
	Sideeffects are that fill_area() (next in line) still needs the
	color shiftet.  

Thu Jul 31 15:46:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_frame(): Tidyup.  

Thu Jul 31 15:40:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Various minor optimizations.  

Thu Jul 31 15:17:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	set_only_char(): Take unsigned char instead of unsigned.  

Thu Jul 31 15:04:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c, bfu/menu.c,
	sched/download.c, sched/session.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	fill_area(): Take screen data and attr value separately.  

Thu Jul 31 15:02:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	if () internal() -> assertm().  

Thu Jul 31 14:54:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells(): optimization, do not recalculate cells indexes if
	not needed.  

Thu Jul 31 14:42:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/view.c:

	fill_border_area(): Introduced as macro.  

Thu Jul 31 14:15:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Insert sanity check. Bail out if width or height of the
	view is < 2. I don't know why but Zas spotted this. ;) 

Thu Jul 31 09:12:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	try_encoding_extensions: Fix possible infinite loop.  

Thu Jul 31 01:34:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Many minor optizations: bits shift instead of [*/]2, register some
	vars, moved some tests outside loops, reduce number of calls to
	strncasecmp()...  

Thu Jul 31 01:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/text.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	set_chars(): Take screen data and attr value separately.  

Thu Jul 31 00:33:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/menu.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	set_border_char(): Introduced and used instead of set_char(*FRAME*).  

Thu Jul 31 00:23:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	create_frameset(): optimization, only allocate memory if needed.  

Wed Jul 30 23:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Minor optimization, result of conversion (binary shift) is constant,
	moved outside loops.  

Wed Jul 30 22:41:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.h:

	Typo fix ;).  

Wed Jul 30 21:38:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar(): Remove useless bit operation.  

Wed Jul 30 21:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, terminal/draw.h, terminal/screen.c,
	terminal/screen.h, viewer/text/link.c:

	Move screen_char macros.  

Wed Jul 30 20:58:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h:

	Move and add function descriptions to the header file.  

Wed Jul 30 16:14:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchars(): Take screen data and attr value separately.  

Wed Jul 30 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchar(): Take screen data and attr value separately.  

Wed Jul 30 15:18:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Cleanup.  

Wed Jul 30 00:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c, scripting/lua/core.c,
	terminal/draw.c, terminal/draw.h, viewer/dump/dump.c,
	viewer/text/search.c:

	Replace chr type with struct screen_char.  

Tue Jul 29 23:27:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	elusive/renderer/text/renderer.c:

	struct line: Rename @c to @color with type unsigned char.  

Tue Jul 29 23:09:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_position(): Introduced to wrap POS(x, y) = c.  

Tue Jul 29 22:55:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Cleanup.  

Tue Jul 29 22:43:52 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Cleanup and assertions.  

Tue Jul 29 17:53:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	l_current_document_formatted(): Cleanup.  

Tue Jul 29 17:41:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_to_file(): Cleanup.  

Tue Jul 29 15:39:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Oops some missing renames.  

Tue Jul 29 15:34:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Rename variables and tidy up.  

Tue Jul 29 09:48:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	init_string() was moved after all return NULL, it fixes bug 233.
	Patch by Zardoz.  

Mon Jul 28 22:17:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): More SCREEN_ATTR_FRAME usage.  

Mon Jul 28 22:12:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	put_chars(): a charslen > 0 assertion filure was fixed.  

Mon Jul 28 21:45:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val(): Use attrlen instead of calling strlen(attr), and
	memchr() instead of strchr().  

Mon Jul 28 20:53:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Some old staled code was removed, and an attempt to optimize a set
	of tests was done (please review).  

Mon Jul 28 20:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	alloc_screen() - rename to resize_screen().  

Mon Jul 28 20:23:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	alloc_screen() - Replaced possible init_screen() call with
	assertion. term->screen is allocated in init_term().  

Mon Jul 28 20:20:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_frame_lines() - Fix assertion failure when calling set_xchar().  

Mon Jul 28 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Optimization of atchr(): isA() is redundant with test (c > ' ' && c
	!= '=' ...) since all chars valid for isA() make this test true and
	since we do isA() || the_test, any char > ' ' and < 'z' is valide
	but '=', '>', '<'. I change that for an optimized test, which match
	4 additionnal chars (> 'z' && < 127). This should not be a problem.  

Mon Jul 28 19:34:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_line_color() - removed.  

Mon Jul 28 19:33:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar() - rename variables, use assertion, decrease indentaion.  

Mon Jul 28 19:29:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	erase_screen() - Tidyup.  

Mon Jul 28 17:05:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Old staled code was removed, cleanup and assertification.  

Mon Jul 28 16:43:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Assertification and minor cleanup.  

Mon Jul 28 16:18:56 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, sched/session.c, sched/session.h:

	destroy_all_sessions() was removed, since it does nothing.  

Mon Jul 28 16:15:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Indentation and whitespaces fixes, assertification, and some
	optimizations.  

Mon Jul 28 10:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h, terminal.c:

	init_screen() - introduced; fix leak from previous patch.  

Mon Jul 28 10:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rearrange alloc_screen() and move macro #define closer to user.  

Mon Jul 28 09:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	set_xchar() - Moved to terminal/draw.* 

Mon Jul 28 09:53:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/screen.c, terminal/screen.h,
	viewer/text/view.c:

	Add and use #define SCREEN_ATTR_FRAME 0x80.  

Mon Jul 28 09:39:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.h, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	get_char() - return screen_char position.  set_xchar() - access
	screen_char position directly.  struct link_bg now uses screen_char.  

Mon Jul 28 09:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Trivial renames and use of local terminal_screen var.  

Mon Jul 28 09:18:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Fix test of finalized string length.  

Mon Jul 28 09:05:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/draw.c, terminal/screen.c,
	terminal/screen.h, terminal/tab.c, terminal/terminal.c,
	terminal/terminal.h:

	Move terminal->dirty inside terminal->screen.  

Mon Jul 28 09:00:26 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Ouch, typo fix: close the comment ;) 

Mon Jul 28 08:57:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Refresh time extraction was added. Not yet used so enclosed in #if
	0/#endif.  

Mon Jul 28 08:51:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Move cursor positioning into struct terminal_screen. Also resulted
	in a little renaming in redraw_screen().  

Mon Jul 28 08:48:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print meta refresh original URL value as label.  

Mon Jul 28 08:35:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Support for relative url was added to META Refresh handling code.  

Mon Jul 28 08:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Introduce struct terminal_screen that now holds the screen image.  

Mon Jul 28 07:33:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bad memmove() was prevented, it fixes bug 231. Patch by Zardoz.  

Mon Jul 28 07:02:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Mark term as dirty at end of print_text().  

Mon Jul 28 06:54:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Assertion failure was fixed, no need to call set_line() with l = 0.  

Mon Jul 28 06:53:06 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Cleanup and optimization.  

Mon Jul 28 06:18:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.c:

	alloc_screen() - Allocate @screen and @last_screen in one chunk.  

Mon Jul 28 05:54:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	print_short_help() - Fix logic and string handling.  

Mon Jul 28 04:42:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Tidyup.  

Mon Jul 28 04:16:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Use add_bytes_... when string length is known.  

Mon Jul 28 03:57:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Rewrite. Rename. Recomment. Reformat.  

Mon Jul 28 02:57:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Move term option updating to fill_option_cache().  

Sun Jul 27 23:59:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	print_text(): Optimize to update term->screen directly.  

Sun Jul 27 23:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Tidy up.  

Sun Jul 27 23:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move initialization of loop vars closer to the loop.
	Also move calculation before the loop.  

Sun Jul 27 23:17:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move 'not in view' and failure setting up to decrease
	indentation. Remove useless test.  

Sun Jul 27 23:14:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Fix last patch. cursor_offset should atleast be 0.  

Sun Jul 27 23:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Rename @q -> @cursor_offset and use it to testing
	cursor updating.  

Sun Jul 27 22:54:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_doc(): Set @q in the switch for L_FIELD and L_AREA.  

Sun Jul 27 22:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move most of function body outside the switch.  

Sun Jul 27 22:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Renames in and around set_xchar().  

Sun Jul 27 22:44:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Tidy up.  

Sun Jul 27 21:47:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Whitespace and formatting fixed.  

Sun Jul 27 21:28:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Get rid of screen_char padding.  

Sun Jul 27 21:22:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.h:

	Introduce struct screen_char that is now used for
	terminal->(last_)screen.  

Sun Jul 27 20:20:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix issue where set_char() was called with @x = @y = -1 from
	clear_link().  

Sun Jul 27 19:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix issue where set_line() was called with negative @l from
	draw_doc(). Triggered when scrolling from link navigation.  

Sun Jul 27 19:39:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix bug cause by @l being wider than t->x - x triggering assertion
	in set_char() called from print_text().  

Sun Jul 27 17:51:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Removed set_cursor assertion. I've removed setting of the blocked
	cursor in the active frame it seems. Was that a feature? Anyway it's
	much faster not to.  

Sun Jul 27 17:47:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Assertion that x == 0 removed. When drawing frame lines x can be
	positive and < t->x.  

Sun Jul 27 17:43:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Variables renaming, cleanup, assertification, and comments
	concerning parse_http_header_param() which should be renamed since
	current name is not representative of what it does, imho. Any idea ? 

Sun Jul 27 17:23:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	Make set_cursor() only take hint whether cursor can be blocked. It
	will save us a get_opt* calls. Also only dirty the terminal when the
	positions are new.  

Sun Jul 27 15:49:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	A few formatting and whitespace fixes.  

Sun Jul 27 15:24:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	Outcommented set_line_color().  

Sun Jul 27 15:19:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Replaced a lot of test with assertions. I need to reason about this
	code and there are some suspicious things I'd like to get rid off.
	Please report failures to me.  

Sat Jul 26 21:24:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4.CVS 

Sat Jul 26 21:20:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4 

Sat Jul 26 21:17:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul 26 21:13:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation minor fixes.  

Sat Jul 26 21:12:09 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jul 26 20:34:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/version.c:

	Added info about Guile existence to the version string.  

Sat Jul 26 20:33:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	My regexps weren't smart enough. uri.string -> uri.protocol_str, the
	(hopefully) final bit.  

Sat Jul 26 20:30:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h, user.c:

	uri.string -> uri.protocol_str 

Sat Jul 26 11:26:50 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Some redundant tests were removed, minor optimization and cleanup.  

Sat Jul 26 11:16:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor optimization by increasing code redundancy a bit, we prevent a
	test with constant result to be done in a loop.  

Sat Jul 26 10:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	int -> register unsigned int for mask and cov, it seems safer.  

Sat Jul 26 10:55:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor hack to prevent double calls to get_opt_bool_tree() in some
	cases.  

Sat Jul 26 10:39:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Be a nice code and assertm() instead of if+internal() in
	term_send_event(). Added recovery failure path.  

Sat Jul 26 10:20:12 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor rewrite and assertions added in term_send_event().  

Sat Jul 26 10:01:24 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	pl.po was fixed (please review). fr.po was updated. .po files were
	resynced.  

Sat Jul 26 08:06:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Polish translation update, patch by witekfl.  

Sat Jul 26 08:04:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	build-in -> built-in, idea by witekfl.  

Sat Jul 26 02:14:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: mode -> prev_mode, attrib -> prev_attrib, A -> attrib, B ->
	mode in print_char().  

Sat Jul 26 01:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Hardcode the first indexes in add_cursor_mode_to_string() for speed.  

Sat Jul 26 01:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Try to optimize attribute updating in print_char() by doing a little
	extra copying but only one string adding.  

Sat Jul 26 00:39:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Trim the number of args to print_char() plus use variables instead
	of macro.  

Sat Jul 26 00:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Inline add_cursor_move_to_string() by order of pasky! 

Sat Jul 26 00:06:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce add_cursor_move_to_string().  

Fri Jul 25 22:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Format print_char() to look more homogenous and give the code room
	to breathe.  

Fri Jul 25 22:39:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Small optimization to only set charset if it is used (utf8).  

Fri Jul 25 22:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify alloc_screen().  

Fri Jul 25 22:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted, it seems calling uncompress_data() even
	with len = 0 is mandatory at some point... preventing some code
	simplification.  

Fri Jul 25 21:52:21 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A test against zero length was added, it prevents useless code to be
	executed. More to come, please review carefully.  

Fri Jul 25 21:48:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	if + internal() -> assertm().  

Fri Jul 25 21:18:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Optimization: let the preprocessor calculate constant values, a
	local macro RD_SIZE() was introduced.  

Fri Jul 25 20:24:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A bug introduced by last patch was fixed. Reported by Pasky.  

Fri Jul 25 20:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use add_bytes_to_string() when possible - it's faster, but
	sacrifices a bit of readability.  

Fri Jul 25 20:13:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix whitespace.  

Fri Jul 25 19:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	It won't. Reverted my last patches regarding enum protocol.  

Fri Jul 25 19:22:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Added missing include protocol/protocol.h. Let's see if it will
	work.  

Fri Jul 25 19:17:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	uri.protocol -> enum protocol 

Fri Jul 25 18:49:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Funny looking code is not always faster.  

Fri Jul 25 17:21:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Prevent useless symbols definition if bookmarks are not used.  

Fri Jul 25 17:21:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Comment updates - some my thoughts, extended documentation of few
	functions, typo/grammar fixes, blablabla.  

Fri Jul 25 17:16:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Updated commenting of struct uri.  

Fri Jul 25 17:03:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More uri->protocol usage.  

Fri Jul 25 16:57:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Only pass uri->protocol to get_protocol_handler().  

Fri Jul 25 16:36:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_focusable() cleanup and optimization.  

Fri Jul 25 16:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	Introduce uri->protocol field of type enum protocol. Should save us
	a few cycles.  

Fri Jul 25 16:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Add missing #include.  

Fri Jul 25 15:58:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h, user.c, http/http.c:

	Rename: uri->protocol to uri->string.  

Fri Jul 25 14:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Commented struct uri and updated parse_uri()'s comment.  

Fri Jul 25 14:13:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Added files generated by ltmain.sh 

Fri Jul 25 14:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Complete the alloc_term_screen -> alloc_screen renaming.  

Fri Jul 25 13:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	terminal/terminal.c:alloc_term_screen() ->
	terminal/screen.c:alloc_screen() and exported.  

Fri Jul 25 13:21:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, lowlevel/timer.c, terminal/Makefile.am,
	terminal/event.c, terminal/event.h, terminal/terminal.c,
	terminal/terminal.h, terminal/window.c:

	Separated out event handling from terminal/terminal.* to
	terminal/event.*.  

Fri Jul 25 13:07:43 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Some spaces and indentation fixes, minor optimizations, and return
	NULL on realloc() failure instead of retrying.  

Fri Jul 25 13:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.h:

	Don't include terminal/termianal.h from here. That's sick, man! 

Fri Jul 25 12:56:35 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Got rid of more gotos in convert_string(), macro PUTC was
	introduced, it speeds up thing by increasing code redundancy a bit.  

Fri Jul 25 12:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:39:05 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A goto was replaced in convert_string().  

Fri Jul 25 12:38:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/text/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:33:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	Ehm. strlcasecmp() -> strncasecmp(), it was not a bugfix ;-).
	Problems reported by zas.  

Fri Jul 25 10:03:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Interpretation of &nbsp &nbsp was fixed. Please review.  

Fri Jul 25 09:49:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print reverse links at top of current document, since it's a
	non-sense.  

Fri Jul 25 09:34:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html links synonyms were added, grouping by type was improved.  

Fri Jul 25 09:09:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html link rev|rel made is now associated to LT_AUTHOR, links of type
	LT_AUTHOR are no more displayed by default.  

Fri Jul 25 03:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/.cvsignore:

	Add .libs dir.  

Fri Jul 25 03:01:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Add .lo files and .libs dir.  

Fri Jul 25 02:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup extract_position().  

Fri Jul 25 02:34:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Small optimization in uri encoding.  

Fri Jul 25 01:21:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Optimize add_string_uri_filename_to_string() by using strlcasecmp()
	and relying on uri.data being always set.  

Fri Jul 25 00:48:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Use assertions for sanity checks.  

Fri Jul 25 00:39:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	Revert the optimization from version 1.6. Fixes gcc 3.3 compile
	warning that `in' may be undefined. Hopes this is correct.  

Fri Jul 25 00:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Don't check for strstr() twice.  

Thu Jul 24 16:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fix libtool macros order.  

Thu Jul 24 16:20:26 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	'compilation' fix.  

Thu Jul 24 16:19:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Disable shared libraries generation (at least for now).  

Thu Jul 24 16:18:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/guile/Makefile.am:

	Use libtool for libguile generation.  

Thu Jul 24 16:11:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/.vimrc:

	Corrected invalid path in fairie.  

Thu Jul 24 15:33:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, contrib/Makefile.am,
	contrib/guile/internal-hooks.scm, contrib/guile/user-hooks.scm,
	src/Makefile.am, src/main.c, src/dialogs/menu.c,
	src/protocol/proxy.c, src/sched/session.c,
	src/scripting/Makefile.am, src/scripting/guile/Makefile.am,
	src/scripting/guile/README, src/scripting/guile/core.c,
	src/scripting/guile/core.h, src/scripting/guile/hooks.c,
	src/scripting/guile/hooks.h:

	Support for internal scripting in scheme (w/ similiar interface as
	Lua exports) through Guile. Patch by Peter Wang and little updates
	by me.  

Thu Jul 24 15:32:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jul 24 15:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/guile/.cvsignore:

	Added fairy, even if useless here.  

Thu Jul 24 14:42:58 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	hx() and unhx() macros to static inline functions, better...  

Thu Jul 24 14:41:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/cache.c:

	Converted to use assertions in garbage_collection().  

Thu Jul 24 14:36:00 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	hx() and unhx() functions were converted to macros. A kind of forced
	inline ;).  

Thu Jul 24 14:02:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Simplification of abort_background_connections().  

Thu Jul 24 13:38:49 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup, optimization and assertions. Type casting to (int) is
	useless, so removed.  

Thu Jul 24 13:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/auth.c:

	Do not try to compare NULL or empty strings. Please review, it fixes
	a segfault.  

Thu Jul 24 13:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/util/blacklist.c:

	Some assertions and a comment about last field were added.  

Thu Jul 24 12:14:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/align.h:

	Jonas-inspired optimisation of get_bfu_color(). (It _seems_ to
	work...) 

Thu Jul 24 11:48:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.c:

	Eliminate two unnecessary temp-vars in checkboxes_width().  

Thu Jul 24 11:47:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	if + internal() parse_uri() brackets security check converted to an
	assertm(). As a side-effect fixed off-by-one bug in the check.  

Thu Jul 24 11:35:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/connection.h:

	s/struct download/struct file_download/ in load_url()'s description 
	(the comment wasn't updated when Jonas was renaming stuff).  

Thu Jul 24 11:23:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, renderer.c:

	Use list_empty().  

Thu Jul 24 11:09:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Assert fd->document in jump_to_link_number.  

Thu Jul 24 11:06:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/connect.c:

	Remove temp-var in dns_exception that is used only once.  

Thu Jul 24 10:55:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	send_event: Just pass @fd to do_mouse_event so as to save the latter 
	a call to current_frame.  

Thu Jul 24 10:48:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove unused parameters and an assertion of one of those parameters 
	from send_download_do().  

Thu Jul 24 10:43:04 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	s/rep[12]/rep/ now that the two labels are in separate functions and
	thus will not clash.  

Thu Jul 24 10:38:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	I don't normally mind when you explicitely initialise a static var
	to NULL, but it becomes a little confusing when you do it for one
	but not for others nearby that also need to be initialised to NULL
	(explicitly or implicitly).  

Thu Jul 24 10:26:18 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	view_menu has no dangerous items over view_menu_anon, so comment out
	view_menu_anon and its use in do_view_menu.  

Thu Jul 24 09:50:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Add $TMP to the list of environmental variables checked in
	textarea_edit().  

Thu Jul 24 09:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A segfault when viewing certain pages (especially internal http
	error page) was fixed, it was introduced by incomplete changes from
	pasky on my html_hx() patch :).  

Thu Jul 24 03:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Try to stracpy() follow_url_hook's return value naively instead of
	memacpy()ing it. Should be fine.  

Thu Jul 24 03:21:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_follow_url() tidyup and documentation.  

Thu Jul 24 03:15:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Tidied up and documented script_hook_goto_url().  

Thu Jul 24 03:11:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_quit() tidyup.  

Thu Jul 24 03:02:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Return 1 instead of the uri length in parse_uri(). It wasn't used so
	pretty pointless.  

Thu Jul 24 02:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Small cleanup and optimization of add_to_strn() by 'caching' the
	@dst length.  

Thu Jul 24 02:05:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Introduced load_config_from() and write_config_to(), even further
	backending load_config() and write_config(). Based on part of
	attachment 94 of bug 70, patch by kuser and me.  

Thu Jul 24 02:01:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Update comments for string utilities and move most of them to the
	header file.  

Thu Jul 24 01:49:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Well, kuser's complete scripting reworking is *not* yet in ;-).  

Thu Jul 24 01:48:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Let script_hook_follow_url() return value to acquire same semantics
	as script_hook_goto_url()'s: URL to go to, "" to go nowhere, NULL to
	go to the original URL. Attachment 97 of bug 70, patch by kuser and
	me.  

Thu Jul 24 01:43:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h:

	Changed script_hook_goto_url() to return the URL to go to ("" to go
	nowhere, NULL to go to the original URL), instead of directly
	calling goto_url() (which is now called from goto_url_with_hook()
	conditionally). Attachment 96 of bug 70, patch by kuser and me.  

Thu Jul 24 01:28:15 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Lua-specific CFLAGS and LIBS now *also* live in LUA_(CFLAGS|LIBS),
	whose are AC_SUBST()'d for Makefiles. Attachment 83 of bug 70, patch
	by kuser.  

Thu Jul 24 01:21:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, ltmain.sh, src/Makefile.am,
	src/scripting/lua/Makefile.am:

	[src/scripting/lua] liblua.a -> .libs/libscriptinglua.a and use
	libtool to generate it. Attachment 79 of bug 70, patch by kuser.  

Thu Jul 24 00:59:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	OPT_CONFIG -> OPT_LISTBOX and minor associated comment update.  

Thu Jul 24 00:52:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	parse_set() now saves the pre-value part of set command to @mirror
	only if the option has a @write method so we know we will get the
	actual option value in the @mirror as well. Hopefully fixes bug 216
	(alias'd options garbage the config file), reported by Dimitar
	Dimitrov <dinux@mail.bg>.  

Wed Jul 23 18:30:38 2003  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Added praises for Gerard and fis regarding the excellent yet hidden
	and frequently under-appreciated resources support they give us.  

Wed Jul 23 18:24:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/Makefile.am:

	Purge doc/book from the buildsystem.  

Wed Jul 23 18:20:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Create the linksarea temporary files in $TMPDIR || $TEMPDIR || $TEMP
	|| /tmp. Idea by Zardoz, fixes bug 232.  

Wed Jul 23 16:24:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3.CVS 

Wed Jul 23 16:21:19 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3 

Wed Jul 23 16:19:56 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 16:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Do not yell when adding zero chars to string, just return string in
	add_bytes_to_string() and add_xchar_to_string().  

Wed Jul 23 16:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Stricter length assertion, calling add_bytes_to_string(p, c, 0) is a
	non-sense.  

Wed Jul 23 16:04:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Attempt to fix strl*cmp() users compilation, reported by Zas.  

Wed Jul 23 16:02:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added in what location the assertion happenned information to the
	assert()s. This is how did I mean it, Jonas ;-).  

Wed Jul 23 15:57:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Oops, removed stale @m argument in string_assert().  

Wed Jul 23 15:57:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	string_assertm() -> string_assert() 

Wed Jul 23 15:56:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	strlcmp() and strlcasecmp() assertoin failures now contain caller
	coordinates (used string_assertm() instead of assert()).  

Wed Jul 23 15:54:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	In-debug_*() assertion failure messages now have standarized format
	and contain the name of function they happenned inside.  

Wed Jul 23 15:35:50 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Optimizations of add_char_to_string() and add_xchar_to_string(),
	calls to add_bytes_to_string() were removed.  

Wed Jul 23 15:34:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 15:32:52 2003  Petr Baudis <pasky@ucw.cz>:

	* po/gen_translations_stats.sh:

	Fixed alignment. Annoying fr.po ;-)).  

Wed Jul 23 15:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/uri.c, protocol/uri.h, protocol/user.c,
	protocol/http/http.c, sched/connection.c:

	Removed hardcoded assumption that the original URI string starts at
	uri.protocol, introduced struri() instead which encapsulates this
	fact nicely.  

Wed Jul 23 15:13:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 15:11:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Rearranged the declarations so that they cluster a little more
	naturally.  

Wed Jul 23 15:07:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/auth.c:

	Removed superfluous newline from the httpauth dialog box.  

Wed Jul 23 14:49:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed boolean expression in get_uri_string(), making it to actually
	work ;-).  

Wed Jul 23 14:09:09 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 14:05:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	It is now allowed to pass zarro @length to add_bytes_to_string().
	Hah, happiness! ... ;-) 

Wed Jul 23 13:46:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Moved the n1,n2 assert after -1 -> strlen(). Added comment
	explaining why :-). Idea by Jonas.  

Wed Jul 23 13:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small fix of strncmp -> strlcmp 

Wed Jul 23 13:00:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	Add missing include, reported by Zas.  

Wed Jul 23 12:59:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	strncmp() -> strlcmp() (this is a bugfix).  

Wed Jul 23 12:55:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Length checks + strncmp() -> strlcmp().  

Wed Jul 23 12:52:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Finish zas' renaming: set_auth_uid -> set_auth_user, set_auth_passwd
	-> set_auth_password.  

Wed Jul 23 12:51:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Reindentation.  

Wed Jul 23 12:49:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/blacklist.c:

	strncasecmp() -> strlcasecmp() (this is a bugfix).  

Wed Jul 23 12:46:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Use strlcasecmp() instead of length compares + strncasecmp().  

Wed Jul 23 12:32:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Introduced strlcmp() and strlcasecmp() string functions which act
	like str[case]cmp() but on non-zero-terminated strings.  

Wed Jul 23 08:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/auth.c, protocol/http/auth.c:

	MAX_USER/PASSWD_LEN -> HTTP_AUTH_USER/PASSWORD_MAXLEN.  

Wed Jul 23 08:29:18 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Struct http_auth_basic field passwd was renamed to password.  

Wed Jul 23 08:21:21 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Struct http_auth_basic field uid was renamed to user. Note http auth
	is broken for now, due to some bugs introduced by Jonas at some
	time.  

Wed Jul 23 03:12:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	One sleepy hacker trying to fix last commit.  

Wed Jul 23 03:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad cs->server lookup. Gracefully spotted by Miciah.  

Wed Jul 23 02:53:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Add the location information that got lost in the assertion usage.  

Wed Jul 23 02:46:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Synchronize the what-to-do dialog no-open offers message text with
	the open ones.  

Wed Jul 23 02:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Moved the @filename bussiness to upper level in type_query().  

Wed Jul 23 02:28:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	FIXME about @quoted and suspends in tag_attr_val_parse().  

Wed Jul 23 02:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elusive/parser/html/parser.c:

	Simplification of html reading loop test in tag_attr_val_parse().  

Wed Jul 23 02:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the get_opt_() change. Now it returns void * again.  

Wed Jul 23 02:10:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	More fixing. Give first parameter correct type.  

Wed Jul 23 01:54:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fix return value of add_string_uri_filename_to_string(). Reported by
	Jonas.  

Wed Jul 23 01:31:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Ok so I should wait with my bad patches until the "let's go against
	jonas crew" has gone to sleep. Revert bogus globhist toggling.  

Wed Jul 23 01:25:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Call elinks_internal() so errfile and errline gets set properly.  

Wed Jul 23 01:04:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	We only need one #define of add_opt_codepage_tree.  

Wed Jul 23 00:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the changes trying to use union for option values. I don't
	have the patience to fight the config system monster right now. :( 

Wed Jul 23 00:47:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, protocol/uri.c, protocol/uri.h,
	sched/download.c:

	get_filename_from_url -> add_string_uri_filename_to_string (these
	identifiers rule) 

Wed Jul 23 00:30:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	get_filenamepart_from_url() declared but nowhere defined, nowhere
	used. So blasted off by the merciless monster^W^W^Wme.  

Wed Jul 23 00:11:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Cache toggle value in private variable instead of the option trees.  

Wed Jul 23 00:06:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Sleep for a second after printing out any error message. Making
	debug() usable ;-).  

Tue Jul 22 23:50:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	add_opt() now takes the union value. Dummy value introduced.  

Tue Jul 22 23:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	Hmm seems we need the union to be unanonymous so moved out.  

Tue Jul 22 23:21:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Add union @value member to struct option.  

Tue Jul 22 23:09:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Make get_opt_() only return the option.  

Tue Jul 22 16:16:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/stub.c:

	#include "util/stub.h".  

Tue Jul 22 15:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, util/Makefile.am, util/string.c, util/string.h,
	util/stub.c, util/stub.h:

	Moved libc stub functions to util/stub.*. Idea by pasky.  

Tue Jul 22 15:50:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Use assertions and get rid of old #defines.  

Tue Jul 22 15:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	Slim location message composing by using add_format_to_string().  

Tue Jul 22 15:09:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Updating comments.  

Tue Jul 22 15:01:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Commented out decode_uri_string() for it is not used and thus shall
	not defile our binary.  

Tue Jul 22 15:01:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print lang if hreflang is the same.  

Tue Jul 22 14:57:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Improve add_string_uri_to_string()s comment.  

Tue Jul 22 14:53:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	viewer/text/link.c:

	Stripping of uri password is now done through a generic
	add_string_uri_to_string() (yes the name is just too good).  

Tue Jul 22 14:25:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Introduce add_uri_to_string(). It's basicly the old get_uri_string()
	that now uses it as a backend.  

Tue Jul 22 14:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.c, session.h:

	session.task_target -> session.task_target_frame 

Tue Jul 22 13:46:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print name as title if no title, print media attribute value if any,
	and fix alternate stylesheets displaying.  

Tue Jul 22 13:35:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Give preferences to our names for html links. As a side effect, it
	forces lowercased name, print previous instead of prev, and more.
	Related functions and struct were enabled.  

Tue Jul 22 11:22:12 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, french translation was updated.  

Tue Jul 22 10:57:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print lang attribute value if link type is LT_ALTERNATE_LANG.  

Tue Jul 22 10:31:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Code simplification.  

Tue Jul 22 10:27:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_link() is now using html_link_parse(). Behavior should be
	unchanged. New code was activated and a missing else was added to
	html_link_parse().  

Tue Jul 22 10:03:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link of type UP was added, not standart but sometimes encountered.  

Tue Jul 22 09:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	First step to html_link() rewrite, some struct and functions were
	added to identify type of an html link, in respect of w3c
	documentation. Enclosed in #if 0/#endif to prevent compilation
	errors for now.  

Tue Jul 22 03:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	[String util restructuring] Purge the old string utils. <insert
	sentimental grace>.  

Tue Jul 22 03:34:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	[String util restructuring] Convert (de|en)code_shell_safe_url().  

Tue Jul 22 03:30:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert some missing users in
	get_image_map(). Another strange goto function. Please verify.  

Tue Jul 22 03:09:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_option() but it's hard to
	figure out the gotos.  

Tue Jul 22 03:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Rearrange add_select_item() to get rid of double negation.  

Tue Jul 22 02:57:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Test that there something to add before calling
	add_bytes_to_string() in scan_http_equiv().  

Tue Jul 22 02:54:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	[String util restructuring] Convert in_sock().  

Tue Jul 22 02:44:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix FIXME comment.  

Tue Jul 22 02:43:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	[String util restructuring] Convert str_rd().  

Tue Jul 22 02:39:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	[String util restructuring] Convert print_current_link_do().  

Tue Jul 22 02:33:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reindentation of add_select_item().  

Tue Jul 22 02:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix last commit.  

Tue Jul 22 02:28:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, viewer/text/form.c:

	[String util restructuring] encode_uri_string() now takes struct
	string.  

Tue Jul 22 02:23:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_controls() now takes a string
	struct.  

Tue Jul 22 02:17:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_multipart() now takes a string
	struct.  

Tue Jul 22 02:10:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] Convert get_form_url().  

Tue Jul 22 01:52:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	[String util restructuring] scan_http_equiv() now takes two string
	structs simplifying things a bit.  

Tue Jul 22 01:37:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert get_image_map().  

Tue Jul 22 01:30:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_link(). Hmm not sure the if
	(text.source) is not always true.  

Tue Jul 22 01:20:31 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/8859_5.cp, src/intl/codepage.inc:

	Typo fix in charset alias: 8895 -> 8859. Reported by Recai Oktas
	<roktas@omu.edu.tr>, fixes bug 225.  

Tue Jul 22 01:09:41 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Fix a bug introduced in src/sched/session.c:1.110->1.111: The
	titlebar is blanked while another tab is loading.  

Tue Jul 22 01:08:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Comment about perverse string composition in
	download_window_function().  

Tue Jul 22 01:07:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] do_html_select() gets the treatment.
	It's a very cryptic function. A macro is introduced to get rid of
	code dublication. Some ard nullification of the string is necessary
	but not that pretty. Mabbe a pointer that a (clear|reset)_string
	would be useful? 

Tue Jul 22 01:05:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Removed a superfluous fill_area() in the code for drawing the
	tab-bar.  

Tue Jul 22 00:32:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	[String util restructuring] Convert format_html().  

Tue Jul 22 00:20:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	STR_MAGIC -> STRING_MAGIC 

Tue Jul 22 00:14:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] print_char() now takes struct string as
	parameter.  

Tue Jul 22 00:07:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	TODO added: An optimized add_term_escape_to_string() would be nice.  

Tue Jul 22 00:05:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] Convert redraw_screen().  

Mon Jul 21 23:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: os_dep.c, os_dep.h:

	Purge check_shell_security(). It's partly made obsolete by
	add_shell_safe_to_string().  

Mon Jul 21 23:48:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert subst_file().  

Mon Jul 21 23:43:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert get_temp_name().  

Mon Jul 21 23:41:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Make actually use of add_string_to_string() in add_dir_entry().  

Mon Jul 21 23:39:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Minor reindentation.  

Mon Jul 21 23:37:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Added a FIXME regarding Bugzilla problems to newlines-coping part of
	do_textarea(). Entities are decoded too late.  

Mon Jul 21 23:34:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert download_window_function(). Use
	string utils for both stat message code paths.  

Mon Jul 21 23:28:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	No code redundancy in convert_string() anymore - removed obsolete
	FIXME.  

Mon Jul 21 23:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	[String util restructuring] Attack get_stat_msg().  

Mon Jul 21 23:08:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Fixed another trailing blank line.  

Mon Jul 21 23:04:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added some pathetic comment about how ugly is this file getting.  

Mon Jul 21 23:01:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Use in print_current_titlex(). Hmm
	there's some string.length mangling that I don't like, but if it
	worked before it should work still.  

Mon Jul 21 23:01:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	When actually cleaning up in done_string(), also zero
	string->length.  

Mon Jul 21 22:58:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Removed superfluous newline introduced in 1.42.  

Mon Jul 21 22:52:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Rename and make
	add_session_ring_to_str() have the the generic string add type.
	Update the user.  

Mon Jul 21 22:38:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	[String util restructuring] Use it in encode_textarea().  

Mon Jul 21 22:31:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	[String util restructuring] This is untested but very trivial. We
	should probably use string_concat() to make things clearer.  

Mon Jul 21 22:19:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	[String util restructuring] First user of add_format_... since a
	little extra work should not be a problem here.  

Mon Jul 21 22:13:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Typo fix in summary for the document.html.link_display option: hmtl
	-> html.  

Mon Jul 21 22:01:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	[String util restructuring] 

Mon Jul 21 21:48:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/interlink.c:

	[String util restructuring] 

Mon Jul 21 18:34:00 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, util/string.h:

	A string magic failure was fixed. INIT_STRING(s,l) macro was
	introduced (better name ?).  

Mon Jul 21 18:01:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	More paranoid fs->state test and removed the useless second one from
	ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 18:00:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Minor tidyup of ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 17:58:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Removed memrchr() usage introduced in 1.8 and sticked a TODO
	instead. It was never used anyway and needs a proper stub if
	supposed to be used.  

Mon Jul 21 17:37:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/mime.c:

	Tidyup of check_encoding_type(), mainly fixed bad indentation
	introduced in 1.24. Bad Miciah! ;-) 

Mon Jul 21 16:24:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/user.c, util/conv.c, util/conv.h:

	Introduce add_shell_safe_to_string() and use it in subs_cmd().  

Mon Jul 21 16:22:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Temp. fix for first string magic catch. Thanks zas. :) 

Mon Jul 21 16:22:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Rename: (set|check)_magic -> (set|check)_string_magic.  

Mon Jul 21 15:52:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Didn't I patch this? Test uri->hostlen instead of uri->host.  

Mon Jul 21 14:18:57 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/options.c, util/string.c,
	util/string.h:

	Magic check for struct string. Some changes related to this
	implementation, especially string initialization with NULL_STRING.
	Currently string debug is enabled by default in --enable-debug. This
	should catch operations on badly initialized struct string.  

Mon Jul 21 13:26:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Test returned value of init_string().  

Mon Jul 21 10:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	switch tidyup.  

Mon Jul 21 10:17:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Minor tidyup.  

Mon Jul 21 09:17:15 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Do not mix preallocated strings with not preallocated ones. Reported
	by Miciah, fix by me.  

Mon Jul 21 06:52:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	[String util restructuring] (132 add_to_str() remains) 

Mon Jul 21 06:19:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	[String util restructuring] Last one for now which should also fix
	unfortunate too soon removal of option name (de|en)coders.  

Mon Jul 21 06:14:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	[String util restructuring] (1) We joggle two strings. An
	un+/encoded. Use the unencoded to 'cache' @fcp so it can be free()d
	making cleaning up easier and no goto required.  

Mon Jul 21 06:05:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	[String util restructuring] option_type_info->write now takes a
	struct string. s/add_quoted_to_str/add_optstring_to_string/ using
	quoted encode adder as backend. Makes src/config/ work again.  

Mon Jul 21 05:58:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	[String util restructuring] Even though the { "", 0 } initialization
	is potentially bad, this has to be.  

Mon Jul 21 05:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Remove option name encoders. Old users now use add_optname_...  

Mon Jul 21 05:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	[String util restructuring] I am getting the feeling that
	make_keystroke is not the best name.  

Mon Jul 21 05:49:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	[String util restructuring] 

Mon Jul 21 05:47:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, conf.h:

	[String util restructuring] The next few patches in src/config/
	depends on each other. This one is big sorry.  

Mon Jul 21 05:22:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	[String util restructuring] 

Mon Jul 21 05:20:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	[String util restructuring] *Yawn* maybe we should add some macro to
	pep things up a bit.  

Mon Jul 21 05:16:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	[String util restructuring] Use for cache info msg box assembling.  

Mon Jul 21 05:12:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	[String util restructuring] Yay we get to use the new
	add_optname_... and hopefully also a bit smarter handling of dot
	adding. Unidentified Patch Object: remove unused rmdots() ... my
	excuse: I have 1200 lines to sync and don't care 'bout these 9 so
	pasky please be in a good mood when you read this one. ;) 

Mon Jul 21 05:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	[String util restructuring] Please excuse the indentation but before
	we didn't even test if the initialization was good and now we do.  

Mon Jul 21 04:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h:

	[String util restructuring] Last patch depends on this one since
	@header is a string struct.  

Mon Jul 21 04:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	[String util restructuring] Also make the defined add_*_string()
	take string struct. TODO: they should go in favour of generic
	add_uri_(components|parts)_to_string() that can also be used as
	backend by get_uri_string().  

Mon Jul 21 04:51:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	[String util restructuring] A little strangeness in
	encode_uri_string() which hopefully will be improved by a possible
	introduction of add_encoded_uri_string() later.  

Mon Jul 21 04:38:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Test uri->hostlen not uri->host.  

Mon Jul 21 04:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp.c:

	[String util restructuring] Don't panic. A bit preparing mixed in
	this patch mainly the macros for adding const strings to the
	fragment. Also some more test before adding. Could maybe use format
	string some places to improve readability.  

Mon Jul 21 04:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[String util restructuring] 

Mon Jul 21 04:11:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/finger.c:

	[String util restructuring] Use in the request sending.  

Mon Jul 21 04:09:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	[String util restructuring] First usage. Abandon file_data struct
	for string struct and make stat_* also take string.  

Mon Jul 21 04:00:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	Introduce the new restructured string util.  

Mon Jul 21 00:21:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Trivial @q optimization at parse_frame_widths().  

Mon Jul 21 00:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Partially reverted html_h() changes in zas' 1.146, restored proper
	encapsulation of the @h parameter.  

Mon Jul 21 00:03:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() synced w/ put_chars_conv() : put_chars_conv() now
	uses convert_string() as its backend. Finally got rid of this
	particularily annoying code duplication. Pasky is da master! 

Sun Jul 20 23:56:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() syncing w/ put_chars_conv() : Use dynamically
	allocated @buffer inside of put_chars_conv(), and call put_chars()
	only once at the very end. (XXX: Memory hit?) Also slight
	optimization (exit right after dummy put_chars() if charslen is
	zero).  

Sun Jul 20 23:43:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Moved @b to local
	scope in convert_string().  

Sun Jul 20 23:42:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @pp -> @charspos at
	the both sides.  

Sun Jul 20 23:41:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @bp -> @bufferpos at
	the both sides.  

Sun Jul 20 23:35:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Left the @buffer
	reallocation code only at one place, using the same path to reach it
	as in put_chars_conv(). The diffs are nicely sync'd up already ;-).  

Sun Jul 20 23:25:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Double-side tidyup.  

Sun Jul 20 23:16:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @ct ->
	@convert_table, @c -> @chars, @l -> @charslen.  

Sun Jul 20 23:12:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Fix the bug 213 side-bug: don't eat the character terminating entity
	string if it's not valid entity terminator (';'). Some comment
	sticked around about how buggy this piece of code is.  

Sun Jul 20 22:36:23 2003  Petr Baudis <pasky@ucw.cz>:

	* po/it.po:

	Italian translation update by Fabio. Ufff. Postponing mail for over
	a month doesn't pay off, says my hour spent by resolving 80
	conflicts ;-). At least I learned a little Italian :^).  

Sun Jul 20 21:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Vendor (ELinks project) email addy should be elinks-users mailing
	list instead of my mail addy ;-).  

Sun Jul 20 21:15:49 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Described recommended process of getting in changes to the
	elinks.spec.in file.  

Sun Jul 20 21:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	s/Copyright/License/, as Silviu Cojocaru <silviucc@home.ro> and vim
	syntax highlighting hints ;-).  

Sun Jul 20 21:02:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Commented out funny assertm() which (I _hope_) can never fail ;-).  

Sun Jul 20 20:33:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Use sprintf() instead of ulongcat() for printing the UID/GID
	numerical value, since we want to pad from right, not from left.
	Sorry, zas, that's something ulongcat() doesn't seem to be able to
	do so far ;-).  

Sun Jul 20 20:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Simplify the final ..<->.foo decision procedure, it should be much
	more straightforward (and elegant) now. This should hopefully also
	be the final fix to the ..foo being shown bug.  

Sun Jul 20 20:19:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Distributed the decision procedure comment in file_visible() to the
	individual steps.  

Sun Jul 20 20:18:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	file_visible(): @d_name -> @name 

Sun Jul 20 20:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Ehm. Compilation fix.  

Sun Jul 20 20:17:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Code flow naturalization in file_visible().  

Sun Jul 20 20:14:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Commented the file_visible() function, minor inner comment fix.  

Sun Jul 20 20:11:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Moved hidden-file decision procedure to new file_visible() function.  

Sun Jul 20 15:44:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, http/auth.c:

	Tidyup of the get_uri_string() calls.  

Sun Jul 20 15:44:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	get_uri_string()'s @components is of type enum uri_component.  

Sun Jul 20 15:43:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Moved the enum uri_component declaration near get_uri_string.  

Sun Jul 20 15:43:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Updated get_uri_string()'s comment.  

Sun Jul 20 15:37:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/auth.c:

	Use the new MIN() macro.  

Sun Jul 20 15:31:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Defined global macros MIN() and MAX(). I dreamed about their
	existence for a long time already, so here they go, for purely my
	personal pleasure! ;p 

Sun Jul 20 15:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/auth.c:

	get_uri_string() now add the marked components. Users do ~(URI_*).  

Sun Jul 20 15:12:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Use assertm() instead of if <-> internal() pairs at few places.  

Sun Jul 20 14:41:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c:

	Reverted the HTML <link> tag handling rework. Too big, changing
	option meaning without changing option name, removing useful option.
	Difficult to see what was changed and how. Please split and
	recheckin as gradual changes.  

Sun Jul 20 10:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	Html link tag handling was reworked. Feel free to improve (tip: bfu
	menu for these).  

Sat Jul 19 23:40:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Rename: add_opt_string() -> add_opt_str() by kuser.  

Sat Jul 19 23:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Some dummy comment about why option is defined as it is. Pasky is
	sleepy.  

Sat Jul 19 22:29:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Comment of uri_component enum. CVS IS BACK! Weeeeee :))) 

Thu Jul 17 08:56:30 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/align.h, config/cmdline.c, config/conf.c,
	config/dialogs.c, config/options.c, config/options.h,
	config/opttypes.c, config/urlhist.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, globhist/globhist.c,
	lowlevel/interlink.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, protocol/file.c,
	protocol/user.c, sched/download.c, sched/session.c,
	terminal/terminal.c, util/secsave.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/view.c:

	Type of root_options and cmdline_options to struct option *. General
	cleanup. Patch by Karsten Schölzel <kuser@gmx.de>.  

Thu Jul 17 06:55:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/window.c:

	Fix bug 33: Problems with drawing out of tabs. I'm hardly sure of
	this change but it seems to work.  
	
	The problem was related to 'empty windows' used by image maps and
	listboxes.  I first tried substituting register_bottom_half() for
	add_empty_window() but that caused bad stuff with image maps so I
	changed empty_window_handler() to call term_send_event() instead of
	directly calling the next window's handler.  

Thu Jul 17 04:23:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix off by one error.  

Wed Jul 16 08:41:59 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po and french translation was updated.  

Wed Jul 16 02:45:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	point_intersect(): Removed assert(p1) because p1 will not have been
	set if the last search yielded no results.  

Tue Jul 15 23:15:07 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Consistency fix from Jonas: s/void\nstatic /static void\n/ 

Tue Jul 15 22:32:10 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	An option named document.html.link_display was added to control how
	html link elements are rendered.  

Tue Jul 15 22:18:00 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: main.c, config/options.c, globhist/globhist.c,
	globhist/globhist.h:

	Fix bug 157: Periodically save globhist to disk.  

Tue Jul 15 22:15:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Fix bug 99: ^K in textareas should kill to end-of-line, not
	end-of-buffer, and ^U should kill to beginning-of-line, not
	beginning-of-buffer.  Please review my super-funky code.  

Tue Jul 15 21:53:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link: information now contains hreflang and type if they are
	provided.  

Tue Jul 15 21:33:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplification in check_encoding_type() composed by Miciah and me.  

Tue Jul 15 20:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Fix logic in check_encoding_type().  

Tue Jul 15 20:18:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, dialogs/menu.h,
	document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, document/html/renderer.h,
	elusive/renderer/text/renderer.c, sched/history.c, sched/session.c,
	sched/session.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c,
	viewer/text/link.h, viewer/text/search.c, viewer/text/search.h,
	viewer/text/textarea.c, viewer/text/textarea.h, viewer/text/view.c,
	viewer/text/view.h, viewer/text/vs.c, viewer/text/vs.h:

	Another big rename: struct f_data_c -> struct document_view. Idea by
	pasky.  

Tue Jul 15 17:48:44 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/viewer/text/link.c:

	Typo fix. ~ char was removed from title of reset button. .po files
	were updated.  

Tue Jul 15 16:52:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Missing renames pasted by Zas.  

Tue Jul 15 12:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/frames.c,
	document/html/frames.h, document/html/renderer.c,
	document/html/renderer.h, document/html/tables.c,
	elusive/renderer/text/renderer.c, sched/history.c, sched/session.c,
	viewer/dump/dump.c, viewer/dump/dump.h, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c, viewer/text/link.h,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c,
	viewer/text/view.h, viewer/text/vs.c:

	Rename: struct f_data -> struct document and (f_)data member names
	to document. Idea by pasky.  

Tue Jul 15 06:32:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Removed an unnecessary test.  

Tue Jul 15 06:17:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	If we're using snprintf to truncate, we might as well use it to pad
	as well, thus saving a variable, a loop, and some calls to
	add_chr_to_str.  

Tue Jul 15 06:07:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	Make MAX_(BIND|CONNECT)_TRIES attempts rather than
	MAX_(BIND|CONNECT)_TRIES - 1 attempts.  

Tue Jul 15 06:02:05 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	Declare list_directory() and read_file() as returning values of type 
	enum connection_state.  

Tue Jul 15 05:52:50 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file.c:

	When protocol.file.show_hidden_files is enabled, hide even files
	with names beginning with multiple dots.  

Mon Jul 14 20:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Switch off code to add default port in get_uri_string(). HTTP Auth
	hopefully won't suffer. Reported by Zas.  

Mon Jul 14 19:51:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/cache.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	lowlevel/connect.c, mime/mime.c, protocol/Makefile.am,
	protocol/file.c, protocol/finger.c, protocol/ftp.c, protocol/uri.c,
	protocol/uri.h, protocol/url.c, protocol/url.h,
	protocol/http/auth.c, sched/download.c, sched/session.c,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Complete first part of the url -> uri switch. Some of the moved
	functions still need to be cleaned up and we could probably populate
	with struct uri more places.  

Mon Jul 14 19:27:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in get_filename_from_url(). Last dep. part II. ;p 

Mon Jul 14 19:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_directories(). Last dependency on
	parse_url().  

Mon Jul 14 18:48:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_url(). Note: !parse_url() ==
	parse_uri().  

Mon Jul 14 18:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in join_url(). Note: !parse_url() == parse_uri().  

Mon Jul 14 18:23:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplify check_encoding_extension() and correct the comment.  

Mon Jul 14 10:17:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Forgot to tune the assertions to how the function is now used.
	Thanks Zardoz.  

Mon Jul 14 07:15:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	Typo fix: costum -> custom.  

Mon Jul 14 07:09:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A double affectation was fixed ( int a = a = b;) 

Sun Jul 13 13:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Renames in extract_proxy().  

Sun Jul 13 13:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	protocol/url.c, protocol/url.h, viewer/text/link.c:

	Move get_uri_string() .. and rename it.  

Sun Jul 13 13:02:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	strip_url_password() now uses get_uri_string().  

Sun Jul 13 12:57:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	get_uri_string() is now a Swiss army knife. Use with care. ;) 

Sun Jul 13 10:24:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Correctly handle PROTOCOL_UNKNOWN and free_syntax in uri string
	composing.  

Sun Jul 13 10:17:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	The quick solution for configuring adding of data to the uri string.  

Sat Jul 12 20:42:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make get_uri_string() IPv6 aware and query protocol system for
	slashes.  

Sat Jul 12 20:21:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/url.h, viewer/text/form.c:

	Move (en|de)code_url_string() and friend doing s/url/uri/.  

Sat Jul 12 19:23:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use entry->valid to test for invalid entries. ;) 

Sat Jul 12 17:38:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix whitespace and update comments.  

Sat Jul 12 17:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix realm double freeing on alloc failure.  

Sat Jul 12 17:23:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Remove useless test and assertion + comments updates.  

Sat Jul 12 17:17:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	*mumble* Fix http auth basic again. *mumble* 

Sat Jul 12 16:51:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c, protocol/http/auth.h:

	Properly exporting of invalid entries through accessor.  

Sat Jul 12 13:08:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Allocate uid and passwd together.  

Sat Jul 12 12:59:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, http.c:

	Actually copy something in set_auth_*().  

Fri Jul 11 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: url.c, url.h:

	Delete dead code.  

Fri Jul 11 19:58:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update comments.  

Fri Jul 11 19:48:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Get rid of cleanup gotos by freeing @newurl after lookup.  

Fri Jul 11 19:40:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use uri->(user*|pass*) for comparison.  

Fri Jul 11 19:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	One goto iterator out, one label to go.  

Fri Jul 11 19:20:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Get rid of add_auth_code enum. Instead the added entry is returned.  

Fri Jul 11 17:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	A few fixes: Always set entry->valid according to @uid and @passwd.  
	Proper initialization of @uid and @passwd.  The entry can be invalid
	so removed from assertion.  

Fri Jul 11 14:26:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update and add a few comments.  

Fri Jul 11 06:06:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix assertion failure and return value.  

Fri Jul 11 04:35:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/auth.c:

	Mark the entry valid when the user confirmed.  

Fri Jul 11 03:56:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Aasert members when updating.  

Fri Jul 11 03:53:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Simplify the updating code path.  

Fri Jul 11 03:47:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update the entry members step by step instead of recreating the
	entry.  

Thu Jul 10 23:05:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	More usage of entry->valid to mark if @uid and @passwd is properly
	defined.  

Thu Jul 10 22:44:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/http/auth.c:

	Always allocate @uid and @passwd in init_auth_entry().  

Thu Jul 10 13:53:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Try to cleanup the complicated auth entry comparison.  

Thu Jul 10 13:27:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/auth.c:

	Rename: get_auth_url() -> get_uri_string(), and move it to
	protocol/uri.* 

Thu Jul 10 13:19:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.h:

	Make @valid and @blocked members boolean fields.  

Thu Jul 10 13:17:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.h:

	Whitespace fix.  

Thu Jul 10 13:16:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h:

	Remove unused url_len member.  

Thu Jul 10 13:02:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Split out auth entry initialization and get rid of gotos.  

Thu Jul 10 12:50:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Writeout @ret usage.  

Thu Jul 10 12:38:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Simplify the code path in auth adding.  

Thu Jul 10 12:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Remove allocation of username and password when adding an entry.  

Thu Jul 10 12:05:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Fix leak in the alloc failure code path.  

Thu Jul 10 04:38:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Generalize get_auth_url() to use protocol system for getting port
	number.  

Thu Jul 10 04:28:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Use struct uri in get_auth_entry(), 

Thu Jul 10 03:02:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Urify add_auth_entry(). Add missing #include.  

Thu Jul 10 02:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Update comment to use enum names.  

Thu Jul 10 02:46:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Use enum for add_auth_entry().  

Thu Jul 10 00:59:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	assert(info) _before_ dereferencing it.  

Thu Jul 10 00:35:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: auth.c, auth.h, http.c:

	Urify find_auth().  

Thu Jul 10 00:00:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix leak when parse_uri() failed.  

Wed Jul  9 23:56:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/user.c, protocol/http/http.c, sched/connection.c:

	Passing uristring to parse_uri() seems more natural.  

Wed Jul  9 23:03:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bookmarks/dialogs.c, config/dialogs.c,
	config/dialogs.h, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/edit.h, dialogs/hierbox.c,
	dialogs/hierbox.h, dialogs/info.c, dialogs/info.h, dialogs/menu.c,
	dialogs/menu.h, dialogs/options.c, dialogs/options.h,
	dialogs/refresh.c, globhist/dialogs.c, lowlevel/interlink.c,
	lowlevel/timer.c, mime/backend/default.c, osdep/os_dep.c,
	protocol/user.c, protocol/http/http.c, scripting/lua/core.c,
	ssl/connect.c, viewer/text/form.h, viewer/text/link.h,
	viewer/text/search.h, viewer/text/view.h:

	Misc. #include reordering all over the map.  

Wed Jul  9 20:21:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Compilation fix.  

Wed Jul  9 20:09:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	More mailcap and mime.types locations.  

Wed Jul  9 19:46:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Callocize back init_keepalive_connection().  

Wed Jul  9 19:40:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Uncle pasky's today compilation fixes.  

Wed Jul  9 19:21:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	add_host_connection() simplification. And always use mem_calloc()
	when allocating structures, Jonas.  

Wed Jul  9 18:37:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored assertion error message and recovery path for
	assigned!=download at load_url().  

Wed Jul  9 18:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored the assertion failure message in !list_empty() assertion at
	check_keepalive_connections().  

Wed Jul  9 18:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Fixed add_keepalive_connection() c->sock1!=-1 recovery path.  

Wed Jul  9 18:19:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed bug intrduced in 1.152. POST requests _are_ unrestartable! 

Wed Jul  9 17:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[P]urify user protocol handling. Should speed up thing a bit.  
	Reorder the flow so we bail out earlier if no program is defined.  
	Added note about possible problem of host containing also username
	uri part.  

Wed Jul  9 15:08:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Also show bad URL syntax warning if @proto is NULL.  

Wed Jul  9 15:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Require that @prot is non NULL and fix possible leak when no @host
	was returned.  

Wed Jul  9 14:39:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Merge in prog_func() in user_func().  

Wed Jul  9 14:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Split out subject scanning, and elimintate changes of the url
	string.  

Wed Jul  9 13:41:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove bad assertion and readd connection->from initialization.
	Triggered by Miciah unbacking to a https page.  

Wed Jul  9 08:54:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Compilation fix: Typecasts in the GNUTLS code.  

Wed Jul  9 01:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad memmove() size. Spotted by Zardoz.  

Wed Jul  9 01:51:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix collection of mailto subject.  

Wed Jul  9 01:24:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix untested usage of @subj when scanning for @subj_end. Reported by
	pasky.  

Wed Jul  9 01:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make uri hostnames end also before '?' (needed for mailto uris).  

Tue Jul  8 23:21:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added some mailto test cases.  

Tue Jul  8 19:04:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Simplify mailto subject handling even though it seems not to be
	correctly used.  

Tue Jul  8 18:46:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, user.c, user.h:

	Knock out more 'url' util users.  

Tue Jul  8 18:00:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	#include POST_CHAR from the right place.  

Tue Jul  8 15:31:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Never mind the segfaults .. here come the fix.  

Tue Jul  8 15:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Pep up the cookie loading code to be less boring. Test return
	values.  

Tue Jul  8 13:54:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Get rid of gotos in allocation failure code path making it slower
	but more readable.  

Tue Jul  8 13:50:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Free the struct in free_cookie().  

Tue Jul  8 13:49:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Generalize and populate usage of cleanup_cookies().  

Tue Jul  8 13:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad domain and server matching introduced in last patch.  

Tue Jul  8 12:56:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Complete uri usage in cookie land.  

Tue Jul  8 12:39:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Prepare for the uri take over in cookie land. Fix some untested
	return values.  

Tue Jul  8 12:23:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.h:

	Move end_of_dir() to uri header.  

Tue Jul  8 12:18:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	mime/backend/default.c, sched/connection.c:

	Remove some #includes of protocol/url.h.  

Tue Jul  8 02:25:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, http/http.c:

	Complete the struct uri take over in the http backend.  

Tue Jul  8 02:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Struct uri usage: Revenge of the buggy servers.  

Tue Jul  8 01:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More struct uri usage.  

Tue Jul  8 01:24:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Convert send_cookies() to use struct uri.  

Tue Jul  8 00:02:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Better sanity checking in http_send_header() + small cleanups.  
	Generalize adding hostname to header so IPv6 are correctly handled
	for REFERER_SAME_URL.  

Mon Jul  7 22:27:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix leak triggered by `elinks --dump localhost:8080`.  

Mon Jul  7 20:13:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Generalize keyact_box_item size.  

Mon Jul  7 20:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Small cleanup.  

Mon Jul  7 19:15:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Complete struct uri usage in http_send_header().  

Mon Jul  7 19:14:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove check_queue_bugs() assertion failure handling. It's debug
	code so we dump core.  

Mon Jul  7 17:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add '.' before extension to temporary file.  

Mon Jul  7 15:36:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, util/blacklist.c, util/blacklist.h:

	Preparing for complete struct uri usage in http protocol backend.  

Mon Jul  7 15:04:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/Makefile.am, lowlevel/af_unix.c,
	lowlevel/af_unix.h, lowlevel/interlink.c, lowlevel/interlink.h:

	lowlevel/af_unix.* -> lowlevel/interlink.*.  

Mon Jul  7 13:14:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix post uri handling. Reported by hq_star on #elinks.  

Mon Jul  7 01:29:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Remove dead code that has been replaced by struct uri usage.  

Mon Jul  7 01:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Optimize the encoding extension testing.  

Mon Jul  7 00:57:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	More usage of connection uri.  

Mon Jul  7 00:12:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/elusive/parser/css/: atrule.c, parser.c, ruleset.c,
	scanner.c, state.h, tree.c:

	Revert the assertion failure handling.  
	1) Some are only useful while getting it running 
	2) I cannot bare having to deal with goto spaghetti code already ;) 
	3) Checking of some max stack depth should maybe be generic and
	always done.  Let's get it running before we start do smart things
	...  

Sun Jul  6 23:24:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Don't think hidden file's name is its extension. (Ignore dot at the
	start of string or right after a slash when looking for a file
	extension.) Discovered by Diablo-D3.  

Sun Jul  6 23:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/hotkey.c, dialogs/document.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, elusive/parser/css/atrule.c,
	elusive/parser/css/parser.c, elusive/parser/css/ruleset.c,
	elusive/parser/css/scanner.c, elusive/parser/css/state.h,
	elusive/parser/css/tree.c, lowlevel/af_unix.c,
	lowlevel/interlink.c, protocol/protocol.c, protocol/uri.c,
	protocol/http/http.c, sched/connection.c, ssl/connect.c,
	util/fastfind.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	(Re)introduced recovery paths for failed assertions. Ufff.... Jonas,
	please check check_queue_bugs().  

Sun Jul  6 23:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup get_temp_name(). The appended extension is now everything
	after first dot, so external handler is given a better hint.  

Sun Jul  6 22:15:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Added note about if_assert_failed to assert() description.  

Sun Jul  6 22:15:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Moved if_assert_failed after other assert functions.  

Sun Jul  6 22:04:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Introduced if_assert_failed to exclude assert_failed tests and the
	(dead) recovery code from FASTMEM.  

Sun Jul  6 21:51:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Whitespace fixes.  

Sun Jul  6 21:49:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Make sure assert_failed is initialized to zero. (I heard that global
	variables are automatically zeroed but didn't check that, so I'm
	taking the safe path.  

Sun Jul  6 21:25:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, main.c, protocol/http/http.c,
	protocol/http/https.c, sched/connection.c, ssl/connect.c,
	ssl/ssl.c, ssl/ssl.h:

	Removed SSL includes from elinks.h, this introduces not quite nice
	hack, but a great opportunity for certain thing (you'll see when you
	look at the diff >:) and mainly it speeds the compilation up by cca
	0.7s - 0.8s per file on my machine (which is about half of the whole
	compilation time for the smaller files). Violence, in the proper
	context, is good. Will you hit me? 

Sun Jul  6 20:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Add missing ssl/ssl.h  #include.  

Sun Jul  6 20:44:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/connection.h, ssl/connect.c, protocol/http/http.c:

	ssl_t *ssl -> void *ssl in struct connection. And we don't need to
	include ssl/ssl.h anymore in sched/connection.h as a nice
	side-effect.  

Sun Jul  6 20:28:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced assert_failed, which is set to 1 if the last assert(m)()
	failed, zero otherwise. Recovery paths made possible! ;-) Now who
	will reintroduce them...? ;) 

Sun Jul  6 17:53:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Removed some boring useless explicit values enumeration. If things
	will stop working now, blame this.  

Sun Jul  6 17:51:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Assert sanity.  

Sun Jul  6 11:53:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move check_queue_bugs() and add #else branch so it don't have to be
	wrapped in macros.  

Sun Jul  6 11:11:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, sched/connection.h:

	Move read_func back to struct connection. No ftp_c.._info is valid.
	Reported by zas.  

Sun Jul  6 08:48:15 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	cmd_buffer must be last field in struct ftp_connection_info ! 

Sun Jul  6 03:42:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/proxy.c, sched/connection.c:

	Oops move scripting hook #include.  

Sun Jul  6 03:18:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Hopefully the keepalive connection host should be finally correct.
	Added assertion to back it up.  

Sun Jul  6 02:45:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Finally knock out connection->url and users meaning lots of small
	optimizations.  

Sun Jul  6 01:31:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split out basic connection initialization.  

Sun Jul  6 00:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/proxy.c, protocol/proxy.h,
	sched/connection.c:

	Move out proxy handling.  

Sat Jul  5 19:09:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Add label removed in (void *) -1 cleanup when using GNUTLS. Reported
	by Zardoz.  

Sat Jul  5 18:13:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A small fix of the keepalive connection host initialization.  

Sat Jul  5 17:57:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Grouped and further commented host connection management.  

Sat Jul  5 16:13:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove INFO_LIST from connect_info(): unused and queue is public
	anyway.  

Sat Jul  5 13:19:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use correct option in forcehtml_cmd().  

Sat Jul  5 13:06:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, sched/connection.c:

	Remove captions from aliases introduced in mime/ integration.  

Sat Jul  5 12:45:43 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, osdep/os_dep.c:

	Some hardcoded in os_dep.c command strings are now defined in
	setup.h.  

Sat Jul  5 10:24:40 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, dialogs/document.h, dialogs/menu.c,
	viewer/text/view.c:

	Some assertion failures were fixed, some actions require a current
	document to make sense. nowhere_box() function was introduced, it
	print You are nowhere! message.  

Sat Jul  5 09:16:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	HTML4 attributes frame, border, rules for tables were not handled as
	it should. This was fixed accordingly to w3.org recommendations.
	This fixes bug 29.  

Sat Jul  5 08:07:41 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul  5 03:41:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/README:

	Smooth out the rough edges. Add title and CVS Id tag.  

Sat Jul  5 03:20:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/https.c, sched/connection.c, ssl/connect.c:

	Initialize connection->ssl in https handler. This way we can get rid
	of the ugly (void *) -1 hack and bail out earlier. Untested but
	fairly simple.  

Sat Jul  5 01:20:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2.CVS 

Sat Jul  5 01:14:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2 

Sat Jul  5 00:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Some final retouching of the boxes. I'm an ascii-art freak. Almost
	there, CIA commit #999! 

Sat Jul  5 00:48:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Retouched and actualized the ideal dependency tree, added couple of
	notes. CTYRI! 

Sat Jul  5 00:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, sched/connection.c, sched/connection.h,
	ssl/connect.c:

	'Predeclare' struct connection so we can give connection->conn_info
	proper type. (4 mississipi) 

Sat Jul  5 00:29:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, sched/connection.h:

	Cleanups of struct connection: remove unused member and move
	read_func to ftp_connection_info. If it should be reintroduced it
	should have some typedef attached.  

Fri Jul  4 23:35:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Make connection->unrestartable a boolean field. It was apparently
	involved in a http hack to mark form posting. We now use
	connection->uri.post to check that instead.  

Fri Jul  4 23:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.h, ssl/connect.c:

	Make connection->no_tsl a boolean field.  

Fri Jul  4 21:41:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Rename: add_keepalive_socket() -> add_keepalive_connection().  

Fri Jul  4 21:11:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	More connection uri usage and a small keepalive_connection
	allocation optimization.  

Fri Jul  4 20:55:44 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Potential bug fixed, get_url_data() may return NULL, causing
	stracpy() to fail. Minor cleanup and optimizations.  

Fri Jul  4 20:45:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup and move try_to_suspend_connection() closer to the
	user.  

Fri Jul  4 20:25:30 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp.c:

	Do not print . or .. directories in ftp listing, this bug was
	introduced recently.  

Fri Jul  4 20:18:39 2003  Petr Baudis <pasky@ucw.cz>:

	* test/README:

	Grammar fixes. 13! 

Fri Jul  4 20:04:06 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print link of type text/css or image/x-icon, but let links of
	other types to be print. It clarifies a point discussed on #elinks.  

Fri Jul  4 19:27:03 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A buffer is now used for post data decoding, it prevents repeated
	calls to add_chr_to_str(). add_bytes_to_str() is now used instead.
	unhx() replaces equivalent code. As a side effect it fixes a warning
	(add_chr_to_str a=0) issued in debug mode when calling
	add_chr_to_str() with a nul char.  

Fri Jul  4 19:19:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	A assertion failure was fixed. goto_url() should only be called if
	url is not NULL.  

Fri Jul  4 19:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: keepalive_connection->conn -> keepalive_connection->socket.  

Fri Jul  4 18:57:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: host_connection->conn -> host_connection->connections.  

Fri Jul  4 18:50:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove useless test: get_protocol_handler() always returns handler.  

Fri Jul  4 18:45:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Reorganize host_connection management. Connection with no hosts
	(file protocol) are not in the list. Introduce accessors for the
	list. Uh and finally fix the buggy uri usage from previous patch.  

Fri Jul  4 15:53:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Introduce and use get_uri_port().  

Fri Jul  4 15:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Change policy so all struct uri validation is done in accessors.  

Fri Jul  4 15:01:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Use struct uri when getting protocol handler.  

Fri Jul  4 14:50:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move out initialization of keepalive connections. Makes way for
	removal of evil gotos. But now we always del_connection().  

Fri Jul  4 14:11:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Slightly alter done_keepalive_connection() to make socket closing
	optional. Use it in has_keepalive.connection().  

Fri Jul  4 13:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Rename: get_keepalive_socket() -> has_keepalive_connection() +
	altered it's semantics to match the name.  

Fri Jul  4 13:14:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: del_keepalive_socket() -> done_keepalive_connection() + and
	use it when aborting all.  

Fri Jul  4 12:58:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Some initial usage of connection->uri introduced. Uri helpers has to
	be added to go further.  

Fri Jul  4 12:12:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Add struct uri member to struct connection. It is not used yet but
	bad uris are detected by initialization.  

Fri Jul  4 11:56:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Rename: set_timeout() -> set_connection_timeout().  

Fri Jul  4 10:57:16 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/search.c, viewer/text/search.h:

	get_search_data() and associate functions were moved from renderer.c
	to viewer/text/search.c, and becomes static.  

Fri Jul  4 09:45:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor optimizations.  

Fri Jul  4 09:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: Makefile.am, parser.h, renderer.c,
	renderer.h, frames.c, frames.h:

	Frame and frameset functions were moved to frames.{c,h}.  

Fri Jul  4 02:16:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/cache.h, sched/connection.h, sched/download.h,
	sched/session.h:

	Reorder and trim #includes.  

Fri Jul  4 01:49:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/location.h, sched/session.c,
	sched/session.h, viewer/dump/dump.c, viewer/dump/dump.h,
	viewer/text/view.c:

	Monster patch. Rename: struct status -> struct download. Idea by
	pasky. Also contains some variable renames, sorry.  

Fri Jul  4 00:54:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Reorder #includes.  

Fri Jul  4 00:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/download.c, sched/download.h:

	Rename: struct download -> struct file_download. Idea by pasky.  

Fri Jul  4 00:46:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Added macros for testing connection state 'groups'.  

Fri Jul  4 00:25:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h:

	Put connection states in enum connection_state. Added paskys
	description of values.  

Thu Jul  3 23:30:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Group together keepalive functions.  

Thu Jul  3 22:55:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_keepalive_list() -> get_keepalive_connection().  

Thu Jul  3 22:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_list() -> get_host_connection().  

Thu Jul  3 22:43:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: h_conn -> host_connection, k_conn -> keepalive_connection.  

Thu Jul  3 22:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Useless test prevention.  

Thu Jul  3 22:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split up stat_timer() to get rid of @st_r variable.  

Thu Jul  3 22:31:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor cleanup, optimizations, assert(), ....  

Thu Jul  3 22:26:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A few cleanups.  

Thu Jul  3 22:08:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Bunch of miscelleanous cleanup, optimizations, assert(), ....  

Thu Jul  3 21:51:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use assertions instead of internal() calls.  

Thu Jul  3 21:36:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	assert() and assertm()...  

Thu Jul  3 21:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	check_queue_bugs() was greatly simplified. Don't try to sort and
	check again.  

Thu Jul  3 21:26:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	And a useless comment about previous stuff is gone...  

Thu Jul  3 21:25:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	An unused parameter was removed from format_frame().  

Thu Jul  3 21:22:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: getpri() -> get_priority().  

Thu Jul  3 21:20:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	if () internal() -> assertm().  

Thu Jul  3 21:10:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Cleanup and if () internal() -> assertm().  

Thu Jul  3 21:05:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, document/html/renderer.c,
	document/html/renderer.h:

	enum cp_status was introduced, long variables names are now used in
	get_convert_table(), cleanup.  

Thu Jul  3 21:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use given connections id in connection_disappeared().  

Thu Jul  3 20:52:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Rename connection->count to connection->id.  

Thu Jul  3 20:38:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, document/cache.h,
	document/html/renderer.h, osdep/os_dep.c, sched/connection.c,
	sched/connection.h, util/types.h:

	Eliminate tcount typedef. Hope nobody minds.  

Thu Jul  3 20:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup.  

Thu Jul  3 10:59:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/info.c, document/cache.c, document/html/renderer.c,
	lowlevel/select.c, sched/connection.c, util/types.h:

	Rename: CI_* -> INFO_*.  

Thu Jul  3 10:45:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Moved check_queue_bugs() call to del_connection().  

Thu Jul  3 10:32:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Put PRI_* values in enum connection_priority.  

Thu Jul  3 10:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Improved and moved comments for load_url to header file 

Thu Jul  3 09:00:05 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Jul  3 08:47:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Cleanup, optimizations, missing assertions...  

Thu Jul  3 08:24:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Some missing assertions were added.  

Thu Jul  3 08:19:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor optimization.  

Thu Jul  3 03:10:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Only use one bit for boolean members.  

Thu Jul  3 02:25:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/parser.c,
	document/html/renderer.c:

	The last few compile fixes. ELinks is back online again.  

Thu Jul  3 02:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, search.c, view.c, view.h, vs.c:

	Some more brute force compilation fixes. I hope you sleep tight zas
	;) 

Thu Jul  3 01:40:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h:

	Some compilation fixes that I should apparently provide.  

Thu Jul  3 01:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/finger.c, protocol/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h,
	ssl/connect.c:

	Rename: setcstate() -> set_connection_state().  

Thu Jul  3 01:23:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: Makefile.am, link.c, link.h, view.c, view.h:

	Moved link-related stuff from viewer/text/view.* to
	viewer/text/link.*. Jonas will do the compilation fixes associated.
	Have fun, Jonas ;-).  

Thu Jul  3 01:11:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Remove (hopefully) dead code.  

Thu Jul  3 01:03:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, sched/download.c, sched/download.h,
	sched/error.c, sched/history.c, sched/location.h, sched/session.c,
	sched/session.h, ssl/connect.c, ssl/connect.h:

	More #include sched/connection.h fixes.  

Thu Jul  3 00:47:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/Makefile.am,
	viewer/text/form.c, viewer/text/form.h, viewer/text/textarea.c,
	viewer/text/textarea.h, viewer/text/view.c, viewer/text/view.h:

	Moved forms drawing/handling from viewer/text/view.* to
	viewer/text/form.*. Jonas will do the compilation fixes associated.  

Thu Jul  3 00:28:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/info.c, dialogs/menu.c, document/cache.c,
	lowlevel/connect.c, lowlevel/connect.h, protocol/file.c,
	protocol/ftp.c, protocol/protocol.c, protocol/protocol.h,
	protocol/http/http.c, protocol/http/https.c, scripting/lua/hooks.h,
	viewer/dump/dump.c, viewer/dump/dump.h:

	sched/sched.h #includes changed to sched/connection.h 

Thu Jul  3 00:18:36 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: textarea.c, textarea.h, view.c, view.h:

	Compilation fixes.  

Thu Jul  3 00:15:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	sched/sched.* -> sched/connection.* 

Thu Jul  3 00:14:31 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Moved a static function before its caller.  

Thu Jul  3 00:12:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, connection.h, sched.c, sched.h:

	Reverted the code move out of sched/sched.*. Don't panic, the change
	is good, but we'll do it w/ preserving history.  

Thu Jul  3 00:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.h, textarea.h:

	Header file fix.  

Thu Jul  3 00:07:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: terminal/terminal.c, viewer/text/Makefile.am,
	viewer/text/textarea.c, viewer/text/textarea.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved textarea-related functions from viewer/text/view.* to
	viewer/text/textarea.*. Zas will do the compilation fixes
	associated.  

Thu Jul  3 00:05:27 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Fix status message printing...  

Thu Jul  3 00:02:59 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Stricter assertions.  

Wed Jul  2 23:58:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup.  

Wed Jul  2 23:56:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Missing variables fixes.  

Wed Jul  2 23:49:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	The textarea fieldop handlers now take additional @rep parameter.  

Wed Jul  2 23:47:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Moved format_text() call from encode_controls() to
	encode_textarea().  

Wed Jul  2 23:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Ambiguous else fixes.  

Wed Jul  2 23:40:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	Moved connection management to sched/connection.* 

Wed Jul  2 23:38:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Textarea drawing moved from draw_form_entry() to draw_textarea().  

Wed Jul  2 23:21:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Extracted out the textarea field_op handlers to separate functions.  

Wed Jul  2 23:14:16 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, view.h:

	Compilation fixes.  

Wed Jul  2 23:03:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Namespace cleanup: _area_cursor() -> area_cursor().  

Wed Jul  2 23:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Should include search.h. Thanks, zas.  

Wed Jul  2 23:00:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Namespace cleanup: _search_for() -> search_for_do().  

Wed Jul  2 22:59:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, viewer/text/Makefile.am,
	viewer/text/search.c, viewer/text/search.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved searching-related functions from viewer/text/view.* to
	viewer/text/search.*. Zas will do the compile fixes associated.  

Wed Jul  2 22:36:41 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hmmm, french syntax error...  

Wed Jul  2 22:07:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	An assertion failure was fixed.  

Wed Jul  2 22:00:44 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Assertions: The End. Please report any assertion failure, false
	alerts may occur due to strictness.  

Wed Jul  2 20:47:50 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	back() and unback() functions were removed. go_back() and
	go_unback() are directly used.  

Wed Jul  2 20:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions.  

Wed Jul  2 18:30:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:17:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:05:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:55:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops.  

Wed Jul  2 17:54:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:26:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Oops, so he had _this_ in the srch_cmp() fail route ;-). Fixed
	search highlighting bug introduced by my last cleanups, reported and
	pointed out by zas.  

Wed Jul  2 17:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:17:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Minor tidyup. I wonder what so precious Mikulas had in the
	srch_cmp() fail route ;-).  

Wed Jul  2 17:13:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	is_in_range() cleanup, removal of some useless checks.  

Wed Jul  2 17:02:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 16:46:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. get_search() cleanup and optimization.  

Wed Jul  2 16:26:17 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. Please report any issue.  

Wed Jul  2 16:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some assertions were added. Please report any issue.  

Wed Jul  2 16:02:55 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	Minor cleanup. Please do not write a = b == c but a = (b == c).  

Wed Jul  2 12:05:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Misc. small cleanups.  

Wed Jul  2 12:01:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix printing of checking message.  

Wed Jul  2 10:46:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Calling xpand_lines() with part->data->data == NULL is a valid case.
	Assertion was modified. It fixes bug 221.  

Wed Jul  2 10:23:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.h, sched.h:

	Added comment by pasky of connection->pri + fix #includes.  

Wed Jul  2 02:17:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Rename: h_conns -> host_connections.  

Wed Jul  2 02:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	You do not see this commit. You never saw any commit like this. This
	commit does not exist. Better go and have some reading on e2, and
	forget this whole thing. (Comments update.) 

Wed Jul  2 02:06:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix BACKTRACE being wrongfully defined.  

Wed Jul  2 01:52:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	term being NULL is a valid case in get_bfu_color().  

Wed Jul  2 00:47:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/lua/hooks.lua.in:

	Prefixes by involved (aka A. Valente) and Grzegorz Adam Hankiewicz
	added.  

Wed Jul  2 00:44:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/cache.c, document/cache.h,
	sched/connection.c, sched/sched.c, util/types.h:

	Move type declarations from elinks.h to util/types.h but pasky still
	needs to rebuild *MUAHAHAHA* 

Wed Jul  2 00:16:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/cache.h, sched/connection.h,
	sched/sched.h:

	Minor #include cleanups and move longlong #define to elinks.h 

Tue Jul  1 22:39:00 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A bug in entities cache was fixed. &Agrave;&agrave; gave two upcased
	chars, and &agrave;&Agrave two lowcased chars due to a case
	insensitive comparaison. Trivial.  

Tue Jul  1 22:06:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	XD_TOP -> XD_UP, XD_BOTTOM -> XD_DOWN 

Tue Jul  1 22:04:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimizations in set_xchar() and draw_frame_lines(). An enum was
	introduced for direction parameter of set_xchar().  

Tue Jul  1 21:36:38 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Last bits of draw_form_entry() cleanup.  

Tue Jul  1 21:24:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup and optimization in draw_form_entry(), case FC_TEXTAREA.  

Tue Jul  1 21:06:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup in draw_form_entry(), case FC_TEXTAREA, step 1.  

Tue Jul  1 20:59:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some declarations and one affectation were moved near where they are
	used.  

Tue Jul  1 20:51:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Reverted patches concerning get_last_link() and get_first_link(),
	they are buggy and cause segfaults.  

Tue Jul  1 20:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops, last patch was fixed. ;) 

Tue Jul  1 20:16:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in draw_form_entry(), case FC_FILE. Please review
	carefully.  

Tue Jul  1 19:50:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_last_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 19:47:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_first_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 18:26:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/auth.c:

	Indentation fixed, and small cleanup.  

Tue Jul  1 16:27:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.c:

	Use struct uri to pass uri component.  

Tue Jul  1 15:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: Makefile.am, uri.c, uri.h, url.c:

	Move parse_url() handling to new parse_uri().  

Tue Jul  1 15:07:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	get_form_url() cleanup and optimization.  

Tue Jul  1 14:28:48 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_controls() cleanup and optimization.  

Tue Jul  1 14:12:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_multipart() cleanup and optimization.  

Tue Jul  1 00:00:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Small optimization + use of assertm.  

Mon Jun 30 23:23:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optim. in get_c_width().  

Mon Jun 30 23:20:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in format_table().  

Mon Jun 30 23:08:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in display_table_frames().  

Mon Jun 30 22:57:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Cleanup and optimizations in format_table().  

Mon Jun 30 22:22:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some major optimizations were done in display_table_frames().  

Mon Jun 30 21:47:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_vline() was optimized.  

Mon Jun 30 21:17:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights() cleanup and optimization.  

Mon Jun 30 21:00:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths() cleanup attempt. Old inactive and/or debugging
	code was removed. Some optimizations were made.  

Mon Jun 30 20:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	A TODO comment was added concerning distribute_widths().  

Mon Jun 30 18:01:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_width() cleanup and optimization.  

Mon Jun 30 17:50:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths() cleanup and optimization.  

Mon Jun 30 10:05:16 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 29 22:32:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some gotos and for were replaced by while loops in new_cell().  

Sun Jun 29 22:20:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells() was optimized a bit.  

Sun Jun 29 22:13:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	In calloc() we trust...  

Sun Jun 29 22:12:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields reordering aka padding prevention.  

Sun Jun 29 21:55:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	get_bfu_color() was optimized.  

Sun Jun 29 16:07:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimization.  

Sun Jun 29 15:55:31 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	A variable declaration was moved near where it is used.  

Sun Jun 29 15:51:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Multiple if were replaced by a switch.  

Sun Jun 29 12:52:12 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Loading message was inappropriate, it was replaced by "No document"
	message.  

Sun Jun 29 12:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup, optimizations concerning tab bar. A loading message is now
	printed when we do not have any title yet, and a tab separator is
	now printed.  

Sat Jun 28 23:34:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, dialogs/mime.c,
	mime/backend/default.c:

	Introduce generic function for encoding/decoding option names.  

Sat Jun 28 23:07:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	Minor cleanup + use of register keyword.  

Sat Jun 28 21:43:55 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, os_dep.h:

	Cleanup.  

Sat Jun 28 11:56:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/mime.c:

	Cleanup.  

Sat Jun 28 11:13:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/os_dep.c:

	Tidyup.  

Sat Jun 28 10:47:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/cache.h, lowlevel/af_unix.h, lowlevel/dns.h,
	lowlevel/interlink.h, lowlevel/select.h, osdep/os_dep.h,
	protocol/ftpparse.h:

	Rename header file guards.  

Sat Jun 28 10:46:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Use bitwidth of one for boolean members.  

Sat Jun 28 09:52:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Patches causing bugs 214 and 218 were reverted. It fixes bug 218.  

Fri Jun 27 20:51:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	checkboxes_width() was optimized a bit.  

Fri Jun 27 20:44:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	min_max_checkboxes_width() was renamed checkboxes_width().  

Fri Jun 27 20:42:37 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/msgbox.c, bfu/text.c,
	bfu/text.h, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, sched/download.c,
	scripting/lua/core.c:

	min_max_text_width() was renamed text_width().  

Fri Jun 27 20:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, sched/download.c, scripting/lua/core.c:

	min_max_buttons_width() was renamed  buttons_width().  

Fri Jun 27 20:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	checkboxes_width() was replaced with min_max_checkboxes_width().  

Fri Jun 27 20:22:28 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, scripting/lua/core.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:19:08 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: hierbox.c, mime.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:16:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/edit.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:12:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: msgbox.c, inpfield.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:11:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	min_max_text_width() was introduced.  

Fri Jun 27 19:57:49 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:54:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, sched/download.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:50:47 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: hierbox.c, mime.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:46:47 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/edit.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:44:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, msgbox.c:

	Populate with min_max_buttons_width().  

Fri Jun 27 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	min_max_buttons_width() was introduced, it does the same job that
	min_buttons_width() and max_buttons_width() successive calls.  

Fri Jun 27 19:26:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Indentation level was reduced in display_button().  

Fri Jun 27 01:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, po/leet.po, src/intl/gettext/libintl.c:

	1337 |_@|\|6|_|463 VV45 4|)|)3|).  

Fri Jun 27 00:16:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Cleanup and remove stale function declaration.  

Fri Jun 27 00:01:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Cleanup check_protocol().  

Thu Jun 26 23:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Eliminate get_prot_info() by adding one more accessor and
	simplifying get_protocol_*handler().  

Thu Jun 26 22:09:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	An obsolete TODO comment was removed.  

Thu Jun 26 21:50:04 2003  Laurent Monin <zas@norz.org>:

	* po/README:

	Some notes about #~ and make update-po were added.  

Thu Jun 26 21:39:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	enum uri_scheme -> enum protocol, @scheme -> @protocol. This
	finalizes the 'scheme' term evaporation.  

Thu Jun 26 21:34:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Rename: SCHEME_* -> PROTOCOL_*, requested by pasky.  

Thu Jun 26 21:19:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	The protocol (external) handler function has now its own type
	(protocol_(external_)handler) ! This could ease things a little for
	those with weaker in-mind C parser.  

Thu Jun 26 21:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Great! Pasky joins the fun and every goes down the drain! ;) fix
	func -> handler rename.  

Thu Jun 26 21:09:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Normalize some methods: get_protocol_handle() ->
	get_protocol_handler(), get_external_protocol_function() ->
	get_protocol_external_handler().  

Thu Jun 26 21:07:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, finger.c, ftp.c, protocol.c, protocol.h,
	user.c, http/http.c, http/https.c:

	protocol_backend.(func -> handler, nc_func (which was NoCache_func)
	-> external_handler). Have a nice night spent by conflicts
	resolving, Jonas :-).  

Thu Jun 26 20:57:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Minor tidyup and reindentation.  

Thu Jun 26 20:19:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Add and user accessors for protocol backends members. I feel better
	already :) 

Thu Jun 26 20:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file.h, finger.c, finger.h, ftp.c, ftp.h,
	protocol.c, user.c, user.h, http/http.c, http/http.h, http/https.c,
	http/https.h:

	Move all protocol backend declarations out. (Warning big patch, but
	simple) + fix some unconforming guards in the header files met on
	the way.  

Thu Jun 26 19:17:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Use enum uri_scheme.  

Thu Jun 26 19:11:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added file://localhost/ test ;) 

Thu Jun 26 18:35:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Introduce uri_scheme enum.  

Thu Jun 26 18:34:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Make struct protocol_backend public for now atleast.  

Thu Jun 26 18:14:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Start the process of backending the protocol/ handling.  

Thu Jun 26 17:06:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/url.c, protocol/url.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Integrate and use file added by last commit.  

Thu Jun 26 17:02:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	The basic protocol implementation management moved from
	protocol/url.* 

Thu Jun 26 16:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Encapsulate @protocols access even further so we easier split it
	out.  

Thu Jun 26 16:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Add README to DISTFILES ...  

Thu Jun 26 16:24:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Some basic introduction for translators. Idea by zas.  

Thu Jun 26 14:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/.cvsignore:

	Add elinks.pot just in case.  

Thu Jun 26 13:55:55 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c, intl/charsets.h,
	document/html/colors.c, document/html/colors.h,
	document/html/parser.c, document/html/parser.h:

	fastfind initializations are now done at start, using
	init_xxx_lookup() functions. This prevents a superfluous test at
	search time.  

Thu Jun 26 13:26:57 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c:

	get_cp_index() now uses fastfind (if USE_FASTFIND is defined).  

Thu Jun 26 11:24:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Reverted part of the patch. Do test for '..' ;).  

Thu Jun 26 11:10:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Misc small cleanups and optimizations and fixes: 
		Don't test for ".." when comparing directory entries.  
		Only pass the @dirpath length to add_dir_entry().  
		Only iterate over @entries if nonempty, and test before free()ing
		it.  

Thu Jun 26 09:39:37 2003  Laurent Monin <zas@norz.org>:

	* Unicode/7bit.cp, Unicode/7bitrepl.lnx, Unicode/8859_1.cp,
	Unicode/8859_10.cp, Unicode/8859_13.cp, Unicode/8859_14.cp,
	Unicode/8859_15.cp, Unicode/8859_16.cp, Unicode/8859_2.cp,
	Unicode/8859_3.cp, Unicode/8859_4.cp, Unicode/8859_5.cp,
	Unicode/8859_6.cp, Unicode/8859_7.cp, Unicode/8859_8.cp,
	Unicode/8859_9.cp, Unicode/cp1250.cp, Unicode/cp1251.cp,
	Unicode/cp1256.cp, Unicode/cp1257.cp, Unicode/cp437.cp,
	Unicode/cp850.cp, Unicode/cp852.cp, Unicode/cp866.cp,
	Unicode/koi8_r.cp, Unicode/macroman.cp, Unicode/tcvn5712.cp,
	Unicode/tr7bit.awk, Unicode/viscii.cp, src/intl/codepage.inc,
	src/intl/uni_7b.inc:

	Charsets aliases were updated using information from iana.org, and
	GNU recode utility.  

Thu Jun 26 08:29:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. A bg.po warning was fixed.  

Wed Jun 25 10:30:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Optimization: memmove(p, p, n) is useless.  

Wed Jun 25 10:27:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file.c:

	Minor cleanup.  

Wed Jun 25 10:15:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Simplify and optimize stat_date().  

Wed Jun 25 09:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup stat_user() and split it up.  

Wed Jun 25 09:06:58 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Bug 214 was fixed. It was introduced by last "viewport - 1" patch.
	Pasky, please review the fix ;).  

Wed Jun 25 08:39:06 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Bug 213 was fixed. We eat &nsbp &nbsp<foo>, but not &nbsp&nbsp123 or
	&nbsp=123 ...  

Tue Jun 24 23:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Inline stat_* functions + group them.  

Tue Jun 24 23:00:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Include the set*() functions in stat_mode().  

Tue Jun 24 22:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split up stat_mode().  

Tue Jun 24 22:21:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup stat_* functions.  

Tue Jun 24 21:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make xmlto the preferred doctool (the only one that can build the
	book).  

Tue Jun 24 20:58:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Some esotheric speech about changes.  

Tue Jun 24 20:57:02 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Some errors were fixed. Author was added. Translators please review.  

Tue Jun 24 20:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/hacking.txt:

	Update the language file section, fix expanded CVS tags and add
	comment about splitting big patches.  

Tue Jun 24 20:46:05 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Fatal errors were fixed in recent translation update. Concerned
	translators should check that.  

Tue Jun 24 20:14:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Changes from mime/ integration and the new show_hidden_files.  

Tue Jun 24 20:13:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc, TODO, manpages/Makefile.am,
	tools/help2doc:

	Misc small fixes and updates all over the map. Sorry.  

Tue Jun 24 17:52:34 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, po/bg.po:

	Some bulgarian translation updates by dinux <dinux@mail.bg>.  

Tue Jun 24 14:56:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Stupid patch was reverted. Reported by Pasky.  

Tue Jun 24 14:47:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	A comment was added about a strange part of code...  

Tue Jun 24 14:29:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/cache.c:

	Code redundancy was reduced.  

Tue Jun 24 12:32:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor clearifying cleanups.  

Tue Jun 24 12:08:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Purify the directory_entry allocation by making @name contain whole 
	path, so concatenation in add_dir_entry() isn't needed.  Also fix
	some possible leaks in the allocation.  

Tue Jun 24 10:03:19 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	A useless comment was removed.  

Tue Jun 24 09:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	redraw_screen() was optimized, a useless test was removed, it fixes
	the status bar which was not drawn until its end.  

Tue Jun 24 01:51:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Inline all the split up functions and (my) cleanups should be done.  

Tue Jun 24 01:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Reduce the number of variables.  

Tue Jun 24 01:29:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup the listing of (sym)links.  

Tue Jun 24 01:19:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	'Cache' html escaped entry->name to simplify and optimize.  

Tue Jun 24 00:35:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Relocate the testing of link is directory.  

Tue Jun 24 00:26:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Get ready to streamline the code for adding link entries.  

Tue Jun 24 00:07:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor cleanup and commenting.  

Mon Jun 23 23:36:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Sorry re^2name: (file_)info -> (file_)data seems more appropriate.  

Mon Jun 23 23:29:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out the adding of one directory entry to the fragment. Last
	one! ;) 

Mon Jun 23 23:12:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	:s/filename/dirpath/ in directory functions.  

Mon Jun 23 23:10:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out the adding of directory entries to the fragment.  

Mon Jun 23 22:41:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Another bunch of renames + small optimizations by sharing strlen()
	results.  

Mon Jun 23 21:53:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: dirs -> directory_entry + its members.  

Mon Jun 23 21:47:23 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Various optimizations: mark screen as dirty only if needed, make use
	of register, and move calculations outside loops (in fill_area()).  

Mon Jun 23 21:14:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup.  

Mon Jun 23 15:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanups and comments.  

Mon Jun 23 14:47:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanups and commenting.  

Mon Jun 23 05:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Big cleanup removing lot's of redundant code by grouping and
	indenting. Also added a few comments.  

Mon Jun 23 03:11:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: d -> directory.  

Mon Jun 23 03:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Readd test of @stream. Hmm where did it go? 

Mon Jun 23 03:04:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: e -> cache.  

Mon Jun 23 02:55:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: c -> connection.  

Mon Jun 23 02:43:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Slim redundant error handling code.  

Mon Jun 23 02:27:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Test @stream before using it.  

Mon Jun 23 02:24:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Cleanup.  

Mon Jun 23 02:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Split out file reading to separate function.  

Mon Jun 23 01:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Move trying of encoding extensions to separate function and simplify
	it.  

Mon Jun 23 00:51:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Simplify so guess_encoding() is only called on filenames where
	encoding extensions have not been tried.  Plus we are not really
	interested in the filename of some tried encoding extension.  

Mon Jun 23 00:08:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Quite huge patch splitting out the directory listing to separate
	function.  

Sun Jun 22 23:17:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Updating at DIKU led to this fix for bug introduced in revision
	1.38.  

Sun Jun 22 17:32:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Oops fix @tmp not being used.  

Sun Jun 22 17:24:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Misc cleanups + 2 leak fixes 

Sun Jun 22 16:47:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	More renames.  

Sun Jun 22 16:43:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: fl -> fragmentlen.  

Sun Jun 22 16:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: file -> fragment.  

Sun Jun 22 16:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Followup cleanup: move vars close to their usage.  

Sun Jun 22 16:19:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	First try to open @name as a directory.  This greatly simplifies the
	code path and means there's only one entry point into the dir code.  

Sun Jun 22 16:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Combine !S_ISREG() branch with regular file branch.  

Sun Jun 22 15:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, util/error.h:

	GCC 3.3 do_not_optimize_here() introduced and used in tp_display()
	so vs.plain is set properly.  

Sun Jun 22 12:17:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jun 22 12:13:30 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/file.c:

	An option to specify if hidden files should be shown in local
	directory listing was added (protocol.file.show_hidden_files). It
	defaults to 1 for now to preserve old behavior.  

Sat Jun 21 22:45:38 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	How should all the .c and .h files start.  

Sat Jun 21 22:40:09 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Undo :). Everything is fine ;).  

Sat Jun 21 22:39:27 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Dummy commit just to test whether ciabot still works fine even in
	multidirs situation.  

Sat Jun 21 15:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Move the directory coloring closer to where it is used.  

Sat Jun 21 14:55:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Decentralize @readlen.  

Sat Jun 21 14:45:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Rename: h -> fd, r -> readlen.  

Sat Jun 21 14:30:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.h:

	Standarized .h header. Zassie zassie... *sigh* 

Sat Jun 21 14:28:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Sticked a TODO about the troubles of l10n in the protocol/ corner.  

Sat Jun 21 14:25:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, http.c:

	http_connection_info.(error_code -> http_code). It is set to @h
	always, regardless on @h's value. http_error_document() itself tests
	whether the code is suitable for generic error document or not.
	Also, don't show the generic error document for documents with
	status 3xx.  

Sat Jun 21 14:19:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element content is now bold.  

Sat Jun 21 14:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element now triggers not html_center() but html_h1(), which is
	like html_h2() but w/ default alignment AL_CENTER.  

Sat Jun 21 14:13:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	html_h() now takes additional parameter @default_align.  

Sat Jun 21 14:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintfa() instead of asprintf().  

Sat Jun 21 14:10:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	(v)asprintfa() ELinks memory managment wrappers for vasprintf()
	introduced.  

Sat Jun 21 14:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file.c:

	Minor cleanup.  

Sat Jun 21 13:43:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, util/encoding.c, util/encoding.h:

	Rename NB_KNOWN_ENCODING -> ENCODINGS_KNOWN 

Sat Jun 21 13:25:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/: README, completion.tcsh:

	Fix typo and added note about how out dated tcsh completions are.  

Sat Jun 21 13:16:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Correctly cast &str in the asprintf() call.  

Sat Jun 21 13:15:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintf() instead of vasprintf(), fixed the calling semantics.
	*hide* 

Sat Jun 21 13:14:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Extended the error message by some dumb talk about what happenned.  

Sat Jun 21 13:01:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Compilation fix: info->error_code -> @code in http_error_document().  

Sat Jun 21 13:01:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Removed now superfluous @errs from http_error_document().  

Sat Jun 21 13:00:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	The error document is now a format string. Tidied up the generated
	document.  

Sat Jun 21 12:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, codes.h, http.c:

	Moved the error document generator from thats_all_folks fragment of
	read_http_data() to http_error_document(), placed in
	protocol/http/codes.c.  

Sat Jun 21 12:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Added missing inclusion of codes.h, removed superfluous stdio.h
	inclusion.  

Sat Jun 21 12:28:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Normalized the file header. The second time already. *grumble* 

Sat Jun 21 12:26:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Oops, added forgotten break in the chunk loop ;-).  

Sat Jun 21 12:12:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Typo fix.  

Sat Jun 21 12:10:48 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: Makefile.am, codes.c, codes.h, http.c:

	Text error message corresponding to error code is now printed.
	codes.{c,h} provide a way to check if code is known and if yes,
	which is its associate message.  

Sat Jun 21 12:03:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Sticked a TODO.  

Sat Jun 21 12:03:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Converted some of the HTTP error dummy document to lowercase.  

Sat Jun 21 12:01:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunk decoding loop was converted from goto teleports to a while
	(1) loop.  

Sat Jun 21 11:58:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunked branch moved outside of an else branch, the not-chunked
	branch now jumps at read_more at the end. I didn't reindent the
	chunked branch and i know why.  

Sat Jun 21 11:54:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Moved the thats_all_folks code at the end of read_http_data().  

Sat Jun 21 11:52:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Random minor cleanups --- mostly just reindentations.  

Sat Jun 21 11:06:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	error_code replaces code and is_error integers.  

Sat Jun 21 11:02:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix for bug 165 was improved a bit, now title is set.  

Sat Jun 21 10:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fast hack to fix bug 165. Feel free to improve.  

Sat Jun 21 09:09:08 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun 21 08:54:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	A now useless comment was removed.  

Sat Jun 21 08:48:11 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, lowlevel/af_unix.c, lowlevel/interlink.c:

	General cleanup. MAX_BIND_TRIES was removed from setup.h since it is
	only used in af_unix.c/AF_INET and there is no need for the user to
	change it. Code related to perhaps future remote mode was removed.  

Sat Jun 21 08:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Compilation fix: incomplete renaming of stat to status broke
	compilation, it was fixed. Pasky please review.  

Sat Jun 21 00:33:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Cleanup --- random variables renamed, some tests moved to nicer
	places and so on.  

Sat Jun 21 00:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved -dump implementation from dump_end() into dump_formatted().  

Sat Jun 21 00:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	stat->ce->... -> ce->...  

Sat Jun 21 00:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Oops, dump_source()'s return value fix.  

Sat Jun 21 00:17:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Reduced indentation.  

Sat Jun 21 00:16:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved the -source code from dump_end() into dump_source().  

Sat Jun 21 00:03:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reverted most of the recent changes done in the realm of
	parse_element() and get_attr_val(). They were buggy beyond repair
	and it was agreed that they should go. I tried to preserve at least
	part of the cleanups done in the meantime, so some variable renames
	etc could be carried over.  

Fri Jun 20 23:34:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Rename decoding_handler -> decoding_backend to better reflex the
	recent changes.  

Fri Jun 20 23:02:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, util/encoding.c, util/encoding.h:

	Further encapsulate the decoding handlers by making the name part of
	the backend.  

Fri Jun 20 20:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Cleanups.  

Fri Jun 20 19:02:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/encoding.c:

	Oops, wrong line deleted in dummy_decode() ;-). Fixed.  

Fri Jun 20 18:54:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/encoding.c:

	In the *_decode() methods, don't uselessly duplicate the data block
	but return the original one.  

Fri Jun 20 18:51:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	uncompress_data() leading comment reorganization into standard form,
	minor typo fixes and some details added.  

Fri Jun 20 18:21:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, config/options.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	Reverted the last patch. As I indicated clearly, this has no
	business in HEAD and should live in a branch on its own.  

Fri Jun 20 18:20:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: encoding.c, encoding.h:

	Introduced @decode method to the encoding object. It's dummy and
	returns just copy of its arguments in all encodings for now.  

Fri Jun 20 18:13:08 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	setup.h:

	Experimental remote mode is now (almost) functionnal. To test define
	ELINKS_REMOTE in setup.h, compile elinks, add a second ip to your
	machine or use a second machine, then launch elinks -listen
	<your_first_ip> on one side, and elinks -remote <your_first_ip> on
	the second side. There is many things to improve, and it may not
	function as you hope it does, but feel free to provide enhancements.
	Note this feature may disappear soon if none is interested in.
	Please report issues/comments/ideas/bugs on #elinks.  

Fri Jun 20 17:30:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/version.c:

	LED indicators support.  

Fri Jun 20 17:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Use vsnprintf() instead of elinks_vsnprintf() inside of
	elinks_snprintf(). Quite unlikely to be needed, but Radim Kolar
	<hsn@cybermail.net> has a point anyway ;-) (<- idea).  

Fri Jun 20 17:28:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	The quick hack version of using encoding extensions in content type
	resolving (enhance bug 26) 

Fri Jun 20 17:16:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Some comments reorganization.  

Fri Jun 20 16:45:09 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	addr_info was renamed to socket_info which is more adequate, imho.  

Fri Jun 20 16:33:07 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	s_addr name may clash on Solaris, so all our s_addr were renamed to
	addr.  

Fri Jun 20 16:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Fix problem with @extensions that made gcc-2.96 choke.  

Fri Jun 20 15:55:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/encoding.c:

	Simplify extension handling by making the extension list a backend
	member.  

Fri Jun 20 15:37:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: encoding.c, encoding.h:

	Cleanups.  

Fri Jun 20 15:24:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, util/encoding.c, util/encoding.h:

	Move guess_encoding() to a more appropriate so it will available to
	mime/.  

Fri Jun 20 14:08:43 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/url.c:

	Support for file://localhost/, fixes bug 107, based on patch by Hugo
	Haas <hugo@larve.net>.  

Fri Jun 20 13:56:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	protocol/url.c, protocol/url.h:

	Move get_extension_from_url() to proper place.  

Fri Jun 20 13:50:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	get_extensionpart_from_url() -> get_extension_from_url(),
	@extensionpart -> @extension inside.  

Fri Jun 20 12:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Another act of brutality from the 'Alphabetic Order of Header File'
	PD.  

Fri Jun 20 12:06:06 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Indentation fix.  

Fri Jun 20 12:04:10 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Fix a potential issue: in some cases, we try to free a NULL pointer,
	a little step to ELinks remote mode was done.  

Fri Jun 20 11:03:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	enum addr_type was introduced, it will be used soon for remote
	ELinks access.  

Fri Jun 20 08:09:42 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	af_unix_close() was fixed, in certain cases, we closed fd 0.
	session-ring now works with AF_INET too, we just bind/connect on
	ELINKS_PORT + session-ring number.  

Fri Jun 20 07:41:48 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Repetitive select() errors may cause an infinite loop. A minor hack
	prevents it.  

Fri Jun 20 01:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Mindre opdatering af dansk oversættelse. ;p 

Thu Jun 19 22:38:12 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, lowlevel/af_unix.c, lowlevel/af_unix.h,
	lowlevel/interlink.c, lowlevel/interlink.h:

	bind_to_af_unix() was splitted. connect_to_af_unix() and
	af_unix_open() were introduced. Please torture and review.  

Thu Jun 19 12:22:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for bug 209: do not call copy_chars() if not needed.  

Thu Jun 19 09:32:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	struct s_addr_info was introduced, it permit to get rid of s_unix,
	s_unix_l, s_unix_fd.  

Wed Jun 18 21:16:11 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	elinks_usleep() was introduced, it resides here for now.  

Wed Jun 18 20:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Prevent memleak in alloc_address(), assertions are now used.  

Wed Jun 18 20:29:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	alloc_address() was introduced.  

Wed Jun 18 20:11:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	void unlink_unix() -> void unlink_unix(struct sockaddr *s_addr) 

Wed Jun 18 20:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_sun_path() was introduced, it computes unix socket path.  

Wed Jun 18 19:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_address() now set values of passed parameters.  

Wed Jun 18 18:58:43 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Humm, better like that. ;) 

Wed Jun 18 18:39:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Well, struct sockaddr_un is a total mess. So i did it like that,
	have a look and comment.  

Wed Jun 18 17:21:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	part->data->data == NULL is acceptable in line_break() but there is
	no need to call xpand_lines() or following stuff in this case.
	Assertion was replaced by a if + goto end. It fixes bug 206 reported
	by pasky.  

Wed Jun 18 17:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Compilation fix: stdlib.h was not included, and free() declaration
	was missing.  

Wed Jun 18 14:04:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use string utils for @saved option names. Fixes bug 207.  

Wed Jun 18 12:10:23 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Use SUN_LEN() macro to evaluate to actual length of the sockaddr_un
	structure and provide a definition of it for systems that may not
	have it.  

Wed Jun 18 11:53:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Moved the #includes back near the COL() and get_bfu_color()
	declaration, keeping the tightly related and somewhat alien stuff
	together. Hm, the #includes position doesn't really matter here, but
	when I was already doing at, I moved it back as I liked it more
	before. I don't care, though.  

Wed Jun 18 11:49:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Fixed memory leak in elinks_assertm() (@buf wasn't free()d). Also
	fixed possible usage of undefined value if @buf allocation failed.  

Wed Jun 18 11:46:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tab must have always a terminal attached, must not it? 

Wed Jun 18 10:49:45 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	AF_UNIX get_address() was reworked. A check about too long path
	(elinks_home) was added. An error produced by connect() is ignored,
	since this case is normal.  

Wed Jun 18 08:51:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Adequate error messages are now printed on socket(), connect(),
	bind() failures.  

Wed Jun 18 08:20:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Dummy entry to fix last message log: accept() failure is now
	handled.  

Wed Jun 18 07:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Connect() failure is now handled.  

Wed Jun 18 07:48:33 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Some variables were marked as static, minor comments were added
	about future work to be done here.  

Wed Jun 18 01:55:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.h, hash.h, version.h:

	Cleanups.  

Wed Jun 18 01:11:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Tidyup: Move enum declaration below header files.  

Wed Jun 18 01:05:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hotkey.h:

	Convert to standard header file format.  

Wed Jun 18 00:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Declare one-bit fields unsigned.  

Wed Jun 18 00:55:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Added TODO note about trouble with usage of (v)asprintf() under
	--enable-debug mode.  

Wed Jun 18 00:34:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	In try_extension_type() always do lookup with xwin on (even if ...)
	since we are only interested in the content type.  

Wed Jun 18 00:30:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	No need to let mime/ know about terminals only about xwin
	capabilities.  

Wed Jun 18 00:21:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.h:

	Removed @flags member that is now represented by bitfields.  

Wed Jun 18 00:19:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	Removed comment that has been moved to header file.  

Wed Jun 18 00:09:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation updated.  

Tue Jun 17 23:47:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish update, that goes out to Miciah who doesn't speak a word
	Danish and still spotted a few errors in my translations. One
	thorough reviewer ;) 

Tue Jun 17 23:44:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Character sequence '< ' in <PRE></PRE> caused the document to not be
	entirely rendered. This was introduced by bug 200 fix. Concerned
	code was fixed.  

Tue Jun 17 23:23:46 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Static + minor cleanup.  

Tue Jun 17 23:04:52 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Redundant code was moved to a FF_SEARCH() macro. Idea by Pasky ;).  

Tue Jun 17 16:47:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Case sensitivity test was finally moved outside the loop, as it was
	planned. Now fastfind_search gives maximum performance.  

Tue Jun 17 16:26:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Clustered @head initialization in format_html().  

Tue Jun 17 16:18:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed segfault caused by carelessly placed assertm() in process_link
	fragment of put_chars(), reported by zas.  

Tue Jun 17 16:17:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup. assert(ce && screen) only if @head allocation didn't
	fail.  

Tue Jun 17 16:12:30 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	assert(): valid chars only at index time too.  

Tue Jun 17 16:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor get_convert_table() cleanup. Removed now useless tests for
	(head) (it is assert()'d).  

Tue Jun 17 16:07:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Tidyup.  

Tue Jun 17 16:07:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Account the recently introduced FF_MAX_CHARS if. And move it after
	interinc().  

Tue Jun 17 16:04:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted zas' 'fix', unreverting mine ;-).  

Tue Jun 17 15:58:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Fix a fatal bug: do not even consult index if char is not in a valid
	range. Bug reported by Pasky.  

Tue Jun 17 15:56:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix bad assertm().  

Tue Jun 17 15:27:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	And handle more gracefully the assert()ion failure.  

Tue Jun 17 15:26:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Assert about part->data->nlinks in put_chars() process_link
	fragment. This reflects the original code.  

Tue Jun 17 15:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup.  

Tue Jun 17 15:02:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reintroduced (p->data) assertion into xpand_line, it is not a valid
	situation even on the display_complicated_table() call path.  

Tue Jun 17 14:52:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Attempted to make the execution flow more intuitive.  

Tue Jun 17 14:51:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Indentation fix.  

Tue Jun 17 14:43:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_line() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_line() call path.  

Tue Jun 17 14:41:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_lines() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_lines() call path.  

Tue Jun 17 14:36:23 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about assert() and assertm() was added.  

Tue Jun 17 14:33:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A missing assertion p->data->data != NULL was added.  

Tue Jun 17 14:30:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	The bad "weird test" change was fixed. Reported by Pasky.  

Tue Jun 17 14:13:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Last steps to assert() generalization. Please report any assert()
	failure.  

Tue Jun 17 13:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:29:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:24:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless test was removed. A missing assert() was added.  

Tue Jun 17 13:18:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A weird test was reworked.  

Tue Jun 17 13:10:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Label no_l was renamed to no_link.  

Tue Jun 17 13:06:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless label and a goto were removed.  

Tue Jun 17 13:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:51:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:47:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:43:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:31:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Reverted reverting of changes. They are _not_ too agressive.  

Tue Jun 17 11:52:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Partially reverted some of the assert()ization, some of the changes
	seemed way too agressive.  

Tue Jun 17 11:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:29:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:26:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:21:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	First steps to assert() generalization.  

Tue Jun 17 11:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	_GNU_SOURCE #defining should be the very first thing we do.  

Tue Jun 17 11:09:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Reverted the removal of HAVE_C99_SNPRINTF test, we *DO* want to use
	our snprintf() if the system's doesn't provide C99 return value
	semantic. Oh, and s/C99_SNPRINTF/C99_VSNPRINTF/ ;-).  

Tue Jun 17 08:55:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Attempt to reduce code redundancy was a bad thing. This code was not
	exactly redundant. Fixed.  

Tue Jun 17 07:43:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	split_line() was fixed. Bug introduced by a bad movesky :) 

Tue Jun 17 07:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Superfluous indentation was removed. split_line_at() is now declared
	inline.  

Tue Jun 17 07:17:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Define _GNU_SOURCE for vasprintf(). It fixes a compilation issue...  

Tue Jun 17 01:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Removed apparently bogus defined(HAVE_C99_SNPRINTF) test. It was not
	AC_DEFINE'd in configure.in so it caused undefined reference to
	elinks_snprintf errors. Maybe it's time to at least take the time to
	compile before committing? 

Tue Jun 17 00:13:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Correctly cast buffer pointer in vasprintf call.  

Mon Jun 16 16:43:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	When paging up/down, move by viewport_height - 1 rather than by
	viewport_height, making the first/last line common between the two
	states. I think this has rather big impact on ease of usability in
	some situations.  

Mon Jun 16 16:13:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use assertm() instead of the manual checks + internal() calls.  

Mon Jun 16 16:11:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced (unexpectably kludgy, after all :[ ) assertm() macro,
	which can print out a user-provided message (defined by format
	string) if the assertion fails.  

Mon Jun 16 15:42:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup, spelling fixes.  

Mon Jun 16 15:37:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed redundant code in split_line_at() and split_line(), I hope
	the change is ok.  

Mon Jun 16 15:36:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Described split_line() and documented its return value.  

Mon Jun 16 15:22:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove pointless assignment.  

Mon Jun 16 15:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Forked split_line_at() from split_line(), just containing everything
	after the 'split:' label.  

Mon Jun 16 15:15:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed usage of @tmp from the 'trunk' part of split_line().  

Mon Jun 16 15:13:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@i -> @x in split_line().  

Mon Jun 16 15:01:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	The (i + 1) change reverted, I'm silly and zas is the god :).  

Mon Jun 16 15:00:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use explicitly either (i + 1) or (i - 1) --- this fixes few bugs
	introduced by the simplification and also makes it a little easier
	to see what's moving around where, I think.  

Mon Jun 16 14:51:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reduce comments noise.  

Mon Jun 16 14:50:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed the old split_line() implementation.  

Mon Jun 16 14:45:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Big code simplification in split_line().  

Mon Jun 16 14:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed stale variable usage, compilation fix.  

Mon Jun 16 14:33:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	set_hline() cleanup and minor parameters reordering.  

Mon Jun 16 14:30:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@c -> @chars, @l -> @charslen in put_chars(_conv)().  

Mon Jun 16 14:12:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, renderer.h:

	part.spl -> part.spaces_len 

Mon Jun 16 14:08:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Grammar fix.  

Mon Jun 16 14:07:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup of split_line().  

Mon Jun 16 09:06:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for &nbsp &nbsp<foo> is now complete.  

Mon Jun 16 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Small cleanup to use more general 'buffer layout'.  

Sun Jun 15 23:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Code was simplified by using straconcat().  

Sun Jun 15 23:25:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	More cleanups of type_query(). The 'What to do?' dialog is more
	informative.  

Sun Jun 15 23:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Fix the fix.  

Sun Jun 15 23:12:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix warning from using uninitialized variable. Hmm.  

Sun Jun 15 23:07:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: mailcap.c, mailcap.h, mime.c, mime.h:

	Functionality for these files are now integrated in mime/ system.  

Sun Jun 15 23:05:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Finally also actually use the mime/ system. I am a happy man (or
	what ever I am) now. :) 

Sun Jun 15 23:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/Makefile.am:

	No need for protocol/ mime files anymore.  

Sun Jun 15 23:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Install the new init/done hooks for the mime systems.  

Sun Jun 15 23:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Link in the mime system.  

Sun Jun 15 22:53:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix potential memleak.  

Sun Jun 15 22:44:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c, src/config/kbdbind.c,
	src/dialogs/menu.c, src/sched/connection.c, src/sched/sched.c,
	src/sched/session.c, src/scripting/Makefile.am,
	src/scripting/lua/core.c, src/scripting/lua/core.h,
	src/scripting/lua/hooks.c, src/scripting/lua/hooks.h,
	src/viewer/text/view.c:

	src/lua/* -> src/scripting/lua/*, inspired by kuser.  

Sun Jun 15 22:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/scripting/Makefile.am:

	Added src/scripting/Makefile.am, dummy for now.  

Sun Jun 15 22:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/: .cvsignore, .vimrc:

	More fairies.  

Sun Jun 15 22:32:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/: .cvsignore, .vimrc:

	Added fairies.  

Sun Jun 15 22:23:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@ct -> @ctype in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:22:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@r -> @plaintext in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:17:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Don't assume that option.flags bitmask contains just one flag when
	testing for OPT_AUTOCREATE --- test properly by &'ing it. Patch by
	kuser.  

Sun Jun 15 22:11:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/mailcap.c:

	Don't try to fix problems using a sledge hammer. Use options at
	mime.mailcap.*.  

Sun Jun 15 22:11:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Tidyup.  

Sun Jun 15 21:56:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Huh. Reverted strange patch by Jonas. It is not clear what exactly
	it fixes, and whatever it fixes, it certainly fixes it at the wrong
	place.  

Sun Jun 15 19:57:45 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Bug 202 should be fixed by that.  

Sun Jun 15 19:12:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 15 17:21:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Elaborated a bit in the mime.mimetypes describtion. Hope it's ok Zas
	;).  

Sun Jun 15 17:11:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove unused argument to type_query().  

Sun Jun 15 17:06:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	2nd step of mime/ integration. Move mailcap options to mime.* and
	introduce options for the mimetype backend.  

Sun Jun 15 16:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix grave option alias bug to actually fetch the aliased option.  

Sun Jun 15 15:59:34 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Hm, forgot to update NEWS. Whatever... ;-).  

Sun Jun 15 15:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Compile time configuration for mimetypes backend.  

Sun Jun 15 15:25:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1.CVS --- let the fun begin again 

Sun Jun 15 15:20:28 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1 

