#!/bin/sh
# $Id: help2docbook,v 1.1 2003/06/11 01:14:47 jonas Exp $
#
# Script used to generate doc/book/config/cmdoptions.xml
# and hopefully other in the future.

target=$1

parse_option="please"

use_log=""
log()
{
	if test -n "$use_log";
	then
		echo $1
	fi
}

echo "<!-- Generated by $0. DO NOT EDIT! -->"
echo "<variablelist>"

while read line
do
	if test -z "$parse_option"
	then
		# If the line is empty it is our clue that
		# the desciption is over.
		if test -z "$line"
		then
			echo "</para></listitem></varlistentry>"
			parse_option="please"
			continue
		fi

		# Make escapes
		echo $line | sed -e "s/</\&lt;/" -e "s/>/\&gt;/"
		continue
	fi

	if test -z "$line";
	then
		continue
	fi

	parse_option=`echo $line | sed -e "s/-[a-z?]\+.*//"`
	if test -n "$parse_option";
	then
		# Not option
		log "===> not option!!"
		continue
	fi

	# We got our option
	escaped=`echo $line | sed -e "s/</\&lt;/" -e "s/>/\&gt;/"`
	echo "<varlistentry><term> $escaped </term><listitem><para>"
done

echo "</variablelist>"
