Wed Feb  9 09:42:20 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Feb  9 09:32:58 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c:

	Defer displaying of the download dialog until after the external
	handler has been set up. Use this info to avoid adding the 'Abort
	and delete file' button when dealing with downloads scheduled to
	open in external handlers.  

Tue Feb  8 23:22:15 2005  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated hungarian translation 

Tue Feb  8 17:42:33 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Try to improve the proxy error message. Patch by Morten and me.  

Tue Feb  8 03:13:32 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Neuromancer says that one can't return undef; just return from
	proxy_for_hook.  

Tue Feb  8 02:18:06 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Add a SourceForge ad smasher and a Google dehelpfuliser, because we
	are geeks, and geeks don't like ads or need helpful tips. Code from
	Neuromancer.  

Tue Feb  8 02:07:16 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Some new prefixes from Neuromancer: Slashdot, elgooG, BOFH, and
	torrent searching with Google.  

Tue Feb  8 02:02:02 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Two inconsequential regex-escaping fixes from Neuromancer.  

Tue Feb  8 01:59:35 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Do not use a proxy for local files. Code from Neuromancer.  

Tue Feb  8 01:57:22 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Eliminate $proxy_url; this will look better in the end...  

Tue Feb  8 01:54:04 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/perl/hooks.pl:

	Change the default proxy_for_hook to return undef so that the
	configured proxy will be used.  

Tue Feb  8 01:50:29 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/perl/hooks.c:

	Fix the get-proxy hook so that an undef return value from the PERL
	hook results in the default proxy being used, as is supposed to be
	the case with get-proxy hooks.  
	
	Many thanks to Neuromancer for testing.  

Tue Feb  8 01:03:38 2005  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	With tender sound... I don't know what it was zas was trying to do
	in 1.482, but he broke it for me. ;-) Reverted, _now_ just single
	square brackets are again shown to me as they should. ...of silence! 

Sun Feb  6 09:42:04 2005  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	I personally consider the default '_' and 'w' keybindings harmful
	since they aren't that difficult to reach in menus and they occupy
	lucrative keybinding positions which aren't worth their IMHO
	extremely small frequency of use.  

Sat Feb  5 22:36:37 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: intl/gettext/dcigettext.c, lowlevel/interlink.c,
	lowlevel/signals.c, osdep/osdep.c, util/ttime.c:

	Some more compile fixes revealed on MingW. In get_address() port is
	always > 65535.  

Sat Feb  5 20:04:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Consolidate changes discussed on the Danish language team mailing
	list. Update to remove all fuzziness and translate all messages.
	Patch by Morten Bo Johansen and me.  

Sat Feb  5 18:14:29 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/win32/overrides.c:

	Unix'fy and ELinksify the code.  

Sat Feb  5 17:43:33 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/win32/overrides.h:

	Convert to unix newlines and make the code conform to the hacking
	guidelines.  

Sat Feb  5 17:37:36 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Oops, revert bad part of last patch.  

Sat Feb  5 17:36:55 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po, src/osdep/win32/win32.c:

	Make the win32 code conform to the hacking guidelines.  

Sat Feb  5 17:27:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/win32.m4:

	Convert to unix newlines.  

Sat Feb  5 06:27:30 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/win32/: overrides.c, win32.c:

	Move IDN init code to init_osdep(), so these ugly constructors and
	deinit hooks can be removed. Make the tracing appear only when
	--verbose 2.  

Sat Feb  5 05:54:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/getifaddrs.c, util/secsave.c:

	Fix two compile errors.  

Sat Feb  5 05:26:40 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/Makefile.am, osdep/generic.h, osdep/osdep.c,
	osdep/system.h, osdep/win32/Makefile.am, osdep/win32/overrides.c,
	osdep/win32/overrides.h, osdep/win32/sysinfo.h,
	osdep/win32/win32.c, osdep/win32/win32.h, terminal/screen.c,
	util/error.c:

	Add remaining glue code so that the win32 should theoretically
	compile (I will test when I wake up) and the resulting binary can
	dump data.  

Sat Feb  5 05:22:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/osdep/stub.c, src/osdep/stub.h:

	Add a stub for inet_ntop(). It is quite big, but WTH. Patch by Paul
	Vixie, Gisle Vanem and me.  

Sat Feb  5 04:47:54 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/getifaddrs.c:

	Guard getifaddrs2() by a thick wall of macro checks so it only gets
	compiled in when it is actually used.  

Sat Feb  5 04:35:43 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, osdep/osdep.c, osdep/osdep.h:

	Add init_osdep() hook. Only win32 will use it for now. It will be
	added later.  

Sat Feb  5 04:20:40 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/dns.c:

	lookup_fn(): Wrap in #ifndef NO_ASYNC_LOOKUP because do_lookup()
	will only call it if ... Patch by Gisle Vanem.  

Sat Feb  5 04:15:06 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	dns_found(): Check also EWOULDBLOCK (if available on win32) after
	calling connect(). Patch by Gisle Vanem.  

Sat Feb  5 04:08:50 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Prepare for handling winsock errors by moving the internal error
	numbers so they start at -100000. Patch by Gisle Vanem.  

Sat Feb  5 03:35:43 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/lowlevel/signals.c:

	Check not only sigaction.h but also sigaction() and fall back to use
	signal() interface if it is not available. Not I am on thin ice
	here. From the MingW/win32 port but I think I made the original
	patch sometime I was visiting my father in Jutland.  

Sat Feb  5 03:22:39 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/select.c, lowlevel/signals.c, osdep/osdep.c:

	Various signal compile checks/fixes needed by mingw/win32 port.
	Patch by Gisle Vanem and me.  

Sat Feb  5 03:07:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/loadmsgcat.c:

	Fix compile warning.  

Sat Feb  5 03:03:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/gettext.h:

	Tidyup.  

Sat Feb  5 03:00:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/osdep/osdep.c, src/osdep/osdep.h,
	src/terminal/kbd.c:

	Check for termios.h and wrap includes.  

Sat Feb  5 02:56:28 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/win32.m4:

	Add win32 specific configuration.  

Fri Feb  4 21:49:26 2005  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/dialogs.h:

	Declare @cookie_queries as extern in the .h file. It was probably
	utterly broken until now. Also fixes compilation with outrageous
	CFLAGS like some of the Gentoo people like to have
	(http://bugs.gentoo.org/show_bug.cgi?id=80226).  

Fri Feb  4 21:45:51 2005  Petr Baudis <pasky@ucw.cz>:

	* contrib/ruby/.cvsignore:

	A fairy.  

Fri Feb  4 00:41:28 2005  Adam Golebiowski <adamg@pld-linux.org>:

	* po/pl.po:

	Polish translation was updated.  

Fri Feb  4 00:21:49 2005  Adam Golebiowski <adamg@pld-linux.org>:

	* src/protocol/file/cgi.c:

	One more casting fix 

Thu Feb  3 23:36:58 2005  Adam Golebiowski <adamg@pld-linux.org>:

	* src/: bfu/listmenu.c, dialogs/info.c, dialogs/options.c,
	document/html/renderer.c, protocol/http/codes.c, sched/session.c,
	scripting/lua/core.c, terminal/kbd.c, terminal/terminal.c,
	util/error.c, viewer/text/form.c:

	- some casting improvements (fixes build with --enable-debug on
	  amd64): 
	(int) -> (long) 
	  (void *) -> (void *) (long) 

Thu Feb  3 22:28:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Improve the type query dialog so that the program can now be edited.
	Also the 'Show header' button will no longer close the type query
	dialog but open the cache header dialog on top of the type query
	dialog. Finally the 'Show header' button is only added when there is
	a header to show (which is not the case for local files).  

Thu Feb  3 12:40:40 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/perl/hooks.pl:

	Shift the current URL argument so people know it is available.
	s/NIL/''/.  

Wed Feb  2 17:33:14 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, sched/connection.c, protocol/proxy.c,
	protocol/proxy.h, sched/connection.h, sched/error.c:

	Try to detect errors in the proxy configuration and pop up an
	appropriate error message instead of OOM.  

Wed Feb  2 12:58:51 2005  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, debian/changelog, debian/watch:

	Update changelog to close bug 293298 (infinite refresh download).
	Add debian/watch file by Hugo Haas.  

Wed Feb  2 01:01:01 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Advice to check-po. Rewrap.  

Tue Feb  1 23:51:06 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.am:

	Don't print the shell code and echo the language code.  

Tue Feb  1 23:47:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.am:

	Make a special check-po rule so not to b0rk when generating the
	catalogs.  

Tue Feb  1 23:38:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.am:

	Allways perform a verbose check when compiling .po into .gmo files
	to catch errors.  

Tue Feb  1 01:01:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/perl/hooks.pl:

	This revision adds a "mirrordot" or "md" url prefix in addition to
	fixing the nil|" "|"" return issue that reared it's head since you
	made the proxy hooks actually work. Patch by Russ Rowan.  

Tue Feb  1 00:11:37 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/ruby/hooks.rb:

	s/Qnil/nil/ 

Mon Jan 31 23:14:14 2005  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	Remove non-official (and now closed) Debian package archive.  

Mon Jan 31 22:28:24 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	A few fixes.  

Mon Jan 31 18:35:21 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Jan 31 18:32:36 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Fix a conflicting hotkey.  

Mon Jan 31 13:21:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	'14:16 < rtega> you can use debuild -uc -us too' when building a
	Debian package.  

Mon Jan 31 13:12:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Propose to run 'fakeroot dpkg-buildpackage -uc -us' when building a
	Debian package.  

Mon Jan 31 10:28:20 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan 30 23:42:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/forms.c:

	The HTML specification at 
	http://www.w3.org/TR/REC-html40/interact/forms.html#h-17.3 states 
	that the behavior of an empty action attribute should be undefined.  
	Mozilla handles action="" as action="<current-URI>" which seems 
	reasonable. (bug 615) 

Sun Jan 30 22:41:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/Makefile.am:

	Oops, no README file.  

Sun Jan 30 22:03:59 2005  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Add 0.10.2 entries.  

Sun Jan 30 21:11:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/: Makefile.am, ruby/hooks.rb:

	A useless ruby hooks file.  

Sun Jan 30 13:44:09 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	This one translates one untranslated msgid. Patch by Adam
	Golebiowski.  

Sat Jan 29 12:08:41 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Sat Jan 29 00:48:08 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/Makefile.am:

	Add user.css to EXTRA_DIST.  

Fri Jan 28 19:00:16 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Add a little help text to the terminal options dialog, which also
	indicates the value of the TERM environment variable. Idea by
	Miciah.  

Fri Jan 28 14:56:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix the root of bug 613. Don't mirror the default stylesheet if CSS
	is disabled.  

Fri Jan 28 14:45:22 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/forms.c:

	get_form_control_link() Miciah is so smart. Return if FC_HIDDEN.  

Fri Jan 28 14:40:33 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Eureka, bug 613 CSS leak fixed.  

Fri Jan 28 14:19:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/user.css:

	Add Id tag.  

Fri Jan 28 14:10:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	When the first form is added make sure it takes up the whole form
	(offset) range. Fixes bug 613.  

Fri Jan 28 13:13:48 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/forms.c:

	Hidden form fields are not attached to links. Fixes bug 614.  

Fri Jan 28 12:50:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix underline rendering when using 256 colors. Now, the char
	'outputter' is more similar to the one used for 16 colors. Hmm, this
	has only bugged the last year or so.  

Fri Jan 28 01:46:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Fixes from Morten.  

Wed Jan 26 22:36:01 2005  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	updated and fixed hungarian translation 

Wed Jan 26 16:16:38 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/ruby.m4:

	Change Ruby configuration to use --with... interface so the path to
	the ruby binary can be supplied. As with Perl configuration also try
	to link a simple program to see if the ruby archive is installed.  

Wed Jan 26 15:20:52 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Try to link a simple program against -lperl during configuration
	before enabling perl. This was reported by Miciah and I can
	reproduce it, but question is if it is Debian specific.  

Wed Jan 26 14:43:25 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Sync and fix a few translations.  

Tue Jan 25 15:27:02 2005  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Jan 24 13:03:36 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan 23 20:54:28 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation got aspell'ed and a few typos were fixed.  

Sat Jan 22 17:47:18 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	A few fixes.  

Sat Jan 22 14:01:17 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Opdater den danske oversættelse.  

Sat Jan 22 13:54:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, ecmascript/ecmascript.c,
	ecmascript/spidermonkey.c, sched/session.c, sched/session.h:

	Introduce a very simple ECMAScript pop-up window blocking mechanism.
	Will show a 'P' in the LED indicators. Off by default.  

Fri Jan 21 19:58:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	A few fixes after discussing the merge with Morten Bo Johansen.  

Fri Jan 21 14:27:41 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/ruby.m4:

	Try fix Ruby configuration (again) reported by zas (again ;). 'Twas
	caused by a nameclash in a local variable. Use CONFIG_RUBY instead;
	we 0wn that.  

Fri Jan 21 14:23:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/hooks.c:

	Fix ruby logic in last patch. Spotted by Miciah.  

Fri Jan 21 14:11:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: lua/hooks.c, perl/hooks.c, ruby/hooks.c:

	Fix get-proxy event hooks. @new_proxy_url is initialized to NULL so
	don't check for that. Instead be defensive and sanity check
	pointers.  

Fri Jan 21 14:05:04 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	erb_module_message(): Rename variables. Fix so that
	ELinks::message() can also be called from the quit hook.  

Fri Jan 21 11:24:12 2005  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Revert patch 1.184->1.185 (what was its purpose?), it breaks
	progress display in download dialog. It fixes bug 610.  

Thu Jan 20 18:31:43 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	Rearrange module functions a bit. Fix ELinks::message(). Export
	Kernel::p() hook also as ELinks::p().  

Thu Jan 20 16:40:56 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	Improve comments. Remove unneded code.  

Thu Jan 20 16:16:06 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/ruby.m4:

	Fix a stupid error that was causing m4 to complain about EOF in
	string.  

Thu Jan 20 13:12:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	erb_stdout_p(): Use own string lib and remove quotes from printed
	ruby strings. Pass the resulting string to usrerror() if no
	terminals can be hijacked. usrerror() will output "ELinks: " first
	so prefix messages a "[Ruby]" token.  

Thu Jan 20 12:31:16 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/ruby.m4:

	Fix ruby configuration logics reported by zas.  

Thu Jan 20 09:44:45 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	Fix exporting of elinks_home. Rename to ELinks::HOME because
	constants should be all upcased.  

Wed Jan 19 16:15:41 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/core.c:

	Export elinks_home as ELinks::home.  

Wed Jan 19 14:50:36 2005  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Simplify cached_header_dialog() and fix a potential memleak.  

Wed Jan 19 14:45:11 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Improve and fix a few translations.  

Wed Jan 19 12:52:22 2005  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Fix potential memleak.  

Wed Jan 19 11:19:22 2005  Laurent Monin <zas@norz.org>:

	* src/config/: dialogs.c, dialogs.c:

	Minor cleanup.  

Wed Jan 19 11:11:44 2005  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Reduce code redundancy.  

Wed Jan 19 08:55:12 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Jan 18 22:54:30 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Tue Jan 18 22:39:04 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Fix a few hotkeys and a typo.  

Tue Jan 18 22:32:46 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, rules:

	Install the desktop file in /usr/share/applications/. Indent
	comments because it looks more spiffy.  

Tue Jan 18 22:25:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am:

	acinclude.m4 requires autogen.sh to be run, which depends on special
	tools, so only add it to MAINTAINERCLEANFILES.  

Tue Jan 18 22:20:40 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/hooks.c:

	Invoke quit_hook like the other hooks.  

Tue Jan 18 15:12:37 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/hooks.c:

	... and then also invokel ELinks.quit_hook().  

Tue Jan 18 15:09:56 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/hooks.c:

	Check for quit_hook in the ELinks module, since I decided that it
	was much more perty to use ELinks.{hook method}.  

Tue Jan 18 15:07:55 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/: core.c, core.h, hooks.c:

	Use the session event parameter so error messages has a better
	chance at showing up the right place.  

Tue Jan 18 10:51:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/ruby.m4:

	Fix ruby configuratino.  

Tue Jan 18 10:30:15 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/ruby/: .cvsignore, .vimrc:

	m33p 

Tue Jan 18 10:29:39 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/ruby.m4, src/scripting/Makefile.am,
	src/scripting/scripting.c, src/scripting/ruby/Makefile.am,
	src/scripting/ruby/core.c, src/scripting/ruby/core.h,
	src/scripting/ruby/hooks.c, src/scripting/ruby/hooks.h,
	src/scripting/ruby/ruby.h:

	Add support for ruby scripting. Needs more work but the basics are
	there.  

Mon Jan 17 14:28:46 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Drop a note about menu searching.  

Sat Jan 15 22:12:48 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	In my_cancel_dialog, use the given widget_data instead of using a
	hardwired offset into the dialog's array of widgets.  

Sat Jan 15 21:42:36 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	In generic_external_protocol_handler, do not localise the title and
	the label of the OK button for the unsupported-protocol error box
	twice.  

Sat Jan 15 20:24:41 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Sat Jan 15 20:16:47 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/fi.po:

	I added several translations, removed some entirely incorrect fuzzy
	translations, and changed some translations for hopefully better
	consistency.  
	
	I also converted the file to ISO-8859-15, in order to translate 
	"Czech" correctly.  
	
	I haven't seen any response from Ilkka Karvinen.  
	
	-- Kalle Olavi Niemitalo 

Sat Jan 15 20:00:41 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	Insert a blank line.  

Sat Jan 15 19:59:42 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	Return the return value of cancel_dialog from input_field_cancel.  

Sat Jan 15 18:15:18 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c,
	dialogs/options.c, viewer/text/search.c:

	Drop the unused parameter widget_data from update_dialog_data.  

Fri Jan 14 18:47:46 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 14 18:45:22 2005  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Drop superfluous newline at end of option description.  

Fri Jan 14 18:42:34 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 14 15:47:00 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Rewrite the description for document.browse.accesskey.  

Fri Jan 14 15:40:55 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Any link can have an access key, not just 'active links', whatever
	those might be.  

Thu Jan 13 15:55:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/Makefile.am:

	SSL headers are needed for auth/digest.c, reported by Zas.  

Thu Jan 13 14:14:50 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/ecmascript/Makefile.am, src/osdep/Makefile.am,
	src/scripting/guile/Makefile.am, src/scripting/lua/Makefile.am,
	src/scripting/perl/Makefile.am, src/ssl/Makefile.am:

	Add certain compile flags only when needed to decrease the build
	output.  

Thu Jan 13 14:13:05 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan 13 14:12:47 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	The tabindex can be atmost 32767.  

Thu Jan 13 13:30:39 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/Makefile.am:

	Add lua.h to EXTRA_DIST.  

Thu Jan 13 13:29:25 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.c, lua/core.h, lua/lua.h:

	Like the recent Perl change, never include scripting library headers
	in the main module.  

Thu Jan 13 13:26:21 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Only add the 'Pass URI ...' option to the tab menu if the session
	has a location so that the '>>' won't be misleading since no submenu
	can be opened.  

Thu Jan 13 13:24:30 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, mime/backend/mailcap.c:

	More clarification of option descriptions.  

Thu Jan 13 13:23:26 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix off by one error in cursor routing.  

Thu Jan 13 13:21:35 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Should be the final merging of Danish Translation: 159
	insertions(+), 161 deletions(-).  

Thu Jan 13 13:20:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/elinks-lua.texi:

	Fix nodes so makeinfo don't choke on it.  

Wed Jan 12 16:50:29 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan 12 16:37:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	More Danish translation merging.  

Wed Jan 12 16:32:56 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/dialogs.c, config/kbdbind.c, dialogs/menu.c:

	A few clarifications. Use 'Open new window' to better match 'Open
	new tab'.  

Wed Jan 12 15:18:53 2005  Laurent Monin <zas@norz.org>:

	* .cvsignore, Makefile.am, autogen.sh:

	Revert http://www.nitro.dk/~jonas/no_need_for_acinlude.patch. It
	fixes autogen.sh with old autotools.  

Wed Jan 12 14:55:50 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/Makefile.am:

	Remove conffiles.  

Wed Jan 12 03:46:26 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Fix a few hotkey conflicts.  

Wed Jan 12 03:19:41 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/elinks.desktop:

	Spice up the .desktop file.  

Wed Jan 12 02:46:30 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Only export CFLAGS if required, so configure can set it properly.  

Wed Jan 12 02:44:24 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Follow up patch for the last one. Fix a few comments. Remove
	unnecessary usage of foreachsafe() iterator.  

Wed Jan 12 02:35:20 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: forms.c, forms.h, html/renderer.c,
	html/renderer.h, html/tables.c, html/parser/forms.c:

	Rearrange form items so they are added to the correct forms after
	table rendering. The bug occurs because tables are rendered
	column-wise which leads to problems when a form element is in a
	columns greater than its form items. It was introduced in the recent
	form changes. I am unsure if it the changed usage of form->form_num
	is a problem for code that is relying on sequencial values. The 
	patch fixes bug 602.  

Tue Jan 11 21:32:03 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, control, control.in, rules:

	A few fixes for errors reported by lintian. Pass pwd prepended
	DEB_ROOT, doh! 

Tue Jan 11 19:33:38 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/conf.c:

	Show 'File saving disabled by option' error when saving and -no-home
	was given. Assert that the term to write_config() is always set. We
	get called from do_action() and places passing dlg_data->win->term
	so it should be ok to be less defensive.  

Tue Jan 11 17:39:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, elinks.prerm:

	Remove www-browser alternative based on patch by Andreas Metzler.
	Add changelog entries for some of the debian bugs that has been
	fixed.  

Tue Jan 11 15:59:35 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/conffiles:

	Remove empty conffiles. All files in the etc/ directory in a package
	will automatically be flagged as conffiles by dh_installdeb.  

Tue Jan 11 15:51:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Translation stuff pointer update: s/intl/po/.  

Tue Jan 11 15:45:28 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, mime:

	Pass -force-html in the debian/mime mailcap entries so problems with
	viewing files without an extension is fixed. Update changelog also
	with entries for last commit.  

Tue Jan 11 15:34:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Remove now obsolete -XChangeLog.orig switch to dh_clean. Don't touch
	install-stamp it is never used. Re-enable dh_installman, it does
	some checks it seems. Remove obsolete outcommented
	dh_{testversion,undocumented,suidregister}. Finally blast some more
	unused dh_*.  

Tue Jan 11 15:29:28 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/elinks.docs:

	Install all the doc/ files since they are tied together in
	index.txt. Besides we don't have that much that we can afford to be
	choosy. ;) 

Tue Jan 11 14:57:08 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Use DH_ALWAYS_EXCLUDE to avoid CVS, .cvsignore, .vimrc and Makefile*
	files to ever be packaged.  

Tue Jan 11 14:36:47 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: Makefile.am, rules:

	Move the build-stamp file to debian/. Make distclean remove the
	build-stamp and the build tree directory.  

Tue Jan 11 14:35:09 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/.cvsignore:

	Sort.  

Tue Jan 11 13:35:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, rules:

	Add support for DEB_BUILD_OPTIONS. Cleanup.  

Tue Jan 11 08:02:29 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, elinks.docs, rules:

	Introduce elinks.docs file and exclude example files using -X
	switch. Makefile and *.patch files doesn't seem to be handled by
	that.  

Tue Jan 11 03:36:06 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	LEDS are enabled by default so remove configure comment. Cleanup
	failure handling. dh_installmanpage is deprecated and it doesn't
	seem to be necessary to call dh_installman, so left commented out.  

Tue Jan 11 03:19:27 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: changelog, rules:

	Fix deletion of unrelevant files from contrib/.  

Tue Jan 11 02:26:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Tue Jan 11 01:07:52 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Stupid me. Prepend doc/ to documentation files. ;) 

Tue Jan 11 00:50:59 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/changelog:

	Add entry bumping up the version.  

Tue Jan 11 00:38:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in:

	Integrate debian/ with the build system.  

Tue Jan 11 00:37:05 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Install the elinks.conf from contrib/.  

Tue Jan 11 00:32:03 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Install doc/ files relevant to using ELinks.  

Tue Jan 11 00:05:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/Makefile.am:

	The elinks.conf file was moved.  

Tue Jan 11 00:04:26 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/rules:

	Only remove CVS directories from the packaging directory
	debian/elinks/.  

Tue Jan 11 00:02:54 2005  Jonas Fonseca <fonseca@diku.dk>:

	* debian/: .cvsignore, .vimrc:

	m33p 

Tue Jan 11 00:02:17 2005  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, debian/Makefile.am, debian/README.Debian,
	debian/changelog, debian/conffiles, debian/control,
	debian/control.in, debian/copyright, debian/elinks.desktop,
	debian/elinks.postinst, debian/elinks.preinst, debian/elinks.prerm,
	debian/menu, debian/mime, debian/rules:

	Add debian/ files from the official debian package by Peter Gervai.
	Only change is to install elinks.conf example from contrib/ instead
	of debian/.  

Mon Jan 10 23:54:23 2005  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/: Makefile.am, elinks.conf:

	Add example configuration file.  

Mon Jan 10 12:56:57 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	More merging of Danish translations by Morten Bo Johansen.  

Mon Jan 10 12:55:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Update by Adam Golebiowski.  

Mon Jan 10 03:30:26 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	Use get_opt_codepage for document.dump.codepage.  

Sun Jan  9 22:36:54 2005  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Zdenek Burda donated the elinks.cz domain (reg in progress).  

Sun Jan  9 10:35:26 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.am:

	Only install anything when NLS is enabled, so use *-local-(no|yes)
	targets.  

Sun Jan  9 08:28:36 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  9 01:50:17 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.am:

	Describe the PO weirdness.  

Sun Jan  9 01:36:22 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/: Makefile.am, Makefile.in:

	Move this sucker up the foodchain. Atleast now it is partially
	readable, well if vim would only handle that shell-GNUism.  

Sat Jan  8 23:08:14 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Create $(datadir)/locale dir instead of just $(datadir). Reported by
	Russ Rowan.  CCMAIL: rrowan@dandy.net 

Sat Jan  8 21:45:28 2005  Jonas Fonseca <fonseca@diku.dk>:

	* .cvsignore, Makefile.am, autogen.sh:

	Who needs acinclude.m4 for generating aclocal.m4 when you can tell
	aclocal where to get the .m4 files.  

Sat Jan  8 21:39:42 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix wrong comment spotted by Miciah.  

Sat Jan  8 21:25:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/.cvsignore:

	Uhm, and now that there are Makefiles in config/ ignore the
	generated ones.  

Sat Jan  8 21:23:01 2005  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in, config/Makefile.am:

	Fix issues with make dist. Now all the lovely files in config/
	needed by configure will be added. Cleanup the top-level Makefile.am
	a bit.  

Sat Jan  8 21:20:11 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	This convenient shortcut doesn't seem to be needed. Anyway I expect
	this to fix the 'dist' rule that depends on elinks.pot which was
	first created later.  

Sat Jan  8 04:08:08 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In move_cursor, scroll the document as many rows or columns as
	necessary rather than only be one row or one column.  

Sat Jan  8 03:17:49 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: link.c, view.c, view.h:

	In jump_to_link_number, when in cursor-routing mode, call
	move_cursor to position the cursor on the newly selected link.  
	
	This should fix bug 607, "goto link number doesn't move cursor if
	cursor already moved".  

Fri Jan  7 22:47:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am:

	Oops. Distribute the config/m4/ files.  

Fri Jan  7 22:42:20 2005  Jonas Fonseca <fonseca@diku.dk>:

	* .cvsignore, config/.cvsignore:

	Ignore properly.  

Fri Jan  7 22:24:59 2005  Jonas Fonseca <fonseca@diku.dk>:

	* autogen.sh, config/m4/.vimrc:

	Move m4 macros to new config/ directory.  

Fri Jan  7 22:06:03 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/: .cvsignore, .vimrc:

	m33p 

Fri Jan  7 22:04:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config.guess, config.sub, configure.in:

	Use the newly added config/ dir for keeping files for the
	buildsystem.  

Fri Jan  7 21:53:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	More merging of Danish translations by Morten Bo Johansen. Diff down
	to ~600 lines.  

Fri Jan  7 21:51:46 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, viewer/text/form.c:

	3 small improvements.  

Fri Jan  7 01:51:07 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	More merging of Danish translations by Morten Bo Johansen.  

Fri Jan  7 00:47:55 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Don't hyphenate ELinks-version.  

Fri Jan  7 00:46:20 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Just give the codenames without prefacing each one with 'codename'.  

Fri Jan  7 00:44:32 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Move some colons around.  

Fri Jan  7 00:42:10 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Correction: Modal text editing is enabled, not disabled, by default.  

Fri Jan  7 00:41:14 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	s/ELinks-now/ELinks-0.10.0/ 

Thu Jan  6 21:59:00 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Include bfu/led.s.h for menu_leds_info.  

Thu Jan  6 16:32:25 2005  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/ftp/ftp.c:

	Could you check ftp download resume? 

Thu Jan  6 16:24:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	More merging of Danish translations by Morten Bo Johansen.  

Thu Jan  6 15:32:09 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Second batch of merged Danish translations by Morten Bo Johansen.  

Thu Jan  6 13:19:58 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/dcigettext.c:

	Try to declare alloca() with proper types. Should fix problems on
	OpenBSD and NetBSD systems. Reported by Nelson H. F. Beebe.  

Thu Jan  6 13:13:55 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	INET_ADDRSTRLEN is not available on some IRIX systems, so define
	them if needed. Reported by Nelson H. F. Beebe.  

Thu Jan  6 09:00:12 2005  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Display led indicators help dialog when these are clicked.  

Thu Jan  6 08:55:18 2005  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Drop |bars| variable and only check for mouse tabs navigation if
	tabs bar is displayed.  

Thu Jan  6 08:47:44 2005  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Revert 1.666->1.667 patch. It will be reintroduced in smaller parts.
	Idea by Miciah.  

Wed Jan  5 23:55:01 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po, AUTHORS:

	First batch of merged Danish translations by Morten Bo Johansen.  

Wed Jan  5 23:17:44 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  5 19:54:29 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, viewer/text/view.c:

	Add support for disabling this extended horizontal scheme we
	currently have, so it works more like vertical scrolling. Requested
	by Russ Rowan and he shall have it because he made so many good
	error reports lately ;).  

Wed Jan  5 18:27:29 2005  Jonas Fonseca <fonseca@diku.dk>:

	* THANKS:

	m33p.  

Wed Jan  5 18:02:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/gettext.m4, po/Makefile.in:

	Fix build issue reported by zas.  

Wed Jan  5 16:54:58 2005  Laurent Monin <zas@norz.org>:

	* src/sched/task.c:

	Fix some get_opt_*() calls.  

Wed Jan  5 16:48:55 2005  Laurent Monin <zas@norz.org>:

	* doc/introduction.txt:

	Minor typo fixes (that i hope correct, Miciah will proof-read at
	some time).  

Wed Jan  5 16:26:37 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Write a little about searching.  

Wed Jan  5 16:25:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Wire in the search history also for incremental link text searching.
	With the improved error handling it works quite well, but it also
	reveals some redrawing bugs.  

Wed Jan  5 14:53:52 2005  Jonas Fonseca <fonseca@diku.dk>:

	* THANKS:

	Make it a bit more readable.  

Wed Jan  5 14:37:43 2005  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/gettext.m4, po/Makefile.in, src/main.c,
	src/bfu/hotkey.c, src/bfu/hotkey.h, src/bfu/menu.c, src/bfu/menu.h,
	src/config/cmdline.c, src/config/options.c, src/config/opttypes.c,
	src/dialogs/menu.c, src/dialogs/options.c,
	src/ecmascript/spidermonkey.c, src/intl/Makefile.am,
	src/intl/gettext/libgettext.h, src/intl/gettext/libintl.h,
	src/protocol/file/cgi.c, src/protocol/http/http.c:

	Just use CONFIG_NLS instead of USE_NLS and ENABLE_NLS. Simplify
	Makefile so the 'all' target depends directly on CATALOGS which are
	only defined to something when NLS is enabled.  

Wed Jan  5 13:56:14 2005  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/os2.m4:

	Only check OS/2 stuff if CONFIG_OS2=yes.  

Wed Jan  5 12:37:51 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Wed Jan  5 11:00:06 2005  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Display leds info dialogp when leds (at bottom right of screen) are
	clicked. Cleanup send_mouse_event() a bit.  

Wed Jan  5 10:09:06 2005  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Drop trailing spaces.  

Wed Jan  5 10:07:02 2005  Laurent Monin <zas@norz.org>:

	* configure.in:

	Display [=DIR] instead of =DIR since specifying directory is
	optionnal for --with-gnutls and --with-openssl. Configure help
	output looks better.  

Wed Jan  5 09:54:57 2005  Laurent Monin <zas@norz.org>:

	* configure.in:

	LEDs are now enabled by default, so let configure script display
	--disable-leds instead of --enable-leds.  

Wed Jan  5 09:48:34 2005  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Fix compilation when --disable-leds is used.  

Wed Jan  5 09:42:37 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  5 05:08:25 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/user.css:

	Add an example user style-sheet.  

Wed Jan  5 04:32:58 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	In delete_bookmark, delete the bookmark from the hash table before
	triggering the bookmark-delete event.  

Wed Jan  5 03:33:55 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	Minor fixes in the 'LED indicators' help text.  

Wed Jan  5 03:02:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/apply.h, html/parser/parse.c:

	Make css_apply() functionality available as a two-step execution, so
	that applying CSS in start_element() will only require the
	assembling of an element style selector once. Patch by Miciah and
	me.  

Wed Jan  5 02:13:20 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	In init_html_parser, swap the arguments to mirror_css_stylesheet so
	that the default stylesheet is copied to the HTML context. This
	fixes a bug where the stylesheet referenced by
	document.css.stylesheet was not used.  

Wed Jan  5 00:51:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bfu/leds.h, bfu/widget.h, dialogs/menu.c:

	An info dialog for LED indicators. Dunno if that ASCII art is to
	ugly and we should instead just number the LEDs. That would also
	make it possible to elaborate a bit more; mention relevant options
	and so.  

Tue Jan  4 10:08:28 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Jan  4 01:49:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/spidermonkey.c:

	The MSGBOX_FREE_TEXT flag will keep the text from being gettexted
	here, right zas? 

Mon Jan  3 23:43:26 2005  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Safe head-start to hu and de.  

Mon Jan  3 23:29:47 2005  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	O\ne0, Jonas :-). Fixed UTF-8 I/O.  

Mon Jan  3 23:10:24 2005  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Typo fix.  

Mon Jan  3 22:41:00 2005  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Jan  3 22:23:26 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan  3 22:16:32 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation zeroed.  

Mon Jan  3 21:51:40 2005  Petr Baudis <pasky@ucw.cz>:

	* doc/: bookmarks.txt, color-model.txt, marks.txt:

	Play a writing style carrion crawler.  

Mon Jan  3 21:51:07 2005  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Too many blank lines hurt.  

Mon Jan  3 21:50:05 2005  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	We code in C89.  

Mon Jan  3 21:22:34 2005  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Id est exempli gratia.  

Mon Jan  3 21:16:31 2005  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Rewritten, updated, elaborated. Attention has been paid to
	explaining what is dialogs/ good for, what viewer/ really is and
	their interactions with bfu/, so that those evil and dangerous
	plagues like ui/ or <core>/dialogs.c are hopefully prevented and
	avoided. ;-) 

Mon Jan  3 21:08:36 2005  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/edit.c:

	TODO: Move to bfu/.  

Mon Jan  3 21:03:43 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/tabs.txt:

	Rewrite the first paragraph in the section on saving and restoring
	tabs.  

Mon Jan  3 20:48:51 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/hacking.txt:

	Add some whitespace to the example for commenting a structure to
	match current practice and encourage readability.  

Mon Jan  3 20:47:25 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/hacking.txt:

	Warn against using C++'s //-style comments.  

Mon Jan  3 20:45:49 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/introduction.txt:

	Refer to listbox items as items, not boxes.  

Mon Jan  3 20:38:29 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/introduction.txt:

	Change 'The hierarchic boxes' to 'Each hierarchic box'.  

Mon Jan  3 20:34:19 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/introduction.txt:

	Mention the Home and End keys in the list of listbox keybindings.  

Mon Jan  3 17:58:33 2005  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/protocol/rewrite/rewrite.c:

	In src/protocol/rewrite/rewrite.c (87 line) there is a string
	(starting with "Replacement URI for this smartprefix") that contains
	'%'. It looks like it lacks 
	        /* xgettextize:no-c-format */ line just before it (as is
	done 10 lines above with dumbprefix.  
	
	Patch by Adam Golebiowski.  

Mon Jan  3 16:01:46 2005  Laurent Monin <zas@norz.org>:

	* doc/introduction.txt:

	Some stuff was added about how forms are displayed.  

Mon Jan  3 16:00:55 2005  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Adam Golebiowski.  

Mon Jan  3 15:15:04 2005  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Adam Golebiowski.  

Mon Jan  3 14:39:52 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan  3 14:24:17 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	8 miles left.  

Mon Jan  3 14:02:24 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	But this is HTML so I shouldn't care about wrapping.  

Mon Jan  3 14:00:26 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Dammit the other thing cause weird wrapping.  

Mon Jan  3 13:58:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Trim down more of pasky's ramblings. It could probably be trimmed
	down even further.  

Mon Jan  3 13:40:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Clarifications. Missed this one.  

Mon Jan  3 13:39:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, ecmascript/spidermonkey.c,
	formhist/dialogs.c:

	Clarifications.  

Mon Jan  3 13:38:23 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Sound a little less like uncle Danny.  

Mon Jan  3 12:26:15 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libintl.h:

	When NLS is disabled make _() a static inline'd dummy function so
	warnings about unused local @term variables are removed. Reported by
	Russ with fixing patch by Miciah.  

Mon Jan  3 08:52:36 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan  3 08:28:51 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/mailcap.txt:

	Change the paragraph explaining why one would use mailcap when one
	has ELinks' internal MIME-handler configuration.  

Mon Jan  3 08:25:13 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/mailcap.txt:

	Change 'thou shall find' to 'thou wilt find'.  

Mon Jan  3 08:23:11 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/remote.txt:

	Rewrite the little bit about ELinks extensions.  

Mon Jan  3 08:22:55 2005  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	When looking for the --> inside of <script> (do_html_script()),
	check if we didn't go past eof. Probably fixes crash on
	intellectualconservative.com reported by Apu.  

Mon Jan  3 08:21:00 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/urlprefixes.txt:

	Mention that dumb-prefixes support '%c'.  

Mon Jan  3 08:14:01 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/feedback.txt:

	Update the maintainer E-mail address.  

Mon Jan  3 08:12:57 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/: bookmarks.txt, color-model.txt, ecmascript.txt, events.txt,
	exmode.txt, feedback.txt, hacking.txt, introduction.txt,
	mailcap.txt, marks.txt, remote.txt, small.txt, tabs.txt,
	terminal.txt, urlprefixes.txt:

	Add some articles and delete some others.  

Mon Jan  3 07:41:01 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/string.h:

	Let add_bytes_to_string__ know about this change.  

Mon Jan  3 07:28:48 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/: string.c, string.h:

	Mark the source parameter for add_to_string constant to fix a
	compilation error with SpiderMonkey.  Do the same to
	add_to_string_list for consistency.  

Mon Jan  3 07:12:20 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/: bookmarks.txt, color-model.txt, ecmascript.txt, events.txt,
	exmode.txt, feedback.txt, hacking.txt, index.txt, introduction.txt,
	mailcap.txt, marks.txt, remote.txt, small.txt, tabs.txt,
	terminal.txt, urlprefixes.txt:

	Punctuation, whitespace, and capitalisation fixes.  

Mon Jan  3 06:02:09 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/: bookmarks.txt, color-model.txt, ecmascript.txt, exmode.txt,
	hacking.txt, marks.txt, urlprefixes.txt:

	Latin fixes.  

Mon Jan  3 05:49:18 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/bookmarks.txt:

	Missed one.  

Mon Jan  3 05:47:31 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/: bookmarks.txt, color-model.txt, ecmascript.txt, exmode.txt,
	marks.txt, urlprefixes.txt:

	Mood and tense fixes.  

Mon Jan  3 05:45:48 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/man/man1/elinks.1.in:

	-dump dumps a document, not a URI.  

Mon Jan  3 04:20:08 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Small fix.  

Mon Jan  3 04:03:48 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	1358 translated messages, 29 untranslated messages.  

Mon Jan  3 04:02:38 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Remove double used 'used'.  

Mon Jan  3 03:59:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/spidermonkey.c:

	Fix i18n braindead error messaging.  

Mon Jan  3 03:40:51 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.c, perl/Makefile.am, perl/core.h,
	perl/perl.h:

	Stupid perl headers define _() which causes compile errors when
	included after libintl.h, so put the perl module declaration in its
	own header file. Reported by Russ Rowan.  

Mon Jan  3 03:22:51 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	Fix building by including dummy mouse handlers when CONFIG_MOUSE=no
	and CONFIG_GPM=yes. Reported by miernik.  

Mon Jan  3 02:11:56 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Factor some code out from add_bookmark into the new init_bookmark.  

Mon Jan  3 02:05:30 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Yay only 41 left.  

Mon Jan  3 02:04:34 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Fixes for improvements by Miciah.  

Mon Jan  3 02:01:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	A few improvements.  

Mon Jan  3 01:59:57 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Use add_listbox_item in add_bookmark. Besides saving a fair amount 
	of code, this fixes redraw bug where adding a bookmark in a bookmark 
	manager box in one terminal would not update boxes in other
	terminals.  

Mon Jan  3 01:00:09 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Delete a very stale comment.  

Mon Jan  3 00:31:27 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Move hash-table maintenance from add_bookmark to
	add_bookmark_item_to_bookmarks.  

Mon Jan  3 00:30:02 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Shorten pasky's long late night ramblings about use of document
	colors.  

Mon Jan  3 00:29:54 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	In add_bookmark, delete the bookmark if unable to allocate the
	listbox item.  

Mon Jan  3 00:26:59 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Factor some code out from add_bookmark into the new
	add_bookmark_item_to_bookmarks.  

Sun Jan  2 23:45:09 2005  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Squashed another stupid non-functional inlining (get_hash_item()
	this time) introduced by who-knows-who who-knows-when.  

Sun Jan  2 22:47:56 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Sorry for flipflopping zas ;) this extra cheese really doesn't make
	sense.  

Sun Jan  2 22:21:29 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  2 19:31:50 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Hopefully last batch of updates for command line option
	descriptions.  
	
	- Use \t instead of tabs in strings. Dunno how portable that is.  
	
	- Elaborate more in the lookup description.  
	
	- Tone down Mozilla compliant'ness for -remote it is mentioned in
	  the remote.txt docs. Try to clarify the passing of method +
	parameters.  
	
	- "... used in s/connection/conjunction/ with ..." since google has 
	  2,380,000 hits for the latter while only 802,000 for the former.  

Sun Jan  2 18:32:44 2005  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/protocol/uri.h:

	If I try "links -dump www.tromsø.no" it finds the correct ACE-name 
	("www.xn--troms-zua.no"), but the virtual-server this domain is
	hosted on 
	(venus.gan.no), requires the ACE-name in the "Host:" header. Elinks
	incorrectly sets this header to www.tromsø.no.  
	
	This patch by Gisle Vanem solves the issue.  

Sun Jan  2 15:55:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	On route 66.  

Sun Jan  2 15:28:48 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  2 15:23:36 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	More cookie option description modifiction commiction m33piction.  

Sun Jan  2 14:21:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Make cookies.paranoid_security self contained.  

Sun Jan  2 14:11:14 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Introduce add_cookie_info_to_string() which adds everything except
	the server attribute. Use it for accept dialogs to increase the
	reuse of i18n strings.  

Sun Jan  2 14:07:00 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Normalize multi-state options.  

Sun Jan  2 12:54:24 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Another clarification by the Miciah Patch Watchers.  

Sun Jan  2 12:38:29 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/terminal.txt:

	Add hints from Miciah's reply to 'How do I enable the pretty line
	graphics and colors under gnu/screen'.  

Sun Jan  2 12:21:25 2005  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: index.txt, introduction.txt, terminal.txt:

	Split out terminal setup docs to terminal.txt like pasky requested.  

Sat Jan  1 18:11:51 2005  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan  1 17:38:38 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Keep the EVENT_MOUSE case even if mouse is disabled.  

Sat Jan  1 16:37:53 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, forms.c, html/renderer.c:

	Make done_form() also free the form struct.  

Sat Jan  1 16:37:09 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	Limit long lines.  

Sat Jan  1 14:38:52 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Reformat comments.  

Sat Jan  1 13:54:31 2005  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Only handle clicks outside the input line (introduced in 1.189 ->
	1.190) if CONFIG_MOUSE.  

Sat Jan  1 13:15:27 2005  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	'appy naw yer *hick* 

Sat Jan  1 05:44:02 2005  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	In update_options_visibility, use get_opt_bool instead of
	get_opt_rec.  

Fri Dec 31 12:29:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	Fix bug introduced in (1.98->1.99) when OS/2 code was split out and
	yet again allow OS shell to be opened under the xwin environment.  

Fri Dec 31 12:26:41 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 31 12:06:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Fri Dec 31 11:44:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file/file.c, ftp/ftp.c:

	Some fixes for protocol related option descriptions.  

Fri Dec 31 11:22:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Some fixes for MIME-related option descriptions.  

Fri Dec 31 09:24:22 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 31 09:17:06 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, protocol/http/http.c:

	Compilation fixes.  

Fri Dec 31 03:11:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Fri Dec 31 02:43:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Fri Dec 31 02:40:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/select.c:

	In the name of not so many freaking i18n strings use format string
	introduced in last patch.  

Fri Dec 31 02:37:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/interlink.c:

	Make generic i18n string for reporting interlinking failures.  

Fri Dec 31 02:30:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/ecmascript.c:

	Abbreviations in captions are ugly.  

Fri Dec 31 01:39:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, protocol/http/http.c, protocol/http/http.h:

	done_http(): Cleanup also proxy auth and blacklist.  

Fri Dec 31 00:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libintl.h:

	Fix bug where _() was not defined as a noop when NLS was disabled.
	Reported by Russ Rowan after the recent patch for not overpopulating
	@current_charset by Kalle Olavi Niemitalo.  

Fri Dec 31 00:36:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/gettext.m4:

	EL_ARG_ENABLE() usage requires the preset value to be set.  

Fri Dec 31 00:11:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/gettext.m4:

	Make NLS configuration value show up in features.log 

Thu Dec 30 23:50:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/options.c, dialogs/info.c, dialogs/status.c,
	document/renderer.c, document/html/renderer.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/download.c, scripting/lua/core.c,
	viewer/dump/dump.c:

	Alphabetize #includes.  

Thu Dec 30 23:42:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/options.c, dialogs/options.h, sched/action.c:

	Make it possible to open resize terminal dialog using keybindings.
	Cleanup and rename dialog function to resize_terminal_dialog().  

Thu Dec 30 21:58:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 30 20:40:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Thu Dec 30 20:39:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Minor fix.  

Thu Dec 30 20:28:31 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Revert patch 1.179->1.180, it breaks focus on bugzilla query form.  

Thu Dec 30 20:28:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Normalize multi-state option descriptions and make one more generic.  

Thu Dec 30 20:09:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	The search 'show not found' option is no long typeahead only. Rewrap
	a long option text.  

Thu Dec 30 13:57:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	14:52 < Neuromancer_> s/does not use/uses/.  

Thu Dec 30 12:57:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Write about configuration of terminals so I can RTFM cga, who just
	asked on elinks-users.  

Thu Dec 30 11:35:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/css/stylesheet.c:

	Reduce code redundancy, introducing add_selector_property().  

Thu Dec 30 10:36:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated: minor fix.  

Thu Dec 30 10:33:44 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated: typo fix.  

Thu Dec 30 10:31:36 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 30 04:04:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Unfuzz a translation.  

Thu Dec 30 04:00:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Normalize tristate option description.  

Thu Dec 30 03:55:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Thu Dec 30 01:33:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Fix PO-Revision-Data header.  

Thu Dec 30 00:04:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Wed Dec 29 23:28:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Wed Dec 29 22:58:25 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 22:52:11 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 22:42:30 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 22:38:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 22:35:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/options.c:

	More or less sync terminal option captions and text used in the
	terminal dialog.  

Wed Dec 29 22:30:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Always put build info in the full static version. We compile it in
	anyway.  

Wed Dec 29 22:29:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Do not print feature summary when printing --help.  

Wed Dec 29 22:07:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Review command line option captions and descriptions.  

Wed Dec 29 21:30:47 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Fix potential bug: memset() the size of the struct not the size of
	the pointer.  

Wed Dec 29 20:32:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Use copy_struct().  

Wed Dec 29 19:58:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Remove all fuzziness and start on untranslated strings.  

Wed Dec 29 19:54:02 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 19:37:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	-dump works for multiple URLs.  

Wed Dec 29 19:25:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Improve i18n in favour of a bit more complicated
	code.  

Wed Dec 29 18:34:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Unify 'could not create file' dialog text.  

Wed Dec 29 18:29:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	s/User/\1 protocols/ as module name.  

Wed Dec 29 18:23:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/nntp/codes.c:

	s/Ok/OK/ which is what we use for other OK buttons.  

Wed Dec 29 18:14:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/file/file.c:

	Purge DISABLED variations of options. It makes no sense to increase
	the size of the binary unnecessarily.  

Wed Dec 29 17:24:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	s/Forms History/Form History/ 

Wed Dec 29 17:00:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: Makefile.in, README:

	Make both PO=<lang> and PO=<lang>.po possible. Update README to
	reflect that. Also remove the newly added TIP that is already
	mentioned below and note to maintainer.  

Wed Dec 29 16:49:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	s/forms {history,memory}/form history/.  

Wed Dec 29 16:35:05 2004  Laurent Monin <zas@norz.org>:

	* po/README:

	Update README and mention make update-po PO=<lang>.po.  

Wed Dec 29 16:17:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 29 15:59:29 2004  Laurent Monin <zas@norz.org>:

	* src/document/css/parser.c:

	Use copy_struct().  

Wed Dec 29 15:46:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	s/Artificial/Internal/ probably is easier to understand.  

Wed Dec 29 15:43:30 2004  Laurent Monin <zas@norz.org>:

	* src/document/: css/apply.c, html/internal.h, html/parser.c,
	html/parser.h, html/renderer.c, html/tables.c, html/parser/forms.c,
	html/parser/link.c, html/parser/parse.c:

	Rename struct text_attrib_beginning to struct text_attrib_style and
	use it in struct text_attrib. It helps to clean things a bit. Note
	that format.(fg|bg|attr) becomes format.style.(fg|bg|attr).  

Wed Dec 29 15:13:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Make it possible to update only one .po file by running 'make
	update-po PO=<lang>.po'.  

Wed Dec 29 15:09:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/generic.h:

	Wrap copy_struct() macro body in do { /* ... */ } while(0). Improve
	comment.  

Wed Dec 29 15:04:21 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/task.c, terminal/event.c, terminal/kbd.c, util/box.h,
	viewer/text/view.c, viewer/text/vs.c:

	Use copy_struct().  

Wed Dec 29 14:59:34 2004  Laurent Monin <zas@norz.org>:

	* src/: document/options.c, document/html/frames.c,
	document/html/renderer.c, document/sgml/parser.c,
	lowlevel/connect.c:

	Use copy_struct().  

Wed Dec 29 14:51:49 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, bfu/menu.c, config/dialogs.c,
	document/html/parser/stack.c:

	Use copy_struct().  

Wed Dec 29 14:48:06 2004  Laurent Monin <zas@norz.org>:

	* src/osdep/generic.h:

	Make copy_struct() definition cleaner.  

Wed Dec 29 14:41:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: intl/gettext/dcigettext.c, osdep/generic.h:

	Also move alignof() to the compiler area.  

Wed Dec 29 14:39:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, document/css/stylesheet.c, osdep/generic.h:

	Introduce copy_struct() macro wrapping '*a = *b' style copying. Use
	relevant places.  

Wed Dec 29 14:25:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Oops, last part of previous patch.  

Wed Dec 29 14:25:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Use = instead of memcpy(). Safer and more efficient, idea by Pasky.  

Wed Dec 29 14:24:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: Makefile.am, math.c, math.h:

	Simplify generic swap_value() to be a macro. It might fix a problem
	on MacOS X reported by Phillip Pi and I never did like the previous
	cast-abusing implementation.  

Tue Dec 28 23:04:47 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	document.browse.accesskey.auto_follow is a boolean option.  

Tue Dec 28 16:57:41 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec 28 16:53:09 2004  Laurent Monin <zas@norz.org>:

	* src/osdep/osdep.c:

	resize_window(): use double while calculating new width and heigth
	to increase precision, it prevents that multiple resize terminal
	without changing original values to resize the terminal to a smaller
	size. Not totally perfect since we calculate terminal size in
	characters and window size in pixels.  

Tue Dec 28 13:24:13 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	x,y -> width,height. Use ulongcat() instead of sprintf(), and add
	labels to input fields.  

Tue Dec 28 13:10:10 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	group_layouter(): set minimal width of dialog to at least the length
	of title.  

Tue Dec 28 12:26:30 2004  Laurent Monin <zas@norz.org>:

	* README:

	Update README, please improve. ELinks is now more that an
	experimental Links imho.  

Tue Dec 28 10:03:20 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec 28 07:02:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update translation. Many fixes pointed out by Miciah.  

Tue Dec 28 01:43:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Some more updates mostly deleting the fuzziness in the end.  

Tue Dec 28 01:30:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Inspired by Zas' translations, these command line option
	descriptions needed improvements.  

Tue Dec 28 00:07:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec 27 23:39:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Update Danish translation.  

Mon Dec 27 23:13:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Fix internationalized strings.  

Mon Dec 27 21:59:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Ditch #else part of '#if 1'. Slowly this is becoming the norm.  

Mon Dec 27 19:35:24 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Revert last patch it breaks tests from test/ecmascript/ontest.html.
	Why? 

Mon Dec 27 19:23:41 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	window_get_property(): call undef_to_jsval().  

Mon Dec 27 13:42:14 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	document_get_property(): call undef_to_jsval(ctx, vp).  

Mon Dec 27 13:39:32 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	forms_namedItem(): call undef_to_jsval() before loop.  

Mon Dec 27 13:20:32 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	forms_item(): call undef_to_jsval() before loop.  

Mon Dec 27 10:51:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: libintl.c, libintl.h:

	el_gettext_current_charset -> current_charset and move to after the
	#includes. Should make pasky happy.  

Mon Dec 27 10:49:27 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Drop last bits of struct jsval_property stuff: set_prop_*(),
	value_to_jsval() and related stuff are now totally replace by
	*_to_jsval().  

Mon Dec 27 10:41:36 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	document_write(), location_get_property(): use *_to_jsval().
	set_prop_astring() is no more used.  

Mon Dec 27 10:38:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	resize_window(): Miciah was right. Fix
	Copy-and-paste-and-mindlessly-hack-upon error when HAVE_X11 is not
	defined.  

Mon Dec 27 10:37:16 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	document_get_property(): use *_to_jsval(). set_prop_object() is not
	needed anymore.  

Mon Dec 27 10:34:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	get_screen_driver(): Still use memcmp() but fix the bug by comparing
	'len + 1' bytes. Idea by Miciah.  

Mon Dec 27 10:31:37 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	forms_item(), forms_namedItem(), forms_get_property(): use
	*_to_jsval(). set_prop_int() is not needed anymore.  

Mon Dec 27 10:26:43 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	form_(reset|submit)(): use boolean_to_jsval().  

Mon Dec 27 10:24:22 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	form_get_property(): use *_to_jsval().  

Mon Dec 27 10:02:50 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	window_get_property(): undef before switch() and simplify code.  

Mon Dec 27 01:25:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	free_uri_list(): Just in case, zero the uri_list->size.  

Mon Dec 27 01:16:03 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use *_to_jsval() in form_elements_namedItem().  

Mon Dec 27 01:14:18 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use *_to_jsval() in form_elements_item().  

Mon Dec 27 01:11:45 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use *_to_jsval() in form_elements_get_property().  

Mon Dec 27 01:09:28 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use boolean_to_jsval() in input_focus().  

Mon Dec 27 01:07:36 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use boolean_to_jsval() in input_click().  

Mon Dec 27 01:05:56 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Introduce (string|int)_to_jsval() and use *_js_val() in
	input_get_property().  

Mon Dec 27 00:51:57 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use (boolean|undef)_to_jsval() in window_open().  

Mon Dec 27 00:48:36 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use undef_to_jsval() in window_alert().  

Mon Dec 27 00:46:03 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Introduce (object|boolean|undef)_to_jsval(), it will help to get rid
	of struct jsval_property. The main goal is to drop stuff related to
	struct jsval_property: set_prop_*(), value_to_jsval(),
	*_prop_magic(), and every struct jsval_property *prop among the
	code.  

Mon Dec 27 00:02:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix terminal driver comparison triggered when comparing 'xterm'
	against 'xterm-color'. This would cause no driver to be initialized
	and more important the term->spec->change_hook to be NULL.  

Sun Dec 26 23:44:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Hurrah for snprintf(). Terminal resizing should be a lot safer now.  

Sun Dec 26 23:36:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/options.c, osdep/osdep.c, osdep/osdep.h,
	osdep/os2/os2.c, terminal/kbd.c:

	Make this useless terminal resizing available for the X terminal
	environment.  The old terminal width and height needs to be send
	along too in order to scale using the right font size.  

Sun Dec 26 20:26:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libintl.c:

	Remove extern keywords causing warnings.  

Sun Dec 26 20:14:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/intl/gettext/libintl.c, src/intl/gettext/libintl.h:

	This patch fixes a bug where the static current_charset variable of
	the static function _() was duplicated in every translation unit
	that called it, resulting in unnecessary or possibly skipped calls
	to bind_textdomain_codeset.  
	
	I also renamed the variable, in order to avoid clashes; but perhaps
	that was too paranoid: libintl.c already defines current_language,
	which is just as likely to clash.  
	
	Patch by Kalle Olavi Niemitalo.  

Sun Dec 26 19:56:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/fi.po:

	More translation updates by Kalle Olavi Niemitalo.  

Sun Dec 26 19:11:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Hmm, thought I commited this. Kalle Olavi Niemitalo updates the
	Finnish translation.  

Sun Dec 26 18:58:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/default.c, protocol/rewrite/rewrite.c:

	Mark gettexted strings containing internal c-format fragments with
	/* xgettext:no-c-format */. Fix by Kalle Olavi Niemitalo.  

Sat Dec 25 23:39:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Elaborate a bit about the Title, Tab and Status bar.  

Sat Dec 25 20:42:45 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, ecmascript/spidermonkey.c,
	sched/session.c, scripting/lua/core.c:

	Rename MSGBOX_INTL_TITLE_ONLY to more appropriate
	MSGBOX_NO_TEXT_INTL, and use it instead of MSGBOX_NO_INTL to
	simplify code.  

Sat Dec 25 19:05:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Write about navigation.  

Sat Dec 25 17:51:13 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Space fix.  

Sat Dec 25 17:36:41 2004  Laurent Monin <zas@norz.org>:

	* test/ecmascript/ontest.html:

	Improve a bit.  

Sat Dec 25 17:28:30 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Fix stupid error introduced in last patch.  

Sat Dec 25 15:25:37 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	jsval_to_string() always return a string (even empty) but never
	NULL. It simplifies things a bit more.  

Sat Dec 25 15:15:09 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	It makes for sense for jsval_to_boolean() to return an int.  

Sat Dec 25 15:11:27 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Modify jsval_to_string() to return an unsigned char *, and simplify
	code a lot.  

Sat Dec 25 14:51:12 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Let jsval_to_boolean() return a JSBool and simplify code.  

Sat Dec 25 14:40:14 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Introduce some wrappers for jsval_to_value(): jsval_to_string(),
	jsval_to_boolean(), jsval_to_number().  

Sat Dec 25 14:29:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Write about managers.  

Sat Dec 25 14:19:21 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, ecmascript/spidermonkey.c:

	Add a new flag for msg_box() to indicate i18n of title only. It
	helps to fix an i18n issue with window_alert().  

Sat Dec 25 14:00:00 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Add some sanity checks macros for struct jsval_property.  

Sat Dec 25 13:19:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/fi.po:

	I have been using ELinks from CVS and fixing up its fi.po every now
	and then.  Here are the changes I have made so far.  Not all menu
	items currently have hot keys (~).  That will have to be corrected
	later.  
	
	Update by Kalle Olavi Niemitalo.  

Fri Dec 24 23:28:13 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	window_get_property(): tidy up.  

Fri Dec 24 23:24:42 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	input_get_property(): test |id| before anything else, and simplify
	code.  

Fri Dec 24 23:21:04 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Test |id| before anything else.  

Fri Dec 24 23:19:05 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Minor tidy up.  

Fri Dec 24 23:13:02 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Drop goto/label |convert|.  

Fri Dec 24 17:20:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.11.CVS 

Fri Dec 24 17:01:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10.0 

Fri Dec 24 16:58:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Update .po files 

Fri Dec 24 14:55:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Moved draw_table_bad_html() before rendering the table itself. This
	makes the tables with out-of-order bad html appear normal again
	(mostly it's at the start of the table and it's drawn so now) and
	fixes the issue with broken forms on some pages (<table><form><tr>).
	OTOH it reopens bug 432 (<caption> handling), which is less grave
	than this, though. It's not like I do it this way just because we
	are a little in hurry now - I have no clue how to fix up this all
	without rewriting the whole table processing to be non-perverse and
	in-order with the rest of the HTML parsing. This commit should
	unblock 0.10.0 release.  

Fri Dec 24 14:09:11 2004  Petr Baudis <pasky@ucw.cz>:

	* features.conf:

	CONFIG_LEDS by default on now. Minimal overhead, useful stuff.  

Fri Dec 24 14:07:32 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/perl/hooks.pl:

	Some meaningful Perl hooks by Apu aka Russ Rowan <rrowan@dandy.net>.  

Fri Dec 24 13:59:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted Miciah's 1.515 adding a link's numeric prefix as normal
	link text. It induces some link offsets weirdness requiring complex
	(and quite horribly-seeming) fixes all over the map and so.
	Hopefully, you will meet with it in 0.10.1.  

Fri Dec 24 13:54:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	LXR is not keen on README headlines in README files. README -> Guide 

Fri Dec 24 02:41:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libintl.c, configure.in, po/leet.po:

	Remove unmaintained leet translation. Requested by zas.  

Fri Dec 24 02:37:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Fix bad usage of _() in ERROR() messages. Instead use gettext().
	This and last patch by Gisle Vanem.  

Fri Dec 24 02:34:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.h, terminal/color.c:

	Workaround namespace clashes with Windows headers.  

Fri Dec 24 02:33:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/util/lists.h:

	Remove ending ';' for debug version of LIST_HEAD() that caused a
	parse error in MSVC. Patch by Gisle Vanem.  

Thu Dec 23 21:50:50 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Get rid of these awful macros and drop all these gotos: code is now
	cleaner imho.  

Thu Dec 23 02:45:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc3.CVS 

Thu Dec 23 02:26:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc3 

Thu Dec 23 02:25:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Sync .po files.  

Thu Dec 23 02:23:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Dec 23 02:21:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	A few ideas added.  

Wed Dec 22 23:04:23 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Many minor fixes.  

Wed Dec 22 21:37:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	This is kind of a history file, so adding the codenames for branches
	seem appropriate.  

Wed Dec 22 21:29:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/README:

	Some ecmascript is done. ELusive is and will be supplied by
	document/.  

Wed Dec 22 20:36:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Add a hints section where command prefixing can be mentioned.  

Wed Dec 22 12:49:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/conf.c:

	Change an else-if after an if-block that ends in a return to an if.  

Wed Dec 22 12:47:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/conf.c:

	Delete a superfluous NULL-pointer check in parse_set.  

Wed Dec 22 04:01:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Fix some indentation that was messed up by the last
	commit/reversion.  

Tue Dec 21 23:38:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, index.txt:

	Advertize the introduction.  

Tue Dec 21 23:34:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/introduction.txt:

	Some general entry point for new users. Still a work in progress.
	Please add ideas for things to document after the b33p.  

Tue Dec 21 22:44:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Chain local CGI scripts' stderr to ELinks' implicit stderr. Enables
	i.e. logging of mangle hexcodes and whatever else.  

Tue Dec 21 22:38:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/dcigettext.c:

	Only declare alloca() #ifndef HAVE_ALLOCA instead of #ifndef alloca.
	Fixes warning on FreeBSD.  

Tue Dec 21 21:45:22 2004  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/loadmsgcat.c:

	Fix a typo introduced in last patch by Jonas.  

Tue Dec 21 21:11:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Update by Witold.  

Tue Dec 21 15:11:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/localealias.c:

	Include util/memory.h 

Tue Dec 21 15:08:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/localealias.c:

	Use fmem_(alloc|free) instead of alloca directly. Fixes warning on
	FreeBSD.  

Tue Dec 21 15:05:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/plural.c:

	Oops. Revert stupid locally generated plural.c updates.  

Tue Dec 21 15:04:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: loadmsgcat.c, plural.c:

	Use fmem_(alloc|free) instead of alloca directly. Fixes warning on
	FreeBSD.  

Tue Dec 21 14:07:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/index.txt:

	elinks.keys -> elinkskeys 

Tue Dec 21 13:58:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/index.txt:

	Fixups.  

Tue Dec 21 13:55:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/index.txt:

	Squeeze in the man pages after the user guide.  

Tue Dec 21 13:29:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Make README only a README.  

Tue Dec 21 13:18:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, index.txt, mailcap.html, mailcap.txt:

	mailcap.html -> mailcap.txt, and update it a bit. It still needs
	heavy rewrite.  

Tue Dec 21 13:13:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	The data protocol is not a remote protocol so remove it. Requested
	by Miciah.  

Tue Dec 21 07:34:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Factor code out from add_global_history_item to the new
	add_item_to_global_history.  

Tue Dec 21 07:30:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Factor code out from add_global_history_item into the new
	cap_global_history.  

Tue Dec 21 07:26:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Factor code out from delete_global_history_item into the new
	done_global_history_item.  

Tue Dec 21 07:24:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Factor code out from delete_global_history_item into the new
	remove_item_from_global_history.  

Tue Dec 21 07:22:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Consistently use the name history_item for parameters and local
	avariables of the type struct global_history_item.  

Tue Dec 21 01:53:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/table.c:

	Do those nice exponential table allocations (bug 571 of Jonas) only
	up to 256kb and then go on only in steps of 256kb in the
	reallocations - well, you get the idea. This commit is officially
	dedicated to Ms. Thelma, future master coder of ELinks, currently
	entering the apprentice status. Let's hope it doesn't contain much
	bugs (the commit, not our new apprentice).  

Mon Dec 20 23:52:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	When settings the colors for active link, invert the colors (if
	applicable) even if custom colors were specified. Hopefully fixes
	bug 586 as reported by Apu.  

Mon Dec 20 23:51:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/: Makefile.am, math.c, math.h:

	Introduced swap_values() macro, which does exactly that.  

Mon Dec 20 21:21:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Bahh. Dumb dump.  

Mon Dec 20 21:19:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Revert (1.384 -> 1.385). lindi- reported that setting the user agent
	string to something involving "Mozilla/X.0" makes the server return
	a different page that is correctly renderered.  

Mon Dec 20 20:38:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	The -dump cmdline option is boolean. Reported by lindi-.  

Mon Dec 20 20:24:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	The SSL and gzip combination is a killer for big documents, you just
	always get a load of garbage. It is triggerable at 
	https://www.christianbook.com/Christian/Books/place_order and filed 
	as bug 592 and bug 524. For now work around the problem by never
	accepting gzip for HTTPS connections.  

Mon Dec 20 13:40:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Change an assertion to a normal bounds-check to prevent an assertion 
	failure with _^H_.  

Mon Dec 20 13:13:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Oops. s/default_clink/default_link/ 

Mon Dec 20 12:12:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.h:

	Document the struct color_pair color member of struct link.  

Mon Dec 20 12:06:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Altho it makes absolutely no difference, initialise the link's 
	foreground colour to the normal link colour instead of the vlink
	colour in add_document_link.  

Mon Dec 20 12:03:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In print_document_link, drop the local variable color and use 
	link->color instead, giving the link the proper colours as a
	side-effect. (The correct colours were being put on the canvas, the
	link structure just did not reflect this.) 

Mon Dec 20 11:59:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In print_document_link, save the link returned by check_link_word.  

Mon Dec 20 11:56:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Minor simplification.  

Mon Dec 20 11:56:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Fix a major typo in the last commit.  

Mon Dec 20 11:55:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Change check_link_word to return the link returned by
	add_document_link or NULL instead of an integer.  

Mon Dec 20 11:50:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Simplify check_link_word by re-arranging some checks.  

Mon Dec 20 11:48:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Return 0 from check_link_word if add_document_link fails.  

Mon Dec 20 11:41:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Use doc_opts->default_(v|bookmark_|)link instead of get_opt in
	print_document_link.  

Mon Dec 20 11:22:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/: options.c, options.h, html/parser.c,
	html/parser.h, html/parser/link.c:

	Add color_t default_image_link to struct document_options and
	color_t image_link to struct text_attrib and use them instead of
	calling get_opt in the middle of the HTML parser.  

Mon Dec 20 11:07:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/: options.c, options.h, dom/renderer.c,
	html/parser.c, html/parser.h, html/parser/link.c:

	Add color_t default_bookmark_link to struct document_options and
	color_t bookmark_link to struct text_attribute and use them instead
	of calling get_opt in the different document parsers.  

Mon Dec 20 08:49:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Add a link's numeric prefix as normal link text. Now, a given link's 
	prefix is included in its points.  
	
	This involves changing put_link_number not to hide from put_chars 
	the fact that it is currently adding a link and changing put_chars 
	not to fall into infinite recursion with it calling put_link_number 
	and put_link_number calling put_chars.  
	
	User-visible effects: 
	
	 - Clicking a link's prefix will now select the link.  
	 - Selecting a link will now highlight its prefix.  

Mon Dec 20 00:29:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Compilation fixes for FreeBSD related to is_ip_address().  

Mon Dec 20 00:08:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/html/html.c:

	Remove unused variable.  

Sun Dec 19 23:38:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc2.CVS 

Sun Dec 19 23:23:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc2 

Sun Dec 19 23:21:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: cs.po, da.po, de.po, el.po, es.po, et.po, fi.po, fr.po,
	gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po, lt.po, nl.po,
	no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po, tr.po,
	uk.po:

	Sync .po files.  

Sun Dec 19 23:16:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po:

	Sync .po files.  

Sun Dec 19 22:32:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	If ECMAScript, auto-linkify pair elements which have the onClick
	property.  

Sun Dec 19 19:28:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Plug another security hole. Let the script look only at frames whose
	security context (that is, hostname) is same as his.  

Sun Dec 19 18:04:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/renderer.c,
	document/css/css.c, sched/session.c:

	Introduce follow_cached_redirects() and get_redirected_cache_entry()
	which based on Miciahs MAX_REDIRECT restricted cache redirect
	looping will chase the list of cache entries to find the resulting
	one.  
	
	Replace potentially bad while (cache->redirect) loops to use 
	get_redirected_cache_entry() and make check_incomplete_redirects()
	use follow_cached_redirects() as a backend.  

Sun Dec 19 17:46:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	My explanation of bug 533.  

Sun Dec 19 17:15:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Sun Dec 19 17:09:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Dec 19 17:02:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Zas' fix for bug 558 is correct.  

Sun Dec 19 17:01:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	Some hopefully finishing touches of this years elinks(1).  

Sun Dec 19 16:53:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Serve navigator.language only if ENABLE_NLS. Spotted by Apu.  

Sun Dec 19 16:47:25 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.h:

	Kill trailing whitespaces.  

Sun Dec 19 16:43:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fixed document.cookie accessing leak.  

Sun Dec 19 16:42:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in, src/config/cmdline.c:

	Fix description of -no-home.  

Sun Dec 19 16:23:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, tables.c, parser/stack.c:

	Fix bug 578 (invalid accesses of html_context.part in
	kill_html_stack_item(), as reported by Apu Nahasapeemapetilon's
	Valgrind). We must make sure that before done_html_parser*()
	html_context.part is still alive and correct.  

Sun Dec 19 16:15:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Fixed showing of checkbox/radio value in get_form_info().  

Sun Dec 19 16:06:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	I never did like that :// entangling. Elaborate more freely about
	supported protocol and mention even the new ones.  

Sun Dec 19 16:06:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	It's nice not to let any malicious webmaster retrieve any file from
	client's machine readable by the user. Fixed this tiny security
	issue by not letting ECMAScript change file inputs' input.value.  

Sun Dec 19 16:05:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Let input.checked value be touched only when input is checkbox or
	radio. When changing input.value, set fs->state only if it's text,
	password or file.  

Sun Dec 19 16:03:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Another fierce attempt to destabilize. Even checkboxes, radios,
	submits, images, resets, buttons and hiddens have allocated value
	now. That enables ECMAScript to meaningfully change it.  

Sun Dec 19 15:55:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	Add new options since 23th Dec 2003 ;) and improve the highlighting.  

Sun Dec 19 15:54:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Alphabetize cmdline options. Improve the description of -no-home.  

Sun Dec 19 15:54:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Surprisingly, some people don't compile ECMAScript in.  

Sun Dec 19 14:56:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fixed current_link_evhook() to always return a value.  

Sun Dec 19 14:50:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	When setting input.value, set fs->state to its length instead of
	tinkering with vpos and vypos, which will be (hopefully) adjusted
	automagically.  

Sun Dec 19 14:49:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: ecmascript/ecmascript.c, ecmascript/ecmascript.h,
	ecmascript/spidermonkey.c, ecmascript/spidermonkey.h,
	viewer/text/link.c:

	Introduced ecmascript_eval_boolback(), used for event handlers and
	handled for onClick event evaluation.  

Sun Dec 19 14:37:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/error.c:

	S_NO_JAVASCRIPT -> JavaScript support is not enabled.  

Sun Dec 19 14:31:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Zero vpos and vypos when changing input value.  

Sun Dec 19 14:24:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	mem_free_set() takes an address of the first pointer. Right.  

Sun Dec 19 14:13:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: ecmascript/spidermonkey.c, protocol/http/http.c:

	Only set navigator.language if protocol.http.accept_ui_language.  

Sun Dec 19 13:59:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fixed user-agent string leaking.  

Sun Dec 19 13:53:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	That diabolic thing's full name is Microsoft Internet Explorer.  

Sun Dec 19 13:53:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fixed few other tiny mistakes. Did I really make the last compile
	test so long ago? 

Sun Dec 19 13:50:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Killed another unused variable.  

Sun Dec 19 13:50:10 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Check explicitly for $no_x value not being yes. I feel better that
	way. Inspired by ugenn.  

Sun Dec 19 13:49:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Woohoo. Newlines.  

Sun Dec 19 13:47:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Basic implementation of the navigator object.  

Sun Dec 19 13:10:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	input.value is string, not boolean.  

Sun Dec 19 13:09:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Introduced form_elements class, which contains form.elements. Very
	similar to document.forms. Perhaps we could do with some generic way
	to handle these collections, we'll need more soon.  

Sun Dec 19 12:32:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/protocol.c:

	Guard you grill, because the last protocol options is hereby placed
	in protocol land.  

Sun Dec 19 12:25:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/protocol.c, protocol/user.c,
	protocol/user.h:

	Modularaize the User protocol thingy and move options to the new
	module.  

Sun Dec 19 12:17:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Implemented form.length.  

Sun Dec 19 12:17:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file/file.c, http/http.c:

	Make HTTP and File option info static.  

Sun Dec 19 12:08:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/file/file.c:

	Move file options to the file module.  

Sun Dec 19 12:04:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, file/file.c, file/file.h:

	Modularize the file protocol.  

Sun Dec 19 11:42:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fold forms.<moo> resolving code to forms_namedItem() call.  

Sun Dec 19 11:32:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Oops, remove forgottten debug print.  

Sun Dec 19 11:31:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	DARN. Implement value_to_jsval() for JSPT_INT. I was debugging this
	for half an hour and it just isn't getting converted! 

Sun Dec 19 11:27:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	input.max_length -> input.maxLength 

Sun Dec 19 11:26:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Bah. Define properties of objects form and forms.  

Sun Dec 19 11:26:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Support for document.forms[0], making forms to behave like a real
	array.  

Sun Dec 19 11:19:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	gcc needs an AI 

Sun Dec 19 11:18:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Handle srcfs->form_view being NULL in copy_vs() properly. Fixed
	crashes i.e. on marks.  

Sun Dec 19 11:17:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Simpliy 

Sun Dec 19 10:41:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Killed evil inlines.  

Sun Dec 19 10:38:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Predeclare squeezastring() as static.  

Sun Dec 19 10:05:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Make @accept_charset regular normally allocated pointer. Fixed case
	of failed allocation.  

Sun Dec 19 10:04:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Introduced squeezastring() which does memacpy(string->source,
	string->length).  

Sun Dec 19 04:46:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Use memcpy instead of strcpy in init_accept_charset as we already 
	have the length of the source string.  

Sun Dec 19 02:51:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Remove a stale comment that accept_charset is not freed until
	exit().  

Sun Dec 19 02:49:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Reduce indentation in init_accept_charset.  

Sun Dec 19 02:46:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Add a module de-initialisation hook that frees accept_charset.  
	
	This should make Valgrind happy--no longer do we 'leak' that one
	string.  

Sun Dec 19 02:38:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Factor the initialisation of accept_char out from http_send_header 
	into the new init_accept_charset.  

Sun Dec 19 02:32:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Move static unsigned char *accept_char from http_send_header to the
	global scope.  

Sun Dec 19 02:27:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/options.inc, protocol/http/http.c:

	Move HTTP option definitions to the HTTP module.  

Sun Dec 19 02:21:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: protocol.c, http/http.c, http/http.h:

	Give HTTP a struct module.  

Sun Dec 19 02:08:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Remove another old MIME related compatibility alias added 2003-05-06
	in 0.5pre1.CVS.  

Sun Dec 19 02:04:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	The forms array is numbered from 0, not 1 

Sun Dec 19 01:51:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	In ecmascript_reset_state(), set all the cached ecmascript objects
	to NULL too. Fixes crash on Google reload.  

Sun Dec 19 01:47:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/bookmarks.c, mime/backend/default.c,
	mime/backend/mimetypes.c, protocol/protocol.c,
	protocol/finger/finger.c:

	Include modules/module.h.  

Sun Dec 19 01:41:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fixed invalid usage of get_form_object() which would make form to
	have forms as its parent, not document. Bugzilla now doesn't crash
	it and the quick search form gets autofocus.  

Sun Dec 19 01:27:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Support for document.forms.<formname>. Bugzilla now gets autofocus
	on the quick search form. It crashes along the way, but that's life.  

Sun Dec 19 01:24:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Get rid of an extremely suspicious DOUBLE_TO_JSVAL().  

Sun Dec 19 01:20:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Remove old mailcap compatibility aliases added 2003-05-07 during
	0.5pre0.CVS. Suggested by pasky an Miciah.  

Sun Dec 19 01:15:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/forms.h, document/html/renderer.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/vs.c:

	Bind struct form and struct form_view together by form_num instead
	of direct reference. This makes it waste more time and eliminates
	some crashing possibilities.  

Sun Dec 19 01:10:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Really fixed that horrible thing which has irritated me since long
	but I never really got to do it.  

Sun Dec 19 01:01:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Call write_bookmarks at the end of bookmark_write_hook.  

Sun Dec 19 00:57:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/cookies/cookies.c, src/protocol/uri.c,
	src/protocol/uri.h:

	Introduce is_ip_address() that uses inet_pton() as backend.  Use it
	in is_domain_security_ok() to reject evil plots where the alias
	127.1 domain-matches 99.54.127.1. Idea from Mozilla.  

Sun Dec 19 00:51:34 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Few words on document vs document_view vs view_state.  

Sun Dec 19 00:17:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/forms.h, ecmascript/spidermonkey.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/vs.c,
	viewer/text/vs.h:

	Introduced struct form_view, which is document_view-specific
	equivalent for struct form. Moved ECMAScript objects to struct
	form_view and struct form_state.  

Sat Dec 18 23:05:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c, test/malicious_uris.html:

	check_malicious_uri(): Chop trailing dots before checking the TLD.
	Now the whole thing doesn't go up in flames anymore.  

Sat Dec 18 22:42:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/malicious_uris.html:

	Test cases for malicious URIs.  

Sat Dec 18 21:43:42 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Typo fix.  

Sat Dec 18 21:38:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Minor style touches on the malicious URI warning.  

Sat Dec 18 21:37:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	unambiguous_uri -> malicious_uri 

Sat Dec 18 20:45:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, sched/task.c:

	Try to fix bug 382 by alerting the user about misleading and
	maliciously crafted URIs. It is optional via
	document.browse.links.warn_malicious; on by default.  

Sat Dec 18 20:36:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	input's parent is form, not input ;-) 

Sat Dec 18 20:31:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/forms.c, document/forms.h,
	ecmascript/spidermonkey.c:

	Implemented HTMLInputElement DOM object (covers few original
	JavaScript objects). Reachable through form.<inputname> only now.  

Sat Dec 18 19:53:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Just kill document.html.expand_table_columns.  

Sat Dec 18 19:46:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	s/typeahead text searching/incremental searching/ as someone
	suggested on #elinks.  

Sat Dec 18 19:22:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/session.c,
	sched/task.c:

	Replace the fix for bug 559 with a more localized one, since it
	caused problems with displaying download errors, reported by zas.
	Now session_is_loading() will use a new cache_entry_is_valid()
	function to explicitly check if download->cached can be used before
	passing it to check_incomplete_redirects().  Hella ugly but I don't
	want to waste more valuable time debugging this load of crap. I
	might end up starting to rewrite it and I don't think that will be 
	´ealthy at this point.  

Sat Dec 18 19:12:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	More is_in_progress_state() usage.  

Sat Dec 18 17:47:09 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 18 16:17:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.h:

	Add table->caption_height member that is calculated when calling
	get_table_heights() by new get_table_caption_height() which is a
	crude duplication of draw_table_caption(). Fixes bug 572.  

Sat Dec 18 15:54:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/forms.c:

	Some trailing space.  

Sat Dec 18 15:33:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, index.txt, tabs.txt:

	Document the wonders of tabbed browsing.  

Sat Dec 18 15:13:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/forms.h, ecmascript/spidermonkey.c:

	Generate the form object only once per form, caching it in
	form.ecmascript_obj.  

Sat Dec 18 14:25:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	The form object has now the document object as its parent and its
	methods behave accordingly to that. Fixes unstability on Google
	News.  

Sat Dec 18 12:38:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_special_form_control(): Somehow by cleaning up paskys ugly code
	this fixes issues bugging at |add_to_list(part->document->forms,
	init_form())| reported by Neuromancer on #elinks.  

Sat Dec 18 10:53:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	Include util/error.h.  

Sat Dec 18 02:33:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	free_task(): Clear ses->loading, so there are no dangling pointers
	left behind. Fixes the test case in bug 559.  

Sat Dec 18 02:33:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: ecmascript/spidermonkey.c, viewer/text/form.c,
	viewer/text/form.h:

	Eliminate code duplication in SM's form_submit() and
	auto_submit_form() by introducing submit_given_form(), which takes a
	form pointer and submits that form.  

Sat Dec 18 02:22:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	html_(tag|form*) -> html_special_\1, to naming prevent conflicts
	with HTML element handlers. As suggested by Jonas.  

Sat Dec 18 02:17:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/forms.c:

	Actually free the form controls in done_form().  

Sat Dec 18 02:17:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Cope with NULL fc->form in new_link(). It's a correct condition and
	we can just take the last encountered form in that case. Explained
	in a comment. Fixes those nice assertion failures.  

Sat Dec 18 01:48:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Oops. Actually attach form to new form_control.  

Sat Dec 18 01:44:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/forms.c:

	Fixed has_form_submit() so that it actually works - it was returning
	always 1 since zas' viewer/text/form.c:1.41.  

Sat Dec 18 01:42:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/document.h, document/forms.c,
	document/forms.h, document/html/internal.h, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c,
	document/html/parser/forms.c, document/html/parser/forms.h,
	ecmascript/spidermonkey.c, formhist/formhist.c,
	formhist/formhist.h, viewer/text/form.c, viewer/text/form.h,
	viewer/text/link.c:

	Introducted {struct form}, which now groups {struct form_control}s
	together based on what form they are members of and it occupies the
	document.forms list itself. Some redundant fields were removed from
	form_control, ctrl_num was blasted (it was unused now) and form_num
	was transformed to {struct form} pointer form. Usage of couple of
	functions was simplified etc.  

Sat Dec 18 00:45:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: form.c, form.h:

	Remove now-unused form_state.ctrl_num. form_control.ctrl_num still
	survives just because it's inconvenient for me to remove it right
	now, but it will disappear soon.  

Sat Dec 18 00:43:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	fc->form_num + fc->ctrl_num == fc->position 

Sat Dec 18 00:28:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Reformat a comment.  

Sat Dec 18 00:27:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/Makefile.am, document/document.c,
	document/forms.c, document/forms.h, document/html/parser/forms.c,
	ecmascript/spidermonkey.c, formhist/dialogs.c, formhist/formhist.c,
	formhist/formhist.h, viewer/text/form.c, viewer/text/form.h,
	viewer/text/link.c, viewer/text/textarea.c, viewer/text/textarea.h:

	Moved struct form_control, has_form_submit() and done_form_control()
	generic form routines from viewer/text/form.h to document/forms.h.  

Sat Dec 18 00:18:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	In add_global_history_item, check whether init_global_history_item 
	returns NULL.  

Sat Dec 18 00:11:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* test/: Makefile.am, backspaces.txt:

	New test-case for backspaces and ASCII mark-up.  

Sat Dec 18 00:06:32 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Whoops, that is _struct_ global_history_item.  

Sat Dec 18 00:04:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Factor the actually allocation and initialisation of the new history
	item out to the new init_global_history_item.  

Fri Dec 17 23:58:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Group the allocation of the new history item's listbox item with the
	rest of the history item initialisation code.  

Fri Dec 17 23:55:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Killed commented out form.num. The number is
	just offset of the <form> tag start in the HTML part and we can get
	that anytime easily from html_context.last_form_tag, so no need to
	carry it around in a struct.  

Fri Dec 17 23:53:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	In add_global_history_item, add the new history item to the hash
	table even if we cannot allocate the box item for it.  

Fri Dec 17 23:52:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Description.  

Fri Dec 17 23:51:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Sprinkled by few comments.  

Fri Dec 17 23:50:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	In add_global_history_item, drop local variable text, which has been 
	unused since add_listbox_item stopped taking an argument for the
	listbox item's label in src/bfu/hierbox.c revision 1.163 (and we
	stopped passing it, in revision 1.75), which it hadn't used since
	src/bfu/hierbox.c revision 1.161 when listbox_item->text was
	superseded by the get_text listbox operation.  

Fri Dec 17 23:49:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Killed sa and end_parse label by converting
	the main stuff to an explicit loop.  

Fri Dec 17 23:47:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Changed my mind. Reintroduced end_parse
	label.  

Fri Dec 17 23:46:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Eliminated end_parse label.  

Fri Dec 17 23:44:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): @i -> @stop_pos.  

Fri Dec 17 23:43:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): Eliminated sp label.  

Fri Dec 17 23:42:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	find_form_for_input(): @s -> @pos, @ss -> @tag_start_pos, @lf ->
	@last_form_tag, @la -> @last_form_attr.  

Fri Dec 17 23:23:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	When an input line is open and the user clicks outside of it, close
	the input line and pass the event on to the next window.  

Fri Dec 17 23:20:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Explain the content of those mysterious lists in struct document.  

Fri Dec 17 23:15:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	FORM_CONTROL -> FORM 

Fri Dec 17 23:14:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Support for form.encoding.  

Fri Dec 17 22:59:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/renderer.c, protocol/uri.c,
	protocol/uri.h, protocol/gopher/gopher.c, sched/download.c,
	viewer/text/link.c:

	Introduce decode_uri_{string_,}for_display() which removes
	non-printable and control chars from decoded URIs, even when the
	decoded URI is going to be used for a filename. Fixes bug 573.  

Fri Dec 17 22:45:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	The right fix for the bugzilla crash. forms' parent is document, but
	the vs is private of window, document's parent.  

Fri Dec 17 22:40:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/: cookies.c, cookies.h:

	Unexport get_cookie_server().  

Fri Dec 17 21:54:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/events.txt, src/bookmarks/bookmarks.c,
	src/bookmarks/dialogs.c, src/config/options.inc:

	Introduce periodic snapshotting of all tabs in all terminals.  
	
	Add the events bookmark-delete, bookmark-move, and bookmark-update.  
	
	Auto-sort the ui.sessions as the bookmarks module is now adding an
	option thereunder.  
	
	Add the new routines and event hooks to perform the snapshotting.  

Fri Dec 17 20:26:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Do not use the trailing underscores lightly. property__ ->
	jsval_property.  

Fri Dec 17 20:24:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Reverted relevant part of 1.98, moving initializations back to the
	declaration part and thus fighting the evil clutter ;-).  

Fri Dec 17 16:19:08 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	document.browse.search.case is boolean.  

Fri Dec 17 15:59:01 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 17 15:52:10 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Reformat JavaScript Emergency message, and fix a memleak
	(MSGBOX_FREE_TEXT needed).  

Fri Dec 17 15:48:50 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Use a struct for property, and make union anonymous.  

Fri Dec 17 15:25:53 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Introduce P_UNDEF() macro, and drop prop_type = JSPT_UNDEF. Note
	that VALUE_TO_JSVAL_START always call it.  

Fri Dec 17 15:00:00 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Add macros to set @p and use them.  

Fri Dec 17 14:37:00 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	error_reporter(): attempt to make things readable.  

Fri Dec 17 14:10:14 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	If we go for macros, then use them.  

Fri Dec 17 14:06:39 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Make @doc_view, @ses more local. Minor typo fix.  

Fri Dec 17 13:59:43 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Drop temporary variable and minor typo fix.  

Fri Dec 17 13:58:06 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Put spaces around = operator.  

Fri Dec 17 13:56:00 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Make @doc_view declaration more local.  

Fri Dec 17 13:48:47 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Tidy up.  

Fri Dec 17 13:32:09 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Reduce indentation level and tidy up.  

Fri Dec 17 13:26:40 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Reduce indentation level and tidy up.  

Fri Dec 17 13:24:02 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Drop useless temporary variable.  

Fri Dec 17 13:22:33 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Tidy up.  

Fri Dec 17 13:19:51 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/: spidermonkey.c, spidermonkey.c:

	Drop useless {}.  

Fri Dec 17 11:09:34 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	JSVAL_TO_VALUE_START macro declares some variables, so stick it to
	declaration block.  

Fri Dec 17 11:05:55 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	VALUE_TO_JSVAL_START macro declares some variables, so stick it to
	declaration block.  

Fri Dec 17 11:02:50 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Only get document if needed, it fixes crash when accessing bugzilla.
	Pasky, please review.  

Fri Dec 17 08:53:09 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	document.browse.forms.auto_submit option is boolean.  

Fri Dec 17 08:48:37 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, link.c:

	document.browse.accesskey.display option is boolean.  

Fri Dec 17 05:06:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Describe init_link_drawing, draw_current_link, and clear_link.  

Fri Dec 17 04:40:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/view.h:

	Guess at the purpose of struct link_bg *link_bg and int link_bg_n in
	struct document_view.  

Fri Dec 17 03:21:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	s/non accessible/inaccessible/ 

Fri Dec 17 03:19:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Never add inaccessible links, regardless of whether we are numbering
	them.  

Fri Dec 17 01:33:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Stop searching a document when the first zero-length match is found.  
	This avoids long freezes while ELinks finds and highlights every
	zero-length match on the page, which can take a while.  

Fri Dec 17 01:22:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	When the generic hierbox search handler finds no matches, mark all
	items visible.  
	
	This fixes bug 567: 'all listbox items made invisible when result of
	search is not found' 

Fri Dec 17 01:11:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Oh these compilers...  

Fri Dec 17 00:49:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Extensive cleanup of the 'form' object methods.  

Fri Dec 17 00:46:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Treat option as boolean.  

Fri Dec 17 00:39:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Extensive cleanup of the 'forms' object methods.  

Fri Dec 17 00:25:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Internally, call the object 'form' instead of 'form_control' in our
	symbol names. Less confusing, I think.  

Fri Dec 17 00:21:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Trivial reindentation.  

Fri Dec 17 00:20:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Factored out form_control class instance generation to
	get_form_control_object(), and made the object to have the 'forms'
	object as its parent.  

Fri Dec 17 00:05:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Cleanup parts of document_get_property() relevant to forms. Also,
	document.forms is not generated under each property lookup as a new
	object anymore, but initialized single time by JS_InitClass(). I
	hope it actually works.  

Thu Dec 16 23:53:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Try to un-mess the code again by logically reordering the forms code
	added by witekfl.  

Thu Dec 16 23:48:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, ecmascript/ecmascript.h:

	Introduce ecmascript_interpreter.onload_snippets_owner containing
	document id of the final document structure the snippets come from -
	and if that changed from before when about to process snippets,
	reset the state and process them from scratch. Fixes bug 516 where
	the current document got reloaded in another tab and then some
	smart*** pressed ^L to redraw it in the current one.  

Thu Dec 16 23:10:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Initialize cache entries id_counter to 1 instead of 0. I need 0 for
	special stuff.  

Thu Dec 16 21:28:46 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Enhanced documentation.  

Thu Dec 16 21:06:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/file.c:

	Pah, fixed annoying warning about
	get_opt_int(document.browse.links.color_dirs) instead of
	get_opt_bool(). Like it matters.  

Thu Dec 16 19:47:36 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/remote.txt:

	Few style and grammar touches.  

Thu Dec 16 19:42:01 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/index.txt:

	Aesthetical touches.  

Thu Dec 16 19:39:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: leds.c, leds.h:

	Respect identifiers namespaces and use led.used__ insted of
	led.__used.  

Thu Dec 16 16:05:22 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Thu Dec 16 15:56:54 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, util/secsave.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:42:58 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/task.c, viewer/text/form.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:34:02 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, dialogs/options.c, protocol/ftp/ftp.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:23:20 2004  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, dialogs/status.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:19:23 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:17:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Treat options as booleans.  

Thu Dec 16 15:14:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Treat options as booleans.  

Thu Dec 16 15:13:30 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, config/opttypes.c, lowlevel/dns.c:

	More get_opt_*() fixes.  

Thu Dec 16 15:10:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, document/options.c,
	lowlevel/connect.c, viewer/text/view.c:

	Treat options as booleans.  

Thu Dec 16 15:05:12 2004  Laurent Monin <zas@norz.org>:

	* src/: document/renderer.c, intl/gettext/libintl.h:

	Those options are of codepage type.  

Thu Dec 16 15:03:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Get -dump and -source cmdline options as booleans.  

Thu Dec 16 14:55:30 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.h:

	Add get_opt_codepage() and get_cmd_opt_codepage().  

Thu Dec 16 14:43:41 2004  Laurent Monin <zas@norz.org>:

	* src/config/: options.c, options.h, opttypes.c, opttypes.h:

	When CONFIG_DEBUG is defined, check for wrong get_opt_*() calls
	regarding option type.  

Thu Dec 16 13:52:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Oops forgot this one when updating elinks.conf(5) yesterday in my
	release tree.  

Thu Dec 16 13:51:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/remote.txt:

	s/"g elinks"/g:elinks/ which pasky prefers.  

Thu Dec 16 13:36:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: ecmascript.txt, hacking.txt, index.txt, marks.txt,
	remote.txt, urlprefixes.txt:

	Aspell all .txt files.  

Thu Dec 16 13:11:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/lua/elinks-remote, doc/Makefile.am, doc/index.txt,
	doc/remote.txt:

	Elaborate a bit about managing remote ELinks instances with -remote.
	Plant a note about -remote in the elinks-remote hack.  

Thu Dec 16 11:44:03 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: index.txt, urlprefixes.txt:

	The tracts of URI rewriting.  

Thu Dec 16 10:54:33 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/index.txt:

	I guess ex-mode is advanced.  

Thu Dec 16 10:54:01 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	A new debug_check_option_syntax() that wraps calls to
	check_caption() and check_description().  

Thu Dec 16 10:49:32 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/bookmarks.txt:

	Slightly reordered the sample bookmarks hierarchy for marginal
	increase in instructiveness.  

Thu Dec 16 10:47:16 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	When CONFIG_DEBUG is defined, check for bad chars at end of option
	description, it will warn if spaces, tabs or newlines are found.  

Thu Dec 16 10:46:29 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/bookmarks.txt:

	Hopefully completed the bookmarks documentation by details on the
	bookmarks formats.  

Thu Dec 16 10:38:33 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	check_caption() -> static.  

Thu Dec 16 10:34:42 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 16 10:31:23 2004  Laurent Monin <zas@norz.org>:

	* src/config/: cmdline.c, options.inc:

	Drop extra newline at end of option description.  

Thu Dec 16 10:29:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	end_of_dir(): Drop the now obsoleted struct uri parameter.  

Thu Dec 16 10:22:48 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and some typos were fixed.  

Thu Dec 16 09:58:05 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 16 09:56:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix encoding of file:// URIs so that the query is not also encoded.
	This patch has some issues raise by Miciah, mostly related to the
	way check_file_uri() works, but it fixes support for passing query
	URI components to local CGI scripts. Maybe it would be more
	elegantly fixed by adding query members to struct uri.  

Thu Dec 16 09:52:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix detection of end_of_dir() by allowing (again) query URI
	components in file:// URIs. Fix the bad logic when checking and
	initializing the fragment URI components of file:// URIs.  

Thu Dec 16 09:44:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	The native ELinks format IS NOT compatible with the Links 0.9x
	bookmarks format.  

Thu Dec 16 09:33:23 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: bookmarks.txt, color-model.txt, ecmascript.txt, exmode.txt,
	feedback.txt, marks.txt:

	Some Id tags.  

Thu Dec 16 09:31:29 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: Makefile.am, README, index.txt:

	Added grandiose introduction+table of contents index.txt file.  

Thu Dec 16 08:46:37 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/events.txt:

	Some introduction to what's up with this events thing.  

Thu Dec 16 08:16:34 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	This sentence has bothered me in my dreams for a long time.  

Thu Dec 16 01:53:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Updates to polish translation - fixing 9 fuzzies/untranslated
	msgids. Patch by Adam Golebiowski <adamg@pld-linux.org>.  

Thu Dec 16 00:15:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Survive if SM doesn't provide JSOPTION_COMPILE_N_GO. It's a popular
	cause of compile failures and it's only informative, not strictly
	required.  

Wed Dec 15 23:11:41 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: Makefile.am, exmode.txt:

	More crazy raving, exmode is the topic this time.  

Wed Dec 15 22:25:16 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	More pride for me! 

Wed Dec 15 22:20:46 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: Makefile.am, marks.txt:

	Some raving blabbery on marks, per Miciah's request.  

Wed Dec 15 21:52:23 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/README:

	Make this file less confusing for the part of mankind not closely
	following the (lack of) ELinks development in the area of
	documentation, pointing out the existence of humble text and HTML
	files in the doc/ directory, aside the intrisically invisible
	docbook manual.  

Wed Dec 15 19:25:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc1.CVS 

Wed Dec 15 19:18:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10rc1 

Wed Dec 15 19:14:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Update .po files.  

Wed Dec 15 19:10:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Wed Dec 15 19:05:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/html/parser/link.c:

	Alias document.browse.images.file_tags to
	document.browse.images.filename_maxlen since that is what it has
	most in common with. Place an XXX near the use of the new
	filename_maxlen option that it can potentially return a negative
	number. Gently teach vim that .inc files are infact .c files.  

Wed Dec 15 18:48:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Some how them 'Max.' abbreviations don't look right, so maximize
	them.  

Wed Dec 15 16:05:06 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 15 15:41:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Treat label=="" as label==NULL.  

Wed Dec 15 15:21:26 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Code cleanup in get_image_label() and get_image_filename_from_src().  

Wed Dec 15 15:15:46 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Comment out now obsolete option document.browse.images.file_tags:
	what should we do ?.  

Wed Dec 15 15:11:55 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/html/parser/link.c:

	A new option was added: document.browse.images.filename_maxlen It
	replaces document.browse.images.file_tags which is now obsolete.  
	Users should use combination of display_style and filename_maxlen
	instead.  

Wed Dec 15 15:06:57 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/html/parser/link.c:

	A new option was added: document.browse.images.display_style Its
	value controls how to display image tags.  0     means always
	display IMG 1     means always display filename 2     means display
	alt/title attribute if possible, IMG if not 3     means display
	alt/title attribute if possible, filename if not 

Wed Dec 15 14:53:41 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser/link.c, config/options.inc:

	A new option named document.browse.images.label_maxlen was added to
	control maximum length of label extracted from alt/title attributes.
	It acts independently of document.browse.images.file_tags.  

Wed Dec 15 13:53:46 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Revert patch 1.64->1.65 for now. It should be optionnal, and off by
	default. This should perhaps be reintroduced later, we have too much
	image tags options yet.  

Wed Dec 15 10:32:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Truncate filename if needed in get_image_filename_from_src().  

Wed Dec 15 10:10:38 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Be clever, use value of id attribute if no title nor alt is
	available as image label.  

Wed Dec 15 09:47:11 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Simplify code and display IMG by default when no other label is
	available, with brackets if needed.  

Wed Dec 15 09:32:34 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Cleanup comments.  

Wed Dec 15 08:55:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	HTML highlighting is not so experimental. IMO and in Miciahs too.  

Tue Dec 14 19:16:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Use function wrappers to eliminate that clandestine argument passing 
	between html_embed, html_iframe, html_img, and html_object using the
	global object_src as a drop box.  

Tue Dec 14 18:48:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Flip the conditions and swap the respective then and else
	expressions in the same two ternary-operator expressions.  

Tue Dec 14 18:45:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Remove some superfluous parentheses from a ternary-operator
	expression.  

Tue Dec 14 18:38:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Use the ternary operator instead of an if-else block.  

Tue Dec 14 18:36:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Rewrite the comment describing do_move_bookmark to be accurate.  

Tue Dec 14 18:32:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Move the comment describing do_move_bookmark from the caller to the
	definition of do_move_bookmark.  

Tue Dec 14 18:29:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Clean up the whitespace in do_move_bookmark.  

Tue Dec 14 18:25:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	In do_move_bookmark, assert that arguments destb and desti are
	either both NULL or neither NULL.  
	
	Drop local variable blind_insert, which was assigned the boolean
	destb && desti.  
	
	Check whether destb or desti is NULL where we used to check whether
	blind_insert was 0.  
	
	Assign desti = destb = NULL where we used to set blind_insert = 0.  

Tue Dec 14 17:35:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Factor the loop that performs the bookmarking out from
	bookmark_terminal_tabs and into the new bookmark_terminal.  
	bookmark_terminal_tabs now is a wrapper that adds the folder and 
	gives it to bookmark_terminal.  

Tue Dec 14 17:08:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	In delete_folder_by_name, check whether the bookmark is a folder 
	before checking whether the title matches, as the former operation 
	should be much faster.  

Tue Dec 14 17:07:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Factor the folder deletion code out from bookmark_auto_save_tabs and
	into the new delete_folder_by_name.  

Tue Dec 14 17:01:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	In bookmark_terminal_tabs, use local variable ses instead of 
	tab->data, the value of which is already assigned to ses.  

Tue Dec 14 17:00:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Include util/lists.h.  

Tue Dec 14 16:59:32 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Sort the inclusions.  

Tue Dec 14 01:58:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	In do_move_bookmark, use foreachsafe instead of re-implementing it 
	with a while loop.  

Tue Dec 14 01:55:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Just put a hard limit on the number of successive redirects.  

Mon Dec 13 18:48:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Try again, but this time, do not dereference the given pointer if it
	is NULL.  

Mon Dec 13 18:46:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Revert that.  

Mon Dec 13 06:15:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Improve the infinite-loop check in check_incomplete_redirects to
	catch loops that involve more than one page.  

Mon Dec 13 04:49:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Remove a stale comment in truncate_label: because the memcpy no
	longer will copy the NUL, the line that adds the NUL terminator is
	no longer just for 'great safety'.  

Mon Dec 13 04:22:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Do _not_ free map_url after assigning it to format.link.  This
	should fix the crashes caused by the bad memory handling introduced
	in revision 1.52.  

Mon Dec 13 04:19:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Free the the value returned by join_urls once it is no longer
	needed.  

Mon Dec 13 04:18:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Check whether join_urls returns NULL.  

Mon Dec 13 04:16:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Introduce local variable joined_urls.  

Mon Dec 13 04:12:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	html_img: Rename local variable url to map_url in the image-map
	code.  

Fri Dec 10 18:20:35 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): mem_free*() only when needed.  

Fri Dec 10 18:16:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): use mem_free_set().  

Fri Dec 10 18:14:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): drop another FIXME, please check if correct.  

Fri Dec 10 18:12:20 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): reorganize code and drop a FIXME.  

Fri Dec 10 18:05:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): empty lines and comments cleanup. Two FIXME were added.  

Fri Dec 10 18:00:27 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): drop goto and obsolete comments.  

Fri Dec 10 17:51:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): move code to new put_image_label().  

Fri Dec 10 17:44:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): simplify code.  

Fri Dec 10 17:39:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): @al -> @usemap_attr,@label ; @tmp -> @new_label.  

Fri Dec 10 17:31:23 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): @u -> @url, free @al asap.  

Fri Dec 10 17:28:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): get image source once only, code cleanup.  

Wed Dec  8 18:29:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	truncate_title() was renamed get_image_label() and slightly
	modified.  

Wed Dec  8 18:23:12 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Move code from truncate_title() to reworked truncate_label().  

Wed Dec  8 17:27:56 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	get_image_text() was renamed get_image_filename_from_src(). Comments
	were added.  

Sun Dec  5 22:19:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	In truncate_title, swap an if statement's then and else blocks to
	put the shorter one first.  

Sun Dec  5 22:15:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Use memcpy and direct assignments instead of sprintf in
	truncate_string.  

Sun Dec  5 21:59:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Use a goto in truncate_title to reduce indentation.  

Sun Dec  5 21:54:20 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Drop the truncation code from get_image_text and let html_img
	truncate it using truncate_title as it does for an image's alt and
	title text.  

Sun Dec  5 21:48:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Finish last change.  

Sun Dec  5 21:43:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Drop local variable max_real_len from get_image_text.  

Sun Dec  5 21:41:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Move a TODO comment from get_image_text to truncate_title.  

Fri Dec  3 22:51:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	query_file(): Order input_field() to check_nonempty() improving the
	IQ of the resulting error message. On the other hand maybe empty
	input should just close the dialog.  

Fri Dec  3 17:12:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c, AUTHORS:

	This is a patch to link.c that will shorten the alt or title
	attribute of an image just as the filename is already done.  
	
	Patch by Russ Rowan <rrowan@dandy.net>.  Added to AUTHORS.  

Fri Dec  3 10:26:12 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Be stricter in print_delete_error(), let it produce an internal
	error if @err is not a valid error code.  

Fri Dec  3 10:06:56 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Use EVENT_PROCESSED where it is appropriated.  

Thu Dec  2 16:34:01 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bookmarks/bookmarks.c, cookies/cookies.c,
	dialogs/exmode.c, dialogs/menu.c, dialogs/options.c,
	formhist/formhist.c, globhist/globhist.c, lowlevel/timer.c,
	protocol/file/file.c, sched/action.c, sched/download.c,
	scripting/lua/core.c, viewer/text/form.c, viewer/text/link.c:

	Be more coherent, use get_cmd_opt_bool("anonymous") everywhere
	instead of mixed get_cmd_opt_bool()/get_cmd_opt_int(). This option
	has the boolean type, though since bool==int from get_cmd_opt_*()
	POV, this is just a cosmetic change.  

Wed Dec  1 17:54:22 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated: typo fix and cleanup.  

Wed Dec  1 17:52:12 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec  1 03:37:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Indicate in the options manager and the option info box whether an
	option has been modified since the configuration was last saved.  
	
	Inspired by bug 357: Show default values for selected option in Info 
	dialog from Options manager.  

Tue Nov 30 17:47:11 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inpfield.h:

	Fix bug related to input field label display, introduced by me few
	days ago, spotted by Miciah. Drop @float_label field in favor of a
	more general @flags field, using new enum inpfield_flags.
	add_dlg_field_float2() was added. add_dlg_field_do() was cleaned up
	(and indentation was fixed as well).  

Tue Nov 30 06:30:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	menu_search_handler: Rather than setting |menu->selected| directly, 
	use scroll_menu, which properly updates |menu->first|.  Now the menu
	is scrolled and redrawn properly to show the matched item.  

Tue Nov 30 06:15:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	menu_search_handler: Begin searching with the selected item, unless 
	the user pressed previous-item or next-item. Now, as long as the
	pattern matches the selected item, it will not jump between items as
	the user enters the pattern.  

Mon Nov 29 17:31:06 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Typo fix in comment.  

Sat Nov 27 17:53:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/protocol/Makefile.am,
	src/protocol/auth/Makefile.am, src/protocol/auth/digest.c,
	src/protocol/http/http.c, src/util/Makefile.am, src/util/md5.c,
	src/util/md5.h:

	Add built-in MD5 support. Can be tested with --enable-own-libc or
	when OpenSSL or GNUTLS support is disabled.  

Sat Nov 27 16:03:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	exit_prog(): Minor cleanup of the logics which means that you should
	never use exit_prog() when really quiting however Ctrl-C correctly
	uses really_quit_prog(). Use list_is_singleton(terminals) when
	checking whether to force a quit-dialog when downloads are still in
	progress.  

Sat Nov 27 01:27:19 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Nov 27 01:12:18 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Slightly improve config file look when rewritten.  

Fri Nov 26 17:27:00 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser/forms.c:

	Back to previous version. Links numbering should be correct now.  

Fri Nov 26 17:23:45 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/renderer.c:

	Partial revert hidden links change.  

Fri Nov 26 17:16:20 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Fri Nov 26 10:28:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/lists.h:

	Oops. Fix the assert message from last patch. A little reformatting
	on the side.  

Fri Nov 26 10:26:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, util/lists.h:

	Introduce list_is_singleton() macro with Miciah as the inspirational
	source.  

Thu Nov 25 23:53:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/options.inc, dialogs/menu.c:

	Use add_shell_quoted_to_string instead of add_shell_safe_to_string 
	in format_command so that URIs passed to external commands will be 
	escaped against shell misinterpretation rather than correct browser 
	interpretation. Add a warning to document.uri_passing._template_ not
	to escape the URI there.  

Thu Nov 25 23:50:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: osdep/osdep.c, util/conv.c, util/conv.h:

	Add |len| parameter to add_shell_quoted_to_string.  

Thu Nov 25 23:24:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: osdep/osdep.c, util/conv.c, util/conv.h:

	Factor add_shell_quoted_to_string out from the code for GNU Screen's 
	clipboard in the generic set_clipboard_text.
	add_shell_quoted_to_string adds ', the given source string with all
	occurrences of ' changed to '\'', and another ' to the given
	destination string.  

Thu Nov 25 22:19:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	In the switch in do_action, put back the default: label removed in
	1.126.  Even tho there are cases for all values of enum main_action, 
	its callers might get -1 from kbd_action and pass that value, which
	is not enumerated by enum main_action, to do_action.  This fixes the
	bug that prevented alt-[fvltsh] from opening the menus.  

Thu Nov 25 18:01:39 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/ecmascript/spidermonkey.c:

	Fixed segfault on bugzilla site.  

Wed Nov 24 22:47:23 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov 24 22:16:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Fix a segfault triggered by resize terminal dialog: let accept NULL
	widget text.  

Wed Nov 24 18:21:39 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/: ecmascript.c, spidermonkey.c:

	An option called ecmascript.max_exec_time was added to control the
	maximum time a script may be run (5 seconds by default). Ecmascript
	options stuff was simplified.  

Wed Nov 24 17:42:01 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Fix compilation issues: JSVAL_TO_VALUE_START should follow variable
	declaration block.  

Wed Nov 24 17:10:33 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/ecmascript/spidermonkey.c:

	Now should be compilable.  

Wed Nov 24 09:03:58 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Disable parts recently added by witekfl, they break compilation. #if
	1 -> #ifdef WITEKFL. Please witekfl, fix these asap ;).  

Tue Nov 23 17:12:56 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/html/parser/forms.c, document/renderer.c,
	document/html/renderer.c, document/html/renderer.h,
	ecmascript/spidermonkey.c, viewer/text/form.c, viewer/text/form.h:

	Don't beat me. Links navigation is broken because of hidden links, 
	which are internally "visible" now. They should be skiped somehow in
	navigation (not done yet). Hidden form is used by eg.
	https://www.mbank.com.pl/. My long term goal is make this site work
	with ELinks.  

Tue Nov 23 13:08:29 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bfu/widget.h, bookmarks/dialogs.c:

	box -> listbox.  

Mon Nov 22 17:07:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Introduce md5_bin_digest buffer typedef.  

Mon Nov 22 17:04:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Fix descriptions from last patch. Rename convert_hex() ->
	convert_to_md5_hex_digest(). I like upcased hex numbers.  

Mon Nov 22 16:52:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	init_random_cnonce() -> init_cnonce_digest(), digest_calc_response()
	-> init_response_digest() and add function descriptions + lots of
	FIXMEs.  

Mon Nov 22 13:27:41 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/listmenu.c, bfu/listmenu.h, bfu/menu.h,
	dialogs/info.c, dialogs/info.h, dialogs/menu.c, dialogs/menu.h,
	dialogs/options.c, dialogs/options.h, document/html/parser.c,
	mime/dialogs.c, sched/task.c, sched/task.h, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c, viewer/text/link.h,
	viewer/text/textarea.c, viewer/text/textarea.h:

	Drop type casting to menu_func, use correct prototype for functions
	which are called by menus (menu_func).  

Mon Nov 22 11:31:09 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, hierbox.c, inpfield.c, widget.h:

	Trim trailing whitespaces.  

Mon Nov 22 11:29:09 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Drop inline keyword since performance is not an issue here.  

Mon Nov 22 07:28:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/hierbox.c, bfu/inpfield.c, bfu/listbox.c, bfu/widget.c,
	bfu/widget.h, bookmarks/dialogs.c:

	Now longer use the |dlg_data->focus_selected_widget| flag to
	indicate to the widget-specific drawing code whether the widget is
	focused. Instead, check within the individual drawing routines 
	whether the widget being drawn is focused.  
	
	struct dialog_data: Drop the boolean focus_selected_widget.  
	
	display_widget_focused, display_widget_unfocused: Drop.  
	
	display_widget: Expose.  
	
	select_widget, cycle_widget_focus: Set
	|dlg_data->selected_widget_id| _before_ calling display_widget on
	the previously selected widget.  
	
	display_button, display_checkbox, display_field_do: Use
	|is_selected_widget(dlg_data, widget_data)| instead of checking
	|dlg_data->focus_selected_widget|.  
	
	Everywhere: Use display_widget instead of display_widget_focused and
	display_widget_unfocused.  

Mon Nov 22 06:28:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Fix some compilation errors that came with the change from void * to
	t_widget_handler * for the callback provided to add_dlg_button_do.  

Sun Nov 21 17:15:50 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	text.c, widget.h:

	Add a clear handler for widgets and make clear_dialog() more
	generic.  

Sun Nov 21 16:54:30 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/inpfield.c,
	bfu/widget.h, viewer/text/search.c:

	Struct widget @data and @udata fields were merged. @datalen usage
	was clarified a bit.  

Sun Nov 21 14:53:30 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/hierbox.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, dialogs/edit.c, dialogs/options.c,
	mime/dialogs.c, protocol/auth/dialogs.c, scripting/lua/core.c,
	viewer/text/search.c:

	Reorder parameters of add_dlg*button*() to match syntax of other
	kind of widgets.  

Sun Nov 21 14:17:14 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Use correct type for @done.  

Sun Nov 21 14:14:27 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	Use t_widget_handler * instead of void * for @handler.  

Sun Nov 21 14:07:00 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	@key -> @flags.  

Sun Nov 21 14:03:25 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/msgbox.c,
	bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	dialogs/options.c, globhist/dialogs.c, mime/dialogs.c,
	protocol/auth/dialogs.c:

	BUTTON_DONE_FUNC() macro was dropped in favor of t_done_handler
	typdef. Functions declarations were fixed to match correct
	prototype.  

Sun Nov 21 13:35:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	@fn -> @done.  

Sun Nov 21 13:33:17 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/dialog.c, bfu/inpfield.c, bfu/widget.h,
	dialogs/options.c:

	Field @fn of struct widget was renamed @handler.  

Sun Nov 21 13:23:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: common.h, hierbox.h, inpfield.c, inpfield.h, widget.h:

	t_widget_handler -> t_widget_handler *. Suggested by Miciah.  

Sun Nov 21 05:20:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Avoid an infinite loop when a page redirects to itself, as the
	search form on www.bestbuy.com will.  

Sat Nov 20 11:32:57 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: common.h, hierbox.h, inpfield.c, inpfield.h, widget.h:

	Drop WIDGET_HANDLER_FUNC() macro, and introduce new type
	t_widget_handler.  

Sat Nov 20 04:29:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: auth.c, auth.h:

	Make find_auth_entry() once again static.  

Sat Nov 20 03:52:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp/ftp.c:

	I never did quite understand why find_auth() was not good enough for
	FTP authentication. It checks for blocked entries and the user/pass
	checking is only to validate that they were not updated through the
	goto dialog. So use find_auth() for FTP.  

Sat Nov 20 02:50:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Wrap digest code in CONFIG_SSL_DIGEST #ifdef.  

Sat Nov 20 02:08:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Move WWW-Authenticate HTTP header field checking to
	check_http_authentication().  

Sat Nov 20 01:32:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Introduce init_uri_method_digest() for calculating that H(A2).  

Sat Nov 20 01:27:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	digest_calc_ha1() -> init_credential_digest().  

Sat Nov 20 00:46:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	random_cnonce() -> init_random_cnonce().  

Sat Nov 20 00:44:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Use stack allocated buffers through typedef'ed md5_hex_digest.  

Sat Nov 20 00:33:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Make all the hex'ed digest lengths explicit.  

Sat Nov 20 00:26:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Only make digest_calc_response() worry about ha1 calculation.  

Sat Nov 20 00:09:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	digest_calc_ha1(): Drop unused cnonce arg.  

Fri Nov 19 23:46:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: digest.c, digest.h:

	Make auth digest helpers static.  

Fri Nov 19 23:45:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/digest.c, auth/digest.h, http/http.c:

	Oops misread the RFC
	s/get_http_auth_digest_challenge/get_http_auth_digest_response/.  

Fri Nov 19 23:40:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/digest.c, auth/digest.h, http/http.c:

	Move HTTP auth digest challenge computation and string construction
	to new get_http_auth_digest_challenge().  

Fri Nov 19 19:05:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/checkbox.h:

	Fix cut and paste error introduced in (1.34 -> 1.35) 'Move specific
	info to widgets headers, ...' 

Fri Nov 19 18:59:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Fix potentially confusing comment.  

Fri Nov 19 17:46:04 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/checkbox.h,
	bfu/common.h, bfu/group.c, bfu/hierbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/leds.c, bfu/listbox.c, bfu/listbox.h,
	bfu/menu.c, bfu/msgbox.c, bfu/msgbox.h, bfu/style.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, document/css/apply.c,
	document/css/property.h, document/html/parser.h, util/Makefile.am,
	util/align.h:

	Move enum format_align to new util/align.h since it is not bfu
	specific. Drop most bfu/style.h inclusions.  

Fri Nov 19 17:19:05 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/inphist.c, bfu/inphist.h, bfu/widget.c,
	bfu/widget.h:

	Move dlg_set_history() to inphist.{c,h}.  

Fri Nov 19 17:14:56 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.h, dialog.h, inpfield.h, text.h, widget.h:

	Move macros from widget.h to related header files.  

Fri Nov 19 17:08:47 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Off course Proxy-Authenticate. Spotted by Jonas.  

Fri Nov 19 17:07:18 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.h, checkbox.h, inpfield.h, listbox.h, text.h,
	widget.h:

	Move specific info to widgets headers, and simplify widget.h.  

Fri Nov 19 16:54:21 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/widget.h, dialogs/status.c, modules/module.c,
	sched/session.c, sched/session.h:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:42:35 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, bookmarks/backend/common.c,
	bookmarks/backend/default.c, bookmarks/backend/xbel.c,
	cache/cache.c, config/kbdbind.c, config/options.c,
	config/opttypes.c, config/urlhist.c, cookies/cookies.c,
	dialogs/status.c, globhist/globhist.c, protocol/nntp/codes.c:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:33:01 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/widget.h, dialogs/exmode.c:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:29:23 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:27:52 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Do not include twice the same header.  

Fri Nov 19 16:26:11 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/widget.h, dialogs/edit.c, dialogs/options.c,
	formhist/dialogs.c, globhist/dialogs.c, mime/dialogs.c,
	protocol/auth/dialogs.c, scripting/lua/core.c:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:22:19 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/widget.h, bookmarks/dialogs.c, cache/dialogs.c,
	config/dialogs.c, cookies/dialogs.c, dialogs/download.c:

	Reduce number of inclusions, just include bfu/dialog.h.  

Fri Nov 19 16:16:26 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/widget.h, dialogs/document.c, dialogs/info.c,
	dialogs/menu.c, ecmascript/spidermonkey.c, formhist/formhist.c,
	protocol/protocol.c, protocol/user.c, sched/download.c,
	sched/session.c, sched/task.c, terminal/tab.c, viewer/text/draw.c,
	viewer/text/form.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Fix header files inclusions.  

Fri Nov 19 16:08:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	#include missing headers revealed by widget cleanup.  

Fri Nov 19 16:08:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: msgbox.h, widget.h:

	Create dynamic widget #include area. The message box interface rely
	on the button flags (B_*) so #include the widget header.  

Fri Nov 19 15:53:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, dialogs.c, dialogs.h:

	Move accept_cookie_dialog() and cookie_queries list_head to dialogs
	file.  

Fri Nov 19 15:45:46 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: listbox.c, listbox.h:

	Fix get_listbox_widget_data() compilation issue.  

Fri Nov 19 15:40:20 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: common.h, hierbox.h, inpfield.h, listbox.h, msgbox.h,
	widget.h:

	Drop more #include.  

Fri Nov 19 15:39:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	These dialog/widget #includes looks like relics from the
	pre-input_line implementation.  

Fri Nov 19 15:33:07 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: Makefile.am, button.h, checkbox.h, common.h, hierbox.h,
	inpfield.h, listbox.h, text.h, widget.h:

	Create new header common.h and drop some #include <bfu/widget.h>
	from header files.  

Fri Nov 19 12:17:10 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: main.c, protocol/http/http.c, protocol/http/http.h:

	Experimental proxy digest authorization. Not tested at all. Note
	that wrong credentials leads to infinite loop.  

Fri Nov 19 11:12:53 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	Make add_dlg_text() a function.  

Fri Nov 19 11:07:53 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Drop now useless ().  

Fri Nov 19 11:06:40 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: listbox.c, listbox.h:

	Make add_dlg_listbox() a function.  

Fri Nov 19 11:01:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inpfield.h, widget.h:

	Make add_dlg_field_do() a function with the help of
	WIDGET_HANDLER_FUNC() new macro.  

Fri Nov 19 10:48:04 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, checkbox.h:

	Move code from macro add_dlg_radio() to new function
	add_dlg_radio_do().  

Fri Nov 19 10:30:50 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	Make add_dlg_button_do() a function.  

Fri Nov 19 10:04:45 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/dialog.c, bfu/dialog.h,
	bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c, bfu/text.h,
	bfu/widget.h, config/dialogs.c, cookies/dialogs.c, dialogs/edit.c,
	protocol/auth/dialogs.c, scripting/lua/core.c:

	Rename |widgets_size| of struct dialog to |number_of_widgets|. Make
	it appear only in bfu/ with the help of some new macros.  

Fri Nov 19 09:39:25 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h, bfu/group.c,
	dialogs/download.c:

	Rename |n| field of struct dialog_data to explicit
	|number_of_widgets|. More foreach_widget() usage.  

Fri Nov 19 09:28:40 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, dialog.h:

	Introduce foreach_widget() and few helpers macros. Use them for
	widget_data iterations.  

Fri Nov 19 05:07:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/connection.c:

	Update a TODO comment to reflect the renaming of uncompress_shutdown 
	to decompress_shutdown.  

Thu Nov 18 23:52:20 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Let display_checkbox() return EVENT_PROCESSED on allocation error.
	Spotted by Miciah.  

Thu Nov 18 22:25:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/snprintf.c:

	Our official native English speaker forgot to use the subjunctive
	mood.  Any intelligent native English speakers care to check this? 

Thu Nov 18 21:39:33 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/inpfield.c, bfu/widget.h, protocol/auth/dialogs.c:

	Struct dialog_data "selected" field was renamed
	"selected_widget_id".  Code related to it was moved to dialog.{c,h]
	only with the help of new select_widget(), select_widget_by_id(),
	update_all_widgets().  Code redundancy was reduced.  

Thu Nov 18 17:59:32 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/stub.h:

	Included ctype.h in stub.h.  

Thu Nov 18 17:58:26 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Thu Nov 18 17:30:49 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/auth.c:

	Use mem_free_set() for leak fix.  

Thu Nov 18 17:23:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/auth/auth.c:

	Possible(?) memleak avoided.  

Thu Nov 18 09:06:41 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 18 08:15:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, config/options.inc:

	Make it possible to also underline button shortcuts. Along with zas'
	button shortcut coloring this should pretty much fix bug 329.  

Thu Nov 18 00:52:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, dialog.h, hierbox.c, inpfield.c, listbox.c,
	text.c, widget.h:

	Use new term_event of struct dlg_data, and drop last parameter of
	widget kbd() functions.  

Thu Nov 18 00:31:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	text.c, widget.h:

	Use new term_event of struct dlg_data, and drop last parameter of
	widget mouse() functions.  

Thu Nov 18 00:23:48 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, dialog.c, dialog.h, inpfield.c, listbox.c,
	widget.h:

	Make struct term_event * a new field of struct dlg_data, and do not
	pass it anymore to all widget init() functions.  

Thu Nov 18 00:11:41 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/hierbox.c, bfu/inpfield.c, bfu/listbox.c, bfu/text.c,
	bfu/widget.c, bfu/widget.h, bookmarks/dialogs.c:

	Explode display_dlg_item() to new display_widget_focused() and
	display_widget_unfocused(), dropping last parameter in favor of a
	new struct dlg_data field named focus_selected_widget.  

Wed Nov 17 23:05:18 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Revert chunk of last patch that was wrongly committed. Sorry.  

Wed Nov 17 23:02:07 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/inpfield.c, config/options.inc:

	Show button shortcut (first letter of label) using specific colors
	configurable through dialog.button-shortcut-selected,
	dialog.button-shortcut color options.  

Wed Nov 17 22:16:56 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	display_field_do() now return t_handler_event_status.  

Wed Nov 17 22:13:43 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, inpfield.c, listbox.c, text.c,
	widget.c, widget.h:

	struct widget_ops display: struct widget_data *, struct dialog_data
	* -> struct dialog_data *, struct widget_data *.  

Wed Nov 17 22:07:16 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, dialog.c, inpfield.c, listbox.c, widget.h:

	struct widget_ops init: struct widget_data *, struct dialog_data *
	-> struct dialog_data *, struct widget_data *.  

Wed Nov 17 22:03:48 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	text.c, widget.h:

	struct widget_ops mouse: struct widget_data *, struct dialog_data *
	-> struct dialog_data *, struct widget_data *.  

Wed Nov 17 21:59:46 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, hierbox.c, inpfield.c, listbox.c, text.c,
	widget.h:

	struct widget_ops kbd: struct widget_data *, struct dialog_data * ->
	struct dialog_data *, struct widget_data *.  

Wed Nov 17 21:53:52 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, widget.h:

	Invert parameters position for select in struct widget_ops, goal is
	to uniformize order of params in most functions ->
	dlg_data,widget_data instead of widget_data,dlg_data.  

Wed Nov 17 21:09:04 2004  Laurent Monin <zas@norz.org>:

	* src/: protocol/auth/dialogs.c, protocol/auth/digest.c,
	sched/session.c, viewer/text/search.c:

	Trim trailing whitespaces.  

Wed Nov 17 21:04:55 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Revert witekfl patch: string.h must be included before elinks.h
	(isdigit issue), it breaks linking.  

Wed Nov 17 19:12:02 2004  Laurent Monin <zas@norz.org>:

	* src/: cookies/dialogs.c, dialogs/download.c, dialogs/edit.c,
	dialogs/options.c, formhist/dialogs.c, globhist/dialogs.c,
	viewer/text/search.c:

	Use t_handler_event_status.  

Wed Nov 17 19:09:36 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Attempt to handle multiple WWW-Authenticate header field. For
	example Outlook Web interface use it.  

Wed Nov 17 19:08:55 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/hierbox.c,
	bfu/hierbox.h, bfu/inpfield.c, bfu/inpfield.h, bfu/listbox.c,
	bfu/text.c, bookmarks/dialogs.c, config/dialogs.c:

	Use t_handler_event_status.  

Wed Nov 17 19:07:28 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.h, widget.h:

	Introduce t_handler_event_status type and change handlers to return
	it (EVENT_PROCESSED/EVENT_NOT_PROCESSED.  

Wed Nov 17 19:05:28 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/text/view.c:

	string.h must be included before elinks.h (isdigit issue).  

Wed Nov 17 19:04:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/stub.c:

	Missing includes.  

Wed Nov 17 01:24:55 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	dialog_ev_kbd(): call kbd_action() after ops->kbd test.  

Wed Nov 17 01:23:01 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Optimize select_button_by_key() loop by calling
	toupper(get_kbd_key(ev)) once outside the loop.  

Wed Nov 17 01:20:39 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Use temporary variables to shorten lines.  

Wed Nov 17 01:17:25 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Convert action related code from dialog_ev_kbd() to switch().  

Wed Nov 17 01:12:04 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Move code from dialog_ev_kbd() to new select_button_by_key().  

Wed Nov 17 01:07:17 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Reduce code redundancy by introducing select_button_by_flag().  

Wed Nov 17 01:04:04 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Use temporary variable to shorten lines.  

Wed Nov 17 01:01:59 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Split code per action.  

Wed Nov 17 00:58:00 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Check for first letter in button text after checking for action.  

Wed Nov 17 00:54:12 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Check for first letter in button text after checking for action.  

Tue Nov 16 10:32:25 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Drop useless tests in search loop (search_title, search_url are
	non-NULL at this point), add some comments.  

Mon Nov 15 15:08:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/dialogs.c:

	It's always good to leave a little scenting comment close to strange
	looking hacks.  

Mon Nov 15 03:36:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/snprintf.c:

	Answer zas' question why we cannot use mem_alloc in
	elinks_vasprintf.  The answer: elinks_vasprintf is an alternative to
	vasprintf, which will use malloc. If we changed elinks_vasprintf to
	use mem_alloc, all calls to vasprintf would need to take into
	account whether the ELinks vasprintf was used, in which case we
	would need to mem_free the allocated memory, or whether the system
	vasprintf was used, in which case we would need to use free.  

Mon Nov 15 02:20:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: auth.c, dialogs.c:

	Readd auth entries if the user/password in the URI changes. That is
	punching a URI into the goto dialog with different user/password the
	auth entry will be updated. This also means that auth_ok() needs to
	fakely redirect to a URI with no user/password in order to avoid the
	auth dialog to keep popping up if the user/password is wrong.  

Mon Nov 15 00:58:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/dialogs.c:

	When the auth entry is derived from URIs user/password there may not
	be any realm. Make the auth dialog check that before accessing the
	realm.  

Mon Nov 15 00:57:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Don't compare user and password from URIs when finding auth entries.
	It makes HTTP Basic auth work with user/password specified in the
	URI.  

Mon Nov 15 00:54:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix comma spacing.  

Sun Nov 14 22:54:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	sched/session.c (1.579 -> 1.580) broke reloading completely, so
	revert it.  

Sun Nov 14 22:54:41 2004  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	hx() now returns lowercased letters, Hx() was added, and unhx() now
	first test for lowercased letters. It fixes issue with
	convert_hex(), and should not break anything else.  

Sun Nov 14 22:39:49 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/digest.c:

	Optimize convert_hex() and use hx() from conv.h. Please check that
	digest upper/lower case change has no impact.  

Sun Nov 14 22:19:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	digest_calc_response(): Use uri->datalen instead of
	strlen(uri->data) which is wrong when posting.  

Sun Nov 14 22:17:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	random_cnonce(): Don't care about MD5()'s return value.  

Sun Nov 14 21:53:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/features.m4:

	Log CONFDIR, LOCALEDIR, CFLAGS and LIBS to features.log 

Sun Nov 14 21:32:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/protocol/Makefile.am,
	src/protocol/auth/Makefile.am, src/protocol/http/http.c:

	Check that the GNU TLS OpenSSL compatibility library is available
	before engaging in adding HTTP Digest support. There is no
	libgnutls-openssl configuration helper. Also define
	CONFIG_SSL_DIGEST variable that will be useful when we add our own
	(optional) MD5 implementation.  

Sun Nov 14 21:26:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make EL_CHECK_OPTIONAL_LIBRARY() macro more generally useful by
	moving command line argument declaration to new wrapper
	EL_CONFIG_OPTIONAL_LIBRARY().  

Sun Nov 14 19:57:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	Define MD5_DIGEST_LENGTH if it is not. GNU TLS doesn't.  

Sun Nov 14 19:46:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Revert part of a logic change involving the checking of HTTP Digest.  

Sun Nov 14 19:42:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.h:

	Describe the boolean members of struct auth_entry.  

Sun Nov 14 19:16:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	convert_hex(): Take a unsigned char buffer with length
	MD5_DIGEST_LENGTH + 1.  

Sun Nov 14 18:57:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.h:

	Only the user, password and host part is supposed to be used in this
	URI. It is mainly a convenient way to store host info so later when
	finding auth entries it can be compared as a reference against the
	current URI that needs to send authorization.  

Sun Nov 14 18:51:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/digest.c, auth/digest.h, http/http.c:

	digest_calc_response(): Take the response URI as an argument. Now
	redirecting and navigation works.  

Sun Nov 14 18:48:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	random_cnonce(): Make it use MD5() so convert_hex() only works on
	buffers with length MD5_DIGEST_LENGTH.  

Sun Nov 14 18:46:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.c:

	Reformat comment.  

Sun Nov 14 18:46:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Avoid URI mismatching in digest requests although redirects are not
	supported.  

Sun Nov 14 18:00:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	When reloading use loading_callback and set up a session task so
	that the reloading will work even when the reloaded document
	contains redirects. This is needed atleast when reloading HTTP auth
	document after the user has entered credentials.  
	
	Is there any issues with this? Maybe ses_goto() could be used.  

Sun Nov 14 16:52:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix HTTP auth digest compilation when CONFIG_SSL is disabled.  

Sun Nov 14 15:59:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/digest.c:

	s/17/MD5_DIGEST_LENGTH + 1/.  

Sun Nov 14 15:49:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, auth/dialogs.c,
	auth/digest.c, auth/digest.h, ftp/ftp.c, http/http.c:

	s/http_auth_basic/auth_entry/ now that HTTP digest and FTP uses it
	too.  

Sun Nov 14 15:43:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: auth.h, digest.c:

	Standardize auth/digest.c header. Only .c files is supposed to
	include elinks.h and if they do it before elinks .h files no .h file
	needs to include elinks.h 

Sun Nov 14 15:39:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/http.c:

	Add closure to the move of the HTTP basic auth string to the HTTP
	protocol. This was what I meant. It fixes also an uncheck return
	value.  

Sun Nov 14 15:37:22 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/auth/auth.h:

	Fixed includes.  

Sun Nov 14 15:27:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: Makefile.am, auth/Makefile.am, auth/digest.c:

	Only compile and add auth/digest.o when CONFIG_SSL is enabled.  

Sun Nov 14 15:20:28 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/Makefile.am:

	Link with digest.o only when SSL is enabled. Not tested.  

Sun Nov 14 15:18:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/auth/digest.c:

	Ansi C fixes.  

Sun Nov 14 15:16:19 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	- Include digest.h only with SSL enabled 

Sun Nov 14 14:28:20 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/auth/: auth.c, auth.h:

	Sorry, forgot about those.  

Sun Nov 14 14:21:58 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Digest auth works for first time for my public_html, but the rest
	needs more work.  

Sun Nov 14 14:17:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/: Makefile.am, auth/Makefile.am, auth/digest.c,
	auth/digest.h:

	Digest auth part IV.  

Sun Nov 14 13:43:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Reduce indentation of the digest extraction code.  

Sun Nov 14 11:40:34 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Unify kbdprefix.repeat_count stuff and loops, later it will help.
	Take in account the return value of move_(up|down)() in the loop.  

Sun Nov 14 11:25:22 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	move_(up|down)() now return enum frame_event_status.  

Sun Nov 14 11:21:48 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Digest part III.  

Sun Nov 14 11:10:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Use a decimal-compatible prefix count limit: 99999.  

Sun Nov 14 11:02:16 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/: auth/auth.c, auth/auth.h, ftp/ftp.c, http/http.c:

	More preparation for digest auth.  

Sun Nov 14 10:32:55 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/auth/: auth.c, auth.h:

	Preparation for digest authentication.  

Sun Nov 14 10:24:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Nov 14 09:11:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Nov 14 03:23:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/info.c, document/document.c:

	Report number of refreshing documents by using
	formatted_info(INFO_TIMERS).  

Sun Nov 14 03:14:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Resource dialog: 'Document cache: %d formatted, %d locked' is
	shorter and hopefully more precise.  

Sun Nov 14 03:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Climb mount bloat and plant a oneliner in the resource dialog
	informing about terminal status, interlinked terminals and number of
	sessions.  

Sun Nov 14 02:53:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Resource info dialog: Make the allocated memory info a one liner and
	show the truly allocated values as 'overhead' in bytes and
	percentage.  

Sun Nov 14 02:43:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	s/get_ressource_info/get_resource_info/.  

Sun Nov 14 02:42:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	get_ressource_info(): Tidy up.  

Sun Nov 14 02:41:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Resource info dialog: The 'Cache size' can be derived from the
	'Memory cache' lines first entry so ditch it.  

Sun Nov 14 01:14:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: info.c, menu.c:

	Merge the Resource and Memory info dialogs. Makes it easier to check
	what happends when testing on mangle.cgi. Plus I never really saw
	the point of having those two separated.  

Sun Nov 14 01:02:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	get_ressource_info(): Use string utils instead of msg_text().  

Sun Nov 14 00:15:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_action(): Update comments.  

Sun Nov 14 00:11:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_action(): Alphabetize action handling in the switch. Quit the
	default label.  

Sat Nov 13 21:51:35 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	When CONFIG_MARKS is undefined, do not set status to
	FRAME_EVENT_REFRESH, just use the default which is FRAME_EVENT_OK.  

Sat Nov 13 20:27:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_action(): Don't touch the @ses variable if the status is
	FRAME_EVENT_SESSION_DESTROYED. Maybe it was causing bug 563.  

Sat Nov 13 20:10:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Try to rewrite and complement a few sections.  

Sat Nov 13 13:33:50 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* configure.in:

	Check for isdigit.  

Sat Nov 13 13:31:54 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/: stub.c, stub.h:

	Own definition of isdigit.  

Sat Nov 13 13:09:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Safety boots required when entering do_action().  

Sat Nov 13 02:22:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Fix missing linebreak when ending a list efter an empty list item.  

Fri Nov 12 22:54:45 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	FRAME_EVENT_OK is the default, so drop useless assignment.  

Fri Nov 12 22:49:26 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	move_document_(start|end)() now return enum frame_event_status.  

Fri Nov 12 22:20:01 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	move_link() and move_link_(next|prev)() now return enum
	frame_event_status.  

Fri Nov 12 22:10:24 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	move_link_(dir|up|down|left|right) now return enum
	frame_event_status.  

Fri Nov 12 22:01:08 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	Reduce indentation level.  

Fri Nov 12 21:52:48 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	Simplify things a bit using variables @anonymous and @has_vs.  

Fri Nov 12 21:32:20 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix (horizontal|vertical)_scroll(), they must return
	FRAME_EVENT_REFRESH when doc_view->vs->(x|y) were modified. Spotted
	by Miciah.  

Fri Nov 12 17:33:19 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	move_page_(up|down)() now return enum frame_event_status.  

Fri Nov 12 17:28:39 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, view.h:

	move_(up|down)() were made static.  

Fri Nov 12 17:24:44 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	move_cursor(): reflect changes related to
	(horizontal|vertical)_scroll(). Please check carefully.  

Fri Nov 12 17:19:10 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Propagate (horizontal|vertical)_scroll_() changes.  

Fri Nov 12 17:15:29 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	(horizontal|vertical)_scroll_() now return enum frame_event_status.  

Fri Nov 12 17:11:36 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	scroll_*() now return enum frame_event_status. Related changes to
	do_action() were made.  

Fri Nov 12 17:03:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	scroll_mouse_*() now return an enum frame_event_status.
	frame_ev_mouse() was modified to reflect that.  

Fri Nov 12 16:48:30 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	frame_ev_mouse(): clear things a bit, behavior unchanged.  

Fri Nov 12 16:24:52 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	frame_ev_kbd(): just return FRAME_EVENT_IGNORED at the end.  

Fri Nov 12 16:16:22 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	frame_ev_kbd(): cache value of document.browse.accesskey.priority
	option.  

Fri Nov 12 16:10:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	move_link(): do not test twice for current_link == wraparound_bound.  

Fri Nov 12 16:07:35 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	move_link(): Get document.browse.links.wraparound option value only
	once and only if needed.  

Fri Nov 12 13:45:59 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Prevent an assertion failure in ecmascript_eval() (bug 558), may be
	incorrect. Pasky please check.  

Fri Nov 12 11:20:02 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	send_kbd_event(): attempt to make code clearer. @doc_view == NULL
	case looks like to not be handled in last part.  

Fri Nov 12 11:06:28 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	send_kbd_event(): let code breath a bit, @m -> @win.  

Fri Nov 12 10:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	stat_size(): Fix typo and improve the comment.  

Fri Nov 12 10:06:15 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Increase the size of input buffer to a more reasonable value.  

Fri Nov 12 09:49:04 2004  Laurent Monin <zas@norz.org>:

	* src/: cookies/cookies.c, globhist/globhist.c, util/ttime.h:

	Introduce str_to_ttime() wrapper instead of using atol() directly,
	since this one is surely non portable as Miciah told.  

Fri Nov 12 09:42:22 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	read_global_history(): cleanup and code simplification.  

Fri Nov 12 09:38:43 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Move @cookies_nosave setting outside the while() loop.  

Fri Nov 12 02:39:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	stat_size(): Tidyup the unsigned long cast. Try to explain the two
	ulongcat() calls that Miciah was pondering about.  

Fri Nov 12 02:26:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	stat_size(): Fix bad logic involving checking unsigned long
	overflow.  

Thu Nov 11 20:31:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	#undef is_unsplitable after it has fulfilled its purpose.  

Thu Nov 11 20:29:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In draw_menu_left_text_hk, transform |x < w + !!hk_state| to |x -
	!!hk_state < w| to better represent the abstract condition: the
	co-ordinate of the character to be printed must be less than the
	width of the available space, and if there was a hotkey marker, do
	not count it towards that co-ordinate.  

Thu Nov 11 20:20:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In draw_menu_left_text_hk, rename the local variable hk to hk_state 
	to better indicate its usage.  

Thu Nov 11 19:50:38 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 11 19:40:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	In kbd_field, after handling the copy-clipboard action, return
	EVENT_PROCESSED rather than EVENT_NOT_PROCESSED.  

Thu Nov 11 19:31:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Thu Nov 11 19:05:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/cookies.c:

	In del_from_cookie_list, drop the local variable tmp and instead
	operate directly on the passed pointer.  

Thu Nov 11 19:04:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/cookies.c:

	Halve the indirection to the cookie passed to del_from_cookie_list.  

Thu Nov 11 19:02:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/cookies.c:

	Substitute foreachsafe for foreach where the loop calls
	del_from_cookie_list.  

Thu Nov 11 18:59:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Drop an extra newline at the end of the same option description.  

Thu Nov 11 18:58:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Change the description of terminal._template_.colors not to
	erroneously indicate that the environment variable TERM must have a
	certain value for 256 color support and instead just to say that
	ELinks will use XTerm RGB codes.  

Thu Nov 11 00:07:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	How embarressing that these ancient encoding macros are still in
	use. Vive la CONFIG_*.  

Wed Nov 10 23:49:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add some probation code for detecting infinite loops in URI
	translation. Idea by lindi-, which apparently doesn't trust the
	current code much. ;) 

Wed Nov 10 23:16:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rearrange the code where the strange bug 559 fails.  

Wed Nov 10 22:41:39 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Introduce del_from_cookie_list() and reduce code redundancy.  

Wed Nov 10 22:19:42 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	accept_cookie(): @d -> @c, @e -> @tmp and make them more local.  

Wed Nov 10 22:17:36 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	accept_cookie(): @c -> @cookie.  

Wed Nov 10 22:10:04 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	send_cookies(): minor cleanup.  

Wed Nov 10 22:09:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Pop up 'Bad URL' error dialog if get_hooked_uri() returns NULL for
	non-remote sessions instead of bailing out. It was reproducable when
	passing URIs like http://?.  

Wed Nov 10 21:53:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Bail out if host is missing and slash after host is missing. Should
	fix bug 561 about infinite loop in translate_url().  

Wed Nov 10 21:31:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Decode the URI string used for titles.  

Wed Nov 10 21:30:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Decoded any document title derived from an URI string. Add check for
	allocation failure.  

Wed Nov 10 21:22:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/renderer.c, protocol/data.c,
	protocol/uri.c, protocol/uri.h, protocol/file/cgi.c,
	protocol/file/file.c, protocol/gopher/gopher.c, sched/download.c,
	viewer/text/link.c:

	Make decode_uri_string() take {struct string *} arg and introduce
	decode_uri() which just takes char pointer. Should make it a little
	easier to figure out.  

Wed Nov 10 21:20:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix typo in comment.  

Wed Nov 10 21:08:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: gopher/gopher.c, nntp/connection.c,
	nntp/response.c:

	Remove unneded system #includes.  

Wed Nov 10 20:06:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Improve handling of URI_ERRNO_NO_SLASHES to check how many slashes
	is missing.  

Wed Nov 10 20:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix off by one error in the URI sanitizers.  

Wed Nov 10 19:57:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Trim trailing '.'s in the host component of URIs.  

Wed Nov 10 19:24:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	is_domain_security_ok(): Test if @domain is a 'complete' substring
	of @server by comparing the lengths of the two strings. Eliminates
	one strncasecmp().  

Wed Nov 10 19:15:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	is_domain_security_ok(): Simplify the test of @domain being a
	substring of @server.  

Wed Nov 10 18:39:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	s/uncompress/decompress/ Even smaller first read in decompress_data.
	If this doesn't help code will need rewrite.  

Wed Nov 10 17:43:01 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Clarify is_in_domain().  

Wed Nov 10 17:26:27 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Rename check_domain_security() to is_domain_security_ok(). Idea by
	Lindi.  

Wed Nov 10 17:21:52 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Fix wrong returned value in check_domain_security().  

Wed Nov 10 17:20:01 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Fix wrong format string in cookies debugging code.  

Wed Nov 10 16:47:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/win32/win32.c:

	Minor space tidyup.  

Wed Nov 10 16:46:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/dialogs/menu.c, src/sched/download.c:

	URL decode filenames when saving. Patch by Omar Khayam
	<omark@cyentec.com>.  

Wed Nov 10 15:58:01 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Simplify cookie loading code, and fix debugging cookie code (causing
	segfault).  

Wed Nov 10 15:47:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp/ftp.c, sched/download.c:

	Remove silly |return;| statements at end of functions.  

Wed Nov 10 15:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	Let arithmic operators breathe.  

Wed Nov 10 12:25:18 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Use intermediate variable @path to shorten lines.  

Wed Nov 10 12:16:41 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	cookie->secure is 0 by default so no need to set again.  

Wed Nov 10 12:11:40 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Code related to cookie expiration was rewritten and simplified,
	preventing useless allocation when max_age is 0.  

Wed Nov 10 11:39:21 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Minor tidy up.  

Wed Nov 10 11:06:35 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, cookies/cookies.c, dialogs/options.c,
	protocol/data.c, protocol/http/http.c, protocol/http/http.h,
	protocol/smb/smb.c, sched/connection.c, util/conv.c:

	Whitespaces fixes.  

Tue Nov  9 14:42:42 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Reduce code redundancy by introducing move_cursor_rel().  

Tue Nov  9 13:59:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/nntp/response.c:

	Markup the shown NNTP headers with <b> instead of <i>.  

Tue Nov  9 13:56:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Align the search input-field with the rest of the gopher menu text.
	Shorten the searchable gopher index page.  

Tue Nov  9 12:21:38 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/header.c:

	Rewrite parse_header() to be more tolerant about header syntax,
	especially tab chars and separators. It should partially fix bug
	439. Please test heavily.  

Tue Nov  9 05:47:19 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Tue Nov  9 01:39:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Only encode slashes if there are two successive ones. It gets too
	ugly with %2F's in globhist.  

Tue Nov  9 01:02:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Add support for gopher index searching by introducing a little
	(HTTP) GET method extension. Now a text-input form-field is shown
	for gopher index menu entries and index pages.  

Tue Nov  9 00:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Fix off by one error in the query string calculation.  

Mon Nov  8 23:51:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Fix issue with handling links like
	gopher://gopher.floodgap.com/hURL:http://www.floodgap.com/ where the
	slashes in the selector apparently has to be encoded as well.  

Mon Nov  8 22:15:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	Update elinks(1) manpage with new names of options. Head-shakingly
	ignoring that alot of new options are not listed. ;) 

Mon Nov  8 22:11:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Don't declare hidden options as unknown. All of them are handled by
	the redir_cmd(). Fixes problem with -stdin mentioned in bug 557 so
	it now warns about it being deprecated.  

Mon Nov  8 21:55:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	Restart the document refreshing when rerendering.  

Mon Nov  8 20:16:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	I think this is a fix for incorrect generating of title. It does not
	cause crash, but excessive memory allocation. Part of mikulas batch
	of fixes in links-1.0pre12 for bugs discovered with mangleme
	<http://lcamtuf.coredump.cx/mangleme/mangle2.cgi>.  

Mon Nov  8 19:41:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/signals.c:

	Use pid_t for storing return value of getpid().  

Mon Nov  8 19:37:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/signals.c:

	Fixed bad error codes because of errno modified by signal handler.
	Patch by user in links-1.0pre9.  

Mon Nov  8 19:27:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listmenu.c, bfu/menu.c, bfu/style.c,
	document/html/renderer.c, document/sgml/scanner.c,
	mime/backend/common.c, mime/backend/mimetypes.c, modules/module.c,
	modules/module.h, osdep/newwin.c, protocol/uri.c:

	19:38 < Miciah> We have several foreach macros that follow a pattern
			of |for (...) if (...)| or |foreach (...) if (...)|.  
			That will not work so well when somebody does: 
			if (frink) foreach_foo (x, y) frob(x); else wooble; 
	
	... so I made this patch that puts {} to reduce ambiguity.  

Mon Nov  8 19:15:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Reset the ses->redirect_cnt in ses_goto() rather than in do_move() 
	and make it depend on the @redir variable. It apparently fixes a bug 
	triggered when clicking on broken links that after five times would 
	display the redirect itself.  
	
	Patch by user in links-1.0pre5.  

Mon Nov  8 17:04:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, util/file.c:

	Fix overflow when accessing local files >= 2G. Patch by user in
	links-1.0pre9.  

Mon Nov  8 16:47:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Allow '@' in the password URI-component. Patch by user in
	links-1.0pre5.  

Mon Nov  8 16:15:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/osdep/stub.c, src/osdep/stub.h:

	Add stub function for raise(). Inspired by Wojciech Puchar
	<wojtek@tensor.3miasto.net>'s 'Portability fixes for SunOS' in
	1.0pre11.  

Mon Nov  8 15:52:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Make sure the user is notified if initialization of the first
	session fails.  

Mon Nov  8 15:42:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, osdep/beos/beos.c, osdep/win32/win32.c,
	protocol/file/cgi.c, protocol/smb/smb.c:

	Use pid_t for storing return value of fork(). Inspired by Mikulas in
	1.0pre9.  

Mon Nov  8 15:36:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Introduce check_cwd() that will chdir(getenv("HOME")) if CWD cannot
	be stat()'ed. Inspired by Mikulas in 1.0pre9.  

Mon Nov  8 14:57:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Remove code for reporting 'URL expected after -{dump,source}' errors
	that was not working correctly after the introduction of URL list
	support. It was duplicated in src/main.c (1.223 -> 1.224).  

Mon Nov  8 14:24:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/encoding.c:

	It looks like the workaround for reading zero bytes to invalid
	address on Linux by adding one byte is not needed anymore. Inspired
	by Mikulas in the links-1.0pre9.  

Mon Nov  8 03:36:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	decode_color(): Another small sanity check for strtoul() return
	value. Inspired by Mikulas in the links-1.0 prereleases.  

Mon Nov  8 02:57:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	get_width(): Add sanity check for strtoul() return value. Inspired
	by Mikulas in the links-1.0 prereleases.  

Mon Nov  8 02:43:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/unix/unix.c:

	Add sanity check for GPM coordinate calculation. Inspired by Mikulas
	in the links-1.0 prereleases.  

Mon Nov  8 02:12:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Make it hopefully a little easier to see what is going one with the
	CR-LF concatenation.  

Mon Nov  8 01:57:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Report 'URL expected after -{dump,source}' error. Inspired by
	Mikulas in the links-1.0 prereleases.  

Mon Nov  8 01:38:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix wrong HTTP error code reporting when server returns 204. Patch
	by Mikulas; backported from links-1.0 prereleases.  

Mon Nov  8 01:28:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Tidyup from links-1.0 prereleases.  

Mon Nov  8 00:31:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/forms.c:

	html_select(): Fix leak when two <select multiple=elements> appears
	successively. (bug 552) 

Sun Nov  7 17:39:45 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Smaller first read. If you still get garbage make it smaller.  

Sun Nov  7 13:27:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Guard do_frame_action() calls with checks for doc_view->vs as it is
	asserted to be non-NULL.  

Sun Nov  7 09:25:50 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor code simplification.  

Sun Nov  7 00:23:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/Makefile.am:

	Add the spidermonkey patch to EXTRA_DIST.  

Sat Nov  6 13:48:13 2004  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Small/static ELinks compilation guide was updated a bit.  

Sat Nov  6 13:40:01 2004  Laurent Monin <zas@norz.org>:

	* src/osdep/unix/unix.c:

	Do not try to include gmp.h header file when --without-gpm is used.  

Fri Nov  5 23:02:28 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Minor code cleanup.  

Fri Nov  5 15:35:50 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	fastfind_new_cnode() was renamed compress_node(),
	fastfind_node_compress() was renamed compress_tree().  

Fri Nov  5 15:31:08 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Move code from fastfind_node_compress() to new fastfind_new_cnode(),
	and add number of compressed nodes to debug output.  

Fri Nov  5 06:00:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Factor common code in is_in_range_regex and get_searched_regex out
	to the new get_search_region_from_search_nodes, which copies the
	characters from a range of search nodes, adds new-line characters, 
	and returns the new string.  

Fri Nov  5 03:50:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Remove an obsolete TODO for reporting regex compilation errors.  

Fri Nov  5 03:32:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/protocol.c,
	protocol/smb/smb.c, protocol/smb/smb.h:

	Add SMB protocol module.  

Thu Nov  4 21:10:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h,
	protocol/file/cgi.c, protocol/finger/finger.c,
	protocol/gopher/gopher.c, protocol/http/http.c,
	protocol/nntp/connection.c, ssl/connect.c:

	Try to document read_buffer->close by introducing read_buffer_close
	enum.  

Thu Nov  4 17:17:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/navigator.h:

	Bump DOM_NAVIGATOR_MAX_DEPTH to 4096 making it highlight
	http://www.usdoj.gov/atr/cases/f1900/1914.htm more correctly.  

Thu Nov  4 17:14:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/navigator.c:

	push_dom_node(): Don't call done_dom_node(@node) when navigator
	depth is bigger than DOM_NAVIGATOR_MAX_DEPTH. It is the
	responsibility of the caller. Fixes crash on
	http://www.usdoj.gov/atr/cases/f1900/1914.htm caused by the current
	SGML parser naively expects closing tags.  

Thu Nov  4 14:22:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/navigator.c:

	Fix callback extractions and add assertion about the DOM node type.  
	
	It looks like http://www.usdoj.gov/atr/cases/f1900/1914.htm is
	creating corruption in the navigator.  

Thu Nov  4 13:44:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre3.CVS 

Thu Nov  4 13:17:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre3 

Thu Nov  4 13:15:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Sync .po files.  

Thu Nov  4 13:10:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Fix version.  

Thu Nov  4 13:07:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Fix elinks version extraction.  

Thu Nov  4 13:02:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Nov  4 12:50:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Alphabetize Makefile creation.  

Thu Nov  4 09:59:55 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/header.c:

	Add comments and documentation related to bug 549.  

Wed Nov  3 18:03:57 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Clarify things related to LF+NUL termination chars, and prevent a
	potential bug.  

Wed Nov  3 17:48:25 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Properly close sockets in case of init_string() failure, may be
	useless in that case but cleaner.  

Wed Nov  3 17:40:35 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Move code from end_smb_connection() to new parse_smbclient_output().  

Wed Nov  3 17:20:36 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Use intermediate variable of type struct uri * to shorten lines.  

Wed Nov  3 17:19:21 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Reduce indentation level, tidy up.  

Wed Nov  3 11:16:05 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	straconcat(): do not call memcpy() if there is nothing to copy.  

Wed Nov  3 11:12:02 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Optimize straconcat() a bit using memcpy() instead of strcat().  

Tue Nov  2 09:34:09 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Minor tidyup, reduce indentation level.  

Mon Nov  1 22:22:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, options.inc:

	A few gcc-4 compatibility fixes from Kalle Olavi Niemitalo
	<kon@iki.fi>.  

Sat Oct 30 02:21:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	When performing a type-ahead search on document text, do not rewind
	just because the search wrapped.  

Fri Oct 29 23:07:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix leak when ecmascript is disabled.  

Fri Oct 29 20:07:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix insert mode resetting when submitting text-input form-field.
	Introduced in 1.244 and spotted by Mr. Timo Lindfors.  

Thu Oct 28 16:20:27 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Simplify code by using new struct ff_data.  

Wed Oct 27 22:35:05 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser/parse.c, intl/charsets.c,
	util/color.c, util/fastfind.c, util/fastfind.h:

	Make FastFind more data-driven. Patch by Jonas and me.  

Wed Oct 27 20:18:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser/link.c:

	Remove unneeded #includes.  

Wed Oct 27 17:21:14 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Modify example to reflect recent changes in fastfind API.  

Wed Oct 27 17:17:45 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser/parse.c, intl/charsets.c,
	util/color.c, util/fastfind.c, util/fastfind.h:

	Use a flags parameter of new type enum fastfind_flags instead of two
	parameters of type integer for fastfind_index().  

Wed Oct 27 16:57:01 2004  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	Drop fastfind_index_compress(), and make fastfind_index() call
	fastfind_node_compress() directly.  

Wed Oct 27 16:52:51 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser/parse.c, intl/charsets.c,
	util/color.c, util/fastfind.c, util/fastfind.h:

	Add a @compress parameter to fastfind_index() and let it call
	fastfind_index_compress() before returning.  

Wed Oct 27 16:45:28 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Make fastfind_node_compress() static.  

Wed Oct 27 16:38:10 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Rename label |alloc_error| to |return_error| since we may go to it
	on errors which are not allocation errors.  

Wed Oct 27 15:11:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Add data the conventional way if rb->close == 2, so the HTML
	document ending is added but ensure that the connection is shutdown
	afterwards.  

Wed Oct 27 15:04:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Fix assertion failure when get_gopher_entity_description() returns
	NULL. Fix error response message hyperlinking.  

Tue Oct 26 21:36:38 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Fix comment.  

Tue Oct 26 21:32:35 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Optimize pointers/keylen_list allocation: alloc_pointers() does it
	in one step using info->count obtained by precedent loop, simplify
	add_to_pointers().  

Tue Oct 26 21:04:49 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Group debugging code.  

Tue Oct 26 20:52:26 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Move debug code from fastfind_search() to new FF_DBG_search_stats().  

Tue Oct 26 17:03:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Revert 1.77 and 1.78. It is reversing tab placement.  

Mon Oct 25 20:31:16 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Trivial cleanup: tab/space fixes, move iterator initialization to
	for(), move debug code from fastfind_done() to new
	FF_DBG_dump_stats().  

Mon Oct 25 20:08:45 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	fastfind_index(): minor cleanup, drop useless @j, move comment near
	ifcase().  

Mon Oct 25 19:41:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	How does it behave now? 

Mon Oct 25 19:14:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Keep tabs together in term->windows. Fixes problems with stuck
	dialogs when new tab was opened over them. Hoefpully.  

Mon Oct 25 19:10:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: event.c, window.c:

	Reverted my tab/window ordering hacks resulting in sometimes bad
	behaviour, as suggested by Jonas. I figured a wrong solution to my
	problem.  

Mon Oct 25 16:00:55 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Improve fastfind debug output a bit.  

Mon Oct 25 15:52:32 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Use memchr() in char2idx() and reduce code redundancy a bit.  

Mon Oct 25 12:56:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: ecmascript/spidermonkey.c, terminal/terminal.h:

	Define ENV_ANY value.  

Mon Oct 25 12:41:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/spidermonkey.c:

	window_open(): Simplify URI unreferencing and fix a bug.  

Mon Oct 25 10:29:55 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Minor optimization: move @size test before the loop.  

Mon Oct 25 10:20:35 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Drop useless parenthesis.  

Mon Oct 25 10:16:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Move code from new_cell() to new copy_table().  

Mon Oct 25 09:59:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Optimize copy of cells to new table in new_cell(): copy rows by rows
	instead of cells by cells, it speedups things a lot.  

Mon Oct 25 09:06:01 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Oct 23 12:49:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sat Oct 23 11:40:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/window.c:

	Add windows to the top of the stack, not at the near-bottom.  

Sat Oct 23 11:06:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: event.c, window.c:

	Properly handle having windows open inside of inactive tabs (that's
	the case for window.open() in conjuction with window.alert() or
	javascript errors).  

Sat Oct 23 10:04:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Whatever that JS_ClearPendingException() is good for... Moz has it.  

Sat Oct 23 09:53:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	FIXME about the real need to keep adjectent links as separate links
	now since we got event handlers.  

Sat Oct 23 09:53:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/forms.c:

	html_focusable() only the new element created for the form control;
	this makes the event handlers to work.  

Sat Oct 23 09:48:10 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/ontest.html:

	Some simple event hooks test.  

Sat Oct 23 08:04:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, document/css/css.c, sched/session.c:

	Try to break ELinks completely again by also checking for redirected
	scripts/CSSes properly.  

Sat Oct 23 07:54:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.h:

	Fix misleading send_cookies() description.  

Sat Oct 23 00:01:34 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Slightly reduce code redundancy, introducing free_cookies_list().  

Fri Oct 22 23:55:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Register the caller of init_string() when memory leak debugging is
	enabled. Makes it much easier to locate leaks.  

Fri Oct 22 23:53:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/spidermonkey.c:

	The cookie string is allocated so use JSPT_ASTRING as the property
	type.  

Fri Oct 22 20:15:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, document/html/parser/forms.c,
	viewer/text/form.c, viewer/text/form.h:

	Button (known as FC_BUTTON) is now a good member of the form
	controls community! We want it to live as a regular button now
	because there may be event hooks on it. (And I never really liked
	magic executed on it.) 

Fri Oct 22 18:49:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	s/exception/<appropriate_desc>/ for linebufless js errors too.  

Fri Oct 22 18:47:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	JS_ClearPendingException() at the tail of error reported. This
	might've helped with carrying over those exceptions, but it doesn't
	quite work yet, seemingly.  

Fri Oct 22 10:39:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Move code from parse_table_attributes() to new set_table_rules(),
	reducing indentation and clarifying code.  

Fri Oct 22 10:36:18 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Move code from parse_table_attributes() to new set_table_frame(),
	reducing indentation and clarifying code.  

Fri Oct 22 10:16:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Reduce indentation level.  

Fri Oct 22 09:56:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c, src/ecmascript/spidermonkey.c,
	src/protocol/http/README.timegm, NEWS:

	Remove trailing spaces.  

Fri Oct 22 07:59:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/stack.c:

	Introduce kill_element() and drop two gotos.  

Fri Oct 22 07:36:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Enhance error reporting to report what kind of thing it actually is,
	and SetOptions VAROBJFIX and COMPILE_N_GO, which should improve
	things and fix language-wise buggy behaviour. Sorry for combining
	those two trivial patches, I'm in hurry.  

Thu Oct 21 23:22:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	If allocating vs->ecmascript doesn't work out, set
	vs->ecmascript_fragile so that we try again the next time.  

Thu Oct 21 23:18:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	doc_view->vs->ecmascript is on-demand.  

Thu Oct 21 23:11:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	In delayed_goto(), deg->vs->doc_view might get NULL.  

Thu Oct 21 23:11:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Some semi-dirty document.cookie support.  

Thu Oct 21 21:18:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Prevent ECMAScript code execution when using -dump or -source.
	Magically fixes bug 538.  

Thu Oct 21 21:01:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	TODO: Provide info about script event hooks too.  

Thu Oct 21 20:54:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/document.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/parser/stack.c,
	viewer/text/link.c:

	Theoretical (not much tested and not always working) support for
	onClick, onDblClick, onMouseOver, onHover, onFocus, onMouseOut and
	onBlur ECMAScript events on focusable elements.  

Thu Oct 21 20:52:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Fix a virtually possible crash if a sub-frame referenced a top frame
	while the top frame had no ecmascript handle, since the ecmascript
	handles are now created on-demand.  

Thu Oct 21 20:50:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	window.<blahblah> now tries to resolve blahblah as frame id and
	returns the appropriate one's reference if found. Finally fixes
	http://www.cinema-ostertor.de/.  

Thu Oct 21 17:36:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	s/port_end == host_end/uri->portlen == 0/ is more clear.  

Thu Oct 21 17:03:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove ':' from URIs when no port number follows using
	URI_ERRNO_NO_PORT_COLON error value. Hmm maye we should consider
	loosing up the URI comparison on the other hand it is nice to have
	these trivial error show up.  

Wed Oct 20 17:55:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/: gettext.m4, iconv.m4:

	Append LIBICONV to LIBS instead of INTLLIBS. It was causing
	dependency problems when linking. Brougt up by Nelson H. F. Beebe
	<beebe@math.utah.edu>.  

Wed Oct 20 16:19:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config.guess, config.sub, config/config.guess, config/config.sub:

	Update with versions from cvs HEAD. Fixes configuration on even more
	platforms. Mentioned by Nelson H. F. Beebe <beebe@math.utah.edu>.  

Wed Oct 20 11:09:34 2004  Laurent Monin <zas@norz.org>:

	* src/: setup.h, document/html/parser/table.c:

	Limit max. memory used for table cells, and abort table parsing on
	cell allocation failure. It prevents eating of all memory in case
	where number of columns and/or rows is very high.
	HTML_MAX_CELLS_MEMORY is set to 32Mb by default.  

Wed Oct 20 08:16:35 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	Replace nul char if any by a space in html_option(), it prevents bad
	things. Revealed by remangle.cgi?0x14aa2da9.  

Wed Oct 20 01:27:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	In do_action, return FRAME_EVENT_REFRESH when handling 
	ACT_MAIN_MARK_GOTO or ACT_MAIN_MARK_SET so that the user will get
	those nice 'Enter a mark to set' and 'Enter a mark to which to jump"
	messages (see src/dialogs/status.c revision 1.80). Prior to revision 
	src/viewer/text/view.c revision 1.612, this refresh was handled by 
	send_to_frame, which calls frame_ev, which calls frame_kbd_ev, which
	had handled the aforementioned key actions.  

Tue Oct 19 23:38:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In tp_show_header, drop the code to open a new connection and just
	use |type_query->cached|.  

Tue Oct 19 19:23:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Fix the typo fix.  

Tue Oct 19 19:19:39 2004  Petr Baudis <pasky@ucw.cz>:

	* features.conf:

	Trim a ridiciously huge FTP description.  

Tue Oct 19 18:29:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Undefine CRASH_IF_ALLOC_MAXTRIES by default (then we might give up
	on all our error handling whatsoever) and lower ALLOC_MAXTRIES to 3
	(makes no sense to try more times).  

Tue Oct 19 17:21:03 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Tue Oct 19 14:38:00 2004  Laurent Monin <zas@norz.org>:

	* src/util/: memdebug.c, memory.c, memory.h:

	Define CRASH_IF_ALLOC_MAXTRIES by default, ALLOC_MAXTRIES was
	increased from 3 to 5, ALLOC_DELAY from 1 to 3 seconds. Minor
	tidyup.  

Tue Oct 19 12:46:37 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/table.c:

	Check if @span_cell is NULL before using it.  

Tue Oct 19 10:24:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	Also put an upper limit on <col span=value> and <colgroup
	span=value>. Fixes mozilla_die3.html in the browser test suite of
	horror.  

Tue Oct 19 09:35:30 2004  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mimetypes.c:

	Prevent assertion failure in get_hash_item(), do not call it when
	extensionlen==0.  

Tue Oct 19 09:23:50 2004  Laurent Monin <zas@norz.org>:

	* src/: setup.h, document/html/parser/table.c:

	Limit rowspan/colspan values to HTML_MAX_(ROWSPAN|COLSPAN) set to
	32768 by default. It prevents crash reported at
	
	http://www.securityfocus.com/archive/1/378632/2004-10-16/2004-10-22/0, using links_die1.html.

Tue Oct 19 08:40:21 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	An assertion was disabled, it is triggered when checkboxes are
	pressed in bugzilla. Please recheck this one.  

Tue Oct 19 08:32:54 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	When saving formatted documents skip trailing spaces, fix bug 544.  

Tue Oct 19 08:09:17 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Oct 19 06:02:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	In cached_header_dialog, introduce the local variable |title| to fit
	the call to msg_box at the end of the routine within the confines of
	an eighty-column terminal without violating the unspoken rule that
	calls to msg_box must put the title and its alignment flag on the
	same line.  

Tue Oct 19 05:54:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Give some comments that native-English-speaker touch.  

Tue Oct 19 05:50:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Remove an extra space.  

Tue Oct 19 05:48:32 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	If there is nothing left after removing all CRs and trailing
	newlines, display the 'No header info' box instead of an empty
	'Header info' box.  

Tue Oct 19 05:46:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Rework some gotos to save some indentation and simplify the code.  

Tue Oct 19 05:40:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Delete an extra space.  

Tue Oct 19 05:40:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Move the allocation of |headers| to slightly simplify memory
	management and to allow it to be localised.  

Tue Oct 19 05:34:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Reduce intentation in cached_header_dialog by swapping an if block 
	and its implicit else block and adding a little goto magic.  

Tue Oct 19 05:28:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix missing '#ifndef BUG_517' -> '#ifdef BUG_517' in 1.344 as was
	pointed out by Miciah.  

Tue Oct 19 05:26:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	In cached_header_dialog, mem_alloc the needed memory rather than
	using stracpy as cached_header_dialog goes on to perform the copying
	itself.  

Tue Oct 19 05:23:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	In cached_header_dialog, use |cached->head| instead of |header|, the
	latter of which is a copy of the former, to check whether the header
	is empty and whether it begins with '\r'.  

Tue Oct 19 05:08:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/document.c, dialogs/document.h, sched/download.c:

	Export cached_header_dialog.  
	
	Introduce tp_show_header, which backs a new button in type-query
	boxes, 'Show header', and uses the new
	download_show_header_callback, which uses cached_header_dialog.  

Tue Oct 19 05:01:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Factor most of protocol_header_dialog out into the new
	cached_header_dialog. protocol_header_dialog now only calls either
	nowhere_box, if the session has no location, or
	cached_header_dialog, with the return of find_in_cache.  

Tue Oct 19 04:54:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Delete an extra blank line at the end of protocol_header_dialog.  

Mon Oct 18 05:08:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Use match_link_text instead of search_link_text when handling a
	redraw event in link_typeahead_handler to check whether we need to
	call draw_typeahead_match.  

Mon Oct 18 04:18:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Return TYPEAHEAD_ERROR_NO_FURTHER from do_typeahead when 
	search_link_text returns the current link as a match and the user
	has told ELinks to go to the next or previous match.  
	
	Now ELinks will tell the user that there are no further matches when
	there are no further matches, even when it loops around from the
	current match back to the current match.  

Mon Oct 18 04:12:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Return TYPEAHEAD_ERROR_NO_FURTHER instead of TYPEAHEAD_ERROR from
	do_typeahead when document.browse.search.wraparound is disabled, the
	current link matches the search pattern, and the user tells ELinks 
	to go to the next or previous match.  
	
	This avoids the repeated "Could not find a link with the text '...'" 
	messages, fixing bug 513 a little more (the previous fix only
	improved the situation when wraparound was enabled).  

Mon Oct 18 03:14:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Swap an if block and its implicit else block.  

Mon Oct 18 03:12:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Factor the code to match a string against a link out from
	search_link_text to the new match_link_text.  

Mon Oct 18 03:06:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Eliminate the match_link_text macro, and expand its one call, in
	search_link_text; 

Sun Oct 17 23:15:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Hmm, further improve on the checks introduced in sched/action.c
	(1.108 -> 1.109) fixing problems with moving viewer event handling
	to do_action().  

Sun Oct 17 21:36:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fold a nested if statement with its container.  

Sun Oct 17 21:34:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fold two redundant return statements.  

Sun Oct 17 21:33:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In try_form_action, reverse the outer if block and its implied else
	block.  

Sun Oct 17 21:31:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Revert; I wanted to go in a different direction...  

Sun Oct 17 21:29:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In try_form_action, initialise status to FRAME_EVENT_IGNORED and
	return status at the end of the routine instead of returning
	FRAME_EVENT_IGNORED.  

Sun Oct 17 21:25:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Factor the form-action code out from frame_ev to the new
	try_form_action.  

Sun Oct 17 21:05:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In field_op, leave insert mode when submitting a form field.  This
	eliminates an assertion failure and, more importantly, behaves as I
	think that it should.  

Sun Oct 17 20:45:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Rename frame_ev_kbd_number to try_prefix_key.  

Sun Oct 17 20:44:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Move the check whether the key is a digit from the caller of
	frame_ev_kbd_number to frame_ev_kbd_number.  

Sun Oct 17 20:40:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove a superfluous assertion and fold two checks whether
	|ses->kbdprefix.mark| in try_mark_key.  

Sun Oct 17 20:38:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Swap an if block and its implicit else block to reduce indentation.  

Sun Oct 17 20:34:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove a useless comment.  

Sun Oct 17 20:33:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Move the #ifdef CONFIG_MARKS within try_mark_key to enclose the
	routine, and enclose the call from frame_ev_kbd to try_mark_key
	similarly.  

Sun Oct 17 20:31:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Factor the mark code in frame_ev_kbd out to the new try_mark_key.  

Sun Oct 17 20:21:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Unwrap a line.  

Sun Oct 17 20:20:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: link.c, link.h, view.c:

	Change the return type of try_document_key from int to enum
	frame_event_status for uniformity.  

Sun Oct 17 20:03:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: link.c, view.c:

	Reset |ses->kbdprefix.repeat_count| in try_document_key rather than
	in its callers.  

Sun Oct 17 17:17:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c:

	Set the free_syntax flag for unknown protocols and ditch the @known
	variable in parse_uri(). It is a relic from back when we had
	PROTOCOL_INVALID and the procotol backend accessors didn't work for
	them.  

Sun Oct 17 16:41:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix the 'too many slashed after protocol' trimming. For hostless
	URIs like file:// URIs normalize_uri() should do the trimming so
	only trim if the protocol needs a slash after the host.  

Sun Oct 17 16:21:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix false assertion failures introduced in
	src/viewer/text/view.c:1.618. Triggered when pasting stuff into
	textareas so now only assert if the event was handled by field_op()
	in frame_ev().  

Sun Oct 17 15:38:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add support for trimming off too many slashed after the protocol
	name. Spotted at dictionary.com where the 'Thesaurus' and 'Web'
	links at the top redirects to 'http:///...' leading to a 'Bad URL
	syntax' error.  

Sun Oct 17 15:32:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup and remove unnecessary goto usage.  

Sun Oct 17 00:41:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Oops fix compile error.  

Sat Oct 16 23:12:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Add bug 533 near the comment added in last patch.  

Sat Oct 16 23:09:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Disable the error message about 'script ... lost in too full cache.'
	and leave a big comment.  

Sat Oct 16 20:20:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	move_current_tab(): Honour ses->kbdprefix.repeat_count so you can
	move the current tab a variable number of steps. However it doesn't
	work well for wrap around.  

Sat Oct 16 20:15:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	Check the link under the cursor using new check_link_under_cursor()
	when drawing a document with cursor routing navigation enabled. This
	fixes links not being highlighted correctly when moving back and
	forth in history. It is kind of a parallel to check_vs() for
	link-wise navigation.  

Sat Oct 16 19:59:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	switch_current_tab(): Honour ses->kbdprefix.repeat_count so you can
	jump variable number of tabs. However it doesn't work well for wrap
	around due to switch_to_tab() usage.  

Sat Oct 16 19:57:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/view.c, sched/action.c, terminal/tab.c,
	terminal/tab.h:

	Merge switch_to_(next|prev)_tab() into switch_current_tab()
	controlled by a direction arg.  

Fri Oct 15 02:39:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Always separate the ETA part using ', ' to make it stand out.  

Fri Oct 15 01:34:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix the '#if 0' -> '#ifndef BUG_517' change in 1.343 to be '#ifdef
	BUG_517' since BUG_517 is undefined.  

Fri Oct 15 00:59:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Crudely add guarding checks around code updating local state
	variables. This is sledgehammer-hacks of the highest quality that
	will make your mama cry. ELinks should now not crash when rendering
	2.avi from bug 515. A lot of assertions was also added.  

Thu Oct 14 23:16:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/navigator.c:

	Assert navigator->depth >= 0.  

Thu Oct 14 20:28:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Merge defrag_entry() into get_cache_fragment(). It involved some
	best-effort logics for handling allocation failure; is that
	good/bad? 

Thu Oct 14 20:23:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	defrag_entry(): Add comments and prepare for next patch.  

Thu Oct 14 20:13:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Use get_cache_fragment() for document image mapping. Same goes as
	for preformatting if the document is already rendered it should also
	make sense to get the cache fragment using get_cache_fragment().  

Thu Oct 14 20:10:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use get_cache_fragment() when preformatting. This restrict what
	fragments preformatting will attempt to work on but I hope it will
	not matter much since it is more in sync with the document rendering
	so we only preformat if we are also going to render. (I pray that
	this compiles else pasky will madly ask me to consider configuring
	--with-lua ;-) 

Thu Oct 14 20:02:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Use get_cache_fragment() for document rendering. Fixes dangerous
	dereference of the first fragment before the
	list_empty(cached->frag) check.  

Thu Oct 14 20:00:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/css/css.c:

	Introduce get_cache_fragment() that defragments the cache entry and
	does the sanity checks to determine whether to return the first
	fragment or NULL.  
	
	Use is for CSS import handling.  

Thu Oct 14 19:00:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Describe add_fragment().  

Thu Oct 14 18:50:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, mime/mime.c:

	Convert remaining uses of get_cache_uri() to just access
	cached->uri. I think the same applies as the previous patch namely
	that validity of the cache entry is irrelevant because we already
	access stuff like the cached header so why not also use any
	extensions from the cache entry's URI.  

Thu Oct 14 18:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/task.c, viewer/dump/dump.c:

	Fix confusing uses of get_cache_uri() to just use cached->uri as we
	shouldn't care whether the cache entry is valid or not when using
	the URI as referrer in redirects.  

Thu Oct 14 18:32:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.h:

	Remove confusing comment pointed out by zas (I think). Move
	cache_info() to be ast and describe it and also move get_cache_uri()
	below {struct fragment} so the struct declarations are grouped.  

Thu Oct 14 18:13:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Make send_to_frame() take doc_view as an arg so its current_frame()
	call can be removed and the guarding assertion moved to frame_ev().  

Thu Oct 14 18:05:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Convert the original insert mode resetting to an assertion so future
	regressions will be caught.  

Thu Oct 14 18:04:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: action.c, session.c:

	Do the insert mode resetting in do_action() (is this the right place
	Miciah\?) and revert my previous attempt at fixing it in
	sched/session.c 1.574.  

Thu Oct 14 14:21:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	process_snippets(): Since the external reference snippet handling is
	the larger shortcut the shorter <script>code</script> snippet
	handling.  

Thu Oct 14 14:05:07 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser/parse.c, protocol/finger/finger.c,
	viewer/text/textarea.c:

	Use add_crlf_to_string() where applicable.  

Thu Oct 14 13:51:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	process_snippets(): No need to allocate the imported source uri
	string. onload_snippets strings are NUL terminated.  

Thu Oct 14 13:23:05 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Revert DACT(N_()) -> D_() patch, it was breaking i18n. Spotted by
	Jonas.  

Thu Oct 14 12:49:51 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Reduce code redundancy by introducing can_read_or_write(), called by
	can_read() and can_write().  

Thu Oct 14 12:48:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	process_snippets(): Free the URI right after the cache lookup. Use
	{string->source + 1} instead in the error message.  

Thu Oct 14 12:41:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	process_snippets(): More usage of the local {struct string}
	variable.  

Thu Oct 14 12:35:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	process_snippets(): Lessen the operator overload by using a local
	{struct string} variable. Also short cut the snippet loop for empty
	strings.  

Thu Oct 14 12:34:37 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Cleanup and fix debugging code, log_data() was renamed
	debug_transfer_log().  

Thu Oct 14 12:28:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Reset the session insert mode to off when changing document in
	doc_loading_callback(). Reproducable when changing document by
	posting from 'an entered' text-input form-field (that is with insert
	mode being on) all future pages would have insert mode on. Forensic
	speculation: before it was handled magically at the end of
	frame_ev() but 1.605 reindenting changes in 1.477 fixing text-input
	field handling and redrawing caused the magic code never to be
	reached. Anyway I think it makes good sense to handle it at the new
	place.  

Wed Oct 13 21:57:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Try to call load_ecmascript_imports() foreach frame in
	load_frames(), let's see what happens. Suggested by Jonas.  

Wed Oct 13 21:50:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Silence Jonas - small reworking of external snippets references
	handling and taking care of memory allocaiton failures.  

Wed Oct 13 16:26:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/intl/charsets.c:

	Resolve a discrepancy in convert_string when checking whether the
	character terminating an entity is alphanumeric by using 
	isasciialpha and isdigit in place of isdigit.  

Wed Oct 13 16:12:10 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Drop DACT(N_(...)) and use shorter D_(...), defined as (N_(x)).  

Wed Oct 13 15:52:31 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Change #if 0 added to disable bzip2 code related to bug 517 to more
	explicit #ifndef BUG_517.  

Wed Oct 13 15:34:46 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, main.c, cookies/cookies.c, dialogs/info.c,
	dialogs/menu.c, document/css/README, document/css/apply.c,
	document/css/parser.c, document/css/stylesheet.c,
	document/css/stylesheet.h, document/dom/navigator.c,
	document/dom/node.c, osdep/os2/os2.c, terminal/hardio.c,
	util/fastfind.c, util/memdebug.c, util/memdebug.h, util/memory.c,
	util/memory.h, util/scanner.c, util/scanner.h, util/string.c,
	util/string.h:

	Uniformize debugging macros names: LEAK_DEBUG -> DEBUG_MEMLEAK,
	COOKIES_DEBUG -> DEBUG_COOKIES, CSS_DEBUG -> DEBUG_CSS, OS2_DEBUG ->
	DEBUG_OS2, HW_DEBUG -> DEBUG_HARDIO, FASTFIND_DEBUG ->
	DEBUG_FASTFIND, SCANNER_DEBUG -> DEBUG_SCANNER.  

Wed Oct 13 15:18:25 2004  Laurent Monin <zas@norz.org>:

	* src/: encoding/bzip2.c, encoding/gzip.c, util/color.inc,
	util/color_s.inc:

	Drop remaining ELINKS_SMALL, this one was replaced by CONFIG_SMALL.  

Wed Oct 13 10:00:57 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/protocol.c:

	Minor typo fix and reindentation.  

Wed Oct 13 08:28:20 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Fix buggy #ifdef IPV6 in ftp options.  

Wed Oct 13 08:17:00 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Assertion was added to catch bug 538.  

Wed Oct 13 00:30:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Some non-javascript scripts use the language attribute. I found a
	language='vbscript' at
	http://www.geocities.com/cliktoprogram/vbscript/introduction.html so
	waste time checking that the language attribute is 'javascript' with
	optional version digits postfixed (like: 'javascript1.1') 

Wed Oct 13 00:12:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/Makefile.am:

	Stack SUBDIR listing.  

Wed Oct 13 00:09:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, protocol/ftp/ftp.c:

	Move FTP options.  

Tue Oct 12 23:37:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/intl/gettext/plural.y:

	Fix parser generation from plural.y to expect 7 instead of 10
	shift/reduce conflicts. Patch by Alexey Tourbin <at@altlinux.org>.
	(bug 537) 

Tue Oct 12 23:32:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Alphabetize entries.  

Tue Oct 12 15:28:12 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/finger/: Makefile.am, finger.c, finger.h:

	Finger-related files added.  

Tue Oct 12 15:25:21 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/finger/: .cvsignore, .vimrc:

	Add .vimrc .cvsignore to finger/.  

Tue Oct 12 15:23:26 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/protocol/Makefile.am, src/protocol/finger.c,
	src/protocol/finger.h, src/protocol/protocol.c:

	Use a separate directory for finger protocol, more coherent with
	other protocols.  

Tue Oct 12 14:36:36 2004  Laurent Monin <zas@norz.org>:

	* features.conf:

	Definition of FTP protocol was added, borrowed from wikipedia.  

Tue Oct 12 14:26:47 2004  Laurent Monin <zas@norz.org>:

	* configure.in, features.conf, src/config/options.inc,
	src/protocol/Makefile.am, src/protocol/protocol.c,
	src/protocol/ftp/ftp.c, src/protocol/ftp/ftp.h, src/sched/error.c:

	Make ftp protocol a module, introducing --disable-ftp configure
	option.  

Tue Oct 12 07:52:51 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Fix memleak (@src was not always freed) introduced by bug 532 fix.  

Mon Oct 11 18:14:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fix the fix :).  

Mon Oct 11 18:13:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fix bug 532, crash on <script src> with NULL part->document,
	reported by zas.  

Mon Oct 11 10:25:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Oct 10 23:09:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/document.h,
	document/renderer.c, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c, sched/session.c:

	<script src> support.  

Sun Oct 10 20:39:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.c:

	Gee, can't you guys grep? 

Sun Oct 10 20:36:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	To avoid stability (and relieve the memory and CPU a little), in
	init_vs() just set ecmascript_fragile and let vs->ecmascript be
	created magically on demand.  

Sun Oct 10 20:33:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	assert(vs->ecmascript) only unless vs->ecmascript_fragile - in that
	case vs->ecmascript might not be created yet, we do it on-demand for
	copy_vs()'d vses.  

Sun Oct 10 20:17:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	assert() that at the time of ecmascript_protocol_handler(), the
	associated vs will always have its ecmascript interpreter.  

Sun Oct 10 20:17:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	In do_action, do not call the routines corresponding to the movement
	and scrolling actions when |doc_view| is NULL.  
	
	This prevents crashes when using those actions before loading any
	documents.  

Sun Oct 10 20:12:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Resurrect the assert()ion commented out as a temporary bug 521
	measure. I'm gonna trace it and find it out and nothing will stay in
	my way to justice! 

Sun Oct 10 20:08:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	try_jump_to_link_number: Return 0 if there is a prefix and
	|doc_view| is NULL.  

Sun Oct 10 19:31:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/inpfield.c, bfu/menu.c, viewer/text/search.c:

	input_line_event_handler: 
	
	 - Give the input line's handler a shot at EVENT_RESIZE events,
	   passing them ACT_EDIT_REDRAW, as we do for EVENT_REDRAW events.  
	
	 - Return EVENT_NOT_PROCESSED just the same, because we want 
	   input_line_event_handler's caller to perform its redraw as well.  
	
	menu_search_handler: Return immediately on ACT_EDIT_REDRAW.  
	
	exmode_input_handler: No change necessary.  
	
	text_typeahead_handler: Return immediately on ACT_EDIT_REDRAW.  
	
	link_typeahead_handler: Handle ACT_EDIT_REDRAW by redrawing the
	highlighting for search matches.  
	
	This fixes bug 530, 'Terminal resizing and Ctrl-L removes typeahead
	search highlighting'.  

Sun Oct 10 18:04:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	In input_line_event_handler, when handling a redraw event, set
	|action| to |ACT_EDIT_REDRAW| instead of to |ACT_EDIT_NONE| so as to
	give the input-line handler a more semantically correct action
	value.  

Sun Oct 10 17:23:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Drop the inline keyword from draw_typeahead_match, which is big and
	has only one caller.  

Sun Oct 10 15:31:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	Introduce get_current_link_info_and_title and use it in
	print_screen_status to display the title of the selected link, if it
	has one, in the status bar.  
	
	This fixes bug 127.  

Sun Oct 10 08:53:35 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Oct 10 04:40:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/options.inc, viewer/text/view.c:

	Add an option document.browse.search.typeahead that allows one to
	configure typeahead searching to start automatically whenever one
	presses an unbound key with no modifier. The option can be set to
	disabled, search link text, or search document text.  

Sun Oct 10 04:02:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd, initialise |status| to |FRAME_EVENT_IGNORED| as it
	was eventually assigned that value anyway at the end of the routine,
	which assignment is now removed.  

Sun Oct 10 03:56:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Delete the |if (status != FRAME_EVENT_IGNORED)
	ses->kbdprefix.repeat_count| at the end of frame_ev_kbd and reset
	|ses->kbdprefix.repeat_count| at the one point from which execution
	could have flow to that if statement without |status| being
	|FRAME_EVENT_IGNORED|.  

Sun Oct 10 03:51:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd, now that it has only one case remaining, remove the
	switch statement from around its single case.  

Sun Oct 10 03:47:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Reset |ses->kbdprefix.repeat_count| to zero after handling a
	document accesskey when document.browse.accesskey.priority = 2.  

Sun Oct 10 03:12:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	Change do_frame_action to take a doc_view instead of calling 
	current_frame itelf. Change do_action, the only caller of
	do_frame_action, to pass do_frame_action doc_view.  

Sun Oct 10 02:56:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c:

	Handle ACT_MAIN_JUMP_TO_LINK, ACT_MAIN_MARK_SET, and
	ACT_MAIN_MARK_SET in do_action instead of in frame_ev_kbd.  

Sun Oct 10 02:51:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c:

	Handle prefixes for ACT_MAIN_OPEN_LINK_IN_NEW_TAB_IN_BACKGROUND, 
	ACT_MAIN_OPEN_LINK_IN_NEW_TAB, ACT_MAIN_OPEN_LINK_IN_NEW_WINDOW, and 
	ACT_MAIN_LINK_MENU in do_action instead of in frame_ev_kbd.  

Sun Oct 10 02:42:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	Change do_frame_action to return enum frame_event_status and to
	return FRAME_EVENT_OK on error or else pass on the return of the
	frame_action passed to it.  Further, remove the refresh code from
	do_frame_action and let do_action handle it.  

Sun Oct 10 02:27:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	Clean up the refresh code in do_action and, as a side effect, change
	it to return FRAME_EVENT_REFRESH when a refresh is needed (even tho
	none of do_action's callers will do anything about it, not that they
	need to as do_action performs any necessary refresh).  

Sun Oct 10 02:23:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	move_link and move_link_dir, too.  

Sun Oct 10 01:58:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Zero |ses->kbdprefix.repeat_count| after using it in move_page_down, 
	move_page_up, scroll_up, scroll_down, scroll_left, scroll_right, 
	move_cursor_left, move_cursor_right, move_cursor_up, and
	move_cursor_down.  
	
	This fixes refreshing when using a prefix with one of the actions 
	that correspond to these routines. The repeat count was already 
	being reset, but only after the status line was being updated.  

Sun Oct 10 01:53:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Eliminate the kbdprefix_repeat_count_or_one macro.  

Sun Oct 10 01:46:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: view.c, view.h:

	Convert move_cursor_left, move_cursor_right, move_cursor_up, and
	move_cursor_down from macros to C routines.  

Sun Oct 10 00:43:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/exmode.c, sched/action.c, sched/action.h,
	viewer/text/view.c, viewer/text/view.h:

	Add FRAME_EVENT_SESSION_DESTROYED to enum frame_event_status.  
	
	Change do_action to return enum frame_event_status instead of enum
	main_action, to use FRAME_EVENT_SESSION_DESTROYED as appropriate, 
	and to use FRAME_EVENT_IGNORED instead of ACT_MAIN_NONE to indicate
	that the action was not handled.  
	
	Change exmode_action_handler to cope.  
	
	Remove the hack in send_kbd_event that checks whether the action is
	one that might close the tab and instead check whether do_action 
	returns FRAME_EVENT_SESSION_DESTROYED.  

Sat Oct  9 23:57:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Oops, I misindented some code in June (revision 1.477). Fix.  

Sat Oct  9 23:36:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Nope, that wa'n't right. Revert.  

Sat Oct  9 23:31:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In honour of Jonas' sledgehammer, crudely fix refreshing after
	actions that are given numeric prefixes.  

Sat Oct  9 23:00:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	In do_action, call copy_current_link_to_clipboard via
	do_frame_action and drop the try_jump_to_link_number call from 
	copy_current_link_to_clipboard as do_frame_action will do it.  

Sat Oct  9 22:51:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Handle ACT_MAIN_COPY_CLIPBOARD in do_action instead of in
	frame_kbd_ev.  This requires that copy_current_link_to_clipboard be
	exported.  

Sat Oct  9 22:43:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Factor out the code in frame_ev_kbd to handle
	ACT_MAIN_COPY_CLIPBOARD into a new procedure,
	copy_current_link_to_clipboard.  

Sat Oct  9 22:32:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.h:

	Introduce the macro kbdprefix_repeat_count_or_one and use it in the
	macros move_cursor_left, move_cursor_right, move_cursor_up, and
	move_cursor_down to support prefixes for the corresponding actions.  

Sat Oct  9 22:19:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Handle the following in do_action instead of in frame_ev_kbd: 
	
	ACT_MAIN_MOVE_CURSOR_UP ACT_MAIN_MOVE_CURSOR_DOWN 
	ACT_MAIN_MOVE_CURSOR_LEFT ACT_MAIN_MOVE_CURSOR_RIGHT 
	
	This required that move_cursor be exposed as well as the macros 
	move_cursor_left, move_cursor_right, move_cursor_up, and
	move_cursor_down.  

Sat Oct  9 22:06:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Handle the following in do_action instead of in frame_ev_kbd: 
	
	ACT_MAIN_MOVE_PAGE_DOWN ACT_MAIN_MOVE_PAGE_UP 
	ACT_MAIN_MOVE_LINK_NEXT ACT_MAIN_MOVE_LINK_PREV 
	ACT_MAIN_MOVE_LINK_UP ACT_MAIN_MOVE_LINK_DOWN 
	ACT_MAIN_MOVE_LINK_LEFT ACT_MAIN_MOVE_LINK_RIGHT 
	ACT_MAIN_MOVE_DOCUMENT_START ACT_MAIN_MOVE_DOCUMENT_END 
	ACT_MAIN_SCROLL_DOWN ACT_MAIN_SCROLL_UP ACT_MAIN_SCROLL_LEFT 
	ACT_MAIN_SCROLL_RIGHT 
	
	This required the exposure of several routines: 
	
	move_down move_page_down move_up move_page_up move_link 
	move_link_dir scroll_up scroll_down scroll_left scroll_right 
	move_document_start move_document_end 
	
	...and several macros: 
	
	move_link_up move_link_down move_link_left move_link_right 
	move_link_next move_link_prev 

Sat Oct  9 21:13:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Export try_jump_to_link_number.  
	
	Add a parameter jump_to_link_number to do_frame_action to indicate 
	whether to call try_jump_to_link_number, in which case
	do_frame_action will only proceed if try_jump_to_link_number
	succeeds.  
	
	Change calls from do_action to do_frame_action to use the new flag.  
	
	Drop six actions from frame_ev_kbd which are already handled by
	do_action: now that do_action handles prefixes, there is no need for
	the duplicate code.  

Sat Oct  9 21:08:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd, do not reset |ses->kbdprefix.repeat_count = 0| if
	we are returning |FRAME_EVENT_IGNORE|.  

Sat Oct  9 12:28:53 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Minor optimization.  

Fri Oct  8 21:54:45 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/plain/renderer.c:

	Probably fix bug 515.  

Fri Oct  8 17:19:25 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/: finger.c, finger.h, protocol.c, gopher/gopher.c,
	gopher/gopher.h:

	Dummy modules entries were added for finger and gopher protocols, so
	they appear in Info box.  

Fri Oct  8 16:57:52 2004  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, connection.h:

	|remaining_info| -> |progress|.  

Fri Oct  8 16:54:57 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/download.c, dialogs/status.c, dialogs/status.h,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h, sched/download.c:

	|prg| -> |progress|.  

Fri Oct  8 16:47:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Fri Oct  8 16:44:09 2004  Laurent Monin <zas@norz.org>:

	* src/sched/task.c:

	|stat| -> |download_p|.  

Fri Oct  8 16:41:07 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	|stat| -> |download|.  

Fri Oct  8 16:36:56 2004  Laurent Monin <zas@norz.org>:

	* src/sched/task.c:

	|stat| -> |download|.  

Fri Oct  8 16:32:51 2004  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, connection.c:

	|stat| -> |download|.  

Fri Oct  8 16:25:13 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.h:

	|down| -> |download|.  

Fri Oct  8 16:21:41 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.h:

	@stat -> @download.  

Fri Oct  8 16:20:52 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/: download.c, status.c, status.h:

	Use @download for struct download * instead of @stat, and rename
	get_stat_msg() to get_download_msg().  

Fri Oct  8 16:12:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Set *new_len to zero to prevent segfault.  

Fri Oct  8 16:04:12 2004  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/connect.c, protocol/ftp/ftp.c, sched/connection.c,
	sched/connection.h:

	Rename @pf to @protocol_family, and make it a bitfield (using 0 for
	IPv4 and 1 for IPv6, instead 1 and 2).  

Fri Oct  8 15:33:59 2004  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, download.h:

	Rename @prog,@prog_flags to @external_handler,
	@external_handler_flags.  

Fri Oct  8 13:11:07 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct  8 13:06:13 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/html/parser.c,
	document/sgml/scanner.c, protocol/smb/smb.c, viewer/text/view.c:

	Drop trailing spaces.  

Fri Oct  8 13:01:41 2004  Laurent Monin <zas@norz.org>:

	* test/target_blank.html:

	A test file named target_blank.html was added to test/. (i forgot to
	cvs add !).  

Fri Oct  8 13:00:07 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/task.c:

	Option document.browse.links.target_blank which let user choose to
	open links with target=_blank in a new tab in foreground or
	background. See bug 468. A test file named target_blank.html was
	added to test/.  

Thu Oct  7 16:44:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	add_document_line(): Never let @expanded underflow when
	approximating the line length. Should fix bug 515 for the
	http://starosek.com/elinks/1.avi test case.  

Thu Oct  7 10:08:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct  7 10:01:30 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Little italian update.  

Thu Oct  7 03:15:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/dns.h:

	Other places #includes <sys/types.h> first required by OS/2.  

Thu Oct  7 02:54:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, lowlevel/connect.c, lowlevel/connect.h,
	lowlevel/dns.c, lowlevel/dns.h, lowlevel/interlink.c,
	osdep/osdep.c, protocol/uri.c, protocol/ftp/ftp.c:

	Add guards around 'exotic' #includes.  

Thu Oct  7 02:54:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/conf.c, lowlevel/home.c:

	Add missing #includes.  

Wed Oct  6 19:59:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Assign CONFIG_UNIX=no if some other OS was detected.  

Wed Oct  6 13:48:31 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/leds.c, dialogs/status.c, terminal/terminal.h:

	Fix progress bar/leds/clock/timer display issues (bug 518).  

Wed Oct  6 12:10:04 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Just return if doc_view->vs is NULL, should fix bug 525.  

Tue Oct  5 20:19:18 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation updates/fixes.  

Tue Oct  5 16:40:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation fixes. Certyfikaty --\> Dane uwierzytelniaj±ce.  

Tue Oct  5 09:14:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	Assertion related to bug 521 was disabled.  

Tue Oct  5 01:23:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.c:

	Check for MAP_FAILED return value when calling mmap() and mremap()
	so it won't be treated as a valid address. Never munmap() the old
	pointer if reallocation fails -- remember it should behave like
	realloc()! 

Mon Oct  4 16:48:25 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Oct  4 14:08:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	When tabbing to some next match while doing a link typeahead with
	wraparound disabled and only the current link is matching pop up a
	"No further matches for '%s'." dialog so a ton of 'normal' typeahead
	dialogs is not displayed. Idea by Miciah in comment to bug 513 which
	should hopefully be fixed now.  

Mon Oct  4 13:26:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/http/http.c:

	Move the usage of the protocol.http.bugs.broken_302_redirect option
	to the HTTP code and limit the lookup to only happen when there is a
	302. Should hopefully make this thing a bit more clear.  

Sun Oct  3 18:01:54 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Commented out code related to bzip2 encoding. This code didn't work
	as it should.  

Fri Oct  1 16:03:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, protocol/proxy.c, util/memory.c,
	viewer/text/form.c, viewer/text/textarea.c:

	#define _GNU_SOURCE only if it's not defined yet - necessary for
	those a little wilder systems.  

Fri Oct  1 16:02:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Load imported CSS documents as additional files. It should fix CSS
	in frames issue reported by pasky and me. I have a bloated patch
	(that I will stash for now) which tries to add CSS magic numbers for
	child frames to the parents but it doesn.t look like it is needed.
	Could be that the get_cached_document() will do it implicit when a
	CSS document imported from a frame is loaded and the whole frame set
	is forced to be rerendered.  

Fri Oct  1 14:38:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Dammit broke make dist when I attempted to add doc/ files.  

Fri Oct  1 10:52:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	If there are no non-element nodes after the last element node make 
	sure that we flush to the end of the cache entry source including 
	the '>' of the last element tag if it has one. (bug 519) 

Fri Oct  1 07:15:46 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Attempt to fix bug 517, which leads to an infinite loop. Just break
	if read_encoded returns an error.  

Fri Oct  1 01:14:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Drop some 'support' words. If there was no support for the feature
	it wouldn't be mentioned in this file.  

Fri Oct  1 01:12:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/config/options.inc, src/protocol/smb/smb.c:

	Add option protocol.smb.credentials specifying a credential file
	passed using -A flag to smbclient. Fixes bug 514. Patch by Sergey
	Starosek <star@sunbay.com>.  

Fri Oct  1 00:42:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Always check the wraparound condition even if no
	matching is performed. Fixes bug 513.  

Fri Oct  1 00:40:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Simplify the checking of wrapping around only
	once.  

Thu Sep 30 21:18:36 2004  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Adam Golebiowski.  

Thu Sep 30 21:11:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, sched/session.c, sched/session.h,
	viewer/text/draw.c:

	Fix for bug 516 - in draw_formatted() pass gradual_rerendering to
	render_document_frames() if session_is_loading(), instead of doing
	it in doc_loading_callback(), since we may call draw_formatted()
	from multiple places during loading (anything, i.e. ^L,
	tabswitching, ...).  

Thu Sep 30 21:09:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	ecmascript_reset_state() only if we are going to add new snippets
	there and so. Otherwise we might end up with an empty context during
	rerendering.  

Thu Sep 30 21:08:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Add some more commented-out debugging messages.  

Thu Sep 30 19:52:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Make sure (thru new session_is_loading()) that draw_formatted() is
	always called with 3 when still rerendering (i.e. when we just
	finished loading of some aux file or there's still some aux file to
	get which will cause another rerender).  

Thu Sep 30 18:46:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix typo in command line info. Patch by Adam Golebiowski.  

Thu Sep 30 18:27:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	add_document_line(): Fix out of bound array access in the plain
	renderer. We need to review this code.  

Thu Sep 30 10:51:50 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	Use macro POST_CHAR_S instead of hardcoded \001 in strings.  

Wed Sep 29 23:27:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	document.(location|url) now behaves same as location.url when
	setting it. Necessary to support some broken sites.  

Wed Sep 29 23:25:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	document.location is alias to document.url 

Wed Sep 29 23:18:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	A few files missing from the doc/ dir. Now how am I supposed to
	guide new users of ecmascript in the 0.10pre2 announcement.  

Wed Sep 29 22:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/Makefile.am:

	There's no such thing as ecmascript/*.js yet 

Wed Sep 29 22:45:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Do not weed out duplicate cookies when loading them, which is
	horribly ineffective and doesn't scale. Ad maintainer position, qui
	tacet, consentire videtur ;p.  

Wed Sep 29 22:38:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: dom/Makefile.am, sgml/Makefile.am:

	Doh. Add README in sgml dir and remove it from dom dir.  

Wed Sep 29 22:12:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	When calling format_frames() recursively on a frameset newly
	gathered by format_frame(), lock the document during its execution
	because we could lose the underlying frames otherwise due to some
	other bugs described in the comment. Fixes the last crash on
	http://www.cinema-ostertor.de/ (but it still behaves very weird).  

Wed Sep 29 22:04:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre2.CVS 

Wed Sep 29 21:56:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre2 

Wed Sep 29 21:54:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Update .po files.  

Wed Sep 29 21:52:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Wed Sep 29 20:03:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	If CONFIG_DEBUG, make it possible to debug format_frames() without
	removing -O2.  

Wed Sep 29 20:01:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Pah, it seems we use some stupid weak CONFIG_DEBUG instead of good
	ol' DEBUG, whose idea was that? :) Bring the assertion failures
	back! 

Wed Sep 29 17:02:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, ecmascript/spidermonkey.c:

	Never open new windows if -no-home or -no-connect or -anonymous is
	enabled.  

Wed Sep 29 16:42:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/spidermonkey.c:

	window_open(): Fix URI leaking.  

Wed Sep 29 15:49:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	display_title_bar(): Fix crash when dereferencing NULL doc_view->vs
	triggerable at http://p2p.ingce.unibo.it/ 

Wed Sep 29 15:05:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	do_html_script(): Fix off by one error in the HTML comment end
	skipping. Fixes the example in bug 512.  

Wed Sep 29 14:47:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/scanner.c:

	scan_sgml_element_token(): Simplify the '<!' notation token scanning
	and fix the comment node text to start after '<!--'.  

Wed Sep 29 14:38:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	@include "../garbage.html"; 

Wed Sep 29 12:10:54 2004  Laurent Monin <zas@norz.org>:

	* src/encoding/gzip.c:

	Prevent gzip.c:155: warning: 'error' might be used uninitialized in
	this function.  

Wed Sep 29 11:49:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Fix memleaking of empty strings.  

Tue Sep 28 23:57:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	check_document_fragment(): Check also that the cache entry id and
	document id are in sync. Fixes displaying of wrong 'missing
	fragment' dialogs when opening tab between the cache entry has been
	marked complete but the document still hasn't been rerendered.  

Tue Sep 28 23:50:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Do it my way instead, if you will. Do not attempt to show the link
	info altogether unless doc_view->vs, it looks too dangerous. Also
	explain why can actually doc_view->vs be NULL there.  

Tue Sep 28 23:45:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	display_status_bar(): Fix crash when doc_view->vs is NULL. pasky is
	this ok? 

Tue Sep 28 23:28:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	location_goto()'s goto_uri_frame() now happens in a bottom half
	handler to prevent nasty surprises inside of complex frame
	configurations.  

Tue Sep 28 23:14:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Disable the killer assert(!vs->doc_view) with a thorough explanation
	- it should be re-enabled when we get frame name conflicts right.
	Instead do some wild recovery now.  

Tue Sep 28 22:41:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Moved the DBG message around.  

Tue Sep 28 22:40:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Some so frequently useful debug message... (commented out, of
	course).  

Tue Sep 28 22:35:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	add_new_win_to_menu(): Fix the action ID.  

Tue Sep 28 20:08:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.h:

	Disclaimer near frameset_desc.box.  

Tue Sep 28 19:22:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/marks.c:

	Preserve vs->doc_view over goto_mark().  

Tue Sep 28 19:20:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Disconnect doc_view in destroy_vs().  

Tue Sep 28 17:56:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	When walking inside of a frame, break the bind between vs and
	vs->doc_view when replacing vs->uri. This should fix the assertion
	failures connected with frames.  

Tue Sep 28 17:53:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed broken usage of formatted cache by passing no_cache to
	draw_formatted(), spotted by Jonas.  

Tue Sep 28 16:55:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	ses_forward()'s @loaded_in_frame description attempt.  

Tue Sep 28 16:46:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Try to slightly simplify ses_forward(). Dancing in the minefield...  

Tue Sep 28 16:34:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Fixed two errrorneous end_load() -> doc_loading_callback().  

Tue Sep 28 16:33:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	doc_end_load()-> doc_loading_callback() 

Tue Sep 28 16:28:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Fixed download.callback description, I got it wrong.  

Tue Sep 28 16:25:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	sched_connection_info() -> notify_connection_callbacks() 

Tue Sep 28 16:21:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, sched/task.c, viewer/dump/dump.c:

	download.end -> download.callback 

Tue Sep 28 16:13:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	dump_end() -> dump_loading_callback() 

Tue Sep 28 16:12:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.c, task.c, task.h:

	*end_load() -> *loading_callback(), removing one of the
	HYPER-misleading function names. It is called basically each time
	something interesting happens on @stat.  

Tue Sep 28 14:13:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Moved the commented out part of add_fragments() to a debug check in
	the case of list_empty(*queued_snippets) which we now handle - it
	can happen when we already visited that view_state and processed the
	fragments.  

Tue Sep 28 14:02:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	@doc_current now gets initialized to the first @doc_snippets item
	like a nice good iterator. We could survive a page load without a
	crash right away now again, maybe? 

Tue Sep 28 14:00:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Oh. So pretend it's gradual rerendering only when you are gradual
	rerendering (that's in display_timer()).  

Tue Sep 28 13:56:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Simplification: peek to document_options at gradual_rerendering
	directly thru the @options pointer.  

Tue Sep 28 13:55:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: options.h, renderer.c:

	Process onload snippets only when NOT just gradually rerendering the
	document - thus only on final loads. This was probably inevitable
	and I knew it subconciously anyway, but now I have few real reasons
	why I must do this - they're described in an added comment. There
	are still some historical relicts around but I'm not gonna break it
	all up even more now. This should cure all the non-frames-related
	assertion failures.  

Tue Sep 28 13:30:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Swap two assert()ions in add_snippets().  

Tue Sep 28 12:49:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Fix an assertion failure triggered when adding first a single
	snippet and then some more later - it was a kinda off-by-one error,
	skipping the last entry in the queued_snippets before adding new
	stuff.  

Tue Sep 28 12:18:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Use @talking_to_proxy to better fit into the
	other code.  

Tue Sep 28 12:17:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	URI_PROXY should no longer add post data. Should (finally) bring IDN
	support to connections through proxies.  

Tue Sep 28 11:57:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, http/http.c:

	Make IDN work for through proxies by moving the IDN string munging
	from the time the proxy URI is generated to when it is added to the
	HTTP request send to the proxy. Now all IDN is only done at the
	lowest levels keeping state data free from IDN strings. The old
	behaviour actually caused assertion failures because URIs in the
	cache could be either IDN encoded or not. (bug 495) 

Tue Sep 28 10:27:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/features.m4:

	Fix the feature listing to handle () when appending dots.  

Tue Sep 28 08:04:59 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Sep 28 07:35:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Don't add snippets and fail the strlcmp() assertion when ecmascript
	is enabled.  

Tue Sep 28 07:16:11 2004  Laurent Monin <zas@norz.org>:

	* src/document/css/parser.c:

	get_next_scanner_token() can return NULL, so just break the loop in
	that case. It prevents a segfault when accessing clamav.net. Patch
	by Jonas and me.  

Mon Sep 27 18:15:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, dialogs/menu.c:

	Add LXR URI shortcut to Help menu. Move menu separator so non-debug
	builds has it after the bugzilla entry.  

Mon Sep 27 12:28:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	add_dom_link(): Use init_template() which also initializes the
	template chars data and attribute members. Fixes problem with
	obfuscated link text on dpreview.com in the highlighted source.  

Mon Sep 27 12:24:34 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Updated spec for ELinks-now.  

Mon Sep 27 11:40:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Fix bug 507 (reloading disables HTML highlighting) problem which
	apparently only affected reloading of local files. It was introduced
	in version 1.177 that caused the cache entries content type to
	always be updated (I didn't mention a reason in the log) and for
	files that would remove the content type assigned by ses_chktype().
	So the check in render_encoded_document() for whether to highlight
	would fail because the content type was NULL.  

Mon Sep 27 11:30:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Check for non-empty content type like we already do for cache header
	checking.  

Mon Sep 27 09:37:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Compilation fix.  

Mon Sep 27 09:37:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Compilation fixes.  

Mon Sep 27 09:36:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	add_snippets() doesn't need @current.  

Mon Sep 27 09:36:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	process_snippets() now also handles NULL *current.  

Mon Sep 27 09:35:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	ecmascript_eval() now moved to new process_snippets() which just
	goes from *current to the end of queue and evals the snippets.  

Mon Sep 27 09:32:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	process_snippets() -> add_snippets().  

Mon Sep 27 09:31:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Changed process_snippets() to ignore *current for now.  

Mon Sep 27 07:42:31 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Sep 27 07:33:09 2004  Laurent Monin <zas@norz.org>:

	* src/ecmascript/spidermonkey.c:

	Fix compilation without CONFIG_LEDS.  

Mon Sep 27 02:29:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Ufff. Finally fixed the bug I was hunting for about 1.5 days with
	every weapon I had available. When reloading document, don't assume
	it is the same if the already loaded data is same and just truncate
	it anyway, because that wasn't healthy for the snippets at all. I'm
	so tired that I can't even celebrate much.  

Mon Sep 27 02:27:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Two more assertions discovering real and difficult bugs.  

Mon Sep 27 01:10:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Oops, prompt for credentials if username was invalid too.  

Mon Sep 27 01:03:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.c, document.h, html/renderer.c:

	link.event_hooks is now pointer to list, giving it more flexibility
	and fixing one nice infinite loop when freeing up the document.  

Mon Sep 27 00:57:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Compilation fix. Didn't I say it? 

Mon Sep 27 00:56:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Compilation fix.  

Mon Sep 27 00:55:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.c, document.h, html/renderer.c:

	Introduced yet-unused link.event_hooks list.  

Mon Sep 27 00:43:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	+its in a comment, spotted by biesi.  

Mon Sep 27 00:38:08 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/auth/auth.c, src/protocol/auth/auth.h,
	src/protocol/ftp/ftp.c:

	Support for FTP authentication over user interface, fixing bug 194.
	Patch by Christian Biesinger <cbiesinger@gmx.at>, tuned by me based
	on further IRC discussion. So if it breaks, it's probably my fault
	;-).  

Mon Sep 27 00:10:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Simplify have_location(). Patch by Christian Biesinger.  

Sun Sep 26 20:57:26 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	In features.log and so, add (JavaScript) to ECMAScript.
	Experimentally confirmed that people don't know what ECMAScript is.  

Sun Sep 26 20:31:21 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Once upon a time, there was a .po resync, and then translators
	stopped by, and happily updated their translations.  

Sun Sep 26 20:24:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Oops, revert my debugging squad.  

Sun Sep 26 20:23:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, ecmascript/spidermonkey.c:

	Return undef from window.open() if failed. Otherwise it should
	return the new window's pointer but we can't handle that now so
	still return true on success.  

Sun Sep 26 20:13:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	window.alert() now returns undef instead of true. Dunno about
	window.open() (returning true/false now) and document.true (always
	gives false back).  

Sun Sep 26 18:21:58 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Forgotten ~ 

Sun Sep 26 17:45:07 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Sep 26 17:21:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Add TODO about checking for URI strings in certain DOM nodes.  

Sun Sep 26 17:15:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Highlight links using information about whether they are visited or
	bookmarked.  

Sun Sep 26 16:43:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: dom/renderer.c, sgml/scanner.c:

	Fix double rendering of ';' in entity references the right way by
	ommiting ';' before continuing the text node scanning.  

Sun Sep 26 16:09:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/util/types.h:

	Check for uint16_t type and merge fallback macros from the
	ECMACSRIPT branch.  

Sun Sep 26 15:10:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Set S_TRANS state only after we actually received anything. See? It
	crashes a little later now.  

Sun Sep 26 15:03:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Call display_timer() only after we already get to receive something.
	Should help to fix the reload-on-javascript-page crash.  

Sun Sep 26 14:47:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/marks.c:

	Another ECMAScript-less compilation fixes spotted by zas.  

Sun Sep 26 14:34:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	ECMAScriptless compilation fix, spotted by zas.  

Sun Sep 26 14:02:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	'T' now by default opens the link in new tab in background instead
	of in foreground. It's so *MUCH* more practical, everyone else is
	doing it that way and so and so and so. Who'll kill me this time? ;) 

Sun Sep 26 13:28:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Something about download->end() calling from load_url().  

Sun Sep 26 12:55:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	document.write() *PLACEHOLDER* just to silence those annoying
	warnings.  

Sun Sep 26 12:23:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	In copy_vs(), reset destination doc_view to NULL too. Another
	hopefully crash-fixing measurement. Damn, are there really no better
	test cases for these ECMAScript dances that those stupid porn sites? 

Sun Sep 26 12:17:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Reset destination ecmascript and ecmascript_fragile. This could cure
	few crashes.  

Sun Sep 26 12:13:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/location.c, sched/task.c, viewer/dump/dump.c,
	viewer/text/marks.c, viewer/text/vs.c, viewer/text/vs.h:

	destroy_vs() now takes an additional parameter telling it whether to
	put the associated ecmascript interpreter. Useful for marks.  

Sun Sep 26 11:18:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Only implicit render DOM text nodes via the flush calls. Fixes
	double rendering of ';' in entity references.  

Sun Sep 26 11:00:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/README:

	Mostly some TODO items for the SGML parser.  

Sun Sep 26 10:40:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/parser.c:

	More tagsoup navigation enhancements. Add attributes even if the
	value is missing (example: "attrname=").  

Sun Sep 26 10:15:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.h:

	Throw unsigned in. Spotted by Jonas.  

Sun Sep 26 10:05:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Fix linkifying of DOM attribute values. Damn quoted strings. ;) 

Sun Sep 26 10:03:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, ecmascript/ecmascript.c,
	ecmascript/ecmascript.h, viewer/text/vs.c, viewer/text/vs.h:

	onload_snippets are now stored inside of struct
	ecmascript_interpreter instead of struct view_state.  

Sun Sep 26 09:56:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, document/view.h,
	document/html/frames.c, ecmascript/ecmascript.c,
	ecmascript/ecmascript.h, ecmascript/spidermonkey.c,
	sched/session.c, sched/task.c, viewer/text/view.c,
	viewer/text/vs.c, viewer/text/vs.h:

	struct ecmascript_interpreter is now associated with struct
	view_state rather than struct document_view. This simplifies things
	a lot, making the interpreter really reliably persistent over
	rerenderings (to indicate real document replaces in the scope of a
	single view_state, view_state.ecmascript_fragile is used).
	view_state now holds pointer to the current document_view
	associated. ecmascript_cleanup_state() -> ecmascript_reset_state().
	This also fixes location ECMAScript object to contain the self
	location instead of top location as another side-effect.  

Sun Sep 26 09:50:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	When rendering "attr1='val1'attr2='val2'" the DOM node string can be
	located at the renderers current position.  

Sun Sep 26 01:53:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/parser.c:

	Shoot, @valtoken can be NULL in add_sgml_attribute(). Fixes quoted
	attribute value highlighting patch.  

Sun Sep 26 01:46:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Also highlight the entity reference delimiters ('&' and ';').
	Requested by pasky.  

Sun Sep 26 01:41:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: dom/node.h, dom/renderer.c, sgml/parser.c:

	Also highlight the string delimiters of attribute values. Requested
	by pasky.  

Sun Sep 26 01:24:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/scanner.c:

	Simplify comment skipping and move to separate function. The
	changing of '<' and '>' precedence could have caused more problems.
	Fix also scanning of '<a' that would cause lookup of '--a' instead
	of '--'. Now it is specialized and will not cause any table lookup.  

Sun Sep 26 00:30:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	window.open() support. Opens to a new window if possible, to a new
	tab (on foreground) otherwise.  

Sun Sep 26 00:28:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, sched/action.c, sched/session.c,
	terminal/tab.c, terminal/tab.h, bfu/hierbox.c:

	open_uri_in_new_tab() now takes additional @based option telling it
	whether to preload the current location in the new tab or not.  

Sat Sep 25 23:57:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Comment out attr="value""continuinghere" handling since this is
	extremely rare and you rather meet broken code where this hurts
	(i.e. some idos.cz page pointed out by Miernik). And we were already
	doing this when scanning for the tag end anyway.  

Sat Sep 25 23:51:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/: scanner.c, scanner.h:

	Improve handling of '</a<b>' tagsoup by treating it as '</a><b>'.  

Sat Sep 25 23:38:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/scanner.c:

	Improve handling of '<a<b>' tagsoup by treating it as '<a><b>' and
	remove guarding assertion. The scanner now handles both yahoo (bug
	510) and test/garbage.html .. more tagsoup handling comming up.  

Sat Sep 25 23:10:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/scanner.c:

	Optimize the main SGML scanner loop. Allow NUL chars in elements.  

Sat Sep 25 22:39:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/newwin.c:

	When looking for a suitable command, stop at the first match.  

Sat Sep 25 22:19:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/navigator.h:

	Fix off by one error in the foreachback_dom_state iterator causing
	search_dom_navigator() to never search in the DOM state at the
	bottom. (bug 505) 

Sat Sep 25 22:06:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	A little hack that lowers html_context.line_breax so newlines in
	<pre> tags are added even after </end-element-tags>. (bug 504) 

Sat Sep 25 20:37:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/util/memory.c:

	Check for existence of the _SC_PAGE_SIZE value passed to sysconf().
	It is not defined on Mac OS X. Reported by Eugenia Loli-Queru.  

Sat Sep 25 20:32:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	document.referrer support.  

Sat Sep 25 20:23:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Add support for window.parent. It's aliased to window.top for now,
	with some non-working commented out code and a thorough description.
	It will take a big rewrite of the frames support to have
	window.parent available without some totally insane magic.  

Sat Sep 25 20:02:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Don't set the LED value for -dump rendering.  

Sat Sep 25 19:56:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Compilation fixes. The whole frames thing is a huge mess.  

Sat Sep 25 19:51:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.h, html/frames.c:

	If a {struct document} has a frame associated somewhere, record it
	in a @frame field. I need that for ECMAScript window.parent.  

Sat Sep 25 19:25:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Compilation fix.  

Sat Sep 25 19:24:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Pass frame pointer directly to format_frame().  

Sat Sep 25 19:07:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.c:

	Include <sys/types.h> before <sys/mman.h>. Reported by Eugenia
	Loli-Queru and verified it fixes compile errors on Mac OS X.  

Sat Sep 25 18:07:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	When assigning to window.location, return JS_FALSE to prevent losing
	that property object to some stupid string. That was the root of the
	problem all the time, probably.  

Sat Sep 25 17:52:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	location_goto() now abstracts up the location change hook and is
	called directly from window_set_property(), instead of passing this
	to location_set_property().  

Sat Sep 25 17:40:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Drop window properties which are filled by JS_InitClass() later
	anyway.  

Sat Sep 25 17:38:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Identify window.location by string instead of id.  

Sat Sep 25 15:40:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/: ecmascript.c, spidermonkey.c:

	Check *_abs_url before using it, spotted by Jonas.  

Sat Sep 25 15:30:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/: ecmascript.c, spidermonkey.c:

	When going anywhere, use join_urls() instead of get_hooked_uri().  

Sat Sep 25 14:18:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Don't fricking touch free_syntax URIs, saving me an hour of
	debugging! 

Sat Sep 25 14:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, dialogs/menu.c:

	Show the 'Bug information' entry in the 'Help' menu even for non
	debug builds. Add cvs history url shortcut.  

Sat Sep 25 12:46:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Support for working directly with the location object, proxying
	location.href. Man, this was one nightmare to get going.  

Sat Sep 25 04:26:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Fix serious access of free()d memory causing the table width parsing
	in get_width() to fail when memory leak detection is disbled. The
	bug was introduced in (1.41 -> 1.42) when merging parse_width() and
	get_width().  Filed as bug 483.  

Sat Sep 25 01:31:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	About disallowing ECMAScript scripts to trash your disk and so.  

Sat Sep 25 01:04:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, document/renderer.c, ecmascript/spidermonkey.c,
	sched/session.c, sched/session.h:

	Add ecmascript error led using 'J' when on.  

Sat Sep 25 00:59:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	Compilation fix.  

Sat Sep 25 00:59:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, ecmascript/ecmascript.c,
	ecmascript/ecmascript.h:

	Moved ECMAScript state cleanup bit from render_document_frames() to
	ecmascript_cleanup_state().  

Sat Sep 25 00:50:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/status.c, ecmascript/spidermonkey.c,
	sched/session.c, sched/session.h:

	Support for ECMAScript's window.(status|menu)bar.visible. Try
	javascript:statusbar.visible=0. This is getting scary... ;-) 

Sat Sep 25 00:19:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/: ecmascript.c, spidermonkey.c:

	Add boolean option named ecmascript.error_reporting will stop all
	script error reporting.  

Sat Sep 25 00:03:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	VALUE_TO_JSVAL_END() now takes a @vp argument.  

Sat Sep 25 00:02:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	window.alert() implemented.  

Fri Sep 24 23:46:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Ok, evade the crash by constructing @window_obj as a nice global
	object again, gradually instead of a direct sledgehammer hit by
	JS_InitClass().  

Fri Sep 24 23:40:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Carry JSPT_BOOLEAN in int instead of string.  

Fri Sep 24 23:38:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Do the similar thing with VALUE_TO_JSVAL* - group all the local
	variables into the (enum prop_enum) union.  

Fri Sep 24 23:33:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Convert the JSVAL_TO_VALUE* macros to use {union jsval_union}
	instead of a bunch of variables.  

Fri Sep 24 23:24:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Get actual support for JSPT_BOOLEAN and JSPT_OBJECT so that we
	compile again :).  

Fri Sep 24 23:19:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Give the window object few properties - closed, document, location,
	self, top and window.  

Fri Sep 24 22:53:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	@global_class -> @window_class and the literal name renamed to
	"window" too. @global_obj -> @window_obj.  

Fri Sep 24 22:43:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	And process_snippets() even when retrieving the document from cache.
	This should fix the rest of problems with undefined values (the link
	in the inlinescript.html test).  

Fri Sep 24 22:35:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Preserve interpreter over rerenderings. Works most times, but not
	always.  

Fri Sep 24 22:23:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Untested support for prettyprinting the errors (if enough info is
	available).  

Fri Sep 24 22:12:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Move the static safeguard functions to the rest of static symbol
	definitions and drop the spidermonkey_ prefix there.  

Fri Sep 24 22:11:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Introduced error_reporter(), which is, well, an error reporter ;-).  

Fri Sep 24 21:45:45 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/inlinescript.html:

	nice_href() needs to be called as nice_href(0). I'd love to know
	why.  

Fri Sep 24 21:29:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	The private interpreter->doc_view is now property of global_obj
	instead of document_obj and location_obj (which look it up in their
	parent). The Blue Ones can already smell some window object traces.  

Fri Sep 24 21:23:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Return NULL in eval_stringback() if JSVAL_IS_VOID(). Fixes
	javascript:void(0); 

Fri Sep 24 21:21:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Fixed EcmaScriptless compilation as reported by zas.  

Fri Sep 24 20:47:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.h, src/ecmascript/spidermonkey.c,
	test/ecmascript/infinite.html:

	A safeguard function introduced, which kills the script after 5
	seconds of running. That has to be enough for anything.  

Fri Sep 24 20:34:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/ttime.h:

	Simplify the #ifdef maze.  

Fri Sep 24 20:24:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	...for the interpreter structure itself.  

Fri Sep 24 20:23:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	interpreter->doc_view was also made private of the both objects
	(document, location), and it's fetched from there now. We will need
	the context private...  

Fri Sep 24 20:18:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	FIXME about timer safeguards against CPU eaters. Pointer out by
	witekfl.  

Fri Sep 24 20:05:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Ok, now for the first process_snippets() call @doc_current was one
	entry ahead ;-). Hopefully calibrated well now.  

Fri Sep 24 19:54:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	process_snippets() @doc_view was two entries behind @*current when
	merging new snippets, taking ELinks down in flames at
	http://www.dr.dk/.  

Fri Sep 24 19:14:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed totally broken --> scanning in do_html_script().  

Fri Sep 24 19:01:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser/stack.c:

	It's ok when part->document is NULL - that means we are just
	'pre-rendering' stuff at a dry run (i.e. in the tables code to
	compute tables width), therefore we ignore onload_snippets gained in
	that way. Could fix few more crashes.  

Fri Sep 24 18:59:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/: navigator.c, node.c:

	Fix compile error when LEAK_DEBUG is disabled. Reported by witekfl.  

Fri Sep 24 18:50:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Enhanced scanning for </script> - don't at least get fooled by
	<script><\!--document.write('</script>');--></script>.  

Fri Sep 24 18:42:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Mention that rxvt supports 256 colors.  

Fri Sep 24 18:38:31 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Fri Sep 24 18:10:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Oops, forgot to :w before committing.  

Fri Sep 24 18:01:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS, configure.in, features.conf:

	Make HTML highlighting support official.  

Fri Sep 24 13:48:19 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/inlinescript.html:

	Some nice_href() fixes.  

Fri Sep 24 13:45:19 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/inlinescript.html:

	Oops, fix syntax errors in the code snippets ;-). So that's why the
	testcases didn't work! 

Fri Sep 24 13:07:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser/parse.c:

	Call do_html_script() only after we have an entry in the HTML stack.
	Otherwise it would be difficult to skip the contents if we weren't
	processing the element (and if we were processing it, it was broken
	until now because we were calling html_skip() on its parent).  

Fri Sep 24 12:58:40 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/inlinescript.html:

	Testcase for the inline <script> element.  

Fri Sep 24 12:54:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	In do_html_script(), skip all leading blanks, not just newlines.  

Fri Sep 24 12:43:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser.h, parser/parse.c:

	Support for inline <script> elements containing Javascript code.  

Fri Sep 24 12:28:03 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Sep 24 10:57:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Fix crash on tabloid pages with onLoad on body - when retreating
	from parse_html() reset html_context.part in case it was destroyed
	in the last iteration by a recursive parse_html() call.  

Fri Sep 24 10:54:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c,
	html/renderer.c:

	Don't add css_magic and css_imports member to {struct document} and
	related code when CONFIG_CSS=no.  

Fri Sep 24 10:47:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Fix crash for multiple process_snippets() calls - initialize
	@doc_current correctly if *current.  

Fri Sep 24 10:27:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	OnLoad games only if CONFIG_ECMASCRIPT.  

Fri Sep 24 02:53:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Out define DOM tree rendering code.  

Fri Sep 24 02:51:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Insert magic check that workaround a bug in the <html> CSS handling.
	Suggested by pasky.  

Fri Sep 24 02:34:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/dom/renderer.c:

	The actual source highlighting without some arcane default
	stylesheet tinkering. Jonas is lazy so it's up to me, therefore
	being impossibly dirty. But at least I get to choose the colors,
	which are vim-like now. Quotes and &; of entities should be
	highlighted too, though.  

Fri Sep 24 02:11:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/parser.h:

	Nitpicking variable renaming.  

Fri Sep 24 02:08:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, dom/renderer.c, dom/renderer.h,
	sgml/parser.c, sgml/parser.h:

	Pass the buffer so DOM rendering supports compressed documents.
	Pointed out by pasky.  

Fri Sep 24 01:52:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Fix those damn onLoad memleaks Jonas is bothering me with.  

Fri Sep 24 01:47:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Mention our onLoad-on-any-element extension.  

Fri Sep 24 01:46:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	kill_html_stack_item(): @onLoad -> @onload as req by Jonas.  

Fri Sep 24 01:45:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Fixed initial adding to the snippets queue in process_snippets().
	onLoad should work fine now.  

Fri Sep 24 01:44:32 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/onload.html:

	onLoad testcase.  

Fri Sep 24 01:43:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Oops.  

Fri Sep 24 01:41:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	@css_magic now takes the stylesheets' current length into account
	too, so that if the document is rendered and loading of stylesheets
	is yet in progress, the document will be still rerendered after the
	stylesheets make it. Reported by me, idea by Jonas.  

Fri Sep 24 01:37:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser/parse.c:

	<html> element now has its corresponding structure in the HTML stack
	since CSS can apply styles to it.  

Fri Sep 24 01:16:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/dom/renderer.c:

	Use the URI string as title for highlighted HTML source. Idea by
	pasky. ;) 

Fri Sep 24 00:59:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/sgml/scanner.c:

	Don't check quoting when skipping potential garbage inside of tags.  

Fri Sep 24 00:59:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/dialogs.c:

	Fixed bogus check in push_add_button() causing crash when there are
	no cookies. Reported by uroboros.  

Fri Sep 24 00:44:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/document/Makefile.am,
	src/document/renderer.c, src/document/dom/.cvsignore,
	src/document/dom/.vimrc, src/document/dom/Makefile.am,
	src/document/dom/navigator.c, src/document/dom/navigator.h,
	src/document/dom/node.c, src/document/dom/node.h,
	src/document/dom/renderer.c, src/document/dom/renderer.h,
	src/document/sgml/.cvsignore, src/document/sgml/.vimrc,
	src/document/sgml/Makefile.am, src/document/sgml/parser.c,
	src/document/sgml/parser.h, src/document/sgml/scanner.c,
	src/document/sgml/scanner.h, src/document/sgml/sgml.c,
	src/document/sgml/sgml.h, src/document/sgml/html/.cvsignore,
	src/document/sgml/html/.vimrc, src/document/sgml/html/Makefile.am,
	src/document/sgml/html/attribute.inc,
	src/document/sgml/html/element.inc, src/document/sgml/html/html.c,
	src/document/sgml/html/html.h, src/intl/charsets.c,
	src/intl/charsets.h:

	Import the DOM and SGML parser code from the ECMASCRIPT and use it
	for HTML source highlighting.  

Fri Sep 24 00:07:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Set doc_view->document as soon as we get it in render_document(), so
	that it's immediatelly available for ECMAScript chewing.  

Fri Sep 24 00:03:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/document.h,
	document/renderer.c, document/html/parser/stack.c, sched/session.c,
	viewer/text/vs.c, viewer/text/vs.h:

	A little wild support for the onLoad element hooks.  

Thu Sep 23 23:34:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	stat_size(): Increase the @size buffer, but only use it if the
	number is bigger than 8 chars.  

Thu Sep 23 23:17:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/draw.c:

	If draw_formatted()'s @rerender > 2, let render_document_frames()
	know.  

Thu Sep 23 22:18:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Remove unused local list head.  

Thu Sep 23 22:15:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	FTP URIs are now auto-encoded again. There is hopefully no harm to
	be done there, so why not...? Right? 

Thu Sep 23 22:14:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Oops, fixed prepending of schemes to URIs. Hopefully.  

Thu Sep 23 22:08:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Bug 358 revisited another time, now really encode the URI string
	only if we are prepending the file:// scheme to it, as described
	everywhere. This fixes non-working entering of URIs with query parts
	to the Goto URI box and supposedly on the commandline too. I don't
	want to know about the possible problems still associated with local
	CGIs. (Those people ought to use full URIs.) 

Thu Sep 23 19:36:51 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/selectors.html:

	'div,' selector looks like a good crash testcase. Borrowed from
	irc.mozilla.org/#developers ;). (Haha, it crashes for them...) 

Thu Sep 23 19:34:41 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	/usr/include/smjs as $spidermonkeydir makes no sense, try to check
	it as $spidermonkeyinclude instead and see who gets enraged.  

Thu Sep 23 19:31:31 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/protocol.html:

	Elaborate on the tests.  

Thu Sep 23 19:23:21 2004  Petr Baudis <pasky@ucw.cz>:

	* test/ecmascript/protocol.html:

	Each link in a single paragraph.  

Thu Sep 23 19:15:15 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* configure.in:

	PLD location for SpiderMonkey.  

Thu Sep 23 18:10:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Remove junk -I includes flags in SPIDERMONKEY_CFLAGS.  

Thu Sep 23 16:25:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	Do not eval() anything unless get_ecmascript_enable().  

Thu Sep 23 16:23:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/: ecmascript.c, ecmascript.h, spidermonkey.c,
	spidermonkey.h:

	ecmascript_eval() is like ..._eval_stringback() but gives back no
	string ;-).  

Thu Sep 23 16:14:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Looks like freshmeat and slashdot redirects away from www host. Hit
	them directly instead.  

Thu Sep 23 15:43:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/ecmascript/protocol.html:

	Grow with separate tests for javascrip: URIs.  

Thu Sep 23 15:40:33 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, viewer/text/form.c, viewer/text/link.c:

	A boolean option named document.browse.accesskey.display was added
	to enable display of access key in link info.  

Thu Sep 23 15:26:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/ecmascript.c:

	ecmascript_protocol_handler(): Tidy up.  

Thu Sep 23 15:25:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/: ecmascript.c, spidermonkey.c:

	Space fixes.  

Thu Sep 23 15:21:47 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Advertise ECMAScript.  

Thu Sep 23 15:04:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Use free_syntax strategy for javascript: URIs.  

Thu Sep 23 15:04:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ecmascript/ecmascript.c:

	Fix compilation.  

Thu Sep 23 14:55:47 2004  Petr Baudis <pasky@ucw.cz>:

	* test/: Makefile.am, ecmascript/protocol.html:

	Add a simple testcase for the javascript: protocol, document.title
	and document.url.  

Thu Sep 23 14:12:17 2004  Laurent Monin <zas@norz.org>:

	* doc/ecmascript.txt:

	Spidermonker compilation/installation documentation was improved.  

Thu Sep 23 14:05:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Basic support for the location object - just the 'href' property for
	now.  

Thu Sep 23 14:03:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/ecmascript.c:

	Use get_hooked_uri() instead of get_uri() in
	ecmascript_protocol_handler(), which munches it however weird could
	it be before.  

Thu Sep 23 13:56:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: ecmascript/ecmascript.c, ecmascript/ecmascript.h,
	protocol/protocol.c:

	Move code for the javascript: protocol handling to
	ecmascrip_protocol_handler().  

Thu Sep 23 13:51:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/ecmascript.txt:

	Sorry the rewrapping went a little crazy. Make it more clear what SM
	means ;) and try to rearrange section about compiling SM so it is
	clearer that it belong together.  

Thu Sep 23 13:39:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/ecmascript.txt:

	Insert section for people living on easy street with nice package
	systems that will do all the dirty work.  

Thu Sep 23 13:16:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add support for detecting existence of spidermonkey on debian
	systems.  

Thu Sep 23 13:12:04 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.c:

	Even more fix mmap() usage: some systems (HP/UX it seems) may not
	have MAP_ANON but MAP_ANONYMOUS, and no alias, so just handle that
	case.  

Thu Sep 23 12:42:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Guarding #includes should not be necessary ever unless it is system
	headers.  

Thu Sep 23 12:42:16 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Evangelize doc/small.txt in --enable-small description.  

Thu Sep 23 12:40:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Fix immediate crash when compiled with CONFIG_SMALL, reported by
	uroboros. act->desc was NULL and the dialogs code didn't cope well
	with that.  

Thu Sep 23 11:57:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Just get_uri(, 0) instead of get_uri(, URI_ORIGINAL) in the
	javascript protocol handler. The get_uri() function could use some
	real documentation :).  

Thu Sep 23 10:28:47 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/plain/renderer.c,
	protocol/gopher/gopher.c, protocol/nntp/nntp.c:

	Drop trailing spaces.  

Thu Sep 23 08:40:59 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	When lua_dofile() fails, sleep 3 seconds to let see Lua error
	message. Patch by Alexey Tourbin.  

Thu Sep 23 00:07:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: renderer.c, view.h, html/frames.c:

	(struct document_view) now references (struct session *) as the
	.session field. This will be enormously useful in the ECMAScript
	code, but should create space for more simplifications all over the
	map.  

Wed Sep 22 23:59:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Oops, fixed invalid usage of @uri instead of @redirect_uri. It of
	course took me a deep and dreadful into the ucs16-based SpiderMonkey
	parser to discover that. :/ 

Wed Sep 22 23:30:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	SpiderMonkey doesn't like uppercase property names - document.URL ->
	document.url.  

Wed Sep 22 23:21:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Oops, use JS_GetStringBytes() instead of JS_GetStringChars().  

Wed Sep 22 23:21:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Do not free() strings acquired by JS_GetStringChars(). Should fix
	those random crashes ;-).  

Wed Sep 22 23:14:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Pass "" filename instead of NULL to JS_EvaluateScript(). Who knows
	where it would crash again otherwise...  

Wed Sep 22 23:13:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Now the whole context has doc_view private data, instead of
	individual objects having various stuff (which might be empty at the
	time of get_interpreter() anyway, leading to fast and painful
	crash). This means entering 'javascript:document.title=1+1' to the
	Goto URL window (with some document loaded, of course) already works
	now! 

Wed Sep 22 22:32:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Capitalization fixes.  

Wed Sep 22 22:31:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Betrayal! NULL cannot be passed as the class hooks, stub hooks need
	to be used instead.  

Wed Sep 22 22:14:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Handle JS_NewObject() failures.  

Wed Sep 22 22:06:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	ecmascript_put_interpreter() in detach_formatted() only if we have
	any.  

Wed Sep 22 21:59:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.c:

	Oops, added @ecmascript_module to the list of builtin modules.  

Wed Sep 22 21:57:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: ecmascript/ecmascript.c, ecmascript/ecmascript.h,
	ecmascript/spidermonkey.c, ecmascript/spidermonkey.h,
	protocol/protocol.c:

	Introduced ecmascript_eval_stringback() and used it in the
	javascript: protocol handling - so that's the first point where we
	support real ECMAScript.  

Wed Sep 22 21:36:29 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/ecmascript.txt:

	Disclaimer ad other programs working with such an SpiderMonkey
	installation (we need to set the XP_ #define manually and other
	software probably won't bother).  

Wed Sep 22 21:21:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/spidermonkey.c:

	Some preliminary implementation of the document class, with the
	'title' and 'URL' properties. This also introduces the relevant
	infrastructure of macros and other code obfuscators.  

Wed Sep 22 19:11:51 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/ftp/ftp.c:

	Trying to fix displaying after resuming status.  

Wed Sep 22 17:01:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	get_http_code(): reduce code redundancy a bit.  

Wed Sep 22 16:17:23 2004  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, contrib/js-1.5-rc6a+elinks.patch, doc/ecmascript.txt:

	Added doc/ecmascript.txt and corresponding
	contrib/js-1.5-rc6a+elinks.patch, which should guide users through
	SpiderMonkey installation.  

Wed Sep 22 15:46:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Only check HTTP Status header field when handling CGI requests. It
	is not a standard field and breaks redirects when downloading from
	www.php.net reported by saviles. The check was introduced in 1.214
	one december night.  

Wed Sep 22 15:25:41 2004  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	~/.links -> ~/.elinks. Man, that file is dusty.  

Wed Sep 22 15:22:34 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/ecmascript/Makefile.am,
	src/ecmascript/ecmascript.c, src/ecmascript/njs.c,
	src/ecmascript/njs.h, src/ecmascript/spidermonkey.c,
	src/ecmascript/spidermonkey.h:

	Replaced njs ECMAScript backend by Mozilla SpiderMonkey backend. njs
	is much smaller but just sucks when you want to do anything with it,
	and isn't under active development. SpiderMonkey OTOH is not so easy
	to install.  

Wed Sep 22 12:28:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Location header is valid for status 201 too.  

Wed Sep 22 10:42:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/: ecmascript.c, njs.c:

	Oops, #include elinks.h. I *knew* I forgot something.  

Wed Sep 22 10:33:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/njs.c:

	Somehow implemented decodeURI, decodeURIComponent, encodeURI and
	encodeURIComponent global methods.  

Wed Sep 22 07:49:38 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Sep 21 22:37:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/document/renderer.c,
	src/document/view.h, src/document/html/frames.c,
	src/viewer/text/view.c:

	Cleanup the ecmascript build-system integration. Now a
	CONFIG_ECMASCRIPT is defined that can be used outside of the
	ecmascript directory.  

Tue Sep 21 22:11:39 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/document/renderer.c,
	src/document/view.h, src/document/html/frames.c,
	src/ecmascript/Makefile.am, src/ecmascript/ecmascript.c,
	src/ecmascript/ecmascript.h, src/ecmascript/njs.c,
	src/ecmascript/njs.h, src/viewer/text/view.c:

	Some basic stubby ECMAScript support, consisting of
	get_interpreter/put_interpreter and a njs backend of the similar
	scope; the interpreter is bound to {struct doc_view}. So it does
	nothing but taking up your memory so far, and surely breaking
	compilation on all systems but mine.  

Tue Sep 21 21:26:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ecmascript/: .cvsignore, .vimrc:

	Fairies.  

Tue Sep 21 21:24:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre1.CVS 

Tue Sep 21 21:18:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre1 

Tue Sep 21 21:15:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Update .po files.  

Tue Sep 21 21:13:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Tue Sep 21 20:54:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	And '*' is IDENT_START too.  

Tue Sep 21 20:52:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/selectors.html:

	Add test for selector containing *.  

Tue Sep 21 20:49:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Moved '*' from CSS_CHAR_TOKEN to CSS_CHAR_IDENT... because it may be
	an ident ;).  

Tue Sep 21 20:34:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	Hint regarding Grasping the selector tree - what the one dumped by
	CSS_DEBUG.  

Tue Sep 21 20:16:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Reorder the selector type checking so that it's now in the
	specificity order: '*', element name, pseudo-class, class, id.  

Tue Sep 21 20:15:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Try to support the '*' selector. Yes, I think it *could* be that
	simple.  

Tue Sep 21 20:10:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c:

	Make sure really all the root selectors have CSR_ROOT relation, and
	replace with that the 'relative relation' fix by Jonas. Jonas,
	please verify whether this fixes stuff.  

Tue Sep 21 20:09:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Change even the last WDBG() to DBG().  

Tue Sep 21 19:38:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	In find_css_selector() first compare integers, then strings.  

Tue Sep 21 19:15:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	A little unsure about this one. Don't use free syntax URI parsing
	for user protocols. It breaks mailto command invocation because both
	uri->userlen and uri->hostlen is zero. It might break some more
	exotic URIs defined by the user. Maybe free syntax should mean
	'increase error tolerance' when parsing.  

Tue Sep 21 18:23:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/stylesheet.c:

	Pasky is afk so lets take out the sledgehammer and bump an itchy
	corner.  It was introduced in '(find|get)_css_*selector() now takes
	an {enum css_selector_relation} argument ...' and caused .classes
	not to be matched. These CSS enhancements quickly get very
	addictive.  Now the relation is good if the value is <= than the
	selector->relation.  I have no clue if it is correct from a design
	point of view.  

Tue Sep 21 17:34:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/parser.c, css/parser.h,
	css/stylesheet.h, html/internal.h, html/parser.c,
	html/parser/link.c, html/parser/parse.c:

	Pass a base uri all they way down the CSS @import callchain. Fixes
	relative imports from imported stylesheets (example: redhat.com).  

Tue Sep 21 17:22:02 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Tue Sep 21 17:07:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	html_link(): Don't bail out when document.html.link_display is 0. We
	are still interested in checking if it is a CSS link. Reported by
	Witold.  

Tue Sep 21 16:49:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/apply.c, html/parser.h, html/parser/link.c:

	Support for link and visited CSS pseudo-classes. Don't expect more
	from me ;).  

Tue Sep 21 16:15:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Specificity matches are more specific than ancestor matches, so do
	them later.  

Tue Sep 21 16:15:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Apply CSS_PARENT after CSR_ANCESTOR, thus overriding it.  

Tue Sep 21 16:09:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.c, stylesheet.h:

	(find|get)_css_*selector() now takes an {enum css_selector_relation}
	argument (and honors it). This almost fixes the '>' combinator
	support.  

Tue Sep 21 16:03:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	'>' is now CHAR_TOKEN.  

Tue Sep 21 15:12:31 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/selectors.html:

	Use <span> instead of <i> to test ancestors. Also added 'div .foo'
	test and '>' combinator test (it doesn't work now ;).  

Tue Sep 21 15:03:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/apply.c, css/apply.h, html/parser.c,
	html/parser/parse.c:

	Support for HTML stack lookups (ancestor and parent combinators). It
	doesn't work 100% yet, it already has some visible effects
	nevertheless.  

Tue Sep 21 14:14:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix off by one errors in the <!-- and --> CSS scanning. Patch by
	pasky and me.  

Tue Sep 21 13:52:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	document.browse.forms.insert_mode is turned on by default now. It's
	a Good Thing (tm), raises usability, reduces complaints, makes
	people happy, and helps keep the world peace.  

Tue Sep 21 13:00:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed reparent_selector() blasting off selector pointed at by
	pkg->selector. (It still blasts it but corrects the pointer.) Fixes
	fm crash reported by zas.  

Tue Sep 21 12:43:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Applying to... WDBG() -> DBG().  

Tue Sep 21 12:42:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Recursive iterations of examine_element() keep all the same original
	@base now, avoiding corrupting the whole stylesheet when merging
	stuff together - now it all merges only to our temporary selector.
	This fixes i.e. http://cia.navi.cx/.  

Tue Sep 21 12:26:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Blast a forgotten argument.  

Tue Sep 21 12:26:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Dump at least list of property types along with the selector.  

Tue Sep 21 12:10:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed hopefully one of the last bugs - multiple selectors of the
	same name and type could appear in the stylesheet because of the
	@prev_element_selector reparenting-if-specificitier-but-last hack.
	Instead of simple add_to_list() introduced reparent_selector() which
	checks for twins in the list and if it finds one it instead
	ultra-merges the @prev_element_selector to it.  

Tue Sep 21 11:43:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Fixed fatal error in dump_css_selector_tree_iter() call ;-).  

Tue Sep 21 11:33:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Prettyprinting fixes.  

Tue Sep 21 11:02:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Compilation fixes.  

Tue Sep 21 11:00:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Introduced dump_css_selector_tree() which does precisely that, but
	it's around only #ifdef CSS_DEBUG.  

Tue Sep 21 10:00:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Fixed dbginfo().  

Tue Sep 21 09:58:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c:

	Commented out #define CSS_DEBUG added.  

Tue Sep 21 09:57:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Oops, forgot to add another message triggered in
	process_found_selector().  

Tue Sep 21 09:45:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c:

	Some debugging messages #ifdef CSS_DEBUG.  

Tue Sep 21 09:44:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Sep 21 09:41:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Of course I got it slightly wrong. In css_parse_selector() try to
	make the description of 'selector stack' variables less ambiguous
	and more confusing.  

Tue Sep 21 09:32:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Try to describe the most interesting variables in
	css_parse_selector() so it's all a little more confusing.  

Tue Sep 21 09:24:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	merge_css_selectors() in process_found_selector() before recursively
	calling examine_element() so that the more specific matches aren't
	overriden by the less specific ones later. But it's not like any
	improvement would be visible now over the current bugs ;-).  

Tue Sep 21 09:20:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Rant about how many memory can the format cache take in
	document.cache.format.size description.  

Tue Sep 21 08:34:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	If CST_SPECIFITY is marked as last_fragment, it means the last base
	fragment wasn't and we need to add it to the stylesheet now.  

Tue Sep 21 08:26:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	set_mem_comment(selector, name) in init_css_selector().  

Tue Sep 21 00:34:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed setting of @last_chained_selector.  

Tue Sep 21 00:30:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed another few memory leaks.  

Tue Sep 21 00:30:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed the condition for determining @selector_start.  

Tue Sep 21 00:21:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed completely nonsensical condition when repkg->selectoring.  

Tue Sep 21 00:12:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Oops - now pkg->selector (where the properties are bound) is the
	_most_ specific selector in the chain, not the about least one. So
	that's why some things had very strange styles applied.  

Tue Sep 21 00:08:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Some preliminary quick hack in the applier to handle applying of
	structured selectors (i.e. 'div.foo' or 'p#bar' or 'i#baz.quux').
	Note that HTML stack lookups ('i b' selectors) are still not
	supported.  

Tue Sep 21 00:03:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Now we finally correctly determine whether we are looking at 'p #x'
	or 'p#x' (through @selector_start) and therefore correctly set
	relations for potential specificitiers.  

Mon Sep 20 23:33:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Unify the @last_fragment cleanup code.  

Mon Sep 20 23:32:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Hopefully the last combined selectors fix: for 'div p#x', make sure
	the hierarchy becomes 'p -> #x -> div', not 'p -> (#x, div)'.  

Mon Sep 20 23:26:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Compilation fix.  

Mon Sep 20 23:23:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	In css_parse_selector() do not rely on pkg->selector anymore when
	referring to the previous selector but save it in @prev_*_selector
	variables persistent over the loop iterations. This enabled us to
	differentiate between @prev_specific_selector and
	@prev_element_selector and makes sure that when we combine i.e. 'p#x
	i', 'p' will be bound to 'i', not '#x'.  

Mon Sep 20 23:11:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fix the massive leaks for broken stylesheets breaking up in the
	middle of selectors.  

Mon Sep 20 23:01:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	assert() that we never slip to the next in-@pkg iteration when
	@last_fragment is set.  

Mon Sep 20 22:58:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed destroying of perfectly good selectors by brute-force
	reparenting fragments of combined ones (for 'p {x:y}' and 'p i
	{z:a}', first and second 'p' shared a single selector but then we
	reparented the selector behind 'i' and things broke).  

Mon Sep 20 22:56:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Reverted invalid 1.111.  

Mon Sep 20 22:56:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed css_parse_selector()'s wrong token memcpy() size.  

Mon Sep 20 22:54:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Fix get_css_base_selector() to grok complex expressions as
	@stylesheet.  

Mon Sep 20 22:48:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fix get_css_base_selector() to grok complex expressions as
	@stylesheet.  

Mon Sep 20 22:41:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Ok, we will need the late @element again, so it's reintroduced now,
	but under a different name @last_token.  

Mon Sep 20 22:31:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	get_css_base_selector() now handles NULL passed as @stylesheet.  

Mon Sep 20 22:28:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Eliminated @element in css_parse_selector(), which is now useless.
	Instead, we just move to the next token a little later now.  

Mon Sep 20 22:24:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Apply the style attribute content last, therefore overriding the
	stylesheet once again. Fixes test/css/cascading.html.  

Mon Sep 20 22:18:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed parsing of ID selectors, we now accept the fact that they
	contain the id string in the token itself, not as a successive
	TOKEN_IDENT token.  

Mon Sep 20 22:11:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Fix bad behaviour when we weren't sure whether a #string is a
	TOKEN_HEX_COLOR or TOKEN_HASH. Patch by Jonas (the idea and missing
	scan_css() fix) and me (the leading hex digits bugfix).  

Mon Sep 20 16:41:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Removed forgotten check for end of selector which prevented us from
	registering complex selectors.  

Mon Sep 20 16:22:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	In merge_css_selectors(), the new selector's properties now win over
	the original ones in case of a conflict.  

Mon Sep 20 15:59:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Sep 20 15:49:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	examine_element(): @altsel -> @selector 

Mon Sep 20 15:49:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	examine_element(): @selector -> @base 

Mon Sep 20 15:27:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	Spell fix.  

Mon Sep 20 12:41:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Also redraw the hierbox browser window when refreshing it. Bad
	behaviour intoduced in my fix for hierbox browser burying other
	dialog window below itself in bfu/hierbox.c v1.188. Spotted by
	Miciah.  

Mon Sep 20 10:02:06 2004  Laurent Monin <zas@norz.org>:

	* src/document/css/apply.c:

	Compilation fix. Pasky, please check it.  

Mon Sep 20 08:39:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Abstract an examine_element() code bit to a process_found_selector()
	macro.  

Mon Sep 20 08:37:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Hm, compilation fix.  

Mon Sep 20 08:36:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	examine_element() now takes the list of selectors where it should
	search.  

Mon Sep 20 08:29:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Separate stylesheet lookup from css_apply() to examine_element().  

Sun Sep 19 23:00:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	One of the really puzzling Jonas TODOs...  

Sun Sep 19 22:59:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Support for parsing and storing multi-fragment selectors - that
	means 'td.foo p#x>a:hover' should be supported now. Note the absence
	of 'support for applying'. It should be grasped ok but you won't see
	it in practice because the elements matching code is not there yet.  

Sun Sep 19 22:35:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Trivial reorganization in css_parse_selector().  

Sun Sep 19 22:33:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Tidyup the switch of css_parse_selector(). That hex color thing is
	annoying.  

Sun Sep 19 22:32:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Blast off a confusing comment in css_parse_selector().  

Sun Sep 19 22:32:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Try to get css_parse_selector() slightly more organized.  

Sun Sep 19 22:30:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Eliminate the monstrous switch (token->type) in
	css_parse_selector().  

Sun Sep 19 22:25:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Whew, blasted another stale TODO.  

Sun Sep 19 22:25:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	English fix.  

Sun Sep 19 22:11:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.h:

	Support for non-element selectors - ids, classes and pseudo-classes.
	Note that mixing them together (i.e. element and class or id and
	pseudo-class) is not supported yet. Anyway, this means perl sources
	on scripts.irssi.org are highlighted now and news.google.com is full
	of bright green dashes :^).  

Sun Sep 19 21:46:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	TODO about hash^Wbinary trees.  

Sun Sep 19 21:38:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.h:

	*_css_base_selector() now takes @type argument too.  

Sun Sep 19 21:33:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, stylesheet.c, stylesheet.h:

	Added @type argument to the basic *_css_selector() suite, defaulting
	to CSS_ELEMENT for *_base_css_selector().  

Sun Sep 19 21:28:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, stylesheet.c, stylesheet.h:

	Reverted back @element* -> @name*, find_css_selector_by_element() ->
	find_css_selector().  

Sun Sep 19 21:24:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.c, stylesheet.h:

	Convert find_css_selector_by_element(), get_css_selector() and
	init_css_selector() to just work on a list of selectors instead of
	{struct css_stylesheet}, making them more generic.  

Sun Sep 19 20:45:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Unify declaration style.  

Sun Sep 19 20:44:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Minor stylistical nitpicking.  

Sun Sep 19 20:38:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Adjust things to my 80 columns.  

Sun Sep 19 20:34:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Blasted css_selector.(element,id,class,pseudo) and introduced
	css_selector.name, now equivalent to .element. Things may look a
	little weird now but it will settle down as fast as the C2H5OH in my
	head.  

Sun Sep 19 19:28:20 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation update.  

Sun Sep 19 18:29:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	How I foresee implementing the selectors tree. Let's drink some wine
	now so mail me if you think it's a total bullshit.  

Sun Sep 19 17:38:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	Add Id tag.  

Sun Sep 19 17:35:23 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Miciah is too humble.  

Sun Sep 19 17:30:19 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Typo fixes.  

Sun Sep 19 17:24:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	The selector grammar description was rewritten, simplified, and made
	more flexible.  

Sun Sep 19 17:21:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Reduced another TODO.  

Sun Sep 19 11:40:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.c:

	Fix mmap() usage on FreeBSD filed as bug 501. Patch by Lewis
	Collard.  

Sun Sep 19 11:40:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Fix mmap() usage on FreeBSD. Patch by Lewis Collard.  

Sun Sep 19 09:56:02 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Boost my entry with various stuff so that I don't look as such a
	loser near zas and Jonas. ;-) 

Fri Sep 17 23:17:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Blasted two obsolete FIXMEs. Feels good.  

Fri Sep 17 23:03:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	s/name/element/ in argument list of all CSS selector functions.  

Fri Sep 17 23:01:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Tidyup. Living with 80 columns :-).  

Fri Sep 17 22:58:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, stylesheet.c, stylesheet.h:

	find_css_selector() -> find_css_selector_by_element(), arguments
	renamed appropriately.  

Fri Sep 17 17:21:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Mention support for specifying IP family as protocol postfix.  

Fri Sep 17 17:14:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Fix typo and reference the generated features.log.  

Fri Sep 17 13:08:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Only send the "ProxyAuthorization" HTTP header if really talking to
	a proxy.  Before it was sent always if protocol.http.proxy.user was
	defined.  
	
	Patch by Timo Lindfors. Updated by me.  

Fri Sep 17 12:23:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Fix bad reformatting introduced in fixing of untested translation
	update. Please test changes after updating translations by running
	make in po/.  

Fri Sep 17 12:14:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf:

	Disable finger support by default.  

Thu Sep 16 21:03:48 2004  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Fix typo in pl.po, preventing compilation.  

Thu Sep 16 19:52:33 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Thu Sep 16 00:32:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Fix probable off-by-one overflow in convert_string() non-callback
	usage. No clue how old it is nor whether it can be ever dangerous
	nor why didn't our debugger detect it.  

Wed Sep 15 23:45:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Call convert_string() @callback only if the buffer would be of
	non-zero length.  

Wed Sep 15 23:42:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.h:

	Document convert_string().  

Wed Sep 15 23:37:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/html/parser.c,
	document/html/renderer.c, document/html/parser/forms.c,
	document/html/parser/parse.c, document/plain/renderer.c,
	intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	Potentially fix the convert_string() call from HTML renderer
	duplicating the whole rendered document in memory (which can be
	_SLOW_ for big documents due to low granularity used in
	convert_string(), which is right for most of the other uses). Now it
	takes a @callback argument which is called instead of reallocations
	if non-NULL, convert_string() then always returning NULL.  

Wed Sep 15 14:55:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	set_vars(): Rewrap referrer code.  

Wed Sep 15 14:53:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	set_vars(): Switch in.  

Wed Sep 15 14:51:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	set_vars(): Make same referrer setting saner.  

Wed Sep 15 14:50:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	set_vars(): Rename optstr -> str and rewrap.  

Wed Sep 15 14:40:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Use add_long_to_string() when adding the IP family to the URI
	string.  

Wed Sep 15 10:13:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	add_document_line(): Move assertion of pos[-1].data which can
	potentially access out of bound. Most likely the cause is the plain
	text mark-up. Closes bug 498.  

Wed Sep 15 09:12:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	Sent referrer only when there is one.  

Wed Sep 15 08:27:05 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Sep 14 23:28:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Display Cache size in get_memory_info() if HAVE_MMAP as it isn't
	counted in the Allocated field.  

Tue Sep 14 23:09:28 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/cache/cache.c, src/cache/cache.h,
	src/util/memory.c, src/util/memory.h:

	Introduced mem_mmap_(alloc|free|realloc)() which covers mmap(),
	munmap() and potentially mremap() (and just reverts to the normal
	heap if the system doesn't provide mmap()). And we use this new
	allocator right away in the cache code for the cache fragments,
	which amounts some small overhead per cache entry but should prevent
	the infamous pathological cases where the ELinks gets fat to 50M and
	doesn't shrink even after a cache flush. Full rationale in a comment
	inside. It crashes surprisingly seldom so there must be some
	kickback. ;-) 

Tue Sep 14 22:31:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Abstracted out memory manipulation on fragments to
	frag_(alloc|realloc|free)().  

Tue Sep 14 20:58:51 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	Scripts with .cgi extension are not secure in multiuser environment.  

Tue Sep 14 20:56:36 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	Fix for bug 373. PATH_TRANSLATED does the trick.  

Tue Sep 14 20:24:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Handle URI parsing failures properly even with scripting support.  

Tue Sep 14 20:23:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	Fixed [ipv6addyURInotation] parsing.  

Tue Sep 14 20:05:07 2004  Petr Baudis <pasky@ucw.cz>:

	* features.conf:

	Slightly elaborated on CONFIG_IPV6.  

Tue Sep 14 19:48:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, lowlevel/connect.c, protocol/uri.c,
	protocol/uri.h:

	Added support for a 4/6 postfix to the protocol scheme (i.e.
	http4://, http6://).  

Tue Sep 14 17:14:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, lowlevel/connect.c:

	Introduced connection.try_ipv[46], which controls whether to use
	IPv4/IPv6 at runtime on a global basis.  

Tue Sep 14 17:10:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Move the (sin6|sin)_family logic from socket() call to setting a
	separate @family variable. Purpose will be clear soon.  

Tue Sep 14 07:23:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/gzip.c:

	Remove all the alternative versions of gzip_decode_buffer().  

Tue Sep 14 07:21:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/gzip.c:

	Implement gzip header skipping and switch to do all decoding in
	memory.  
	
	Thanks goes out to lindi- for digging into the problem where I gave
	up and for sstar for enlightening us both.  

Tue Sep 14 06:47:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/gzip.c:

	gzip_decode_buffer(): Like the bzip2 backend check stream.avail_in
	in the decoding loop condition.  

Tue Sep 14 06:46:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/gzip.c:

	gzip_decode_buffer(): Use Z_NO_FLUSH when calling inflate().  

Mon Sep 13 20:04:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/bzip2.c:

	bzip2_decode_buffer(): Check stream.avail_in > 0 in the loop
	condition. lindi- reported that it could cause an infinite loop.  

Mon Sep 13 15:27:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/data.c:

	Grammar and spelling fixes in the comment that Jonas just added.  

Mon Sep 13 14:16:57 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Sep 13 11:35:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Introduce VERTICAL_LISTBOX_MARGIN macro to make the height
	calculation less cryptic.  

Mon Sep 13 11:17:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/data.c:

	Add FIXME about redirecting.  

Mon Sep 13 01:11:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Fix chopping of junk after port string. Spotted by Miciah.  

Mon Sep 13 00:18:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/gopher/gopher.c:

	Revise the comment describing the gopher_entity_info table.  

Sun Sep 12 23:34:20 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/gopher/gopher.c:

	Indentation fixes.  

Sun Sep 12 22:03:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/gopher/gopher.c:

	Comment grammar fix.  

Sun Sep 12 21:12:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/gopher/gopher.c:

	Comment typo-fix: s/Otheriwse/Otherwise/ 

Sun Sep 12 20:59:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/gopher/gopher.c:

	Comment typo-fix: s/buf/but/ 

Sun Sep 12 20:24:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix a problem in the last patch whereby freed memory was used.  
	
	Thanks to Jonas for spotting the problem.  

Sun Sep 12 18:14:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	Move a semi-colon before a comment on the same line.  

Sun Sep 12 18:10:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Reformat a prototype.  

Sun Sep 12 18:09:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Close the clicked tab when one middle-clicks on the tab bar.  

Sun Sep 12 18:08:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	In really_close_tab, delete the tab for the given session without
	assuming that it is the current tab for the terminal.  

Sun Sep 12 18:03:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	De-localise local variable |tab|.  

Sun Sep 12 18:01:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Introduce local variable |term| to eliminate half a dozen
	occurrences of |ses->tab->term|.  

Sun Sep 12 17:55:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In send_mouse_event, rename local integer variable |tab| to
	|tab_num|.  

Sun Sep 12 12:12:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Out comment unportable check for numbers of characters in the
	English alphabet added in 1.422. Fixes bug 475 about breakage on
	OpenBSD and adamg also reported problems on pdksh.  

Sun Sep 12 11:12:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	open_bookmark_folder(): Open bookmark tabs in the order they have in
	the folder so it doesn't open in the reverse order half of the time.
	It matches 1.110 -> 1.111 that fixed session saving to bookmark tabs
	from left to right.  

Sun Sep 12 11:05:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix session auto restoring broken by my reorderings in
	init_session().  

Sun Sep 12 06:03:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Localise p.  

Sun Sep 12 06:02:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In mainmenu_mouse_handler, use the constant L_MAINMENU_SPACE instead
	of the local variable p, which is initialised to the same, when
	checking whether the user clicked on the left scroll spot.  

Sun Sep 12 04:14:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In menu_mouse_handler, eliminate some code duplication with the aid
	of a fall-thru.  

Sun Sep 12 04:09:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Delete a comment rendered inaccurate by revision 1.162, where
	menu_mouse_handler was split from menu_handler.  

Sun Sep 12 04:02:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Re-indent, with the aid of continue.  

Sun Sep 12 03:56:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Rename nbox to box.  

Sun Sep 12 03:54:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Eliminate box.  

Sun Sep 12 03:52:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Introduce the local variable menu_height, assign it the value of
	nbox.height before assigning nbox.height = 1, and use menu_height 
	instead of box.height.  

Sun Sep 12 03:49:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Copy box to nbox sooner and pass nbox instead of box to draw_box and
	draw_border.  

Sun Sep 12 03:43:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Use .x and .width of nbox rather than those of box as those members 
	are the same.  

Sun Sep 12 03:34:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Move the assignment |nbox.height = 1| outside of the loop.  

Sun Sep 12 03:31:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In display_menu, delete the local variable y; instead, use nbox.y, 
	which we were already keeping in sync with y.  

Sun Sep 12 02:56:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	In input_line_event_handler, when the input line's handler returns
	INPUT_LINE_REWIND, after rewinding, call the handler again.  
	
	Now, when one starts type-ahead searching, enters a matching
	pattern, and then enters a character that yields a non-matching
	pattern causing type-ahead searching to rewind, the highlighting for
	matched text is restored, and the tab key will cycle thru matches
	instead of trying to search for the non-matching pattern again.  

Sun Sep 12 02:34:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Add a blank line before a return statement.  

Sun Sep 12 02:34:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Unwrap a line.  

Sun Sep 12 02:33:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Use the ternary operater instead of an if-else statement in
	mouse_listbox.  

Sun Sep 12 02:30:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	In mouse_listbox, remove a check whether the event is button-up or
	button-down: it is always either one or the other.  
	
	Patch by Jonas.  

Sun Sep 12 02:27:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Missing part from last patch: 
	
	In frame_ev_mouse, call do_not_ignore_next_mouse_event for left- or
	middle-button down, and call link_menu for both right-button up and
	right-button down.  

Sun Sep 12 00:38:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/menu.c, terminal/event.c,
	terminal/terminal.h:

	Introduce new member to struct terminal, struct term_event_mouse
	prev_mouse_event.  
	
	Introduce new macro do_not_ignore_next_mouse_event, which clears it.  
	
	Introduce new routine ignore_mouse_event, used by
	handle_interlink_event to ignore mouse-button up following
	mouse-button down when the button and y co-ordinate are the same
	between both events.  
	
	In mouse_checkbox and mouse_button, call
	do_not_ignore_next_mouse_event, so that after a mouse-button down
	(to select the item), mouse-button up (to activate it) will not be
	ignored.  
	
	Idea and code by Jonas and me.  

Sat Sep 11 22:52:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Mention ui.colors.color.tabs.unvisited, added in 0.9.1.  

Sat Sep 11 22:41:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	ELinks-now: Plain-text mark-up support. Noted by Jonas.  

Sat Sep 11 22:39:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Mention add-bookmark-tabs (bookmark all tabs) option and menu item,
	added in 0.9.1.  

Sat Sep 11 22:34:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Mention folding of multiple successive blank lines, added in
	ELinks-0.9.1.  

Sat Sep 11 22:30:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Move automatic session-saving/restoring from ELinks-now to
	ELinks-0.9.1.  

Sat Sep 11 22:22:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Mention beginning-of-buffer and end-of-buffer actions under
	ELinks-0.9.1.  

Sat Sep 11 22:07:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Add a section for ELinks-0.9.1, and add thereunder an entry for
	<object> support.  

Sat Sep 11 22:01:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Add an entry for the 'unset' configuration directive, added in
	0.9.2.  

Sat Sep 11 21:56:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Move 'directional links navigation' entry from ELinks-now to a new
	section, ELinks-0.9.2. Altho the features was developed on HEAD, it
	has been backported, and the first stable release with it is 0.9.2.  

Sat Sep 11 21:54:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* NEWS:

	Tweak and clarify some entries for ELinks-now.  

Sat Sep 11 20:39:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Sat Sep 11 18:02:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre0.CVS 

Sat Sep 11 17:30:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	0.10pre0 

Sat Sep 11 17:19:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	The big po sync.  

Sat Sep 11 17:10:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree. Heh now the default System codepage
	values is visible.  

Sat Sep 11 17:09:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Make the mime.handlers description less passive and format it so
	that it does not break elinks.conf.5 updating.  

Sat Sep 11 16:50:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	update_hierbox_browser() Fix refreshing of hierbox browsers buried
	under other dialogs by using redraw_from_window() instead of only
	display_dlg_item().  
	
	To trigger: open one elinks, open bookmark manager, open a bookmark
	edit dialog, start second elinks, quit second elinks, first elinks
	has bookmark manager refresh on top of edit dialog.  

Sat Sep 11 16:37:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Gopher links.  

Sat Sep 11 16:31:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	One could get the impression we actually did implement that RFC.  

Sat Sep 11 13:55:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	A highly questionable patch to align the table caption correctly. It
	was triggered by <http://freshmeat.net/articles/view/1279/> table
	caption nested in a table that would cause the caption to be
	positioned according to the nesting table cell. Or so it seems.  

Sat Sep 11 05:36:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	Give field_ops an explicit NULL |select| callback.  

Sat Sep 11 04:42:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/intl/charsets.c:

	Fix a copy-and-paste error.  
	
	CCMAIL:witekfl@poczta.gazeta.pl 

Sat Sep 11 04:39:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/intl/charsets.c:

	Take off the flag in cp2utf_8 as well, per Jonas' suggestion.  
	
	_Really_ do it in u2cp_ (I had deleted that line for testing in the
	middle of committing the patch -- oops).  
	
	CCMAIL:witekfl@poczta.gazeta.pl 

Sat Sep 11 04:32:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/intl/charsets.c:

	In u2cp_, strip SYSTEM_CHARSET_FLAG from |to|, which is used to
	index the codepages array.  
	
	This fixes a bug that caused ELinks to crash on any page containing
	HTML entities that are represented by characters that are beyond
	lower ASCII.  The bug was introduced in revision 1.96, 'Fix for bug
	494 - System charsets.' 
	
	CCMAIL:witekfl@poczta.gazeta.pl 

Fri Sep 10 16:13:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Back out 1.580 -> 1.581. It is only part of the intended change.
	FIXME added to lure possible developers to do the remaining work.
	This should make it up for Sergeys patch posted today
	<Pine.LNX.4.61.0409101611300.1601@tigris.sai.msu.ru> and fix bug
	493. Plus it should bring us one step closer to release usable
	1.0pre0.  

Thu Sep  9 10:13:13 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/intl/charsets.c:

	Fix for bug 494 - System charsets.  

Thu Sep  9 10:05:55 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Tue Sep  7 10:47:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix bug 496 involving memory leaks when handling HTTPS proxy
	connections.  

Tue Sep  7 10:41:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	The reordering of session status updating _also_ has benefits when
	dealing with big documents. Important clarity by Miciah.  

Sat Sep  4 12:34:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Add smart prefix 'fsd' for searching the Free Software Directory.  

Sat Sep  4 11:31:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Fix potentially dangerous printf(gettext()) usage to printf(%s,
	gettext()). They caused the gettextized string to be marked with
	c-format.  

Sat Sep  4 11:19:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bookmarks/backend/xbel.c, config/cmdline.c,
	intl/gettext/libintl.h, lowlevel/home.c, lowlevel/interlink.c,
	lowlevel/select.c, mime/backend/mailcap.c, terminal/kbd.c,
	viewer/dump/dump.c:

	Revert G_() abbreviation introduction and always use gettext().
	Apparently xgettext cannot recognize them. Hopefully some of the
	translated messages has not been lost.  

Sat Sep  4 11:08:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Temporary fix for pl.po update. Either something got lost or it
	should be ok to remove ending \n reported by msgfmt.  

Sat Sep  4 10:53:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Update of polish translations. Patch by Adam Golebiowski
	<adamg@pld-linux.org>.  

Fri Sep  3 19:45:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Revert the down prioritizing of the content type info from the
	protocol header. It looks like the decoding buffer support will
	magically be handled by the rendering if it is needed. Reported by
	Felix on elinks-dev.  

Fri Sep  3 16:09:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	The error handling in the IDN support is not particularly good so
	fall back to just add the host unprepared.  

Fri Sep  3 15:35:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Mention usage of automake conditionals and -verbose option.  

Fri Sep  3 11:20:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	Improve handling of <object> element.  

Fri Sep  3 11:19:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_extension_content_type(): Assert that the extension is useful.  

Fri Sep  3 11:17:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	Fix crash when the <embed> src attribute is empty and a content type
	lookup is performed. Reported by pasky.  

Fri Sep  3 02:31:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Update polish translator authors adding adamg and mikmach.  

Fri Sep  3 02:14:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/dialogs/info.c:

	Change maintainer. Climb mount Ego and plant my flag in the copying
	dialog.  

Fri Sep  3 02:10:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	check_uri_file(): Fix restoring of NUL'ed out char. Introduced in my
	fix for always checking the 3 URI component delimiter chars.  

Thu Sep  2 15:50:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Print that the feature summary is available in the features.log
	file.  

Thu Sep  2 15:34:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Elaborate and add modal text-input form-field editing and goper and
	NNTP protocol support.  

Thu Sep  2 14:42:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	s/feature.conf/features.conf/ 

Mon Aug 30 03:08:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Oops, missing part of previous patch.  

Mon Aug 30 03:08:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Space.  

Mon Aug 30 03:06:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Don't just check special chars in the URI file name the first time
	and fix signed -> unsigned int triggered bug in file URI parsing.  

Sat Aug 28 16:23:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Related to bug 297: Big memory leak, ELinks doesn't free memory on
	cache flush atleast this was discovered while debugging that bug.  
	
	When initializing a session in init_session() update the session
	status info _before_ opening the requested URI. Reduces the memory
	usage quite a bit from looking at top.  

Sat Aug 28 14:58:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Remove global @format_cache_entries and the hazzle with keeping it
	in sync. It is not even used when returning document cache info and
	we are iterating all entries in shrink_format_cache() (only real
	user) anyway so count it there.  

Sat Aug 28 14:23:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Make {struct uri} length members unsigned int.  

Sat Aug 28 02:52:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Boolean members should always have unsigned int type.  

Mon Aug 23 17:22:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Renumerate.  

Mon Aug 23 17:15:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/http/http.c,
	sched/connection.h, sched/error.c:

	Try to simplify connection states by making S_SSL_ERROR be
	equivalent to S_NO_SSL when CONFIG_SSL is not defined.  

Mon Aug 23 17:04:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Remove obsolete S_NO_FINGER and S_NO_SMB states.  

Mon Aug 23 17:03:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, sched/error.c:

	generic_external_protocol_handler(): Handle 'This version of ELinks
	does not contain X protocol support' in the default case. Also
	genericly handle no-SSL reporting. Should fix missing error messages
	for optional data, gopher and nntp protocols.  

Mon Aug 23 02:52:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/data.c:

	Make that atleast 3 chars in the data protocol mediatype.  

Mon Aug 23 02:50:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/data.c:

	Improve data protocol mediatype and base64 attribute checking.  

Mon Aug 23 02:37:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/data.c:

	Rename parse_data_uri_type() to parse_data_protocol_header().  

Mon Aug 23 00:29:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	Delete a comment that refers to protocol external-handlers, which
	were removed in revision 1.47.  

Mon Aug 23 00:20:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/connection.c:

	Fix a typo in a comment: s/managment/management/ 

Sun Aug 22 15:17:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Aug 22 15:14:33 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Typo fix: reguler -> regular.  

Sun Aug 22 14:31:06 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/data.c:

	Fix compilation issue, @type needs to be initialized.  

Sun Aug 22 00:54:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Fix (1.65->1.66) by using integer type for @start and @end since 0
	<= -1 for enum values.  

Sat Aug 21 21:51:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	In process_link, use a switch instead of an if-else and assertion.  

Sat Aug 21 21:47:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	In process_link, should link_state be neither LINK_STATE_NEW nor
	LINK_STATE_SAME, thereby triggering an assertion, provide a recovery
	path by returning if_assert_fails.  

Sat Aug 21 21:38:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Wrap a line.  

Sat Aug 21 21:11:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/uri.c:

	Rewrap two lines.  

Sat Aug 21 16:55:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	get_protocol(): Use almost binary searching. Checking HTTP entry
	first.  

Sat Aug 21 15:59:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Alphabetize protocol backends.  

Sat Aug 21 15:16:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/generic.h:

	Wrap <stddef.h> #include in HAVE_STDDEF_H.  

Sat Aug 21 14:57:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove unused #include.  

Fri Aug 20 23:46:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser/parse.c, formhist/formhist.c,
	sched/connection.c:

	Clean up block trailing semicolons.  

Fri Aug 20 21:41:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Fix starting of multiple document refresh timers. Reported by pasky
	when he was throwing hand signs at transport tycoon forum (the URI
	is in the comment).  

Fri Aug 20 21:28:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Remove trailing semicolons.  

Fri Aug 20 21:28:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Use foreachsafe().  

Fri Aug 20 15:51:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Attempt to fix bug 479 by never updating @last_link_to_move and
	@last_tag_to_move beyond the current line. For some scenarios it
	might be a bad assumption but at least all it does is decrease the
	gain that this position updating optimization provides.  

Fri Aug 20 15:19:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	move_links(): Use while (list_has_next(tags, tag)) looping.  

Fri Aug 20 14:22:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	move_links(): Tidyup.  

Fri Aug 20 04:05:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Parse user and custom protocols using free_syntax. I think Miciah
	mentioned it a few months ago. Fixes an assertion error in
	check_uri_sanity() with 'entering' mailto links in binary files.  

Fri Aug 20 04:02:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	check_uri_sanity(): Print the URI in the error message.  

Fri Aug 20 03:43:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix email address checking so there is stuff on both sides of the
	'@'-sign.  

Thu Aug 19 20:57:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/vs.h:

	Boolean members should always have unsigned int type.  

Thu Aug 19 14:11:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf, src/protocol/gopher/gopher.c,
	src/sched/connection.h, src/sched/error.c:

	Make it more clear that the CSO phone-book protocol is non-existent
	both at compile- and runtime.  

Thu Aug 19 10:32:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Partially revert revision 1.315 and abort the download in
	download_data_store if |term| is NULL (before 1.315, it was checking
	whether |ses| was NULL).  

Thu Aug 19 10:24:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Add an #include for util/lists.h 

Thu Aug 19 10:23:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Use foreachsafe in destroy_downloads.  

Thu Aug 19 10:04:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In destroy_downloads, when we find a session with the same terminal
	as that of the passed session, assign the found session to the |ses|
	member of the file downloads of passed session to avoid dangling
	pointers.  

Thu Aug 19 10:02:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In destroy_downloads, in the loop that searches for a session with
	the same terminal as that of the one for which we are deleting file
	downloads, replace the if-continue with if-continue-else-return with
	an inverted condition.  

Thu Aug 19 09:58:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In destroy_downloads, which deletes a session's file downloads, when
	we skip deletion of file download because it has a NULL |prog|, 
	assign its |ses| member NULL to avoid a dangling pointer.  

Thu Aug 19 09:44:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In download_data_store, assert |term| and |ses| instead of silently
	aborting when |ses| is NULL.  

Thu Aug 19 09:41:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Use |file_download->term| instead of |ses->tab->term| with |ses|
	obtained from |file_download->ses|.  

Thu Aug 19 09:35:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Delete get_download_ses() and instead use |file_download->ses|.  

Thu Aug 19 09:30:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	In download_data_store, pass |ses| to |msg_box| instead of passing 
	|get_download_ses(file_download)|, which is already assigned to
	|ses|.  

Thu Aug 19 08:58:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, delete the local variable |last_link_end|, 
	which has been unused since revision 1.128.  

Thu Aug 19 08:52:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Fix an overflow in the back-space code: If one has seventeen spaces 
	(number chosen to avoid memory-alignment from obscuring the problem) 
	followed by a back-space, we print seventeen characters to the
	screen before we back-space the last one. The solution is to include 
	the deleted characters in counting how much memory to allocate for
	the line.  
	
	The overflow was found by Jonas Fonseca in a test-case provided by
	AprilDL when reporting another problem.  

Thu Aug 19 08:12:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Delete a blank line.  

Thu Aug 19 08:12:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Rewrap.  

Thu Aug 19 08:08:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/: renderer.c, renderer.c:

	If-splice.  

Thu Aug 19 08:01:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Similar change to the code that counts how much memory to allocate
	for the line.  

Thu Aug 19 07:53:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Do not expand tabs that precede back-space characters.  Now, the
	back-space code will back-space the proper amount: one space, just
	as for any other character.  

Thu Aug 19 07:43:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Use |next_char| in the linkifying code.  

Thu Aug 19 07:41:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Move |next_char| and |prev_char| out of the back-space code to the
	containing loop.  

Thu Aug 19 07:30:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	s/ $// 

Thu Aug 19 07:29:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Eliminate |saved_char| as |prev_char| supersedes it.  

Thu Aug 19 07:27:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Assign |next_char| '\0' if |line[line_pos + 1]| is out of bounds.  

Thu Aug 19 07:24:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In the code in add_document_line to handle backspace characters, 
	introduce the local variables |next_char| and |prev_char| and use
	them instead of subscripting |line|.  

Thu Aug 19 07:16:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Delete a blank line that should have disappeared along with some
	other code in revision 1.132.  

Thu Aug 19 07:12:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, check whether |expanded + line_pos| is
	non-zero rather than maintaining a count of backspaces and checking 
	whether it doubled is less than |line_pos|.  
	
	This will affect the current quirky behaviour on tabs followed by
	backspaces: Now, we will avoid backspacing beyond the start of the
	expanded line rather than beyond the start of the line as counted in
	characters.  I intend eventually to improve backspace handling so
	that a backspace that immediately follows a tab will backspace the
	whole tab in the first place.  

Thu Aug 19 06:58:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_link, substitute a conditional decrement and an
	unconditional decrement for a conditional decrement-by-two or
	decrement.  

Thu Aug 19 05:26:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	At Jonas' behest, revert revision 1.124 by re-introducing in
	print_document_link the local variable |x|, but change the name to
	|screen_column| to better explain the significance of its value.  

Wed Aug 18 21:19:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Lowercase the extension always so .JPG gets
	treated as .jpg .. it is stupid to have to add two entries for this
	thing. Mostly old files use uppercase anyway (gopher triggered the
	issue for me).  

Wed Aug 18 20:40:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	add_gopher_menu_line(): Try to eliminate unneeded default gopher
	port number from links.  

Wed Aug 18 20:02:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, protocol/file/file.c,
	sched/connection.h, sched/error.c:

	When loading encoded files that are corrupt read_file() would end up 
	retuning -errno == 0 (which is used for S_WAIT). This patch
	introduces S_ENCODE_ERROR with the purpose of propagating an error
	message to the user. I hope this qualifies as a fix for the FIXME.  

Wed Aug 18 19:49:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Fix CONFIG_BZIP2 check.  

Wed Aug 18 19:24:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/gzip.c:

	gzip_decode_buffer(): Fix encoding stream leak.  

Wed Aug 18 18:27:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	read_gopher_response_data(): if rb->close == 2 add any additional
	data to the cache entry before shutting down the connection.  

Wed Aug 18 18:11:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Alphabetize gopher_entity_info[] entries.  

Wed Aug 18 18:09:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Now all cso stubs uses S_UNKNOWN_PROTOCOL.  

Wed Aug 18 18:07:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	gopher_protocol_handler(): Out comment the finger redirect detection
	code.  

Wed Aug 18 17:43:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Remove dummy cso_protocol_handler().  

Wed Aug 18 17:42:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	add_gopher_menu_line(): If no selector is defined just diplay the
	name text.  

Wed Aug 18 17:37:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Fix init_gopher_index_cache_entry() and free(NULL).  

Wed Aug 18 17:30:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/gopher.c:

	Clarify why @port is checked.  

Wed Aug 18 17:24:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/config/options.inc,
	src/protocol/Makefile.am, src/protocol/protocol.c,
	src/protocol/protocol.h, src/protocol/gopher/Makefile.am,
	src/protocol/gopher/gopher.c, src/protocol/gopher/gopher.h:

	Experimental gopher support ported from Lynx. No CSO for now.  

Wed Aug 18 17:20:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/gopher/: .cvsignore, .vimrc:

	m77p.  

Wed Aug 18 14:12:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Fix building with marks disabled. This and previous error was
	reported by lindi- 

Wed Aug 18 14:11:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/data.h:

	Conditionally declare the data_protocol_handler.  

Tue Aug 17 13:39:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/nntp/connection.h:

	Cleanup #include and protocol handler declaring.  

Tue Aug 17 13:38:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Alphabetize. Why should intl get special treatment.  

Tue Aug 17 08:05:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/menu.c, document/html/parser.c:

	Put spaces after type casts.  

Tue Aug 17 08:03:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/button.c, ssl/ssl.c, cookies/cookies.c,
	modules/module.h, document/plain/renderer.c:

	Move end-of-line comments after the semicolons of the statements
	that they follow.  

Tue Aug 17 07:54:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Rather than checking whether the current and the previous characters 
	are alphabetic and backing up if so when linkifying, check whether 
	the curent and the next character are alphabetic. This localises the
	optimisation and makes it trivial to change the code to check for, 
	say, three or four alphabetic characters in a row.  

Tue Aug 17 07:47:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Initialise |was_alpha_char| outside of the loop in add_document_line 
	to fix the optimisation that I broke in 1.114.  

Tue Aug 17 07:40:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Spiff up the comment describing when we check for a URI.  

Tue Aug 17 07:19:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Color links.  

Tue Aug 17 07:16:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Put the characters to the screen from within print_document_link 
	rather than from within add_document_link.  

Tue Aug 17 07:09:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Pass print_document_link the renderer instead of the document, which
	it now obtains from the renderer.  

Tue Aug 17 06:59:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In print_document_link, inverse the if condition and swap its return
	statement with the following one.  

Tue Aug 17 06:57:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In print_document_link, introduce the local variable |link_end|.  

Tue Aug 17 06:55:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In print_document_link, drop the local variable |x| and substitute 
	the expression previously assigned to it in the one place we used
	it.  

Tue Aug 17 06:52:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	We only check for a link when the current character is alphabetic 
	and the last character was alphabetic or we are at the beginning of
	the line; if we are not at the beginning of the line, we must back
	up and linkify the character before the current.  
	
	Back up in add_document_link instead of in print_document_link.  

Tue Aug 17 06:44:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Unwrap lines in print_document_link.  

Tue Aug 17 06:43:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Move linkifying code from add_document_line to new
	print_document_link.  

Tue Aug 17 04:54:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Add some missing #include directives: termina/color.h, for enum
	color_flags, enum color_mode, and set_term_color; 
	document/options.h, for struct document_options and global_doc_opts;
	and util/color.h, for color_t, struct color_pair, and
	INIT_COLOR_PAIR().  

Tue Aug 17 04:45:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, save the whole |renderer->template| rather
	than merely its |attr| member.  

Mon Aug 16 18:04:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/nntp/: .cvsignore, .vimrc:

	m33p 

Mon Aug 16 17:03:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/window.c:

	delete_window_ev(): Fix triggering of the assertion in tabwin_func
	that it is only called for current tab and the event is from
	keyboard or mouse.  
	
	Reproducable when openning two tabs, switching back to the first
	one, opening the tab menu and then clicking on the tab area with the
	mouse.  

Mon Aug 16 13:49:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	check_link_word(): Ensure there is <user> before @ in mailto checks.  

Mon Aug 16 12:26:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Splice two if-blocks together.  

Mon Aug 16 12:20:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	No need to set @was_alpha_char if is already set.  

Mon Aug 16 11:05:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Rewrap some lines.  

Mon Aug 16 11:03:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, linkify in the second loop, when we're drawing 
	the text to the screen, rather than in the first loop, when we're 
	determining the line's width. This change requires the elimination 
	of that great chunk of code duplication, '[a] little code redundancy 
	to improve performance' from zas. Will he complain? 

Mon Aug 16 10:27:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, always set |was_alpha_char = 0| for the
	backspace character.  

Mon Aug 16 10:14:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Revert an unrelated change that snuck in with the last patch.  

Mon Aug 16 10:11:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Allow ASCII mark-up: x^Hx for a bold 'x' and _^Hx or x^H_ for an
	underlined 'x'; combinations are supported.  

Mon Aug 16 10:09:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Properly handle backspaces.  

Mon Aug 16 01:05:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Try to more correct get the content type by not
	always trusting the cache header content type when the resource has
	signs of being encoded. This might break things a bit but now
	.html.gz should work from any webserver --dump'ing or not. Atleast
	now gzipped patches can be viewed without scripting.  

Mon Aug 16 01:02:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c, html/renderer.h,
	plain/renderer.c, plain/renderer.h:

	Add support for rendering encoded documents (from cache).  

Mon Aug 16 00:59:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/: bzip2.c, encoding.c, encoding.h, gzip.c:

	Upgrade the encoding module with a decoding buffer routine. That
	gzip thing went out of proportions since I had to probe three times
	to find a working solution (and what an ugly one it is). The
	discarded probes (in order of 'cleanest design') has been out
	commented. Please somebody check if I made some mistake there.  

Mon Aug 16 00:34:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_cache_header_content_type(): Reformat.  

Mon Aug 16 00:33:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Split out cache header checking to
	get_cache_header_content_type().  

Sun Aug 15 16:35:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/de.po:

	German translation update by Thomas Fuchs <antispam17@gmx.de>.  

Sun Aug 15 15:44:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	init_remote_session(): When SES_REMOTE_CURRENT_TAB is masked out and
	no other flags are defined OR in the SES_REMOTE_NEW_TAB flag. The
	alternative fix is to always mask in this flag when ORing
	SES_REMOTE_CURRENT_TAB (don't know which one is cleaner).
	Reproducable when passing '-remote openURL(...)'. Reported by Thomas
	Fuchs <tfox@gmx.de>.  

Sun Aug 15 11:56:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In do_delete_item, drop the |delete| parameter and related bad
	logic, which were introduced (replacing logic that was merely
	twisted) in revision 1.114 to force recursive deletion of all
	children The one call to do_delete_item with a non-zero argument for
	the |delete| parameter was deleted in revision 1.180, which moved
	responsibility for child-deletion to the listbox delete operator.  

Sun Aug 15 11:52:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/search.c,
	viewer/text/search.h, viewer/text/view.c, viewer/text/view.h:

	Make frame_action handlers return {enum frame_event_status}.  

Sun Aug 15 10:06:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In menu_mouse_handler, when handling a right-click event outside the
	menu, forward the event. Now, when one left-clicks the main menu-bar
	or right-clicks the document canvas or a link, the new menu opens on
	mouse-down.  

Sun Aug 15 09:54:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	When clicking a listbox item, select it on mouse-button down as well
	as up.  

Sun Aug 15 09:53:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	When right-clicking a link, open the link menu on mouse-button down 
	as well as on mouse-button up.  

Sun Aug 15 08:28:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	In display_status_bar, move the local variable last_current_link to
	the block in which it is used.  

Sun Aug 15 08:23:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/status.c, viewer/text/view.c:

	display_status_bar: Print a relevant message if the user has pressed 
	mark-goto, mark-set, or a numeric prefix.  
	
	send_to_frame: Call print_screen_status if we aren't calling
	refresh_view.  

Sun Aug 15 07:54:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	try_jump_to_link_number: Swap the return values so that now it
	returns 0 if an invalid number was given, 1 otherwise.  

Sun Aug 15 07:38:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In text_typeahead_handler, do not report failure to compile a
	regular expression and do not rewind on such an error.  
	
	This allows one to enter regular expressions without the handler 
	deleting characters when it tries and fails to compile the partial 
	regular-expression in the middle of the user typing it.  

Sun Aug 15 07:32:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Don't report an error when the user presses search-toggle-regex and
	we can't find the pattern under the new mode. It isn't too nifty, 
	and the change eases my next patch.  

Sun Aug 15 07:15:33 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	enum find_error: Add FIND_ERROR_MEMORY and FIND_ERROR_REGEX.  
	
	print_find_error: Print an appropriate message for FIND_ERROR_REGEX, 
	indicating a compilation failure for the regular expression.  Do not
	print anything for FIND_ERROR_MEMORY as a message box will take
	memory.  
	
	find_next_do: Return FIND_ERROR_MEMORY or FIND_ERROR_REGEX when 
	is_in_range returns -1 or -2, respectively.  
	
	find_next_do will now return FIND_ERROR_MEMORY when the assertion in
	is_in_range fails. This design may be semantically conspicuous, but
	it should not cause any problems as print_find_error will not
	display a message for FIND_ERROR_MEMORY. I assume that the message
	printed by assert() obviates any need for a message box.  

Sun Aug 15 06:55:20 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	is_in_range_regex: Return -2 for regular-expression compilation
	failure and -1 for memory allocation failure.  
	
	is_in_range_plain: Return -1 for memory allocation failure.  
	
	is_in_range (which will return the return value of one of the
	preceding two routines): Return -1 for assertion failure.  
	
	find_next_do: Interpret only values from is_in_range that are
	greater than 0 as success values.  

Sun Aug 15 06:49:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	get_range: Return -1 for assertion failure to distinguish it from no
	match, in which case we return 1.  

Sun Aug 15 05:51:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* Unicode/Makefile.am, contrib/Makefile.am, doc/book/Makefile.am,
	test/Makefile.am:

	Use explicit file lists or more specific globs than just '*' when
	setting EXTRA_DIST. This should eliminate the erroneous distribution
	of CVS and possibly other files.  

Sun Aug 15 05:48:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/: unix/Makefile.am, win32/Makefile.am:

	Use one-space indenting.  

Sun Aug 15 05:46:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/Makefile.am:

	Whitespace clean-up.  

Sun Aug 15 00:43:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_CHECK_COMPILER_MACRO upgraded to EL_CHECK_COMPILER_MACROS .. so
	that we can also check __WIN32__ macro like the gettext code does.  

Sun Aug 15 00:27:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, osdep/osdep.h, osdep/os2/os2.c,
	osdep/win32/win32.c, terminal/terminal.c:

	Introduce get_shell() which checks GETSHELL env. variable or falls
	back to DEFAULT_SHELL. Replaces three implementations.  

Sat Aug 14 23:53:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: beos/sysinfo.h, os2/sysinfo.h, unix/sysinfo.h:

	Remove unused ASSOC_BLOCK and ASSOC_CONS_XWIN. From looking at
	links2 code it looks like remaining parts of the dialog code for
	handling associations between content types and external programs.  

Sat Aug 14 23:48:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: beos/sysinfo.h, os2/sysinfo.h, riscos/sysinfo.h,
	unix/sysinfo.h, win32/sysinfo.h:

	Tidyup sysinfo.h files.  

Sat Aug 14 23:36:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/os2/sysinfo.h:

	CONFIG_OS2 is defined by configure on basis of __EMX__ compiler flag
	and the beos sysinfo.h file is already guarded by #ifdef CONFIG_OS2
	so no need for this extra #ifdef __EMX__.  

Sat Aug 14 23:34:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: system.h, beos/sysinfo.h, os2/sysinfo.h,
	riscos/sysinfo.h, unix/sysinfo.h, win32/sysinfo.h:

	Remove unused system identifiers.  

Sat Aug 14 23:29:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, osdep.c, system.h, win32/sysinfo.h,
	win32/win32.c, win32/win32.h:

	Obsolete usage of WIN32 #define in favor of CONFIG_WIN32.  

Sat Aug 14 23:23:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: osdep.c, system.h, unix/sysinfo.h, unix/unix.c,
	unix/unix.h:

	Obsolete usage of UNIX #define in favor of CONFIG_UNIX.  

Sat Aug 14 23:18:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/newwin.c, osdep/osdep.c, osdep/system.h,
	osdep/os2/os2.c, osdep/os2/os2.h, osdep/os2/sysinfo.h,
	util/secsave.c:

	Obsolete usage of OS2 #define in favor of CONFIG_OS2.  

Sat Aug 14 23:13:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/system.h:

	Reintroduce CONFIG_<OS> #define sanity checking. This will make sure
	that config.h is always included before elinks.h 

Sat Aug 14 23:08:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/newwin.c, osdep/osdep.c, osdep/system.h,
	osdep/beos/beos.c, osdep/beos/beos.h, osdep/beos/overrides.c,
	osdep/beos/overrides.h, osdep/beos/sysinfo.h, terminal/terminal.c:

	Obsolete usage of BEOS #define in favor of CONFIG_BEOS.  

Sat Aug 14 23:00:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: osdep.c, system.h, riscos/riscos.c, riscos/riscos.h,
	riscos/sysinfo.h:

	Obsolete usage of RISCOS #define in favor of CONFIG_RISCOS.  

Sat Aug 14 21:42:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/: color.inc, color_s.inc:

	Clarify that color_s.inc is always included and that color.inc is
	only included if CONFIG_SMALL is undefined.  

Sat Aug 14 21:30:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/Makefile.am:

	Sort libutil_a_SOURCES.  

Sat Aug 14 21:28:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/Makefile.am:

	Add TODO to EXTRA_DIST.  

Sat Aug 14 21:15:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/osdep/Makefile.am, src/osdep/system.h:

	Move OS compiler macro checks to configure and conditionalize
	src/osdep/ building.  

Sat Aug 14 21:13:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/unix/Makefile.am:

	Fix some indenting.  

Sat Aug 14 21:12:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/backend/Makefile.am, document/css/Makefile.am,
	document/html/Makefile.am, document/html/parser/Makefile.am,
	mime/backend/Makefile.am, osdep/beos/Makefile.am,
	osdep/os2/Makefile.am, osdep/riscos/Makefile.am,
	osdep/unix/Makefile.am, osdep/win32/Makefile.am:

	s/convience/convince/ 

Sat Aug 14 15:59:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Always update cache_entry->content_type and try to handle allocation
	failure when the local @type variable is non-NULL.  

Sat Aug 14 15:57:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/Makefile.am:

	The data.[ch] should always be in EXTRA_..._SOURCES. Tak Miciah.  

Sat Aug 14 15:26:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In text_typeahead_handler, return INPUT_LINE_REWIND when
	search_for_do indicates an error and there is something in the
	buffer.  

Sat Aug 14 15:22:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	search_for_do: return the result of find_next_do.  

Sat Aug 14 15:21:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In search_for_do, to report errors, call print_find_error directly 
	with the return value of find_next_do, rather than calling find_next 
	in place of find_next_do.  

Sat Aug 14 15:16:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inpfield.c:

	In input_line_event_handler, after back-spacing when the input-line
	handler returns INPUT_LINE_REWIND, call update_dialog_data to update 
	|input_line->buffer| (which is the same as |widget_data->data|).  

Sat Aug 14 13:29:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Expand the descriptions of the save-as and save-formatted actions.  

Sat Aug 14 13:13:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/default.c:

	Clarify the description of mime.handler to explain that its
	sub-options do not refer to MIME types, but rather that one must
	create options under mime.type that refer to the handlers under
	mime.handler.  

Sat Aug 14 07:53:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/setup.h, src/config/options.inc,
	src/protocol/Makefile.am, src/protocol/protocol.c,
	src/protocol/protocol.h, src/protocol/nntp/Makefile.am,
	src/protocol/nntp/codes.c, src/protocol/nntp/codes.h,
	src/protocol/nntp/connection.c, src/protocol/nntp/connection.h,
	src/protocol/nntp/nntp.c, src/protocol/nntp/nntp.h,
	src/protocol/nntp/response.c, src/protocol/nntp/response.h,
	src/sched/connection.h, src/sched/error.c, test/href_tests.html:

	Add (experimental) NNTP support. Disabled by default.  

Sat Aug 14 06:57:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, protocol/ftp/ftp.c,
	protocol/http/http.c, main.c:

	Add keep-alive connection time-out callback support.  

Sat Aug 14 06:19:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_got_header(): Add FIXME about obsolete fake header usage. Fix
	leak.  

Sat Aug 14 05:59:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: about.c, file/file.c, ftp/ftp.c, http/codes.c,
	smb/smb.c:

	Prefer using cache_entry->content_type instead of setting up a fake
	protocol header.  

Sat Aug 14 05:56:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c, mime/mime.c,
	sched/download.c:

	Add content_type string member to struct cache_entry.
	get_content_type() 'caches' the type in this member.  

Sat Aug 14 03:49:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	s/Data/data/ .. hmm 

Sat Aug 14 03:32:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS, configure.in, features.conf, src/protocol/Makefile.am,
	src/protocol/data.c, src/protocol/data.h, src/protocol/protocol.c,
	src/protocol/protocol.h, test/href_tests.html:

	Experimental support for data URI protocols. Base64 handling not
	widely tested (the href test isn't working for some reason).  

Fri Aug 13 21:28:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, viewer/text/search.c:

	Introduce INPUT_LINE_REWIND which removes last entered char. Use it
	for typeahead error handling. Text typeahead could use it too but it
	looks a little harder.  

Fri Aug 13 21:02:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_frame_action(..., set_frame, ...): Fix frame maximizing when
	maximizing a recursive frameset where current_frame() will return
	NULL (already in bugzilla). Reported by kahmalo and me.  

Fri Aug 13 20:54:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hotkey.c, bfu/widget.c, document/renderer.c,
	protocol/proxy.c, protocol/smb/smb.c, viewer/text/marks.c:

	Include own header.  

Fri Aug 13 20:32:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/about.c:

	Include about.h header.  

Thu Aug 12 20:54:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* Unicode/gen-ent, src/intl/entity.inc:

	Give |struct entity| its name, which is used by the previous patch.  

Thu Aug 12 11:28:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: protocol/http/codes.c, intl/charsets.c:

	Use bsearch(3) in http_code_to_string and get_entity_string.  This
	required the introductions of compare_http_codes and
	compare_entities, respectively, the latter of which required changes
	to xxstrcmp so that the second string, rather than the first, is
	expected to be NULL-terminated.  

Thu Aug 12 08:44:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/file.c:

	Add a space after the return-type declaration of a function
	type-cast.  

Thu Aug 12 08:40:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/listmenu.c, ssl/connect.c, intl/charsets.c,
	util/error.h, util/hash.c, util/snprintf.c, cookies/cookies.c,
	dialogs/info.c, dialogs/options.c, osdep/os2/os2.c, osdep/osdep.c,
	osdep/stub.c, sched/task.c, terminal/terminal.c,
	scripting/lua/core.c, document/html/parser.c,
	document/html/frames.c, util/file.c:

	Add spaces after type casts.  

Thu Aug 12 08:21:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/backend/xbel.c:

	In print_xml_entities, do not recur on an empty string when
	u2cp_no_nbsp returns NULL as this will do approximately nothing.
	This curious recursion was introduced in revision 1.36, when the
	NULL-check was introduced.  

Thu Aug 12 07:33:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/action.c:

	In do_action, in the ACT_MAIN_TAB_MENU case, factor in whether the
	status bar is enabled in the arithmetic to place the tab menu on the
	tab bar.  

Thu Aug 12 05:13:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In find_next, eliminate the local |flags| variable, which is
	essentially unused after the last patch.  

Thu Aug 12 05:05:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Introduce print_find_error_not_found, and use it in print_find_error 
	and typeahead_error.  

Thu Aug 12 05:04:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Move typeahead_error above print_find_error to decrease the diffage 
	for the next patch.  

Thu Aug 12 04:41:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Introduce print_find_error, which is essentially the same as
	find_next, except that print_find_error takes an enum find_error
	instead of calling find_next_do. find_next is now a wrapper that
	calls find_next_do and passes the result to print_find_error.  

Thu Aug 12 04:35:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In find_text, replace the local flag |unsigned int free_text| with
	|enum msgbox_flags flags|.  

Thu Aug 12 04:31:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Replace the second space in |N_("Search string '%s' not found"),|, 
	which I accidently removed in the last revision.  

Thu Aug 12 01:17:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	do_mainmenu(): Use select_menu() instead of sending an Enter
	keyboard event.  

Mon Aug  9 09:16:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Wrap some lines.  

Mon Aug  9 08:47:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/search.c:

	Add search-toggle-regex in the edit map to toggle
	document.browse.search.regex in the type-ahead input field. Bind to
	alt-r by default, like in EMACS.  

Mon Aug  9 08:38:07 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In text_typeahead_handler, introduce the local variable
	|report_errors|.  Initialise it to and use it instead of |action ==
	-1|.  

Mon Aug  9 07:00:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In search_for_do, add a parameter |report_errors| to search_for_do,
	and use find_next_do instead of find_next when that parameter is
	given a zero argument.  
	
	In search_for_back and search_for, pass search_for_do |1| for its
	new |report_errors| parameter, preserving the behaviour from before
	this change.  
	
	In text_typeahead_handler, pass search_for_do |1| only when the user
	presses a key that is not bound, and pass |0| otherwise. This avoids
	repeated errors when the user enters a string that is not found and
	presses further keys that do not change the buffer to contain a
	string that matches something.  

Mon Aug  9 06:19:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	In find_next, introduce local variables |message| and |free_text| 
	and use them to eliminate all calls to msg_box but one.  

Mon Aug  9 05:58:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Divide find_next into two routines, find_next and find_next_do, with
	the former handling error reporting and using the latter as a
	back-end.  

Mon Aug  9 05:18:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/inpfield.c, bfu/menu.c, viewer/text/search.c:

	input_line_event_handler: Allow ACT_EDIT_ENTER to fall thru to the
	handler given to input_field_line even if the input buffer is empty.  
	
	text_typeahead_handler: Unhighlight any matches from the previous
	search on ACT_EDIT_ENTER with an empty buffer.  
	
	menu_search_handler: Cope with the above change and return
	INPUT_LINE_CANCEL for ACT_EDIT_ENTER even if the buffer is empty.  
	
	exmode_input_handler needed no changes.  

Sun Aug  8 06:33:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	In handle_ret_goto_url, use goto_url_with_hook instead of goto_url 
	to avoid a segfault when Lua code tells the browser to load a new
	URL but provides a string that is not a full, parsable URI -- e.g., 
	a simple path-name. The code was fine until src/sched/task.c 1.111 
	on 2004-06-09, which changed goto_url to require a full URI.  
	
	An added bonus to this change is that goto-url hooks are called when
	Lua sends the browser to a new URI.  

Sat Aug  7 22:03:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Delete a superfluous NULL check in do_hooks_file.  

Fri Aug  6 18:26:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix bug 491 - 'Link navigation looks weird after disabling title or
	status bar.' by setting the screen dirty when drawing and clearing a
	link.  

Fri Aug  6 17:03:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Minor optimization.  

Fri Aug  6 09:11:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Little hack to preserve rendering of [   ], in directories listing,
	we only clear spaces if length of alt or title attributes is > 5.
	Issue reported by Jonas.  

Fri Aug  6 09:02:29 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/: draw.c, draw.h:

	Move get_char() at top of draw.c, make it inline, and rename
	xpos,ypos to x,y in header file.  

Fri Aug  6 08:43:38 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_border_char(): @sc -> @screen_char.  

Fri Aug  6 08:41:58 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_text(): use get_char() and simplify code.  

Fri Aug  6 08:40:19 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_box(): use get_char() and simplify code.  

Fri Aug  6 08:38:10 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_char(): use get_char() and simplify code.  

Fri Aug  6 08:36:36 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_line(): use get_char() and simplify code.  

Fri Aug  6 08:35:22 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_char_data(): use get_char() and simplify code.  

Fri Aug  6 08:34:19 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_char_color(): use get_char() and simplify code.  

Fri Aug  6 08:32:35 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_border_cross(): use get_char() and simplify code.  

Fri Aug  6 08:31:40 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_border_char(): use get_char() and simplify code.  

Fri Aug  6 08:30:27 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	get_char(): return NULL on assertion failure.  

Wed Aug  4 22:32:01 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updated.  

Wed Aug  4 19:16:41 2004  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	Indentation fix.  

Wed Aug  4 05:16:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	What the heck, try to get it to work with OpenSSL as well.  

Wed Aug  4 05:07:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Fix a compilation error with GNUTLS by reverting the removal of the
	ssl_error label in revision 1.82.  

Tue Aug  3 22:54:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Drop inline attribute from is_hotkey() and is_not_so_hotkey(), it
	doesnt make sense now that we call them from check_hotkeys_common().  

Tue Aug  3 22:24:17 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Move @os2xtd declaration where it is used, making it anonymous
	struct with @x -> @key and @y -> @modifier as fields.  

Tue Aug  3 21:53:14 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Reduce code redundancy by introducing check_hotkeys_common(), now
	used by check_hotkeys() and check_not_so_hot_keys(). Cleanup and
	code simplification.  

Tue Aug  3 21:25:00 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: hotkey.c, hotkey.h, menu.c:

	Only pass struct menu * to clear_hotkeys() and init_hotkeys().  

Tue Aug  3 21:02:03 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: hotkey.c, hotkey.h, menu.c:

	Drop @ni parameter from init_hotkeys() and clear_hotkeys_cache().  

Tue Aug  3 20:57:39 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	init_hotkeys(): use foreach_menu_item().  

Tue Aug  3 17:08:09 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/menu.c, bfu/menu.h,
	document/html/parser.c:

	Use struct menu_item * in mi_is_*() macros, and simplify code. This
	will help to expand usage of foreach_menu_item() macro.  

Tue Aug  3 16:19:27 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_char16(): minor simplification, @code[x] already contains 0.  

Tue Aug  3 16:13:26 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_char16(): drop static attribute for @code, there is no reason to
	use it.  

Tue Aug  3 10:41:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, ssl/connect.c:

	Do the init_ssl_connection() call in ssl_connect(). It simplifies a
	lot of things. Now all the SSL handle setup and teardown is done
	within ssl/.  

Tue Aug  3 10:31:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, sched/connection.c,
	ssl/connect.c:

	Continue the rampage. Introduce done_connection_info().  

Tue Aug  3 10:04:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h,
	protocol/http/http.c:

	Introduce init_connection_info().  

Tue Aug  3 09:43:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	make_connection(): Why yes Mam but de gospel do say that man was
	born of woman's womb.  

Tue Aug  3 09:39:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, protocol/finger.c,
	protocol/ftp/ftp.c, protocol/http/http.c:

	make_connection(): Drop @port arg. It is needless code dublication.
	The return value check in http_protocol_handler() should not be
	needed anymore. T'is legacy.  

Tue Aug  3 09:37:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	Introduce uri_port_is_valid() macro. Check the port numbers for the
	protocol backend in get_protocol_port().  

Tue Aug  3 09:23:02 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	truncate_entry(): add a comment about doubt of zero length fragment
	legality.  

Tue Aug  3 09:19:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/cache.c:

	Tweak the assertion added in 1.167, 'truncate_entry(): reduce code
	redundancy by reordering tests.' The assertion was triggered by a
	Lua preformatting hook.  Zas doesn't know why, but suggested this
	change, which asserts that cache-entry fragments have a length >= 0
	rather than > 0.  

Tue Aug  3 09:18:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h,
	protocol/http/http.c, ssl/connect.c:

	Rename struct conn_info's @func callback to @done. D-scribe
	make_connection().  

Tue Aug  3 09:11:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	connected(): No need to test for conn_info or conn_info->func.  

Tue Aug  3 09:08:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, ssl/connect.c:

	Rename all conn_info struct variables to conn_info.  

Tue Aug  3 08:43:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	init_listbox(): Reduce indentation by doing check on the listbox
	browser's box_data->items.  

Tue Aug  3 08:24:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.h, ssl/connect.c:

	struct connection: Rename @no_tsl to @no_tls.  

Tue Aug  3 08:14:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_set_no_tls(): It is only called after checking |if
	(conn->no_tsl)| which means there is no need to test it in the
	function. Cleaned up to use table stack initialization. Reduce size
	of @cipher_priority[], it was too big.  

Tue Aug  3 00:50:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c, ssl/ssl.c,
	ssl/ssl.h:

	init_ssl_connection(): Take connection_socket struct as arg.  

Tue Aug  3 00:44:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_read(), ssl_do_read(): Use passed connection_socket struct.  

Tue Aug  3 00:39:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_write(), ssl_do_write(): Use passed connection_socket struct.  

Tue Aug  3 00:37:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_want_read(): Use local connection_socket pointer.  

Tue Aug  3 00:35:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_do_connect(): Take connection_socket struct as arg.  

Tue Aug  3 00:33:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_set_no_tls(): Take connection_socket struct as arg.  

Tue Aug  3 00:10:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_connect(): Use the passed connection_socket for retrieving the
	SSL handle.  

Tue Aug  3 00:04:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Introduce connection_is_https_proxy() macro.  

Mon Aug  2 23:58:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	HTTP is allowed to assume SSL handle is in conn->socket. Add TODO
	about moving cache->ssl_info initialization.  

Mon Aug  2 23:37:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/: connect.c, ssl.c, ssl.h:

	done_ssl_connection(): Take only the connection_socket struct.
	Rename? 

Mon Aug  2 23:22:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, ssl/connect.c, ssl/connect.h:

	Use the read_buffer socket for testing SSL and pass the socket to
	ssl_read().  

Mon Aug  2 23:20:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, ssl/connect.c, ssl/connect.h:

	Use the write_buffer socket for testing SSL and pass the socket to
	ssl_write().  

Mon Aug  2 23:15:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	connected(): Check for SSL in the connection info struct's socket.  

Mon Aug  2 23:10:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	dns_found(): Check for SSL in the connection info struct's socket.  

Mon Aug  2 22:59:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	interrupt_connection(): Since close_socket() calls ssl_close() which
	then calls done_ssl_connection() there is no need to do it here.
	Further this also allows GNUTLS backend to close down the SSL
	connection properly via ssl_do_close() macroed to gnutls_bye().  

Mon Aug  2 22:50:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Oops, fix last patch. ;-) 

Mon Aug  2 22:45:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_do_close(): Use the passed socket.  

Mon Aug  2 22:43:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, ssl/connect.c, ssl/connect.h:

	close_socket(): Pass the mic to ssl_connect().  

Mon Aug  2 22:13:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, ssl/connect.c, ssl/ssl.c:

	Move the connection struct's ssl handle to struct connection_socket.
	All users still assume that there can be only one ssl handle and it
	is conn->socket.ssl. Ugly tag appended for each substitution so they
	are easy to locate.  

Mon Aug  2 21:38:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Aug  2 16:26:13 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	update_status(): test only once for @dirty.  

Mon Aug  2 16:17:43 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	update_status(): force rerendering when title/status/tabs/leds
	display is toggled. Until now, only tabs toggling was forcing
	document rerendering.  

Mon Aug  2 14:57:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	We should call the change hooks when toggling document options.  

Sun Aug  1 20:54:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, file/cgi.c, http/http.c:

	Introduce URI_HTTP_REFERRER flag. Now URI_PUBLIC is only used for
	dialogs and coument titles and never for URI strings sent over the
	net.  

Sun Aug  1 20:51:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Add leading slash always when we want URI_PATH. This fixes
	determining default value of the action attribute of <form>.  

Sun Aug  1 20:46:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Helper URI_SERVER bitmask enum.  

Sun Aug  1 20:43:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	We do not use URI_POST_INFO now, it must not be sent over the net.  

Sun Aug  1 20:40:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Separate the parts of enum uri_component.  

Sun Aug  1 20:33:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Prevent the horrible URI_POST_INFO sneaking all around into various
	URIs like <form> action URI, URI coming over clipboard,
	in-Lua-processing URIs and so on, by sticking it to URI_RARE. Let's
	see what did I break.  

Sun Aug  1 20:12:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Hrmpf. Indeed use the conn->data_socket.fd for passing
	conn->cgi_pipes[1].  

Sun Aug  1 20:08:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Compilation fix (call me dirty...), and Jonas should better do test
	compilations on full-featured ELinks configurations or I'll give him
	hard time.  

Sun Aug  1 10:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/http/http.c, ssl/connect.c,
	ssl/connect.h:

	ssl_connect(): Take connection_socket struct.  

Sun Aug  1 09:51:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, protocol/finger.c,
	protocol/ftp/ftp.c, protocol/http/http.c, ssl/connect.c:

	read_from_socket(): Take struct connection_socket instead of socket
	fd. Describe it and rename @read_func to @done to reflect the
	change. Well actually also @buf is renamed to @buffer. To further
	overload the patch also struct read_buffer now holds the
	connection_socket struct.  

Sun Aug  1 09:18:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	struct write_buffer: Replace |int sock| member with |struct
	connection_socket *socket| member.  

Sun Aug  1 09:14:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, protocol/finger.c,
	protocol/ftp/ftp.c, protocol/http/http.c:

	write_to_socket(): Take struct connection_socket instead of socket
	fd. Describe it and rename write_func to done to reflect the change.  

Sun Aug  1 09:08:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	struct connection: Update @data_socket comment. SMB is also using
	it.  

Sun Aug  1 09:07:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, protocol/ftp/ftp.c,
	protocol/smb/smb.c, sched/connection.c, ssl/connect.c:

	close_socket(): Take struct connection_socket instead of socket
	descriptor pointer.  

Sun Aug  1 09:01:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h,
	protocol/http/http.c, ssl/connect.c:

	struct conn_info: Replace |int *sock| member with |struct
	connection_socket *socket| member.  

Sun Aug  1 08:55:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, protocol/finger.c,
	protocol/ftp/ftp.c, protocol/http/http.c:

	make_connection(): Take struct connection_socket pointer.  

Sun Aug  1 08:45:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/ftp/ftp.c,
	protocol/http/http.c, protocol/smb/smb.c, sched/connection.c,
	sched/connection.h:

	Introduce struct connection_socket. For now only holding the socket
	descriptor.  

Sat Jul 31 18:29:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	transform_file_url(): Bug 358 revisited. Encode the CWD before
	inserting it. Fixes test case added by lindi- in comment #14 on
	2004-07-31 20:05.  

Sat Jul 31 11:23:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/dialog.c, bfu/menu.c, sched/session.c,
	terminal/event.c, terminal/window.c, terminal/window.h,
	viewer/text/view.c:

	Eliminate the |int fwd| parameter from window event handlers.  
	
	|fwd| is a boolean indicating whether or not the event came from
	delete_window or delete_window_ev. It is apparently named for its
	usage by its one user, mainmenu_kbd_handler, which uses it to
	determine whether the delete event was forwarded from a sub-menu. It
	is used when one presses left or right with a menu open:
	menu_kbd_handler deletes the menu and passes (via delete_window_ev) 
	the ACT_MENU_LEFT or ACT_MENU_RIGHT event on to mainmenu_kbd_handler
	which then knows from the |fwd| flag to open the newly selected
	menu. This way, left and right open the newly selected menu only
	when a menu was already open.  
	
	Now, menu_kbd_handler deletes the old menu and passes the
	ACT_MENU_LEFT or ACT_MENU_RIGHT event on to mainmenu_kbd_handler as
	before, but now menu_kbd_handler opens the newly selected menu
	itself.  

Sat Jul 31 11:05:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/kbd.c:

	Tidy up a comment in decode_terminal_mouse_escape_sequence: 
	s/Prospone/Postpone/ and remove a bogus 'errors has'.  

Sat Jul 31 11:01:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hotkey.c, terminal/kbd.c, util/conv.c, util/hash.c,
	util/snprintf.c, viewer/text/form.c, viewer/text/textarea.c:

	Put spaces after some type casts.  

Sat Jul 31 10:50:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: terminal/kbd.c, viewer/text/view.c:

	In send_mouse_event and decode_terminal_mouse_escape_sequence, 
	substitute two remaining uses of |ev->info.mouse| with the local
	|mouse| variables in the respective routines.  

Sat Jul 31 09:59:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Fix bug where the mark for
	invalid KBD event would be removed. Initialize local variable to -1
	and only update the event if it has been changed.  

Sat Jul 31 09:53:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	process_queue(): Fix the check for event queuing to not access the
	wrong union struct. Restore the old behaviour of only changing the
	event type when all mouse sanity checks has been done.  

Sat Jul 31 07:33:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/os2/os2.c:

	Remove an extra space.  

Sat Jul 31 06:32:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	Update a comment in mouse_text to reflect 1.103 which changed the
	region over which one can click the mouse or roll its wheel to
	scroll a text widget.  

Sat Jul 31 05:30:07 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/kbd.c:

	In decode_terminal_mouse_escape_sequence, remove an extra space.  

Sat Jul 31 04:06:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/default.c:

	In get_content_type_default, remove some extra parentheses.  

Fri Jul 30 22:22:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, osdep/osdep.h, osdep/os2/os2.c,
	osdep/win32/win32.c, terminal/kbd.c:

	get_terminal_size(): Drop bogus error return value. The @x and @y
	variables are always non-NULL.  

Fri Jul 30 16:39:44 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	handle_trm(): use memset() + affectations to initialize @info, and
	simplify code, dropping useless intermediate variables like @width,
	@height.  

Fri Jul 30 16:16:57 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jul 30 16:11:37 2004  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Drop trailing spaces.  

Fri Jul 30 16:04:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	html_img(): trim whitespaces around alt or title attribute value.  

Fri Jul 30 14:52:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	Fixed smelly mouse-related #if condition.  

Fri Jul 30 14:31:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	check_keepalive_connections(): Use foreachsafe().  

Fri Jul 30 10:41:11 2004  Laurent Monin <zas@norz.org>:

	* src/: config/cmdline.c, viewer/dump/dump.c:

	Add -no-references command line option that prevents dump of any
	link reference when dumping a document to stdout.  

Fri Jul 30 10:38:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Make send_mouse_event() return session for controlling event
	cleanup. Remove goto stuff in send_event().  

Fri Jul 30 10:36:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_kbd_event(): Reformat 

Fri Jul 30 10:34:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_event(): Split out keyboard event handling to send_kbd_event().  

Fri Jul 30 10:27:26 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	dump_to_file(): always dump links even with -no-numbering, do not
	print any number in this case. It fixes bug 485.  

Fri Jul 30 10:26:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Hmm .. fix brain deadness in last patch.  

Fri Jul 30 10:26:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_event(): Split out mouse event handling to send_mouse_event().  

Fri Jul 30 10:17:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Use event union struct to shorten lines.  

Fri Jul 30 10:09:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Use event union struct to shorten lines.  

Fri Jul 30 10:01:59 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	set_cursor(): only call check_range() if needed.  

Fri Jul 30 09:55:32 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_text(): drop useless memset() call.  

Fri Jul 30 09:49:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove the assertion that causes bug 477. Introduce
	html_has_non_space_chars() to properly check if the line has real
	content in which case the last tag will be updated. All this was
	initiated by the fix for bug 324 '<pre> tags with an ID don't behave
	correctly'.  

Fri Jul 30 09:46:25 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	try_document_key(): space fix.  

Fri Jul 30 09:43:57 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	try_document_key(): fix bug introduced in rev 1.284 -> 1.285.  

Thu Jul 29 15:58:41 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_border_char(): minor code optimization.  

Thu Jul 29 15:56:28 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_box(): minor code optimization.  

Thu Jul 29 15:47:45 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_char(): code simplification and optimization, assert
	term->screen->image.  

Thu Jul 29 10:21:04 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jul 29 10:02:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/encoding.c:

	guess_encoding(): Fix comparison. Now that the extension contains
	the '.' the filename isn't necessarily longer than the extension.  

Thu Jul 29 09:45:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Another fix for the assertion that causes bug 477. Only check
	@charslen chars.  

Thu Jul 29 09:43:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: bindtextdom.c, dcigettext.c:

	Use offsetof() definition in osdep/generic.h 

Thu Jul 29 09:43:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/generic.h:

	Include <stddef.h> - it may contain offsetof() definition.  

Wed Jul 28 23:43:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	Something about selectors.  

Wed Jul 28 16:25:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	Add link to DEBs of CVS at http://www.miernik.ctnet.pl/debian/ 

Wed Jul 28 16:03:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/menu.c, sched/session.c, terminal/tab.c,
	terminal/tab.h, terminal/window.c, terminal/window.h:

	Introduce window_handler typedef.  

Wed Jul 28 15:43:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/text.c,
	lowlevel/timer.c, osdep/os2/os2.c, osdep/unix/unix.c,
	terminal/event.c, terminal/event.h, terminal/kbd.c,
	terminal/mouse.h, viewer/text/view.c:

	struct term_event: Move remaining variables to union.  

Wed Jul 28 15:30:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Check for NULL doc_view in do_mouse_event() and cleanup.  

Wed Jul 28 15:26:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Make it more clear that the event
	type is changed.  

Wed Jul 28 15:20:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_mouse_handler(): Cleanup handling of clicks outside the
	mainmenu bar.  

Wed Jul 28 15:15:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frame_ev_mouse(): Use local @x and @y variables.  

Wed Jul 28 14:58:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/unix/unix.c:

	For helvede. Thanks to miernik for patiently telling me how broken
	my patches are.  

Wed Jul 28 14:50:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Use local @key and @modifier
	variables.  

Wed Jul 28 14:39:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	process_queue(): Remove need for l1 label.  

Wed Jul 28 14:37:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	set_kbd_event(): Cleanup.  

Wed Jul 28 14:35:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	process_queue(): Move l2 label code to separate function badly named
	set_kbd_event().  

Wed Jul 28 14:21:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	process_queue(): Minor simplification.  

Wed Jul 28 13:56:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: os2/os2.c, unix/unix.c:

	Oops some missing users of ev->b was converted 

Wed Jul 28 13:53:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Introduce decode_mouse_position().  

Wed Jul 28 13:37:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Split out mouse escape decoding.  

Wed Jul 28 13:29:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Move the get_esc_code() call
	after special case.  

Wed Jul 28 13:27:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	get_esc_code(): Return the length of the escape code.  

Wed Jul 28 13:21:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Normalize indentation.  

Wed Jul 28 13:19:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): cleanup special case. The switch
	stretches all the way to the end of the function.  

Wed Jul 28 13:17:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	decode_terminal_escape_sequence(): Write out fake goto label users
	now return -1. Comment the function.  

Wed Jul 28 13:12:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	process_queue(): Split out decode_terminal_escape_sequence().  

Wed Jul 28 12:25:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/menu.c, config/kbdbind.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/view.c:

	Use get_kbd_key() int the rest of the EVENT_KBD handlers.  

Wed Jul 28 12:24:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Use get_kbd_key() at the lower levels.  

Wed Jul 28 12:17:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.h:

	A little clean up and preparation for next patch.  

Wed Jul 28 11:42:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	mouse_text(): Store scroller modifier area in a box and use
	check_mouse_position(). Note this also means it is only possible to
	modify the scoller in the right side of the dialog box around the
	scroller.  

Wed Jul 28 11:22:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	do_mouse_event(): Use check_mouse_position() and elliminate
	is_in_box() FIXME. When rendering documents we copy the
	document->option box (and thus x and y members) to the doc_view box
	so it should be ok but I've added assertions anyway.  

Wed Jul 28 11:02:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Tidy up.  

Wed Jul 28 10:50:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, viewer/text/view.c:

	Use {get,check}_kbd_modifier() for all modifier access.  

Wed Jul 28 10:43:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/menu.c, terminal/event.c,
	terminal/event.h, viewer/text/link.c, viewer/text/view.c:

	Introduce {get,check}_kbd_modifier() for EVENT_KBD events.  

Wed Jul 28 10:31:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Update comment about mouse button mask.  

Wed Jul 28 10:19:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.h, kbd.c, mouse.h:

	Move the term_event->b member to struct in union. It is now
	accessible at ev->info.mouse.button 

Wed Jul 28 09:41:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Remove misinforming comments. Questioned by Miciah.  

Wed Jul 28 04:09:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	Now that strlcasecmp() is being used in get_blacklist_entry() NUL
	terminate the entry->host so -1 usage for automatic length
	calculation is ok.  

Wed Jul 28 03:36:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	read_select(): Fix buffer overflow by substracting the length of the
	buffer that has already been read. Reported by Jan Braun
	<janbraun@gmx.de> on elinks-user Wed, Jul 28, 2004 in
	<20040728022541.GA25879@fera.kawo2.rwth-aachen.de>.  

Wed Jul 28 02:20:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/info.h, dialogs/menu.h, osdep/newwin.h,
	util/secsave.h:

	Fix guard names. Declare terminal and session structs to avoid
	#includes.  

Tue Jul 27 22:53:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	add_uri_command_to_menu(): Make the labels different for each type.  

Tue Jul 27 22:45:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	I recall pasky talking about View being a stripped down version of
	the tab menu so remove the pass frame URI to external command menu
	item so that no one will ever notice this feature unless they know
	the tab menu ;) 

Tue Jul 27 22:41:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, sched/action.c, viewer/text/link.c:

	Make the external command URI passing use also tab (toplevel) URI.  

Tue Jul 27 22:05:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, sched/action.c, viewer/text/link.c:

	Add possibility to pass URI of the current frame to external
	command. Idea by miernik.  

Tue Jul 27 22:01:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Sort frame-* actions.  

Tue Jul 27 21:32:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, event.h, kbd.c:

	Make the terminal_info->data member have size of one for
	portability. Define TERMINAL_INFO_SIZE macro using offsetof() to
	ignore the extra byte and padding.  

Tue Jul 27 21:28:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, osdep/generic.h:

	Move offsetof() macro.  

Tue Jul 27 17:54:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	For crying out load we always use unsigned char _not_ char,
	especially when using <ctype.h>'s is<chargroup>() functions.  

Tue Jul 27 17:48:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	init_connection(): Improve referrer setup comment. Revisited.  

Tue Jul 27 17:45:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Always set the referrer when loading file: URIs, so that CGI scripts
	can use it.  

Tue Jul 27 17:34:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/menu.c, terminal/event.h:

	Introduce check_kbd_label_key() macro. Fix off by two error in
	terminal/event.h (1.12 -> 1.13) 

Tue Jul 27 17:30:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	init_connection(): Improve referrer setup comment.  

Tue Jul 27 16:36:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	kbd_field(): Rewrite char inserting in the default label.  

Tue Jul 27 16:26:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, terminal/event.h, viewer/text/form.c:

	Introduce check_kbd_textinput_key() macro.  

Tue Jul 27 16:11:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/mouse.h, viewer/text/link.c:

	Introduce check_mouse_position() macro.  

Tue Jul 27 03:10:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	load_file_from_doc_view() -> load_additional_file() .. more in the
	spirit of request_additional_file().  

Tue Jul 27 03:07:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, session.c, session.h:

	Move the referrer weeding to init_connection(). It means that CGI
	can now have referrer if it is desirable.  

Tue Jul 27 02:44:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Make ssl_want_read() static.  

Mon Jul 26 23:01:04 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	load_file_from_doc_view(): we dont want to set referrer for file
	protocol.  

Mon Jul 26 22:53:12 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Revert last patch for now, it breaks the patch Miciah submitted on
	ml. So just let him do the thing.  

Mon Jul 26 22:40:58 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	tabwin_func(): unused @fw -> @xxx.  

Mon Jul 26 22:38:20 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	reload(): @l ->@loc.  

Mon Jul 26 22:34:33 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	load_file_from_doc_view(): referer -> referrer.  

Mon Jul 26 22:31:52 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	abort_loading(): @l -> @loc.  

Mon Jul 26 22:25:55 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	get_current_url(), get_current_title(), get_current_link_url(),
	get_current_link_name(): assert(str && str_size > 0), not strictly
	needed but may prevent bad things in future.  

Mon Jul 26 22:15:55 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	abort_files_load(): @q -> @more.  

Mon Jul 26 22:09:43 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	get_session_info(): reduce indentation level.  

Mon Jul 26 22:07:15 2004  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, session.h:

	process_file_requests(): try to mmake it somehow reentrant by using
	a session status flag. Cleaner, imho.  

Mon Jul 26 22:02:01 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	process_file_requests(): minor code simplification.  

Mon Jul 26 17:40:42 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Reduce code redundancy by introducing (perhaps badly named)
	load_file_from_doc_view(), now used by process_file_requests() and
	reload().  

Mon Jul 26 17:24:22 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	encode_session_info(): reduce indentation level.  

Mon Jul 26 17:17:31 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	request_frame(): drop goto/label |found|.  

Mon Jul 26 17:15:10 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	request_frame(): drop commented out old code.  

Mon Jul 26 17:13:35 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	request_frameset(), request_frame(): pass @depth and drop static
	declaration of @depth.  

Mon Jul 26 17:10:15 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	request_frameset(): reduce indentation level.  

Mon Jul 26 07:43:49 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jul 26 05:42:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/cache.c:

	Revert revision 1.168, 'remove_overlaps(): @nf declaration was moved
	near where it is really used.' We cannot safely pass |f->next| to
	mem_free after we have passed it to del_from_list, as the latter
	modifies |x->prev->next|, where |x| is |f->next|, meaning we modify
	|f->next->prev->next|, which is the same as |f->next|.  

Sun Jul 25 19:46:49 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Fix stupid error i made, reported by Stephan Roh.  

Sun Jul 25 11:57:01 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	free_entry_to(): @off -> @offset.  

Sun Jul 25 11:51:37 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): use @end_offset value instead of @offset + @length.  

Sun Jul 25 11:48:51 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): remove now useless affectation.  

Sun Jul 25 11:45:31 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): @f_end_offset is only used in loop, so declare it
	where appropriate.  

Sun Jul 25 11:44:23 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): move @ret in loop.  

Sun Jul 25 10:21:06 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp/ftp.c, smb/smb.c:

	Handle/ignore possible allocation failure when adding header to
	@conn->cached->head.  

Sun Jul 25 10:11:49 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/codes.c:

	Content-type -> Content-Type in header.  

Sun Jul 25 10:09:29 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/about.c:

	about_protocol_handler(): reintroduce \r\n in header string, i
	overlooked the fact that is a marker for artificial header.  

Sun Jul 25 10:08:07 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	protocol_header_dialog(): show artificial header info in debug mode.  

Sun Jul 25 05:03:20 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/about.c:

	Remove a pointless #include "util/memory.h" and add #include
	"util/string.h" for stracpy.  

Sat Jul 24 18:52:45 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	find_in_cache(): clarify code.  

Sat Jul 24 18:42:02 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	remove_overlaps(): goto/label vs indentation level, last one wins.  

Sat Jul 24 18:39:25 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	remove_overlaps(): @nf declaration was moved near where it is really
	used.  

Sat Jul 24 18:32:08 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	truncate_entry(): reduce code redundancy by reordering tests.  

Sat Jul 24 18:07:17 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	truncate_entry(): @off -> @offset.  

Sat Jul 24 18:06:03 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	truncate_entry(): drop gotos/label |del| while introducing
	delete_fragment().  

Sat Jul 24 17:46:03 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): return 1 directly.  

Sat Jul 24 17:34:49 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	add_fragment(): drop goto/label |remove_overlaps|.  

Sat Jul 24 14:23:00 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Move code from add_fragment() to new remove_overlaps().  

Sat Jul 24 13:58:30 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	history_menu_common(): goto/label vs indentation level. Indentation
	level increased.  

Sat Jul 24 13:47:06 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Drop history_menu_model() macro and introduce history_menu_common()
	function instead. It reduces code redundancy while performance
	impact is very low, and is not an issue here.  

Sat Jul 24 07:05:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/screen.c:

	Fix alignment in comments after the last patch (forgot to :w before
	committing).  

Sat Jul 24 07:03:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/screen.c:

	Rename to .transparent the .trans member of struct screen_driver.  

Sat Jul 24 06:48:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file/cgi.c:

	In execute_cgi, decode the path name after extracting it from the
	URI.  This is necessary because that path name is used to chdir and
	execute the script and because SCRIPT_NAME is supposed to have the
	decoded path name (see
	http://cgi-spec.golux.com/draft-coar-cgi-v11-03-clean.html#8.1).  

Sat Jul 24 06:18:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/forms.c:

	In get_html_form, tighten the assertion that the URI to which a form
	get request is to be posted has no query part when that URI is based
	on the current URI: Now that file: URIs are properly encoded, remove
	the exception for them.  

Sat Jul 24 05:12:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In field_op, simplify the boolean logic involving
	document.browse.forms.auto_submit.  

Sat Jul 24 02:08:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Fixed document.browse.forms.auto_submit to behave right - if it is
	turned off, the form is submitted by enter only if the form has no
	submit button (as in original Links) or when
	document.browse.forms.auto_submit is turned on. Looks like it
	actually never worked right when auto_submit was off (that's way
	back to 2002), but noone noticed ;-). But it has at least one user
	now - reported by Dave Belfer-Shevett.  

Fri Jul 23 20:09:22 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	ftp_data_accept(): reduce indentation level.  

Fri Jul 23 20:07:26 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	got_something_from_data_connection(), ftp_data_accept(): fix last
	patch, return on error.  

Fri Jul 23 20:02:52 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Move code from got_something_from_data_connection() to new
	ftp_data_accept().  

Fri Jul 23 19:57:30 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	got_something_from_data_connection(): drop goto/label |conn_error|.  

Fri Jul 23 16:47:26 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/dialogs.c:

	get_http_auth_basic_info(): limit displayed realm to a reasonable
	length (512 chars).  

Fri Jul 23 16:04:45 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/auth.c:

	Transform set_auth_user() and set_auth_password() macros to
	functions. There is no reason to use macros here.  

Fri Jul 23 15:52:37 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/about.c:

	about_protocol_handler(): simplify code.  

Fri Jul 23 15:49:25 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/about.c:

	about_protocol_handler(): drop extra \r\n which was preventing
	effective setting of content type.  

Fri Jul 23 15:42:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Invert return codes 0 and 1 in read_*http_data(), 0 was already used
	by get_header() to indicate more to read, so it looks more logical
	now.  

Fri Jul 23 15:30:52 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	read_http_data(): use a switch() for return value test.  

Fri Jul 23 15:25:21 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Move code from read_http_data() to new read_normal_http_data(), and
	use returned value, like for read_chunked_http_data().  

Fri Jul 23 15:18:17 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	read_chunked_http_data(): make it return a value, used in
	read_http_data(), it helps to simplify code.  

Fri Jul 23 15:09:08 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Move code from read_http_data() to new read_chunked_http_data().  

Fri Jul 23 14:57:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	subst_user_agent(): reduce indentation level.  

Fri Jul 23 14:52:36 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	read_http_data(): drop two labels and associated gotos by moving
	code to new functions named read_more_http_data() and
	read_http_data_done().  

Fri Jul 23 06:09:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/uri.h:

	Forgotten piece of the last patch.  

Fri Jul 23 05:21:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: protocol/uri.c, protocol/file/file.c,
	protocol/rewrite/rewrite.c, viewer/text/form.c:

	Add a new parameter |convert_slashes| to encode_uri_string to
	indicate whether slashes should be converted along with other unsafe
	characters to hexadecimal notation.  
	
	When prepending "file://" to the string to convert a path name to a
	URI in encode_uri_string, also encode the path name.  
	
	Now, when a user provides on the command line or in the Go to URL
	box a path with question marks, octothorpes, or other characters
	considered unsafe, they will be encoded so that later on we do not
	misinterpret part of the file name as a fragment identifier, query
	part, or whatever.  
	
	This fixes bug 358: browsing local files fails if path contains
	"%7E".  

Fri Jul 23 03:48:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/renderer.c:

	When setting a title for a document that doesn't specify one 
	(e.g., HTML files without <title> and plain-text files), use the
	file's path instead of the URI if it is a file: URI.  

Fri Jul 23 02:57:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix a memory leak that came with my last patch.  

Fri Jul 23 02:36:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Use get_current_link, get_link_uri, and get_uri_string instead of
	using get_current_link_info, which drops any password in the URI,
	adds a suffix if there is form post data, adds prefix if the link is 
	an image or usemap, and decodes the string. Now copy-clipboard 
	copies the real URI.  
	
	Remove Jonas' TODO comment.  

Fri Jul 23 02:27:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In the ACT_MAIN_COPY_CLIPBOARD case for the switch in frame_ev_kbd, 
	rename |current_link| to |uristring| and change its type from |char
	*| to |unsigned char *|.  

Fri Jul 23 02:24:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Add a missing #include "document/view.h".  

Fri Jul 23 01:56:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listmenu.c, bfu/listmenu.h,
	document/html/parser/forms.c:

	Post <select>ed values in correct charset (by Mikulas; from
	1.00pre8).  

Fri Jul 23 00:57:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	AIX compilation fix (by Mikulas; from 1.00pre6).  

Fri Jul 23 00:51:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Fix incorrect error handling in smb_read_data() (by Mikulas; from
	1.00pre6).  

Thu Jul 22 22:23:19 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	get_temp_name(): fix an error, @nm should be freed by free() not
	mem_free().  

Thu Jul 22 22:20:30 2004  Laurent Monin <zas@norz.org>:

	* src/sched/error.c:

	Stick a comment about get_err_msg() return value.  

Thu Jul 22 22:14:15 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	print_error_dialog(): get_err_msg() can not return NULL, drop
	intermediate @t, and simplify code.  

Thu Jul 22 22:07:14 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	write_cache_entry_to_file(): drop gotos/label |write_error|.  

Thu Jul 22 22:04:16 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	get_download_ses(): test for list_empty(sessions) before any
	foreach().  

Thu Jul 22 22:02:05 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	write_cache_entry_to_file(): drop list_empty(sessions) test,
	get_download_ses(() will do it and it is called by
	download_error_dialog().  

Thu Jul 22 21:56:04 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	download_data_store(): drop last goto and label |abort|.  

Thu Jul 22 21:54:35 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	download_data_store(): assuming get_err_msg() can not return NULL,
	simplify code and drop some gotos.  

Thu Jul 22 21:50:47 2004  Laurent Monin <zas@norz.org>:

	* src/sched/error.c:

	get_err_msg(): drop goto/label.  

Thu Jul 22 21:39:56 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	download_data_store(): move some code to new
	abort_download_and_beep() and drop spome gotos.  

Thu Jul 22 21:28:38 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	download_data(): drop gotos and label |store|.  

Thu Jul 22 17:25:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Fix large files uploads timing out (by Mikulas; from 1.00pre2).  

Thu Jul 22 17:15:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: connect.c, connect.h:

	Describe {read,write}_buffer.done.  

Thu Jul 22 17:04:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Fix entities sometimes wrongly decoded in imgmaps (by Mikulas; from
	1.00pre1). @global_doc_opts looks like a gross mess, it should be
	put into @html_context and usage out of the HTML engine eradicated.  

Thu Jul 22 15:50:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	When uploading files in anonymous mode, fix wrong error code (by
	Mikulas; from 1.00pre1).  

Thu Jul 22 15:49:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	When uploading files, fix fd leak on read() error (by Mikulas; from
	1.00pre1).  

Thu Jul 22 08:07:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/proxy.c:

	Clarify the comment with further help from Timo Lindfors: The
	communication between ELinks and the proxy is never encrypted, altho
	the proxy may be used to transfer encrypted data between ELinks and
	the Web server.  

Thu Jul 22 07:51:25 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jul 22 07:45:32 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/proxy.c:

	Revert a change that snuck in with revision 1.40: Don't check
	whether the URI for the proxy to be used for https:// URIs begins
	with "https://", but rather check for "http://". This is because
	ELinks uses HTTP to communicate with the proxy, even if the proxy
	opens a TLS connection on the client's behalf.  
	
	Thanks to Timo Lindfors for explaining to me the situation, which I
	attempt to explain in a new comment.  

Thu Jul 22 06:09:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/proxy.c:

	Eliminate a useless assignment and if-statement in get_proxy_worker.  

Thu Jul 22 02:26:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Describe #include "intl/charsets.h" 

Thu Jul 22 02:25:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/secsave.c:

	Jonas noticed get_opt() usage in util/. :( 

Thu Jul 22 02:19:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	kbd_field(): Does not seem as a goto cleanup candidate anymore.  

Thu Jul 22 02:16:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Sanitize comment.  

Thu Jul 22 02:06:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bookmarks/dialogs.c, cache/dialogs.c,
	config/dialogs.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	The default hierbox info button handler now gives a chance to the
	get_info() listbox op even if a folder is concerned and prints the
	'use space to expand the folder' only if that op returns NULL. This
	fixes options folders not showing up.  

Thu Jul 22 02:02:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/secsave.c:

	secure_file_saving -> infofiles.secure_save 

Thu Jul 22 01:59:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/rewrite.c:

	Reply to Miciah.  

Thu Jul 22 01:58:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/rewrite.c:

	The gr smart prefix now searches the Google Groups.  

Thu Jul 22 01:56:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/rewrite.c:

	Improve dumb/smart prefixes options descriptions.  

Thu Jul 22 01:49:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	secure_file_saving -> infofiles.secure_save 

Thu Jul 22 01:47:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Blank lines.  

Thu Jul 22 01:18:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Noted when was document.history.global.write_interval aliased.  

Thu Jul 22 00:17:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	get_protocol_proxy(): @protocol_proxy -> @proxy. I'll probably leave
	the rest to our cleanup and URI team ;-).  

Thu Jul 22 00:15:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	get_proxy_worker(): split and unify the redundant code to
	get_protocol_proxy(), with extremely crude calling notation etc.  

Thu Jul 22 00:05:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	get_proxy_worker(): Whoops, fix b0rked getenv()s.  

Thu Jul 22 00:00:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	get_proxy_worker(): if chain -> switch 

Wed Jul 21 23:48:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	get_proxy_worker(): use @protocol_proxy everywhere instead of
	<protocol>_proxy.  

Wed Jul 21 23:27:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	add_bookmark_after_selected() -> move_bookmark_after_selected() 

Wed Jul 21 23:25:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/link.c:

	When highlighting a link, globhist should have more priority than
	bookmarks, being more tentative and likely also more relevant at the
	time.  

Wed Jul 21 23:15:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: internal.h, parser.c, parser.h,
	parser/forms.c, parser/link.c, parser/stack.c:

	html_format.{href_base,target_base} are not per-element properties,
	therefore let's move them to html_context. This fixes a bug of <base
	target> broken by the last <title> fix of mine, generously tracked
	down by zas.  

Wed Jul 21 19:39:25 2004  Laurent Monin <zas@norz.org>:

	* src/sched/task.c:

	ses_forward(): assert(loc) and provide a recovery path.  

Wed Jul 21 19:35:54 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Set url to about:blank if no src attribute is set in frame tag. It
	prevents segfault reported by Miciah triggered by
	thinkofthechildren.co.uk.  

Wed Jul 21 12:53:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/proxy.c:

	Rewrap comment and remove blank line.  

Tue Jul 20 22:46:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	...and fix @edit_action_table sort order, pointed out by Miciah.  

Tue Jul 20 22:31:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Bla.  

Tue Jul 20 22:26:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In send_event, we |ev->y &= ~KBD_ALT| before calling the menu code 
	and |ev->y |= ~KBD_ALT| after. I don't understand why we do the
	bitwise-or or where |ev| will be used after that, but the
	bitwise-not looks wrong, and disappeared silently in Links 1.00pre5,
	so drop it in ELinks.  

Tue Jul 20 22:25:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, viewer/text/form.c, viewer/text/link.c,
	config/kbdbind.h:

	ACT_EDIT_EDIT -> ACT_EDIT_OPEN_EXTERNAL 

Tue Jul 20 22:14:25 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	check_uri_file(): use static const attributes for @chars.  

Tue Jul 20 22:07:47 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): space fix.  

Tue Jul 20 22:05:58 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): use else if for protocol tests.  

Tue Jul 20 22:04:27 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): extract no_proxy stuff only if needed.  

Tue Jul 20 22:02:37 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): test for ftp protocol in uri before extracting
	environment variables related to ftp proxy.  

Tue Jul 20 22:01:01 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): test for https protocol in uri before extracting
	environment variables related to https proxy.  

Tue Jul 20 21:59:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): test for http protocol in uri before extracting
	environment variables related to http proxy.  

Tue Jul 20 21:56:39 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): drop useless else, and invert a test.  

Tue Jul 20 21:55:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Move the quit: label after the check |ev->x == KBD_CTRL_C|, which is
	already done before the only goto for that label.  

Tue Jul 20 21:54:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Rewrap and add a blank line.  

Tue Jul 20 21:54:17 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): reindent code.  

Tue Jul 20 21:52:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Re-indent part of send_event.  

Tue Jul 20 21:52:20 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): prepare for reindentation, slightly increase
	code redundancy.  

Tue Jul 20 21:46:01 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	Move code from get_proxy_worker() to new proxy_uri().  

Tue Jul 20 21:39:18 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/proxy.c:

	get_proxy_worker(): move (http|https|ftp|no)_proxy to inner branch,
	where they are used.  

Tue Jul 20 19:01:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Introduce add_bookmark_after_selected() and use it after calls to
	add_bookmark() to insert it more logically.  

Tue Jul 20 09:18:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	Simplify the #if jungle.  

Tue Jul 20 09:18:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Jul 20 09:01:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/generic.h:

	Describe.  

Tue Jul 20 07:58:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	In the option manager, when the user selects 'Add', add the new
	option to the selected item's parent if the selected item is a
	collapsed folder.  

Tue Jul 20 07:39:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/mime.c:

	In check_extension_type, do not free handler->program, which is
	allocated along with handler since 2003-12-31 08:50:39, 'Introduce
	mime handler initializer and allocate the program with the struct so
	freeing is easier.' 
	
	This change fixes a segfault when one creates an option
	mime.type.image.x-foo with a valid handler and tries to load a file
	with the extension foo for which no content type is supplied by the
	server or by a mime.extension.foo option.  

Tue Jul 20 07:26:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: mime/backend/mimetypes.c, protocol/uri.c, sched/download.c:

	get_extension_from_uri: Include the leading '.' in the returned
	extension.  
	
	get_temp_name: Now that get_extension_from_uri includes the '.', do
	not add another here.  
	
	get_content_type_mimetypes: Increment |extension| before the first
	iteration to skip the leading '.'. The loop iteratively truncates
	the beginning of the string up to and including the first '.' and
	looks up the result, and so the routine would still work without
	this change, but it looks better with the increment and avoid a
	first interation in which we would look up the content type for an
	empty extension.  
	
	The impetus for this change was to fix the code in http_got_header
	that detects whether the content encoding matches the extension of
	the file, which is the heuristic used to determine whether to
	decompress the data.  http_got_header passes the result of
	|get_extension_from_uri(uri)| to guess_encoding, which expects the
	leading '.'. Thus, we were always decoding the data, and now we
	again decode only when the extension does not match the content
	encoding 
	(e.g., 'Content-Encoding: gzip' and file name 'foo.tar.gz').  

Tue Jul 20 01:36:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Describe the rest of the menu_item_flags.  

Tue Jul 20 01:11:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, mime/dialogs.c:

	Move NO_INTL flag to new_menu() call for File :: History menus. Use
	NO_INTL for URI passing to command menu and mime extension menu.  

Tue Jul 20 00:35:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Fix double free error in external URI passing. I guess it is not
	that well tested ;) 

Tue Jul 20 00:14:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/link.c:

	Remove ACT_MAIN_EDIT 'fake' action. Improve caption for
	ACT_EDIT_EDIT. Workaround rtext only working for main mappings by
	initializing it the cruel way. Pointed out by miernik.  

Mon Jul 19 23:19:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/color.html:

	The color test now uses table and contains all colors in
	util/color.inc 

Mon Jul 19 23:09:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Heh fix isscreensafe() bugfix.  

Mon Jul 19 22:52:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, terminal/screen.c,
	util/string.h, viewer/dump/dump.c:

	Introduce isscreensafe() for testing if char is usable for screen
	writing. Fixes bug in plain renderer.  

Mon Jul 19 22:09:49 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Let text scroller work when mouse is outside dialog borders, so it
	is easier to use.  

Mon Jul 19 21:16:39 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	menu_mouse_handler(): drop redundant test and reindent code.  

Mon Jul 19 21:01:26 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Drop mi_is_unselectable() macro, just use !mi_is_selectable()
	instead.  

Mon Jul 19 16:43:00 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Optimize selectable items search by introducing search_selectable()
	function.  

Mon Jul 19 16:25:04 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): @w -> @height, drop useless int_lower_bound() calls.  

Mon Jul 19 16:14:53 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): move @w, @scr_i calculations where they are needed.  

Mon Jul 19 16:11:01 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): almost complete rewrite to fix issues revealed by
	file completion menu. Home/end were not working when unselectable
	menu items where at start or end of menu, page up/down were working
	with some glitches. All issues should now be fixed, code was
	commented.  

Mon Jul 19 13:33:35 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): add a @wrap parameter, not yet used.  

Mon Jul 19 13:29:29 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): @d -> @steps.  

Mon Jul 19 12:57:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	decode_color(): Stick a comment near the broken hexadecimal rgb
	color workaround.  

Mon Jul 19 12:45:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	decode_color(): Looks like somebody b0rked up the color values in
	the slashcode so treat hex digit string with length 3 or 6 as hex
	colors if the color lookup didn't find a match.  

Mon Jul 19 08:05:10 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	scroll_menu(): fix scroll up in menu, when first item is not
	selectable, issue revealed by file completion menu.  

Mon Jul 19 00:56:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	complete_file_menu(): Don't expand the form state value for
	directories when there is only one entry. Open 'Empty directory'
	menu for ... Use do_menu() since it does the same as the
	do_menu_selected() call.  

Sun Jul 18 18:29:54 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	Compilation fix: |quoted_value| is no more used due to change in
	parse.c (1.81 -> 1.82).  

Sun Jul 18 16:34:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Disable handling of <foo id='a''b'> (well, it is handled as <foo
	id='a'> now) in favour of handling <foo id='a''>. Motivated by lindi
	and the Astalavista's Babelfish.  

Sun Jul 18 16:00:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jul 18 15:53:58 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): no need to set @s_info_connect.fd to -1, since
	on error @s_info_connect.addr is set to NULL.  

Sun Jul 18 15:52:01 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop |free_and_return| label.  

Sun Jul 18 15:50:28 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): break loop instead of gotos.  

Sun Jul 18 15:48:56 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): move @saved_errno declaration in while() loop.  

Sun Jul 18 15:47:46 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop |again| label and use a while() loop
	instead.  

Sun Jul 18 15:46:08 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): add a goto free_and_error.  

Sun Jul 18 15:43:29 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): reindent code.  

Sun Jul 18 15:42:16 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): introduce @saved_errno, and close file
	descriptor immediatly after connect() error.  

Sun Jul 18 15:38:48 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop one goto free_and_error.  

Sun Jul 18 14:06:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/hooks.c:

	EHS_NEXT -> EVENT_HOOK_STATUS_NEXT for now.  

Sun Jul 18 13:57:49 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sun Jul 18 13:33:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, cookies/dialogs.c:

	Annihilate  expressions from listbox messages.  

Sun Jul 18 12:40:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/interlink.c:

	Dropped unreviewable 1.79 (and depending 1.80) - please don't mix
	reindenting code with anything else. You're my cosmo-girl, you're in
	my mind...  

Sun Jul 18 12:36:04 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. You're my hearth, you're my soul...  

Sun Jul 18 11:00:34 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jul 18 10:51:19 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	complete_file_menu(): optimize entries loop. Drop @i for @entry,
	drop useless initialization of @entries to NULL, free @entry->attrib
	as soon as possible, and reorder tests.  

Sun Jul 18 04:44:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add a few comments.  

Sun Jul 18 04:38:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	form_file_menu(): Disable the no elevator hack for now.  

Sun Jul 18 04:33:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/optgroup.html:

	Add file completion test.  

Sun Jul 18 04:28:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Update comments a bit.  

Sun Jul 18 04:01:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/form.c:

	Add menu style file completion to upload file form fields (Bug 294).
	It's quite cool but there is still room for improvements. It should
	be easily extended for usage by other filename inputs widgets.  

Sun Jul 18 02:21:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/file.c, util/file.c:

	Looks like these #includes might belong to the dir entry stat()ing.  

Sun Jul 18 02:20:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/file.c, util/file.c, util/file.h:

	Use file_is_dir() in file_protocol_handler() and move the opendir()
	call to get_directory_entries().  

Sun Jul 18 01:50:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/file.c, util/file.c, util/file.h:

	Move the directory entry table factory to util/file.* so it can be
	used for file text-input form-field completion and maybe file input
	widgets. I don't particularly like the system headers exposed in
	util/file.h the alternative is to move the opendir() call to it and
	just do an fstat() in file_protocol_handler().  

Sun Jul 18 01:32:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/uri.c:

	Use assertm and if_assert_failed instead of INTERNAL in join_urls.  

Sun Jul 18 00:58:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Fix a typo in the caption for ui.success_msgbox: s/sucess/success/.  

Sat Jul 17 22:57:36 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop another goto/label.  

Sat Jul 17 22:53:39 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop goto/label and simplify code.  

Sat Jul 17 22:28:43 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): drop commented out code.  

Sat Jul 17 22:27:10 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	connect_to_af_unix(): use mem_free_set().  

Sat Jul 17 22:21:42 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	Introduce safe_close() and slightly reduce code redundancy.  

Sat Jul 17 20:22:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.h, config/conf.c, dialogs/status.c:

	Partially reverted brainless s/80/DEFAULT_TERMINAL_WIDTH/, updated
	the value of 80 to some more sensible value in each case while at
	it.  

Sat Jul 17 20:14:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Our whitespace police detected a tragic incident in the
	add_char_to_string() avenue.  

Sat Jul 17 20:13:10 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	dlg_format_group(): assert @n > 0.  

Sat Jul 17 20:10:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	buttons_width(): assert @n > 0 and simplify loop test.  

Sat Jul 17 20:08:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/Makefile.am:

	Removed codepage.h reference. Look kids, here you see Jonas, who
	unknowingly broke make dist and nightly builds by forgetting to
	update this. Take example. Now let's go on in the excursion, here
	you see the image of our magnificient project leader...  

Sat Jul 17 20:03:28 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Mark unused parameters using @xxx name.  

Sat Jul 17 19:51:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	select_dlg_item(): use struct widget_data *widget_data.  

Sat Jul 17 19:47:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	dialog_ev_mouse(): shorten lines by using struct widget_data *.  

Sat Jul 17 19:36:31 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	buttons_width(): simplify loop by using @n only.  

Sat Jul 17 16:28:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Include sched/event.h now that it defines an event hook.  

Fri Jul 16 18:55:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/urlhist.c:

	Compile fix.  

Fri Jul 16 18:53:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/urlhist.c, dialogs/menu.c:

	done_url_history(): Free goto url history.  

Fri Jul 16 18:50:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Periodically save searchhist to disk.  

Fri Jul 16 18:46:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/urlhist.c, config/urlhist.h:

	Periodically save gotohist to disk. Fixes bug 229.  

Fri Jul 16 18:33:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Add periodic-saving event description.  

Fri Jul 16 18:30:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, globhist/globhist.c, lowlevel/timer.c:

	Use global history code to make infrastructure for periodically
	saving ~/.elinks info files to disk. It introduces 'infofiles'
	option tree where the 'save_interval' is placed. Idea is to also
	move secure saving there. Maybe they can all go under 'config' tree.
	Anyway the naming of things is not so good so please search and
	replace any oddities.  

Fri Jul 16 15:32:49 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor optimization: test @file_encoding before any string
	comparaison.  

Fri Jul 16 12:27:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	draw_typeahead_match(): Use get_current_link().  

Fri Jul 16 12:20:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	draw_link_text() -> draw_typeahead_match() 

Fri Jul 16 12:13:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	get_blacklist_entry(): Use strlcasecmp() to make sure the whole
	string is matched. Tak Miciah.  

Fri Jul 16 07:00:07 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Fix a logic inversion introduced in revision 1.277 that prevented 
	the display of information on the selected form field in the status
	bar.  

Fri Jul 16 06:55:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	In done_link_members, drop the |name| local variable and pass the
	return value of get_link_name directly to mem_free_if.  

Fri Jul 16 06:13:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/blacklist.c:

	In get_blacklist_entry, return NULL rather than 0 when the assertion
	fails.  

Thu Jul 15 17:51:32 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/renderer.c:

	- Compilation fix.  

Thu Jul 15 16:20:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	add_blacklist_entry(): Use get_blacklist_entry().  

Thu Jul 15 16:19:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	add_blacklist_entry(): @b -> @entry 

Thu Jul 15 16:18:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	del_blacklist_entry(): Use get_blacklist_entry() and cleanup.  

Thu Jul 15 16:13:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.c, blacklist.h:

	Introduce SERVER_BLACKLIST_NONE for the code bloat.  

Thu Jul 15 16:12:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.c, blacklist.h:

	get_blacklist_flags(): Return enum blacklist_flags.  

Thu Jul 15 16:11:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	get_blacklist_flags(): Move assertions and blacklist lookup to
	get_blacklist_entry().  

Thu Jul 15 16:03:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/blacklist.c:

	Make @blacklist static.  

Thu Jul 15 16:01:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.c, blacklist.h, http.c:

	Server blacklist functions now take URI struct.  

Thu Jul 15 15:54:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/inpfield.c, bfu/listbox.c,
	bfu/menu.c, bfu/text.c, config/dialogs.c, config/kbdbind.c,
	config/kbdbind.h, dialogs/exmode.c, dialogs/info.c,
	lowlevel/timer.c, sched/action.c, viewer/text/form.c,
	viewer/text/view.c:

	enum keymap: KM -> KEYMAP 

Thu Jul 15 15:52:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.h, http.c:

	enum blacklist_flags: BL -> SERVER_BLACKLIST 

Thu Jul 15 15:44:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/rewrite/rewrite.c, sched/event.c, sched/event.h,
	scripting/guile/hooks.c, scripting/lua/core.c,
	scripting/lua/hooks.c, scripting/perl/hooks.c:

	enum evhook_status: s/EHS_/EVENT_HOOK_STATUS_/ 

Thu Jul 15 15:38:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, tab.c, tab.h, window.c, window.h:

	enum window_type: s/WT_/WINDOW_/ 

Thu Jul 15 15:35:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/inpfield.c, bfu/listbox.c,
	bfu/menu.c, config/kbdbind.c, lowlevel/timer.c, osdep/os2/os2.c,
	osdep/unix/unix.c, sched/session.c, terminal/event.c,
	terminal/event.h, terminal/kbd.c, terminal/terminal.h,
	terminal/window.c, viewer/text/form.c, viewer/text/view.c:

	enum term_event_type: s/EV_/EVENT_/ 

Thu Jul 15 15:24:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser/forms.c, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c:

	enum form_method: s/FM/FORM_METHOD/ ... and remove double ;; from
	last patch.  

Thu Jul 15 15:20:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c:

	Move link->name and link->form_control members into a union.  
	Introduce get_link_name() and get_link_form_control() macros to wrap
	access.  It saves ~20kB when having fm an /. opened in two tabs.  
	The link->form_control using code is now even uglier.  

Thu Jul 15 14:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	done_listbox_item(): Assert listbox_item->child is empty.  

Thu Jul 15 12:55:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	tree_dup(): Initialize option->root.  

Thu Jul 15 12:50:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Revert last patch. It triggers 'Orphaned unregistered option ...'
	errors.  

Thu Jul 15 10:54:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	delete_option(): Double funny looking del_from_list() to make things
	clearer.  

Thu Jul 15 10:42:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	viewer/text/view.c:

	tab_menu(): Drop @term arg.  

Thu Jul 15 08:42:16 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/group.c, document/html/tables.c,
	document/html/parser/table.h, sched/connection.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Drop bunch of useless/obsolete comments.  

Thu Jul 15 08:29:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Remove a stale comment listing the callers of goto_current_link: 
	submit_form_do has been renamed and there are now many other
	callers.  

Thu Jul 15 08:13:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	viewer/text/view.c:

	Add a |place_above_cursor| parameter to tab_menu to indicate whether
	to draw the menu with the top at |y| or the bottom.  This allows us
	to position the menu appropriately when one right-clicks the tab bar
	and when one right-clicks the document canvas.  

Thu Jul 15 08:03:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	viewer/text/view.c:

	Add |x| and |y| parameters to tab_menu instead of relying on callers 
	to call set_window_ptr.  

Thu Jul 15 07:38:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	viewer/text/view.c:

	Drop the |tab| parameter from tab_menu as the tab can be obtained
	from |ses|.  Remember to update the prototype this time.  

Thu Jul 15 07:30:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	In tab_menu, take |struct window *tab| directly instead of taking a
	void pointer.  

Thu Jul 15 07:13:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Give a NULL value for the |messages| field of the
	options_listbox_ops and keybinding_listbox_ops structures.  

Thu Jul 15 07:03:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/options.c:

	In charset_list, do not initialise |i| twice. The extra
	initialisation was introduced in src/dialogs/options.c 1.150.  

Thu Jul 15 06:53:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	In get_image_text, fix the loop that truncates everything before and
	including the last slash to delete the slash even if it is at the
	start of the string.  

Thu Jul 15 06:22:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/link.c:

	In get_image_text, adjust |len| by the difference between |start|
	and |src| instead of calling strcspn a second time.  

Thu Jul 15 00:49:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parsetst.c:

	Drop unneeded guards.  

Thu Jul 15 00:45:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/: bookmarks.h, dialogs.h, backend/common.c,
	backend/default.c, backend/xbel.c:

	Remove unneeded guards and move decls after #includes.  

Thu Jul 15 00:45:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/: dialogs.h, globhist.h:

	Remove unneded #include. Move decls after #includes which seems to
	be the norm.  

Thu Jul 15 00:43:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.h, mimetypes.h:

	Remove unneeded guards.  

Thu Jul 15 00:36:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/: bookmarks.c, bookmarks.h:

	Drop return value from delete_bookmark().  

Thu Jul 15 00:17:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/.cvsignore:

	Ignore .html (test) and .patch (probe) files often found in (my)
	src/ dir.  

Wed Jul 14 22:16:14 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/: menu.c, menu.h:

	pass_uri_to_command(): @a -> @xxx, since it is not used.  

Wed Jul 14 22:14:43 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Minor indentation and comment fixes.  

Wed Jul 14 22:13:07 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/: menu.c, menu.h:

	dialog_goto_url(): char *url -> unsigned char *url.  

Wed Jul 14 22:11:04 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/: menu.c, menu.h:

	tab_menu(): @d -> @tab_.  

Wed Jul 14 22:08:30 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	menu_url_shortcut(): @d -> @url.  

Wed Jul 14 22:00:03 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	open_in_new_window(): @xxx -> @func.  

Wed Jul 14 21:54:13 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	charset_list(): cleanup, do not call get_cp_name() twice.  

Wed Jul 14 21:37:11 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Assert p && l >= 0 for safety.  

Wed Jul 14 21:32:08 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Reduce number of tests in hard_read()/hard_write(), declare @r,@w in
	loops.  

Wed Jul 14 21:27:16 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Code simplification in hard_write() and hard_read().  

Wed Jul 14 20:04:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/dialogs.c:

	In delete_cookie, rename foreachsafe's temporary variable from
	|from| to |next|.  

Wed Jul 14 19:28:15 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Move code to write_config() and drop write_config_to().  

Wed Jul 14 19:15:29 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Only mark globhist as clean if secure_close() succeeds.  

Wed Jul 14 18:21:17 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Move anonymous test to write_global_history(), and timers funcs,
	drop elinks_home test from callers.  

Wed Jul 14 18:13:49 2004  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Handle add_bookmark() possible failure in bookmarks/dialogs.c.  

Wed Jul 14 18:08:48 2004  Laurent Monin <zas@norz.org>:

	* src/bookmarks/: bookmarks.c, backend/default.c:

	Fix add_bookmark() stupid bug introduced in bookmarks.c (1.133 ->
	1.134), and handle add_bookmark() failure in
	read_bookmarks_default().  

Wed Jul 14 17:44:40 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, globhist/globhist.c, util/conv.c,
	util/conv.h:

	Move sanitize_(title|url)() to conv.{c,h} and use them for globhist
	too. Sanitization now occurs in add_(bookmark|globhist_item)() on
	title and url copies, cleaner.  

Wed Jul 14 17:21:23 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Drop redundant @term test, get_bfu_color() does the job.  

Wed Jul 14 15:14:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.h:

	Remove listbox_item->root.  

Wed Jul 14 15:12:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	push_kbdbind_add_button(): Cleanup usage of listbox_item->root.  

Wed Jul 14 15:02:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Hack up a way to resolve keymap box items from action strtonum by
	checking that the pointer is within a table range range.  

Wed Jul 14 14:52:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	get_keybinding_root(): Now only action boxes uses item->root.  

Wed Jul 14 14:33:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, dialogs.h, kbdbind.c:

	Move keybinding listbox init/done functionality to dialog code. Had
	to move init/free keymap functions.  

Wed Jul 14 14:20:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, dialogs.h, kbdbind.c, kbdbind.h:

	Cleanup keybinding text toggling. Only the dialog code needs to know
	about it.  

Wed Jul 14 14:17:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	{init,free}_action_listboxes() -> {init,done}_keybinding_listboxes() 

Wed Jul 14 14:13:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Introduce get_keybinding_action_box_item().  

Wed Jul 14 14:02:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Oops this little change slipped into the get_root() introducing
	patch. Harmless 

Wed Jul 14 14:00:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, options.c, options.h, opttypes.c:

	Add root member to struct option. Use it for implementing correct
	listbox get_root() op. Sanitize change_hook crawling by using
	option->root instead of option->root->udata. More (autocreate)
	option code can probably also be cleaned up to use option->root.  

Wed Jul 14 13:51:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/bookmarks.c, bookmarks/dialogs.c, cache/dialogs.c,
	config/dialogs.c, config/kbdbind.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	Introduce listbox_ops->get_root(). The listbox_item->root member is
	still there and some implementations simply return item->root for
	now. Non hierarchic listbox browser just return NULL.  

Wed Jul 14 12:02:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.h, cookies/dialogs.c:

	Make listbox_ops->delete() also delete nested listboxes. Bookmarks
	and option deletion alreay does it so just make cookie ops do it.
	Fixes access to free()d memory because do_delete_item() deleted
	childs before the parent and the cookie code would automagically
	remove the cookie_server.  

Wed Jul 14 09:44:07 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 14 02:28:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	html_img(): Split out image from src='<text>' setup.  

Wed Jul 14 02:06:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	html_applet(): Cleanup.  

Wed Jul 14 01:22:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Drop the type casting now that zas has made the part known to HTML
	parser.  

Wed Jul 14 00:58:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Update description of ui.sessions.auto_save_foldername to mention
	uniqueness.  

Wed Jul 14 00:45:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Doh them last minute changes. Fix last patch to currently detect
	bookmark folders.  

Wed Jul 14 00:44:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Only delete matching bookmark folders when saving the auto session
	but then delete _all_ matches.  

Wed Jul 14 00:31:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	terminal/terminal.c:

	Introduce bookmark_auto_save_tabs() that wraps
	bookmark_terminal_tabs().  

Wed Jul 14 00:24:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	send_connection_info(): Use foreachsafe().  

Wed Jul 14 00:24:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/lists.h:

	Introduce foreachsafe() list iterator and use it for free_list().  

Wed Jul 14 00:03:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/lists.h:

	Introduce list_typeof() macro to wrap typeof(). With a little extra
	type casting code dublication was decreased.  

Tue Jul 13 22:11:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	delete_bookmark(): Cleanup the infanticide.  

Tue Jul 13 21:22:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Simplify code for bookmark root checking by not going through the
	listbox_items.  

Tue Jul 13 19:53:45 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Move continue_download_do() before continue_download() and drop its
	prototype.  

Tue Jul 13 19:51:41 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Move common_download_do() before common_download() and drop its
	prototype.  

Tue Jul 13 19:50:14 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Move create_download_file_do() before create_download_file() and
	drop its prototype.  

Tue Jul 13 19:49:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Make delete_option_do() static.  

Tue Jul 13 19:44:57 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Make write_cache_entry_to_file() static.  

Tue Jul 13 16:54:37 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser.h, renderer.c,
	tables.c, tables.h, parser/forms.c, parser/forms.h, parser/parse.c,
	parser/parse.h:

	Use struct part *part instead of void *f.  

Tue Jul 13 16:28:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	It should be ok to just use cached documents.  

Tue Jul 13 16:24:02 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Compilation fix. Jonas, please verify if 1 is ok or wrong.  

Tue Jul 13 15:09:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/renderer.c, document/renderer.h,
	sched/action.c, viewer/text/draw.c, viewer/text/draw.h:

	Make draw_formatted() and no caching support introduced in 'Make
	render_document_frames() always rerender ...' less aggressive and by
	tristating @rerender arg to draw_formatted(). 2 now means no caching
	and is only used for ACT_MAIN_RERENDER action.  

Tue Jul 13 14:48:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: draw.c, draw.h:

	Make draw_doc() static.  

Tue Jul 13 10:31:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	render_html_document(): tidy up and more comments.  

Tue Jul 13 10:12:31 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Jul 13 08:42:10 2004  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/http.c, viewer/text/form.c:

	Comments about special handling of LF char by http_send_header()
	were added. Thanks to Jonas.  

Mon Jul 12 20:55:27 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Revert changes to line terminators, it breaks post on fm, need to be
	rechecked.  

Mon Jul 12 20:48:49 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	encode_multipart(): use add_crlf_to_string(), add_char_to_string()
	were applicable, and cleanup.  

Mon Jul 12 20:40:14 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Use \r\n instead of \n as line terminators. It seems to be more
	conform to RFCs and to behavior of other web browsers. Please test
	heavily.  

Mon Jul 12 18:32:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, options.h, renderer.c:

	Make render_document_frames() always rerender the document by
	disabling the formatted cache using new document_options->no_cache
	boolean member. Idea by Miciah. It should fix amongst other things
	the View :: Rerender menu action and also rerendering document when
	draw_formatted(..., @rerender) is called with non-zero @rerender.
	This will make followed links from a document appear visited when
	going back (hmm should this only be done when CONFIG_GLOBHIST is
	defined?). Bad thing is a lot of rerendering can be result and it
	may have to be fine-tuned a bit or even reverted if it is too
	annoying.  

Mon Jul 12 18:25:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, options.h, renderer.c, html/parser.c:

	Revert last patch. My tree was poisoned.  

Mon Jul 12 18:23:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, options.h, renderer.c, html/parser.c,
	html/parser.c:

	html_hr(): Use get_html_max_width() if get_width() fails. This fixes
	an off by something error in the width calculation that was spotted
	by zas. Note usage of get_html_max_width() don't add extra margin
	width which the old code did (by looking at links2) but using the
	max width is more in the spirit of what mozilla and opera does. The
	bad width calculation was introduced in (1.145 -> 1.146) 'Bunch of
	miscelleanous cleanup, optimizations, assert(), ....' over a year
	ago.  

Mon Jul 12 18:16:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: internal.h, parser/parse.c, parser/table.c:

	Introduce get_html_max_width() macro.  

Mon Jul 12 15:07:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	enter(): For text-input form-field when insert mode is off simply
	submit form.  

Mon Jul 12 14:31:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	next_link_in_dir(): Use get_current_link() so somthing bad dosn't
	happen if current link is -1.  

Mon Jul 12 14:03:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	get_protocol(): Try to make code simpler.  

Mon Jul 12 13:52:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Replaced unused PROTOCOL_INVALID with PROTOCOL_BACKENDS for proocol
	backend index checking.  

Mon Jul 12 13:43:44 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	@s -> @socket.  

Mon Jul 12 13:39:44 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	log_data(): make it static and reduce indentation level.  

Mon Jul 12 12:07:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	link_typeahead_handler(): 'I shall proceed and continue to rock the
	mic' when an error occurs so you don't have to start all over.
	Requested by calmar.  

Mon Jul 12 12:00:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	do_typeahead(): Use separate arg (@match) for the returned link
	number.  

Mon Jul 12 11:58:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	do_typeahead(): Oops fix wrong renaming in (1.242 -> 1.243) -
	'Rename enum typeahead_code values to better match what they are
	mapped to.' 

Mon Jul 12 11:31:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/protocol.c,
	protocol/protocol.h, protocol/http/Makefile.am,
	protocol/http/http.h, protocol/http/https.c, protocol/http/https.h,
	sched/connection.c:

	Introduce need_ssl boolean member to protocol_backend. It will make
	it easier to add nntps:// support. SSL initialization now happens in
	run_connection() and nicely pair up with the SSL teardown in
	interrupt_connection().  

Mon Jul 12 11:16:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, uri.c:

	Reintroduce free_syntax boolean member in protocol backends. For now
	about: uses it.  

Mon Jul 12 10:59:23 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/config/cmdline.c, src/lowlevel/connect.c,
	src/lowlevel/dns.c, src/lowlevel/interlink.c,
	src/osdep/getifaddrs.c, src/osdep/osdep.c, src/osdep/osdep.h,
	src/protocol/ftp/ftp.c:

	set_ip_tos_throughput() was introduced in osdep.c, and a test for
	sys/socket.h was added to configure.in, headers inclusion was
	modified/improved according to these changes. It simplifies things a
	bit.  

Sat Jul 10 18:57:23 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Attempt to fix a potential bug in connected(): @func may be NULL and
	still used, as func(conn). This case should not occur since with
	assertions enabled, but it may when these are disabled. Please
	verify, this patch is may be wrong if i missed something.  

Sat Jul 10 18:40:43 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/file/cgi.c:

	Drop redundant call to abort_conn_with_state(), alloc_read_buffer()
	takes care of that.  

Sat Jul 10 14:30:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Minor cleanup.  

Sat Jul 10 13:31:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	mark_option_as_deleted(): For OPT_TREE also mark children as
	deleted.  

Sat Jul 10 13:02:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.inc:

	Make user protocol option initialization table driven.  

Fri Jul  9 18:01:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add more to FIXME about protocol detection.  

Fri Jul  9 17:55:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): In the handling for unknown protocols in the the
	parse_uri goto loop's URI_ERRN_OK switch label.  
	
	- Improve <IP-address>:<port> check by ``resetting'' the infinite
	  loop prevention.  
	
	- Use check_uri_file() to detect local files with ':'s in the name.  
	
	- Add FIXME about code duplication.  

Thu Jul  8 21:06:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Hmm .. fix the strange bug on newsforge.com (added in tablebg.html)
	but always expanding width - 1 chars even for the right table edge
	expanding. This removes the hack I added in (1.358 -> 1.359). Stuff
	like /. looks more 'tight' but let's see if it is not for the
	better. :) 

Thu Jul  8 20:33:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	parse_table_attributes(): Minor cleanup.  

Thu Jul  8 17:17:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Convert to FIXME.  

Thu Jul  8 17:03:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/tablebg.html:

	Test for the problem with center alignment at newsforge.com 

Thu Jul  8 16:31:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): Remove last suspicious expand_lines() call. Now
	we expand before and after drawing table cells and for each cell and
	that should be enough.  

Thu Jul  8 16:25:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): It seems that the special line expansion for
	table border case is not needed after we align the edge of the whole
	table.  

Thu Jul  8 16:22:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): Oops. Fix off by @y error in last patch.  

Thu Jul  8 16:14:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): Remove internal block.  

Thu Jul  8 15:39:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	expand_lines(): Don't do anything if not rendering background
	colors.  

Thu Jul  8 15:29:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	expand_lines(): Take the bgcolor as arg.  

Thu Jul  8 14:05:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): Fix the easy fix for off by one error in right
	table edge alignment when there are borders involved.  

Thu Jul  8 13:53:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): Hmm .. the easy way to fix off by one error in
	right table edge alignment. The deeper issue is that we align always
	to the right. It is very obvious when looking at sf with 255 colors.
	The separators in the top menu '|' is drawn with it's darker
	background color as '| '. This is a problem that is hard to fix and
	not a very serious one but it leads the last column to be sometimes
	drawn too wide.  

Thu Jul  8 13:32:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): My assertion about removing the the
	expand_table_.. option was wrong. But I won't introduce the use of
	it again instead we should maybe ignore it if no background color
	usage is set. Anyway expand lines before and after drawing all
	cells. Now the left edge of the body table on /. is nice. Off by one
	errors on the right edge is very obvious now.  

Thu Jul  8 12:44:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	struct table_cell: Rename @group -> @is_group, and make it a boolean
	member.  

Thu Jul  8 11:30:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/html/tables.c:

	Obsolete document.html.expand_table_columns since always expanding
	table columns slipped in the backdoor. The only thing (protected
	and) affected by the option seems to be tha drawing of background
	color for borders so simply check if table->border instead. Lightly
	tested on various sites, so please report any issues.  

Thu Jul  8 11:12:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_cell(): Take @cell as arg and ditch @col and @row args.  

Thu Jul  8 11:09:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): Initialize the HTML state alignment to that of
	the cell. If not for anything else it makes the code cleaner.  

Thu Jul  8 11:00:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): Use the calculated width that accounts for stuff
	like column spanning. Fixes amongst other things background coloring
	in sf's left menu.  

Wed Jul  7 05:45:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/draw.c:

	Move assignment to |vs->y| and call to set_link from
	check_document_fragment to draw_doc.  

Wed Jul  7 05:36:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/draw.c:

	Whoops, don't set did_fragment if the page isn't done loading.  

Wed Jul  7 04:26:01 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/draw.c:

	Assign |vs->did_fragment = 1;| in |draw_doc| rather than in
	|check_document_fragment|. Now, all references to |did_fragment| are
	in the same routine.  

Wed Jul  7 04:22:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/draw.c:

	Negatory, revert. Prepare for a different approach, with help from
	Jonas.  

Wed Jul  7 04:12:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/draw.c:

	check_document_fragment's return value is never used, so change the
	return type to void.  

Wed Jul  7 03:04:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In search_hierbox_browser, pass init_listbox_context |NULL| for its
	|item| argument, which it assigns to |context->item|, instead of
	passing it |box->sel| and then assigning NULL to |context->item|.  

Wed Jul  7 02:59:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	Delete an extra semicolon introduced in revision 1.95.  

Wed Jul  7 02:44:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	smart_config_string(): Fix bad attempt at matching _template_
	options. I think. I mean it is smart code. Too smart for me. Anyways
	the comment suggests that the purpose is to match _template_ options
	so I take it's word for it. It's bad because with searching
	invisible items might not be saved and with _template_ options
	visible they could be saved. Ok there is a check for _template_
	later in the function but hope the point is clear.  

Wed Jul  7 02:24:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bfu/listbox.h,
	bookmarks/dialogs.c, cache/dialogs.c, config/dialogs.c,
	cookies/dialogs.c, dialogs/download.c, formhist/dialogs.c,
	globhist/dialogs.c, protocol/auth/dialogs.c:

	Attempt to provide generic hierbox browser searching. It sucks I
	know and that is why _you_ need to help and improve it. ;) 

Wed Jul  7 02:02:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, dialogs/download.c:

	Fix misplaced box->ops->get_info(), it should be get_text(). Add
	NULL returning get_file_download_info() to fix crash when pressing
	the 'Abort' button in the download manager.  

Wed Jul  7 01:37:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Ditch listbox_info enum and add get_text() op. Idea by Miciah.  

Tue Jul  6 11:05:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/dialogs.c, cache/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	Ditch listbox_info enum and add get_text() op. Idea by Miciah.  

Tue Jul  6 10:25:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	s/c_server/cookie_server/.  

Mon Jul  5 11:56:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/util/string.h:

	Remove the isalnum() check. If it's missing that it's probably
	missing the rest of the <ctype.h> ones.  

Mon Jul  5 11:46:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	Fix last patch + minor cleanup.  

Mon Jul  5 11:38:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, string.h:

	If no isalnum() define it to (isalpha || isdigit).  

Mon Jul  5 11:19:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Reverted my the->a English fix.  

Mon Jul  5 10:41:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	set_window_title(): Outcomment GNU screen window name setting.
	Miciah is da screen man, and I was just looking for a random patch.  

Mon Jul  5 05:51:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Fix the default set_clipboard_text routine to correctly set GNU
	Screen's clipboard (or, rather, its '.' register) when running under
	GNU Screen.  This was broken with revision 1.130, 'Drop most
	register variable attribute.' 

Mon Jul  5 04:45:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/ftp/ftp.c:

	Re-align the comments describing the members of |struct
	ftp_connection_info|.  

Mon Jul  5 02:54:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Decrease indentation.  

Sun Jul  4 18:17:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_link(): Work around the link wrap around by restoring the value
	of doc_view->vs->current_link so it doesn't matter if
	next_link_in_view() 'resets' it.  

Sun Jul  4 17:33:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_link(): Add FIXME about the buggy link wrap around.  

Sun Jul  4 16:45:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	Tidyup.  

Sun Jul  4 16:43:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/backend/xbel.c, config/conf.c,
	document/html/parser/parse.c, terminal/event.c, terminal/kbd.c,
	util/string.h:

	isA() -> isident() + minor tidyup.  

Sun Jul  4 16:31:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	try_document_key(): Cleanup. Use isasciialpha().  

Sun Jul  4 16:29:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/marks.c, intl/charsets.c,
	intl/gettext/dcigettext.c, protocol/uri.c, util/conv.h,
	util/string.h:

	Introduce isasciialpha(), isasciialnum() and isident().  

Sun Jul  4 14:56:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Fix serious bug where loading non existing history files would leave
	the input_history->nosave flag set to 1.  

Sun Jul  4 14:03:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/exmode.c, dialogs/exmode.h, dialogs/menu.c,
	modules/module.c:

	Modularize exmode and load/save exmode history.  

Sun Jul  4 13:32:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/opttypes.c, util/conv.c:

	Allow '\'' for string delimiters in config set commands.  

Sun Jul  4 13:23:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	More isquote() usage.  

Sun Jul  4 13:06:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/css/scanner.c,
	document/html/parser/parse.c, protocol/header.c, util/string.h:

	IS_QUOTE() -> isquote(), and use it for option and CSS parsing.  

Sun Jul  4 12:15:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	get_esc_code(): Drop unchecked return value.  

Sun Jul  4 12:13:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: intl/charsets.c, intl/gettext/loadmsgcat.c,
	protocol/date.c, protocol/uri.c, protocol/ftp/ftp.c,
	protocol/ftp/ftpparse.c, protocol/http/http.c, protocol/smb/smb.c,
	terminal/kbd.c, util/conv.h, viewer/text/view.c:

	s/c < '0' || c > '9'/!isdigit(c)/ and s/c >= '0 && c <=
	'9'/isdigit(c)/.  

Sun Jul  4 11:29:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/mimetypes.c, util/string.h:

	Oops. Wake up and fix last patch.  

Sun Jul  4 11:26:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/exmode.c, document/html/parser/parse.c,
	intl/gettext/loadmsgcat.c, intl/gettext/localealias.c,
	mime/backend/mimetypes.c, protocol/header.c, util/string.h:

	Introduce skip_nonspace() + more skip_space() usage.  

Sun Jul  4 11:04:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, cookies/parser.c, document/html/frames.c,
	intl/gettext/localealias.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c, protocol/header.c, protocol/proxy.c,
	util/string.h:

	skip_whitespace() -> skip_space(), remove remains of local defines.  

Sun Jul  4 10:54:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, intl/gettext/localealias.c,
	protocol/header.c:

	More uses of skip_whitespace().  

Sun Jul  4 10:54:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	draw_view_status(): Only draw search word if @active. Bug introduced
	when making the draw_current_link() -> draw_view_status() switch.  

Sun Jul  4 10:49:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/date.c:

	parse_day(): Use isdigit().  

Sun Jul  4 01:10:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/date.c, protocol/ftp/ftpparse.c, util/conv.c:

	Do the string lowering in month2num(). Make parse_month() check that
	there are 3 chars so month2num() won't access beyond the string.
	Looks like most of date parsing does little checking.  

Sun Jul  4 00:01:28 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Pass struct string * to send_cmd() and simplify code.  

Sat Jul  3 23:58:21 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Split ftp_send_retr_req() -> end_it_line_by_line().  

Sat Jul  3 23:37:20 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftpparse.h:

	Improve and reorder comments.  

Sat Jul  3 23:29:49 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/: ftp.c, ftpparse.c, ftpparse.h:

	Warn about FTPPARSE_(SIZE|MTIME|ID)_UNKNOWN zero value, and let
	memset() do the job, simplifying code even more.  

Sat Jul  3 23:20:43 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/: ftp.c, ftpparse.c:

	Use memset() to nullify struct ftpparse fields.  

Sat Jul  3 16:28:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, bfu/inpfield.h, config/conf.c, config/options.inc,
	dialogs/status.c, osdep/osdep.c, osdep/os2/os2.c,
	osdep/win32/win32.c, viewer/dump/dump.c:

	Introduce DEFAULT_TERMINAL_{WIDTH,HEIGHT} macros with values 80 /
	25. I hope it is ok to make the default height 25 rather than 24
	since that is what -dump likes.  

Sat Jul  3 16:25:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	handle_trm(): Fix bug setting width and height to non-zero before
	calling get_terminal_size(). If the ioctl() would fail COLUMNS and
	LINES environment variables would not be checked. Introduced in
	(1.58 -> 1.59) 'Introduce struct terminal_info that holds all the
	stuff sent over the interlink'. Motivation was that the terminal
	event was initialized with these values and would later be updated
	but all should be handled by get_terminal_size() now.  

Sat Jul  3 16:03:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, terminal/kbd.c:

	get_terminal_size() [default one]: If ioctl() fails set @x and @y to
	zero so resize_terminal() don't have to.  

Sat Jul  3 15:56:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	set_window_title(): Set the GNU screen window name. Idea snatched
	from w3m.  

Sat Jul  3 14:13:45 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	add_char_to_string(): minor simplification.  

Sat Jul  3 11:31:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix bug in (1.295 -> 1.296). Add crlf to accept charset string and
	not header string.  

Sat Jul  3 11:01:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Move isatty() checks to check_stdio() and call it after both
	parse_options() so any commandl line options are correctly
	overridden.  

Sat Jul  3 10:27:55 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/: http/http.c, ftp/ftp.c:

	Use add_crlf_to_string().  

Sat Jul  3 10:26:45 2004  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	Introduce add_crlf_to_string().  

Sat Jul  3 09:58:40 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Use ASCII_LF/ASCII_CR.  

Sat Jul  3 09:44:40 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	get_ftp_response(): reduce indentation level.  

Sat Jul  3 01:34:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	parse_element(): Improve tag soup handling and allow stuff like
	<font=pn-normal>.  

Sat Jul  3 01:21:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	Insert Adam Borowski's words from debian bug 228977 regarding xterm
	detection.  

Sat Jul  3 00:04:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/encoding/encoding.c:

	Revert protocol/file/file.c:1.159 changing core part of
	read_encoded_file() from if() chain to a switch() - I think it's
	more clear as it was.  

Sat Jul  3 00:02:30 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Fix last patch, handle errors if any. Spotted by pasky ;).  

Fri Jul  2 23:51:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Introduce ftp_data_connect() and reduce code redundancy in
	ftp_retr_file().  

Fri Jul  2 23:39:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Compilation fix of our put_chars() spaces assertion.  

Fri Jul  2 23:38:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	put_chars(): update last_tag_for_newline also if
	html_is_preformatted() because in that case the existing test is
	unreliable (and often wrong). Could fix Debian bug 219331 (<pre
	id=foo> positioned foo wrongly) reported by Francesco Potorti
	<Potorti@isti.cnr.it>. Insights and help all along the way by Jonas.
	Hope this does not break anything :-).  

Fri Jul  2 23:34:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Introduce a test in put_chars() to make sure our thoughts about the
	eerie last_tag_for_newline test are right - if we didn't pass the
	test assert that there are no non-whites in the string. Please
	report any failures.  

Fri Jul  2 23:30:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	ftp_got_final_response(): trivial clean up.  

Fri Jul  2 23:29:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Document renderer_context.last_tag_for_newline.  

Fri Jul  2 23:17:38 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/header.c:

	parse_header(): parameters tidy up.  

Fri Jul  2 23:14:22 2004  Laurent Monin <zas@norz.org>:

	* src/: cookies/cookies.c, dialogs/document.c, document/renderer.c,
	document/html/parser.c, mime/mime.c, protocol/header.c,
	protocol/header.h, protocol/http/http.c:

	s/_http_header/_header/ 

Fri Jul  2 23:07:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Simplify parse_html()'s element processing plant by eliminating the
	dark goto put_sp, which seems to be rather pointless. This is quite
	adventurous so it's worth it to stop by this revision when looking
	for any HTML screwups.  

Fri Jul  2 23:04:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/internal.h:

	Try to describe html_context.putsp.  

Fri Jul  2 23:03:50 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/header.c:

	get_http_header_param(): minor tidyup.  

Fri Jul  2 23:01:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Make the impact of the put_chrs()'s -1 branch a little more clear.  

Fri Jul  2 22:43:55 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftpparse.c:

	Reformat comments to be in ELinks style and fix a minor typo (bellow
	-> below).  

Fri Jul  2 22:42:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	put_chrs(): Move the len == 0 check near the place where len is
	decremented. Removes one putsp asignment.  

Fri Jul  2 22:34:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	put_chrs(): Use oneline logics.  

Fri Jul  2 22:31:32 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/ftp/ftp.c:

	Use bitfields for boolean fields in struct ftp_connection_info.  

Fri Jul  2 22:17:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed subconcious errorneous swap of two if()s in put_chrs() by me
	in the tidyup, spotted by Jonas.  

Fri Jul  2 22:14:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	put_chrs(): simplify trivially.  

Fri Jul  2 22:12:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	put_chrs() tidyup.  

Fri Jul  2 22:09:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Trivial put_chars() tidyup.  

Fri Jul  2 18:07:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/proxy.c:

	proxy_probe_no_proxy(): Be more tolerant and skip leading whitespace
	so '<host1>, <host2>, ...' will also work. Use strcasestr() to
	compare. Fixes debian bug 218451: 'does probably not correctly grok
	no_proxy'.  

Fri Jul  2 17:09:35 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Fix french translation.  

Fri Jul  2 17:05:45 2004  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Fix delete bookmarks' folder text.  

Fri Jul  2 17:03:33 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/dialogs.c:

	Fix delete cookies folder text.  

Fri Jul  2 16:55:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jul  2 16:50:38 2004  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Fix cut'n'paste error.  

Fri Jul  2 16:17:42 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, cache/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	English fixes.  

Fri Jul  2 16:00:46 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.h, checkbox.h, inpfield.h, listbox.h, text.h:

	Cleanup, shorter lines in macros.  

Fri Jul  2 15:51:38 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.h:

	add_dlg_text(): use struct widget *.  

Fri Jul  2 15:48:32 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.h:

	add_dlg_radio(): cleanup.  

Fri Jul  2 15:46:24 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.h:

	add_dlg_listbox(): use struct widget *.  

Fri Jul  2 15:43:30 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/button.h:

	add_dlg_button_do(): use struct widget *.  

Fri Jul  2 15:37:31 2004  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Add [ Clear ] button to bookmarks manager.  

Fri Jul  2 15:09:31 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, cookies/dialogs.c, dialogs/download.c,
	formhist/dialogs.c, globhist/dialogs.c, protocol/auth/dialogs.c:

	Set per-hierbox messages for all managers. Please check english and
	improve.  

Fri Jul  2 13:05:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	English fix.  

Fri Jul  2 12:23:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/file.c:

	Removed IMHO non-needed description from file_is_dir().  

Fri Jul  2 12:22:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/file.c:

	Removed non-needed !! from file_is_dir().  

Fri Jul  2 11:36:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/tables.html:

	Add test of table tagsoup and troubleling rowspan attribute.  

Fri Jul  2 11:22:06 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, bfu/listbox.h, bookmarks/dialogs.c:

	Introduce struct listbox_ops_messages, it permits to use per-hierbox
	messages, as an example it was done for bookmarks deletion. More
	work needed.  

Fri Jul  2 10:34:11 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Drop now useless bookmarks.h inclusion.  

Fri Jul  2 09:51:20 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c,
	bookmarks/backend/common.c:

	Manipulate bookmarks_dirty though bookmarks_(set|unset|are)_dirty()
	functions, and keep it static. Add a callback function
	expansion_callback() to struct hierbox and cleanup bfu/hierbox.c
	from bookmarks_dirty stuff.  

Fri Jul  2 07:36:40 2004  Laurent Monin <zas@norz.org>:

	* src/util/file.c:

	file_is_dir(): use stat(), compilation fix.  

Fri Jul  2 04:16:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	file_is_dir(): Use state() instead of fstat() and don't leak file
	descriptors (?).  

Fri Jul  2 03:28:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	expand_tilde(): Decrease indentation.  

Fri Jul  2 03:24:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/util/file.c:

	expand_tilde(): Use getpwnam() to add support for '~<user>'
	expanding.  

Fri Jul  2 02:14:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Remove old expand_line() call.  

Fri Jul  2 02:11:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Add newline.  

Fri Jul  2 00:26:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.c:

	Disallow using configuration file commands in exmode in anonymous
	mode.  

Fri Jul  2 00:24:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.c:

	Revert r1.41 (not allowing exmode in the anonymous mode).  

Fri Jul  2 00:24:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/action.c:

	ACT_MAIN_(KEYBINDING|OPTIONS)_MANAGER is now not accessible in
	anonymous mode.  

Thu Jul  1 23:45:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tr33.  

Thu Jul  1 23:26:33 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Revert idiotic cookies_context patch. Time to sleep...  

Thu Jul  1 22:54:31 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Group cookies global variables in struct cookies_context and use
	only one global for all.  

Thu Jul  1 22:29:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Hopefully fix <Esc> not triggering menu when inside of an input item
	(and not in the insert mode).  

Thu Jul  1 22:26:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/user.c:

	Cleanup a rather silly-looking get_user_program() assert().  

Thu Jul  1 21:28:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/forms.c:

	Check if <textarea> has nowrap attribute if no wrap attribute is
	found.  

Thu Jul  1 21:05:30 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jul  1 20:51:47 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Greeks are still tough, prolonged and
	still 0:0. They are pretty dangerous now but we'll kick their ass.  

Thu Jul  1 20:48:49 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated hungarian translation (go go go Czech edition) 

Thu Jul  1 20:40:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Reindent document.browse.forms.insert_mode. Big chance for Czech in
	GR:CZ right now, but unsuccessful :-(.  

Thu Jul  1 20:31:12 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Greek:Czech still 0:0, but we are playing
	better than those losers now.  

Thu Jul  1 20:19:56 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated hungarian translation. (tribute to 0:0) 

Thu Jul  1 19:54:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/table.c:

	Don't rely on add_table_bad_html_end() to do the job in </caption>.
	Greek vs Czech in the second half-life, still 0:0.  

Thu Jul  1 19:47:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/table.c:

	Drop evil inlines from add_table_bad_html_*().  

Thu Jul  1 19:32:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Fixed terminal_interlink.utf_8 description. Half-time, still 0:0.  

Thu Jul  1 19:27:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Zero-width arrays aren't well portable -
	terminal_interlink.input_queue [0] -> [1]. Pavel Nedved out of the
	playground.  

Thu Jul  1 19:23:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Reverted part of 1.335, returning the goto to the game. Czech:Greek
	still 0:0, Pavel Nedved injured.  

Thu Jul  1 19:21:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Convert INTERNAL() after apply_stretch_method() call in
	distribute_widths() to an assertm().  

Thu Jul  1 18:39:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	FIXME about {struct tag} and find_tag() being in a too specific
	place.  

Thu Jul  1 18:33:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Remove superfluous FIXME.  

Thu Jul  1 18:18:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Fix comment.  

Thu Jul  1 18:12:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup variables passed to table border drawing functions.  

Thu Jul  1 17:59:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Misc cleanups.  

Thu Jul  1 17:48:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_frames(): Move table rule information gathering to
	init_table_rules().  

Thu Jul  1 17:22:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	handle_interlink_event(): Oops only destroy the current terminal. ;) 

Thu Jul  1 16:29:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	realloc_line(): @x -> @length.  

Thu Jul  1 15:20:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	handle_interlink_event(): Don't send event to any tabs (and trigger
	assertion failures). Instead set @terminate to non-zero and let the
	select loop handle the rest.  

Thu Jul  1 15:07:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Add note about why tag soup handling is after
	done_html_parser_state().  

Thu Jul  1 14:46:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Ditch unused @indent arg to draw_table_bad_html(). Make
	format_table() draw the bad HTML drawing after the created HTML
	state has been removed. This makes the tag soup handling more like
	before the 1.288 -> 1.289 change and fixes the link ordering for bad
	HTML.  

Thu Jul  1 14:42:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_html() -> draw_table_caption(). Add FIXME about bug 432.  

Thu Jul  1 14:38:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_bad_html(): Revert the change to draw bad table HTML
	using draw_table_html(). Change (1.288 -> 1.289) 'Improve handling
	of <caption> (bug 432) ...'. Fixes weird rendering of tag soup on
	http://www.dr.dk/nyheder/penge/article.jhtml?articleID=181763 but
	not completely, the link navigation is still b0rked in the right
	menu.  

Thu Jul  1 14:26:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Add {struct html_start_end} @caption member to {struct table} and
	output that first while saving the table->bad_html stuff to later.  

Thu Jul  1 13:34:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.h:

	Move up {struct html_start_end} so it is declared before {struct
	table}.  

Thu Jul  1 13:33:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_bad_html(): Fix bug where entries would be drawn on top
	of each other.  

Thu Jul  1 13:30:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_bad_html(): Split out entry drawing to draw_table_html().  

Thu Jul  1 13:06:28 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	in_viewx() -> link_in_view_x().  

Thu Jul  1 12:48:49 2004  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	lindi email address was updated at his request.  

Thu Jul  1 12:22:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp, src/intl/charsets.c, src/intl/codepage.h,
	src/intl/codepage.inc:

	Move N_CODEPAGES #define to intl/codepage.inc and remove the .h
	file.  

Thu Jul  1 12:13:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/: charsets.c, charsets.h:

	Move intl/codepages.h include.  

Thu Jul  1 11:58:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c, terminal.h:

	Move {struct terminal} members used for internal communication to a
	new {struct terminal_interlink}. It is only used by terminal/event.c
	so define it there and allocate the input queue bytes at the end of
	the struct so that interlink cleanup is simply a matter of free()ing
	term->interlink.  

Thu Jul  1 11:56:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, terminal/screen.c:

	Add missing includes.  

Thu Jul  1 11:41:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.h:

	Standardize #include guards.  

Thu Jul  1 10:54:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	CSS is compile time configurable.  

Wed Jun 30 23:19:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	All hail goto removing code duplication.  

Wed Jun 30 23:17:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	distribute_widths(): Split out the @stretch_method handling to
	apply_stretch_method().  

Wed Jun 30 22:44:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	stretch_columns(): Use while loop instead of gotos. Break if no
	@stretch_col is found.  

Wed Jun 30 22:39:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	distribute_widths(): Split out column stretching to
	stretch_columns().  

Wed Jun 30 21:42:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	distribute_widths(): Mark visited columns by setting the
	@widths[col] entry to zero so the ending stretch looping will skip
	it. Removes need for @visited_cols array.  

Wed Jun 30 21:11:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	distribute_widths(): Allocate visited_cols last and simplify the
	error path.  

Wed Jun 30 16:56:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser.h:

	Move ln_break() prototype from document/html/internal.h to
	document/html/parser.h, and drop inline from its declaration (?).  

Wed Jun 30 16:46:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	line_break(): @t -> @tag.  

Wed Jun 30 16:44:56 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	set_pos_y(): @yl -> @height.  

Wed Jun 30 16:10:26 2004  Laurent Monin <zas@norz.org>:

	* src/: document/document.h, document/html/renderer.c,
	document/html/renderer.h, viewer/text/draw.c:

	Move find_tag() from viewer/text/draw.c to document/html/renderer.c,
	do not export struct tag anymore (removed from document/document.h),
	export find_tag() instead.  

Wed Jun 30 15:35:46 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	@xl -> @width, @yl -> @height.  

Wed Jun 30 14:38:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/td-width.html:

	Add test for spacer cells.  

Wed Jun 30 14:03:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Tidy up comment. Move split TODO.  

Wed Jun 30 08:43:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Keep only functions with a reasonable speed_sensitivity/size factor
	inline.  

Wed Jun 30 06:00:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Support 'white-space: normal' too.  

Wed Jun 30 05:51:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c, src/document/css/property.c,
	src/document/css/property.h, src/document/css/value.c,
	src/document/css/value.h, test/css/simplefont.html:

	Add support for 'white-space: pre' CSS property.  

Wed Jun 30 05:33:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/style.h, document/html/internal.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c,
	document/html/parser/parse.c:

	Replace ALIGN_NONE enum format_align value with AT_PREFORMATTED enum
	format_attr flag. Also make it possible to align preformatted text.
	Fixes bug 472.  

Wed Jun 30 03:26:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Introduce doucment->css_magic variable. It is calculated from the
	ids of all the imported cache entries that is imported. Fixes
	rerendering triggered by available CSS import. Hope this hack will
	do until we get CSS stylesheet cache or something even more scary.  

Wed Jun 30 03:00:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): Fix line expansion to cover the whole cell height
	and not just the one containing formatted text. This is done by
	using already calculated @height variable. Fixes various background
	table glitches. Most note worthy the cell backgrounds on
	http://www.videohelp.com/capturecards.php now looks ok.  

Wed Jun 30 02:11:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Reintroduce usefull expand_lines() that does and replaces the
	expand_line() looping.  

Wed Jun 30 01:52:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Drop useless expand_lines(). It is implied by expand_line(). Drop
	return value from expand_line() since it is not used.  

Wed Jun 30 01:31:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): Use already calculated @row_height.  

Wed Jun 30 01:09:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	Trivial space tidyup.  

Wed Jun 30 01:07:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Trivial space tidyup. Describe draw_table_bad_html().  

Wed Jun 30 00:47:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Missing part of @u -> @visited_cols renaming.  

Wed Jun 30 00:28:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Cleanup SSL configuring. OpenSSL don't need to disallow yes dir but
	GNUTLS does because the ssldir is not actually used.  

Tue Jun 29 23:15:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	@margin -> @indent in get_table_margin() and format_table(),
	get_table_margin() -> get_table_indent().  

Tue Jun 29 23:13:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	format_table(): @ww -> @total_width 

Tue Jun 29 23:12:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	@x -> @margin in get_table_margin() and format_table().  

Tue Jun 29 23:08:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Move has_*line_width() below get_hline_width().  

Tue Jun 29 23:04:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): @max -> @stretch_width, @max_index ->
	@stretch_col, @max_width -> @col_spare_width 

Tue Jun 29 22:58:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): @cols_size -> @cols_array_size 

Tue Jun 29 22:55:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): Tidyup.  

Tue Jun 29 22:54:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): @wq -> @did_stretch, @om -> @stretch_method 

Tue Jun 29 22:51:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	@u -> @visited_cols 

Tue Jun 29 22:49:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): @d -> @spare_width, @dd -> @total_spare_width 

Tue Jun 29 22:48:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): Correct the description.  

Tue Jun 29 22:47:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths(): Describe what does it do (hopefully).  

Tue Jun 29 22:45:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths() tail: Tidyup.  

Tue Jun 29 22:45:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	distribute_widths() tail: Remove now redundant @q and thus simplify
	the assertm().  

Tue Jun 29 22:44:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	More simplifications of distribute_widths() tail.  

Tue Jun 29 22:41:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Minor simplification of distribute_widths().  

Tue Jun 29 21:28:53 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	First try Lua 4.0, then Lua 5.0 - that's what we still tune it for.  

Tue Jun 29 15:39:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Introduce has_hline_width(table, row) macro.  

Tue Jun 29 15:29:59 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @p -> @total_width.  

Tue Jun 29 15:27:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): use int_bounds().  

Tue Jun 29 15:25:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): minor tidyup.  

Tue Jun 29 15:23:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @ss -> @max_width.  

Tue Jun 29 15:19:45 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @mss -> @max, @mii -> @max_index.  

Tue Jun 29 15:09:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Drop commented out check_cell_widths(), cvs will keep it for us.  

Tue Jun 29 15:06:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_margin(): comment cleanup.  

Tue Jun 29 13:44:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c:

	get_bordercolor(): Ditch return value. It is never handled.  

Tue Jun 29 13:09:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): xw -> width, yw -> height.  

Tue Jun 29 13:06:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cell(): xp -> x, yp -> y.  

Tue Jun 29 11:18:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Revert part of last get_table_margin() patch, use of int_bounds()
	here causes segfault here. Why ?.  

Tue Jun 29 10:56:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_cells(): Split out the height sanity checking to
	check_table_height().  

Tue Jun 29 10:43:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Move the inner parts of draw_table_cells() loop to
	draw_table_cell(). Caching of struct variables in local ones was
	ditched to simplify draw_table_cell() calling.  

Tue Jun 29 10:29:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table_bad_html() -> draw_table_bad_html(),
	display_complicated_table() -> draw_table_cells(),
	display_table_frames() -> draw_table_frames().  

Tue Jun 29 10:24:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Improve handling of <caption> (bug 432) (and other bad html ;) tags
	by formatting them to be within the real_width of the table. It now
	looks more like the way cells are formatted.  

Tue Jun 29 09:20:51 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_margin(): @ww -> @width, >>1 -> /2, use int_bounds().  

Tue Jun 29 08:14:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	display_complicated_table() tail check: table->part->cy +
	table->real_height -> @old_height.  

Tue Jun 29 08:12:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	display_complicated_table() tail check: @yp -> @our_height.  

Tue Jun 29 08:10:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Separate table->real_height calculation from get_table_heights() to
	get_table_real_height() but only moan about the impossibility of
	using it in display_complicated_table() tail check.  

Tue Jun 29 07:50:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Separate the tail display_complicated_table() sanity check to a
	separate block, compiled in only ifndef CONFIG_FASTMEM (since in
	that case the assertm() will be thrown away anyway so it'd be quite
	pointless).  

Tue Jun 29 07:46:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Simplify the assertion check at the tail of
	display_complicated_table().  

Tue Jun 29 07:20:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	format_bad_table_html() -> format_table_bad_html() 

Tue Jun 29 07:16:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/table.c:

	It's bad HTML, not bad table, dammit! ;-). add_bad_table_html_*() ->
	add_table_bad_html_*() 

Tue Jun 29 04:06:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Initialize table->bgcolor in parse_table_attributes().  

Tue Jun 29 03:48:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	get_table_cellpadding(): Return -1 as error code.  

Tue Jun 29 03:47:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Split out something that looks like cellpadding
	fixup to get_table_cellpadding().  

Tue Jun 29 03:33:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	get_table_margin(): Switch the alignment.  

Tue Jun 29 03:29:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Move table x offset aka. margin calculation to
	get_table_margin().  

Tue Jun 29 03:25:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Add table->align member and parse the value the generic way.  

Tue Jun 29 03:23:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	Group attribute get functions.  

Tue Jun 29 03:07:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Move align attribute checking used for x offset
	calculation + local @al variable to block.  

Tue Jun 29 03:01:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Remove @cye local variable by rearranging
	calculations.  

Tue Jun 29 02:46:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c:

	format_table(): Move attribute parsing to parse_table_attributes().  

Tue Jun 29 02:43:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->border directly.  

Tue Jun 29 02:42:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->vcellpadding directly.  

Tue Jun 29 02:41:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->cellpadding directly.  

Tue Jun 29 02:37:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->cellspacing directly.  

Tue Jun 29 02:35:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->rules directly.  

Tue Jun 29 02:34:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Initialize table->frame directly.  

Tue Jun 29 02:31:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Parse before extracting attributes.  

Tue Jun 29 02:30:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Tidyup.  

Tue Jun 29 02:29:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	parse_table_attributes(), get_bordercolor(): Move.  

Tue Jun 29 02:24:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.h:

	struct table: has_width -> full_width, since we set it to
	par_format.width - margins and original name was 'wf'.  

Tue Jun 29 02:21:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.h:

	parse_table_attributes(): Handle width. Reintroduce
	table->has_width.  

Tue Jun 29 02:11:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	parse_table_attributes(): Handle id.  

Tue Jun 29 02:09:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Introduce parse_table_attributes().  

Tue Jun 29 01:54:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Prospone border color initialization to after table
	parsing.  

Tue Jun 29 01:48:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_bad_table_html(): Cleanup. Use start/end local variables and
	don't modify the table pointers. There's no need to.  

Tue Jun 29 01:43:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	format_table(): Move formatting of bad html to separate function. Do
	the formatting after the various table formatting members has been
	initialized (especially table->part).  

Tue Jun 29 01:37:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Make bad_html array and size members of struct table. Define
	functions to add start and end pointers.  

Tue Jun 29 01:22:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	Oops fix off by oner in last patch.  

Tue Jun 29 01:17:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	parse_html(): Cleanup bad html end setup. Just check if end pointer
	is missing instead of using local state variable.  

Tue Jun 29 00:45:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/table.c:

	parse_html(): Cleanup bad html position adding.  

Mon Jun 28 22:52:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/table.c:

	Add a warning at the top that this file does not fit to the general
	HTML parser infrastructure.  

Mon Jun 28 22:51:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Add the 'const' qualifier to the border tables, to help the compiler
	to optimize them.  

Mon Jun 28 22:49:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: tables.c, parser/table.c:

	Keep only functions with a reasonable speed_sensitivity/size factor
	inline.  

Mon Jun 28 22:39:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/.cvsignore:

	Ugh, looks like .cvsignore got blank. Funny.  

Mon Jun 28 21:42:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	has_vline_width() macro introduced.  

Mon Jun 28 20:23:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Cleanup includes and such.  

Mon Jun 28 20:16:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: tables.c, parser/table.c, parser/table.h:

	Oops we only need one free_table().  

Mon Jun 28 20:12:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, html/tables.c,
	html/parser/Makefile.am, html/parser/table.c, html/parser/table.h:

	Split out HTML table parsing. A lot of the table internals will have
	to be exposed. But it should make it more easy to split functions
	which zas would like. Unused check_cell_widths() #if 0'ed.  

Mon Jun 28 18:35:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_point(): @i,@j -> @col,@row.  

Mon Jun 28 18:31:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_vline(): @i,@j -> @col,@row.  

Mon Jun 28 18:30:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_hline(): @i,@j -> @col,@row.  

Mon Jun 28 18:28:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	display_table_frames(): @i,@j -> @col,@row.  

Mon Jun 28 18:17:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_table(): rearrange code is a more logical fashion,
	@real_(cols|rows) are related to cells, while @real_columns_count is
	related to columns.  

Mon Jun 28 15:31:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Fix for parsing of numerical values in get_num() when the attribute
	value is the empty string. Introduced in document/html/parser.c
	(1.374 -> 1.375) 
	
	Spotted and tracked down by zas, one-liner by pasky and I get to be
	the lucky one commiting it.  

Mon Jun 28 13:29:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Revert get_{v}align() changes.  

Mon Jun 28 11:14:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/style.h, document/css/value.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c:

	enum format_align: ALIGN_BLOCK -> ALIGN_JUSTIFY, since that's
	what'tis used for.  

Mon Jun 28 11:07:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/dialog.c, bfu/group.c, bfu/hierbox.c,
	bfu/inpfield.c, bfu/style.h, bfu/text.c, config/dialogs.c,
	cookies/cookies.c, cookies/dialogs.c, dialogs/document.c,
	dialogs/download.c, dialogs/info.c, dialogs/menu.c,
	dialogs/options.c, document/css/value.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c,
	document/html/parser/parse.c, formhist/dialogs.c,
	formhist/formhist.c, mime/dialogs.c, protocol/user.c,
	protocol/auth/dialogs.c, sched/connection.c, sched/download.c,
	sched/session.c, sched/task.c, scripting/lua/core.c,
	terminal/tab.c, viewer/text/draw.c, viewer/text/form.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	enum format_align: AL_* -> ALIGN_* 

Mon Jun 28 10:50:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.h:

	Tidyup.  

Mon Jun 28 10:38:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/header.h:

	Fix standard header.  

Mon Jun 28 10:33:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Move VALID_PROTOCOL() macro to c-file.  

Mon Jun 28 10:07:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	get_valign(): Return alignment.  

Mon Jun 28 10:02:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	get_align(): Return alignment.  

Mon Jun 28 07:55:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_cell(), expand_cells(): @dst_col, @dst_row -> @dest_col,
	@dest_row. Idea by pasky ;).  

Mon Jun 28 02:27:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: codes.c, codes.h:

	Make http_code_to_string() static.  

Sun Jun 27 21:37:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/about.c:

	Oops fix file header.  

Sun Jun 27 21:36:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: Makefile.am, about.c, about.h, protocol.c:

	Move about_protocol_handler to separate file so it will be easier to
	add useless junk to it.  

Sun Jun 27 20:43:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c:

	about:bloat 

Sun Jun 27 19:30:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, protocol/protocol.c,
	protocol/protocol.h:

	Introduce about: protocol backend and use about:blank to fix the
	remaining part of bug 473.  

Sun Jun 27 19:07:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fix crash when pressing the up arrow in a document with no links
	reported by zas.  

Sun Jun 27 18:36:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Partially fix bug 473. Now it ain't barfing stack traces anymore.
	But a deeper bug has to be solved and which this thing reveals.
	<frame>-tags with no 'src'-attribute is badly handled since no frame
	struct is created for them.  

Sun Jun 27 18:34:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, config/cmdline.c, config/options.inc,
	document/html/renderer.c, document/html/tables.c,
	document/html/parser/forms.c, document/html/parser/parse.c,
	document/plain/renderer.c, globhist/globhist.c, osdep/generic.h,
	osdep/beos/overrides.c, protocol/rewrite/.cvsignore, util/conv.c,
	viewer/text/link.c, viewer/text/search.c:

	MAXINT -> INT_MAX, MAXLONG -> LONG_MAX 

Sun Jun 27 18:34:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, dialogs.c, parser.c:

	All hail automake conditionals.  

Sun Jun 27 17:19:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	At least reset the window title to a blank one, if we cannot restore
	the original one. Idea by Solar Designer.  

Sun Jun 27 17:14:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	When printing the terminal title, avoid also ISO-8859-* control
	characters and 0x7f, insuring the whole thing by iscntrl(). Patch by
	Solar Designer.  

Sun Jun 27 17:08:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	Skip invalid characters in terminal title altogether, don't just
	substitute them by a space. Also add an explanation why do we do
	this at the right place.  

Sun Jun 27 14:06:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fix a forgotten stupidity in get_link_x_bounds(). Unbelievable.  

Sun Jun 27 13:20:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	ssl_connect(): Cleanup client_cert setup.  

Sun Jun 27 13:13:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/connect.c:

	English fix.  

Sun Jun 27 13:13:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Introduce ssl_do_close() wrapper.  

Sun Jun 27 13:10:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	isalpha() || isdigit() -> isalnum() and clarify lowalpha in the
	surrounding comment.  

Sun Jun 27 13:09:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Introduce also ssl_do_{read,write} wrappers.  

Sun Jun 27 13:06:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Simplify the -default-keys--conditioned bind_do() call.  

Sun Jun 27 13:03:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/connect.c:

	How are we not handling certificates w/ GNUTLS.  

Sun Jun 27 13:01:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/connect.c:

	get_ssl_error() -> ssl_do_connect(), because that is what it does
	;-).  

Sun Jun 27 12:59:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Group OpenSSL code in same #ifdef.  

Sun Jun 27 12:55:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	A little cleanup of over-switched ssl #ifdef'ing.  

Sun Jun 27 12:29:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.h:

	Describe KBDB_DEFAULT flag.  

Sun Jun 27 09:49:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Merge add_keymap_default_keybindings() intor
	add_default_keybindings() and use default_keybindings[] table.  

Sun Jun 27 09:45:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Introduce default keybinding info table.  

Sun Jun 27 09:41:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix keybinding saving. It is not possible to simply check if
	KBDB_DEFAULT flag is set and keybinding is not bound to
	'none'-action since the flag is apparently used for something else.
	It is inherited when the key combo belongs to a default keybinding.
	Instead introduce a default keybinding table iterator to check if
	...  

Sun Jun 27 09:21:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	H_FRAME_POSITION, V_FRAME_POSITION: @tt -> @table, @xx -> @col, @yy
	-> @row.  

Sun Jun 27 09:17:53 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	display_complicated_table(): get_vline_width(table, row) is a non
	sense, fixed. This was an old typo imho.  

Sun Jun 27 09:13:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	display_complicated_table(): @row -> @row2, @i,@j -> @col,@row. A
	possible bug was detected.  

Sun Jun 27 09:06:20 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights(): @i, @j -> @col, @row.  

Sun Jun 27 09:03:30 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths(): @i, @j -> @col, @row.  

Sun Jun 27 08:58:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): label a -> again.  

Sun Jun 27 08:56:57 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): reduce indentation in switch().  

Sun Jun 27 08:49:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @w -> @widths, @mx -> @max_widths.  

Sun Jun 27 08:43:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @i -> @col.  

Sun Jun 27 08:36:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths(): @i,@j -> @col,@row.  

Sun Jun 27 08:32:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_vline_width(): @w -> @width.  

Sun Jun 27 08:30:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_cell_widths(): tidy up.  

Sun Jun 27 08:28:23 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	format_cell(): @column -> @col.  

Sun Jun 27 08:25:42 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_cell(), expand_cells(): @x -> @dst_col, @y -> @dst_row.  

Sun Jun 27 02:26:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parser.c:

	Rewrite and comment parse_cookie_str() to make it more readable,
	compliant and tolerant.  
	
	- Allow empty or missing value token which is mentioned in the rfc.  
	
	- Allow (non-ending) spaces in value token. Fixes bug 174 (BZ change
	column).  

Sat Jun 26 23:19:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Rewrite the next_link_in_dir()'s verical movement inner loop - it's
	simpler and faster now.  

Sat Jun 26 23:18:52 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jun 26 23:10:36 2004  Laurent Monin <zas@norz.org>:

	* NEWS:

	Add -default-keys option.  

Sat Jun 26 23:09:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Tidyup.  

Sat Jun 26 23:09:10 2004  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Improve -default-keys description.  

Sat Jun 26 23:09:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Simplify the inner loop for vertical movement in next_link_in_dir().  

Sat Jun 26 23:06:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: link.c, link.h, search.c, view.c:

	in_view() -> link_in_view(), in_viewy() -> link_in_view_y() 

Sat Jun 26 23:03:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: link.c, link.h, view.c:

	next_in_dir() -> next_link_in_dir() 

Sat Jun 26 23:03:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: link.c, link.h, search.c, view.c:

	next_in_view() -> next_link_in_view() 

Sat Jun 26 22:59:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Note that wrapping over page boundary in move_link_dir() will break.  

Sat Jun 26 22:57:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Un-inline move_link() and move_link_dir().  

Sat Jun 26 22:57:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Fix misnavigation in tabular design.  

Sat Jun 26 22:34:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fix a plain stupidity in get_link_*_intersect().  

Sat Jun 26 22:05:20 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Directional links navigation.  

Sat Jun 26 22:03:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Make sure get_link_*_intersect() never returns zero
	on success. Dear diary, pasky is again trying to attain the CIA top
	committer position.  

Sat Jun 26 22:02:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Fix of the minute - do not enter infinite loop when
	going left from a link starting at the 0th column.  

Sat Jun 26 21:58:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Now fix move-link-left not working at all (or working
	plain weird).  

Sat Jun 26 21:55:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Fix infinite loop when trying to move right from the
	last link on the line.  

Sat Jun 26 21:53:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fix down-at-the-document-bottom link wraparound.  

Sat Jun 26 21:31:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	next_in_dir(): Fix an off-by-one error in vertical movement,
	crashing when hitting the document bottom.  

Sat Jun 26 21:29:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/link.c, viewer/text/link.h, viewer/text/view.c:

	Introduced directional links navigation - actions
	move-link-(up,down,left,right), move_link_dir() and next_in_dir().
	Requested by Matus Lovecky of Siemens.  

Sat Jun 26 21:25:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Whoops, fix get_link_index().  

Sat Jun 26 20:33:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Introduced get_link_index().  

Sat Jun 26 19:23:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_widths(): @mmax_c -> @max_cols_width.  

Sat Jun 26 19:20:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@tx_size -> @cols_size.  

Sat Jun 26 19:18:48 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@n_links -> @new_link_num.  

Sat Jun 26 19:17:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Sort cookie servers alphabetically. Makes the cookies manager
	usable.  

Sat Jun 26 19:15:39 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@i -> @col, @j -> @row, (@nl, @n_link) -> @link_num, @n_links ->
	@new_link_num.  

Sat Jun 26 19:03:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	INIT_X -> INIT_REAL_COLS, INIT_Y -> INIT_REAL_ROWS, @rx ->
	@real_cols, @ry -> @real_rows.  

Sat Jun 26 18:39:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/header.c:

	parse_http_header_param(): Trim ending spaces. It will help to fix
	174, parsing cookie paths from '... path=/ ;...' strings and ending
	spaces in filenames extracted from Content-Disposition.  

Sat Jun 26 16:52:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Statify get_visible_links_range().  

Sat Jun 26 15:44:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	get_visible_links_range(): Tidyup.  

Sat Jun 26 15:43:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	get_visible_links_range(): Cleanup.  

Sat Jun 26 15:43:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Split get_visible_links_range() from next_in_view().  

Sat Jun 26 14:40:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parser.c:

	parse_cookie_str(): Use memset().  

Sat Jun 26 14:36:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, parser.c, parser.h, parsetst.c:

	Pass cookie string to parse_cookie_str().  

Sat Jun 26 14:35:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parsetst.c:

	Use stack allocated strings.  

Sat Jun 26 14:27:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Describe link.points.  

Sat Jun 26 14:25:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parser.c:

	parse_cookie_str(): s/return 0/return NULL/.  

Sat Jun 26 13:06:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Describe a bit what's going on in next_in_view().  

Sat Jun 26 12:45:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Describe document.lines{1,2}.  

Sat Jun 26 11:53:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/parser.c:

	Improve the stepwise debug printing.  

Sat Jun 26 10:53:49 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	parse_table(): @p -> @in_cell.  

Sat Jun 26 10:48:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	parse_table(): @qqq -> @cols, @rows.  

Sat Jun 26 10:45:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct table: @x -> @cols, @y -> @rows.  

Sat Jun 26 10:37:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct cell: @mx -> @col, @my -> @row.  

Sat Jun 26 10:33:30 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	parse_table(): @x -> @col, @y -> @row, @l_col -> @last_bgcolor.  

Sat Jun 26 10:25:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Pop up 'No links in current document' error when doing link
	typeahead with no links. Idea by Kalle Olavi Niemitalo (debian bug
	238281).  

Sat Jun 26 10:21:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	skip_table(): tidy up.  

Sat Jun 26 10:17:37 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	skip_table(): move @name and @namelen declarations to inner loop.  

Sat Jun 26 10:12:55 2004  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Typo fix.  

Sat Jun 26 09:52:17 2004  Laurent Monin <zas@norz.org>:

	* src/config/: cmdline.c, conf.c:

	New command line option: -default-keys, which permit to override
	user-defined keybindings and restoring default ones. Until now, it
	was not possible to restore default keybindings but by manually
	deleting entries from conf file. Please improve.  

Sat Jun 26 03:45:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd_number, return FRAME_EVENT_OK instead of
	FRAME_EVENT_REFRESH after calling input_field for the 'Enter link
	number' box: delete_window will trigger the necessary redraw, and,
	anyway, the BFU is asynchronous, so input_field will return before a
	link is selected.  

Sat Jun 26 03:17:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd_number, split the if-else-if block into two if
	blocks as each ends with a return statement.  

Sat Jun 26 03:14:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Add a missing blank line before a return.  

Sat Jun 26 03:13:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd_number, return FRAME_EVENT_OK instead of
	FRAME_EVENT_REFRESH if we're to open the 'Enter link number' box but
	there are no links on the page.  

Sat Jun 26 03:10:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Change frame_ev_kbd_number to return an |enum frame_event_status|
	value 
	(whoops, it already has that type!) and remove that silly nested
	switch from frame_ev_kbd.  

Sat Jun 26 03:02:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Set |ses->kbdprefix.repeat_count| to 0 in frame_ev_kbd_number 
	instead of signalling to the caller to do it.  

Sat Jun 26 02:58:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd_number, introduce the local variable doc_opts.  

Sat Jun 26 02:50:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev_kbd_number, move the declaration and initialisation of
	|document| to the start of the routine so that both the if-block and
	the else-block can use it.  

Sat Jun 26 02:47:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Introduce frame_ev_kbd_number to reduce indentation.  

Sat Jun 26 02:26:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove FIXME comment for what I just fixed.  

Sat Jun 26 02:22:09 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Allow user key-bindings to over-ride 0-9 and the same in combination
	with alt, which by default are used to select links or specify
	command prefixes.  Clean-ups are forthcoming.  

Sat Jun 26 02:11:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	If document.browse.accesskey.priority = 1, allow user key-bindings 
	to over-ride document accesskeys, per the option's description.  

Fri Jun 25 21:03:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_link(): Do the session repeat_count looping and get rid of
	macro wrappers.  

Fri Jun 25 18:49:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed 1.232 (smart keystrokes parsing) so that it's more readable,
	more logical and doesn't potentially look after the end of the
	string.  

Fri Jun 25 17:05:55 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	read_key(): with the help of new strcasetonum(), be more tolerant
	about keystroke format, accept f1 for F1, doWn for Down, etc.  

Fri Jun 25 17:01:24 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	parse_keystroke(): be more tolerant about keystroke format, shift,
	ctrl and alt prefixes are now case insensitive, and separator can be
	+ as well as -. Entry is normalized before further treatment.  

Fri Jun 25 16:16:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	init_listbox(): Tidyup.  

Fri Jun 25 16:09:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Compilation fix.  

Fri Jun 25 16:01:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Factor out some duplicate code in the move_link_*() functions, using
	a prefactored macro instead. Will become more useful with the
	directional link navigation.  

Fri Jun 25 15:31:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Improve comment.  

Fri Jun 25 14:58:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_html(): statement was not so useless, just fix last patch to
	prevent infinite parser loop.  

Fri Jun 25 14:32:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_cell(): @i -> @col, @j -> @row, use for() instead of while().  

Fri Jun 25 14:27:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells(): @i -> @col, @j -> @row, @tx -> @last_col, @ty ->
	@last_row.  

Fri Jun 25 13:36:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_cell_widths(): @i -> @col, @j -> @row.  

Fri Jun 25 13:34:38 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_cell_widths(): @i -> @col, @j -> @row.  

Fri Jun 25 13:32:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths(): set @i to 0 in for().  

Fri Jun 25 13:30:34 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_html(): drop useless @html assigment. Weird.  

Fri Jun 25 10:52:29 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/menu.c, cookies/cookies.c,
	document/renderer.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, document/plain/renderer.c,
	formhist/formhist.c, intl/charsets.c, osdep/generic.h,
	osdep/osdep.c, protocol/header.c, protocol/uri.c,
	protocol/file/cgi.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/download.c, sched/event.c, scripting/lua/core.c,
	terminal/color.c, terminal/draw.c, terminal/event.c,
	terminal/screen.c, util/base64.c, util/color.c, util/conv.c,
	util/conv.h, util/fastfind.c, util/hash.c, util/string.c,
	viewer/text/draw.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c:

	Drop most register variable attribute.  

Fri Jun 25 10:18:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	distribute_values(): @n -> @count, @w -> @wanted, @s -> @sum.  

Fri Jun 25 10:09:20 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	dst_width() -> distribute_values().  

Fri Jun 25 10:06:08 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	dst_width(): minor optimization, introducing @delta.  

Fri Jun 25 10:04:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	dst_width(): @p -> @values, @lim -> @limits.  

Fri Jun 25 09:54:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/window.c, util/lists.h, viewer/text/form.c,
	bfu/menu.c, cache/cache.c, sched/connection.c, sched/history.c:

	Introduce list_has_next(list, item) macro.  A little extra cleanup
	in delete_window_ev() removing bogus check.  

Fri Jun 25 09:27:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	set_td_width(): @x -> @col, @f -> @force.  

Fri Jun 25 09:20:23 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@min_t -> @min_width, @max_t -> @max_width, minor fields
	reorganization in struct table.  

Fri Jun 25 09:11:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@max_c -> @max_cols_widths, @min_c -> @min_cols_widths.  

Fri Jun 25 09:03:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths(): @s -> @colspan, @ns -> @new_colspan.  

Fri Jun 25 08:25:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights(): @xw -> @width.  

Fri Jun 25 08:22:27 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights(): @s -> @rowspan, @ns -> @new_rowspan.  

Fri Jun 25 08:18:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths(): make @new_colspan local to the loop.  

Fri Jun 25 08:15:53 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths(): @s -> @colspan, @ns -> @new_colspan. Use
	different names for different purposes: @s -> @width, @ns ->
	@new_width.  

Fri Jun 25 01:49:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Don't add link numbers for non accessible links. It seems to be
	caused by the parser putting a space char after stuff like
	<img>-tags or comments wrapped in <a>-tags. Fixes bug 30.  

Fri Jun 25 01:06:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	A little stupid perhaps but quite annoying if using '_' as a name
	for autocreated options.  
	
	Always ensure that them _template_ options are before anything else
	so a lonely autocreated option (with _template_ options set to 
	invisible) will be connected with an upper corner (ascii: `-)
	instead of a rotated T (ascii: +-) when displaying it.  

Fri Jun 25 00:48:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	add_opt_sort(): Do the @bpos updating in the start of the loop so we
	correctly ignore options marked as deleted or which have NULL box
	item member. This should fix the overflow assertion failure filed as
	bug 471. Note the test case in the bug description was invalidated
	by the last patch.  

Fri Jun 25 00:25:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Only mark built-in options as deleted or in other words if
	option->flags & OPT_ALLOC do a real deletion. Inspired by something
	Miciah and zas discussed on irc today.  

Thu Jun 24 23:49:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	render_html_document(): Only set document->title if the title string
	in non empty so the fallback to using document->uri in
	render_document() will be used.  

Thu Jun 24 18:15:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, config/kbdbind.c, config/kbdbind.h:

	Add ACT_MENU_SEARCH action by default bound to '/'.  Implement menu
	searching by using input lines and strcasestr(). A little bloated
	perhaps but ...  
	
	Fixes bug 24.  

Thu Jun 24 15:43:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@xcols -> @cols_x, @xc -> @cols_x_count, @nc -> @new_cols_x.  

Thu Jun 24 15:36:28 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use plural for columns widths array and rows heights array:
	@columns_width -> @cols_widths, @rows_height -> @rows_heights,
	@rows_height (local variable) -> @row_height. Perhaps clearer.  

Thu Jun 24 15:32:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	menu_kbd_handler(): Cleanup default label.  

Thu Jun 24 15:29:45 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights(): make more obvious table->rows_height is an
	array.  

Thu Jun 24 15:26:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths(): make more obvious table->(max_c|min_c) are
	arrays.  

Thu Jun 24 15:22:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths(): make more obvious table->max_c is an array.  

Thu Jun 24 15:16:38 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths(): @w -> @widths.  

Thu Jun 24 15:15:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Fix fix for bug 52 to only output chars before the first &#13; 

Thu Jun 24 15:12:21 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@m -> @max, @mi -> @max_index. An extra space in a comment was
	dropped too.  

Thu Jun 24 15:09:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Really nasty hack to make &#13; handling in <pre>-tags
	lynx-compatible. It works around the entity handling done in the
	renderer, since checking #13 value there would require something
	along the lines of NBSP_CHAR or checking for '\n's in AL_NONE text.  
	
	Fixes bug 52 (and 387) 

Thu Jun 24 15:05:46 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use for() instead of while() loop.  

Thu Jun 24 13:17:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Don't save default keybindings that has not been deleted. Should fix
	bug 337 although I don't know if it breaks the config style saving
	or that requires some more complex changes. If not please close the
	bug.  

Thu Jun 24 11:11:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Change the default value for document.browse.accesskey.priority from
	1 to 2.  Anyone who wants alt-h to select the 'Home' link on
	freshmeat.net instead of opening the Help menu can figure out how to
	change the setting.  

Thu Jun 24 11:02:28 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Refresh when an access key is used and
	document.browse.accesskey.priority = 1.  

Thu Jun 24 11:01:13 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix access-key code to work when document.browse.accesskey.priority
	= 2.  

Thu Jun 24 09:48:14 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Translation fix.  

Thu Jun 24 09:07:06 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_cell_width(): @w -> @width.  

Thu Jun 24 09:04:34 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	@m -> @margin, @xs -> @x, @ys -> @y.  

Thu Jun 24 08:39:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jun 24 07:35:34 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove find_tag, which was 'moved' to src/viewer/text/draw.c.  

Thu Jun 24 06:35:32 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: main.c, config/options.c, config/options.h:

	Update option box-items to reflect the value of config.show_template 
	when they are first loaded.  

Wed Jun 23 20:33:18 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update again, so that I beat the feeble pl.po.  

Wed Jun 23 20:31:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Fix goto-url event hook for all the cool people using scriptingless
	URI rewriting. :) 

Wed Jun 23 20:24:50 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Jun 23 20:17:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	We usually say 'status bar' to the user, not 'statusbar'.  

Wed Jun 23 20:16:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c, src/scripting/lua/hooks.c,
	src/scripting/perl/hooks.c, doc/events.txt:

	Fix up the goto-url event hooks to accept NULL @ses (and described
	that case in the documentation) and clean up remnants of current_uri
	passing in decode_session_info(). Motivated by zas.  

Wed Jun 23 15:14:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Tidy up.  

Wed Jun 23 15:09:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Remaining global variables were moved to renderer_context struct.  

Wed Jun 23 14:54:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	struct renderer_context was introduced. @table_cache_entries,
	@last_link_to_move, @last_tag_to_move, @last_tag_for_newline,
	@link_state_info were moved to it.  

Wed Jun 23 14:51:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/forms.c:

	Introduce init_form_control().  

Wed Jun 23 14:02:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c, textarea.h:

	Revert last patch.  

Wed Jun 23 13:18:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c, textarea.h:

	textarea_edit(): Take session arg.  

Wed Jun 23 12:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	Remove eofff from struct html_context. It is only used by
	find_form_for_input() which already uses @i variable as eof pointer.
	@i is passed by html_*() form field handlers and is a pointer to the
	current form field's attributes and find_form_for_input() is
	supposed to search for previous <form> tag and load values into the
	struct form variable so it should be ok.  

Wed Jun 23 12:29:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	sched/action.c:

	{next,previous,zoom}-frame -> frame-{next,prev,maxmize} 

Wed Jun 23 12:13:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/link.c, parser/parse.c, parser/stack.c:

	html_context.ff -> html_context.part 

Wed Jun 23 10:53:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/stylesheet.h, html/internal.h,
	html/parser.c, html/parser/link.c, html/parser/parse.c:

	Add css_styles to struct html_context.  

Wed Jun 23 10:33:06 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c,
	parser/stack.c:

	struct html_context: @html_stack -> @stack.  

Wed Jun 23 10:28:12 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, document/html/parser.c:

	Fix trailing spaces.  

Wed Jun 23 10:26:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c,
	parser/stack.c:

	@html_stack was added to struct html_context.  

Wed Jun 23 10:07:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, renderer.c, renderer.h:

	@margin was added to struct html_context.  

Wed Jun 23 08:50:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	check_document_fragment(): Complete make over.  

Wed Jun 23 08:46:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Fix an off-by-one error in insert_spaces_in_link that could result 
	in a leading added space being erroneously marked as a part of a
	link.  Thanks to Jonas for finding the problem and pointing out the
	fix.  

Wed Jun 23 08:41:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	draw_doc(): Split out fragment handling to
	check_document_fragment().  

Wed Jun 23 08:18:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/draw.c:

	Fix title.  

Wed Jun 23 08:16:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/css/css.c,
	protocol/http/codes.c, sched/action.c, sched/session.c,
	viewer/text/Makefile.am, viewer/text/draw.c, viewer/text/draw.h,
	viewer/text/form.c, viewer/text/search.c, viewer/text/view.c,
	viewer/text/view.h:

	Move drawing functions.  

Wed Jun 23 08:01:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/stub.c:

	Cleanup.  

Wed Jun 23 07:50:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_link(): Don't set @current_link local variable to -1 but test
	against @wraparound_bound instead. So set_textarea() will again be
	called when no link is selected and we move to one in the view.  

Wed Jun 23 07:38:26 2004  Laurent Monin <zas@norz.org>:

	* src/sched/task.c:

	Compilation fix.  

Wed Jun 23 04:43:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Fix bug 60: Spaces inserted by align="justify" get bad attributes.  
	The function insert_spaces_in_link is introduced.  

Tue Jun 22 23:24:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/parse.c:

	@special_f was added to struct html_parser.  

Tue Jun 22 23:16:29 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/link.c, parser/parse.c, parser/stack.c:

	@line_break_f was added to struct html_parser.  

Tue Jun 22 23:11:18 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/events.txt, src/protocol/rewrite/rewrite.c,
	src/sched/session.c, src/sched/task.c, src/sched/task.h,
	src/scripting/guile/hooks.c, src/scripting/lua/hooks.c,
	src/scripting/perl/hooks.c:

	Revert Jonas' change of passing current URI to goto-url event hooks
	instead of session. Hope that gets him more motivated for making
	some patches today... ;-) 

Tue Jun 22 23:08:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/link.c, parser/parse.c:

	@put_chars_f was added to struct html_parser.  

Tue Jun 22 22:56:51 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/link.c, parser/parse.c, parser/stack.c:

	@ff was added to struct html_parser.  

Tue Jun 22 22:42:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, renderer.c, tables.c,
	tables.h, parser/parse.c:

	@table_level was added to struct html_parser.  

Tue Jun 22 22:33:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	@last_input_tag was added to struct html_parser.  

Tue Jun 22 22:30:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	@last_form_attr was added to struct html_parser.  

Tue Jun 22 22:28:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	@last_form_tag was added to struct html_parser.  

Tue Jun 22 22:24:18 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	@startf was added to struct html_parser.  

Tue Jun 22 22:21:08 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c:

	@eofff was added to struct html_parser.  

Tue Jun 22 22:18:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/link.c:

	@has_link_lines was added to struct html_parser.  

Tue Jun 22 22:13:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c:

	@was_xmp was added to struct html_parser.  

Tue Jun 22 22:11:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c:

	@was_li was added to struct html_parser.  

Tue Jun 22 22:05:29 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/parse.c:

	@was_br was added to struct html_parser.  

Tue Jun 22 21:53:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c:

	@putsp was added to struct html_parser.  

Tue Jun 22 21:49:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: dialogs.h, backend/default.h:

	Cleanup #includes.  

Tue Jun 22 21:47:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c:

	@position was added to struct html_parser.  

Tue Jun 22 21:43:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.h, backend/common.h:

	Remove unneeded #includes.  

Tue Jun 22 21:43:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/parse.c:

	@line_breax was added to struct html_parser.  

Tue Jun 22 21:39:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: internal.h, parser.c, parser/forms.c,
	parser/parse.c:

	struct html_context was introduced. For now, it has only one field
	@eoff, more is coming.  

Tue Jun 22 15:47:48 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	get_convert_table(): move @a declaration near its use.  

Tue Jun 22 15:45:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	get_convert_table(): skip header parsing if @ignore_server_cp is
	set.  

Tue Jun 22 15:38:58 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	get_convert_table(): @b -> @ct_charset.  

Tue Jun 22 15:37:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	get_convert_table(): @from -> @cp_index.  

Tue Jun 22 15:25:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	get_convert_table(): reduce indentation level.  

Tue Jun 22 14:42:18 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Size of action_box_items[KM_MAX] array was put in ACTION_BOX_SIZE,
	and reduced to 128. Two assertions were added to check for
	sufficient array size.  

Tue Jun 22 14:12:50 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Compilation fix, last patch was incomplete, move-link-(up,down) ->
	move-link-(prev,next).  

Tue Jun 22 11:21:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Two blank lines reintroduced.  

Tue Jun 22 10:53:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	move_link_{up,down}() -> move_link_{prev,next}() 

Tue Jun 22 10:52:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	sched/action.c, viewer/text/view.c:

	Main actions move-link-(up,down) renamed to move-link-(prev,next),
	because that's what they really do. Since the old names are quite
	recent, no compatibility aliases introduced (also since I intend to
	reuse move-link-(up,down) soon).  

Tue Jun 22 07:10:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/stub.c, osdep/beos/beos.c, protocol/uri.c:

	Missing upcase() -> toupper() stuff.  

Tue Jun 22 06:46:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: main.c, bfu/button.h, bfu/inpfield.c, bfu/listmenu.c,
	bookmarks/dialogs.c, bookmarks/backend/xbel.c, cache/cache.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, dialogs/menu.c, dialogs/options.c,
	document/css/value.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, document/html/parser/parse.c,
	document/html/parser/stack.c, formhist/dialogs.c,
	globhist/dialogs.c, intl/charsets.c, lowlevel/connect.c,
	lowlevel/interlink.c, lowlevel/select.c, lowlevel/signals.c,
	osdep/stub.c, osdep/beos/beos.c, osdep/beos/overrides.c,
	osdep/os2/os2.c, protocol/auth/dialogs.c, protocol/ftp/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/session.c,
	sched/task.c, scripting/lua/core.c, scripting/lua/hooks.c,
	terminal/event.c, terminal/kbd.c, terminal/terminal.c,
	util/color.c, util/memory.h, viewer/text/form.c:

	Put a space after each type-cast that lacks one.  

Tue Jun 22 05:02:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Remove uchar typedef and substitute unsigned char.  

Tue Jun 22 04:54:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Rename get_succesful_controls to get_successful_controls.  

Tue Jun 22 04:48:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.h:

	Update area_cursor's prototype, reflecting that its first parameter 
	was renamed from |frm| to |fs| in textarea.c revision 1.81.  

Tue Jun 22 00:59:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: connect.c, connect.h:

	Unexport struct write_buffer.  

Tue Jun 22 00:50:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Revert zas' 1.419, dropping some 'useless' blank lines. I could also
	imagine a line I could drop... :E CCMAIL: zas@norz.org 

Tue Jun 22 00:36:26 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/bookmarks.txt:

	Mention that it's incomplete.  

Mon Jun 21 21:43:45 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fixes: in french, a space has to be inserted before
	question/exclamation marks. This rule do not apply to english,
	german or french as used in french-speaking Switzerland.  

Mon Jun 21 21:28:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fixes.  

Mon Jun 21 21:24:26 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jun 21 19:43:42 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	How many characters does your English alphabet have? 

Mon Jun 21 18:23:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	usrerror() now prefixes the messages with 'ELinks' instead of
	'elinks', because that's the real name of what we are developing,
	after all.  

Mon Jun 21 18:10:27 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Jun 21 17:11:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	get_width(): polish the description comment.  

Mon Jun 21 17:08:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	get_width(): @limit_it -> @limited 

Mon Jun 21 16:56:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.h:

	Remove string declaration.  

Mon Jun 21 15:00:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Jun 21 14:40:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Internationalize cursor position status message.  

Mon Jun 21 14:24:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/parse.c:

	Use int_lower_bound in get_width.  

Mon Jun 21 14:21:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Oops off by one error as usual.  

Mon Jun 21 14:21:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Show cursor coordinates when doing cursor routing and cursor is not
	over a link.  

Mon Jun 21 14:19:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser/parse.c:

	Use int_upper_bound in get_width.  

Mon Jun 21 14:03:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	If removing the last item in a folder move focus to previous item in
	the folder or the root.  

Mon Jun 21 13:56:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Rearrange the blank lines slightly.  

Mon Jun 21 13:26:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	get_width(): Store allocated attribute value in @value variable
	since we modify the original @str variable. Should fix bug when
	parsing value string with space chars in it reported by Steven
	Stocker.  

Mon Jun 21 12:55:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Explain the meaning of draw_doc's |active| parameter.  

Mon Jun 21 12:52:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Correct and expand the description of move_cursor.  

Mon Jun 21 12:43:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix move_document_end to really go to the last line in
	cursor-routing navigation mode.  

Mon Jun 21 12:23:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	s/RFC 2391/RFC 2396/. Spotted by pasky.  

Mon Jun 21 12:20:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Comment the behaviour of move_document_start and move_document_end 
	when in cursor-routing navigation mode.  

Mon Jun 21 12:08:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	When the user presses move-document-start or move-document-end while
	using the cursor navigation mode (cursor routing), move the cursor,
	respectively, to the first line and column, or to the last line
	while preserving the column.  
	
	This required either re-ordering some routines or introducing a
	prototype; I chose the latter.  

Mon Jun 21 12:05:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Don't #include terminal/screen.h, it was used by initial cursor
	routing patch but no more. Spotted by Miciah.  

Mon Jun 21 12:01:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	add_opt_rec(): Split out the sorting algorithm to add_opt_sort().  

Mon Jun 21 11:08:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	In draw_current_link, do not call get_link_cursor_offset if we do
	not need its return value.  

Mon Jun 21 11:02:53 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/: kbdbind.c, kbdbind.h:

	Sort main_action, edit_action, menu_action, main_action_table, 
	edit_action_table, and menu_action_table.  

Mon Jun 21 09:59:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Tidy up the comments in get_link_at_coordinates.  

Mon Jun 21 09:54:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	In get_link_at_coordinates, update comments to reflect that |x| and
	|y| are not necessarily the coordinates of the mouse pointer. (Part
	of this change was included in the last commit; sorry.) 

Mon Jun 21 09:50:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Fix last patch.  

Mon Jun 21 09:49:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	In get_link_at_coordinates, modify the arguments |x| and |y| instead
	of using the temporary variables |mouse_x| and |mouse_y|.  

Mon Jun 21 09:49:19 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jun 21 09:47:40 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: link.c, link.h, view.c:

	Rename choose_mouse_link to get_link_at_coordinates as the new name
	is clearer and the routine is not mouse-specific and is now used
	with cursor navigation.  

Mon Jun 21 07:23:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Fix bug 328 and change the wording of ui.startup_goto_dialog option
	to say '... new tabs'.  

Mon Jun 21 07:03:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	redirect_cache(): Don't test existence of cache->uri. If it wasn't
	there we'd never be here.  

Mon Jun 21 00:22:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Microtidyup.  

Sun Jun 20 21:37:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Oops no need to declare redir_cmd() anymore.  

Sun Jun 20 21:36:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Mark command line aliases with OPT_HIDDEN flags and ignore them when
	printing full help.  

Sun Jun 20 21:19:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hotkey.c, cookies/cookies.c,
	document/html/parser.c, document/html/tables.c,
	document/html/parser/parse.c, document/html/parser/stack.c,
	protocol/header.c, protocol/http/http.c, terminal/event.c,
	util/conv.c, util/conv.h, util/fastfind.c, util/string.c,
	viewer/text/link.c:

	upcase() -> toupper().  

Sun Jun 20 21:08:56 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	parse_table(): replace a goto/label by a for() loop.  

Sun Jun 20 21:02:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	dialogs/menu.c, sched/action.c, viewer/text/link.c,
	viewer/text/view.c:

	
	{download,download-image,enter,enter-reload,resume-download,pass-uri} -> link-{download,download-image,follow,follow-reload,download-resume,external-command}. No alias for pass-uri added since it hasn't been released yet.

Sun Jun 20 20:11:23 2004  Petr Baudis <pasky@ucw.cz>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Fixed trailing comma in the SEE ALSO section, by Solar Designer.  

Sun Jun 20 19:22:16 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Entry for Solar Designer.  

Sun Jun 20 18:26:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/auth/auth.h:

	Fix HTTP auth to work if either the username or the password is
	empty. Reported by yanek.  

Sun Jun 20 18:22:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/: connect.c, ssl.c:

	Merged Debian's GNUTLS tweaks to make it work with newer versions.
	They should know what are they doing, being probably the only GNUTLS
	users in the world ;-).  

Sun Jun 20 18:08:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Tidyup witek's 1.131 (support for saving deleted options).  
	CCMAIL:witekfl@poczta.gazeta.pl 

Sun Jun 20 18:00:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	dialogs/menu.c, sched/action.c:

	{back,unback} -> history-move-{back,forward} 

Sun Jun 20 17:23:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Fix core dump for 'elinks -stdin' and double-printing of the
	warning.  

Sun Jun 20 16:15:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Fixed -stdin emulation, spotted by Jonas' gcc.  

Sun Jun 20 16:12:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Rename {page_up, page_down, home, x_end} -> {move_page_up,
	move_page_down, move_document_start, move_document_end}.  

Sun Jun 20 16:08:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	sched/action.c, viewer/text/view.c:

	Introduce keybinding action aliases. {up,down} ->
	move-link-{up,down}, home/end -> move-document-{start,end},
	page-{up,down} -> move-page-{up,down}.  

Sun Jun 20 15:57:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	kbd_text(): Use menu mapping.  

Sun Jun 20 15:49:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Revert 1.81 - lousy workaround for buggy wget -r which prevented
	decoding of %7E (~).  

Sun Jun 20 15:44:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Reintroduce -stdin as a compatibility measure. Beeps and annoys the
	user so that she removes it, but doesn't trigger fatal error.  

Sun Jun 20 15:28:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/osdep.c:

	get_input_handle() returns the same as get_ctl_handle() 

Sun Jun 20 15:25:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, viewer/dump/dump.c, viewer/dump/dump.h:

	dump_pre_start() -> dump_next() 

Sun Jun 20 15:21:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Complement witekfl's 1.49 (first parameter is just basename) by
	chdir()ing to the script's directory first. This makes that
	behaviour correct and mirrors w3m's behaviour.  

Sun Jun 20 15:10:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Remove unused ACT_MAIN_{LEFT,RIGHT}.  

Sun Jun 20 15:08:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Remove unused ACT_MAIN_DELETE.  

Sun Jun 20 13:57:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Partially revert last patch and allow readonly buttons to be
	'entered'. Check return value of find_form_state().  

Sun Jun 20 13:30:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	enter(): Even buttons can be disabled so we have to check if form
	field is readonly. Return FRAME_EVENT_OK if it is readonly since
	there is no need to redraw anything.  

Sun Jun 20 13:29:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Don't change navigation mode when the user presses home or end.  

Sun Jun 20 13:13:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: view.c, view.h:

	Make down() static.  

Sun Jun 20 13:11:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, link.c:

	Do all the submit handling in field_op() and don't fall back to
	enter(). ACT_EDIT_ENTER and ACT_MAIN_ENTER might not be bound to the
	same thing, so this is more correct. However we should probably add
	ACT_EDIT_ENTER_RELOAD to keep the feature set complete.  

Sun Jun 20 12:43:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Abandon rep_ev(), page_up()/page_down()/up()/down() now handle
	repeat_count.  

Sun Jun 20 12:37:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Don't use rep_ev() for mouse scrolling. They already move using
	value of option.  

Sun Jun 20 12:35:35 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	rep_ev() is a non sense for home/end actions. Dropped.  

Sun Jun 20 12:22:16 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Do not use rep_ev() for scroll_right()/scroll_left(). Spotted by
	Miciah.  

Sun Jun 20 11:58:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Don't change navigation mode when scrolling. Idea by Miciah.  

Sun Jun 20 11:27:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	set_textarea(): Decrease indentation.  

Sun Jun 20 11:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_link(): Fix wraparound of cursor position in textareas when it
	is either first or last link.  

Sun Jun 20 11:22:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Introduce move_link(). Common backend for up() and down().  

Sun Jun 20 10:24:29 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	get_width(): free @str on error, and improve parsing by
	re-introducing @end, now parsing string like "  12a45 %" will fail
	instead of using 12 as width.  

Sun Jun 20 10:10:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	Merge parse_width() and get_width().  

Sun Jun 20 10:06:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_width(): decrease indentation level.  

Sun Jun 20 09:59:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_width(): drop @end, we dont use it.  

Sun Jun 20 09:55:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_width(): fix comment and undefine macro as it should.  

Sun Jun 20 09:51:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	get_width(), parse_width(): @trunc -> @limit_it, perhaps more
	explicit.  

Sun Jun 20 09:44:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_width(): @value -> @width, improve comments.  

Sun Jun 20 09:31:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_width(): only calculate @maxwidth if @trunc is set, introduce
	WIDTH_PIXELS2CHARS(), make function inlined since used by only one
	caller.  

Sun Jun 20 09:08:23 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	parse_width(), get_width(): variables were renamed.  

Sat Jun 19 21:27:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_cursor(): Only bound x and y when they are not inside the
	current view.  

Sat Jun 19 21:21:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_cursor(): Fix off by one errors in the scrolling mechanism.  

Sat Jun 19 18:41:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Add cursor routing. Altho' it is nothing big patchwise it is
	hopefully an improvement of usability.  

Sat Jun 19 18:26:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	move_cursor*(): Always use tab position for cursor routing. Much
	simpler. Minor tidyup that pasky will like ;-).  

Sat Jun 19 18:16:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Fix issue with mode less text-input link
	drawing when doing cursor routing.  

Sat Jun 19 17:58:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/session.h,
	viewer/text/link.c, viewer/text/view.c, viewer/text/vs.c:

	Support for cursor routing. It should be fairly complete already
	altho' we should ofcourse get some feedback from an expert. It is
	based on patch by Witold Filipczyk, available at [1], which
	introduces cursor moving actions.  
	
	The session struct maintains whether we are doing cursor routing so
	setting the terminal cursor and window pointer is done correctly.
	Also, current link is only updated by check_vs() if navigating
	link-wise.  
	
	When in cursor routing mode, the cursor position is maintained in
	the session tab and restored from it after things like doing the
	link menu. All cursor updating is done in new move_cursor() function
	which updates current link when cursor is over one and scrolls when
	moving outside the view.  
	
	[1]
	
	http://archive.linuxfromscratch.org/mail-archives/elinks-dev/2003-November/000596.html

Sat Jun 19 17:11:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Since it now gets passed the current session use
	ses->tab when updating the window position.  

Sat Jun 19 16:12:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Sanitize '//' joined URIS. It apparently has been
	broken for some time. Even 0.9.1 is affected.  

Sat Jun 19 15:45:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	choose_mouse_link(): No need to pass term_event just pass x and y
	values.  

Sat Jun 19 13:57:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Move enum insert_mode out of struct session.  

Sat Jun 19 13:42:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: textarea.c, textarea.h:

	Real menu functions don't return anything so make
	menu_textarea_edit() return void.  

Sat Jun 19 13:21:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_edit(): Only set static state vars on 'startup' (op == 0).  

Sat Jun 19 13:10:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_edit(): Split out saving of the textarea value to file.
	read_textarea_file() -> load_textarea_file() to better pair it with
	new function and also possibly indicate that file is destroyed.  

Sat Jun 19 13:02:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_edit(): At start up checks no need to goto free_and_return.  
	
	Annotation by Miciah, 2004-06-21: This also fixes a bug whereby a
	slave session could inhibit the master session from loading the
	modified file, thereby leaving intact the original contents in the
	master session's text area, if one tried to edit a text area in the
	slave session with an external editor (which would result in an
	error box) while one was already editing the text area of the master
	session with an external editor: |fs| is no longer set to NULL when
	that error box is displayed.  

Sat Jun 19 12:58:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/terminal.c, viewer/text/form.c,
	viewer/text/textarea.c, viewer/text/textarea.h:

	textarea_edit(): No need to pass form control.  

Sat Jun 19 12:46:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_edit(): Split out reading of the modified file.  

Sat Jun 19 12:27:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Add comments.  

Sat Jun 19 12:14:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Rearrange members of itrm struct and add comments.  

Sat Jun 19 12:04:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Add altscreen boolean member to itrm instead of flags.  

Sat Jun 19 12:00:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	itrm.tm -> itrm.timer 

Sat Jun 19 08:39:38 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Fix a bug introduced in the last revision: Do not delete the
	preceding line if the cursor is positioned immediately after a
	new-line character; only delete that new-line character.  

Sat Jun 19 07:00:18 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Use the -= operator in textarea_op_bob.  

Sat Jun 19 06:59:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In textarea_op_bob, set an upper bound on |fs->state|, the actual
	cursor position, rather than |state|, the cached cursor position. 
	This fixes a bug introduced in revision 1.109 whereby
	beginning-of-buffer would not go all the way to the first line when
	the cursor started on a longer line.  

Sat Jun 19 00:13:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Reverted last chunk of zas' 1.33 tidyup, I find the original version
	more tidy.  

Fri Jun 18 23:53:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/link.c:

	Move put_link_line() to a more appropriate place.  

Fri Jun 18 23:26:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Trivial microtidyup.  

Fri Jun 18 21:24:33 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	Tidy up.  

Fri Jun 18 21:00:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	draw_textarea(): Use temporary variable to get rid of weird
	wrapping.  

Fri Jun 18 20:56:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	draw_textarea(): No need to test fs->value. format_text() already
	asserts it.  

Fri Jun 18 20:53:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	draw_textarea(): Decrease indentation.  

Fri Jun 18 20:53:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Ooops, forgot to use @nlen, fixed.  

Fri Jun 18 20:35:38 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_li(): code simplification and tidy up.  

Fri Jun 18 20:22:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimizatio: cache strlen(n).  

Fri Jun 18 20:19:28 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Really fix <li value=12345><li> bug.  

Fri Jun 18 20:11:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed <li value=12345><li>, the next <li> didn't have number 12346.
	Reported by zas.  

Fri Jun 18 19:16:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Fix last patch. Stupid brain.  

Fri Jun 18 19:05:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Fix format_text() to preallocate the ending entries since it is
	possible to bypass the loop obviously.  

Fri Jun 18 18:48:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix translation of 1.2.3.4:5 so IP address part won't be interpreted
	as the protocol name. Spotted by pasky.  

Fri Jun 18 16:38:35 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Use isspace(), ASCII_LF, ASCII_CR where applicable.  

Fri Jun 18 16:22:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Restore old scroll right behavior, it was a feature, not a bug.
	Sorry, pasky ;).  

Fri Jun 18 16:02:55 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Drop allocation of memory for parsed line, just use si->text one.
	Get rid off @line_end2.  

Fri Jun 18 15:05:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add check of memrchr().  

Fri Jun 18 15:04:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/stub.c:

	elinks_memrchr(): Fix off by one thing .. I hope.  

Fri Jun 18 15:02:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Use memrchr() for handling wrapping.  

Fri Jun 18 15:00:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op(): Use memrchr() for kill-to-bol handling.  

Fri Jun 18 14:59:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: stub.c, stub.h:

	Introduce memrchr() stub.  

Fri Jun 18 14:27:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Wrap the wrap handling in a not so deep way.  

Fri Jun 18 14:20:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_end(): Cleanup wrap handling.  

Fri Jun 18 14:16:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Improve comment situation.  

Fri Jun 18 14:00:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix invertion when ensuring contrast for 256 color mode.  

Fri Jun 18 13:55:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser/forms.c, viewer/text/form.h,
	viewer/text/textarea.c:

	Introduce enum form_wrap used for form_control->wrap member.  

Fri Jun 18 13:48:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Make format_text() take an extra parameter controling whether to
	modify the text value passed to it.  

Fri Jun 18 13:40:24 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Fix for bug 346: Detection of filenames/directories was greatly
	improved, now it should work in most cases (ie with files with more
	than one space in name), though stuff involved is complex and
	behavior is still not perfect. The definitive solution is to use
	libsmbclient instead of smbclient command. Please test a lot and
	report issues.  

Fri Jun 18 13:33:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Preallocate the two last entries in the line info
	table and get rid of goto.  

Fri Jun 18 13:17:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Make all textarea ops cache old value of fs->state and modify
	fs->state directly so that refreshing is only done when needed.  

Fri Jun 18 13:09:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	y -> current. Idea by Miciah.  

Fri Jun 18 13:04:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_eob(): Use get_textarea_line_number() to seek the index
	of the last.  

Fri Jun 18 12:38:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_eob(): Remove need for goto.  

Fri Jun 18 12:34:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_end(): Remove need for goto.  

Fri Jun 18 11:27:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Wrap a long line from revision 1.93 in draw_textarea.  

Fri Jun 18 11:11:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Remove an extra newline.  

Fri Jun 18 11:10:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Introduce get_textarea_line_number, which takes a |struct line_info|
	array and a cursor position and returns the index of the line where
	the cursor is located. Idea and code by Jonas.  

Fri Jun 18 09:54:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In area_cursor, rename |int q| to |int ret|.  

Fri Jun 18 09:46:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: textarea.c, textarea.h, view.c:

	Remove the |struct session *ses| parameter from set_textarea: It has
	been unused since revision 1.86.  

Fri Jun 18 09:33:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: form.c, form.h, textarea.c, textarea.h, view.c:

	Drop the |rep| parameter from field_op and textarea_op_*: Only
	textarea_op_up and textarea_op_down used the argument, and the
	effect of calling either those routines with a non-zero value for
	|rep| can be had by calling textarea_op_bob or textarea_op_eob.  

Fri Jun 18 09:30:27 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Tidy up and improved comments.  

Fri Jun 18 09:15:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.h:

	Update the prototypes for textarea_op_*: the parameter |struct
	form_control *frm| is now named |fc|.  

Fri Jun 18 09:13:41 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Define SMBCLIENT to handle executable name.  

Fri Jun 18 09:10:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Use int_upper_bound in textarea_op_bob and textarea_op_eob.  

Fri Jun 18 08:40:35 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In format_text, change |begin| from a pointer to an index variable.  

Fri Jun 18 08:38:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In format_text, use an index variable instead of modifying |text|.  

Fri Jun 18 08:25:20 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In format_text's inner loop, make |s| an index instead of a pointer.  

Fri Jun 18 08:23:44 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Reformat the inner loop in format_text.  

Fri Jun 18 06:29:26 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Change the |start| and |end| members of |struct line_info| from
	character pointers to integers.  

Fri Jun 18 06:23:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In textarea_op_bob, when calculating the new cursor position by
	subtracting the start of the current line from |fs->state| (this is
	to keep the cursor on the same column while repositioning it to the
	first line), include |fs->state| in the calculation.  
	
	This fixes a bug introduced in revision 1.89 whereby
	beginning-of-buffer did not always go to the beginning of the
	buffer.  

Fri Jun 18 04:52:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use whole palette for background colors in 256 mode. It doesn't have
	same restrictions as 16 and it makes some of the backgrounds in the
	menus visible like the right menu on fm.  

Fri Jun 18 04:46:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Rename enum typeahead_code values to better match what they are
	mapped to.  

Thu Jun 17 23:53:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	draw_form_entry(): Cleanup.  

Thu Jun 17 23:51:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	draw_form_entry(): Decrease indentation.  

Thu Jun 17 23:41:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op(): In the switch's default label don.t refresh view if
	field is readonly. Use insert_in_string() to do all the dirty work
	of memory reallocation.  

Thu Jun 17 22:42:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_bob(): If state is the same don.t refresh.  

Thu Jun 17 22:41:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_home(): Use state variable to get rid of goto. If state
	is the same don.t refresh.  

Thu Jun 17 22:36:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_bob(): Use state variable to remove need for gotos.  

Thu Jun 17 22:24:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	textarea_op_enter(): Cleanup and use insert_in_string(). Even though
	it is a bit slower it remove a lot of code duplication.  

Thu Jun 17 21:25:50 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Move @vs initialization up, and do not check for NULL @vs twice.  

Thu Jun 17 19:16:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op(): Missing usage of form_field_is_readonly() even tho' we
	never get there if it is disabled. Spotted by Miciah.  

Thu Jun 17 13:10:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	download_link(): Check where_img before getting image download URI.
	Related to viewer/text/view.c:1.347->1.348 and spotted by Miciah.  

Thu Jun 17 11:27:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/setup.h:

	Fix last patch: s/%s/%f/.  

Thu Jun 17 11:24:04 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/setup.h:

	Add '-i "%s"' to DEFAULT_AC_OPT_MAILTO so that Mutt gets the form
	fields when one submits a form with action="mailto:foo@bar.net".  

Thu Jun 17 10:02:20 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/hierbox.c, bfu/inphist.c,
	bookmarks/bookmarks.c, config/conf.c, config/options.h,
	cookies/cookies.c, dialogs/exmode.c, dialogs/menu.c,
	dialogs/options.c, formhist/formhist.c, globhist/globhist.c,
	lowlevel/connect.c, lowlevel/home.c, lowlevel/interlink.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c,
	protocol/file/file.c, sched/action.c, sched/download.c,
	sched/session.c, scripting/lua/core.c, terminal/kbd.c,
	terminal/terminal.c, util/secsave.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	Introduce and use get_cmd_opt_*() macros instead of
	get_opt_*_tree(cmdline_options, ...).  

Thu Jun 17 09:01:20 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Tidy up.  

Thu Jun 17 08:41:37 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	horizontal_scroll(): code simplification.  

Thu Jun 17 08:38:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Drop |nb_tab| from send_event and pass -1 in its place to
	switch_to_tab, which will compute the value itself.  

Thu Jun 17 08:36:32 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix scroll down + page down behavior.  

Thu Jun 17 07:06:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	In push_kbdbind_add_button, we were assigning the selected action's
	key-map to the hop structure's action member. This prevented one
	from adding new bindings. Remove this assignment, which appeared in
	revision 1.167, entitled 'make' (really descriptive, Jonas!).  

Thu Jun 17 06:35:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: textarea.c, textarea.h, view.c:

	In set_textarea, call textarea_op_eob or textarea_op_bob directly
	instead of calling field_op with a generated up- or down-key-press
	event. The necessary setup which must be copied from field_op adds
	several lines, but this change eliminates a hack and causes a text
	area to be scrolled properly to the top or bottom when one selects
	it with the down or up actions, even when the up and down arrow-keys
	are not bound to the up and down actions in the edit map.  

Thu Jun 17 06:02:02 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Do not refresh in set_textarea: set_textarea is only called by
	either up() or down(), which are only called by frame_ev_kbd(),
	which, when it calls up() or down(), returns FRAME_EVENT_REFRESH,
	which is passed up to frame_ev_kbd's only caller, frame_ev, which
	passes the value to its only caller, send_to_frame, which performs a
	refresh.  

Thu Jun 17 05:22:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In textarea_op_up and textarea_op_down, the value of |fs->state| is
	modified during the loop, so assign |position = fs->value +
	fs->state| within the loop, not before.  Move the declaration of
	|position| within the loop, too, now that it is not touched outside
	the loop.  
	
	This fixes a bug whereby ELinks would freeze when one selected a
	text area.  
	
	The problem appeared with the introduction of the |position|
	variable in textarea.c 1.72 (textarea_op_down) and 1.74
	(textarea_op_up).  

Thu Jun 17 04:07:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Correct an error in the next-to-last patch to this file, 'Use @fc
	instead of @frm for form control.', which substituted |fc| instead
	of |fc2| for |frm| in get_succesful_controls.  

Thu Jun 17 00:35:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser/forms.c, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c, viewer/text/textarea.c:

	Introduce enum form_mode and replace form_control.ro with
	form_control.mode member. Macro named form_field_is_readonly() used
	to replace tests of ro. Later we can make the testing more
	finegrained if needed. Two small cleanups: remove check of not ro
	before textarea_edit() call since it is already checked in the first
	if test, in textarea_op_enter() return FRAME_EVENT_OK if area is
	readonly -- no need to refresh the view.  

Thu Jun 17 00:12:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/forms.c:

	get_form_mode(): Introduced to initialize form_control->ro value.  

Wed Jun 16 21:47:13 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jun 16 21:39:56 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Use @fc instead of @frm for form control.  

Wed Jun 16 21:33:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, form.h, textarea.c:

	struct submitted_value @frm field was renamed @form_control.  

Wed Jun 16 21:30:07 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Use @fc instead of @frm for form control.  

Wed Jun 16 21:25:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	area_cursor(): use int_bounds().  

Wed Jun 16 21:21:55 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	area_cursor(): cleanup and optimization.  

Wed Jun 16 21:16:19 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	@form is a misleading name for a form control, just use @fc.  

Wed Jun 16 21:13:26 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	@l, @l_ -> @link, @link_.  

Wed Jun 16 21:11:29 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Label x -> free_and_return.  

Wed Jun 16 21:07:47 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_home(): code cleanup and optimization.  

Wed Jun 16 20:59:27 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_up(): code cleanup and optimization.  

Wed Jun 16 20:55:24 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_end(): reduce indentation level.  

Wed Jun 16 20:53:32 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_down(): code cleanup and optimization.  

Wed Jun 16 20:49:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Redo the read only stuff.  

Wed Jun 16 20:37:21 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_end(): code cleanup and optimization.  

Wed Jun 16 20:16:06 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Add some hints about bob/eob, and affects @position after
	assertions.  

Wed Jun 16 20:08:47 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	textarea_op_enter(): code cleanup.  

Wed Jun 16 19:59:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Fix textarea up and down handler so they ignore the actions when on
	the first and last line respectively.  

Wed Jun 16 19:42:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, viewer/text/form.c,
	viewer/text/form.h:

	s/new_/init_/ and s/free_/done_/ the new submitted value functions.  

Wed Jun 16 19:34:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	@b -> @begin, @sk -> @skip.  

Wed Jun 16 19:30:41 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	@en -> @end, @st -> @start, @ln -> @line, @lnn -> @line_number, @lnx
	-> @linex.  

Wed Jun 16 19:19:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	get_current_link_info(): Move form handling up front.  

Wed Jun 16 18:50:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix indentation in last patch. Improve information given for read
	only fields.  

Wed Jun 16 18:44:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Split out code to add_form_attr_to_string() used
	for adding name and default value info.  

Wed Jun 16 18:33:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	... and finally after 2 and a freaking half hour he picks up his
	patchooka .. aims .. with a roaring speed it moves towards the
	target .. hey it looks like a winner ... he actually got it right
	this time .. insert mode highlights in the g, fm and bug sector ..
	'twill be a most joyful experience.  

Wed Jun 16 17:21:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c, textarea.h:

	Make the rest of the textarea_op_*() functions return
	frame_event_status. A lot of 0 return values for assertion and
	allocation failure was changed to *_OK and 1 values is also *_OK.  

Wed Jun 16 17:11:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c, textarea.h:

	textarea_op_eob(): Return frame_event_status. Tiny enforcement by
	the space police.  

Wed Jun 16 17:07:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c, textarea.h:

	textarea_op_enter(): Return frame_event_status.  

Wed Jun 16 16:56:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	It don.t make sense to return submit label for FC_HIDDEN in
	get_form_label() so return NULL. Idea by zas. Make ending switch in
	get_form_info() complete with labels for all values of enum
	form_type.  

Wed Jun 16 15:41:31 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Use @fc to handle link->form_control.  

Wed Jun 16 15:32:42 2004  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Drop free_form_in_list() and use free_submitted_value_list()
	instead.  

Wed Jun 16 15:28:42 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, form.h:

	free_succesful_controls() was renamed free_submitted_value_list()
	and we now export it.  

Wed Jun 16 15:26:14 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	free_succesful_controls(): use free_submitted_value().  

Wed Jun 16 15:20:15 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	add_submitted_value_to_list(): use new_submitted_value() and get rid
	of label fi_rep.  

Wed Jun 16 14:51:44 2004  Laurent Monin <zas@norz.org>:

	* src/: formhist/formhist.c, viewer/text/form.c,
	viewer/text/form.h:

	new_submitted_value(): let it be a complete constructor.  

Wed Jun 16 14:47:44 2004  Laurent Monin <zas@norz.org>:

	* src/: formhist/formhist.c, viewer/text/form.c,
	viewer/text/form.h:

	Move new_submitted_value() and free_submitted_value() to
	viewer/text/form.h. Later it will move to document/form/.  

Wed Jun 16 14:43:19 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.h:

	struct submitted_value int @type -> enum form_type.  

Wed Jun 16 14:24:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Remove a bit of the noise.  

Wed Jun 16 13:53:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, viewer/text/link.c:

	A best effort attempt at fixing text-input form-field insert mode
	highlighting by introducing COLOR_ENSURE_INVERTED_CONTRAST flag and
	applying it when inverting text-input links. This fixes the issue
	for me with -no-home. When using document colors it might still be
	possible for some color combos to get it wrong.  

Wed Jun 16 10:34:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, link.h:

	enter(): @a -> @do_reload.  

Wed Jun 16 10:23:39 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, view.h:

	Make clear (using xxxx) that parameter is unused.  

Wed Jun 16 10:18:03 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Do not inline rep_ev(), and make try_jump_to_link_number() static.  

Wed Jun 16 09:51:47 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.h, link.h:

	Remove sched/action.h inclusions.  

Wed Jun 16 09:43:40 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.h, viewer/text/view.h:

	Move enum frame_event_status from sched/action.h to
	viewer/text/view.h.  

Wed Jun 16 09:20:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	Revert my next-to-last patch to leds.c because I'm stupid. Thanks,
	zas, for noticing.  

Wed Jun 16 09:15:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: form.c, textarea.c, view.c:

	Before I changed its return value from an integer to enum
	frame_event_status, field_op returned either 0 (event not handled)
	or 1 (event handled, redraw).  Now that field_op uses the enum, it
	can return any of FRAME_EVENT_IGNORED, FRAME_EVENT_REFRESH, and
	FRAME_EVENT_OK. However, when I changed the return value to the
	enum, I did a straight conversion from return values of 0 to 
	FRAME_EVENT_IGNORED and return values of 1 to FRAME_EVENT_REFRESH.
	Now I'll improve on that...  
	
	Modify frame_ev and set_textarea to work properly when field_op
	returns FRAME_EVENT_OK.  
	
	Change field_op to return FRAME_EVENT_OK instead of
	FRAME_EVENT_IGNORED when the event is handled (where 'handled' means
	'should not be handled elsewhere') but a redraw is not necessary: 
	
	 - when an assertion fails; 
	 - when one of the textarea_op_* functions fails; or 
	 - when malloc fails.  
	
	Prevent unnecessary redraws: 
	
	 - when one tries to backspace, to delete, to kill-to-bol, or to
	   kill-to-eol when there is nothing to delete; 
	 - when one tries to enter text into a text field that has reached 
	   its maximum length; or 
	 - when one copies a text-field's contents to clipboard.  
	
	Return FRAME_EVENT_IGNORED, allowing key-presses to fall back to the
	main key-map, when one tries to edit text in a read-only text-field.  
	
	Two bugs have been fixed: 
	
	 - When one presses a key while editing a text field that has reached
	   its maximum capacity, return FRAME_EVENT_OK instead of
	   FRAME_EVENT_IGNORED, so that the key press does not fall back to the
	   main map (imagine if you entered a given field's maximum of forty
	   characters and then proceeded to type in a sentence beginning with
	   'Q'). This bug appeared with src/viewer/text/form.c:1.156->1.157,
	   'field_op_do(): Cleanup the default label.' 
	
	 - The handler for the redraw action would return
	   FRAME_EVENT_IGNORED, even tho it handles the redraw, leading to an
	   extra redraw. Note that handle_interlink_event grabs Ctrl-L before
	   it reaches field_op, so this was unlikely to happen in practice.
	   This bug appeared with the introduction of ACT_REDRAW,
	   src/viewer/text/form.c:1.66->1.67, 'Introduce ACT_REDRAW used for
	redrawing the terminal. Bound to ctrl-(l|L) in all mappings.' 

Wed Jun 16 08:12:23 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jun 16 07:26:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev, do not initialise |status| as it is always set later
	before it is used.  

Wed Jun 16 07:15:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/: form.c, form.h:

	Change the return value type of field_op to enum frame_event_status.  

Wed Jun 16 06:34:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In field_op, return 0, not 1, when the key press is not handled, so
	that the key press can be handled elsewhere (e.g., by the code for
	the main key-map). This corrects a bug introduced in
	src/viewer/text/form.c:1.156->1.157, 'field_op_do(): Cleanup the
	default label.' 

Wed Jun 16 06:06:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	s/press %s to enter insert mode/press %s to edit/ 

Wed Jun 16 06:02:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	Update the comment listing the allocated LEDs: change the SSL
	indicator's listed value from 1 to 0 (as 0 is the base index) and
	list the insert-mode indicator, which is allocated LED 1.  

Wed Jun 16 05:58:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	In register_led, fail not only when |number >= LEDS_COUNT| but also
	when |number > LEDS_COUNT|. LEDs are indexed from 0.  

Wed Jun 16 05:49:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Tweak the description for document.browse.forms.insert_mode.  

Wed Jun 16 05:23:16 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Split the call to update_status from change_hook_html into a new
	hook, change_hook_insert_mode. This might not save more than a few
	cycles, but it is clearer and eliminates the need for a comment.  

Wed Jun 16 05:02:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.h:

	Trivial correction to a comment on get_opt_type_tree().  

Wed Jun 16 04:56:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	In check_valid_option, slightly simplify the loop that calls the
	change-hooks for the changed option and its ancestors.  

Wed Jun 16 04:11:42 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In field_op, |ses| was asserted after it was dereferenced to get the
	terminal, which was saved to |term|. As |term| was subsequently used
	only twice, substitute |ses->tab->term|.  

Wed Jun 16 03:07:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove a stale comment.  

Tue Jun 15 22:56:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frame_ev_kbd(): Cleanup and decrease indentation in goto link dialog
	setup.  

Tue Jun 15 22:54:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, view.c:

	frame_ev_kbd(): Cleanup goto link dialog setup.  

Tue Jun 15 22:18:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Split out label setup switch to get_form_label().  

Tue Jun 15 22:13:07 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Group cursor navigation and scrolling actions.  

Tue Jun 15 22:12:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_into(): Now the switch noodling is complete also for
	LINK_BUTTON handling.  

Tue Jun 15 22:08:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Indentation fix and code aeration.  

Tue Jun 15 22:04:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	try_jump_to_link_number() was introduced, it is used to make one
	action switch only in frame_ev_kbd().  

Tue Jun 15 21:58:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_into(): Cleanup.  

Tue Jun 15 21:48:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_into(): Make LINK_BUTTON handling part of the switch
	noodle.  

Tue Jun 15 21:37:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Cleanup use of _(). It is inlined so better just
	use it once. 300b saved ;) 

Tue Jun 15 21:22:21 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Fix off by one in comparaisons.  

Tue Jun 15 21:05:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Make itrm->blocked a boolean member.  

Tue Jun 15 20:36:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	A comment was added about kbdprefix.repeat_count.  

Tue Jun 15 20:03:35 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/session.h, viewer/text/view.c:

	Drop kbdprefix.rep, and rename kbdprefix.rep_num to
	kbdprefix.repeat_count, code was simplified a lot, and cancelling
	repeat count is now possible by pressing 0 six times or less.  

Tue Jun 15 19:28:02 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Explode long frame_ev() among new frame_ev_kbd() and
	frame_ev_mouse().  

Tue Jun 15 16:49:14 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	A scrolling step of 0 doesnt make much sense, let the lower limit be
	1.  

Tue Jun 15 16:44:16 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	vertical_scroll(),horizontal_scroll(): code cleanup, honour right
	margin limit for horizontal scrolling.  

Tue Jun 15 12:14:33 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Drop useless test.  

Tue Jun 15 09:15:58 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Jun 15 02:18:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Oops. setup_session() stuff removed.  

Tue Jun 15 02:17:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Add dumb prefix: cia -> http://cia.navi.cx/ 

Tue Jun 15 02:10:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Make the text input form field info more uniform.  

Tue Jun 15 01:48:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, dialogs/status.c,
	sched/session.c, sched/session.h, viewer/text/form.c,
	viewer/text/link.c, viewer/text/view.c:

	Introducing insert mode for text input form fields. The tristate is
	stored in session struct with the values mode less, on and off. All
	is configurable via the document.browse.forms.insert_mode option.
	field_op() takes care of entering insert_mode. Canceling insert mode
	is done either when changing the current link in frame_ev() or when
	field_op() gets ACT_EDIT_CANCEL.  
	
	Nifty stuff. A LED is registered and shows 'I' for mode less, 'i'
	for on and '-' for off. Finally when insert mode is off the input
	field is drawn with inverted colors to make it stand out.  
	
	Patch by Miciah and me.  

Tue Jun 15 01:28:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/form.c:

	get_keystroke(): Wrapping add_keystroke_to_string(). Use by
	get_form_info() to correctly report how to submit form.  

Tue Jun 15 01:18:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Use switch for adding the last part of the form
	field info.  

Tue Jun 15 01:12:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Improve the 'hit ENTER ...' message from an i18n
	perspective.  

Tue Jun 15 01:05:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Fix logics. has_form_submit() -> add 'hit ENTER to
	submit'.  

Tue Jun 15 00:12:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	Pass session all the way down to draw_current_link().  

Mon Jun 14 22:32:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	add_new_win_to_menu(): Don't allow -no-home to open current link
	either.  

Mon Jun 14 22:29:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	open_uri_in_new_window(): If we are cloning an instance with no URI
	defined which is possible for -no-connect pass command line options
	from the master to the new instance.  

Mon Jun 14 22:15:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Don't allow opening new windows when -anonymous is specified.  

Mon Jun 14 22:03:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/session.c:

	bookmark_terminal_tabs(): Just continue if either current URI or
	title fails to be initialized. Requested by Miciah.  

Mon Jun 14 19:58:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	enter(): Cleanup. Patch by Miciah.  

Mon Jun 14 19:35:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Merge field_op() and field_op_do().  

Mon Jun 14 19:31:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op(): Cleanup.  

Mon Jun 14 19:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	field_op() is called two places. In frame_ev() where we wil signal
	FRAME_EVENT_REFRESH if it returns non zero, and in set_textarea().
	Since frame_ev() will make sure refresh_view() is called there is no
	need to redraw form entry and lower top windows.  

Mon Jun 14 19:17:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Take session arg instead of terminal.  

Mon Jun 14 19:15:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup.  

Mon Jun 14 19:09:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup ACT_EDIT_DELETE label.  

Mon Jun 14 19:05:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup ACT_EDIT_BACKSPACE label.  

Mon Jun 14 19:01:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup the default label.  

Mon Jun 14 18:55:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup ACT_EDIT_KILL_TO_EOL label.  

Mon Jun 14 18:53:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup ACT_EDIT_KILL_TO_BOL label.  

Mon Jun 14 18:51:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Use length variable to cleanup
	ACT_EDIT_PASTE_CLIPBOARD label.  

Mon Jun 14 18:47:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Cleanup ACT_EDIT_KILL_TO_BOL label.  

Mon Jun 14 18:44:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	field_op_do(): Move local text varible out of switch and cleanup
	ACT_EDIT_PASTE_CLIPBOARD label.  

Mon Jun 14 18:13:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	add_new_win_to_menu(): It is not possible to open links in new
	windows with -no-connect anymore.  

Mon Jun 14 18:04:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	done_session_info(): Check URI before calling done_uri().  

Mon Jun 14 17:39:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	add_session_info(): URI can be NULL for clean open in new windows.  

Mon Jun 14 13:16:50 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	next_in_view(): doc_view->document -> document, doc_view->vs -> vs.  

Mon Jun 14 13:09:17 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Sort document.browse.scrolling.*.  

Mon Jun 14 13:06:43 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Moving document.browse.scrolling up with the other folders.  

Mon Jun 14 12:56:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In display_mainmenu, substitute arithmetic for the loop to scroll
	the main menu horizontally to keep the selected menu on the screen.  

Mon Jun 14 12:15:40 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation fix: entête -> en-tête.  

Mon Jun 14 10:28:37 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jun 14 10:16:27 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	find_link(): minor optimization and cleanup, move @direction test
	outside loop.  

Mon Jun 14 10:08:58 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Rearrange scroll-related functions, group mouse-related functions.  

Mon Jun 14 10:05:28 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Drop TODO.  

Mon Jun 14 10:02:56 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, viewer/text/view.c:

	Group scrolling options under document.browse.scrolling tree, and
	introduce horizontal_step sub-option, cleanup.  

Mon Jun 14 09:33:39 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	scroll() -> vertical_scroll(), hscroll() -> horizontal_scroll(),
	drop buggy MacOS nameclash workaround scrool (not scroll).  

Mon Jun 14 08:02:29 2004  Laurent Monin <zas@norz.org>:

	* src/osdep/: os2/os2.c, unix/unix.c:

	Compilation fixes: include "terminal/mouse.h".  

Mon Jun 14 03:58:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Since init_session() and init_remote_session() is no longer called
	in tabwin_func() there is no need to open goto URL dialogs using
	bottom halves.  

Mon Jun 14 03:46:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): End loop after URI has been released.  

Mon Jun 14 02:21:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: Makefile.am, kbd.c, key.inc:

	Move key data to key.inc file.  

Mon Jun 14 01:27:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: kbd.h, terminal.h:

	Move declaration to correct header.  

Mon Jun 14 00:58:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	elinks.h includes setup.h 

Mon Jun 14 00:53:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/hotkey.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, bfu/text.c, bfu/widget.c,
	bookmarks/dialogs.c, cache/dialogs.c, cookies/dialogs.c,
	dialogs/menu.c, formhist/dialogs.c, globhist/dialogs.c,
	osdep/osdep.c, osdep/unix/unix.c, terminal/Makefile.am,
	terminal/event.h, terminal/kbd.c, terminal/kbd.h, terminal/mouse.h,
	viewer/text/view.c:

	Move terminal mouse stuff to terminal/mouse.h and remove a lot of
	unneded #includes of terminal/kbd.h which probably goes back to when
	hardcoded dialog keybinding was reworked.  

Mon Jun 14 00:18:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Compile fix.  

Mon Jun 14 00:08:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.h:

	Move comments about interlink information to terminal_info struct.  

Sun Jun 13 23:50:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): We do need to substract 2 * sizeof(int) for
	the old format to get the length of the URI data.  

Sun Jun 13 23:42:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Cleanup.  

Sun Jun 13 23:30:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Improve comments.  

Sun Jun 13 22:55:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Merge with draw_link_do(). Zas I hope you agree
	that with the other things split out this is ok. Also add missing
	check of init_link_drawing() return value.  

Sun Jun 13 22:50:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	init_link_drawing(): Introduced. Sets up the template char with all
	the funky document option checking.  

Sun Jun 13 22:46:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	find_link(): @normal -> !@page_mode.  

Sun Jun 13 22:43:53 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, link.h, search.c:

	Use find_link_*() and make find_link() static.  

Sun Jun 13 22:42:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, view.c:

	draw_view_status(): Apart from the bad name it draws form, search
	and link stuff. Replaces old draw_current_link(). draw_link()
	renamed to draw_current_link().  

Sun Jun 13 22:37:56 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	Use find_link_page_down().  

Sun Jun 13 22:37:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Don't take current link number but use
	get_current_link() macro.  

Sun Jun 13 22:36:50 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Use find_link_{up|page_up|down|page_down}().  

Sun Jun 13 22:31:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	get_link_cursor_offset(): Introduced.  

Sun Jun 13 22:26:06 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, link.h:

	find_link_{up|page_up|down|page_down}() were introduced.  

Sun Jun 13 22:19:01 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	@p -> @direction, @s -> @normal.  

Sun Jun 13 22:08:30 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, view.c, view.h:

	Drop now useless rep_ev() parameter.  

Sun Jun 13 22:02:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	scroll_{mouse_}{left|right}() were introduced.  

Sun Jun 13 21:49:36 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	scroll_mouse_{up|down}() were introduced.  

Sun Jun 13 21:37:09 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Make scroll() static and introduce scroll_{up|down}().  

Sun Jun 13 21:19:02 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	move_{up|down}() were introduced, logic from page_{up|down}() was
	moved to them. Third parameter of up(),down(),page_up(), page_down()
	is not used, it will help to cleanup find_links().  

Sun Jun 13 20:20:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Fix the comments to reflect that most of the
	session info is now part of the terminal_info struct.  

Sun Jun 13 19:00:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): No need for ugly casting anymore.  

Sun Jun 13 18:56:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/session.c, terminal/event.h, terminal/kbd.c,
	terminal/kbd.h, terminal/terminal.c:

	Pass the remote session flags by using special
	INTERLINK_REMOTE_MAGIC to figure out what the session info integer
	holds.  

Sun Jun 13 18:45:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Cleanup magic varialbe usage.  

Sun Jun 13 18:43:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Only check saved sessions when handling the
	'new' format. Comment updated.  

Sun Jun 13 18:39:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.h, terminal/kbd.c:

	Define INTERLINK_NORMAL_MAGIC macro.  

Sun Jun 13 18:08:16 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	next_in_view(): @p -> @current, @d -> @direction, @p1 -> @start, @p2
	-> @end, tidy up.  

Sun Jun 13 17:58:53 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	next_in_view(): @yl -> @height, use int_max() instead of
	int_upper_bound().  

Sun Jun 13 17:55:39 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	in_view{x|y}: minor optimizations.  

Sun Jun 13 17:51:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.h, terminal/kbd.c:

	Make base session id and magic part of the terminal_info struct.
	Much easier. SESSION_MAGIC() -> INTERLINK_MAGIC().  

Sun Jun 13 17:43:38 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	get_{first|last}_link(): tidy up and minor optimizations.  

Sun Jun 13 17:42:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/event.c:

	Pass terminal_info struct to decode_session_info().  

Sun Jun 13 17:22:12 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Draw_link() was splitted to draw_link_do(), @l -> @number.  

Sun Jun 13 14:53:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Another bug introduced by me in my clueless patch rampage. No
	freaking data in HTTP Auth URIs.  

Sun Jun 13 13:57:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: auth.c, auth.h, dialogs.c:

	Store URI struct in the auth info struct.  

Sun Jun 13 13:43:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.c:

	Simplify the auth URI passing.  

Sun Jun 13 13:25:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	destroy_all_terminals(): Use list_empty().  

Sun Jun 13 12:48:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/session.c, sched/session.h:

	Move stuff away from init() to encode_session_info().  

Sun Jun 13 12:29:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Fix comment.  

Sun Jun 13 12:20:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Pass the terminal_info to check_terminal_name().  

Sun Jun 13 12:18:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, event.h, kbd.c:

	Change terminal_info->term to ->name.  

Sun Jun 13 12:14:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, screen.c, terminal.h:

	Remove the term->term member. We can just use term->spec->name and
	it will even make more sense for the screen driver thing.  

Sun Jun 13 12:04:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Fix off by one error in handling of query part in the
	base URI. Spotted by zas.  

Sun Jun 13 04:03:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	handle_interlink_event(): Use redraw_terminal_cls() for hanling
	Ctrl-L even though it is not as fast it is more clear what is going
	on.  

Sun Jun 13 03:57:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	handle_interlink_event(): Cleanup KBD_CTRL_C handling.  

Sun Jun 13 03:49:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	check_terminal_name(): Make error handling simpler.  

Sun Jun 13 03:47:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	check_terminal_name(): Use for loop. Group strcpy() with strcat().  

Sun Jun 13 03:45:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	check_terminal_name(): Cleanup.  

Sun Jun 13 03:43:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	handle_interlink_event(): Split out terminal name checking to
	check_terminal_name().  

Sun Jun 13 03:37:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): Compile fix ;) but most important a cleanup and
	description of the loop. We now add stuff back to the
	term->qfreespace counter before stopping the loop if term->qlen gets
	zeroed.  

Sun Jun 13 03:25:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): r -> event_size in the loop.  

Sun Jun 13 03:23:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): Make goto loop into while loop.  

Sun Jun 13 03:21:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Oops forgot the crucial part of last patch.  

Sun Jun 13 03:13:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): Move switch to separate function.  

Sun Jun 13 00:54:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: menu.c, menu.h:

	Compile fix.  

Sun Jun 13 00:46:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/link.c:

	link_menu(): Add submit form and open in new tab items. Make the
	open in new window action implicit.  

Sun Jun 13 00:39:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	link_menu(): Use switch.  

Sun Jun 13 00:30:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listmenu.c, viewer/text/form.c, viewer/text/form.h,
	viewer/text/link.c, viewer/text/link.h:

	get_current_state(): Move to form file.  

Sun Jun 13 00:25:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h:

	Remove print_current_link().  

Sun Jun 13 00:24:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frame_ev(): Use get_current_link_info() for the copy clipboard
	thing.  

Sun Jun 13 00:24:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	display_status_bar(): Optimize current_frame() calling and use
	get_current_link_info() so we don.t call it 3 times.  

Sun Jun 13 00:17:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, viewer/text/form.c, viewer/text/form.h,
	viewer/text/link.c, viewer/text/link.h:

	Pass session to get_form_info() and get_current_link_info().  

Sun Jun 13 00:12:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, viewer/text/link.c, viewer/text/link.h:

	get_current_link_title(): No use to pass term.  

Sun Jun 13 00:06:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, viewer/text/link.c, viewer/text/link.h,
	viewer/text/link.c:

	print_current_link_title_do() -> get_current_link_title(),
	print_current_link_do() -> get_current_link_info().  

Sat Jun 12 23:50:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	init_remote_session(): Assert that remote session flags is not
	masked out.  

Sat Jun 12 19:43:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Tidyup.  

Sat Jun 12 19:29:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Outdent last part.  

Sat Jun 12 19:28:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	get_form_info(): Cleanup. Unify use of local variables.  

Sat Jun 12 19:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h, link.c:

	Split form stuff in print_current_link_do() out into
	get_form_info().  

Sat Jun 12 19:23:19 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, document/document.h:

	Trim trailing spaces.  

Sat Jun 12 19:14:20 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Drop extra whitelines.  

Sat Jun 12 19:07:48 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	print_current_link_do(): code cleanup.  

Sat Jun 12 18:51:21 2004  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/signals.c, lowlevel/signals.h, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h, viewer/text/textarea.c,
	viewer/text/textarea.h, viewer/text/view.c:

	@t -> @term.  

Sat Jun 12 18:43:15 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Drop redundant sig_ctrl_c() prototype.  

Sat Jun 12 18:06:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Make field_op_do() static.  

Sat Jun 12 18:05:53 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/dump/dump.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h, viewer/text/textarea.c,
	viewer/text/textarea.h:

	@l -> @link.  

Sat Jun 12 17:55:38 2004  Laurent Monin <zas@norz.org>:

	* src/: document/document.h, document/html/renderer.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	struct link: @form -> @form_control.  

Sat Jun 12 17:42:57 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	Drop dead code.  

Sat Jun 12 17:39:56 2004  Laurent Monin <zas@norz.org>:

	* src/document/: document.h, renderer.c, html/renderer.c:

	struct link: @num -> @number.  

Sat Jun 12 17:29:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/document.h, sched/action.c:

	Merge loc_msg() and state_msg() into document_info_dialog(). Rename
	head_msg() to protocol_header_dialog().  

Sat Jun 12 17:28:43 2004  Laurent Monin <zas@norz.org>:

	* src/: document/docdata.h, document/document.c,
	document/document.h, document/renderer.c, document/html/renderer.c,
	document/plain/renderer.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c:

	struct link: @n -> @npoints, @pos -> @points.  

Sat Jun 12 17:19:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	loc_msg(): Use find_in_cache() instead of get_cache_entry(). We
	don't want to create a new entry but only look at existing one.
	Spotted by pasky.  

Sat Jun 12 16:59:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.h:

	Remove fc_len member of struct submitted_value.  

Sat Jun 12 16:31:42 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.h:

	Normalize function declarations.  

Sat Jun 12 16:29:05 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	field_op(): use struct terminal *term to shorten lines.  

Sat Jun 12 16:27:39 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	field_op(): code simplification.  

Sat Jun 12 16:26:15 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	field_op(): @frm -> @fc, this name is more common among code for
	struct form_control pointer.  

Sat Jun 12 16:23:52 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	field_op(): @l -> @link.  

Sat Jun 12 16:06:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/session.c:

	get_current_url(): Also try ses->loading_uri so that slow loading
	pages (like bz) will show up earlier when pressing 'G'.  

Sat Jun 12 15:55:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	redirect_cache(): Use get_uri_string() when doing the fake '/'
	redirects. It is safer and I can trim away some of that confusing
	comment I wrote once.  

Sat Jun 12 15:46:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	rewrite_uri(): Use add_uri_to_string() when adding current URI.  

Sat Jun 12 15:43:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp/ftp.c:

	... and free the URI string too.  

Sat Jun 12 15:43:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp/ftp.c:

	Use get_uri_string() instead of accessing URI directly. It will also
	make sure that password is not shown on the screen.  

Sat Jun 12 15:34:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Use add_uri_to_string().  

Sat Jun 12 15:26:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Tidyup.  

Sat Jun 12 15:25:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Merge init_session_info_string() into open_uri_in_new_window().  

Sat Jun 12 15:19:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h:

	Remove now unused add_encoded_shell_safe_url() and
	decode_shell_safe_url().  

Sat Jun 12 15:16:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/menu.c, sched/session.c, sched/session.h:

	Introduce session_info struct that is basicly like the old
	initial_session_info struct but is only used for openning instances
	in new windows. The new instance connects and the base_session id is
	used to look up saved session info from which we can initialize. The
	id member of struct session can then be removed. More can be removed
	but that will happen in later patch.  

Sat Jun 12 15:03:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Remove initial_session_info struct declaration.  

Sat Jun 12 15:02:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.h:

	Cleanup #include.  

Sat Jun 12 12:33:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Cleanup.  

Sat Jun 12 12:24:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Cleanup the loop. Comment on why warning
	about bad URL syntax is not needed.  

Sat Jun 12 12:14:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): This little hack is needed to make sure that the terminal
	is initialized and ready to draw on.  

Sat Jun 12 11:54:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Hmm.  

Sat Jun 12 11:45:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Cleanup init_session() calling for multiple
	loops. Just break out if allocation fails.  

Sat Jun 12 11:35:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): base_session -> ses. It made the code too
	readable and we can't have that.  

Sat Jun 12 11:30:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	init_remote_session(): Make it even more evil by making it mangle
	reference to remote flags.  

Sat Jun 12 11:24:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	decode_session_info(): Return int. Much simpler with term not being
	destroyed anymore.  

Sat Jun 12 11:19:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.c:

	Move the destroy_terminal() back to in_term()'s EV_INIT handler. It
	is the only thing really using it since decode_session() will be
	called for all terminal creation. Besides it fixes -remote support
	;) 

Sat Jun 12 11:00:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Don't break if next NUL char is not found so
	ELinks' using the old format can connect again.  

Sat Jun 12 01:17:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Reduce code duplication by doing allocation and URI
	normalization if length is set to something meaningful. It means
	'//' branch will also call normalization but we shouldn't trust the
	web authors in the first place.  

Sat Jun 12 01:10:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Also use memacpy() for '//' joining instead of the
	get_uri_string() beast.  

Sat Jun 12 01:07:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Comments and breathing room.  

Sat Jun 12 01:01:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): tmp -> length, n -> uristring 

Sat Jun 12 00:55:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Simplify the URI normalization interface a bit.  

Sat Jun 12 00:50:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Make better use of fragment and post member when
	joining '?' relative URI.  

Sat Jun 12 00:43:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Make better use of fragment and post member when
	joining '#' relative URI.  

Sat Jun 12 00:35:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Check return value of get_uri_string().  

Sat Jun 12 00:16:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	URI_FORM_GET should not have URI_FRAGMENT flag set since query was
	removed before and fragment part is after query part.  

Sat Jun 12 00:14:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	get_no_post_url_length(): Remove.  

Sat Jun 12 00:12:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser/forms.c, protocol/uri.h:

	Be smarter by using get_uri_string() when initializing form->action.  

Sat Jun 12 00:09:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Allow URI_PATH to be used with other URI components.  

Fri Jun 11 23:48:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, protocol/uri.c, protocol/uri.h:

	Generalize adding of '(POST DATA)' for strings returned by
	get_uri_string(..., URI_PUBLIC); Don't know it might be helpful for
	some but should maybe be disabled for non debug builds.  

Fri Jun 11 23:24:46 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jun 11 23:16:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix broken session setup. setup_first_session() now returns bool
	whether to also call setup_session().  

Fri Jun 11 23:05:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Move the juicy stuff last.  

Fri Jun 11 23:05:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	tabwin_func(): Don't break on EV_INIT we want those main menu and
	status bar drawn on the screen.  

Fri Jun 11 23:03:48 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	Drop commented out dead code.  

Fri Jun 11 23:03:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Introduce init_boundary().  

Fri Jun 11 21:58:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	BL -> BOUNDARY_LENGTH 

Fri Jun 11 21:56:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_range(): Fix a few comments and only initialize the boundary
	counter once. The reason to do it twice before was that we could
	match the boundary but we don't search them anymore.  

Fri Jun 11 21:48:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_boundary(): Code bloat and optimization. But it is mostly
	comments. The boundary string 'incrementation' was split out to
	separate function.  

Fri Jun 11 19:38:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Make the bound string part of the boundary_info struct.  

Fri Jun 11 19:32:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Use boundary_info struct to pass boundary offset info around. Fixes
	file uploading (and other multipart post handling). Guilty code was
	the *nbound_ptrs++ which didn't do what was expected.  

Fri Jun 11 19:21:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_boundary(): Outdent the loop. Bad idea.  

Fri Jun 11 19:05:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_boundary(): Indent the loop nothing else.  

Fri Jun 11 19:04:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_boundary(): Use string pointers.  

Fri Jun 11 18:58:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	check_boundary(): Use memcmp().  

Fri Jun 11 18:54:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Move boundary check to separate function.  

Fri Jun 11 17:35:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Send Content-Type header for file uploads if the MIME subsystems
	knows it. Make autodetection of bugzilla attachment creation
	possible.  

Fri Jun 11 14:56:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h:

	init_tab(): No need to take in_background arg.  

Fri Jun 11 14:55:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/tab.c:

	Do all the tab switching in init_session() since we have more
	control there.  

Fri Jun 11 14:43:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.c:

	Only destroy the terminal if first tab fails to be created.  

Fri Jun 11 14:39:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h:

	Merge create_session() into init_session(). init_tab() now takes
	data pointer. The reverse order of initialization of sessions should
	help improve error handling.  

Fri Jun 11 14:12:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/event.c:

	Remove the need for initial_session_info by calling create_session()
	in init_session(). Ahh :)) 

Fri Jun 11 14:02:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	Make tabwin_func static.  

Fri Jun 11 14:00:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/interlink.c, terminal/terminal.c,
	terminal/terminal.h:

	init_term(): No need to take root_window arg anymore.  

Fri Jun 11 13:58:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/terminal.c:

	Make init_session() do all the tab creation.  

Fri Jun 11 13:54:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	init_session(): Return initial_session_info for no good reason.  

Fri Jun 11 13:29:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h,
	terminal/terminal.c:

	init_tab(): Take the handler as arg.  

Fri Jun 11 13:04:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	follow_url(): Also send fragment stuff to the event.  

Fri Jun 11 12:36:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	follow_url(): Use URI_BASE instead of URI_ORIGINAL so we get the
	post stuff right in the returned URI. Note added about a possible
	future scenario where post data should be fixed up. Spotted by
	pasky.  

Fri Jun 11 10:30:52 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	search_dlg_do(): drop more constant parameters.  

Fri Jun 11 10:13:10 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.h:

	add_dlg_field_do(): use struct widget * and reduce code redundancy.  

Fri Jun 11 10:02:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	search_dlg_do(): drop unused parameters and simplify code a lot.  

Fri Jun 11 03:22:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Revert last patch. It is too unpredictable.  

Fri Jun 11 03:03:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make link typeahead searching honor links in the current view. Idea
	by Miciah altho' it still doesn't fix his problem since links in the
	lower half of the view will become centered so scrolling is done
	even though it might not be what you want.  

Fri Jun 11 02:00:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_additional_file(): URIs can potentially contain fragments so
	compare using URI_BASE.  

Fri Jun 11 01:21:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Only greet people on first_use if they don't
	pass any URI on the command line. Is this bad practice? 

Fri Jun 11 01:06:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_real_uri_length(): Fix off by one error.  

Fri Jun 11 00:54:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Dammit. Goto URL home.  

Fri Jun 11 00:47:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/session.c, sched/session.h:

	create_session_info() -> encode_session_info().  

Fri Jun 11 00:44:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	handler_remote_session() -> init_remote_session().  

Fri Jun 11 00:42:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Shorten lines but using temporary variable.  

Fri Jun 11 00:39:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	dialog_goto_url_open_first() was removed and the s/_first// one is
	used instead and first_use is set to zero right away. I can't see
	why it has to be done in the button handler.  

Fri Jun 11 00:28:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_session(): Cleanup and describe. No need to check first_use
	before showing goto URL dialog.  

Fri Jun 11 00:22:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	process_session_info() -> setup_session() and merge in
	copy_session().  

Fri Jun 11 00:18:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Only open goto URL dialog if no URL was
	passed on the command line.  

Fri Jun 11 00:10:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	setup_first_session(): Take URI arg and duplicate code a bit. It
	will help fix a bug and makes the session autosave stuff much saner.  

Thu Jun 10 23:55:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session(): Only copy session if not the first one.  

Thu Jun 10 23:52:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix possible leak of initial_session_info.  

Thu Jun 10 23:47:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session(): session_info can never be NULL. We check for it at
	initialization time.  

Thu Jun 10 23:43:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Cleanup.  

Thu Jun 10 23:22:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Move functions around so they don't have to be predeclared.  

Thu Jun 10 22:56:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	init_session_info(): No remote arg is needed.  

Thu Jun 10 22:28:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Random cleanups.  

Thu Jun 10 22:21:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Fix start up with no URIs on the command
	line.  

Thu Jun 10 22:11:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Small cleanup.  

Thu Jun 10 21:55:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	initial_session_info->uri_list replaced by URI pointer.  

Thu Jun 10 21:49:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Use init_session() to open all URIs but the
	first one.  

Thu Jun 10 21:45:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	Reintroduce the eye-rolling init_session().  

Thu Jun 10 18:44:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Also call handle_remote_session() when there
	are no URIs. Fixes xfeDoCommand(openBrowser) command.  

Thu Jun 10 18:18:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	handle_remote_session(): Doh. Fix logics.  

Thu Jun 10 18:15:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/event.c:

	Remove the remote_session_flags from initial_session_info.
	decode_session_info() now does all the fun stuff.  

Thu Jun 10 17:59:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Move remote handling up so it can be used in session info decoding.  

Thu Jun 10 17:57:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	handle_remote_session(): Introduced. Note -remote is currently
	broken.  

Thu Jun 10 17:19:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	A little cleanup of remote handling.  

Thu Jun 10 17:02:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Revert last patch. Again.  

Thu Jun 10 16:59:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	decode_session_info(): Work on local uri_list variable.  

Thu Jun 10 16:49:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, util/conv.c, util/conv.h:

	decode_session_info(): Unify URI string parsing.  

Thu Jun 10 16:06:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	Revert last patch.  

Thu Jun 10 16:05:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	init_session(): Introduced. It is mostly just open_uri_in_new_tab().  

Thu Jun 10 15:40:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Damn open in new window stuff needs to decode the URI string.  

Thu Jun 10 15:37:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use initial_session_info->uri_list (part three).  

Thu Jun 10 15:30:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	Use initial_session_info->uri_list (part one). init_session_info()
	now takes URI struct.  

Thu Jun 10 15:27:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use initial_session_info->uri_list (part one). Call get_hooked_uri()
	in decode_session_info().  

Thu Jun 10 15:21:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	Comment out int num field in struct form, it is unused, though this
	is weird.  

Thu Jun 10 15:15:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/event.c:

	decode_session_info(): Take term arg. Unused for now.  

Thu Jun 10 14:54:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, task.c, task.h:

	Dejavu, get_hooked_uri() now takes the lot of args (like CWD and
	current URI) again.  

Thu Jun 10 14:27:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	Make initial_sesssion_info->base_session a session struct pointer.  

Thu Jun 10 14:19:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	Move struct initial_session_info declaration to C file.  

Thu Jun 10 14:12:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	process_session_info(): 'unblock' last part.  

Thu Jun 10 14:10:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session(): Take the initial_session_info and call
	process_initial_session().  

Thu Jun 10 13:51:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session() -> setup_first_session(), create_basic_session() ->
	create_session(). Basicly what the comment says.  

Thu Jun 10 13:46:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Move create_basic_session().  

Thu Jun 10 13:35:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	create_basic_session(): Make static.  

Thu Jun 10 13:23:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/tab.c:

	open_uri_in_new_tab(): Use init_session_info().  

Thu Jun 10 13:16:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	init_session_info(): Introduced.  

Thu Jun 10 12:21:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/: link.c, link.h, parse.c:

	Add support for <embed> tags. Like <object> support it just uses
	html_img() and html_iframe(). Requested by Stephen Stocker.  

Thu Jun 10 12:10:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h:

	get_extension_content_type(): Make public. It will be used for
	<embed> tag support.  

Thu Jun 10 12:09:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Cleanup the debug code.  

Thu Jun 10 12:00:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Fix the ctype debuggin'.  

Thu Jun 10 11:57:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_type(): Do the get_content_filename() checking in the
	cached->head branch.  

Thu Jun 10 11:55:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	get_content_filename(): Take optional cache entry arg to speed up
	things.  

Thu Jun 10 11:51:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h:

	get_content_filename(): Make static and move up.  

Thu Jun 10 11:21:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/imgmap.html:

	Link to test/ documents.  

Thu Jun 10 01:26:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	init_file_download(): Add error handling for last patch.  

Thu Jun 10 01:18:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	init_file_download(): The URI is passed using ses->download_uri that
	originates from both vs->uri and link->where_img so better ensure
	that no fragments are in it.  

Thu Jun 10 01:12:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_move(): Assertion about base URI should compare using URI_BASE.  

Thu Jun 10 01:10:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Oops. Some missing LINK_MAP stuff. ;) 

Thu Jun 10 00:02:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	parse_uri(): Fix POST_CHAR bug.  

Wed Jun  9 22:54:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor tidy up, label nb -> next_boundary.  

Wed Jun  9 22:42:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	@subm -> @list, @nx -> @next, @ch -> @changed.  

Wed Jun  9 22:36:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Move code from get_succesful_controls() to new
	sort_submitted_values().  

Wed Jun  9 22:12:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.h, viewer/text/link.c, viewer/text/link.h,
	viewer/text/view.c:

	enum frame_event_status introduced as return value for frame_ev()
	and send_to_frame().  

Wed Jun  9 21:42:19 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/form.c, viewer/text/view.c,
	viewer/text/view.h:

	Add an int frames arg to refresh_view(). Idea by Jonas.  

Wed Jun  9 21:29:00 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Revert part of last patch: draw_frames() has to be called after
	draw_doc().  

Wed Jun  9 21:22:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	menu_url_shortcut(): Use get_uri() and goto_uri().  

Wed Jun  9 21:14:31 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Trailing spaces fix.  

Wed Jun  9 21:13:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/bookmarks.c, document/refresh.c,
	sched/session.c, sched/task.c, sched/task.h, viewer/text/link.c,
	viewer/text/view.c:

	Introduce goto_uri() to battle against 'leaking' of referrer caused
	by goto_url() -> goto_url_frame() changes. Also rename
	goto_url_frame() to goto_uri_frame().  

Wed Jun  9 21:12:32 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/action.c, viewer/text/view.c:

	Use refresh_view() where applicable.  

Wed Jun  9 21:05:53 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/listmenu.c, viewer/text/form.c, viewer/text/form.h,
	viewer/text/link.c, viewer/text/link.h, viewer/text/view.c,
	viewer/text/view.h:

	Move selected_item() from link.c to form.c, and make
	init_form_state() static.  refresh_view() was introduced to help
	this move, and to reduce code redundancy.  

Wed Jun  9 20:49:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	goto_url_with_hook(): Bail out if passed empty string (from goto-url
	dialog).  

Wed Jun  9 20:48:47 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	init_ctrl() -> init_form_state().  

Wed Jun  9 07:49:55 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.h:

	Use enum form_type for type field in struct form_state, and
	rearrange fields in related structs.  

Wed Jun  9 00:22:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	follow_url() stuff now tries to pass the URI struct all the way.  

Tue Jun  8 23:26:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/session.c:

	open_url_in_new_window(): Rename to open_uri_in... and take clean
	URI.  

Tue Jun  8 23:22:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/bookmarks.c, sched/action.c,
	sched/session.c, terminal/tab.c, terminal/tab.h:

	open_url_in_new_tab(): Rename to open_uri_in... and take clean URI.  

Tue Jun  8 23:16:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	open_bookmark_folder(): Use URI structs.  

Tue Jun  8 23:05:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, task.c, task.h:

	process_session_info(): Use get_hooked_uri().  

Tue Jun  8 22:54:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	get_hooked_uri(): Pass the session so it can do all the dirty work.  

Tue Jun  8 19:33:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	Add a get_uri() method to the listbox operations.  

Tue Jun  8 17:01:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	get_hooked_uri(): Use oneliner.  

Tue Jun  8 16:54:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	get_translated_uri(): Don't be so anal about @cwd.  

Tue Jun  8 16:51:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Move event stuff from goto_url_with_hook() to get_hooked_uri().  

Tue Jun  8 16:36:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: view.c, vs.c:

	Oops vs->did_fragment should be touched now.  

Tue Jun  8 16:21:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	@yw -> @height, and is_in_range_*() interface uniformization.  

Tue Jun  8 16:14:02 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Move lowered_string() near its user.  

Tue Jun  8 16:13:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	The free_syntax member of the protocol_backend structure is not used
	anymore.  

Tue Jun  8 16:12:35 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	@s -> @text, @l,@len -> @textlen.  

Tue Jun  8 16:10:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix and improve file:// handling. Especially '#' handling.  

Tue Jun  8 15:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Hrmf.  

Tue Jun  8 15:08:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, document/html/parser.h,
	sched/task.c:

	Pass the loading session URI deep into the HTML parser so no
	allocation is needed.  

Tue Jun  8 14:51:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h, task.c:

	Remove session member imgmap_href_base and simply use loading_uri.  

Tue Jun  8 14:46:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h, task.c:

	Remove session member imgmap_target_base and simply use
	task.target_frame.  

Tue Jun  8 14:26:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, proxy.h, uri.h:

	Move get_proxied_uri() to proxy subsystem and make it into a real
	function.  

Tue Jun  8 14:20:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, proxy.h, uri.h:

	Merge get_proxy_uri() macro stuff into get_proxy() and name it all
	get_proxy_uri().  

Tue Jun  8 14:15:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/refresh.c, protocol/proxy.c,
	protocol/uri.h, sched/download.c, sched/download.h,
	sched/session.c, sched/session.h, sched/task.c:

	Remove lots of those new goto_uri members. Now the fun begins to see
	what it breaks. Also we have to 'rethink' stuff like how
	get_current_url() should behave. Should bookmarking add the fragment
	or not.  

Tue Jun  8 13:54:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/html/parser.c, protocol/uri.c,
	protocol/uri.h, sched/task.c, viewer/dump/dump.c:

	Remove extract_fragment() and cleanup get_translated_uri()
	interface.  

Tue Jun  8 13:49:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, dialogs/document.c, protocol/uri.c,
	sched/download.c, sched/download.h, sched/history.c,
	sched/session.c, sched/session.h, sched/task.c, sched/task.h,
	viewer/text/view.c, viewer/text/vs.c, viewer/text/vs.h:

	Actually use the new URI fragment member. All the way down the goto
	chain previous goto_position member that contained the fragment part
	of the URI has been replaced by goto URI. Only exception is
	view_state and find_in_cache()'s URI comparison has been changed to
	reflect this.  
	
	Note: A lot of error checking has not been added since a lot is
	still temporary.  

Tue Jun  8 13:37:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	compare_uri(): Compile fix.  

Tue Jun  8 13:34:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	find_in_cache(): Remove clever optimization. With fragments in URIs
	assuming not in cache when refcount is one is no longer correct.  

Tue Jun  8 13:32:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	compare_uri(): Fix post comparison.  

Tue Jun  8 12:42:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	compare_uri(): Only check special and idn URI flag.  

Tue Jun  8 12:23:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	compare_uri(): Add support for compare the remaining URI members.  

Tue Jun  8 12:19:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add fragment member to URI struct.  

Tue Jun  8 11:30:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Only free vs->goto_position when the cache entry is complete.  

Tue Jun  8 10:54:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Fix compilation failure spotted by zas.  

Tue Jun  8 00:04:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, uri.h:

	Oops URI_PROXY needs URI_IDN even though it only works in theory.  

Tue Jun  8 00:00:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, uri.h:

	A little cleanup in the URI components.  

Mon Jun  7 23:38:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/refresh.c, document/html/frames.c,
	document/html/parser.c, protocol/proxy.c, protocol/uri.c,
	protocol/uri.h, sched/task.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/view.c:

	get_uri(): Take uri_component flags instead of length. Uses
	get_composed_uri() as backend.  

Mon Jun  7 23:21:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	redirect_cache(): Correctly renew @redirect member.  

Mon Jun  7 17:46:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	document/document.c, document/document.h:

	id_tag -> id.  

Mon Jun  7 17:39:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	delete_cache_entry(): Group done_uri()s.  

Mon Jun  7 16:36:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: marks.c, marks.h, view.c:

	goto_mark(): Introduced to make marks interface 'cleaner'. Stuff
	from frame_ev() moved to it.  

Mon Jun  7 16:25:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/dialogs.c, sched/connection.c,
	viewer/text/view.c:

	More compare_uri() usage. Hmm 

Mon Jun  7 16:18:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Simplify init_document() and get_cached_document() by passing
	cache_entry.  

Mon Jun  7 15:58:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/protocol/rewrite/rewrite.c, src/sched/task.c,
	src/scripting/guile/hooks.c, src/scripting/lua/hooks.c,
	src/scripting/perl/hooks.c:

	Pass current URI to goto-url event instead of current session.  

Sun Jun  6 13:19:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix URI referencing. Reported by Stephen Stocker.  

Sun Jun  6 12:34:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Cleanup checking whether @rel contains protocol.  

Sun Jun  6 12:21:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Cleanup case when relative string start with '//'.  

Sat Jun  5 21:14:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/html/parser.c,
	document/html/parser/forms.c, document/html/parser/link.c,
	protocol/uri.c, protocol/uri.h:

	join_urls(): Take base as URI struct. Lots of cleanups needed.  

Sat Jun  5 21:03:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, parser/forms.c,
	parser/link.c, parser/stack.c:

	Make (HTML) format.href_base reference a URI.  

Fri Jun  4 13:44:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Introduced get_composed_uri(). Not used yet.  

Fri Jun  4 13:43:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	find_tag(): Take length arg.  

Fri Jun  4 13:36:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Make room for URI_FRAGMENT flag.  

Fri Jun  4 13:27:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, sched/session.c, sched/session.h,
	sched/task.c:

	ses_change_frame_uri(): Remove it. Two users. Better inline it IMO.
	Plus the format_frame() one we already have the frame so ...  

Fri Jun  4 13:04:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Space fix.  

Fri Jun  4 12:48:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_formatted(): Don't use get_cache_uri() when passing URI to
	init_vs(). It assumes it is non-NULL and besides the cache_entry
	should never be incomplete at this point.  

Fri Jun  4 12:46:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_frame(): Even though something might not use it pass the CWD
	to get_translated_uri().  

Fri Jun  4 07:54:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	clear_hchars(): Also clear color using par_format.bgcolor. Fix bug
	462.  

Fri Jun  4 07:40:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c:

	Introduce link_is_form() macro. Morning zas :) 

Fri Jun  4 07:37:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: search.c, search.h:

	@a, @d -> @direction.  

Fri Jun  4 07:33:37 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Drop useless whitelines and minor reindentation.  

Fri Jun  4 07:29:53 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	lowered_string(): drop useless intermediate variables.  

Thu Jun  3 23:01:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove TODO about using struct string. I think it is better to keep
	the tuned sizes of integer members. Add TODO about trying
	file_exist() for URIs with fragment and query part removed.  

Thu Jun  3 22:55:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix bad handling of /.. introduced in the patch that was supposed to
	reduce the number of directory redirects.  

Thu Jun  3 21:12:41 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	search_dlg(): @a -> @direction, do test only once.  

Thu Jun  3 21:08:06 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	search_dlg_do(): make it static and reindent parameters.  

Thu Jun  3 21:01:54 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	get_searched_regex(): code cleanup and loop optimization.  

Thu Jun  3 13:47:29 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	search_link_text(): code simplification and optimization.  

Thu Jun  3 13:27:52 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Tidy up.  

Thu Jun  3 08:08:54 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix a typo (CONFIG_MAKRS) that broke the mark-set action.  

Wed Jun  2 10:36:55 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Elinksify temporary file name template: "linksarea-XXXXXX" ->
	"elinks-area-XXXXXX" 

Wed Jun  2 10:34:58 2004  Laurent Monin <zas@norz.org>:

	* src/: protocol/user.c, util/file.c, util/file.h, util/secsave.c,
	viewer/text/textarea.c:

	safe_mkstemp() was introduced to prevent a potential security issue,
	leading to permit all users to read textarea content while an user
	edit it through external editor.  

Wed Jun  2 06:38:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove some excess indentation spotted by Jonas.  

Tue Jun  1 07:14:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/uri.c:

	Obfuscate compare_uri(): Substitute boolean operators for some ifs
	and returns.  

Tue Jun  1 06:57:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove a TODO for what I jus' done.  

Tue Jun  1 06:40:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Revert, darnit! 

Tue Jun  1 06:35:41 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Revert the last patch: It is obviously wrong as we call
	switch_to_tab just prior.  

Tue Jun  1 06:26:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	We assert(ses->tab == get_current_tab(ses->tab->term)); in
	tabwin_func, so, in send_event, use |ses->tab| and |ses| instead of
	assigning |tab = get_current_tab(ses->tab->term);| and using |tab|
	and |tab->data|.  

Tue Jun  1 06:23:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Open the tab menu when the user right-clicks the document canvas and
	no other action is taken (i.e., the user did not click a link).  

Tue Jun  1 06:21:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In do_mouse_event, return the result of send_to_frame().  

Tue Jun  1 06:19:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In frame_ev, return 0 if the mouse event was not handled.  

Tue Jun  1 06:18:19 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Only allow scroll-margins with the left mouse-button.  

Tue Jun  1 05:55:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Do not redraw an extra time when the user right- or middle-clicks a
	link.  

Tue Jun  1 05:31:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove a superfluous assignment.  

Tue Jun  1 04:25:06 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In draw_doc, free goto_position whether or not the fragment
	identifier is found. As it was, freeing only when the fragment
	identifier was found, there was an endless loop as draw_doc()
	displayed the 'Missing fragment' box, one clicked 'OK', draw_doc()
	was called to redraw the document, draw_doc() again tried to find
	the fragment and, not finding it, displayed the 'Missing Fragment'
	box, and so on.  
	
	(I discovered and explained this problem on IRC after I suggested 
	that we not free goto_position, remember, Jonas?) 

Tue Jun  1 00:42:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove get_no_post_url() and save a stack frame.  

Tue Jun  1 00:39:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Improve the fix for bug 95 by checking if the cached document is
	incomplete before poping up a message box and now we only free() the
	goto_position if we are successful like in the old code. And the
	return is complely absurd so removed.  

Tue Jun  1 00:09:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Compile fix.  

Tue Jun  1 00:03:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove get_uri_hostlen(). Miciah doesn't like it.  

Mon May 31 23:56:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Even use compare_uri() for comparing the port of the
	keepalive_connection.  Port member can then be removed. The default
	port case should be covered by the protocol comparison.  

Mon May 31 23:49:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	get_keepalive_connection(): Use compare_uri() for checking
	keepalive_connection. Note this is a bit more fine grained than
	before because we only checked password part if uri part was
	present. This should not be a problem I hope.  

Mon May 31 23:27:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Replace keepalive_connection protocol and host member with URI
	struct.  

Mon May 31 23:19:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Why do we use protocol_handler for keepalive_connection->protocol.
	It is not like it will ever change plus just using enum protocol
	will guard against defining protocol handlers to the same (proxy
	comes to mind) even though the port number would probably guard
	against that.  

Mon May 31 17:34:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Replace host_connection->connection with a struct object to improve
	debugging.  

Mon May 31 17:19:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use URI struct in struct host_connection instead of the host string.
	Altho' it could pin down the URI a little longer than otherwise it
	is only temporarily and I think this is a bit cleaner.  

Mon May 31 17:16:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/history.c, sched/session.c,
	sched/task.c, document/refresh.c, protocol/uri.c, protocol/uri.h:

	Introduce compare_uri(uri, uri, uri_component) function to obsolete 
	uris_compare(). It is a work in progress guarded by an assertion.  
	Idea by Miciah.  

Mon May 31 12:39:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Three things (yeah I know it is a bit too aggressive): 
	
	- Remove cookie->id since nothing uses it 
	
	- Remove c_server->accept since nothing uses it 
	
	- Rename c_server->server to host. It should be less confusing 
	
	The only real code changes is in the dead code.  

Mon May 31 12:19:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix COOKIES_DEBUG building.  

Mon May 31 12:17:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix overly strict cookie policy. If !c_server->accept) we always
	bailed out. I should not have reverted all the patch. ;) 

Mon May 31 12:09:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, dialogs.c:

	A few fixes of cookie->server usage.  

Mon May 31 05:04:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, config/kbdbind.c:

	add_listbox_item(): Add support for not updating browser dialogs by 
	passing a NULL browser. Note the root item must be non-NULL in that
	case.  Finally also add argument that controls where to add the new
	item.  
	
	init_action_listboxes(): Use add_listbox_item(). A little cleanup
	included to keep lines shorter.  

Mon May 31 03:45:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cache/cache.c,
	config/kbdbind.c, cookies/cookies.c, formhist/formhist.c,
	globhist/globhist.c, protocol/auth/auth.c, sched/download.c:

	add_listbox_item() is now the name of the common backend. Remove
	@text arg.  

Mon May 31 03:36:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, config/kbdbind.c:

	Remove listbox_item->translated flag. get_info() stuff should take
	care of that now.  

Mon May 31 03:34:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Use add_listbox_leaf() when setting up keybinding->box_item.  

Mon May 31 03:33:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	A small fix for some late renaming bits in last patch.  

Mon May 31 03:27:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/bookmarks.c, config/dialogs.c, config/dialogs.h,
	config/kbdbind.c, config/options.c, cookies/dialogs.c:

	Remove listbox_item->text and only rely on get_info(...,
	LISTBOX_TEXT) calls.  

Mon May 31 02:38:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Cleanup and remove more code. Common backend moved to header again.
	Macros now wrap it for the folder and leaf adders.  

Mon May 31 02:33:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, listbox.h:

	Remove unused listbox_item->free_empty flag.  

Mon May 31 02:29:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c:

	add_listbox_item_at_pos() -> add_listbox_leaf(). add_listbox_item()
	now simply wraps add_listbox_leaf().  

Mon May 31 02:24:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Remove add_listbox_items(). It was a bad interface.  

Mon May 31 02:22:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c,
	cookies/cookies.h, cookies/dialogs.c:

	Use c_server struct for maintaining the 1st level box items in the
	cookie manager and also to reduce the number of cookie server
	strings to allocate.  

Mon May 31 01:24:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix cookie debug code cookie->server is memacpy(uri->host,
	uri->hostlen);.  

Mon May 31 01:21:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Sorry revert last patch. I am gonna use that.  

Mon May 31 01:19:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Outcomment c_servers which is always empty.  

Mon May 31 00:58:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Add checks using listbox_item->depth. We could maybe just make them
	into assertions.  

Mon May 31 00:51:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Bring listbox_ops to keybinding manager. Primarily used for delete
	button. Note it might hurt usability a bit, but now all managers are
	'equally' bad. ;-).  

Sun May 30 23:43:50 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/uri.c:

	Fix a bug that prevented cookies from being sent when requesting /
	on a server.  
	
	In add_uri_to_string, when adding the path or filename to to string, 
	we had these steps: 
	
	 - assign |uri->data| to |filename|; 
	 - decrement |filename|; 
	 - if |filename| does not begin with a '/', add '/' 
	   to the string that will be returned; 
	 - if |uri->datalen| is 0, return the string; and 
	 - further steps to add the path or filename to the string.  
	
	Do not decrement |filename|: this would leave |filename| pointing at
	"/", which would keep the "/" from being added to the return-value, 
	but |uri->datalen| is 0 when the URI refers to /.  Therefore,
	|get_uri_string(uri, URI_PATH);| would return an empty string, which
	the cookie code didn't like.  

Sun May 30 22:56:23 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/dialogs.c:

	Show the cookie's path in the cookie manager's info window.  

Sun May 30 21:49:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Also assert URI_PATH and URI_FILENAME cases.  

Sun May 30 19:56:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/link.c:

	Only color the actual link text. Handling <a ...><img ..>other
	text</a> correctly would be messy. Reported by Miciah.  

Sun May 30 19:25:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Fix a few globhist listbox item text things.  

Sun May 30 18:52:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Introduce check_keystroke() to improve error handling.  

Sun May 30 18:50:23 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Move code from get_succesful_controls() to
	add_submitted_value_to_list().  

Sun May 30 18:25:51 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	draw_form_entry(): @t -> @term, @l -> @link, cache box->(x|y) -
	vs->(x|y), cleanup.  

Sun May 30 18:12:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Remove cookie->box_item->root->text updating that obviously didn.t
	work and has been made obsolete by get_info(..., LISTBOX_TEXT).  

Sun May 30 18:06:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, options.c:

	A few option manager related fixes. Don't translate anymore in
	display_listbox_item(). We do that in get_info() method. And then
	don't rely on listbox_item->text being set.  

Sun May 30 18:02:45 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor code simplification in find_form_state().  

Sun May 30 18:01:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Remove draw_cache_entry_item() and handle it using the get_info()
	op. Still we adding '(POST DATA)' at the end. Should we do that for
	the other get_info() handlers? 

Sun May 30 17:56:54 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Tidy up.  

Sun May 30 17:51:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	Introduce LISTBOX_TEXT flag for the get_info() function. This will
	lead us to abandon listbox_item->text in the long run but for now
	keybinding dialog needs it. It should fix garbage text shown as the
	cookie folder name (reported by Miciah and me) and also more
	genericly remove post data from globhist manager reported by zas.  

Sun May 30 17:21:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, cache/dialogs.c, config/dialogs.c,
	cookies/dialogs.c, dialogs/download.c, formhist/dialogs.c,
	globhist/dialogs.c, protocol/auth/dialogs.c:

	switch the listbox_ops->get_info() functions.  

Sun May 30 17:10:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Wtf get_uri_string(.., ~0); Hey man we have them URI_* things for a
	reason. Use URI_ORIGINAL instead.  

Sun May 30 16:11:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.c:

	Fix patch dated Fri May 21 12:22:14, auth.c (1.80 -> 1.81) and
	http.c (1.289 -> 1.290). Only add auth dialog to question queue if
	we have realm.  

Sun May 30 15:27:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/window.h:

	Fix bug 176 (Performance waste when resizing w/ multiple tabs open)
	so we schedule resizing and don't redrawing if tabwin_func() is not
	called for the current tab.  

Sun May 30 13:18:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Recalculate the filename length after the URI decoding. This should
	not have been removed in (1.167 -> 1.168).  

Sun May 30 12:42:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, mime/mime.c, mime/mime.h, protocol/uri.c,
	protocol/uri.h, sched/download.c:

	Move add_uri_filename_to_string() to mime/ and rename to
	add_mime_...  

Sun May 30 12:39:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Merge stuff from add_uri_filename_to_string() into the URI component
	framework. Use URI_FILENAME to get it.  

Sun May 30 12:01:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	set_cookie(): Doh. Stupid error. Reported by Stephen Stocker.  

Sun May 30 10:12:26 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun May 30 03:11:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Rename the tab-move-* actions to tab-move-{left,right} inspired by
	bug 131. Altho' I can get the tab moving to work anymore. :( 

Sun May 30 02:46:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	config/options.inc, document/html/parser/link.c:

	Add support for coloring bookmarks URIs. It could be quite expensive
	for some people but it's easy to make it optional but adding option
	and extending the check_bookmark_cache() macro to check the option.
	Bookmarks are checked before globhist because bookmarks are more
	'important'. Note that CSS support seems to override any bookmark
	link colors. Again the bookmark color is not cached in
	document_options. Finally a small fix in html_a() adding a dummy if
	(0) so that when neither globhist nor bookmarks are enabled the
	ending 'else' won't get mixed up with the previous if-else
	construct.  

Sun May 30 01:49:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/html/parser/link.c:

	Display image links with a distinct colour. Default is
	darkolivegreen but please change it if it is too annoying ;-). Also
	note this is a quick hack. 5 lines. So don't expect any
	document_options caching of the values which btw seems to be normal
	behaviour for image options.  

Sun May 30 00:57:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	normalize_uri(): Unfold the ending '/.' and '/..' cases and handle
	them specialized. Before they stripped also the '/' causing
	unnecessary redirects.  

Sat May 29 19:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	end_of_dir(): Is now passed URI struct and uses it to ignore '?' as
	end of dir for file:// URIS. Problem with this was reported by
	Grzegorz Adam Hankiewicz Thu, May 27, 2004 on elinks-users.  

Sat May 29 19:28:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Use get_uri_string(..., URI_PATH); to get path. Even though it means
	an allocation it should be safer since fragments for sure is removed
	and it removes the bad presumption that uri->data[-1] == '/'.  

Sat May 29 19:17:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/css.c, encoding/encoding.c,
	encoding/encoding.h, protocol/file/file.c:

	I am well aware that this is quite a big patch, but the previous way
	to call read_encoded_file() was so damn stupid and I don't know why
	I ever thought about passing the filename in a buffer. Now filename
	is passed using a string struct much cleaner and much safer.  

Sat May 29 19:09:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Whoops. Fix logic and wtf is file:// restricted in
	add_uri_to_string() anyway undone.  

Sat May 29 18:28:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Rewrite the dsep() *hint hint* thing to is_uri_dir_sep(uri, char)
	which wraps dir_sep() more elegantly.  

Sat May 29 18:14:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: user.c, file/cgi.c:

	Use get_uri_string(..., URI_QUERY); and clean things up a bit.  

Sat May 29 18:14:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Introduce URI_QUERY component and cleanup URI_PATH component.  

Sat May 29 17:44:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use conn->proxied_uri when adding globhist entries.  

Sat May 29 17:42:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Move end_of_dir() to c file.  

Sat May 29 17:37:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp/ftp.c:

	Minor simplification.  

Sat May 29 17:36:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	execute_cgi(): Use get_uri_string(..., URI_PATH); 

Sat May 29 17:29:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/ftp/ftp.c:

	add_file_cmd_to_str(): Use add_uri_to_string(..., URI_PATH); 

Sat May 29 17:23:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Only optionally add '/' 

Sat May 29 17:12:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/uri.c, protocol/uri.h:

	Introduce URI_PATH component and use it for cookies.  

Sat May 29 16:15:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, viewer/text/link.c, viewer/text/view.c:

	Since we encode URIs internally we have to decode them before
	showing them on the screen. Mentioned in bug 358. Also a little
	curious comment and light cleanup.  

Sat May 29 15:41:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add TODO items.  

Sat May 29 15:36:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.inc,
	dialogs/menu.c, dialogs/menu.h, sched/action.c, viewer/text/link.c:

	Add support for passing URIs to external commands filed as bug 124.
	It is really just a mix of URI rewrite and open_in_new_window code.
	Option tree name should be reviewed and whether to execute in fore-
	or background on terminal.  

Sat May 29 14:03:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Pop msg_box() when fragment is missing. Fixes bug 95.  

Sat May 29 13:54:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	Pass session to draw_doc(). Use term variable in draw_doc(). We
	should start writting out usage of term unless in the very lowlevel
	parts.  

Sat May 29 13:36:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix indentation.  

Sat May 29 13:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	With the newly introduced get_validated_cache_entry() bug 304 ("Do
	you want to post form data to URL" when cloning tab) should be
	fairly easy to fix by simple doing the same check that load_uri()
	will do to see if the existing cache entry can be 'reused'. Note
	this had me fooled at first because I have WWW_HOME set which is
	loaded in the background and I was so used to having the confirm
	post submit dialog load the 'post'-document of the cloned session.  

Sat May 29 13:26:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Fix comments.  

Sat May 29 13:21:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/connection.c:

	Move the cache entry checking in load_uri() to separate function.
	The fact that it 'mangles' the cache makes it a bit more
	complicated. This is one of the scariest part of the code and
	putting it in a function should hopefully make it either more clear.
	Please check the logics.  

Sat May 29 11:38:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Make tabwin_func sanity checking related to bug 296 into an
	assertion.  

Sat May 29 04:25:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	formhist/dialogs.h, protocol/auth/auth.c, protocol/auth/auth.h,
	protocol/auth/dialogs.c, protocol/auth/dialogs.h, sched/action.c:

	Skeleton for HTTP Auth manager.  

Sat May 29 03:40:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Fix bad dereference.  

Sat May 29 02:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.c, task.c, task.h:

	Remove two args to ses_goto() that is always the same: The priority
	(PRI_MAIN) and end handler (end_load).  

Sat May 29 02:28:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Initialize form control list in the declaration.  

Sat May 29 02:26:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Initialize post data string in get_form_uri() and fix possible leak
	if @go initialization failed.  

Sat May 29 01:08:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	encode_text_plain(): Cleanup and make the code more compact but more
	commented.  

Sat May 29 00:53:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/html/parser/forms.c,
	protocol/user.c, viewer/text/form.c, viewer/text/form.h:

	Add support for saving form data to temporary file that can be
	included from external handlers.  It also adds (crappy) support for
	<form enctype="text/plain">.  
	
	This should kind of fix bug 450 although there are probably a few
	things to improve: 
	1) The form data file is always created.  
	2) I don't know if it is correct to use \r\n for each encoded form
	line.  

Sat May 29 00:45:50 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Get rid of many labels/gotos by introducing add_boundary().  

Sat May 29 00:45:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/file.c, util/file.h, viewer/text/textarea.c:

	Introduce get_tempdir_filename() and use it in textarea_edit().  

Fri May 28 23:44:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	subst_cmd(): Various fixes related to 450 so that for example
	POST_CHAR + post data is not addes as subject and not for %u
	substitution either.  

Fri May 28 23:43:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	get_current_url(): Use get_real_uri_length() and rewrite it a little
	too.  

Fri May 28 23:42:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_real_uri_length(): Takes URI struct and returns the 'no post
	length'.  

Fri May 28 23:34:14 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri May 28 21:18:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_uri(): Take URI port into consideration when calculating
	the offset where to add the missing host slash.  

Fri May 28 21:16:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, sched/connection.c:

	Don't know if it is worth it but factor out host length calculation
	to get_uri_hostlen().  

Fri May 28 20:19:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Changed protocol.http.referer.policy default from 1 to 3. Another
	user just got burnt by that (thanks to dsuch for an impuls), so
	let's be RFC compliant for once! 

Fri May 28 18:39:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.c:

	comare_opt(): Compare x and y members. This is as far as I recall
	the old behaviour. Before I moved the x and y members of document
	options so they would not be compared. I did that out of ignorance.
	This I fully regret. Fixes bug 452.  

Fri May 28 17:35:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Clearify uri->form usage instead of uri->post.  

Fri May 28 16:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix confirm submit URI string. Now it uses the URI_PUBLIC class.  

Fri May 28 16:50:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, sched/task.c, viewer/text/form.c:

	Check if ses->referrer is incomplete when posting stuff. The patch
	adds a new URI flag named 'form' which is set by get_form_uri(), it
	is needed because uri->post might be empty.  

Fri May 28 16:37:08 2004  Laurent Monin <zas@norz.org>:

	* ABOUT-NLS, doc/color-model.txt:

	Remove trailing spaces.  

Fri May 28 15:43:00 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: listmenu.c, text.c:

	Drop trailing spaces.  

Fri May 28 15:40:39 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listmenu.c:

	Cache and assert (@order - 1).  

Fri May 28 15:40:04 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Code simplification.  

Fri May 28 13:42:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: dcigettext.c, dgettext.c, dngettext.c,
	gettext.c, ngettext.c:

	Always include locale.h via the libgnuintl.h. Fixes compilation of
	solaris.  

Fri May 28 13:02:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/: bzip2.c, encoding.c, encoding.h, gzip.c:

	Revert putting the extensions in the encoding backend. Older gcc
	don't like it.  

Fri May 28 11:57:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* autogen.sh:

	Revert bad things.  

Fri May 28 11:55:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* autogen.sh, configure.in, src/encoding/Makefile.am,
	src/encoding/bzip2.c, src/encoding/bzip2.h,
	src/encoding/encoding.c, src/encoding/encoding.h,
	src/encoding/gzip.c, src/encoding/gzip.h:

	Split up encoding backends.  

Thu May 27 12:54:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Fix buggy reference counting breaking URI list stuff.  

Thu May 27 12:19:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h, task.c:

	Revert goto_rewritten_uri(). It broke to many things to fix easy.  

Wed May 26 21:31:01 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix a bug in not_so_hot_keys scrolling in goto url history scrolling
	introduced in rev 1.184: list didnt scroll on first key press as it
	should when list was greater than terminal height.  

Wed May 26 21:12:37 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Tidy up.  

Wed May 26 20:40:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Cache *used - 1 since it is used 3 times.  

Wed May 26 20:35:28 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Indentation fixes.  

Wed May 26 17:25:03 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Tidy up.  

Wed May 26 16:43:31 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Comment gid and gnum fields of "checkbox" widget.  

Wed May 26 16:37:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h, task.c:

	get_rewritten_uri(): Introduced. Basicly it envokes the goto-url
	event and get_uri()s it.  

Wed May 26 16:35:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.h:

	Code redundancy was reduced regarding add_dlg_radio() and
	add_dlg_checkbox().  

Wed May 26 16:32:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	import_css_stylesheet(): Use get_translated_uri() so that #fragments
	are removed.  

Wed May 26 16:22:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/css/css.c, document/css/css.h, document/html/parser.c,
	document/html/renderer.c, protocol/uri.c, protocol/uri.h,
	sched/session.c:

	Add support for real URI lists and make document->css_imports use
	it.  

Wed May 26 14:53:33 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed May 26 13:59:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	Remove unused option_type_info->remove function and make
	option_types[] const.  

Wed May 26 13:45:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: cmdline.c, conf.c, options.h:

	Introduce --verbose stuff to silent config loading.  

Wed May 26 13:00:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Only autocreate 256 color options when needed.  

Wed May 26 10:34:54 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Comments about field names and values currently missing correct
	encoding were added.  

Wed May 26 07:54:12 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Random tidyup: use width,height instead of x,y where applicable,
	rename resize_term_x() to resize_term_from_str().  

Tue May 25 23:06:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	write_ev_queue(): Random cleanup.  

Tue May 25 23:00:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Make process_queue() static and fix comment.  

Tue May 25 22:56:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Alphabetize includes.  

Tue May 25 18:08:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/encoding/encoding.c:

	SSL is now nicely contained, so remove header defence.  

Tue May 25 18:05:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Whoops. What is COLOR_MODE_DUMP doing there it is not for stuff like
	that.  

Tue May 25 17:40:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix to use CONFIG_IDN.  

Tue May 25 17:39:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: osdep.c, unix/sysinfo.h, unix/unix.c:

	Fix to use CONFIG_GPM.  

Tue May 25 17:35:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, modules/version.c,
	protocol/http/http.c:

	Use CONFIG_GZIP and CONFIG_BZIP2 instead of *_H variants. Reported
	by Stephane CHAZELAS.  

Tue May 25 17:34:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_CHECK_OPTIONAL_LIBRARY(): #define CONFIG_* macros.  

Tue May 25 16:47:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, gettextP.h, intl-compat.c, l10nflist.c, loadmsgcat.c,
	localealias.c, ngettext.c, plural.c, textdomain.c:

	Normalize subdir includes by specifying the complete path. This
	should hopefully fix libintl.h inclusion conflicting with system
	libintl.h .. I thought I already fixed this on another solaris box
	but Stephane Chazelas reported it May 11 2004 on elinks-dev.  

Tue May 25 16:29:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, terminal/color.c,
	terminal/color.h, terminal/screen.c:

	Make the option system with its tremendous min/max value ensurance
	guard us against malicious values in term->spec->color_mode. Me
	thinks that is where it belongs, plus this completely wipes _all_
	traces of 256 color support when disabled oh and then it is less
	code too ;) 

Tue May 25 15:07:10 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: date.c, date.h:

	date.{c,h} were removed.  

Tue May 25 07:14:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: action.c, session.c, task.c, task.h:

	Move goto_url_home() to task file. Merge in get_homepage_url().  

Tue May 25 06:54:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, view.c, view.h:

	Use goto_current_link() in do_typeahead() and
	text_typeahead_handler(). Remove send_enter().  

Tue May 25 06:46:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	save_as(): Make it into a frame action.  

Tue May 25 06:38:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Move save_url() closer to save_url_as().  

Tue May 25 04:48:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/bookmarks.c, dialogs/menu.c,
	dialogs/menu.h, sched/session.c, terminal/tab.c, terminal/tab.h:

	Revert the last 4 patches. I hate this crap.  

Tue May 25 04:20:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/session.c:

	open_url_in_new_window(): Take URI struct as arg.  

Tue May 25 04:17:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	process_session_info(): Use URI struct in the url_list loop.  

Tue May 25 04:13:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/bookmarks.c, sched/session.c,
	terminal/tab.c, terminal/tab.h:

	open_url_in_new_tab(): Take URI struct as arg.  

Tue May 25 04:03:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	get_listbox_uri() introduced.  

Tue May 25 03:52:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, document/html/parser.h,
	sched/task.c:

	Pass session->imgmap_href_base as URI struct all the way down the
	call path.  

Tue May 25 03:45:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	uri->protocol_str -> uri->string.  

Tue May 25 03:40:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, sched/session.c:

	Last user of get_cache_uri_string() looks bogus too so remove it
	completely.  

Tue May 25 03:37:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Push the cache_entry URI all the way down to init_html_parser() even
	if the cache entry is incomplete making it easier to track the URI
	and finally fix the old behaviour so that the href_base is always
	properly initialized.  

Tue May 25 01:19:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, viewer/text/view.c:

	Never ever do we want to struri() something headed for follow_url().  

Tue May 25 01:00:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/task.c, sched/task.h,
	viewer/text/link.c:

	goto_url_frame(): Take URI arg. Damn I forgot to rename it ;(.  

Tue May 25 00:55:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/task.c, sched/task.h,
	viewer/text/link.c:

	Merge goto_url_frame() and goto_url_frame_reload() by adding an
	extra enum cache_mode arg to to former.  

Tue May 25 00:48:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, link.c, link.h:

	goto_link() -> goto_current_link() and now graps current links from
	passed doc_view.  

Tue May 25 00:28:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h:

	goto_link(): Return type changed to void. Nothing can go wrong in
	there.  

Tue May 25 00:26:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, sched/task.c,
	sched/task.h, viewer/text/link.c:

	session->imgmap_href_base changed to be a URI struct. goto_imgmap()
	now takes URI struct.  

Tue May 25 00:19:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, link.c, link.h:

	goto_link(): Now takes URI struct.  

Tue May 25 00:16:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h, link.c:

	get_form_url() -> get_form_uri() and now returns URI struct.
	get_link_url() was merged into get_link_uri().  

Tue May 25 00:08:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, link.c:

	Let the caller of goto_link() free the URL.  

Mon May 24 23:59:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h:

	get_link_url(): Make it static.  

Mon May 24 23:57:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	open_current_link_in_new_tab(): What a long name .. anyway use
	get_link_uri().  

Mon May 24 23:52:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Let.s get the ball rolling. Use get_link_uri() in
	open_url_in_new_window().  

Mon May 24 18:18:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Be smart? and save one line so we only have ~79239 ;-) 

Mon May 24 18:06:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, terminal/event.c:

	Use struct terminal_info when reading EV_INIT data. It removes all
	those ugly offset calculations. decode_session_info() now takes
	length and data pointer.  

Mon May 24 18:05:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.h, kbd.c, terminal.h:

	Introduce struct terminal_info that holds all the stuff sent over
	the interlink. It makes it possible to batch all the queue stuff
	together.  

Mon May 24 17:29:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	handle_trm(): Use stack allocated buffer for writing the cwd so
	queue_ts() can be removed.  

Mon May 24 17:23:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	handle_trm(): Use stack allocated buffer for writing the TERM env
	variable so we can bypass queue_ts() that allocated cleared memory
	so MAX_TERM_LEN chars are always written.  

Mon May 24 13:12:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	end_token_scanning(): Allow @end to be <= scanner->table.
	scanner->tokens will become <= 0 meaning empty. Triggered by empty
	<style>-tags. Reported by sstar.  

Mon May 24 09:02:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon May 24 02:30:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, viewer/text/form.c, viewer/text/form.h:

	Introduce auto_submit_form() that uses submit_form() as backend and
	make doc_end_load() use it.  

Mon May 24 01:55:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	Introduce get_link_uri() that for now just wraps
	get_uri(get_link_url()).  

Mon May 24 01:43:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	download_link(): Remove map@-URL left over. LINK_MAP URL are now
	downloadable don't know if it is correct.  

Mon May 24 00:52:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_to_string(): Add POST_CHAR before adding post data. The bug
	was triggered by proxy related changes lately. Patch kindly donated
	by Zardoz.  

Sun May 23 17:13:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	sched/session.c, viewer/dump/dump.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h, viewer/text/search.c:

	Introduce LINK_MAP link->type. It removes the 'map@' prefix from
	anything but the document/html parser and renderer. All places that
	depended on LINK_HYPERTEXT now also depends on LINK_MAP (it should
	maybe be reviewed more carefull).  

Sun May 23 16:58:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	sched/session.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/link.h, viewer/text/search.c:

	Revert LINK_MAP introduction.  

Sun May 23 16:56:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	protocol/uri.c, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h, viewer/text/search.c:

	Fix issue concerning uri->ipv6 setup.  

Sun May 23 15:47:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	s/--dump/-dump/ in the description for -no-numbering. We use one
	dash for all the other descriptions. Reported by by sstar.  

Sun May 23 15:43:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Disable keybinding translation. It is not correct in it's current
	form. Reported by sstar.  

Sun May 23 14:51:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Distribute the base URL to _all_ members of the HTML stack.
	Apparently the stack layout has changed. Maybe the unfinished title
	tag fix did it.  

Sun May 23 14:15:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Limit uri->portlen to 8 bits and use the 8 spare bits to flags such
	as ipv6.  

Sun May 23 02:39:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, protocol/uri.h, sched/download.c,
	sched/history.c, sched/session.c, sched/task.c:

	Wrap URI comparing in macro.  

Sun May 23 01:31:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS, configure.in, src/lowlevel/connect.c, src/protocol/proxy.c,
	src/protocol/uri.c, src/protocol/uri.h:

	Whee .. internationalized domain name is now available. The real
	magic is done in add_uri_to_string(). Only lowlevel stuff (like DNS
	queries and proxy assembling) uses it so it is quite simple
	actually. The proxy stuff is untested (as usual).  

Sat May 22 19:27:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/date.c, protocol/date.h,
	protocol/http/date.c, sched/download.c:

	parse_http_date() -> parse_date() 

Sat May 22 19:20:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/date.h:

	Normalize header.  

Sat May 22 19:15:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix xbel configuration spotted by pasky.  

Sat May 22 18:48:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: plural.c, plural.y:

	Compilation fix. I wonder how were you able to build it? 

Sat May 22 13:44:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, ssl/connect.c, ssl/connect.h:

	ssl_write(): Take data + len args instead of write buffer.  

Sat May 22 13:18:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, config/options.inc, cookies/cookies.c,
	cookies/dialogs.c:

	Make the UI date format configurable. Closes my part of bug 448.  

Sat May 22 13:12:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h:

	Wrap add_date_to_string() in #ifdef HAVE_STRFTIME.  

Sat May 22 13:06:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, cookies/cookies.c, cookies/dialogs.c,
	protocol/file/file.c, util/conv.c, util/conv.h:

	Introduce add_date_to_string() and use it to wrap buffered
	strftime() calls.  

Fri May 21 15:33:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	Whoops. DOM has not been merged yet ;) 

Fri May 21 13:44:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.h:

	Move generic token scanning handling to begin and end rutines.  

Fri May 21 12:43:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Doh! elinks.h includes setup.h ;) 

Fri May 21 12:29:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/features.m4:

	Move macros to m4/.  

Fri May 21 12:22:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/http.c:

	Minor simplification. Make add_auth_entry() register the auth dialog
	in the question queue.  

Fri May 21 12:04:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Remove unneeded #ifdefs 

Fri May 21 12:03:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, protocol/Makefile.am,
	protocol/file/Makefile.am:

	Hurrah! Link file and cgi objects into libprotocol and conditionally
	build cgi object.  

Fri May 21 11:57:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/css.c, encoding/encoding.c,
	encoding/encoding.h, protocol/file/file.c, protocol/file/file.h:

	Pretty ugly patch that moves read_encoded_file() to encoding/ which
	I think makes sense but maybe a better interface for reading local
	files without connection_state being needed would be great.  

Fri May 21 11:46:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, protocol/Makefile.am:

	Links in auth objects in the libprotocol archive.  

Fri May 21 11:39:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, cookies/cookies.c, dialogs/document.c,
	document/renderer.c, document/html/parser.c, mime/mime.c,
	protocol/Makefile.am, protocol/http/Makefile.am,
	protocol/http/date.c, protocol/http/date.h, protocol/http/header.c,
	protocol/http/header.h, protocol/http/http.c, sched/download.c:

	Move header and date library to protocol/ so http objects can be
	linked into libprotocol.a and http support could even be optional.  

Fri May 21 11:38:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: date.c, date.h, header.c, header.h:

	Prepare to move prototol/http header and date files to protocol/.
	Pasky to keep the history just cp it from protocol/http/Attic/ ASAP
	and it should be fine I hope.  

Fri May 21 11:21:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, document/html/renderer.c,
	document/html/parser/forms.c, document/html/parser/parse.c,
	document/plain/renderer.c, intl/charsets.c, intl/charsets.h,
	viewer/text/form.c:

	Make it possible to pass int pointer to convert_string() that will
	be set to the new length.  

Fri May 21 11:11:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/: charsets.c, charsets.h:

	No need for us to suffer more than needed. Let the macro rename
	convert_string to convert_string_elinks.  

Fri May 21 10:54:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, renderer.h, html/parser.c,
	html/renderer.c, html/renderer.h, plain/renderer.c:

	Move get_convert_table() to generic document renderer file.  

Thu May 20 23:02:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	get_cookie_info(): Simplify expire info adding.  

Thu May 20 21:35:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Update exmode description.  

Thu May 20 12:49:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/dialogs.c,
	formhist/formhist.c, globhist/dialogs.c, globhist/globhist.c,
	protocol/rewrite/rewrite.c, protocol/smb/smb.c,
	scripting/scripting.c, scripting/guile/core.c,
	scripting/guile/hooks.c, scripting/lua/core.c,
	scripting/lua/hooks.c, scripting/perl/core.c,
	scripting/perl/hooks.c, ssl/connect.c, ssl/ssl.c:

	Remove unneeded #ifdefs 

Thu May 20 12:42:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, dialogs/exmode.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c:

	Remove unneeded #ifdefs 

Wed May 19 16:09:05 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon May 17 10:47:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fix bad move causing crash on diku.dk.  

Mon May 17 10:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/Makefile.am:

	Oops s/rect.h/box.h 

Sun May 16 14:34:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bad move was fixed.  

Sun May 16 14:27:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@c -> @cell, @sc -> @span_cell.  

Sun May 16 14:13:28 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@wf -> @has_width. Correspondant field in struct table was commented
	out since it is unused.  

Sun May 16 14:08:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct table @rh field was renamed @real_height.  

Sun May 16 14:04:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct table @rw field was renamed @real_width.  

Sun May 16 14:01:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@p -> @part.  

Sun May 16 13:57:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@t -> @table.  

Sun May 16 13:14:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Group @part and code using it.  

Sun May 16 13:08:29 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@p -> @part.  

Sun May 16 13:03:59 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct table @p field was renamed @part.  

Sun May 16 12:57:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Use struct box in struct part.  

Sun May 16 12:40:34 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Drop useless white lines.  

Sun May 16 12:13:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.h:

	Remove (now) useless declaration of struct download.  

Sun May 16 12:11:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/: dump.c, dump.h:

	Make dump_start() and dump_end() static and move dump_pre_start()
	below them so they don't have to be declared.  

Sun May 16 11:41:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Better initialize events before main_modules if one should ever want
	to register hooks.  

Sun May 16 10:29:18 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Invisible text in textarea was fixed (bug 454). This was due to
	inverted tests introduced in rev 1.51.  

Sat May 15 23:40:13 2004  Laurent Monin <zas@norz.org>:

	* src/intl/: charsets.c, charsets.h:

	Name clash with Samba should be fixed. Filed as bug 453, reported by
	Derek Poon.  

Sat May 15 17:20:14 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	is_in_box() doesn't work here. Revert part of rev 1.163 patch to fix
	the bug concerning not clickable links on first line of document.
	Need more work.  

Fri May 14 14:59:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Don't allow empty names when adding options. Mentioned by sstar.  

Fri May 14 11:39:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Elaborate on CONFIG_MARKS description.  

Fri May 14 11:39:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Oops get the correct static option for get_leds_clock_format().  

Fri May 14 10:24:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/window.c:

	Pass references of the windows x and y members directly to
	get_parent_ptr().  

Fri May 14 10:19:19 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, view.c:

	Revert last "fix", it was not one.  

Fri May 14 10:12:01 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, view.c:

	Clicking on links on first line of document was broken. It should
	now be fixed.  

Fri May 14 09:32:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, group.c:

	Fix indentation of set_box().  

Fri May 14 08:49:07 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bfu/menu.h, dialogs/status.c,
	document/renderer.c, document/html/frames.c,
	document/html/tables.c, util/memdebug.c, viewer/text/form.c,
	viewer/text/search.c, viewer/text/view.c:

	Trailing spaces cleanup.  

Fri May 14 08:42:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	Fix incorrect change introduced in rev 1.46: not document->options
	but doc_view 

Fri May 14 00:43:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/renderer.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/parser/forms.c, document/plain/renderer.c,
	viewer/dump/dump.c, viewer/text/view.c:

	Use struct box for struct document_options.  

Fri May 14 00:18:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/group.c, bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/menu.h,
	bfu/text.c, bfu/widget.c, bfu/widget.h, dialogs/download.c,
	dialogs/status.c, document/document.h, document/renderer.c,
	document/view.h, document/html/frames.c, document/html/frames.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, document/plain/renderer.c, terminal/draw.c,
	terminal/draw.h, util/box.h, util/rect.h, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c:

	s/dimensions/box/ && s/rect/box/ 

Thu May 13 20:40:06 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/menu.c, terminal/draw.c, terminal/draw.h:

	draw_area() -> draw_box(), draw_border_box() -> draw_border(),
	draw_shadow_box() -> draw_shadow().  

Thu May 13 20:31:24 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Use draw_border_box().  

Thu May 13 13:26:01 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, terminal/draw.c, terminal/draw.h:

	draw_border_box() was introduced, it is now used by menus.  

Thu May 13 09:33:22 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	Use draw_box() instead of draw_area().  

Thu May 13 09:22:50 2004  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/view.c, dialogs/download.c:

	Use draw_box() instead of draw_area().  

Thu May 13 09:15:38 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use draw_box() instead of draw_area().  

Thu May 13 09:08:06 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, inpfield.c, listbox.c:

	Use draw_box() instead of draw_area().  

Thu May 13 09:07:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Use draw_box() instead of draw_area(), and use draw_shadow_box().  

Thu May 13 09:06:32 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/: draw.c, draw.h:

	Draw_box() and draw_shadow_box() were introduced.  

Thu May 13 01:29:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Peek at $enable_xbel and do all the expat checking _before_
	CONFIG_XBEL_BOOKMARKS is set up so it can depend properly on it and
	report the correct value to the feature log.  

Thu May 13 01:08:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/Makefile.am:

	Fix trailing \ in last patch.  

Thu May 13 00:53:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/Makefile.am:

	Only add scanner object if building with CSS support.  

Thu May 13 00:19:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/main.c, src/sched/session.h,
	src/viewer/text/Makefile.am, src/viewer/text/view.c:

	Make document marks optional.  

Wed May 12 19:43:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Mention pasky's ode to the almighty bookmarks.  

Wed May 12 19:35:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Mention doc/small.txt in CONFIG_SMALL description.  

Wed May 12 15:08:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* .cvsignore, Makefile.am, configure.in:

	Log the feature summary to features.log file. It ensures settings
	for all features are shown and simplifies the code plus the file
	might be useful for someone.  

Tue May 11 23:22:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Move a few cleanup functions to the 'init_b' sequence. They should
	all be empty when running in client mode.  

Tue May 11 19:45:23 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Fix scrollable text widget.  

Tue May 11 19:23:17 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Fix wrong widget dimensions, revealed by broken radio buttons
	changing in search dialog.  

Tue May 11 18:43:37 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Fix bad move introduced in rev 1.163. Mouse click detection on
	certain links was broken.  

Tue May 11 17:50:40 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue May 11 14:59:10 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_table(): set rx,ry,real_columns_count only if table was
	successfully allocated.  

Tue May 11 14:56:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_columns(): tidy up.  

Tue May 11 14:50:08 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	new_table(): really allocated values (rx,ry,real_columns_count)
	should not be changed before allocation attempts.  

Tue May 11 14:45:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field @rc of struct table was renamed @real_columns_count.  

Tue May 11 13:00:21 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	Use AC_CHECK_FILE macro to test for features.conf file, "test -e" is
	not portable. Issue pointed out by Stephane Chazelas.  

Tue May 11 09:56:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.h:

	Unused field @line was removed from struct frame_desc.  

Tue May 11 09:32:59 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.c, viewer/text/view.c:

	Use struct rect in struct frameset_desc.  

Mon May 10 23:12:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, protocol/Makefile.am:

	Merge ftp objects in the protocol/ dir.  

Mon May 10 17:15:22 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/status.c, document/renderer.c, document/view.h,
	document/html/frames.c, util/rect.h, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Use struct rect in struct document_view, changes were made
	accordingly with the help of two new little helpers:
	(row|col)_is_in_rect().  

Mon May 10 15:34:32 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Use struct rect, set_rect() and is_in_rect().  

Mon May 10 15:15:03 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	display_button(): use struct rect * and precalculated label length
	value instead of strlen( ) call.  

Mon May 10 12:56:13 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, bfu/text.c, document/html/renderer.c,
	document/html/tables.c, document/plain/renderer.c, util/rect.h:

	Convert set_rect() and is_in_rect() macros to static inline
	functions.  

Mon May 10 05:17:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Drop the 'support' word for the configuration summary.  

Mon May 10 01:51:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	document/html/tables.c, document/plain/renderer.c,
	viewer/text/search.c:

	Use struct rect in struct node. I propose to rename it box though it
	is shorter and a bit more descriptive IMO.  

Sun May  9 23:33:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, sched/connection.h, sched/error.c:

	A little advertisement shouldn't hurt anyone so pop up 'this version
	does not support ... protocol' message for finger and smb. Or is
	this too bloated\? 

Sun May  9 23:04:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/protocol/Makefile.am,
	src/protocol/finger.h:

	Make finger protocol support optional. Maybe it should be disabled
	by default since I don't think so maybe people use it and it more
	serves as a protocol implementation reference.  

Sun May  9 22:27:36 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Use struct rect in struct menu.  

Sun May  9 21:46:23 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/widget.h, util/Makefile.am, util/rect.h:

	Add util/rect.h and move struct rect related stuff to it.  

Sun May  9 21:38:41 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Fix set_rect() call.  

Sun May  9 21:17:12 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/text.c,
	dialogs/download.c:

	Use struct rect in struct dialog_data.  

Sun May  9 01:18:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/auth.c:

	Semi-fix the HTTP auth related crash caused by http_send_header()
	being called more times than before [from run_connection()] instead
	of select_loop() which means more find_auth() calls that would end
	up free()ing the entry and the dialog accessing freed memory.  
	
	I still don't know when the call pattern to changed and auth is
	still pretty broken since I had to type user/password twice.  

Sun May  9 00:59:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/auth/: auth.c, auth.h:

	Allocate http_auth_basic->{user,password} as part of the struct.  

Sun May  9 00:56:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	Make connected() static.  

Sat May  8 13:40:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Include the full copyright header here because this file can be
	frequently distributed separately from the rest of ELinks.  

Sat May  8 01:18:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.c, util/scanner.h:

	Make scanner mapping and scan table info const.  

Sat May  8 01:17:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode handler table const.  

Fri May  7 23:33:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix adding of -Werror when CONFIG_DEBUG is set.  

Fri May  7 18:14:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Undent the code.  

Fri May  7 18:05:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Move unknown_protocol_handler closer to the user and rename to
	generic_external_protocol_handler.  

Fri May  7 18:01:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Remove protocol_backend->external_handler member since it is now
	only user or unknown handler so this is less bloated IMO.  

Fri May  7 17:53:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Move struct protocol_backend to .c file.  

Fri May  7 17:47:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: Makefile.am, https.c, https.h:

	Only conditionally build HTTPS else simply #define the HTTPS
	protocol handler to NULL like SMB does and let the generic unknown
	protocol handler do the work.  

Fri May  7 17:40:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Use common handler for unknown and javascript protocol backend.
	Prepare for HTTPS backend to use it as well.  

Fri May  7 17:36:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	If both external and regular protocol handler is NULL return the
	unknown protocol handler so that disabled (but otherwise known)
	protocols can use a common handler.  

Fri May  7 17:31:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Fix HTTPS building.  

Fri May  7 17:30:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Move the lua protocol backend last so it doesn't match user:// URIs
	and cause assertion failures. Hope this doesn't break anything? 

Fri May  7 17:27:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: finger.c, finger.h, protocol.c, user.c, user.h,
	file/file.c, file/file.h, ftp/ftp.c, ftp/ftp.h, http/http.c,
	http/http.h, http/https.c, http/https.h, smb/smb.c, smb/smb.h:

	Centralize protocol_backends again. It makes more sense when
	building with conditionals.  

Fri May  7 16:32:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Only check for expat and link with -lexpat when needed. Reported by
	fredlwm.  

Fri May  7 12:28:40 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use set_rect().  

Fri May  7 12:21:20 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Use set_rect() and is_in_rect().  

Fri May  7 12:15:40 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: group.c, inpfield.c:

	Use set_rect() and is_in_rect().  

Fri May  7 11:24:20 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, group.c, inpfield.c, listbox.c,
	text.c, widget.c, widget.h:

	Struct rect was introduced, as well as convenience macros set_rect()
	and is_in_rect(). It is currently used by struct widget_data only.  

Fri May  7 09:05:59 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri May  7 08:58:27 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	Comment out HTML_ATTR_NO_CONV stuff since it is not used yet.  

Fri May  7 08:55:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	get_attr_val(), get_url_val() and has_attr() are now macros wrapping
	get_attr_value() calls.  

Fri May  7 08:49:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	Declare and describe get_attr_value() in parse.h.  

Fri May  7 08:45:35 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	get_attr_val_() was renamed get_attr_value().  

Fri May  7 08:42:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	enum html_attr_flags was introduced to control get_attr_val_()
	behavior.  

Fri May  7 01:46:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, smb/smb.h:

	Move macro conditions for SMB protocol backend to smb header.  

Thu May  6 23:50:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	Previous patch was a commit error. Sorry....  

Thu May  6 23:39:37 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/: parse.c, parse.h:

	enum gav_flags was introduced, and is now used by get_attr_val_(),
	it is now possible to disable conversion though convert_string(). It
	may help to fix bug 451.  

Thu May  6 22:35:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* config/m4/gettext.m4, src/intl/Makefile.am:

	If --disable-nls don't enter src/intl/gettext 

Thu May  6 22:06:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix keybinding toggling that was broken by the int <-> void *
	removal.  

Thu May  6 15:32:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/finger.c:

	Rearrange functions so it is not necessary to declare any.  

Thu May  6 15:26:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix typo.  

Thu May  6 14:39:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use get_cp_mime_name() instead of get_cp_name() as the name key for
	the charset menu.  

Thu May  6 14:39:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Use N_CODEPAGES and remove define of CODEPAGES.  

Thu May  6 00:15:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add header to the config pretty printing area.  

Thu May  6 00:14:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* INSTALL, NEWS, README, THANKS:

	Capital letter files got aspelled.  

Wed May  5 17:52:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More CONFIG_CSS tuning.  

Wed May  5 12:39:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	m11p 

Wed May  5 12:37:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Don't assume anything is simple, elaborate on CONFIG_CSS
	description.  

Wed May  5 12:26:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	More CONFIG_CSS stuff.  

Tue May  4 11:45:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Don't get CSS options if it is disabled.  

Tue May  4 10:50:08 2004  Laurent Monin <zas@norz.org>:

	* src/: dialogs/info.c, util/memdebug.c, util/memdebug.h:

	Count and show memory truly allocated (including memory used by
	memory debug itself).  

Tue May  4 07:55:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf, src/document/Makefile.am,
	src/document/html/parser.c, src/document/html/parser/link.c,
	src/document/html/parser/parse.c, src/modules/module.c:

	Make CSS optional.  

Tue May  4 01:48:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Avoid int <-> void * conversion by passing strtonum pointers ... ok
	this is getting too ugly so I will stop this now besides it is
	passed my bedtime.  

Tue May  4 01:46:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: menu.c, menu.h:

	Yucky hacks to fix compile errors >:).  

Tue May  4 01:43:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	make 

Tue May  4 01:22:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: menu.c, menu.h:

	Avoid int <-> void * conversion by passing the open_in_new pointer
	instead of term_env enum.  

Tue May  4 01:21:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Avoid int <-> void * conversion by passing the codepage name and
	looking up the index.  

Tue May  4 01:10:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.c, util/scanner.h:

	Avoid int <-> void * conversion by storing the start of the a
	scanner table range in a string. A bit ugly but ...  

Tue May  4 01:08:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Make @strings static.  

Tue May  4 00:55:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Avoid int <-> void * conversion by storing the codepage_desc pointer
	as the fastfind data.  

Mon May  3 23:04:08 2004  Laurent Monin <zas@norz.org>:

	* src/cache/dialogs.c:

	Add a space before ... when url is truncated, it is less ambiguous.  

Mon May  3 22:57:42 2004  Laurent Monin <zas@norz.org>:

	* src/cache/dialogs.c:

	draw_cache_entry_item() was added to display only "public" parts or
	uri in cache manager. Post data do not appear as is, but an
	indication is left to user in the form of " (POST DATA)" aooended to
	uri string. Password info will be hidden too. It fixes bug 445.  

Mon May  3 21:40:29 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Use macros to make calculations explicit, clarifying things.  

Mon May  3 14:32:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix sed magic on FreeBSD.  

Mon May  3 13:11:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Try to wrap the module feature listing between 70-80 to make it more
	readable.  

Mon May  3 13:10:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Improve the feature pretty printing to be more portable and faster
	by using sed exclusively.  

Sun May  2 23:05:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	All hail to the bloat. Print configuration summary _after_ the
	'creating' messages and in a pretty printed way.  

Sun May  2 13:49:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/Makefile.am:

	Only conditionally build memdebug and fastfind objects.  

Sun May  2 13:30:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, modules/module.c, protocol/Makefile.am,
	protocol/protocol.c, protocol/protocol.h:

	A little kludgy. Introduce protocol module (which I think we should
	have anyway) because it removes a bit of the symbol resolving mess
	in the top level Makefile and make URI rewriting a submodule.
	Finally only conditionally build URI rewriting.  

Sun May  2 13:08:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: Makefile.am, backend/Makefile.am:

	Only conditionally build mailcap and mimetypes backends.  

Sun May  2 13:07:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/backend/: common.c, xbel.c:

	Fix building without xbel.  

Sun May  2 13:01:22 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: msgbox.c, msgbox.h:

	msg_text_ni() is not used at all, so it was removed.  

Sun May  2 12:59:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/: Makefile.am, backend/Makefile.am:

	Only conditionally build xbel.  

Sun May  2 12:59:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/Makefile.am:

	Cleanup 

Sun May  2 12:58:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Dejavu: $withval -> $enableval.  

Sun May  2 12:53:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	$srcdir should be initialized by autoconf for us so clean it up.  

Sun May  2 12:52:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/Makefile.am:

	Only conditionally build exmode.  

Sun May  2 12:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, protocol/Makefile.am:

	Only conditionally build smb.  

Sun May  2 12:51:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/Makefile.am:

	Cleanup.  

Sun May  2 12:45:15 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Label dsp_f was renamed display_field.  

Sun May  2 11:55:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Remove usage of changequote() since it is discouraged.  

Sun May  2 10:53:33 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Explode dialog_func() switch: smaller functions were introduced.  

Sun May  2 10:29:43 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Explode hierbox_dialog_event_handler() big switch in smaller
	functions: hierbox_ev_kbd(), hierbox_ev_init(), hierbox_ev_abort().  

Sun May  2 09:56:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	hierbox_browser(): minor code simplification.  

Sun May  2 03:05:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix XBEL dependency.  

Sun May  2 00:49:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Doh. Revert last patch.  

Sun May  2 00:28:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Rename variables used by the new configuration scheme to have
	CONFIG_ prefix.  

Sun May  2 00:13:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	We have to figure out a way to autogenerate this crap. Explicitly
	define AM_CONDITIONAL()s.  

Sat May  1 23:31:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/Makefile.am:

	Only conditionally build LEDs code.  

Sat May  1 23:16:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, scripting/Makefile.am:

	Use conditionals for scripting/ stuff.  

Sat May  1 22:59:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am:

	Yes mamma. Introducing autobreak conditionals. <rant> for no good
	reason (well ok who wants to run a m4 macro processor from a perl
	script) automake reports that 'CONFIG_FOO does not appear in
	AM_CONDITIONAL' but this is a lie and it works perfect so it just
	seems that automake make a few lazy and false checks </rant> 

Sat May  1 22:26:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Ahh yes there is this distinction between --with and --enable args.
	;-) 

Sat May  1 19:29:58 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	Reduce code redundancy by introducing put_button().  

Sat May  1 19:26:30 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	html_input(): allocate @fc only if needed, but not twice ;)) 

Sat May  1 19:25:42 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	html_input(): allocate @fc only if needed.  

Sat May  1 19:20:48 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	html_button(): allocate @fc only if needed.  

Sat May  1 19:16:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	Minor tidyup and labels renaming.  

Sat May  1 18:16:59 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/link.c:

	Tidyup.  

Sat May  1 18:12:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	File got aspelled and reformatted.  

Sat May  1 18:03:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Try to sort out this mesh of misinformation. Take 2.  

Sat May  1 18:01:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/: conf.c, dialogs.c, opttypes.c, opttypes.h:

	Add an |int *line| parameter to reader procedures in the options
	code.  In |str_rd|, increment |line| for each new-line character
	encountered.  This fixes bug 443: Multi-line option values throw off
	line-numbers in conf.-file errors 

Sat May  1 17:58:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* features.conf:

	Try to sort out this mesh of misinformation.  

Sat May  1 17:39:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* INSTALL:

	feature.h -> features.conf 

Sat May  1 17:33:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	feature.h -> features.conf 

Sat May  1 17:24:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am:

	Oops make features.conf appear in distributed tarballs.  

Sat May  1 16:39:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, config/m4/iconv.m4:

	Try to normalize some of the configure args.  

Sat May  1 16:08:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf:

	Setup CONFIG_IPV6 using EL_ARG_DEPEND(). Please pasky or someone
	elaborate a bit in the descriptiong since all I am good for are
	rants. ;-) 

Sat May  1 15:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/configure.txt:

	These now live in feature.conf file.  

Sat May  1 15:49:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf:

	Always set CONFIG_* defined via EL_ARG_*() macros to either yes or
	no so they can be used in dependency checking. CONFIG_FASTMEM is now
	defined via EL_ARG_DEPEND().  

Sat May  1 15:31:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make the CONFIG_* dependencies and explicit by using
	HAVE_<name>=<value> notation.  

Sat May  1 15:00:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, features.conf:

	Add CONFIG_{DEBUG,OWN_LIBC,SMALL} to feature.conf.  

Sat May  1 14:48:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add -lexpat to LIBS.  

Sat May  1 14:09:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h, features.conf:

	Feature configuration is now done using a simple shell script file
	named features.conf containing default values for all features.  

Sat May  1 10:01:10 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Handle invalid colors mode is a cleaner way, especially when 256
	colors mode was enabled and saved in elinks.conf, then a 16 colors
	only elinks is launched, attempting to use that now illicit mode. It
	was exiting with internal error, now it just emits an error and fall
	back to 16 color mode.  

Sat May  1 05:29:36 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in, src/scripting/lua/core.c:

	In init_lua(), call lua_mathlibopen() so as to have mod() available 
	to Lua scripts, and delete the definition of mod() in hooks.lua.in.  

Sat May  1 05:14:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* configure.in:

	Doh, '/usr' and '/usr/local' were doubled, too.  Remove one '/usr'
	and one '/usr/local'.  

Sat May  1 05:11:51 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* configure.in:

	I guess that the doubled '"$withval"' was part of the piggy-switch
	hack, as hinted by the comment. Remove one '"$withval"'.  

Sat May  1 05:05:52 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* configure.in:

	Try -llua$suffix and -I$luadir/include/lua$suffix where $suffix is
	'', '40', and '50' in succession until one or none are found to
	work.  
	
	This fixes Lua detection with Lua 5 as packaged by Debian (which
	gives the headers directory and libraries the suffix '50').  
	
	Who wrote that brain-dead piggy-switch hack?  Hm, rev. 1.135--ohh,
	sorry pasky! 

Fri Apr 30 21:41:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix typo.  

Fri Apr 30 14:30:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Since we now rely on autoconf 2.13 lets also do these *DIR defines
	the right way.  

Fri Apr 30 13:56:21 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_char_color(): x += 1; -> ++x; 

Fri Apr 30 13:53:05 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_char_color(): optimization and cleanup.  

Fri Apr 30 13:46:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Try to clearify bitmembers.  

Fri Apr 30 13:45:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Remove empty line.  

Fri Apr 30 13:33:50 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_char16(): if (ch->attr & SCREEN_ATTR_BOLD) -> if (bold).  

Fri Apr 30 13:27:14 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_chars(): update comment.  

Fri Apr 30 13:18:56 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	add_chars(): tidy up.  

Fri Apr 30 12:44:31 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Revert wrong patch: even if nothing was redrawn, we possibly still
	need to move cursor. It fixes issue reported by sstar on irc, thanks
	to Jonas to pointed it out.  

Fri Apr 30 12:25:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated, an hotkey conflict was fixed.  

Fri Apr 30 09:26:22 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	update_screen_driver(): test for utf8_io only once.  

Fri Apr 30 09:05:36 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Move cases more likely to occur first in switch().  

Fri Apr 30 09:03:11 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Do not test @image.length if this is not needed.  

Fri Apr 30 08:48:55 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Only call get_screen_driver() if needed.  

Fri Apr 30 08:39:56 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Typo fix in add_chars() macro: @term -> @term_.  

Fri Apr 30 08:38:29 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Indentation level reduction.  

Fri Apr 30 03:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Cleanup.  

Fri Apr 30 03:41:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Doh. Fix CONFIG_SSL dependency ;).  

Fri Apr 30 03:13:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Be more conforming. Use AC_MSG_WARN() when guile configuration
	fails.  

Fri Apr 30 03:02:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix EL_CONFIG_DEPENDS() macro and a few tests.  

Fri Apr 30 01:06:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Add EL_CONFIG_DEPENDS() macro for handling scripting and SSL
	CONFIG_* setup.  

Fri Apr 30 00:19:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Use EL_CONFIG() for CONFIG_IPV6.  

Fri Apr 30 00:17:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Use EL_CONFIG() to define CONFIG_* variables.  

Thu Apr 29 23:53:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h:

	Remove seemingly unused defines.  

Thu Apr 29 23:32:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/main.c, src/config/kbdbind.c,
	src/config/kbdbind.h, src/dialogs/menu.c, src/modules/module.c,
	src/protocol/proxy.c, src/sched/action.c, src/sched/session.c,
	src/sched/task.c, src/scripting/scripting.c,
	src/scripting/scripting.h, src/scripting/guile/core.c,
	src/scripting/guile/core.h, src/scripting/guile/hooks.c,
	src/scripting/guile/hooks.h, src/scripting/lua/core.c,
	src/scripting/lua/core.h, src/scripting/lua/hooks.c,
	src/scripting/lua/hooks.h, src/scripting/perl/core.c,
	src/scripting/perl/core.h, src/scripting/perl/hooks.c,
	src/scripting/perl/hooks.h, src/viewer/text/view.c:

	HAVE_{SCRIPTING,LUA,PERL,GUILE} -> CONFIG_{...}.  

Thu Apr 29 23:22:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/lowlevel/connect.c,
	src/modules/module.c, src/protocol/http/http.c,
	src/protocol/http/https.c, src/sched/connection.c,
	src/sched/error.c, src/ssl/connect.c, src/ssl/connect.h,
	src/ssl/ssl.c, src/ssl/ssl.h:

	HAVE_{SSL,OPENSSL,GNUTLS} -> CONFIG_{SSL,OPENSSL,GNUTLS}.  

Thu Apr 29 23:11:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/config/cmdline.c, src/lowlevel/connect.c,
	src/lowlevel/connect.h, src/lowlevel/dns.c, src/modules/version.c,
	src/osdep/getifaddrs.c, src/protocol/uri.c, src/protocol/ftp/ftp.c:

	IPV6 -> CONFIG_IPV6.  

Thu Apr 29 23:04:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/getifaddrs.c:

	Fix HAVE_IPV6 to be IPV6.  

Thu Apr 29 23:02:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/config/kbdbind.c,
	src/config/options.h, src/modules/version.c, src/osdep/stub.h,
	src/protocol/http/codes.c, src/util/color.c, src/util/error.h,
	src/util/fastfind.h, src/util/memory.c, src/util/memory.h,
	src/util/snprintf.h:

	FASTMEM -> CONFIG_FASTMEM, USE_OWN_LIBC -> CONFIG_OWN_LIBC,
	ELINKS_SMALL -> CONFIG_SMALL.  

Thu Apr 29 17:04:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	The color mapping seems to work fine now.  

Thu Apr 29 16:01:25 2004  Laurent Monin <zas@norz.org>:

	* src/util/: color.c, color.inc:

	Fix colors stuff: always include color_s.inc before (optionnal)
	color.inc, which was stripped down. It should fix the white ->
	0xFFFFFF -> gray100 issue reported by Jonas.  

Thu Apr 29 15:06:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Apr 29 15:03:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	More help2doc tool fixing.  

Thu Apr 29 14:24:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Fix elinks version extraction.  

Thu Apr 29 14:17:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.base:

	Tidyup.  

Thu Apr 29 14:11:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.base:

	Yay .. get rid of that `dirname ...` hack and just include .  

Thu Apr 29 14:07:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Apply last chunk of Harold L Hunt II's patch fixing bug 353.  

Thu Apr 29 13:52:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.am:

	Try to improve builddir != srcdir situation.  

Thu Apr 29 13:30:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: parser.c, parser/forms.c, parser/forms.h:

	Do not export struct form, introduce and use done_form() instead,
	use enum form_method as type for struct form method field.  

Thu Apr 29 13:15:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	get_html_form():  char *ax -> unsigned char *enctype, tidy up.  

Thu Apr 29 13:09:38 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/forms.c:

	do_html_select(): @val -> @values, tidy up.  

Thu Apr 29 12:40:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	EL_DEFINE() a few variables.  

Thu Apr 29 12:17:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_CHECK_TYPE() -> EL_CHECK_CODE(). Use it for variadic macro
	checking.  

Thu Apr 29 11:50:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_CHECK_SPECIAL_TYPE() -> EL_CHECK_INT_TYPE().  

Thu Apr 29 11:49:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h:

	Whoops forgot to remove HAVE_SA_STORAGE declaration.  

Thu Apr 29 11:48:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add EL_CHECK_NET_TYPE() for all the sockaddr_* and addrinfo struct
	checking.  

Thu Apr 29 11:41:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Use EL_CHECK_SYS_TYPE() for regex_t and HAVE_REGEX_H config.  

Thu Apr 29 11:37:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Add EL_CHECK_SYS_TYPE() which #includes <sys/types.h> and tries to
	do sizeof(type).  

Thu Apr 29 11:32:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Use EL_CHECK_TYPE() for typeof() checking.  

Thu Apr 29 11:28:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_CHECK_TYPE(): Takes care of the messaging an type checking.  

Thu Apr 29 11:23:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	EL_DEFINE(): Wraps AC_DEFINE() to shorten lines.  

Thu Apr 29 11:18:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Group macros.  

Thu Apr 29 00:37:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Use EL_* namespace for own macros.  

Wed Apr 28 19:54:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Define macro for testing gpm, zlib and bzlib.  

Wed Apr 28 19:27:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix size check of long long.  

Wed Apr 28 19:22:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Define macro for testing 'exotic' types. It also takes care of
	registering the config variable.  

Wed Apr 28 18:43:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/gettext.c:

	Fix compilation with --disable-nls. Patch by Felix von Leitner.  

Wed Apr 28 18:09:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	We don't use these GUILE_* make variables so why substitute them? 

Wed Apr 28 18:05:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Doh, first search for guile-config in user supplied path.  

Wed Apr 28 18:01:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Improve guile configuration by first checking guile-config (using
	possible supplied path). If guile-config is not found simply emit
	failure notice else emit the incomplete message.  

Wed Apr 28 17:31:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Simplify guile autoconf.  

Wed Apr 28 17:17:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	A little tidyup.  

Wed Apr 28 17:15:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	Make it possible to start elinks with guile compiled in without
	~/.elinks/internal-hooks.scm available.  

Wed Apr 28 16:34:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	I should have known not to trust autoconf. Setup prefix and
	exec_prefix before usage. Should make find it's .mo files.  

Wed Apr 28 10:58:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	AC_{SAVE,RESTORE}_FLAGS: Add ending comma.  

Wed Apr 28 08:45:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.am:

	Fix archive name.  

Tue Apr 27 23:12:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	AC_{SAVE,RESTORE}_FLAGS introduced.  

Tue Apr 27 22:30:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Cleanup LOCALEDIR and LIBDIR exporting. This is the way other
	packages do and I think we should trust autoconf or who ever to set
	up the variables for us. Oh yes and remove debug echo.  

Tue Apr 27 17:46:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.am:

	More fine tuning. Only dist clean charset.alias. Use
	install-data-local for installing it.  

Tue Apr 27 17:06:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/intl/gettext/Makefile.am:

	Define and export LIBDIR via config.h to get rid of special build
	rules for gettext.  

Tue Apr 27 16:28:25 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Fix corrupted display on terminals that to not have
	"eat_newline_glitch (xn)", ie. cons25 family of terminals, and
	cygwin terminal.  

Tue Apr 27 16:23:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/.cvsignore:

	Ignore Makefile.in 

Tue Apr 27 16:23:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.am:

	Remove generated charset.alias when cleaning. Remove autogenerated
	files from EXTRA_DIST.  

Tue Apr 27 16:05:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/intl/gettext/Makefile.am,
	src/intl/gettext/Makefile.in, src/intl/gettext/ref-add.sed.in,
	src/intl/gettext/ref-add.sin, src/intl/gettext/ref-del.sed.in,
	src/intl/gettext/ref-del.sin:

	Try to use Makefile.am for building int/gettext .. will be
	interesting if it works ;P 

Tue Apr 27 14:11:58 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Minor optimization: only call strstr() if needed.  

Tue Apr 27 13:48:08 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Use an enum for @type, minor tidyup.  

Tue Apr 27 13:29:59 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Code simplification and optimization: find_strs() function was
	introduced to match sequence of strings.  

Mon Apr 26 16:46:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix bug 431 and make underlining work properly when splitting lines
	(in table cells).  

Mon Apr 26 15:56:11 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Apr 26 15:48:28 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, util/file.c, util/file.h:

	Pop up an error message if attempting to save a file which is a fact
	a directory. file_is_dir() function was added to util/file.{c,h}, it
	tests if its argument is a readable directory.  

Mon Apr 26 13:30:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Untangle mem_free_set() casting pointer code.  

Mon Apr 26 13:18:53 2004  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: loadmsgcat.c, localealias.c:

	Workaround compilation failure under cygwin and debian stable, when
	using --with-perl: alloca() is not detected at configure time but
	still included from some perl headers files.  

Mon Apr 26 12:51:29 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/hooks.c:

	Perl-specific code was moved to appropriate local functions, @err
	was renamed to non-misleading @count, dSP and PUSHMARK are needed
	even if no parameter is passed (hook_quit case, conform to perlcall
	doc), tidyup.  

Mon Apr 26 11:38:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	query_file(): Check only the URI passed and not ses->download_uri.
	Maybe the checking should be moved back to start_download() but it
	shouldn't hurt the other users. Besides I like the fact that we not
	check URI _before_ users have provided a filename so they don't
	waste their time. FIXME added. Somebody please act as to what is
	best because I don't know. ;) 

Mon Apr 26 09:05:46 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	An assertion was added: for now, this one is triggered when saving a
	preformatted document. This was reported by Stephen Stocker. Jonas
	please have a look at this one.  

Mon Apr 26 08:49:10 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser/parse.c:

	Fix wrapping of lines due to a change introduced in
	document/html/parser.c 1.385 -> 1.386: we want to match only space
	char. It restores correct rendering of freshmeat.net index page.  

Mon Apr 26 03:37:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Fix and improve led option handling.  

Sun Apr 25 17:32:44 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/xbel.c, document/document.c,
	document/html/parser.c, document/html/parser/forms.c,
	document/html/parser/link.c, document/html/parser/parse.c,
	sched/action.c, sched/connection.c, sched/download.c,
	sched/history.c, sched/task.c, viewer/text/search.c:

	Miscelleanous trivial tidyups: indentation, whitespaces fixes,
	hacking document conformance.  

Sun Apr 25 16:28:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/dialogs.c:

	Microscopic tidyup.  

Sun Apr 25 09:52:34 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Apr 25 09:49:44 2004  Laurent Monin <zas@norz.org>:

	* src/sched/error.c:

	Typo fix: external -> external programs.  

Sun Apr 25 05:58:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/scripting/perl/hooks.c:

	Maybe we should C++. Use dSP only when Perl is initialized.  

Sat Apr 24 23:48:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	parse_html(): Commit unput data to the document upon reaching @eof
	only if we really want to commit them (therefore cycle with
	@noupdate set). This fixes random tags shown inside of <table>s and
	possibly other weirdness. Introduced by me, pinpointed by Jonas,
	fixed it together :).  

Sat Apr 24 22:22:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/hooks.c:

	Reverted witekfl's 1.5 (movind dSP). This breaks compilation
	(declaration not at the start of block).  

Sat Apr 24 16:15:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	First check content-type of Content-Disposition filename. Problem is
	we still fall back to also checking the content type of the filename
	in the URI and thus the what-to-do dialog will still report wrong
	content type.  

Sat Apr 24 16:13:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Move extension content type checking to separate function.  

Sat Apr 24 16:03:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, protocol/uri.c:

	Move Content-Disposition extraction to separate function in mime/.  

Sat Apr 24 15:39:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, sched/download.c:

	Fix problems regarding servers sending empty Content-Type values
	which means the extension is never checked.  

Sat Apr 24 15:31:00 2004  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/l10nflist.c:

	Awful hack to make cygwin happy, it has no impact on other
	environments.  

Sat Apr 24 14:51:41 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	AC_PREREQ(2.13) was added, it prevents issues on systems having both
	autoconf2.13 and 2.5x or more (debian, cygwin).  

Sat Apr 24 14:44:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	process_element() and family now returns new value of html, because
	it can shift it forth.  

Sat Apr 24 14:39:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, html/internal.h, html/parser.c,
	html/parser/Makefile.am, html/parser/forms.c, html/parser/forms.h,
	html/parser/parse.c:

	Factored out forms parser from document/html/parser.c to
	document/html/parser/forms.*.  

Sat Apr 24 14:36:13 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/scripting/perl/hooks.c:

	Moved "dSP;". Now dSP is called only when Perl interpreter is
	properly initialized. The crash should disappear.  

Sat Apr 24 12:21:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/connection.h, sched/download.c,
	sched/error.c:

	Fix bug 440 by checking for external hanlders in query_file()
	through where all downloads are routed. S_EXTERNAL_PROTOCOL
	introduced for the error message mapping.  

Sat Apr 24 11:50:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Update documentation of addBookmark().  

Sat Apr 24 11:46:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Documented the rest of struct element_info.  

Sat Apr 24 11:41:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, sched/session.c, sched/session.h:

	Rename -remote bookmark() method to addBookmark(). enum also updated
	to reflect this change.  

Sat Apr 24 11:39:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	end_element(): Minor XMP handling simplification.  

Sat Apr 24 11:31:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	start_element(): @ali -> @restore_format, @pa -> @old_format 

Sat Apr 24 11:29:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Reindented start_element().  

Sat Apr 24 11:27:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Separated start_element() and end_element() from process_element().  

Sat Apr 24 10:59:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	Pass the cache entry to get_content_type().  

Sat Apr 24 10:35:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	process_element(): Make links work again by breaking like the old
	code did instead of returning so we end up at the killing spree
	below.  

Sat Apr 24 02:52:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser/parse.c:

	Compile fix for the currently fubar'd html parser ;) 

Sat Apr 24 02:13:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Shorten examples in the -remote description.  

Sat Apr 24 02:11:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, sched/session.c, sched/session.h:

	Add support for -remote 'bookmark(URL)'. Let the bloating begin.
	Dunno if xfeDoCommand(bookmark, URL) would be a better way? 

Sat Apr 24 01:43:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Fix leak when passing unknown openurl() parameter.  

Sat Apr 24 01:39:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Unify openurl() remote_url allocation.  

Sat Apr 24 01:35:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Use strstr() to scan openURL() args.  

Sat Apr 24 01:31:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Tidyup.  

Sat Apr 24 01:30:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Use strcspn() to simplify.  

Sat Apr 24 01:25:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	@inv -> @endingtag in parse_html() and process_element().  

Sat Apr 24 01:23:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	In parse_html() merged set_lt to the main loop.  

Sat Apr 24 01:20:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Comments in process_element() reformatted.  

Sat Apr 24 01:19:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Moved element processing off parse_html() to process_element().  

Sat Apr 24 01:13:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Cleanup.  

Sat Apr 24 01:10:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): If no remote session flags was applied it can only
	mean the method is not supported. This nicely centralizes error
	returning.  

Sat Apr 24 01:07:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	parse_html(): @lt -> @base_pos 

Sat Apr 24 01:07:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Add missing break.  

Sat Apr 24 01:05:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	More tidyup of parse_html().  

Sat Apr 24 01:05:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	I'm a sucker for this data driven thing so make -remote method
	parsing data driven and use switch.  

Sat Apr 24 01:00:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Removed some ancient commented out relicts.  

Sat Apr 24 00:57:23 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, html/internal.h, html/parser.c,
	html/parser/Makefile.am, html/parser/link.c, html/parser/link.h,
	html/parser/parse.c:

	Moved link-related functions from document/html/parser.c to
	document/html/parser/link.*.  

Sat Apr 24 00:51:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Emit 'Remote method not supported' instead of 'Command
	not supported'. Should hopefully be less confusing.  

Sat Apr 24 00:38:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/parse.c:

	Restored get_num() which got... lost in an accident.  

Sat Apr 24 00:36:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed idiotic static inline from html_*().  

Sat Apr 24 00:33:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/: parse.c, parse.h:

	Separated core parser stuff from document/html/parser.* to
	document/html/parser/parse.*.  

Sat Apr 24 00:32:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/core.c:

	Use PERL_EXIT_DESTRUCT_END only if it's defined, I don't have it in
	my pet perl-5.6.1.  

Sat Apr 24 00:31:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, sched/session.c:

	Fix -remote 'openurl()' so it again prompt for URL in current tab.  

Sat Apr 24 00:28:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Oops it is @comma that should be strimmed from ending
	space.  

Sat Apr 24 00:25:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/core.c:

	Fix include modules/module.h.  

Sat Apr 24 00:25:24 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.base:

	Remove CPPFLAGS usage. That shouldn't hurt anything and it's all
	mostly redundant anyway.  

Sat Apr 24 00:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Improve -remote long-help description. Fix incorrect description of
	openurl(). Take 4.  

Sat Apr 24 00:23:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	skipback_whitespace(): Don't go off by one.  

Sat Apr 24 00:20:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	remote_cmd(): Cleanup looping. Introduce skipback_whitespace().  

Sat Apr 24 00:20:09 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/document/html/Makefile.am:

	Connect document/html/parser/ to the build infrastructure.  

Sat Apr 24 00:18:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, document.c, css/apply.c,
	html/internal.h, html/parser.c, html/parser.h, html/renderer.c,
	html/tables.c, html/parser/Makefile.am:

	Separated core parser stuff from document/html/parser.* to
	document/html/parser/parse.*.  

Sat Apr 24 00:18:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Added missing util/conv.h.  

Sat Apr 24 00:03:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/internal.h:

	parser/stack.c needs ln_break().  

Fri Apr 23 23:56:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, util/error.c:

	usrerror() now prefixes error messages with 'elinks: '. Change
	-remote 'ping()' to be more mozilla compliant and in the spirit of
	Unix and only emit error message when ping failed.  

Fri Apr 23 23:30:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Emit error message when -remote failed to connect.  

Fri Apr 23 23:23:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Trim down includes.  

Fri Apr 23 23:23:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/internal.h:

	Declare @ff and @line_break_f as extern.  

Fri Apr 23 23:22:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/internal.h:

	@ff and @line_break_f are needed by parser/stack.c.  

Fri Apr 23 23:18:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Cleanup the gotos a little.  

Fri Apr 23 23:16:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	kill_html_stack_until(): Reindentation.  

Fri Apr 23 23:14:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Tidyup.  

Fri Apr 23 23:12:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser/stack.c, parser/stack.h:

	Removed debug_stack(), dump_html_stack() is now the official HTML
	stack debugging dumper.  

Fri Apr 23 23:10:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.c:

	Enhanced dump_html_stack().  

Fri Apr 23 23:08:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/stack.h:

	Removed redundant struct html_element declaration.  

Fri Apr 23 23:08:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/: stack.c, stack.h:

	search_html_stack() prototype: (char *) -> (unsigned char *) 

Fri Apr 23 23:06:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser/stack.c, parser/stack.h:

	kill_until() -> kill_html_stack_until() 

Fri Apr 23 23:05:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Improve -remote long-help description. Take 3. Please stop me ;) 

Fri Apr 23 23:05:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, html/parser.c,
	html/parser/Makefile.am, html/parser/stack.c, html/parser/stack.h:

	Moved HTML stack related functions from document/html/parser.c to
	document/html/parser/stack.*.  

Fri Apr 23 23:04:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser/: .cvsignore, .vimrc:

	Fairies.  

Fri Apr 23 22:58:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Improve -remote long-help description. Take 2 

Fri Apr 23 22:54:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Improve -remote long-help description.  

Fri Apr 23 22:48:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Small parse_html() tidyup.  

Fri Apr 23 22:43:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Attempt to at least roughly document element_info.nopair.  

Fri Apr 23 22:30:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Moved process_head() and skip_comment() above the elements list.  

Fri Apr 23 22:28:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Few strategically placed blank lines.  

Fri Apr 23 22:24:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	elinks -version now prints out the full version string - including
	build date and features list.  

Fri Apr 23 22:21:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/modules/version.c:

	In case @more isn't set but we're debugging still show (built on),
	but on the same line as ELinks VERSION_STRING.  

Fri Apr 23 22:05:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, sched/session.h:

	Remove -ping and only provide -remote 'ping()'.  

Fri Apr 23 22:04:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Check element type by relational operators now, so that ELEMENT_WEAK
	is considered as ELEMENT_KILLABLE in various considerations. This
	should fix the <head><title>moo</head>.  

Fri Apr 23 22:01:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser.h:

	_The_ definitive fix for any and all <title> problems which could
	ever occur. Removed the weak'n'hackish <title /> workaround, instead
	ELEMENT_WEAK element type was introduced with the special property
	that any attempt to put new element inside will terminate the
	element (<title>foo<body> will do the right thing), even for
	invisible elements where we do not normally permit other elements to
	nest. <head> also owns own dummy stack level so that
	<head><title>foo</head> does the right thing as well. You can't get
	any better than *that* ;).  

Fri Apr 23 20:44:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, bfu/button.c, bfu/dialog.c, bfu/dialog.h,
	bfu/group.c, bfu/inpfield.c, bfu/inphist.c, bfu/listbox.c,
	bfu/listmenu.c, bfu/menu.c, bfu/text.c, bfu/widget.c,
	bookmarks/backend/default.c, config/kbdbind.c, config/opttypes.c,
	dialogs/download.c, dialogs/menu.c, dialogs/options.c,
	dialogs/status.c, document/refresh.c, document/css/scanner.c,
	document/css/value.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, document/plain/renderer.c,
	osdep/getifaddrs.c, protocol/auth/auth.c, protocol/http/http.c,
	sched/event.c, sched/session.c, terminal/draw.c, terminal/screen.h,
	util/math.h, util/scanner.c, util/snprintf.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/vs.c:

	#include util/math.h back in elinks.h. Its whole *point* was to be
	around and available everytime. Besides, it includes a system
	header.  

Fri Apr 23 20:39:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/math.h:

	Blank lines.  

Fri Apr 23 20:30:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Fixed usrerror() mindtwist, I forgot to derive @params first :).
	Noticed by Jonas.  

Fri Apr 23 19:42:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Trivial decode_session_info() tidyup.  

Fri Apr 23 19:38:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Exclaim appropriate messages when create_session_info() or
	attach_terminal() failed.  

Fri Apr 23 19:37:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Report -ping outcome to stderr.  

Fri Apr 23 19:32:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Try to honour the 80 chars boundary where it makes sense.  

Fri Apr 23 19:30:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	_parse_options() -> parse_options_() 

Fri Apr 23 19:30:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Cleaned up _parse_options() - reduced level of indentation and
	moving error handling.  

Fri Apr 23 19:26:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/backend/xbel.c, config/cmdline.c,
	intl/gettext/libintl.h, lowlevel/home.c, lowlevel/interlink.c,
	lowlevel/select.c, mime/backend/mailcap.c, terminal/kbd.c,
	viewer/dump/dump.c:

	Introduced convenience G_() -> gettext() alias for use in
	multi-level printing statements when we don't have a terminal
	around.  

Fri Apr 23 19:20:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/xbel.c, config/cmdline.c,
	lowlevel/home.c, mime/backend/mailcap.c, scripting/lua/core.c,
	terminal/event.c, util/error.c, util/error.h, viewer/dump/dump.c:

	Introduced usrerror() which acts for ERROR() in the cases where user
	can trigger the error. It doesn't sleep, it doesn't beep and it
	doesn't contain information about where in the source the error
	occured, which could be quite confusing for the user (and she
	doesn't care anyway).  

Fri Apr 23 18:57:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_filename_to_string(): Use get_filename_position(). I rule!
	;P 

Fri Apr 23 18:44:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/file.c, util/file.h, viewer/text/form.c:

	Move strip_file_name() and rename to get_filename_position(). ;) 

Fri Apr 23 18:40:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	strip_file_name(): Cleanup.  

Fri Apr 23 18:23:46 2004  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, intl-compat.c, l10nflist.c, loadmsgcat.c,
	localcharset.c, localealias.c, ngettext.c, textdomain.c:

	Fix wrong inclusion of header. We want "config.h" not <config.h>.  

Fri Apr 23 18:04:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_filename_to_string(): Use parse_http_header_param().  

Fri Apr 23 16:42:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Improve Content-Disposition handling by trimming any following
	fields.  

Fri Apr 23 16:29:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_filename_to_string(): Use strstr() to find 'filename='
	substring.  

Fri Apr 23 15:52:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/core.c:

	Generic tidyup and some more includes.  

Fri Apr 23 15:51:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/perl/core.h:

	Remove some strange irrelevant includes.  

Fri Apr 23 15:45:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Ensure the main pointer is aligned (otherwise we go nuts on some
	archs) and put the XFLOW underflow mark to the alloc_header aligned
	reserved space.  

Fri Apr 23 15:28:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libgnuintl.h:

	Compile fix.  

Fri Apr 23 15:11:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libgnuintl.h:

	#define _LIBINTL_H to avoid including system <libintl.h>. Last patch
	will hopefully still fix issue with including <locale.h> in main.c 

Fri Apr 23 15:08:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libgnuintl.h:

	Standardize header file include guard.  

Fri Apr 23 15:02:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/libgnuintl.h:

	Since libgnuintl.h is not included directly simplify LC_MESSAGE
	#define.  

Fri Apr 23 14:25:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/getifaddrs.c:

	More SunOS compile fixes. #include <sys/socket.h> and <sys/types.h>
	before <net/if.h>.  

Fri Apr 23 14:20:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	I''n psaky./ O"m fxiing ytops.  

Fri Apr 23 14:19:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Me pasky. I be fixed error grammars.  

Fri Apr 23 14:11:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, finddomain.c, gettext.c, intl-compat.c,
	ngettext.c, textdomain.c:

	Always include own libintl.h instead of own libgnuintl.h. Fixes
	building on sparc when the include magic will make system
	<libintl.h> include our own libintl.h instead.  

Fri Apr 23 13:55:15 2004  Laurent Monin <zas@norz.org>:

	* src/ssl/connect.c:

	Cast @sock to (gnutls_transport_ptr) type, as indicated in recent
	gnutls documentation.  

Fri Apr 23 13:48:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/file.c:

	Trivial file_exists() tidyup.  

Fri Apr 23 13:47:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: scripting/lua/core.c, util/file.c, util/file.h:

	Introduced file_can_read() similiar in spirit to file_exists(). Use
	that instead of the hyperweird Lua5 Debianish bugfix using fopen()
	(while assimiliating that for fallback unless HAVE_ACCESS).  

Fri Apr 23 13:21:10 2004  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, protocol/uri.c:

	Use int type instead of size_t, preventing warnings on some
	platforms.  

Fri Apr 23 12:29:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, vernum.c, vernum.h, modules/version.c:

	Introduce vernum.* which contains currently build date/time
	information. It is rebuilt everytime to ensure we have the latest
	data for this. In the future I'd like to invent some CVS trigger
	which also keeps the latest commit date/time there (which is
	somewhat more useful and accurate than just build time info).  

Fri Apr 23 12:27:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/modules/version.c:

	Simplify the condition for inclusion of the build date/time and make
	explicit that it is date/time of the build.  

Fri Apr 23 11:44:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/file.h:

	Restored a removed newline. Evil zas! 

Fri Apr 23 11:39:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	SOME PEOPLE here should be taught the alphabet properly (moved
	-no-numbering, -config-help, -localhost to their proper place).  
	CCMAIL: pasky@ucw.cz CCMAIL: zas@norz.org 

Fri Apr 23 11:36:47 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Further weeding out and slight tuning of the items, plus reordering.  

Fri Apr 23 11:31:09 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Adjust some items and weed out some (IMHO) too unimportant ones.  

Fri Apr 23 11:23:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/action.c:

	Unrolled ACT_MAIN_TAB_MOVE* handling.  

Fri Apr 23 11:22:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/action.c:

	Reverted Jonas' 1.56 (Group similar action handler calling using a
	magic variable.). We agreed that it's not so clever as it might
	seem...  

Fri Apr 23 10:28:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, download.c, session.c, task.c:

	More is_in_progress_state() usage.  

Fri Apr 23 08:41:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Apr 22 23:56:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	doc_end_load(): Yay digging into the cvsweb archive showed that a
	little too clever cleanup broke -auto-submit handling. Readd the
	first form grabbing and improve error handling if get_form_url()
	fails.  

Thu Apr 22 23:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Pointing out brokeness of -auto-submit handling.  

Thu Apr 22 22:51:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_filename_to_string(): Strip extracted filename of any
	directories so only the clean filename is added. Fallback to old
	filename resolving if whole extracted filename is stripped.  

Thu Apr 22 22:37:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_filename_to_string(): It is only used by query_file() and
	do_type_query() dialog functions for local saving so add naive
	support for Content-Disposition by checking the associated
	cache_entry's header. I hope add_shell_safe* will make up for any
	security issues.  

Thu Apr 22 22:09:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More is_in_progress_state() usage.  

Thu Apr 22 21:32:45 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Compile fix: done_pre_format_html_hook -> preformatted. Jonas forgot
	this one... ;) 

Thu Apr 22 21:14:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Fix last patch. Don't initialize cache_entry->preformatted to one.
	;) 

Thu Apr 22 21:12:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/session.c:

	cache_entry->done_pre_format_html_hook -> cache_entry->preformatted.
	Now always a member since it is boolean and should be padded nicely
	with the other of it's kind.  

Thu Apr 22 21:04:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.h:

	Try to describe struct cache_entry.  

Thu Apr 22 21:02:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Tidyup.  

Thu Apr 22 19:53:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Document the possible 'System' value of various codepage/charset
	options.  

Thu Apr 22 19:50:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	get_cp_index(): @n -> @name 

Thu Apr 22 19:50:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Fixed get_cp_index() so that it falls back to us-ascii when you
	abuse it by using System charset while locale has some exotic
	charset unknown to ELinks set.  

Thu Apr 22 19:46:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Unroll the fastfind get_cp_index()'s return statement.  

Thu Apr 22 19:40:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Sanitized a (boolean < 1) relict.  

Thu Apr 22 19:38:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Tidyup.  

Thu Apr 22 19:36:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Reverted zas' 1.239 (Fix: copy http_version structure contents not
	structure pointer.). I'm probably stupid but I can't see any
	pointers there and the old code is fine.  CCMAIL: zas@norz.org 

Thu Apr 22 18:50:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	More tidy. XXX comment also added.  

Thu Apr 22 18:45:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Revert patch by Christian Haggstrom and add proper detection of
	these internal directory redirects.  

Thu Apr 22 18:14:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Tidyup.  

Thu Apr 22 18:09:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, config/options.inc:

	Move the ui.clock options to the leds module.  

Thu Apr 22 18:07:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Describe struct menu_item.  

Thu Apr 22 18:05:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Precompute a base X position for the clock.  

Thu Apr 22 18:04:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Changed ui.clock.format default value to also contain the angle
	brackets like all other statusbar items.  

Thu Apr 22 18:02:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, config/options.inc:

	Options subtree rename: ui.timer.clock -> ui.clock. This has nothing
	to do with the timer at all.  

Thu Apr 22 17:48:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	display_status_bar(): Add FIXME regarding progress bar being drawn
	on top of the digital clock.  

Thu Apr 22 17:47:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	@l -> @timerlen 

Thu Apr 22 17:46:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Include <time.h> only when it's available and also try <sys/time.h>.
	Should enhance portability. Somehow.  CCMAIL:
	witekfl@poczta.gazeta.pl 

Thu Apr 22 16:13:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	ses->tq => ses->type_queries.  

Thu Apr 22 16:10:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/download.h,
	sched/session.c:

	tq -> type_query, type_query() -> do_type_query().  

Thu Apr 22 16:08:11 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	scan_http_equiv(): free memory as soon it is no more needed.  

Thu Apr 22 16:06:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_element(): drop useless ().  

Thu Apr 22 16:05:25 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	element_has_implicit_end(): minor optimization.  

Thu Apr 22 16:00:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.h, sched/session.h:

	Move struct tq to more central header.  

Thu Apr 22 15:44:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix <title /> handling so pasky can enjoy
	http://cia.navi.cx/historical/first-24-hours.html 

Thu Apr 22 15:03:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	done_tq(): Fix tq->download teardown by calling change_connection().  

Thu Apr 22 12:51:30 2004  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Make headers info dialog scrollable.  

Thu Apr 22 12:39:46 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Assert absence of POST_CHAR before appending post data, may be
	useless.  

Thu Apr 22 12:38:10 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Bug fix proposed by Christian Haggstrom for issue related to POST +
	Location: / was applied.  

Wed Apr 21 22:43:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	destroy_session(): Use done_tq() when freeing ses->tq list.  

Wed Apr 21 22:39:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	tp_free() -> done_tq() to complete init/done interface. Maybe we
	should s/tq/type_query/.  

Wed Apr 21 22:35:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Move tq initialization to init_tq(). Removes goto and reduces the
	ses_chktype() confusion.  

Wed Apr 21 22:19:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Make subst_file() static.  

Wed Apr 21 22:15:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	|V|4|{3 6070_U|21_}{0/\/\3 57471(.  

Wed Apr 21 13:48:00 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	strlcmp_device(): @n is useless so removed, @d was introduced to
	prevent double calculation of difference.  

Wed Apr 21 13:27:15 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Remove configure-do relict from EXTRA_DIST. It looks like this was
	breaking -current tarballs build for some three months... :( 

Wed Apr 21 09:21:31 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/core.c:

	Minor cleanup.  

Wed Apr 21 09:07:41 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/core.c:

	Let preprocessor do the job: snprintf() is useless to concatenate
	constant strings.  

Wed Apr 21 08:59:29 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/core.c:

	Fix usage of PERL_SYS_INIT3() and PERL_SYS_TERM() macros, prevent
	unused variables warnings, cleanup + comments.  

Wed Apr 21 01:10:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_mouse_handler(): Specialize loop to only care if the item
	has left text.  

Wed Apr 21 00:42:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_mouse_handler(): fubar'ed patch that rewrites the menu item
	loop moving testing of whether mouse button was pressed so we should
	scroll out of the loop. Comments should hopefully make it more
	clear.  

Wed Apr 21 00:21:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_mouse_handler(): Use foreach_menu_item.  

Wed Apr 21 00:00:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_mouse_handler(): Decrease indentation.  

Tue Apr 20 23:54:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use minor hacked scroll_menu() for mainmenus.  

Tue Apr 20 23:32:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Menu drawing cleanups.  

Tue Apr 20 23:23:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	draw_menu_left_text(): Use draw_text().  

Tue Apr 20 17:02:49 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Use int_max() for overlap() macro.  

Tue Apr 20 15:53:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	That hack was a bad idea. It forces too much rerendering ;).  

Tue Apr 20 15:31:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	doc_end_load(): Use ugly hack to force rerendering of document when
	a requested stylesheet has been loaded.  

Tue Apr 20 15:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Make 3 functions static.  

Tue Apr 20 13:48:12 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Fix compilation due to field name changes made by Jonas in menu
	stuff. Reported by Stephen Stocker.  

Tue Apr 20 07:45:48 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	do_lookup(): remove two goto and a label -> code simplification.  

Tue Apr 20 07:35:32 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	end_dns_lookup(): @q -> @query, already used in other related
	functions.  

Mon Apr 19 15:56:44 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, cache/cache.c, config/options.c,
	cookies/dialogs.c, dialogs/status.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c,
	globhist/dialogs.c, globhist/globhist.c, lowlevel/connect.c,
	lowlevel/dns.c, protocol/uri.c, protocol/auth/auth.c,
	protocol/file/file.c, protocol/http/codes.c, protocol/http/http.c,
	sched/connection.c, sched/download.c, sched/event.c,
	sched/history.c, sched/task.c, terminal/terminal.c, util/memory.h,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	mem_free_set_if(x, v) -> mem_free_set(&x, v) as proposed on irc,
	mem_free_if() do not set pointer to NULL anymore since this is a
	bloat, programmers just have to change  #if 0 to #if 1 in memory.h
	to force pointers nullification (for debugging purposes only).  

Mon Apr 19 14:39:40 2004  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, config/options.c, cookies/dialogs.c,
	dialogs/status.c, document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, globhist/globhist.c, lowlevel/connect.c,
	protocol/file/file.c, protocol/http/codes.c, protocol/http/http.c,
	sched/task.c, terminal/terminal.c:

	Use mem_free_set_if() where applicable.  

Mon Apr 19 09:41:16 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	Unify read/write loops style, shorten lines by introducing @todo,
	initialize @done just before loops, tidy up.  

Mon Apr 19 08:58:15 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	end_dns_lookup(): assert dnsentry before it is used, use mem_alloc()
	instead of mem_calloc() where zeroing is useless, cleanup.  

Mon Apr 19 08:50:03 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	find_host(): assert dnsentry before using it, assert
	dnsentry->addrno is positive, remove a goto and a label, and use
	mem_alloc() since zeroing is useless due to memcpy() few lines
	later.  

Sun Apr 18 14:24:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Compile fix.  

Sun Apr 18 14:01:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Fix possible bug I encountered yesterday by caching
	old stack_size.  

Sun Apr 18 13:52:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Move menu item adding at the stack bottom case up
	front.  

Sun Apr 18 07:13:34 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sun Apr 18 01:35:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	menu_kbd_handler(): Cleanup home/end handling.  

Sun Apr 18 01:30:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	menu_kbd_handler(): Cleanup.  

Sun Apr 18 01:27:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	do_menu_selected(): Use mem_calloc().  

Sun Apr 18 01:24:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: menu.c, menu.h:

	Unify the menu->view and menu->first_displayed members to
	menu->first and rename menu->last_displayed to menu->last. Hope it
	is not too short.  

Sun Apr 18 01:18:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Describe members of struct menu.  

Sun Apr 18 00:59:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Handle more actions. It might be of use for
	some people and is really not a lot of code.  

Sun Apr 18 00:44:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Cleanup usage of temp. variables. @fwd now
	simply means select_menu() 

Sun Apr 18 00:41:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Move hotkey checking and window deletion
	under the default switch label.  

Sun Apr 18 00:31:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Group more left and right action stuff.  

Sun Apr 18 00:28:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Handle right and left action together.  

Sun Apr 18 00:22:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_kbd_handler(): Use switch statement for action.  

Sun Apr 18 00:10:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listmenu.c, menu.h:

	Revert the latest listmenu patch introducing usage of FREE_* flags.
	We only need to free the member when freeing the form control which
	I overlooked.  

Sat Apr 17 18:56:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h:

	Remove unused member submitted_value->file_content.  

Sat Apr 17 18:06:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listmenu.c, menu.h:

	Introduce FREE_RECURSIVE_DATA and make free_menu() check the flags.  

Sat Apr 17 18:01:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use new_menu() and add_to_menu(). There are
	probably some issues with the fact that allocation failure in
	add_to_menu() will result in leak and add_to_menu() enables hotkeys
	I think.  

Sat Apr 17 17:52:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Decrease indentation by returning if data != -1 and
	stack size is zero.  

Sat Apr 17 17:49:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Group data == -1 code and improve error handling.  

Sat Apr 17 17:04:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/optgroup.html:

	Add test for <optgroup> handling.  

Sat Apr 17 16:26:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c, viewer/text/link.c:

	add_separator_to_menu() -> add_menu_separator().  

Sat Apr 17 15:35:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	count_menu_size(): Use foreach_menu_item().  

Sat Apr 17 15:11:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use @size for updating @item after reallocation of
	top.  

Sat Apr 17 14:54:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Kill line.  

Sat Apr 17 14:50:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Use foreach_menu_item() to make code look more
	normal.  

Sat Apr 17 14:37:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	do_select_submenu(): Get rid of goto by asigning @sel if
	menu_contains() the item.  

Sat Apr 17 14:35:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	do_select_submenu(): Use int_min() for @def < 0.  

Sat Apr 17 14:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Apparently menu_labels() is the only place this MENU_FULLNAME flag
	is used and it only actually means anything for ordinary items and
	not submenu items.  

Sat Apr 17 14:20:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	menu_labels(): Cleanup base label allocation.  

Sat Apr 17 14:17:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	menu_labels(): Rename m -> item. We should consider what name to use
	for menu_item through out the code.  

Sat Apr 17 14:15:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	More foreach_menu_item usage.  

Sat Apr 17 14:14:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: menu.c, menu.h:

	Introduce foreach_menu_item iterator.  

Sat Apr 17 11:58:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hotkey.c, menu.c, menu.h:

	Ni wtf is ni ;) ahh it is the number of items. Renamed menu->ni to
	menu->size for shortness and descriptive value.  

Sat Apr 17 11:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hotkey.c, hotkey.h, menu.c, menu.h:

	Blast menu_head.  

Sat Apr 17 11:47:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use select_menu() and remove select_mainmenu().  

Sat Apr 17 11:39:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: menu.c, menu.h:

	Add struct mainmenu member to struct menu. The little extra added
	memory usage is on temporary dialog code. Now we can remove some of
	that stupid code duplication and it will be needed anyway when we
	introduce tabs for dialogs.  

Sat Apr 17 11:36:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Warn about mem_free_*if() possibly obfuscating their users.  

Sat Apr 17 11:34:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Always set freed pointer to NULL, as was discussed on #elinks.  

Sat Apr 17 11:28:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	struct main_menu's sp member is only asigned to which much mean it
	is bloat of the evil kind.  

Sat Apr 17 11:19:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	new_menu_item(): Handle name is NULL case up front.  

Sat Apr 17 03:07:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Doh. realloc_event() off by one error :|.  

Sat Apr 17 02:48:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listmenu.c:

	Fix mem_free_set_if_leak_debug() bug. We test @name right after so
	it should not be cleared.  

Sat Apr 17 02:39:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/text.c, document/docdata.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, sched/event.c, util/memory.h,
	util/string.h, viewer/text/form.c, viewer/text/search.c,
	viewer/text/textarea.c:

	Make the mem_align_alloc() macro apply the sizeof() to the object.  

Sat Apr 17 02:20:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h:

	Describe this little piece of code.  

Sat Apr 17 02:09:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, osdep/newwin.c, osdep/newwin.h,
	util/memory.h:

	This is a good example of how abstractions can make code harder to
	work with. Expose _const_ open_in_new so no copy allocation is
	needed. It is just another example of my if-it-works-$(do)-it-anyway
	where $(do) could be try-to or even play-with.  

Sat Apr 17 01:52:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	oinw -> open_in_new.  

Sat Apr 17 01:37:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Make them open_in_new data static.  

Sat Apr 17 01:35:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	open_new_window(): Inline exec_new_elinks().  

Sat Apr 17 01:30:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h, beos/beos.c, os2/os2.c,
	win32/win32.c:

	Centralize all them open in new functions by putting the default
	command in the open_in_new structure.  

Sat Apr 17 01:19:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Let the code breathe a bit.  

Sat Apr 17 01:13:15 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	When LEAK_DEBUG is defined, mem_free_if(p) set p to NULL after
	freeing it. This will cause some issues ;).  

Sat Apr 17 01:10:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, osdep/newwin.c,
	osdep/newwin.h, sched/session.c:

	Don't pass callbacks around but term_env_type for open in new window
	functions.  

Fri Apr 16 23:39:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	do_action() was moved so include obsolete.  

Fri Apr 16 17:41:01 2004  Karsten Schölzel <kuser@gmx.de>:

	* src/protocol/uri.c:

	Fix a bug in normalize_uri triggered if you enter
	"javascript:gourl('../../../');" as new url.  

Fri Apr 16 16:36:59 2004  Laurent Monin <zas@norz.org>:

	* src/: terminal/kbd.c, terminal/screen.c, terminal/tab.c,
	terminal/terminal.c, terminal/window.c, mime/dialogs.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c,
	scripting/lua/core.c, formhist/formhist.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:33:27 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, globhist/dialogs.c, globhist/globhist.c,
	lowlevel/connect.c, lowlevel/dns.c, lowlevel/home.c,
	lowlevel/interlink.c, protocol/proxy.c, protocol/uri.c,
	protocol/user.c, protocol/auth/auth.c, protocol/file/file.c,
	protocol/http/codes.c, protocol/http/http.c, sched/connection.c,
	sched/download.c, sched/event.c, sched/history.c, sched/session.c,
	sched/task.c, ssl/connect.c, util/fastfind.c, util/file.c,
	util/secsave.c, viewer/dump/dump.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/vs.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:29:58 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listmenu.c, bfu/menu.c,
	bfu/style.c, bookmarks/bookmarks.c, bookmarks/dialogs.c,
	bookmarks/backend/xbel.c, config/cmdline.c, config/dialogs.c,
	config/options.c, cookies/cookies.c, cookies/dialogs.c,
	dialogs/info.c, dialogs/status.c, document/document.c,
	document/css/stylesheet.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c:

	Populate with mem_free_if() and mem_free_set_if().  

Fri Apr 16 16:27:01 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	mem_free_if_set() -> mem_free_set_if(), idea by Pasky.  

Fri Apr 16 16:26:39 2004  Karsten Schölzel <kuser@gmx.de>:

	* src/: document/html/parser.c, viewer/text/search.c:

	Compile fix.  

Fri Apr 16 16:16:43 2004  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	mem_free_if(pointer) and mem_free_if_set(pointer, newpointer) were
	introduced.  

Fri Apr 16 11:10:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor simplification: use memacpy() instead of mem_alloc() +
	sprintf().  

Fri Apr 16 10:16:53 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	A minor compilation warning was fixed, using explicit type casting.  

Fri Apr 16 10:09:43 2004  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, sched/session.c, sched/task.c:

	Trailing whitespaces were removed.  

Fri Apr 16 10:02:06 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/inphist.c, bfu/listbox.c, bfu/text.c, bfu/widget.c,
	bookmarks/backend/default.c, config/kbdbind.c, config/opttypes.c,
	dialogs/download.c, dialogs/menu.c, dialogs/options.c,
	dialogs/status.c, osdep/getifaddrs.c, protocol/http/http.c,
	sched/session.c, util/scanner.c, util/snprintf.c,
	viewer/text/form.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Include util/math.h where it is needed (last bits).  

Fri Apr 16 09:44:12 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.h, bfu/menu.c, document/refresh.c,
	document/css/scanner.c, document/css/value.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c,
	document/plain/renderer.c, protocol/auth/auth.c, sched/event.c,
	terminal/draw.c, terminal/screen.h, viewer/text/link.c,
	viewer/text/vs.c:

	Include util/math.h where it is needed.  

Fri Apr 16 09:42:13 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, util/Makefile.am, util/math.h:

	int_bounds() family was moved to new util/math.h.  

Fri Apr 16 09:23:40 2004  Laurent Monin <zas@norz.org>:

	* src/scripting/perl/: core.c, hooks.c:

	Perl scripting module compilation issues were fixed.  

Fri Apr 16 09:20:52 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, osdep/generic.h:

	Include system headers before redefining macros, it fixes some
	compilation failures on some systems.  

Thu Apr 15 17:30:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Fix assertion failure.  

Thu Apr 15 16:57:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Make everybody use open_url_in_new_window() as backend.  

Thu Apr 15 16:44:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/link.c:

	Hmm try to centralize newwin.h usage a bit more.  

Thu Apr 15 16:32:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/link.c,
	viewer/text/view.c, viewer/text/view.h:

	Move all the nice open in new window code.  

Thu Apr 15 16:16:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, viewer/text/view.c, viewer/text/view.h:

	Fully support the -remote 'openurl(..., new-win)' thing.  

Thu Apr 15 16:13:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	Damn zas was right. I did break something :(.  

Thu Apr 15 15:35:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	foreach_oinw(): Everything to save a line of code. ;) .. fix bug
	from last patch.  

Thu Apr 15 15:28:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: newwin.c, newwin.h:

	Gross memory waste by adding term_env_type to open_in_new struct.
	But it simplifies a lot.  

Thu Apr 15 15:25:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/newwin.c, osdep/newwin.h, viewer/text/view.c:

	get_open_in_new(): Take term arg and do one allocation by getting
	size from can_open_in_new().  

Thu Apr 15 14:58:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/newwin.c:

	can_open_in_new(): No need to allocate when a simple loop will do.  

Thu Apr 15 14:31:25 2004  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Make debugging code more obviously separated from true code, got rid
	of awful and misleading accif() macro, all debuggung macros are now
	prefixed with FF_DBG_. It improves readibility of non-debugging
	code.  

Thu Apr 15 14:27:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/default.c, osdep/osdep.c, protocol/user.c:

	get_system_str(): Return static string and shrink using code.  

Thu Apr 15 14:21:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	get_user_program(): Use temp instead of wrapping funny code.  

Thu Apr 15 09:29:40 2004  Laurent Monin <zas@norz.org>:

	* NEWS:

	New options -remote and -ping were added.  

Thu Apr 15 09:18:57 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Apr 15 08:32:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Whoops bug in binary flag.  

Thu Apr 15 08:28:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, sched/session.c, sched/session.h:

	-remote-session was replaced by lazy mozilla compliant -remote
	handling. elinks -remote <urls> will just open <urls> in new
	backgrounded tabs and elinks -remote openURL(<url>, ...) will make
	it possible to do more finegrained control. Open in new window is
	still not supported.  

Thu Apr 15 02:39:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Move session info comments.  

Thu Apr 15 02:24:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, config/cmdline.c, sched/session.c,
	sched/session.h:

	Add support for -remote-session that will connect to an already
	running ELinks (or bail out) and open all the provided URIs. Again
	the intension is to support -remote argument similar to that of
	mozilla and either this can be a backend for that or just be a
	starting point for it.  

Thu Apr 15 00:55:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, config/cmdline.c, terminal/event.c:

	Implement a -ping command line argument that will hopefully help to
	make -remote handling easier. Else we can remove it later when
	-remote is running.  

Thu Apr 15 00:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c:

	Improve the term->spec reference counting by also locking the
	default one. Else assertion failure can appear if the connecting
	ELinks exists immediately.  

Wed Apr 14 23:35:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/osdep.c, osdep/osdep.h, terminal/terminal.c,
	terminal/terminal.h:

	Move get_cwd() and set_cwd() to osdep department.  

Wed Apr 14 22:59:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): The joy of switch statements. Decrease indentation.  

Wed Apr 14 22:55:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Ctrl+L should now be a RESIZE event in order to always force
	redrawing.  

Wed Apr 14 22:50:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event():Move comment.  

Wed Apr 14 22:47:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c, terminal.h:

	redraw_terminal_ev(): Use term_send_event() as backend an removing
	code duplication.  
	
	redraw_terminal_cls(): Was the only user of redraw_terminal_all()
	and is now the defined as the old redraw_terminal_all which just
	calls redraw_terminal_ev() and lets term_send_event() handle screen
	erasing and resizing.  

Wed Apr 14 22:35:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event(): Only resize and erase screen when handling INIT
	and RESIZE events. Inspired by redraw_terminal_ev().  

Wed Apr 14 22:30:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	term_send_event(): Handle INIT, RESIZE and REDRAW events by sending
	them to all windwows.  

Wed Apr 14 22:10:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Evil hacks to restore appearance of input field lines.  

Wed Apr 14 22:03:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, inphist.c:

	tab_compl_n(): Use redraw_terminal() instead of lowlevel terminal
	event sending. It bypasses any possible dialog->handle_event() by
	that should not be a problem with the current usage. Makes it
	possible to make dialog_func() static.  

Wed Apr 14 21:53:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	redraw_terminal_ev(): Propagate EV_RESIZE even to inactive tabs like
	we do in in_term().  

Wed Apr 14 21:38:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	in_term(): Use switch statement and breaks to get rid of ifs and
	gotos.  

Wed Apr 14 21:17:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h, scripting/perl/core.c:

	Look mama I'm coding perl. Make ac ang av static. WTF are they
	handed to PERL_SYS_INIT() we don't support perl args on the command
	line anyway and the day we do I will fork my own ELinks ;).  

Wed Apr 14 21:01:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Update comment and more usage of connection state macros.  

Wed Apr 14 20:51:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Use add_string_to_stirng().  

Wed Apr 14 20:50:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup.  

Wed Apr 14 20:21:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_end(): Group -dump specific stuff.  

Wed Apr 14 20:14:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Maybe do it some other way but show which one (of
	multiple URLs) is the problem.  

Wed Apr 14 20:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Error reporting now handles unknown protocols.  

Wed Apr 14 20:11:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_start(): Show error for unsupported URI protocols.  

Wed Apr 14 20:07:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup.  

Wed Apr 14 20:02:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_formatted(): No need to return anything.  

Wed Apr 14 19:46:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/: select.c, select.h:

	@terminate belongs to main.h 

Wed Apr 14 19:43:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, main.h:

	Make init() static.  

Wed Apr 14 19:40:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): More comments.  

Wed Apr 14 19:04:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/session.c, sched/session.h:

	create_session_info(): Take string argument.  

Wed Apr 14 19:03:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	done_string(): Make it possible to call it multiple times on a
	string by only checking the magic if free()ing something.  

Wed Apr 14 18:55:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	create_session_info(): Use string utils.  

Wed Apr 14 06:30:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Improve signal handling logic.  

Wed Apr 14 06:08:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Replace obsolete FIXME with comment.  

Wed Apr 14 06:06:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Code duplication forever. Gotos never.  

Wed Apr 14 05:55:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Make distant goto users duplicate the code.  

Wed Apr 14 05:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, terminal/terminal.c, terminal/terminal.h:

	Unify signal setup and session info freeing in init().
	attach_terminal() now returns the created terminal.  

Wed Apr 14 05:44:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup2.  

Wed Apr 14 05:35:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup.  

Wed Apr 14 05:31:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Cleanup variable usage.  

Wed Apr 14 05:25:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Rearrange the connecting to an already running instance so
	it is grouped together with the -no-connect part.  

Wed Apr 14 05:12:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	init(): Use no-connect option for storing no connect info.  

Wed Apr 14 03:14:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/select.c:

	Uhh I love that funky code. Iterate while timer list is not empty
	and interval is less than or equal to zero.  

Wed Apr 14 03:04:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/select.c:

	Ehm .. cache_entry != timer.  

Wed Apr 14 02:35:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/: select.h, signals.c:

	Fix includes? 

Wed Apr 14 02:21:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Fix is_system_error() logic.  

Wed Apr 14 00:42:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Add stop member to file_download struct and remove stop arg from
	abort_download.  

Wed Apr 14 00:35:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	viewer/dump/dump.c:

	Last batch of state macros.  

Wed Apr 14 00:11:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, task.c:

	More is_in_result_State() usage.  

Wed Apr 14 00:09:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h, error.c:

	Move connection state macros and add/use is_system_error().  

Tue Apr 13 23:43:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Goto return madness. Sorry I couldn.t resist. ;) 

Tue Apr 13 23:15:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	Make get_real_opt() take care of all the option name translation.  

Tue Apr 13 22:47:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Group @fcp dependant code.  

Tue Apr 13 22:42:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Them string can never be empty if we have the
	extension option.  

Tue Apr 13 22:38:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Move option name translation and simplify error
	handling.  

Tue Apr 13 22:36:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Cleanup.  

Tue Apr 13 22:31:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_add_ext(): Simplify dialog data initialization by making the
	struct extension strings be MAX_STR_LEN.  

Tue Apr 13 22:27:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	charset_list(), menu_language_list(): Cleanup.  

Tue Apr 13 18:58:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_file(): Use string utils for reallocation and avoid nasty
	hacks.  

Tue Apr 13 18:44:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove old comment.  

Tue Apr 13 18:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, protocol/file/file.c:

	Fix bug 377 by allowing reading from /dev/stdin when it is a pipe.  

Tue Apr 13 18:27:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_encoded_file(): Abuse switch noddle to handle errors.  

Tue Apr 13 18:11:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	read_encoded_file(): Minor simplification removing saved_errno.  

Tue Apr 13 16:36:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/dialogs.c, config/dialogs.c:

	Fix text before input fields with floating labels bottom padding.  

Tue Apr 13 16:30:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Right align floating labels up against the input field.  

Tue Apr 13 16:20:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Bitpicking.  

Tue Apr 13 16:17:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, protocol/auth/dialogs.c:

	Fix the input field floating label thing and convert last user.  

Tue Apr 13 16:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/file.h, document/css/css.c:

	Remove unused header and fix side fx.  

Tue Apr 13 15:59:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	More isspace() usage.  

Tue Apr 13 10:15:40 2004  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/connect.c, osdep/getifaddrs.h:

	System headers should be included before any local headers, this is
	fixing bug 439 reported by Victor Sahlstedt.  

Tue Apr 13 10:10:09 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation: typo fixes.  

Tue Apr 13 10:06:47 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Apr 12 23:28:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Cleanup.  

Mon Apr 12 23:01:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Check if the @rel[ative] parameter contains a protocol
	name and use translate_url() to 'set it up'.  

Mon Apr 12 22:49:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c, cookies/dialogs.c:

	By default add ': ' string to floating input field labels to reduce
	memory usage and needed error hanling.  

Mon Apr 12 21:38:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	check_number(): Make the error message guide the user.  

Mon Apr 12 08:22:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Apr 11 23:06:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Cleanups.  

Sun Apr 11 22:58:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/dialogs.c:

	menu_del_ext(): Make better usage of printf format.  

Sun Apr 11 21:11:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/conf.c:

	write_config_file(): Final cleanup.  

Sun Apr 11 20:46:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Rename write_config_error() -> write_config_dialog().  

Sun Apr 11 20:44:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, dialogs.h:

	Merge write_config_success() into write_config_error().  

Sun Apr 11 20:41:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Move write config dialog message composing.  

Sun Apr 11 20:13:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Avoid allocating args to msg_text() for the write_config_* dialogs.
	Also fixes potential leak when term was NULL for successfull writes.  

Sun Apr 11 17:24:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, viewer/text/form.c, sched/download.c:

	Avoid allocating args to msg_text().  

Sun Apr 11 17:23:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, mime/dialogs.c, protocol/user.c:

	Free args to msg_text() instead of adding them to getml().  

Sun Apr 11 16:10:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_error_dialog(): Decrease indentation.  

Sun Apr 11 16:08:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_error_dialog(): With msg_text() there is no need to
	stracpy() stuff.  

Sun Apr 11 15:47:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove useless test.  

Sun Apr 11 15:32:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/uri.c,
	sched/connection.c, sched/task.c:

	Introduce an unknown_protocol_backend that will pop up an unknown
	protocol dialog as the external handler.  

Sun Apr 11 14:38:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Fix access of free()d memory.  

Sun Apr 11 14:35:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Remove useless file_download cleanup. We
	only ever go there if i is NULL.  

Sun Apr 11 14:34:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	continue_download_do(): Move tq initialization up so it can be used
	to shorten lines in the whole function.  

Sun Apr 11 14:28:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	common_download_do(): Cleanup and remove goto usage by extracting
	members from and freeing cmdw_hop early.  

Sun Apr 11 14:22:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup and remove double check of resume to get last_pos.  

Sun Apr 11 14:18:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Unify file_download initialization.  

Sun Apr 11 12:43:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	save_as(): Cleanup error handling.  

Sun Apr 11 12:42:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	common_download_do(): Cleanup error handling.  

Sun Apr 11 03:03:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Don't allow exmode when anonymous.  

Sun Apr 11 00:59:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, protocol/auth/dialogs.c:

	Fix bug 392 (badly formatted HTTP auth dialog) properly.  

Sun Apr 11 00:40:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix bug 390 caused by incompatibility in session info after support
	for multiple URIs on the commandline was added. This is done by
	introducing some basic session magic data that should make it
	possible in the future to detect what version the client is using
	and decode the session info appropriate. With this patch a new
	ELinks will not be able to pass URIs when connecting to an old
	ELinks however it will work the other way around. It is not perfect
	but I see no other clean way to fix this bug.  

Fri Apr  9 16:42:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Add FIXME about problems reading stuff from stdin to be viewed in
	text viewer (and not dump viewer) because of not allowing special
	files.  

Fri Apr  9 16:33:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Like if !isatty(stdin) also check if !isatty(stdout) and make -dump
	implicit.  This should fix debian bug #231663 "-dump 0 to stdout
	doesn't dump; -dump 0 to pager segfaults". The segfault was by Out
	of memory error that was fixed by previous patch setting x and y
	vars before calling get_terminal_size(). This will further fix it by
	improving usability of elinks in UNIX environment.  

Fri Apr  9 13:34:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Use STDIN_FILENO macro instead of just 0. Don't know if it is
	something we should test for in configure.  

Fri Apr  9 13:33:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	get_terminal_size() might not actually assign anything to the
	referenced arguments but will still return 0. This is a bit safer
	when stdout is a pipe.  

Fri Apr  9 04:37:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Proper fix for the unchecked allocated variable freeing.  

Fri Apr  9 03:43:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Use same procedure for sending same URI as referrer as sanding true
	URI. It is alreay the proxied URI so why all the fuzz.  

Fri Apr  9 03:40:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	The data member of URI is always set.  

Fri Apr  9 03:39:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Proposed fix for bug 436 leaking auth data through true referrer.  

Fri Apr  9 03:20:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Format enum members properly.  

Fri Apr  9 03:19:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, auth/auth.c, http/http.c:

	Add HTTP URI formatting classes.  

Fri Apr  9 03:13:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, scripting/lua/core.c:

	Introduce URI_ORIGINAL formatting class.  

Fri Apr  9 03:10:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, dialogs/document.c, dialogs/download.c,
	dialogs/menu.c, document/renderer.c, protocol/uri.h,
	protocol/file/cgi.c, sched/download.c, viewer/text/link.c:

	Introduce URI_PUBLIC formatting class that should be used for all
	the URIs showed in dialogs an stuff. Is that too strict or should it
	maybe be configurable whether to show password in public URIs? It is
	even used for CGI referrer altho' I don't if that is too strict.  

Fri Apr  9 03:05:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Revert URI component strangeness. Classes will be introduced
	shortly.  

Fri Apr  9 03:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Move unchecked allocated var passed to getml() to the end so it
	won't keep the other ml args from being registered and cause a leak.  

Fri Apr  9 02:19:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Decrease indentation.  

Thu Apr  8 19:47:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	add_url_to_http_string(): Rewrite to not allocate no post url copy.  

Thu Apr  8 19:36:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Small workaround for URI_DEFAULT_PORT adding. Hmm I will have to
	figure out something better.  

Thu Apr  8 19:21:48 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updated.  

Thu Apr  8 14:38:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, http/http.c:

	Add support for adding default port if the URI has no port specified
	using new URI_DEFAULT_PORT component.  

Thu Apr  8 14:14:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, task.c:

	Fix bug in URI reference counting and add assertion about
	ses->loading_uri. Thanks to iSteve for his irc presence that lead to
	triggering the bug.  

Thu Apr  8 13:17:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Initialize option lock.  

Thu Apr  8 13:05:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Comment out is_object_used(file_download) assertion and describe why
	we need to make it not fail when the time comes.  

Thu Apr  8 04:33:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix assertion failure when calling protocol function with unknown
	protocol.  

Thu Apr  8 02:52:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c:

	More download consistency checking. Should fix bug 399 (pasting crap
	into goto url dialog) caused by the input to start downloads and
	aborting them (using bottom halves) and then deleting before the
	bottom half gets called. Well we already know how racy the whole
	download code is so ...  

Thu Apr  8 02:00:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, util/types.h:

	Remove gross INFO_LIST hack.  

Wed Apr  7 22:24:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Show proxy URI info for cache entries.  

Wed Apr  7 22:14:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	parse_uri(): Remove useless test. If the protocol is unknown we bail
	out after skipping the '//'s.  

Wed Apr  7 22:10:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Improve and add comments.  

Wed Apr  7 21:53:15 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, if anyone cares.  

Wed Apr  7 21:45:25 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Style fix.  

Wed Apr  7 21:15:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add support for translating proxied URIs so even
	proxy://proxy.stuff/elinks.or.cz will work. And this proxy patch is
	even reasonably well tested. ;-) 

Wed Apr  7 20:06:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Assert it is file:// URI that is past to transform_file_url().
	Update comment.  

Wed Apr  7 20:01:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Remove TODO/FIXME about first trying file:// since we infact do
	that.  

Wed Apr  7 19:58:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup.  

Wed Apr  7 19:53:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Clearify why we default to file:// when finding protocol.  

Wed Apr  7 19:44:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add FIXME about translating proxied URIs.  

Wed Apr  7 19:34:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Add support for proxy:// URIs on the command line. Before it caused
	an assertion failure and it is really not that much code.  

Wed Apr  7 19:12:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix need slash after host checking introduced a few patches ago.  

Wed Apr  7 16:15:43 2004  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Kalle Olavi Niemitalo was added to AUTHORS, for its Accept-Charset
	bug fix.  

Wed Apr  7 16:11:28 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Bug #242524(Debian) was fixed. Accept-Charset header was incorrect
	with protocol.http.bugs.accept_charset = 0. Thanks to Kalle Olavi
	Niemitalo and Peter Gervai.  

Wed Apr  7 15:46:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add FIXME about handling of irc. and other common protocol specific
	hostnames.  

Wed Apr  7 15:43:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	find_uri_protocol(): Cleanup and remove unneeded gotos.  

Wed Apr  7 15:40:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move and properly indent find_uri_protocol().  

Wed Apr  7 15:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move protocol detection to separate find_uri_protocol() function.  

Wed Apr  7 15:32:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Maintain which protocol name to add using enum
	protocol.  

Wed Apr  7 15:22:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Work on the allocated URI string. All tho' the protocol name finding
	will most certainly be run first you never know.  

Wed Apr  7 15:15:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Simplify tilde_expansion by doing it on entering translate_url().  

Wed Apr  7 15:06:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup.  

Wed Apr  7 15:03:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix detection of protocol name for URIs like www.sunpoint.net?k=1.
	Don't brainlesly add ending '/' but handle it using the
	URI_ERRNO_NO_HOST_SLASH.  

Wed Apr  7 14:24:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Improve host after slash handling by changing parse_uri() to assign
	URI host members before checking if slash is missing and
	translate_url() will now use URI host members to insert missing
	slash at the right position. http://www.sunpoint.net?k=1 will be
	translated to http://www.sunpoint.net/?k=1 and squid should be happy
	as well.  

Wed Apr  7 14:09:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Fix redirect info.  

Wed Apr  7 13:57:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix dir normalization for URIs like http://elinks.or.cz//bla to
	normalize to http://elinks.or.cz/bla 

Wed Apr  7 13:29:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Hrmpfh. Fix normalize dir example.  

Wed Apr  7 13:04:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Describe the dir nomalization loop. Simplify ending logic.  

Wed Apr  7 12:50:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	A little simplification and optimization. Move end_of_dir() check
	inside loop so we don't do it both in the loop invariant? and after
	it.  

Wed Apr  7 12:46:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Rewrite the direcory normalization loop without use of gotos. Fixes
	bug reported by lindi- and zas.  

Tue Apr  6 12:29:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix bug triggered on FreeBSD. Safeguarding against passing the wrong
	URI string to normalize_uri() by simplifying noparse macro.  

Tue Apr  6 11:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	This should fix bug 434 another sf download using document
	refreshing related thing. At least downloading w3m no longer spawns
	an extra type query box.  

Tue Apr  6 10:35:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Revert buggy insert_in_string() usage in form fields and areas.  

Tue Apr  6 09:50:42 2004  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Assert add_to_string_list() and free_string_list() parameters.  

Tue Apr  6 09:36:10 2004  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Redundant test was removed: free_string_list() checks for empty
	list.  

Tue Apr  6 07:59:48 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/dump/dump.c:

	elinks -dump did not finish.  

Tue Apr  6 07:46:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/dump/dump.c:

	Fix for bug 433 (unknown protocol or bad uri with -dump).  

Tue Apr  6 07:07:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix directory normalization bug by handling // used by
	translate_file_url().  

Tue Apr  6 07:04:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	First part of directory normalization loop sanification.  

Tue Apr  6 01:35:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Fix leak.  

Tue Apr  6 01:34:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Rename translate_directories() to normalize_uri() since it now does
	more work. Macros are used for controlling whether to reparse or
	not. I am aware that directory translation is currently broken and
	intent to rewrite it in a sane way ASAP.  

Tue Apr  6 01:20:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	m33p.  

Tue Apr  6 01:20:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Use insert_in_string() for text fields and areas.  

Tue Apr  6 01:13:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_url(): Make @expanded the new URI string as soon as
	possible to simplyfy.  

Tue Apr  6 01:08:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix some strange double free error.  

Tue Apr  6 00:30:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, util/string.c, util/string.h:

	Rename insert_in_uri()  to insert_in_string() and move to string
	utils.  

Tue Apr  6 00:08:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	translate_directories(): Always pass URI struct as argument and
	instead use uristring arg to signal whether to reparse.  

Mon Apr  5 17:41:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header. part
	3.  

Mon Apr  5 17:38:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header. part
	2 

Mon Apr  5 17:35:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	http_send_header(): Don't modify the URI. Should hopefully fix bug
	with webmail posting that rely on getting content-type header.  

Mon Apr  5 16:58:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, sched/connection.c:

	Disallow NULL args to get_uri_reference().  

Mon Apr  5 16:06:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	init_connection(): Assert that proxied_uri is not PROTOCOL_PROXY.  

Mon Apr  5 10:02:40 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Apr  5 05:35:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Shorten code by returning uristring from translate_directories().  

Mon Apr  5 05:31:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	join_urls(): Use uri_errno switch.  

Mon Apr  5 05:22:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	A few assertions.  

Mon Apr  5 05:18:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Try to optimize away some of the calls to parse_uri() by making it
	possible to hand an already parse URI to translate_directories().  

Mon Apr  5 05:06:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Pass uri struct to translate_file_url().  

Mon Apr  5 04:57:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup translate_file_url() by using insert_in_uri().  

Mon Apr  5 04:44:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Move up insert_in_uri().  

Mon Apr  5 04:33:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup transform_file_url() calling.  

Mon Apr  5 04:27:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	All that inlining is no good.  

Mon Apr  5 03:33:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Scary stuff. Complete (eek!) rewrite (Eek!) of translate_url()
	(EEK!). It now goto-loops (ehm since using a while loop would indent
	things too much? ;) a parse_uri() call + switch (the returned
	uri_errno) saving the previous uri_errno to check that progress is
	actually being made. The core part of translate_url() that figures
	out how to handle URIs without protocols is only changed to make use
	of new allocation scheme. Lots of duplicate code is removed and now
	even I can understanding what it does.  

Mon Apr  5 01:17:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, util/conv.h:

	Add support for case insensitive protocol and hostnames in the URI
	cache. It should be pretty cheap meaning no additional allocation
	needed. The basic idea is to ``prepare'' all URI strings before they
	are handed to get_uri().  
	
	It abuses that all URI composing ends up in translate_directories()
	which already mangles the string and now also lowercases the
	protocol and hostname part of the URI. The remaining part is that
	get_protocol() has been changed to use case insensitive comparing
	against known protocol names and get_user_program() will do an
	option lookup using the lowercased protocol name.  Strings handed to
	get_uri() is sanity checked before the URI is returned.  

Sun Apr  4 22:30:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c, protocol/uri.h:

	Make parse_uri() return new uri_errno that will hopefully make
	translate_url() more efficient by pinpointing the error.  

Sun Apr  4 22:00:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	object_nolock() cached URIs.  

Sun Apr  4 22:00:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix bad URI reference taking in -dump redirects. Thanks to lindi-.  

Sun Apr  4 20:51:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix bug introduced in the struct uri introduction in translate_url()
	when it lived in src/protocol/url.c, revision 1.89->1.90 change.  

Sun Apr  4 17:42:01 2004  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Compilation fix: @url -> @uri in maybe_pre_format_html().  

Sun Apr  4 17:31:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Make add_uri_to_string() only add slash after host if URI_DATA or
	URI_POST was specified. This makes it possible to use it instead of
	add_uri_host_to_string() in the HTTP code. I hope the it's not a
	security problem sending the real protocol string of the referrer.  

Sun Apr  4 17:04:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix bug in ses_goto() TASK_IMGMAP case where the new
	ses->goto_position would be point to free()d memory. Instead
	ses_goto() now allocates it.s own position pointer.  

Sun Apr  4 16:38:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	destroy_vs(): Takes care of free()ing the goto_position member.  

Sun Apr  4 16:26:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Cleanup and remove dead code.  

Sun Apr  4 16:05:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More sanity checking before requesting frame.  

Sun Apr  4 16:02:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Check length of URI string before + assert() string. Reported by
	lindi-.  

Sun Apr  4 07:40:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	I mean now cleanup and fix leak in get_uri_string().  

Sun Apr  4 07:34:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup get_uri_port().  

Sun Apr  4 07:19:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup get_protocol_length().  

Sun Apr  4 06:15:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Move extract_fragment() up and static inline it.  

Sun Apr  4 06:12:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/session.c:

	Turn get_translated_uri() into a Swiss army knife that can also just
	extract fragment and return URI from cache.  

Sun Apr  4 05:55:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/task.c,
	viewer/dump/dump.c, viewer/text/view.c:

	Introduce get_translated_uri() which get_uri() from translate_url()s
	and possibly extract_fragment().  

Sun Apr  4 05:22:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Like for the cache entry store both (proxy) uri and proxied uri for
	connections. The new member is named proxied_uri. It should
	hopefully not cost more than an extra reference and it simplifies
	the HTTP code a bit.  

Sun Apr  4 04:49:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Optimize the common case where there is no fragment in the requested
	frame uri.  

Sun Apr  4 04:44:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/html/frames.c,
	document/html/frames.h, sched/session.c:

	Make the frame description struct reference an URI.  

Sun Apr  4 04:28:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Cleanup useless test if protocol is invalid. It can
	never be at this point.  

Sun Apr  4 04:24:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	parse_uri(): Cleanup. get_protocol_end() is now
	get_protocol_length() to save lines.  

Sun Apr  4 04:15:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, uri.c, uri.h:

	Cleanup the uri <-> protocol interface. Since the uri parsing is the
	only user of known_protocol() it allows us to make the URI parser
	figure out the protocol part first and then query whether it is a
	known protocol. And then why not rename known_protocol() to
	get_protocol().  

Sun Apr  4 03:51:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Fix leading spaces.  

Sun Apr  4 03:46:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, protocol/uri.c, protocol/uri.h,
	sched/download.c:

	add_string_uri_filename_to_string() -> add_uri_filename_to_string()
	and take URI arg.  

Sun Apr  4 03:41:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/download.c,
	viewer/text/view.c:

	query_file(): Take URI as arg.  

Sun Apr  4 03:37:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Rename ses->dn_url to ses->download_uri and make it an URI struct
	pointer.  

Sun Apr  4 03:18:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix last patch.  

Sun Apr  4 03:15:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	download_link(): Change code layout.  

Sun Apr  4 03:09:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/conv.c, util/conv.h, viewer/text/view.c:

	I hope this is correct. send_open_in_new_window() now adds
	-base-session and -session-ring args to the parameter string.
	encode_shell_safe_url() renamed to add_encoded_shell_safe_url() and
	now works directly on the parameter string it gets passed.  

Sun Apr  4 02:56:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_in_new_window(): Change code layout.  

Sun Apr  4 02:50:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_in_new_window(): Same as for send_open_new_window(). Do
	not use ses->dn_url to store parameters. The new elinks instance
	will request the URI we could ofcourse preload it already but that
	is not the case anyway but added as a possible TODO.  

Sun Apr  4 02:44:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Introduce init_session_info_string() to initialize string and add
	-base-session and -session-ring parameters to it.  

Sun Apr  4 02:34:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_new_window(): dn_url -> parameters.  

Sun Apr  4 02:31:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_open_new_window(): Hmm puzzling why we assign the parameters of
	the new elinks instance to ses->dn_url. It makes no sense and let.s
	see what will happen if we simply remove that. The only sane usage
	of dn_url is for query_file() calls as a way to keep the string
	around for possible callbacks.  

Sun Apr  4 02:07:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Unify error handling.  

Sun Apr  4 01:48:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, sched/connection.h, sched/error.c:

	We might as well use the print_error_dialog() function for the
	javascript-not-supported popup.  

Sun Apr  4 01:40:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	More ænglish? 

Sun Apr  4 01:40:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.h, download.c, error.c, session.c,
	session.h, task.c:

	Introduce S_UNKNOWN_PROTOCOL and use it to substitute
	print_unknown_protocol_dialog() with print_error_dialog(..,
	S_UNKNOWN_PROTOCOL, ..).  

Sun Apr  4 01:26:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, sched/task.c,
	viewer/text/view.c:

	Simplify the error dialog interface so only the state and priority
	needs to be passed. If retry should be supported an additional URI
	arg can be passed as well.  

Sat Apr  3 20:26:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Fix redirect comparison.  

Sat Apr  3 17:42:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/object.h:

	Make lock debug output more human readable.  

Sat Apr  3 17:40:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	cache/cache.c, cache/cache.h, cache/dialogs.c, config/options.h,
	cookies/cookies.c, cookies/cookies.h, document/document.c,
	document/document.h, formhist/formhist.c, formhist/formhist.h,
	globhist/globhist.c, globhist/globhist.h, protocol/uri.c,
	protocol/uri.h, sched/download.c, sched/download.h, util/object.h:

	Improve object refcount debugging by introducing an object struct
	that holds the counter and if debugging is enabled also the type
	name of the object.  

Sat Apr  3 14:54:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Indentation fixes.  

Sat Apr  3 14:51:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Maintain the proxy URI in the cache entry. It should not cost
	anything but a reference and a little extra when deleting but cleans
	and speeds ups things quite nicely.  

Sat Apr  3 14:32:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/finger.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	protocol/smb/smb.c, sched/connection.c, sched/connection.h,
	sched/download.c, sched/history.c, sched/session.c, sched/task.c,
	viewer/dump/dump.c:

	Rename download->ce to download->cached and connection->cache to
	conneciton->cached.  

Sat Apr  3 14:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/status.c, document/document.c,
	document/document.h, document/renderer.c, document/css/css.c,
	document/html/frames.c, document/html/renderer.c,
	document/html/renderer.h, document/plain/renderer.c,
	document/plain/renderer.h, lowlevel/select.c, protocol/finger.c,
	protocol/file/file.c, sched/connection.c, sched/download.c,
	sched/session.c, sched/task.c, scripting/lua/core.c,
	viewer/dump/dump.c:

	Re-rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:51:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Re-rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:49:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	Rename-rename cache entry variables to cached to improve
	grepability.  

Sat Apr  3 13:41:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, session.c, session.h:

	Rename cache entry variables to cached to improve grepability.  

Sat Apr  3 13:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:29:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/dump/dump.c, scripting/lua/core.c, sched/task.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:25:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/select.c, protocol/finger.c, sched/connection.c,
	sched/download.c, sched/download.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:14:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: html/renderer.c, html/renderer.h, document.c,
	html/renderer.c, plain/renderer.c, plain/renderer.h:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:10:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/dialogs.c, dialogs/document.c,
	document/html/frames.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 13:08:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Rename cache -> cache_entries.  

Sat Apr  3 13:06:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Rename cache entry variables to cache to improve grepability.  

Sat Apr  3 12:58:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/conf.c:

	Fix assertion failure when trying to save config file an -no-home
	was specified.  

Sat Apr  3 12:33:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, document/html/renderer.c, sched/download.c,
	sched/session.c, sched/task.c, viewer/dump/dump.c:

	get_cache_uri_struct() is more used so rename it to get_cache_uri()
	which is then renamed to get_cache_uri_string().  

Sat Apr  3 12:20:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: cache.c, cache.h:

	redirect_cache(): Return URI being redirected to and document it.  

Sat Apr  3 12:11:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Fix assertion failure reported by Stephen Stocker.  

Sat Apr  3 07:43:23 2004  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Compilation fix: return 0 instead of NULL pointer.  

Sat Apr  3 03:06:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Whoopsy .. missing part of last patch.  

Sat Apr  3 03:04:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Make ses_goto() take its own URI reference.  

Sat Apr  3 02:24:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Removing an assertion that is clearly useless.  

Sat Apr  3 02:21:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/frames.c,
	sched/download.c, sched/task.c, viewer/dump/dump.c:

	Make cache_entry->redirect point to an URI struct. This nicely
	cleans things up.  

Sat Apr  3 02:11:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/http/http.c:

	Change cache redirecting to resolve the URI being redirected to at
	the redirection time meaning either when the HTTP Location header is
	handled or when appending "/" to the directory path. Hopefully it is
	clear from the patch that it is just the body of
	get_cache_redirect_uri() that has been hacked a bit to behave.  

Sat Apr  3 01:35:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/frames.c,
	sched/download.c, sched/task.c, viewer/dump/dump.c:

	Always resolve redirects relative to the cache entry. Assertions
	added to see if this is not always the case .. well anyway next
	patch (that will be quite a treat) will make it all more clear I
	hope. ;-) 

Sat Apr  3 01:22:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/smb/smb.c:

	Redo the cache redirection interface to be more generic. Now it is
	all relative to the cache entry which makes sense because the
	connection uri is used anyway for creating the cache entry.  

Sat Apr  3 00:13:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_additional_file(): URI can never be invalid so remove that
	test.  

Sat Apr  3 00:10:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	request_additional_file(): Take URI arg.  

Fri Apr  2 23:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, sched/session.c, sched/session.h,
	sched/task.c:

	ses_change_frame_url(): Rename to ses_change_frame_url() and take
	URI struct arg.  

Fri Apr  2 23:43:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	format_frame(): Use the cache redirect URI facility. It should be
	more correct.  

Fri Apr  2 23:38:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Fix compile error from last patch and get rid of stupid @head
	assertions.  

Fri Apr  2 23:33:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Cleanup connection cache assignment.  

Fri Apr  2 23:30:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/smb/smb.c:

	Unify cache redirects to directories by appending /.  

Fri Apr  2 22:51:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove unused post_data_start().  

Fri Apr  2 22:48:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Remove useless post char mangling.  

Fri Apr  2 22:35:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove unparse_uri().  

Fri Apr  2 22:31:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove dead code that is getting really outdated.  

Fri Apr  2 22:27:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Oops more forgotten find_in_cache() calls this time in led land.  

Fri Apr  2 22:18:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Oops forgotten find_in_cache() call in lua land.  

Fri Apr  2 22:16:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	A little cleanup to improve readability by passing URI struct to
	rewrite_uri().  

Fri Apr  2 22:05:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Remove extract_proxy().  

Fri Apr  2 22:04:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/user.c,
	sched/task.c:

	A nicish patch that should hopefully make the last one all worth it.
	Pass URI struct to external protocol handler. Makes the job easier
	for user protocol handlers.  

Fri Apr  2 21:55:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	do_follow_url(): Cleanup protocol usage.  

Fri Apr  2 21:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Another patch which is a bit fishy but it will all make sence in a
	moment. Move URI struct registering up before anything else in in
	do_follow_url() it is hopefully also more correct since any external
	handler will be passed the translated URI with all the file://,
	http:// etc crap (or will break some user protocol settings?).  

Fri Apr  2 21:36:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Is it probably not so nice either but 'if you have said A ...'
	anyways try to make better usage of URI struct in find_in_cache().  

Fri Apr  2 21:21:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	document/document.c, document/renderer.c, document/css/css.c,
	document/html/frames.c, protocol/http/codes.c, sched/connection.c,
	sched/task.c:

	find_in_cache(): Take URI arg.  

Fri Apr  2 21:10:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	It might look stupid and pointless at this stage but once we have
	CSS cache it will be less I hope, anyway aquire URI struct in CSS
	import handler.  

Fri Apr  2 18:58:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Merge check_protocol() into known_protocol().  

Fri Apr  2 18:41:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Removing path expansion from option parsing in the client. The bug
	is else where and it works perfectly without on FreeBSD.  

Fri Apr  2 18:15:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/refresh.c, protocol/proxy.c,
	protocol/uri.c, protocol/uri.h, sched/download.c, sched/session.c,
	sched/task.c, viewer/dump/dump.c:

	get_uri(): Take URI string length as arg. If -1 strlen() will be
	used.  

Fri Apr  2 18:07:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Oops. Forgotten get_cache_entry(struri(..)) call.  

Fri Apr  2 18:03:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Describe the URI cache interface.  

Fri Apr  2 17:58:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, protocol/uri.h:

	get_cache_entry(): Make proper use of URI struct arg by calling new
	macro get_proxied_uri().  

Fri Apr  2 17:45:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	protocol/finger.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/codes.c, protocol/http/http.c:

	get_cache_entry(): Take URI arg.  

Fri Apr  2 17:30:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, protocol/uri.c, protocol/uri.h,
	protocol/http/http.c, sched/download.c:

	get_extension_from_url(): Rename to get_extension_from_uri() and
	take URI arg. Also we now start searching for the extension at the
	uri->data position.  

Fri Apr  2 17:17:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	get_content_type(): Take URI arg.  

Fri Apr  2 17:13:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	get_temp_name(): Take URI arg.  

Fri Apr  2 16:58:03 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Check range of port, and let display an invalid syntax error message
	if provided one is out of range.  

Fri Apr  2 16:53:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.c, task.c, task.h:

	ses_goto(): Take URI struct as arg.  

Fri Apr  2 16:50:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	A few fixes of accessing free()d memory and useless checking.  

Fri Apr  2 16:39:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Oops .. fix return value.  

Fri Apr  2 16:38:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	A little preparing.  

Fri Apr  2 16:35:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Return URI struct.  

Fri Apr  2 16:16:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Add TODO about lowercasing scheme and hostname part in the URI
	cache.  

Fri Apr  2 15:03:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: refresh.c, refresh.h:

	Use URI struct for document refreshing.  

Fri Apr  2 07:27:00 2004  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, document/html/tables.c,
	scripting/perl/hooks.c, terminal/kbd.c, viewer/dump/dump.c:

	Trailing spaces fixes.  

Thu Apr  1 18:34:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/proxy.c, protocol/proxy.h, sched/connection.c:

	Make get_proxy() return URI struct. Move proxy_uri validation to
	load_uri() and thus closer to the let-me-get-the-hell-out-of-here
	handler. Fix a few possible leaks in the error paths.  

Thu Apr  1 17:13:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Make the task struct use URIs.  

Thu Apr  1 16:42:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/task.c, viewer/dump/dump.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Pass URI struct to init_vs() so it can never fail.  

Thu Apr  1 16:31:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Cleanup.  

Thu Apr  1 16:21:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Cleanup dead code.  

Thu Apr  1 16:19:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless allocation.  

Thu Apr  1 16:01:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	More crazy stuff.  

Thu Apr  1 15:59:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/location.h, sched/session.c,
	sched/session.h, sched/task.c, viewer/dump/dump.c,
	viewer/text/marks.c, viewer/text/vs.c, viewer/text/vs.h:

	Blast vs.url and vs.url_len and flush out all the crazy code that
	made it work.  

Thu Apr  1 15:45:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Improve zas' fix and just allow current_url to be NULL if we are
	lost.  

Thu Apr  1 15:29:38 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/rewrite/rewrite.c:

	Use have_location() to prevent segfault in goto_url_hook().  

Thu Apr  1 15:05:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Muddle up.  

Thu Apr  1 14:56:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/core.c,
	scripting/lua/hooks.c, scripting/perl/hooks.c, viewer/text/view.c:

	XPUSHs(sv_2mortal(newSVpvn(struri(cur_loc(ses)->vs.uri),
	strlen(struri(cur_loc(ses)->vs.uri))))); 

Thu Apr  1 14:45:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/rewrite/rewrite.c,
	sched/history.c:

	Convert a few vs.url to struri(vs.uri).  

Thu Apr  1 14:44:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, plain/renderer.c:

	If no document title set it to the current URI.  

Thu Apr  1 14:35:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, document/html/frames.c,
	scripting/guile/core.c, viewer/text/view.c:

	Convert all vs->url to struri(vs->uri).  

Thu Apr  1 07:56:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/proxy.c:

	Cleanup.  

Thu Apr  1 07:53:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Pass URI struct to get_proxy().  

Thu Apr  1 06:22:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: proxy.c, proxy.h:

	get_proxy() and friends using URI structs.  

Thu Apr  1 06:08:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	ALittleCleanup.  

Thu Apr  1 06:06:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, sched/task.c, viewer/dump/dump.c:

	load_url() -> load_uri() and take URI struct as arg.  

Thu Apr  1 05:57:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Compile fixes. Thanks to Zardoz.  

Thu Apr  1 05:18:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Translate real_url to an URI struct.  

Thu Apr  1 05:09:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass vs->uri to get_cached_document() and init_document().  

Thu Apr  1 05:03:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, scripting/lua/core.c:

	Tune a few view state URI composing.  

Thu Apr  1 05:02:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, viewer/text/view.c:

	View state comparing optimizations.  

Thu Apr  1 05:01:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/vs.c, viewer/text/vs.h, sched/session.c:

	Add URI struct member to view_state.  

Thu Apr  1 04:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, protocol/ftp/ftp.c, protocol/smb/smb.c:

	More get_uri_string() usage.  

Thu Apr  1 04:09:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Rename http_error_info->url to ->uri and change to point to an URI
	struct.  

Thu Apr  1 03:56:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	No good patch.  

Thu Apr  1 03:22:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix the leak introduced in file:/// fallback for non existing files
	fix.  

Thu Apr  1 02:59:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Take URI struct.  

Thu Apr  1 02:48:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h, sched/task.c:

	Change session->loading_uri to point to an URI struct.  

Thu Apr  1 01:51:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup return type checking.  

Thu Apr  1 01:47:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	type_query->url -> type_query->uri 

Thu Apr  1 01:30:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	type_query->url -> type_query->uri 

Thu Apr  1 01:25:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Change file_to_load->uri to point to an URI struct.  

Thu Apr  1 01:20:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	file_to_load->url -> file_to_load->uri 

Thu Apr  1 01:09:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h, sched/task.c:

	session->loading_url -> session->loading_uri 

Thu Apr  1 01:01:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/download.c,
	sched/task.c, viewer/dump/dump.c:

	get_cache_redirect_uri(): Generalized redirect URI composer.  

Thu Apr  1 00:37:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Change file_download->uri to point to an URI struct. BTW there seem
	to have sneaked in a leak when aborting downloads. Well well 

Thu Apr  1 00:13:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	file_download->url -> file_download->uri 

Thu Apr  1 00:09:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/file/cgi.c:

	get_no_post_url() -> get_uri_string(..., ~URI_POST) 

Wed Mar 31 23:47:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Change connection referrer to point to an URI struct.  

Wed Mar 31 23:40:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_uri_reference(): Be lazy and handle NULL URIs too.  

Wed Mar 31 23:38:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	connection->ref_url -> connection->referrer 

Wed Mar 31 23:33:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, viewer/dump/dump.c:

	load_url(): Take referrer as URI struct.  

Wed Mar 31 23:32:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: session.c, session.h:

	Change session referrer to point to an URI struct.  

Wed Mar 31 23:17:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, session.c, session.h, task.c:

	session->ref_url -> session->referrer 

Wed Mar 31 22:42:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/session.h, sched/task.c:

	Use URI cache for documents. set_session_referrer() now takes URI
	struct.  

Wed Mar 31 22:39:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.h:

	Add macro to get the cache entry URI struct.  

Wed Mar 31 22:00:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/task.c, viewer/text/view.c:

	document->url -> document->uri 

Wed Mar 31 21:50:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	get_uri_reference(): Returned the locked URI.  

Wed Mar 31 20:31:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	lowlevel/connect.c, protocol/finger.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	protocol/smb/smb.c, sched/connection.c, sched/connection.h,
	sched/session.c:

	Make the connection struct use the URI cache. Make struri() take URI
	pointer.  

Wed Mar 31 20:29:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, document/renderer.c,
	protocol/http/codes.c, sched/task.c:

	Fix URI utility includes.  

Wed Mar 31 16:53:54 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Assert parameters in get_uri_cache_entry(), safer for now, imho.  

Wed Mar 31 16:47:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	protocol/uri.c, protocol/uri.h, viewer/dump/dump.c:

	Reintroduce the URI cache. Used for cache entries only.  

Wed Mar 31 00:11:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, src/scripting/lua/core.c:

	Test file existence to avoid Lua error reporting (under version
	5.x).  Fixes debian bug #231760 ('dbug 231760' using URI rewrite).  
	Patch by Kevin B. McCarty. Untested.  

Tue Mar 30 23:05:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	set_referrer(): Move to C file and rename to set_session_referrer().  

Tue Mar 30 15:42:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	detach_formatted(): Use free_link().  

Tue Mar 30 10:14:49 2004  Laurent Monin <zas@norz.org>:

	* test/underline.html:

	Underline tests.  

Tue Mar 30 00:50:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	We don.t support string escape seqs, yet.  

Tue Mar 30 00:47:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Temporary fix for inf. loop reported by pasky.  

Tue Mar 30 00:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Make background property value parsing loop look more sane.  

Tue Mar 30 00:22:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	More garbage. You can thank pasky for this.  

Tue Mar 30 00:10:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Simplify/optimize token skipping.  

Tue Mar 30 00:10:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix typo.  

Mon Mar 29 23:03:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	In translate_url(), if file_exists() returns false setting not_file
	to true is a bad assumption since @prefix is not changed which again
	causes any URI that is not recognized as being some other protocol
	to fallback to file:///.  Changing the @prefix is also not good
	since it gives the error message "Bad URI syntax". Leaving it like
	this will give a "No such file or directory" error.  Was introduced
	in 1.83 -> 1.84. A potential memleak of expanded is still there but
	I can.t figure this messy function.  
	
	Thanks to lindi- for helping to debug this thing. ;) 

Mon Mar 29 17:42:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Expand relative filenames in the client so they will always work
	when handled in the master. Idea by lindi-.  

Sun Mar 28 19:01:48 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/file/file.c:

	Fix: do not show .. for / directory.  

Sun Mar 28 18:37:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	One more use for table_frames stuff.  

Sun Mar 28 18:29:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use bitfields in struct table_frames.  

Sun Mar 28 18:25:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	@tf -> @table_frames.  

Sun Mar 28 18:23:31 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Assert @result too in get_table_frames().  

Sun Mar 28 18:21:39 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Struct table_frames was introduced, it helps to get frames info from
	table frame fields through new get_table_frames() function.  

Sun Mar 28 18:00:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor code cleanup.  

Sun Mar 28 17:58:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Table frames related calculations cleanup.  

Sun Mar 28 17:48:47 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Unwanted background color appearing at left of tables was fixed (bug
	398). Patch by Jonas.  

Sat Mar 27 16:31:21 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/hierbox.c:

	Brainless workaround for bug 397. Real fix is needed.  

Fri Mar 26 18:15:02 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Minor tidyup. A useless FIXME was removed.  

Fri Mar 26 18:05:45 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Do not call safe_hard_write() if there is no byte to write.  

Fri Mar 26 17:56:53 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Label fr was renamed free_and_return.  

Fri Mar 26 17:55:50 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Fix wrong #include: kbd.c -> kdb.h.  

Fri Mar 26 17:49:52 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	@c -> @bytes_read 

Fri Mar 26 17:46:10 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	RD() macro was moved near the place where it is used.  

Fri Mar 26 17:42:05 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Code redundancy was slightly reduced by introducing
	safe_hard_write().  

Thu Mar 25 17:34:59 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	A lot of bconds. Added hooks.pl.  

Thu Mar 25 17:33:57 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/: Makefile.am, perl/.cvsignore, perl/hooks.pl:

	Stubs for perl scripting engine.  

Wed Mar 24 19:35:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Revert wrong encoding optimization. I must be getting out of shape.  

Wed Mar 24 15:10:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Minor optimization of file encoding guessing.  

Tue Mar 23 20:44:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	ses_forward(): A little clarity and optimization of why we lower
	bound the URL length of the created location.  

Tue Mar 23 20:33:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/cache.c:

	Tidyup.  

Tue Mar 23 13:50:54 2004  Laurent Monin <zas@norz.org>:

	* test/tablebg.html:

	Table bgcolor test.  

Mon Mar 22 14:35:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	cookies/cookies.c, dialogs/document.c, dialogs/download.c,
	dialogs/menu.c, dialogs/status.c, document/document.c,
	document/document.h, document/refresh.c, document/renderer.c,
	document/html/frames.c, document/plain/renderer.c,
	lowlevel/connect.c, mime/mime.c, mime/mime.h, protocol/finger.c,
	protocol/uri.c, protocol/uri.h, protocol/user.c,
	protocol/auth/auth.c, protocol/file/cgi.c, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/http/blacklist.c,
	protocol/http/blacklist.h, protocol/http/codes.c,
	protocol/http/http.c, protocol/rewrite/rewrite.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/history.c, sched/location.c,
	sched/location.h, sched/session.c, sched/session.h, sched/task.c,
	util/string.h, viewer/dump/dump.c, viewer/text/marks.c,
	viewer/text/view.c, viewer/text/vs.c, viewer/text/vs.h:

	Revert the lot of struct uri changes. Pasky warned me that it
	sounded scary and the very first bug report plus the fact that it
	was all made in a proof of concept manner was too convincing. We
	should still persue the idea tho' because they rock.  

Mon Mar 22 04:51:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass URI directly to init_document() to avoid error handling.  

Mon Mar 22 04:32:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	done_uri(): Optimize to only lookup in the map when releasing URIs.  

Mon Mar 22 04:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Use URI struct for http error code handling.  

Mon Mar 22 04:03:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/session.c, sched/task.c,
	viewer/text/marks.c:

	Cleanup and don't allocate extra memory for the URI string.  

Mon Mar 22 04:00:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Oops clear local view state variable.  

Mon Mar 22 03:59:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: location.h, session.h:

	Remove deprecated comments.  

Mon Mar 22 03:58:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Cleanup and use local view state variable.  

Mon Mar 22 03:47:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, document/renderer.c,
	document/html/frames.c, sched/location.h, sched/session.c,
	sched/task.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Use struct URI for view states. Removing lots of dangerous code and
	simplifying things.  

Mon Mar 22 03:23:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/rewrite/rewrite.c,
	sched/history.c, sched/location.h, sched/session.c, sched/task.c:

	Use get_location_url() macro when dealing with view states.  

Mon Mar 22 03:01:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/renderer.c,
	document/html/frames.c, viewer/text/vs.h:

	Use get_vs_cache_entry() macro when dealing with view states.  

Mon Mar 22 02:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/location.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/marks.c:

	Getting ready for a hostile take over. Use mem_calloc() when dealing
	with view states.  

Mon Mar 22 02:44:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Tidy up.  

Mon Mar 22 02:43:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, viewer/text/view.c,
	viewer/text/vs.h:

	get_vs_url_copy(): Wrap the world.  

Mon Mar 22 01:18:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, protocol/uri.c, protocol/uri.h,
	protocol/http/http.c, sched/download.c:

	get_extension_from_url(): Take struct URI and rename to
	get_uri_extension().  

Mon Mar 22 01:08:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	Pass URI to get_content_type().  

Mon Mar 22 01:04:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Use struct URI for type queries.  

Sun Mar 21 23:55:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file/cgi.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/session.c, sched/session.h, sched/task.c, viewer/dump/dump.c:

	Change both session->ref_url and connection->ref_url to use URI
	struct and rename to referrer.  

Sun Mar 21 23:26:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use URI for file_to_load struct.  

Sun Mar 21 23:18:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Use URI for file downloads.  

Sun Mar 21 22:57:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/renderer.c, document/plain/renderer.c,
	protocol/file/cgi.c:

	With the handy URI struct we can use get_uri_string() instead of
	get_no_post_url().  

Sun Mar 21 22:48:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Only maintain URI cache reference counter over the number of entries
	in the cache so it will be easier to reference URIs from outside.  

Sun Mar 21 22:43:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	set_session_referrer(): Take URI struct.  

Sun Mar 21 22:26:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	sched/task.c, viewer/text/view.c:

	Move set_referrer() to .c file and rename it to
	set_session_referrer().  

Sun Mar 21 16:30:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, document/document.c, document/document.h,
	document/refresh.c, document/renderer.c, document/plain/renderer.c,
	sched/session.c, sched/task.c, viewer/text/view.c:

	Add real URI to the document struct.  

Sun Mar 21 16:16:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Move URI refcounting to the URI struct.  

Sun Mar 21 15:58:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	lowlevel/connect.c, protocol/finger.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/file/cgi.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/session.c:

	Use URI cache for connection->uri. A lot of
	s/conn->uri\./conn->uri->/. We now always free the get_proxy() URI
	when initializing a connection.  

Sun Mar 21 15:39:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, document/plain/renderer.c,
	protocol/uri.c, protocol/uri.h, protocol/file/cgi.c,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/session.c:

	Last more or less trivial users of the URI data string. Blast old
	data string members. Boooooring. But now the fun can begin. :) 

Sun Mar 21 15:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Use the URI data string for the HTTP protocol stuff.  

Sun Mar 21 15:23:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Use the URI data string for the cookie stuff. Plus little cleanup.
	Eek 

Sun Mar 21 15:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/: cgi.c, file.c:

	Use the URI data string for the file protocol stuff.  

Sun Mar 21 15:08:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Use the URI data string for the user protocol stuff.  

Sun Mar 21 14:59:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add URI data string struct and use internally in URI land.  

Sun Mar 21 14:41:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Don't search for POST_CHAR that is the job of parse_uri().  

Sun Mar 21 14:30:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, protocol/file/cgi.c, protocol/file/file.c,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/session.c:

	uri->data -> uri->datastr 

Sun Mar 21 13:39:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	protocol/uri.c, protocol/uri.h, viewer/dump/dump.c:

	Introducing an URI cache.  

Sun Mar 21 02:22:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Blast old URI host nonstrings.  

Sun Mar 21 02:21:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c:

	Convert last users in connection land to use URI host string.  

Sun Mar 21 02:21:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Convert last users in cookie land to use URI host string.  

Sun Mar 21 02:10:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use the URI host string for the host connection stuff.  

Sun Mar 21 02:04:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	is_in_domain(): Take server as string struct.  

Sun Mar 21 01:56:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	check_domain_security(): Take server as string struct.  

Sun Mar 21 01:49:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More URI host string trivial usage.  

Sun Mar 21 01:45:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.h:

	Use URI host string.  

Sun Mar 21 01:41:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	add_uri_to_string(): Use host string.  

Sun Mar 21 01:39:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/connect.c:

	Bleh.  

Sun Mar 21 01:37:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: blacklist.c, blacklist.h, http.c:

	Change the blacklist interface to use host strings.  

Sun Mar 21 01:31:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make the URI host string usable.  

Sun Mar 21 00:32:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Cleanup subst_cmd() by unifying adding of shell safe chars.  

Sun Mar 21 00:21:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, user.c, http/http.c:

	Store URI port info in a string struct.  

Sun Mar 21 00:04:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Add ipv6 member to struct uri.  

Sat Mar 20 23:53:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, http/http.c:

	Remove add_uri_host_to_string() and make it possible to use
	add_uri_to_string() instead.  

Sat Mar 20 23:35:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.h, protocol/user.c, sched/connection.c:

	A little cleanup of the URI host sequence capturing.  

Sat Mar 20 21:01:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, lowlevel/connect.c, protocol/uri.c,
	protocol/uri.h, protocol/user.c, protocol/http/http.c,
	sched/connection.c:

	uri->host -> uri->hoststr 

Sat Mar 20 21:01:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	More (yet unused) utils.  

Sat Mar 20 18:55:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, auth/auth.c, ftp/ftp.c:

	Store protocol password info in a string struct.  

Sat Mar 20 18:32:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/uri.c, protocol/uri.h,
	protocol/user.c, protocol/auth/auth.c, protocol/ftp/ftp.c,
	sched/connection.c, util/string.h:

	Store protocol user info in a string struct. Add a few handy string
	struct macros.  

Sat Mar 20 14:39:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Check end pointer when using strto[u]l() to parse frame dimensions.
	Idea by Christian Haggstrom <c00chm@cs.umu.se> 

Fri Mar 19 16:10:20 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.base:

	Polished and fixed grammar.  

Fri Mar 19 08:45:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Fix non portable use of strtoul() that caused frames not to be
	rendered. Reported by Daniel E. Macks <dmacks@netspace.org> 

Wed Mar 17 09:08:22 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A segfault occuring while navigating through main menu was fixed
	(bug 394). It was a missing break statement.  

Tue Mar 16 15:38:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Only restore the previous listbox context when there are any boxes
	and thus the restore sanity checking will run. Fixes bug 391 -
	assertion failure when reopening download manager.  

Tue Mar 16 09:14:39 2004  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	Take care of - char that may indicate a command line option, patch
	by Solar Designer.  

Sun Mar 14 06:22:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/dialogs.c:

	Removed draw_cookie. Set cookie->box_item->text instead.  

Sat Mar 13 17:57:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	IFrame-like handling for the <applet> tag (show alt and link to
	code).  

Sat Mar 13 17:27:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/: garbage.html, styletags.html:

	A few test cases.  

Sat Mar 13 15:17:03 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/dialogs.c:

	Block auth dialog after all memory allocation tests, safer.  

Sat Mar 13 15:12:23 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/auth/dialogs.c:

	Auth dialog layout was improved a bit by using floating labels, and
	a workaround for bug 392 was provided, by using maximum width for
	dialog.  

Fri Mar 12 10:13:28 2004  Laurent Monin <zas@norz.org>:

	* NEWS:

	NEWS update: cookies creation and modification 

Thu Mar 11 13:54:09 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/dialogs.c:

	Tidy up.  

Thu Mar 11 13:43:09 2004  Laurent Monin <zas@norz.org>:

	* src/cookies/dialogs.c:

	Do proper check for expires and secure cookies values using
	strtol().  

Thu Mar 11 04:44:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Possibility adding new cookies, but only for "old" servers.  
	Introduced listbox draw op: draw_cookie.  

Tue Mar  9 17:44:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/cookies/dialogs.c:

	New feature: editing cookies.  

Tue Mar  9 15:24:46 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bookmarks/backend/default.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	util/file.c, util/file.h:

	Get rid of weird/useless safe_fgets(), just use fgets().  

Tue Mar  9 15:05:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Add note about broken text alignment in CSS apllier.  

Tue Mar  9 14:09:13 2004  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor tidy up.  

Tue Mar  9 12:24:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/elinks.h, src/bfu/hotkey.c,
	src/bfu/menu.c, src/cache/dialogs.c, src/config/options.c,
	src/config/options.h, src/dialogs/menu.c, src/document/document.c,
	src/modules/version.c, src/osdep/stub.h,
	src/protocol/rewrite/rewrite.c, src/sched/connection.c,
	src/util/error.c, src/util/error.h, src/util/lists.h,
	src/util/memlist.h, src/util/object.h, src/util/profile.h,
	src/util/string.h:

	DEBUG -> CONFIG_DEBUG .. it seems that perl is a namespace polluter
	.. like we didn't know that already! ;-) 

Tue Mar  9 05:32:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Fri Mar  5 17:58:53 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/dialogs.c:

	Allow to add again previously deleted option.  

Fri Mar  5 10:41:10 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/: conf.c, options.h, options.c:

	Support for saving deleted options. Heavy use of watermarks.  
	Prevented unsetting builtin options.  

Fri Mar  5 01:05:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Summarize new stuff for those too lazy to read the ChangeLog file.
	Please help keeping it updated (although some of the entries added
	with this patch might be to unimportant?) 

Thu Mar  4 10:57:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Mar  3 18:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: view.c, link.c:

	Cleanup and use get_current_link().  

Wed Mar  3 18:10:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, textarea.c:

	Use get_current_link() and shorten lines.  

Wed Mar  3 18:07:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Cleanup and use get_current_link().  

Wed Mar  3 18:03:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/view.h:

	Better checking before looking up the current link.  

Wed Mar  3 17:42:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/view.h, sched/session.c:

	Introduce get_current_link() macro.  

Wed Mar  3 17:27:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, sched/session.h, scripting/lua/core.c:

	get_current_link() -> get_current_session_link().  

Wed Mar  3 17:08:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup and remove goto usage.  

Wed Mar  3 16:34:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix wrong width and height in comparison. Fixes bug 388.  

Wed Mar  3 12:00:05 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, protocol/http/http.c:

	Information how many bars is displayed by ELinks is sent in
	User-Agent header field. Note, that this information will be
	accurate for new instances only when they run with -no-connect
	option.  

Wed Mar  3 08:21:27 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* acconfig.h, configure.in:

	Missing commit.  

Tue Mar  2 17:06:15 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: Makefile.am, main.c, main.h, scripting/Makefile.am,
	scripting/scripting.c, scripting/perl/.cvsignore,
	scripting/perl/.vimrc, scripting/perl/Makefile.am,
	scripting/perl/core.c, scripting/perl/core.h,
	scripting/perl/hooks.c, scripting/perl/hooks.h:

	Support for Perl scripting. Scripts are read from file 'hooks.pl'.  
	Example hooks.pl will be available later.  

Mon Mar  1 19:17:51 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, intl/charsets.c:

	Support for System codepage.  

Sat Feb 28 06:25:18 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Spelling fixes.  

Fri Feb 27 16:22:40 2004  Laurent Monin <zas@norz.org>:

	* src/intl/: charsets.c, charsets.h:

	Make get_entity_string() static since it is only used by charsets.c
	for now.  

Fri Feb 27 11:30:15 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix: copy http_version structure contents not structure pointer. How
	did it remain unnoticed until now ? 

Fri Feb 27 11:20:08 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: http.c, http.h:

	Provide and use macros to check http version, some FIXME were added.  

Fri Feb 27 10:46:27 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor tidyup: useless goto is gone, a typo in a comment was fixed,
	minor style changes.  

Fri Feb 27 09:27:52 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Feb 27 06:18:43 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Thu Feb 26 23:47:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Select the clicked tab when the last character of the tab is
	clicked. Really this time. Quazgaa promises.  

Thu Feb 26 17:35:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Compile fix. Reported by Zardoz.  

Thu Feb 26 16:48:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Group similar action handler calling using a magic variable. Don't
	know if this kind of optimization is stupid.  

Thu Feb 26 16:12:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	terminal/tab.c, terminal/tab.h:

	Add support for moving the current tab back and forth. Requested by
	Zellner.  

Thu Feb 26 01:13:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	In display_tab_bar, increment |tab->width| if it is the last tab so
	that the space at the end of the tab bar is counted as part of the
	last tab.  

Thu Feb 26 01:02:59 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	Preparatory clean-up: In display_tab_bar, store the actual tab width
	in |actual_tab_width|.  

Thu Feb 26 00:59:39 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	Trivial clean-up: In display_tab_bar, use @tab_ses instead of
	tab->data, as the latter has previously been assigned to the former.  

Thu Feb 26 00:50:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Fix behaviour when clicking on the tab-bar: ignore clicks on
	separators, and select the correct tab when clicking on the first
	character of a tab. Thanks to Quazgaa for taking my initial attempt
	at fixing this and making it work correctly when I was too stupid.
	This fixes bug 389.  

Mon Feb 23 11:20:33 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: main.c, config/cmdline.c, config/cmdline.h:

	Fixed elinks --version.  

Sun Feb 22 13:30:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Feb 21 06:29:27 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Expand tilde first, then test if file exists.  

Fri Feb 20 16:32:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Gettextize HTTP error document.  

Fri Feb 20 16:03:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/codes.c:

	Oops fix TODOer.  

Fri Feb 20 16:01:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/: codes.c, codes.h, http.c:

	Use question_queuing to make it straight forward to i10n HTTP error
	messages. TODO: Freeing of http_error_info when freeing
	question_queue.  

Fri Feb 20 15:19:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.h, protocol/http/http.c:

	Fix do_auth_dialog() prototyping.  

Fri Feb 20 14:41:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, protocol/auth/dialogs.c,
	protocol/auth/dialogs.h, protocol/http/http.c, sched/session.c,
	sched/session.h:

	Make the question_queue more bottomhalf like taking data pointer.  

Fri Feb 20 14:24:48 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated hungarian translation.  

Fri Feb 20 10:56:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	Disable exmode by default. It is not useful bloat.  

Fri Feb 20 06:26:12 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	file_exists used instead of access.  

Thu Feb 19 20:43:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Make addrno writing/reading capable of dealing of partial
	write()s/read()s, this should fix random DNS failures on some
	systems with not-so-smooth-linux-glibc-like buffering.  

Thu Feb 19 17:48:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Be more paranoid about passing data from the async resolver.  

Thu Feb 19 15:43:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/stub.c:

	Fixed dangling 'unsigned'. Damn, people, this stuff has some given
	order ;-).  

Thu Feb 19 14:39:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: stub.c, stub.h:

	Use strictly (char *) instead of (unsigned char *) in the stubs,
	because that's how these functions are defined in the system.
	Otherwise you will run into problems like different problems in
	conditional expressions on systems not having these, like fissie
	just reported.  

Thu Feb 19 14:30:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/stub.h:

	util/stub.h -> osdep/stub.h. Happenned on Jan 28 but Jonas didn't
	commit it.  

Wed Feb 18 21:52:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Remove bogus compiler bug notice, the bug is in me.  

Wed Feb 18 21:46:22 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/document/html/tables.c:

	Prevent a crash caused by a compiler bug (?) on OS X 10.3.2/XCode
	1.1/gcc3.3, reported by Daniel Macks <dmacks@netspace.org>.  

Wed Feb 18 18:56:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Try to fix session auto saving by using ses->loading_url if
	get_current_url() fails.  

Wed Feb 18 18:46:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahead text drawing so the matched chars are properly
	highlighted.  

Wed Feb 18 14:03:10 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Feb 18 06:27:47 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	When url is without protocol use file:// if file with filename ==
	url exist.  

Tue Feb 17 19:17:36 2004  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	ETag comparaison was fixed. We now take in account weakness or
	strongness of ETags, and compare them case-sensitively, compliance
	with RFC2616 section 3.11 and 13.3.3 was improved.  

Tue Feb 17 06:03:08 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/dialogs/menu.c:

	Added "Wrap text" menu entry.  

Mon Feb 16 06:33:19 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sun Feb 15 16:35:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Feb 15 16:33:40 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	"\%u" -> "%u". Prevent i18n issues in Info box of these options.  

Sun Feb 15 12:49:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Do not decode %7E in filenames.  

Sun Feb 15 12:48:48 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, viewer/dump/dump.c:

	Added configuration options:
	document.dump.{header,footer,separator}.  

Sun Feb 15 12:14:19 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Add support for table bordercolor attribute. To keep this patch as
	simple as possible we do not honour bordercolor attributes in tr/td
	tags (yet). Table bgcolor applies to all cell borders.  

Sun Feb 15 06:57:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/main.c:

	ELinks should no connect to previous instances when act as a pager.  

Sat Feb 14 13:56:11 2004  Laurent Monin <zas@norz.org>:

	* src/util/color.inc:

	Some notes of where this color list comes from where added. It is
	unclear if there is any copyright on it. Let me know if it is the
	case. Suggested by Pasky.  

Sat Feb 14 00:53:04 2004  Laurent Monin <zas@norz.org>:

	* src/util/: color.inc, color_s.inc:

	cvs Id were added.  

Fri Feb 13 20:33:31 2004  Laurent Monin <zas@norz.org>:

	* src/util/: Makefile.am, color.c, color.inc, color_s.inc,
	fastfind.c:

	Color names <-> rgb was improved. ELinks now understands almost all
	color names, old and small color table was moved to
	src/util/color_s.inc and will be used if ELINKS_SMALL is defined,
	new extended one is in src/util/color.inc and is used by default.
	Fastfind stuff was changed to handle up to 1024 keys (needed).
	"gray" color value was changed from 0x808080 to correct 0xBEBEBE.  

Fri Feb 13 18:33:12 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Feb 13 18:08:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Feb 13 17:52:47 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, intl/charsets.c, util/color.c,
	util/fastfind.c, util/fastfind.h:

	FastFind debugging features were improved: support for a comment,
	more stats. Tidy up.  

Fri Feb 13 17:11:30 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: bfu/leds.c, config/options.inc:

	Digital clock. Enable LEDs, timer and clock to make it work.  

Fri Feb 13 08:02:47 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/cmdline.c, config/cmdline.h, main.c:

	Removed obsolete option -stdin and stuff related with single url.  

Thu Feb 12 17:51:38 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/main.c:

	From now ELinks can act as pager.  

Thu Feb 12 17:11:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, search.c:

	Fix link typeahead fixups so current links will never be under the
	input line.  

Thu Feb 12 12:00:34 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Real translation update.  

Thu Feb 12 06:52:21 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Wed Feb 11 11:44:24 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po, src/config/options.inc:

	A note about rename() on OS/2 and Win32 systems was added to
	secure_file_saving option description, french translation was
	updated.  

Wed Feb 11 11:22:21 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/util/secsave.c:

	Test for fflush() and fsync() presence, and act accordingly in
	secure_close().  

Wed Feb 11 10:19:31 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Feb 11 10:12:34 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c, config/options.c,
	lowlevel/connect.c:

	Useless spaces were trimmed.  

Wed Feb 11 09:53:31 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Compilation fix: Define _GNU_SOURCE to have strcasestr() with glibc.  

Tue Feb 10 23:40:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, viewer/dump/dump.c:

	Restore the old handling of the url list in init(). dump_pre_start()
	just steals all the url strings and manages it's own queue.  

Tue Feb 10 20:29:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.h:

	struct list_head is expanded to list_head_elinks and we need to
	include the lists.h file or it could lead to bad things.  

Tue Feb 10 20:25:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Cleanup.  

Tue Feb 10 20:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use strstr() for link typeahead matching so we don't only match from
	the start of the link text. It is a bit buggy for wrapped links
	though. Hmm.  

Tue Feb 10 19:15:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Reintroduce usage of link->name for typeahead search because it is
	so neat and it should be made to work.  

Tue Feb 10 18:45:46 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: protocol/file/file.c, osdep/osdep.c:

	Fixed reading from stdin.  

Tue Feb 10 17:17:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Trim leading spaces from the link text. Visible at the software map
	at sf.net and making it harder to link typeahead.  

Tue Feb 10 06:35:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: main.c, viewer/dump/dump.c, viewer/dump/dump.h:

	Support for many urls in dump mode.  

Mon Feb  9 12:06:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	input_line_event_handler(): Catch redraw events from the history tab
	completion so new buffer data is propagated to the line handlers.  

Mon Feb  9 11:51:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	get_unique_name(): Replace sprintf() with longcat().  

Mon Feb  9 11:33:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Cl33nup.  

Mon Feb  9 11:13:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	A little almost-spring cleaning.  

Mon Feb  9 09:29:24 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Cleanup and simplification of secure_close(), error handling was
	improved and a potential file-not-closed-on-flush-errore was fixed.  

Mon Feb  9 02:59:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inphist.c, inphist.h:

	Minor simplification to make history completion functions work on
	dialog_data so it looks a bit higher level.  

Mon Feb  9 01:41:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Minor simplification.  

Mon Feb  9 01:33:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Add input line buffer to history when cycling next and previous
	item.  

Mon Feb  9 01:25:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Fight badly written spaghetti code with gotos.  

Sun Feb  8 20:36:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Expand the switch noodling to make it easy to add handlers for other
	terminal events. Yes I know it is not properly indented the elinks
	hacking.txt way, but I think that the extra indentation is just
	plain stupid and punishes the use of switch statments.  

Sun Feb  8 20:29:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, viewer/text/search.c:

	Remove the prompt member of the input_line struct. All we need is
	the data member.  

Sun Feb  8 20:20:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Remove stupid test.  

Sun Feb  8 20:15:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Use local widget_data variable to shorten lines.  

Sun Feb  8 17:37:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	No need to allocate another cache entry header. Just use existing
	one or empty string.  

Sun Feb  8 13:55:41 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/ecmascript/.vimrc:

	file .vimrc was initially added on branch ECMASCRIPT.  

Sun Feb  8 13:55:41 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/ecmascript/.cvsignore:

	file .cvsignore was initially added on branch ECMASCRIPT.  

Sun Feb  8 13:54:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/html_b.c:

	file html_b.c was initially added on branch ECMASCRIPT.  

Sun Feb  8 13:54:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/html_a.c:

	file html_a.c was initially added on branch ECMASCRIPT.  

Sun Feb  8 13:54:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/html_c.c:

	file html_c.c was initially added on branch ECMASCRIPT.  

Sun Feb  8 13:53:14 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/core.c:

	file core.c was initially added on branch ECMASCRIPT.  

Sun Feb  8 06:29:17 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/README:

	file README was initially added on branch ECMASCRIPT.  

Sun Feb  8 06:10:16 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/html.h:

	file html.h was initially added on branch ECMASCRIPT.  

Sun Feb  8 06:10:16 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/core.h:

	file core.h was initially added on branch ECMASCRIPT.  

Sun Feb  8 06:07:56 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/.vimrc:

	file .vimrc was initially added on branch ECMASCRIPT.  

Sun Feb  8 06:07:56 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/dom/.cvsignore:

	file .cvsignore was initially added on branch ECMASCRIPT.  

Sun Feb  8 00:17:09 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/options.inc:

	s/ELINKS_LOCAL_CGI/CONFIG_CGI/ 

Sat Feb  7 10:58:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Drawin the download notification dialog when having the download
	browser open is apparently a little racy. Deleting the box item will
	update the download browser _after_ the notification dialog has been
	drawn whereby it will be hidden. This should make the download
	browser update before launcing any notification by removing the list
	box item.  

Sat Feb  7 01:39:49 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/interlink.c:

	Use stricter mask for local socket creation, so socket is only
	readable/writable by its user on systems honouring unix sockets
	permissions (see unix(7)).  

Sat Feb  7 01:04:52 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Comments about secure_file_saving were updated.  

Sat Feb  7 00:58:56 2004  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Use fflush()/fsync()/fclose() sequence to ensure data is written to
	disk when using secure saving. This is needed since fclose() only
	calls fflush() which only flush libc buffers, so while fclose() may
	have returned, data may still be in kernel buffers. See fclose(2),
	fflush(2) and fsync(2) man pages for more information.  

Fri Feb  6 22:41:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.h, config/urlhist.c, dialogs/exmode.c,
	dialogs/menu.c, globhist/globhist.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use macros for input history initialization.  

Fri Feb  6 18:38:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c, plain/renderer.c:

	Move cache entry defragmentation checking to render_document().  

Fri Feb  6 15:58:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Make sort_links() static.  

Fri Feb  6 13:03:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/opttypes.c, util/color.c,
	util/color.h:

	get_color_name() -> get_color_string(), and take a hex color buffer
	as arg that will be filled and returned if no color name is found.  

Fri Feb  6 12:49:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/opttypes.c, util/color.c,
	util/color.h:

	get_color_name(): Don't allocate the returned color name.  

Fri Feb  6 12:47:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Cleanup.  

Fri Feb  6 12:31:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/options.h, globhist/dialogs.c:

	I was reading through some old patches and it reminded me that it
	would maybe be better to let the option value union have a
	big_number member of type long.  

Thu Feb  5 23:19:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix assert() failure in documents without links. Reported by Miciah.  

Thu Feb  5 23:17:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Fix assertm() reported by Daniel Macks <dmacks@netspace.org>.  

Thu Feb  5 19:47:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make text searching also honour the show_not_found option. So
	browsing search history in typeahead mode is actually useful.  

Thu Feb  5 19:43:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup.  

Thu Feb  5 19:33:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Add to history if we receive an ACT_EDIT_ENTER and the widget has
	history.  

Thu Feb  5 19:26:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minimize the (now pretty useless) mode change hacks to just call
	search_typeahead().  

Thu Feb  5 19:20:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Then of course there is this thing called search history that text
	typeahead should have.  

Thu Feb  5 19:18:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/search.c:

	Make the various typeahead directly accessible via actions (-link,
	-text and -text-back). Fixes some of bug 378 atleast.  

Thu Feb  5 16:46:25 2004  Laurent Monin <zas@norz.org>:

	* src/formhist/Makefile.am:

	Do not add formhist.o twice to libformhist.a. Reported by Daniel
	Macks.  

Thu Feb  5 15:46:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Thou shall always check if get_next_scanner_token() returns NULL.
	Fixes reappearing of bug 372 'crashes if <style> tag is cut off in
	fragment/file'.  

Thu Feb  5 12:52:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/exmode.c, protocol/rewrite/rewrite.c,
	protocol/rewrite/rewrite.h:

	Removed URI prefixes availability in exmode. It is wrong from the
	design standpoint, you have the goto url dialog for that (or just
	goto-url action arguments, for that matter).  

Thu Feb  5 11:03:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	fixup_typeahead_match(): Scrolling might update the current link but
	we don't want that so reset it to the matched one.  

Thu Feb  5 10:29:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahead link text coloring. If something already were typed we
	need to redraw in order to remove the coloring of the link text.  

Thu Feb  5 10:18:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, view.c, view.h:

	A nice little hack that will scroll the document view if the matched
	link is under the typeahead input line.  

Thu Feb  5 10:03:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Color the typeahead text of the current link.  

Thu Feb  5 00:22:31 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Avoid crash when saving files with encoding != UTF-8.  

Wed Feb  4 23:13:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/conf.h, dialogs/exmode.c:

	parse_config_command()'s @file updates propagate. This should fix
	the on-startup infinite loop.  

Wed Feb  4 16:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	Command line options for redirects should not be listed with -help.
	Besides it looks hella ugly.  

Wed Feb  4 14:12:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/getifaddrs.c:

	max()? What max()? 

Wed Feb  4 13:58:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.c:

	Include the needed files.  

Wed Feb  4 13:58:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, dialogs/exmode.c:

	Compilation fix.  

Wed Feb  4 13:57:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/conf.h, dialogs/exmode.c:

	Allow config file commands (set, bind) to be executed from exmode.
	This involves exporting of parse_config_command() and enum
	parse_error.  

Wed Feb  4 13:27:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Random tidyup.  

Wed Feb  4 13:00:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Simplification of parse_config_file() --- removed the test_end label
	+ goto.  

Wed Feb  4 12:59:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Surged out the very command parsing multiplexer from
	parse_config_file() to parse_config_command().  

Wed Feb  4 12:51:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/exmode.h:

	Trailing whitespaces police strikes.  

Tue Feb  3 20:37:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix leak when viewing empty files.  

Tue Feb  3 20:31:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/search.c, viewer/text/search.h:

	Make the third arg of find_next() mean the direction. Thus making it
	possible to remove find_next_back().  

Tue Feb  3 20:12:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Try to make the @a arg to find_next() a bit more clear and remove
	the use for it.  

Tue Feb  3 20:04:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Cleanup.  

Tue Feb  3 19:28:04 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Feb  3 19:20:01 2004  Laurent Monin <zas@norz.org>:

	* configure.in, src/config/cmdline.c, src/lowlevel/connect.c,
	src/osdep/Makefile.am, src/osdep/getifaddrs.c,
	src/osdep/getifaddrs.h:

	Option -localhost now matches against all local addresses, gathered
	by getifaddrs() function, either from system or if not available
	from the new osdep/getifaddrs.{c,h} files. Please test heavily for
	cross platforms issues.  

Tue Feb  3 18:59:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h:

	Make search_for and search_for_back static.  

Tue Feb  3 18:56:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/search.c, viewer/text/search.h:

	search_dlg(): Now both initiates forward and backward search dialogs
	depending on @a.  

Tue Feb  3 18:38:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use document->nsearch as counter to get rid of disturbing macro.  

Tue Feb  3 16:00:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix leak of selector list when the syntax is all wrong.  

Tue Feb  3 10:12:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Fix some swappage that led to an internal error when one selected
	extended regexes in the search box and searched.  

Mon Feb  2 16:20:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	detach_formatted() should already take care of these.  

Mon Feb  2 16:11:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.h:

	Describe tags and nodes and then move things a bit.  

Mon Feb  2 15:58:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.h:

	Cleanup.  

Mon Feb  2 15:40:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Typeahead is not a hack anymore.  

Mon Feb  2 15:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Spit and polish.  

Mon Feb  2 15:24:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	search_link_text(): Cleanup initialisation of variables.  

Mon Feb  2 15:19:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Decrease indentation level.  

Mon Feb  2 15:12:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move link text searching to separate function.  

Mon Feb  2 15:04:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Rename charpos -> textlen, typeahead -> text, doc_view->document ->
	document.  

Mon Feb  2 13:54:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	Make dump_scanner() available if SCANNER_DEBUG is defined. Fix typo.
	Add state member to struct scanner useful for SGML scanner.  

Mon Feb  2 09:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don't show error dialogs for missing CSS stylesheets.  

Sun Feb  1 16:43:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Try to fix precedence checking for background property parsing.  

Sun Feb  1 16:42:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Some more checks needed for supporting NUL chars in cache data.  

Sun Feb  1 15:56:25 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	check_if_local_address6() is only if IPV6 is defined.  

Sun Feb  1 15:11:53 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Wrap tests for local addresses to functions.  

Sun Feb  1 13:35:29 2004  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Save first errno to display proper error message. Use
	@at_least_one_remote_ip to clarify things.  

Sun Feb  1 05:52:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Some more checks needed for supporting NUL chars in cache data.  

Sun Feb  1 00:13:13 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was improved a bit.  

Sun Feb  1 00:07:22 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 31 14:10:41 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Sat Jan 31 06:00:05 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	First parameter should be basename not full path.  

Sat Jan 31 00:58:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Cleanup.  

Sat Jan 31 00:43:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.c, stylesheet.h:

	Ensure that the CSS @import can only be nested < MAX_REDIRECTS.  

Sat Jan 31 00:40:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Dropped @not_local_count, instead fail with S_LOCAL_ONLY only if the
	last attempt was local, because we do not have errno of previous
	non-local attempts.  

Sat Jan 31 00:37:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Tidyup.  

Sat Jan 31 00:36:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Do all the @local-testing things only if @only_local.  

Sat Jan 31 00:30:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	ACT_MENU_PREVIOUS_ITEM support, instead of the previous horrid
	ev->y+ACT_MENU_NEXT_ITEM hack.  

Sat Jan 31 00:29:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	ACT_EDIT_PREVIOUS_ITEM support.  

Sat Jan 31 00:28:37 2004  Laurent Monin <zas@norz.org>:

	* src/: config/cmdline.c, lowlevel/connect.c, sched/connection.h,
	sched/error.c:

	A new commandline option was introduced: -localhost, it limits
	elinks connections to loopback addresses for now, and with your help
	will limit to local addresses soon.  

Sat Jan 31 00:23:08 2004  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	Compilation fix....  

Fri Jan 30 23:01:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Added default keybinding to previous-(item|frame) to alt-tab, idea
	by Miciah.  

Fri Jan 30 22:38:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use option 'cache' for search dialog checkbox values.  

Fri Jan 30 19:54:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, dialogs/options.c:

	Generalize the terminal option cache thingy.  

Fri Jan 30 19:25:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix page down, scroll and end handling by using document view height
	and _not_ ... ;-) 

Fri Jan 30 19:13:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/event.h, terminal/kbd.c,
	viewer/text/view.c:

	Wrap mouse bit magic in macros. Actions too.  

Fri Jan 30 19:01:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, bfu/text.c, terminal/event.h,
	terminal/kbd.c, viewer/text/view.c:

	Wrap mouse bit magic in macros.  

Fri Jan 30 18:36:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Fri Jan 30 18:28:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Always compare to the current document view height and width and
	_not_ document options height or width. Fixes detection of links
	from mouse clicks when the terminal has been resized after the first
	rendering. Reported by zas.  

Fri Jan 30 18:16:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Compile fix.  

Fri Jan 30 15:25:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.c, parser.c, parser.h:

	css_parse_stylesheet() now takes @end variable. BTW idea by Zardoz.  

Fri Jan 30 15:15:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, util/scanner.c, util/scanner.h:

	Add end member to the scanner struct so we can start to support NUL
	chars in cache data.  

Fri Jan 30 10:14:25 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 30 08:22:23 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Standardization.  

Fri Jan 30 07:35:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Now with proper header comments and new options.  

Fri Jan 30 07:33:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Out put proper .\" comments.  

Thu Jan 29 13:32:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Make the selector mirroring function take only the property list of
	the original selector so that the ruleset parser can use an empty
	list. Should fix properties of already known selectors being added
	to others in the grouping.  

Thu Jan 29 13:21:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/parser.c, util/scanner.h:

	Some lame way of skipping current token.  

Thu Jan 29 13:10:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	Eh .. revert feature.h change.  

Thu Jan 29 13:08:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/document/css/parser.c, test/css/styletags.html:

	Add testing of the handling of selector groupings. It should that we
	need to pass css_parse_properties() an empty list head so that
	previous values do not end up being added to all other selectors.  

Thu Jan 29 13:02:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	Add selector grouping without block.  

Thu Jan 29 12:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Always check the returned value of get_scanner_token(). Don't check
	whether we skip to next ',' since the check at the start of the loop
	should catch it for us.  

Thu Jan 29 12:47:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Make the selector parsing a little less ambitious (don't allocate
	anything) and more tolerant.  

Thu Jan 29 12:16:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Raise the document.dump.width/-dump-width limits from 40/512 to
	1/65536.  

Thu Jan 29 11:09:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Only check if control char for the first char that is typed ahead.  

Thu Jan 29 07:54:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	'#?' now means search back.  

Thu Jan 29 07:49:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make '##' mean that no more control chars should be checked .. so
	that '/' can be typed as first char in link typeahead.  

Thu Jan 29 07:31:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inpfield.h:

	Add prompt member to struct input_line.  

Thu Jan 29 07:21:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move text_typeahead_handler() up before link_typeahead_handler.  

Thu Jan 29 07:18:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Add data member to struct input_line.  

Thu Jan 29 07:15:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	(Re)introduce a struct for maintaining input line data.  

Thu Jan 29 04:19:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Move selector lookup to end of loop so we don.t have to handle
	allocation if there is a syntax error.  

Thu Jan 29 04:16:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Make selector variable local.  

Thu Jan 29 04:13:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Use while loop instead of gotos so a lot of indenting.  

Thu Jan 29 04:05:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Don.t use static list head but simple pass it from the ruleset
	parser.  

Wed Jan 28 22:03:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fixed memory leak in case of wrong option.  

Wed Jan 28 20:06:50 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Jan 28 19:38:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Experimental support for the 'unset' command. It is useful in order
	to be able to get rid of the default external protocol handlers.  

Wed Jan 28 18:41:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Fixed a hole in the anonymous mode - user could launch the external
	editor and obviously then do whatever he wants there. Discovered by
	Solar Designer <solar@openwall.com>.  

Wed Jan 28 13:35:07 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Jan 28 10:39:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A happy hacking verion of typeahead for text searches. Type '#/' and
	pray that you will never have to typeahead to a link text starting
	with /. :P 

Wed Jan 28 09:18:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Add a toggle-css action so it is easier to see what it actually adds
	to the rendering. By default bound to '_' but maybe it shouldn't
	have one.  

Wed Jan 28 08:23:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix backspacing when typing ahead.  

Wed Jan 28 08:13:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Use enum for return values of input line handlers.  

Wed Jan 28 07:57:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A few comments. Thanks for cheering Quazgaa ;) 

Wed Jan 28 07:53:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, viewer/text/search.c:

	Move error function calling to typeahead input event handler.  

Wed Jan 28 07:39:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Check if there is typeahead text in the input handler.  

Wed Jan 28 07:35:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	When backspacing we just stay with the current link so let.s not
	waste any effort on it.  

Wed Jan 28 07:32:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup.  

Wed Jan 28 07:30:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Remove some more events that kbd_field() takes care of.  

Wed Jan 28 07:28:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, dialogs/exmode.c, viewer/text/search.c:

	Handle ACT_EDIT_CANCEL at top level.  

Wed Jan 28 07:24:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Bail out earlier if there is no chars to search for.  

Wed Jan 28 07:18:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, dialogs/exmode.c:

	Handle basic input line events. We have to do them before calling
	kbd_field().  

Wed Jan 28 06:43:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.h, viewer/text/search.c,
	viewer/text/search.h, viewer/text/view.c:

	Use input line interface for link typeahead. Removing all the cheap
	hacks and nicely encapsulates typeahead functions. Basicly the code
	from frame_ev() is now the input line handler that just grabs
	current doc_view and uses do_typeahead() as backend. All buffer
	management was purged from do_typeahead() but it should still be
	cleaned up and fine tuned.  

Wed Jan 28 06:34:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Fix logic.  

Wed Jan 28 06:16:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Revert typeahead part of last patch.  

Wed Jan 28 06:14:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c,
	viewer/text/search.c:

	Make the input line dialog inteface handle the low level event
	stuff.  

Wed Jan 28 05:44:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, dialogs/exmode.c:

	Move generic input line stuff to bfu/.  

Wed Jan 28 05:40:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Also pass the event handler to the input line initializer.  

Wed Jan 28 05:30:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	A few exmode -> input_line renames.  

Wed Jan 28 05:22:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Move generic input line stuff to separate function which
	exmode_start() wraps.  

Wed Jan 28 05:18:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Get rid of the exmode_data struct and just allocate like all other
	dialogs.  

Wed Jan 28 05:07:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode_exec() take only session and command buffer.  

Wed Jan 28 05:05:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Remove unused exmode data member.  

Wed Jan 28 02:56:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	add_document_node() now takes renderer as arg. Add compress as
	renderer member.  

Wed Jan 28 02:39:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Describe other plain_renderer members.  

Wed Jan 28 02:37:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Maintain current line number in struct plain_renderer.  

Wed Jan 28 02:32:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Make the template char part of struct plain_renderer.  

Wed Jan 28 02:29:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Pass renderer struct on to add_document_line().  

Wed Jan 28 02:25:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Bail out if there is no fragment data .. add_document_lines()
	asserts(!length).  

Wed Jan 28 02:18:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Add max_width member to struct plain_renderer used for doc_width
	calculation.  

Wed Jan 28 02:13:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Minor cleanups.  

Wed Jan 28 02:09:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Introduce a plain renderer struct.  

Wed Jan 28 01:34:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.c:

	Move init_scanner_info() to initializers and inline it.  

Wed Jan 28 01:32:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.c, util/scanner.h:

	map_scanner_string(): Now just takes the scanner as arg.  

Wed Jan 28 01:26:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, document/css/scanner.h, util/scanner.c,
	util/scanner.h:

	init_css_scanner() -> init_scanner() .. and move to util/.  

Wed Jan 28 01:23:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/apply.c, document/css/parser.c,
	document/css/scanner.c, document/css/scanner.h, util/scanner.h:

	Add initialized flag to struct scanner_info. Pass scanner_info to
	scanner initializer.  

Wed Jan 28 01:16:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, util/scanner.h:

	Make the scanner struct reference the scanner_info struct and move
	the scan() function to struct scanner_info.  

Wed Jan 28 01:12:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/scanner.h:

	Move scanner info stuff up before struct scanner.  

Wed Jan 28 00:57:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/scanner.c, document/css/scanner.h,
	util/Makefile.am, util/scanner.c, util/scanner.h:

	Give the generic scanner utilities a temporary home in util/.  

Wed Jan 28 00:42:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, osdep/Makefile.am, osdep/stub.c,
	util/Makefile.am, util/stub.c, util/stub.h:

	util/stub.* -> osdep/stub.* 

Wed Jan 28 00:38:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, protocol/http/Makefile.am,
	protocol/http/blacklist.c, protocol/http/http.h, util/Makefile.am,
	util/blacklist.c, util/blacklist.h:

	util/blacklist.* -> protocol/http/blacklist.* 

Wed Jan 28 00:35:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/stub.c, util/stub.c:

	Blank lines.  

Wed Jan 28 00:27:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Groups scanner c file in a generic part and a CSS part. Moving
	macros to header.  

Wed Jan 28 00:20:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Groups scanner head in a generic part and a CSS part.  

Wed Jan 28 00:15:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the language specific token scanner part of the scanner struct
	so it is well hidden.  

Wed Jan 28 00:11:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	css_token functions -> scanner_token.  

Wed Jan 28 00:04:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h, property.h,
	scanner.c, scanner.h, value.c, value.h:

	css_scanner -> scanner.  

Wed Jan 28 00:00:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	struct css_token -> struct scanner_token.  

Tue Jan 27 23:54:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	CSS_SCANNER_* -> SCANNER_*.  

Tue Jan 27 23:51:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make precedence checking more generalized. It is now a member of the
	token struct and should be passed to the skip function.  

Tue Jan 27 23:08:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Fixed an apparently missing break (Jonas?) in the atrule parser,
	reported by <M.Miroslaw@elka.pw.edu.pl>.  

Tue Jan 27 20:05:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Remove support for talking scanners. It has to be added in a saner
	way.  

Tue Jan 27 19:08:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Have @name of the selector extracted in the same way as everything
	else.  

Tue Jan 27 18:45:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Allow namelen==-1 for init_css_selector() ergo get_css_selector().  

Tue Jan 27 18:43:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	When parsing a selector, save id/class/pseudo to separate variables
	instead of @selector members.  

Tue Jan 27 10:37:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Make it more clear how the action table in menu_keys() toggling is
	build.  

Tue Jan 27 02:28:33 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/selectors.html:

	Some simple selector support tests.  

Tue Jan 27 02:28:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Throw away id/class/pseudo selectors for now. They are just spoiling
	things by applying some specific styles to all the element instances
	etc. It is easy to reenable when we'll start really supporting them.  

Tue Jan 27 02:23:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	mem_free(pkg) properly even in the worst situation.  

Tue Jan 27 02:22:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Do not be so pathetic and do not free selector's id/class/pseudo
	upon syntax error... it's gonna bring us only trouble.  

Tue Jan 27 02:16:06 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/cascading.html:

	Trivial cascading testcase.  

Tue Jan 27 02:09:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Grm.  

Tue Jan 27 02:07:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Free up the selectors after we're done with them.  

Tue Jan 27 02:05:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Use kludgy wrapper struct selector_pkg to pass selectors around.  

Tue Jan 27 01:23:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Why it doesn't matter that we have multiple same properties in one
	selector.  

Tue Jan 27 01:15:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Misc. compilation fixes.  

Tue Jan 27 01:14:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Typo fix.  

Tue Jan 27 01:13:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Erhm, fixed the hybridness of mirror_css_selector().  

Tue Jan 27 01:12:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Support for multi-selector rulesets (sel1,sel2,sel3{rule}).  

Tue Jan 27 01:05:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Way back, committed the wrong file. Sorry 'bout that.  

Tue Jan 27 01:03:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Fixed init_css_selector() call.  

Tue Jan 27 01:03:40 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c:

	Oops, clone_css_selector() is actually used.  

Tue Jan 27 00:54:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	CSS_TOKEN_HASH/HEX_COLOR already contain the token string of ident,
	as pointed out by Jonas.  

Tue Jan 27 00:52:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Disable the unused functions.  

Tue Jan 27 00:49:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/apply.c, css/stylesheet.c, css/stylesheet.h,
	html/parser.c:

	Mirror @default_stylesheet to @css_styles in
	init_html_parser_state() so that we will not need to let the cascade
	fall into two stylesheets but only one. The real benefits will show
	as we will start to support more complex selectors, and it should be
	faster (can you spare a bit of memory, bro'?).  

Tue Jan 27 00:42:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	If we're fixing memory leaks...  

Tue Jan 27 00:24:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Fixed init_css_stylesheet() to also initialize selectors list.  

Tue Jan 27 00:23:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, stylesheet.c, stylesheet.h:

	Support for proper styles cascading. Hopefully.  

Tue Jan 27 00:16:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Construct a virtual selector for the style attribute instead of just
	properties list.  

Tue Jan 27 00:14:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Export (init|done)_css_selector().  

Tue Jan 27 00:13:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Moved (struct css_selector) destructor to done_css_selector().  

Tue Jan 27 00:11:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.c:

	Make it possible to have NULL @css and/or @name passed to
	get_css_selector().  

Tue Jan 27 00:07:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Use static inlines instead of macros for token getter.  

Mon Jan 26 23:56:17 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/parser.c:

	Prevent a memleak.  

Mon Jan 26 23:37:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Chop indent2type to pieces. One generic part now does the table look
	up and the table is now also part of the scanner_info .. for no good
	reason it seems.  

Mon Jan 26 23:37:08 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/parser.c:

	s/css/scanner in get_next_css_token() calls.  

Mon Jan 26 23:30:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	struct css_indentifier -> struct scanner_string_mapping.  

Mon Jan 26 23:23:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Fixed init_css_stylesheet() decl.  

Mon Jan 26 23:22:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: stylesheet.c, stylesheet.h:

	Introduced init_css_stylesheet().  

Mon Jan 26 23:18:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	Removed the horrible uniform indentation ;-).  

Mon Jan 26 23:03:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c:

	get_css_selector() now has init_css_selector() as internal backend
	and first does find_css_selector() and then init() if that one was
	unsuccessful; similiar to cache_entry obtainers.  

Mon Jan 26 23:01:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add '.' to char token group. It's needed for class selectors.  

Mon Jan 26 23:00:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Group selector functions.  

Mon Jan 26 23:00:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, stylesheet.c, stylesheet.h:

	get_css_selector() -> find_css_selector(), init_css_selector() ->
	get_css_selector() 

Mon Jan 26 22:59:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use scanner_info struct for holding the scanner's scan table and
	scan table initialization info.  

Mon Jan 26 22:57:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Added support for some parsing of id/class/pseudo selectors.  

Mon Jan 26 22:50:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move CSS scan table info up after the char group enum.  

Mon Jan 26 22:44:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix last patch. Only generic scanner stuff. ;) 

Mon Jan 26 22:40:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move generic scanner stuff to start of file.  

Mon Jan 26 22:36:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More assertions for the scan table ranges.  

Mon Jan 26 21:54:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.h, css/apply.c, html/parser.c,
	html/renderer.c:

	Also check color_mode != MONO in the document color macros. Rename
	so their usage is a bit more clear to use_document_(fg|bg)_colors().  

Mon Jan 26 21:15:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Improve the use of use_document_colors and color_mode options.  

Mon Jan 26 20:21:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/stylesheet.h:

	Blank lines.  

Mon Jan 26 18:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/exmode.c, src/dialogs/menu.c,
	src/sched/action.c:

	Plug exmode into the configuration system (CONFIG_EXMODE).  

Mon Jan 26 18:27:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Surge out the selector parser to css_parse_selector().  

Mon Jan 26 18:06:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Always assume it's ruleset if it's not @rule, not only if the token
	is CSS_TOKEN_IDENT. And couple of TODOs.  

Mon Jan 26 17:20:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	Prefix tokens based on CSS_TOKEN_AT_KEYWORD by AT_.  

Mon Jan 26 11:58:29 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 26 08:14:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Fix backspace quiting so it don't all backspaces.  

Mon Jan 26 08:11:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Map ACT_MAIN_QUIT to ACT_MAIN_REALLY_QUIT.  

Mon Jan 26 08:05:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Backspace in empty buffer now quits.  

Mon Jan 26 08:05:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Cleanup.  

Mon Jan 26 07:00:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode URI rewriting a little more powerful by checking a few
	control chars. ':fm&' or ':g elinks &' will open the rewritten URI
	in a new backgrounded tab while adding a '+' to the end will open in
	a new tab.  

Mon Jan 26 06:26:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Remove leading ':'s from the exmode command.  

Mon Jan 26 06:24:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Rename end -> args.  

Mon Jan 26 06:20:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/exmode.c, protocol/rewrite/rewrite.c,
	protocol/rewrite/rewrite.h:

	Make it possible to use URI rewrite prefixes from the exmode line.
	It involves a little exposing of URI rewrite internals.  

Mon Jan 26 06:07:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Call cancel_dialog() instead of delete_window().  

Mon Jan 26 06:04:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Move action handling to new exmode_handler 'interface'. This will
	make it easier to add more bloat.  

Mon Jan 26 05:50:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: exmode.c, exmode.h, menu.c:

	Add exmode history.  

Mon Jan 26 05:45:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Complete make-over of the exmode handling. We now plug it directly
	into the dialog matrix making it possible to remove tons of
	duplicate code. Besides it will make it easier to get history up and
	running. I don.t expect anyone to read this big patch but understand
	that I think it is justified both because the exmode code is still
	pretty new and so major change should not be a threat to any kind of
	old features and finally "let the garbage man handle the garbage".
	;) 

Mon Jan 26 05:36:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Make it possible to get rid of all that fancy dialog stuff and only
	draw widgets.  

Mon Jan 26 05:06:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	We handle import now as well.  

Mon Jan 26 04:47:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Allocate the exmode buffer with together with the data.  

Mon Jan 26 04:42:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Add dialog struct to exmode_data and make inpfield member reference
	the dialog widget.  

Mon Jan 26 04:16:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Make exmode_data->inpfield_data point to
	exmode_data->dlg_data->widget_data.  

Mon Jan 26 04:10:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	get_prefix() -> get_uri_rewrite_prefix(), substitute_url() ->
	rewrite_uri().  

Sun Jan 25 15:28:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/exmode.c:

	Get the exmode rolling by supporting action execution. Also
	':goto-url fm' should work.  

Sun Jan 25 14:43:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Fix Help -> Keys toggling.  

Sun Jan 25 14:24:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c:

	Trim the main mappings. Only those currently in use remains.  

Sun Jan 25 14:10:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Trim the menu mappings. Only those currently in use remains.  

Sun Jan 25 14:04:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Moved delete_keybinding() in front of add_keybinding().  

Sun Jan 25 14:03:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	delete_keybinding() now drops @kb's KBDB_DEFAULT flag before
	free_keybinding() so that it's really *always* deleted. However its
	only user add_keybinding() sets KBDB_DEFAULT for the new keybinding
	taking place of the original default keybinding, so that if the new
	one is removed by the user, it is written to the configfile. This
	should fix the tons of none-binds appearing in configfile now.  

Sun Jan 25 13:59:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inphist.c, listmenu.c:

	Fix usage of ACT_MENU_NONE for menu entry actions. We should use
	main mapping everywhere for that.  

Sun Jan 25 13:57:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	I hope this is right. Use edit key map for exmode.  

Sun Jan 25 13:53:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Trim the edit mappings. Only those currently in use remains.  

Sun Jan 25 13:52:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Do not export delete_keybinding().  

Sun Jan 25 13:51:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Use ACT_EDIT_CANCEL for bailing out of exmode.  

Sun Jan 25 13:20:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Remove actions that are clearly not ACT_MAIN_.  

Sun Jan 25 13:17:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, bfu/text.c, config/dialogs.c, config/kbdbind.c,
	config/kbdbind.h, dialogs/info.c, dialogs/menu.c,
	dialogs/options.c, mime/dialogs.c, sched/action.c,
	viewer/text/link.c, viewer/text/view.c:

	s/ACT_/ACT_MAIN_/. Geronimooooo!! 

Sun Jan 25 13:09:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Swapped action/keymap guessing from item udata, therefore fixing
	adding a keybinding.  

Sun Jan 25 13:05:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	s/ACT_MENU_NONE/ACT_MAIN_NONE/ .. all menu entry actions are really
	main actions.  

Sun Jan 25 13:03:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Trivial tidyup.  

Sun Jan 25 13:03:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	assert() keymap when using it to lookup in action_table[].  

Sun Jan 25 12:52:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inphist.c, listmenu.c, menu.c:

	Use ACT_MENU_NONE for menu actions.  

Sun Jan 25 12:47:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/exmode.c:

	Even more ACT_MENU_ usage.  

Sun Jan 25 12:44:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	More ACT_MENU_ usage.  

Sun Jan 25 12:38:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, viewer/text/form.c:

	s/ACT_/ACT_EDIT_/ 

Sun Jan 25 12:38:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	s/ACT_/ACT_MENU_/ 

Sun Jan 25 12:03:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Add 'Space' -> ' ' to @key_table and remove its special handling
	from make_keystroke().  

Sun Jan 25 10:19:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Tiny whitespace fix.  

Sun Jan 25 10:18:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	In make_keystroke, if !escape, print '<space>' instead of ' '. This
	affects the keybinding manager and Help->Keys box.  

Sun Jan 25 09:55:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don.t add CSS to globhist.  

Sun Jan 25 09:48:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	menu_keys() message box currently only have on button.  

Sun Jan 25 09:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/options.c, document/options.h, document/css/css.c,
	document/css/css.h, document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, sched/connection.h, sched/session.c:

	Add support for importing external stylesheets. It is done using the
	import callback to add urls to a new document->css_imports string
	list via html_special(). The patch also introduces an option for
	controling whether external stylesheets should be imported
	(document.css.import). Downloading of stylesheets have special
	PRI_CSS priority that amongst other things is used to avoid any
	ses_chktype() calls from file_end_load() so atleast it is useful.  

Sun Jan 25 08:17:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove some pseudo code. It messes up the css import patch.  

Sun Jan 25 07:31:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	When reloading use the original priority for files to load and not
	the hardcoded PRI_FRAME. This is needed for importing CSS documents.  

Sun Jan 25 07:19:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Sort the many CSS options.  

Sun Jan 25 05:02:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/parser.c, css/stylesheet.c,
	css/stylesheet.h, html/parser.c:

	Use callback for imports. It seems more easy and straight forward
	now. Any import will then be loaded and added before the rest of the
	stylesheet it was imported from. For the html parser we will just
	check cache to see if we can go ahead and parse it or need to call
	special_f(). Oh an patch is loaded with fixes for last patch.  

Sun Jan 25 04:20:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Ok .. read_encodede_file() wants the filename in a MAX_STR_LEN
	buffer so let's give it just that so it doesn't cause memory
	corruptions in try_encoding_extensions().  

Sun Jan 25 03:42:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c:

	Support url() imports. It seems importing non existing files cases
	memory corruption.  

Sun Jan 25 03:16:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c:

	We now trim string and url() tokens so token->string and
	token->length only contains the information we are interested in.  

Sun Jan 25 02:35:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Generate url() tokens.  

Sun Jan 25 02:10:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Try to handle imports for the default stylesheet. Very inefficient.
	We need some merge_stylesheet() and some kind of rating to control
	what gets in and what not.  

Sun Jan 25 02:08:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Add string list import member to struct css_stylesheet.  

Sun Jan 25 01:33:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/css.c, css/stylesheet.h, html/parser.c:

	Use macro for static initialization of stylesheets.  

Sun Jan 25 01:27:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_stylesheet(): Use a switch in the main loop so all @-rule
	tokens are routed to css_parse_atrule().  

Sun Jan 25 01:20:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, sched/session.c, terminal/tab.c,
	util/string.c, util/string.h:

	Make add_to_string_list() take length of added string. -1 means call
	strlen().  

Sun Jan 25 00:27:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/stylesheet.h:

	Describe stylesheet structs.  

Sun Jan 25 00:24:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Put a separator between the togglers and info/reload in the View
	menu.  

Sun Jan 25 00:23:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Moved ACT_RELOAD from File to View. This is maybe a little
	controversial, but well... ;) 

Sun Jan 25 00:21:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	sched/action.c:

	Added ACT_(MAIN_)RERENDER, by default not bound to anything, but
	available through the View menu. It rerenders the current document,
	thing useful in such a wide variety of scenarios.  

Sun Jan 25 00:11:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed more compilation problems.  

Sun Jan 25 00:09:50 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed misplaced #endif.  

Sun Jan 25 00:09:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Some other compilation fixes.  

Sun Jan 25 00:07:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Some compilation fixes.  

Sun Jan 25 00:04:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	...and also add the missed actions to the other keymap enums.  

Sun Jan 25 00:01:38 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	Reintroduced actions accidentally removed from enum main_action.  

Sat Jan 24 23:58:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	viewer/text/search.c:

	Use keymap-specific enum names for non-main actions.  

Sat Jan 24 23:55:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Add TODO about updating format cache when default stylesheet has be
	reloaded.  

Sat Jan 24 23:50:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	bfu/menu.h, config/kbdbind.h, dialogs/info.c, sched/action.c,
	sched/action.h, viewer/text/search.c, viewer/text/view.c:

	enum action -> enum {main,edit,menu}_action, edit,menu being just
	mindless clones of main now.  

Sat Jan 24 23:33:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Removed KEYACTS, which has no business in the modern actions
	organization. This also means one dirty'n'quick hack for
	@action_box_items and temporarily disabling menu_keys() toggling
	until the water will be calm again.  

Sat Jan 24 23:25:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Since enum action is gonna be split, remove its usage on places
	where generic non-keymap-specific action number will be used.  

Sat Jan 24 23:14:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Move ACT_SCRIPTING_FUNCTION up in the enum, so that it is grouped
	together with ACT_NONE as universal for all keymaps (by its very
	nature).  

Sat Jan 24 23:11:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/dialogs.c, config/kbdbind.c, config/kbdbind.h,
	sched/action.c:

	The action number is now keymap specific. From the outside the only
	change for now is that write_action() takes keymap along the action
	enum, from the inside the action_table was split into three yet
	identical copies (one for each keymap) and we carry enum keymap
	along enum action everywhere where we didn't yet for some reason.  

Sat Jan 24 22:52:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed toggle_display_action_listboxes() to handle the new
	organization.  

Sat Jan 24 22:52:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Make document.css.stylesheet description more clear.  

Sat Jan 24 22:45:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/css/css.c, protocol/file/file.c,
	protocol/file/file.h:

	Purge all the crappy code I added yesterday in an attempt to import
	css and use read_encoded_file() for sucking in the default css file.  

Sat Jan 24 22:35:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Reorganized the keybinding manager - now the actions are grouped by
	keymap instead of vice versa.  

Sat Jan 24 22:32:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/file.c:

	Move file reading specific part of file_func() to separate function.  

Sat Jan 24 21:31:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	Removed trailing comma from the always-to-be-last enum members.  

Sat Jan 24 21:17:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Compilation fixes.  

Sat Jan 24 21:09:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	When keybinding is associated with ACT_NONE, it is like it wouldn't
	exist at all so don't ask for confirmation.  

Sat Jan 24 21:07:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Default keybindings are now flagged appropriatelly and are not
	deleted but just rebound to ACT_NONE, therefore also saved so to the
	configuration file. This should fix removed default keybindings
	reappearing after ELinks restart, reported by many people over the
	ELinks history.  

Sat Jan 24 20:37:54 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jan 24 20:28:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Split bind_config_string() core to single_bind_config_string().  

Sat Jan 24 20:08:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Split add_default_keybindings() to three
	add_keymap_default_keybindings().  

Sat Jan 24 20:05:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	The missing braces around for() body in bind_config_string() were
	making me nervous.  

Sat Jan 24 20:04:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	add_keybinding() reindentation.  

Sat Jan 24 20:03:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	add_keybinding() returns (struct keybinding *) 

Sat Jan 24 19:57:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/css.c:

	Terminate a sentence :-).  

Sat Jan 24 19:55:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Moved add_keystroke_to_string() and add_actions_to_string() from
	default kbdbinds neighbourhood near make_keystroke() where they seem
	to fit more naturally.  

Sat Jan 24 19:53:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Move config file tools at the end of file, particularily after
	default keybindings.  

Sat Jan 24 19:53:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Clarification.  

Sat Jan 24 19:20:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Support for CHECK_DOUBLE_FREE, by default enabled. It reported
	xflows before, which was quite confusing.  

Sat Jan 24 19:08:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Minor tidyup.  

Sat Jan 24 18:24:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/Makefile.am,
	dialogs/exmode.c, dialogs/exmode.h, sched/action.c:

	Basic framework for ex-mode (command line) support, triggered by
	'exmode' action (':'). It does nothing now, some action
	parser/executer needs to be implemented, but that's already work for
	someone else ;-).  

Sat Jan 24 17:57:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Simplify.  

Sat Jan 24 17:46:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	File style="{ ... }" testcase under garbage.  

Sat Jan 24 17:31:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Tidyup.  

Sat Jan 24 17:29:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix infinite loop in property parser when handling style="{ ... }".
	Reported by Zas.  

Sat Jan 24 13:00:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val_(): simplify test_only mode, just return as soon we
	found matching atttribute.  

Sat Jan 24 12:52:17 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 24 12:36:17 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_num(): use strtol() and a long variable @num, then check range
	and then only type cast to int. More correct, imho.  

Sat Jan 24 10:25:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Note one textmode User-Agent token user (OSNews.com) at least, shall
	someone even think about removing it.  

Sat Jan 24 10:25:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Describe the 'textmode' token.  

Sat Jan 24 10:09:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Do not dump @full_static_version twice if CONFIG_BACKTRACE and
	segfault was forced by force_dump().  

Sat Jan 24 10:08:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Try to make the I-crashed epitaph more brief so that the actually
	useful info is less likely to scroll out of the screen.  

Sat Jan 24 03:35:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, stylesheet.c:

	Use free_list(). Hmm.  

Sat Jan 24 02:53:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, stylesheet.c, stylesheet.h:

	Move selector initialization to separate function.  

Sat Jan 24 02:41:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/parser.c:

	Move style sheet and selector stuff to own file.  

Sat Jan 24 02:04:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/Makefile.am, css/apply.c, css/css.c,
	css/parser.c, css/parser.h, css/stylesheet.c, css/stylesheet.h,
	html/parser.c:

	Move style sheet and selector stuff to own file.  

Sat Jan 24 01:17:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Try to hint that document.css.stylesheet is relative to ELinks' home
	dir.  

Fri Jan 23 23:59:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: css.h, parser.h:

	Add some small meditations about cascading and default stylesheets.  

Fri Jan 23 22:31:05 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Less confusing comment.  

Fri Jan 23 22:25:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	English fixes, little more applier info.  

Fri Jan 23 22:13:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/css.h:

	Prototypes instead of #inculdes.  

Fri Jan 23 20:59:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 23 20:26:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Fix segfault when document.css.stylesheet couldn't be loaded. Always
	empty the default stylesheet before reloading.  

Fri Jan 23 20:12:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix comment eating so we do the @string testing inside first if ().  

Fri Jan 23 20:08:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/css.c:

	Make it possible to reimport default stylesheet. You still need to
	^R because css imports are async.  

Fri Jan 23 20:00:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, document/css/css.c:

	Move CSS options and change hook to module definitions.  

Fri Jan 23 19:27:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/Makefile.am,
	document/css/Makefile.am, document/css/apply.c, document/css/css.c,
	document/css/css.h, modules/module.c:

	Add support for a default stylesheet from which to get info about
	HTML layout. It is still a bit buggy. E.g. don't set
	document.css.stylesheet to a file that doesn't exist. ;) 

Fri Jan 23 19:24:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Move main module initialization back. No initializer should use
	options.  

Fri Jan 23 19:18:18 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val() was slightly modified to be more efficient. It was
	renamed to get_attr_val_() which takes two new parameters
	@test_only, used by has_attr() and @eat_nl used by get_url_val(). In
	test_only mode, it just test for attribute existence, so it dont
	allocate any memory for value, nor it does useless parsing or string
	conversion. Global variable @get_attr_val_eat_nl is gone.  

Fri Jan 23 18:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Init main modules after the option system has been booted so
	initializers can access options ;).  

Fri Jan 23 17:46:41 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Jan 23 17:33:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Assume sizeof(void *) == sizeof(long).  

Fri Jan 23 09:37:42 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Jan 23 06:26:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Introduce char group of other token start chars so we can bail out
	eailer if the token is garbage.  

Thu Jan 22 23:48:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	If we don't use smart checking there is no need for a smart value.  

Thu Jan 22 23:29:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Add support for URI rewriting from the command line.  

Thu Jan 22 22:55:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Put some use to the second member of scan_table_info.data.string.  

Thu Jan 22 22:26:17 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/garbage.html:

	Better garbage.  

Thu Jan 22 22:18:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Our current text-decoration parsing is invalid.  

Thu Jan 22 22:17:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	Introduced css_parse_text_decoration_value(). NEVER overload single
	function for disjunct properties! 

Thu Jan 22 22:01:04 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	English fix.  

Thu Jan 22 21:40:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Make current->type token type checking against NONE/SKIP more
	explicit and also simpler.  

Thu Jan 22 21:38:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	English grammar fix.  

Thu Jan 22 21:37:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Fixed memory leak in do_tab_compl() triggered when there were no
	completion possibilities.  

Thu Jan 22 21:26:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	FIXME about unbased sizeof() equivalence assumptions.  

Thu Jan 22 21:18:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Enabled document.css.enable by default. It is important to let the
	CSS support to be extensively tested by people.  

Thu Jan 22 21:14:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	In ident2type(), use strlcasecmp() for token matching so that ie.
	'me' won't match 'media' (or is that ok?).  

Thu Jan 22 21:11:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	Removed redundant identifiers2type record.  

Thu Jan 22 21:06:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	English grammar fixes.  

Thu Jan 22 20:53:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.c:

	Make sure someone won't pollute our nice clear simple code with
	fastfind too soon ;-).  

Thu Jan 22 20:47:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	Jonas is too French.  

Thu Jan 22 19:34:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove unneeded #includes.  

Thu Jan 22 19:32:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidyup comment.  

Thu Jan 22 19:31:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	The universal (match all) selector '*' is also a char token.  

Thu Jan 22 18:45:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Oops no revert plain render change from last patch. :/ 

Thu Jan 22 18:43:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/parser.c, css/parser.h, plain/renderer.c:

	Add comments to functions and one TODO.  

Thu Jan 22 18:34:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Add grammar info from ELusive as comments.  

Thu Jan 22 18:27:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_selector() -> css_parse_ruleset().  

Thu Jan 22 18:19:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/osdep.c:

	Removed unused @display variable.  

Thu Jan 22 18:09:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Revert my two last patches to the renderer. The one adding link
	state enum to struct link_state_info and the one trying to remove
	link_state updating hacks from put_chars(). They broke numbered
	links.  

Thu Jan 22 17:46:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Moved parse_frame_widths() & co from document/html/parser.* to
	document/html/frames.*.  

Thu Jan 22 16:22:21 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/osdep/osdep.c:

	Fixed xterm detection - except DISPLAY check also if either WINDOWID
	or KONSOLE_DCOP_SESSION env variable is present.  

Thu Jan 22 07:25:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move up identifier scanning.  

Thu Jan 22 06:49:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Bug in SGML logic.  

Wed Jan 21 18:16:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup.  

Wed Jan 21 17:49:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make the madness really end.  

Wed Jan 21 17:40:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Compile fix.  

Wed Jan 21 17:39:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Unify SGML tagsoup navigation and use native scanners to make it
	much more forgiving.  

Wed Jan 21 17:05:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidyup comments.  

Wed Jan 21 17:02:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Introduce a skip token and made CSS_TOKEN_NONE again mean stop
	scanning.  

Wed Jan 21 16:21:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Treat ".<number>%" as garbage so it is not broken up.  

Wed Jan 21 16:05:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Call update_link_state() those places that call put_chars(). Remove
	various hacks that did it before.  

Wed Jan 21 16:01:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add link state enum to struct link_state_info and use that in
	put_chars(). get_link_state() is now simply an updater.  

Wed Jan 21 15:49:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move link state information to a new struct link_state_info.  

Wed Jan 21 15:36:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Yuk .. another hack to solve memleaks because of changing link
	states. We have to globalize that thing somehow. Reported by lindi-
	and excellent test case by fabiob.  

Wed Jan 21 10:09:01 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/options.h,
	document/renderer.c, document/plain/renderer.c, sched/action.c,
	viewer/text/view.c, viewer/text/view.h, viewer/text/vs.h:

	Wrapping plain text support switched by Shift+W.  

Wed Jan 21 06:19:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	Check precedence of the current token so we do not skip '}' when
	looking for ';'. Fixes background property strangeness.  

Wed Jan 21 06:11:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle numbers starting with dots.  

Wed Jan 21 05:46:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	get_css_identifier_type(): Do length calculation + rename to
	ident2type() to minimize wrapping.  

Wed Jan 21 05:39:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix skipper that didn.t break out when getting to skipto char.  

Wed Jan 21 05:20:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	get_css_identifier_type(): Drop the inline. Cleanup.  

Wed Jan 21 05:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Ensure ending ')' even for rgb() function tokens. Use the ident2type
	table to check for known functions.  

Wed Jan 21 05:05:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Pass base type to identifier resolver. Fixes resolving and speeds up
	the lookup.  

Wed Jan 21 04:44:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	Generate specific @-keyword tokens. Required a little renaming of
	number identifier to type mapping.  

Wed Jan 21 04:29:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Tidyup definitions.  

Wed Jan 21 04:25:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	CSS_TOKEN_ATRULE -> CSS_TOKEN_AT_KEYWORD.  

Wed Jan 21 04:18:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Update comments and remove CSS_TOKEN_NAME.  

Wed Jan 21 04:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	There is no name token. It is only used for hashes.  

Wed Jan 21 04:03:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h:

	Make css_parse_properties() take scanner as argument. This means the
	applier needs to know about the scanner but it is really a paint to
	debug when property parsing spawns a new scanner + it is less
	efficient of course.  

Wed Jan 21 03:54:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	Tidyup.  

Wed Jan 21 03:45:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Moved dumping of scanner to dump_css_scanner().  

Wed Jan 21 03:04:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make the scanner debugging much more powerful showing both the
	generated tokens and compressed src position.  

Wed Jan 21 01:46:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove the used scanner function from debug info. It don.t work very
	well.  

Wed Jan 21 01:20:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make get_css_token_() into a macro.  

Wed Jan 21 01:00:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make get_next_css_token_() into a macro.  

Wed Jan 21 00:38:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	check_next_css_token(): Make it into a macro. With the amount of
	sanity checking we have now it should be safe.  

Wed Jan 21 00:27:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Move scanner sanity checking to exits of scan_css_tokens().  

Wed Jan 21 00:11:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Return the current token.  

Wed Jan 21 00:02:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Unbytesize move_to_front. I was thinking about making
	scanner->tokens a pointer but that seems stupid now.  

Tue Jan 20 22:25:37 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, widget.h:

	Handling of mouse with text scrollbar was improved. Using right
	click will make it to scroll faster, and mouse wheel is now handled.  

Tue Jan 20 20:40:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the scanners current a css_token pointer.  

Tue Jan 20 20:09:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Make move_to_front byte sized.  

Tue Jan 20 20:00:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_tokens(): Make current a css_token pointer.  

Tue Jan 20 18:25:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make scan table initialization data driven. It is very generic and
	more readable (I hope). A bit slower but I am really a sucker for
	data driven coding. ;) 

Tue Jan 20 18:18:40 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Jan 20 17:49:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h, value.c:

	Rearrange token types to group them better. Add comments. Rename
	CSS_TOKEN_IDENTIFIER to CSS_TOKEN_IDENT. It wouldn.t be C without
	abbreviations. ;) 

Tue Jan 20 17:28:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Generate hash tokens.  

Tue Jan 20 17:15:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Take precedence and string args into considerations when skipping
	functions.  

Tue Jan 20 17:12:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	More garbage.  

Tue Jan 20 16:40:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Improve precedence checking.  

Tue Jan 20 16:13:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Oops revert part from last patch and fix rgb comparison.  

Tue Jan 20 16:12:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Try to skip comments.  

Tue Jan 20 15:59:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	Use smarter scanning of functions skipping to ')' if it is unknown
	so tokens are not generated for every arg.  

Tue Jan 20 15:18:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	m33p.  

Tue Jan 20 15:12:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/README:

	Update.  

Tue Jan 20 14:57:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Don't remove garbage token as they might be used for some kind of
	recovery. 'None token' can now be used for tokens we want to skip
	plus it should now be more obvious that scanner->position could have
	become NULL.  

Tue Jan 20 07:05:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Make link type parser more data driven.  

Tue Jan 20 06:25:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Alphabetise css token types.  

Tue Jan 20 06:22:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Treat SGML comments as garbage.  

Tue Jan 20 05:11:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix assertion failure reported by Zardoz. It concerned string like
	"property:" with no expressions meaning skipping could not get next
	token.  

Tue Jan 20 04:54:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/garbage.html:

	Test case for the bug Zardoz pointed out.  

Tue Jan 20 04:37:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	Tidy-up: Wrap before &&, not after, and join a hanging ')' with the
	line above.  

Tue Jan 20 04:33:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	Drop some double-negation in look_for_tag and html_option.  

Tue Jan 20 02:37:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add more TODOs. Will we ever be done? 

Tue Jan 20 02:30:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle scanning of number identifiers.  

Tue Jan 20 02:12:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use strn* .. Doh! 

Tue Jan 20 02:09:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	First scan the number then the kind of number.  

Tue Jan 20 02:00:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.c, scanner.h:

	In order to handle end of tags when getting style info from <style>
	tags we need better signaling of whether to keep scanning since the
	CSS source doesn't end at the string end. We now recognize SGML tag
	ends in the scanner and generate a CSS_TOKEN_NONE while also setting
	scanner->position to NULL.  

Tue Jan 20 01:42:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	scan_css_token(): Don't return anything.  

Tue Jan 20 01:05:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Two optimizations: never scan token if the scanner positon is at the
	end, never put garbage tokens in the token table.  

Tue Jan 20 00:56:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Make token types default to CSS_TOKEN_GARBAGE.  

Tue Jan 20 00:44:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix off by one error in SGML comment scanning.  

Tue Jan 20 00:43:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Scan !important tokens.  

Tue Jan 20 00:37:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Add types for all kinds of token we have to support. If not for
	usage it will make the scanning more efficient.  

Tue Jan 20 00:23:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Handle scanning of floating point numbers.  

Tue Jan 20 00:16:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Fix SGML comment scanning.  

Tue Jan 20 00:13:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h, value.c:

	CSS_TOKEN_DIGIT -> CSS_TOKEN_NUMBER 

Tue Jan 20 00:11:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Move css_token_type enum out of the css_token struct and describe
	tokens using patterns.  

Mon Jan 19 23:52:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make scan_css_tokens() static.  

Mon Jan 19 23:48:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Cleanup scanner validation.  

Mon Jan 19 23:31:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More paranoia checking. Make sure never to return CSS_TOKEN_NONE
	typed token.  

Mon Jan 19 23:21:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	More usage of css_scanner_has_tokens() before accessing the scanners
	table.  

Mon Jan 19 23:10:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Be more paranoid and don't count in CSS_TOKEN_NONE tokens.  

Mon Jan 19 22:37:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Use macros in checks.  

Mon Jan 19 22:36:15 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 19 22:04:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	<b> tag is not also red.  

Mon Jan 19 21:56:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	E&nbsp;L&nbsp;i&nbsp;n&nbsp;k&nbsp;s 

Mon Jan 19 21:35:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Disable CSS by default. It is highly experimental and Zardoz pointed
	out that http://blogs.law.harvard.edu/tech/2004/01/19 caused a
	strange assertion failure.  

Mon Jan 19 21:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h,
	modules/module.c, modules/module.h:

	Add a main_modules table. First entry is a module for the document
	subsystem. It will make it easy to move document options to
	document/options or even separate document/subdir file.  

Mon Jan 19 21:17:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Added assertions to check that the scanner token table is properly
	aligned, meaning checking the next token will be safer and will
	never force a rescan.  

Mon Jan 19 20:35:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c, modules/module.h:

	Module table handlers now take the table as arg.  

Mon Jan 19 19:58:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, document/options.c,
	document/options.h, document/html/parser.c:

	Make it possible to disable CSS support. Enabled by default.  

Mon Jan 19 19:26:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Support for adding properties to already defined selectors.  

Mon Jan 19 19:25:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	Add test for adding properties to an already known selector.  

Mon Jan 19 19:20:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Revert bad part of last patch.  

Mon Jan 19 19:19:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c:

	Minor optimization if no selectors have been added.  

Mon Jan 19 19:18:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fix scary macros and loopings not enclosed in brackets.  

Mon Jan 19 19:01:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, parser.c, parser.h:

	Move CSS selector lookup to separate function.  

Mon Jan 19 18:53:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Try to handle precedens of special char tokens when skipping.  

Mon Jan 19 18:52:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	We need to stop at '}' tokens when parsing properties of selectors.  

Mon Jan 19 18:48:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	More <style> tests.  

Mon Jan 19 17:05:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Describe why to use @props and now @properties.  

Mon Jan 19 17:03:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/apply.h, css/parser.c,
	css/parser.h, html/parser.c:

	Minimal support for grabbing CSS properties from <style> tags. Only
	clean html element selectors are handled.  

Mon Jan 19 17:00:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Fix last patch.  

Mon Jan 19 16:55:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Use list_head pointers preparing for the invasion of <style>
	handling. Uh oh and some renaming too. ;P 

Mon Jan 19 16:51:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/styletags.html:

	Add a test for using properties from <style> tags.  

Mon Jan 19 16:17:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the CSS scanner generate tokens for SGML comments.  

Mon Jan 19 14:43:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Make the scanner generate atrule tokens containtin @<ident>.  

Mon Jan 19 13:35:02 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/css/apply.c:

	Don't apply colors from styles if
	document.colors.use_document_colors is 0.  

Mon Jan 19 07:05:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Set string token type.  

Mon Jan 19 06:29:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	We cannot get rid of string delimiters because token->length is set
	later in the function .. but it should not matter.  

Mon Jan 19 06:25:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Cleanup.  

Mon Jan 19 06:10:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Fix comments.  

Mon Jan 19 06:05:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Tidy up.  

Mon Jan 19 06:03:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Store debug related info in the scanner struct so they do not have
	to be passed to the functions even when CSS scanner debug is
	disabled.  

Mon Jan 19 05:52:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Update scanner comments.  

Mon Jan 19 05:49:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Remove garbage macro.  

Mon Jan 19 01:02:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Remove old TODO.  

Mon Jan 19 01:00:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/: simplefont.html, simpletext.html:

	Add text-decoration: underline tests.  

Mon Jan 19 00:56:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: apply.c, property.c, property.h, value.c:

	Add support for text-decoration: underline.  

Mon Jan 19 00:43:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Add comments to the rbg() parsers loop.  

Mon Jan 19 00:30:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Even use scanner for background property expression parsing.  

Mon Jan 19 00:24:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	css_parse_color_value(): Use the scanner for parsing. This partly
	introduces spaghetti code in the rbg() handling. But we use a loop
	so it should be easy to move things to separate function if we want
	maybe even some generic function arg scanner.  

Mon Jan 19 00:20:24 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Yes .. ermh buffer overflows .. that should be my apartment. This
	one got fixed tho' ;/ 

Mon Jan 19 00:02:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Also skip the % when scanning percentage tokens.  

Sun Jan 18 23:54:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Add comma to char token list. Needed for function scanning.  

Sun Jan 18 22:59:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/simplecolors.html:

	Add test cases for short hex colors.  

Sun Jan 18 22:58:26 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	No need to touch slen.  

Sun Jan 18 22:57:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	Add support for handling the short hexcolor format used by CSS.  

Sun Jan 18 22:48:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Check that hexcolors have the correct length. And disable debug
	flags.  

Sun Jan 18 22:38:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add support for scanning CSS strings.  

Sun Jan 18 22:25:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add CSS_TOKEN_FUNCTION that contains '<ident>(' string.  

Sun Jan 18 21:31:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Remove unused macro.  

Sun Jan 18 21:29:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Add position member for maintaining where in the string the scanner
	should start scanning next. Well make it easier to debug and also
	simplifies code.  

Sun Jan 18 21:04:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Ensure that move_to_front in non negative.  

Sun Jan 18 20:51:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Be a little less buggy in scan_css_tokens(). I really hate
	memmove()s and this lowlevel coding.  

Sun Jan 18 20:15:38 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Sun Jan 18 20:11:05 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Sun Jan 18 18:21:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, scanner.h, value.c:

	Introduce macro to calculate the length of 'static' strings. They
	can cause bugs + we are lazy and like simple code.  

Sun Jan 18 18:11:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-style values.  

Sun Jan 18 18:06:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-* weight values. We should
	maybe have some get_css_token_number() that can handle both
	CSS_TOKEN_DIGIT and CSS_TOKEN_PERCENTAGE.  

Sun Jan 18 18:01:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing font-* identifier values.  

Sun Jan 18 17:57:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	css_parse_font_weight_value(): Use token types to see what to do.  

Sun Jan 18 17:54:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Digits can be part of name tokens so check if digit first when
	scanning.  

Sun Jan 18 17:48:11 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	Utilize the scanner when parsing text-align values.  

Sun Jan 18 17:43:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: property.h, value.c, value.h:

	Pass the scanners along to the value parsers that will yet only work
	on the string of the first token. Had to backend color value
	parsing.  

Sun Jan 18 17:24:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/value.c:

	The scanner is so kind to skip whitespace for us so obsolete
	skip_whitespace() call.  

Sun Jan 18 17:20:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, value.c, value.h:

	Make css_parse_value() take scanner arg instead of string.  

Sun Jan 18 17:14:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): code simplication.  

Sun Jan 18 17:13:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Move CSS_SCANNER_DEBUG macro to c file.  

Sun Jan 18 17:12:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Group function and macro definitions with the various structs.  

Sun Jan 18 17:09:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.c, scanner.h:

	Don't use inlined scan table accessors and mutators.  

Sun Jan 18 17:09:03 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	foreach_values() macro was dropped. Reindentation.  

Sun Jan 18 17:02:39 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	This is a descriptive commit message.  

Sun Jan 18 17:00:50 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): check for @number greater than 100 if
	in percentage.  

Sun Jan 18 16:59:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Fixed superfluous @string shifting in rgb_component_parser(),
	spotted by Jonas.  

Sun Jan 18 16:59:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c:

	Sort alphabetically, spotted by Jonas.  

Sun Jan 18 16:47:42 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.c:

	Minor cleanup and fix of scan table initialization.  

Sun Jan 18 16:45:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.c:

	Bound css_property_info by CSS_PT_LAST.  

Sun Jan 18 16:44:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.c, src/document/css/property.c,
	src/document/css/property.h, src/document/css/value.c,
	src/document/css/value.h, test/css/simplecolors.html:

	Support for background property. It is broken in certain testcases
	but maybe it's scanner bug, I don't know, I'm not in the mood of
	tracing through 100 inlined scan_css_token() calls.  

Sun Jan 18 16:44:00 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): check for abnormally large @number
	values and prevent bad things by falling back to wildcard value.  

Sun Jan 18 16:35:09 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	extract_rows_or_cols_values(): initialize val to -1, use @number
	directly.  

Sun Jan 18 16:29:44 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some now useless initializations were dropped.  

Sun Jan 18 16:26:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Trailing whitespaces cleanup.  

Sun Jan 18 16:25:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: scanner.h, scanner.h:

	Improve comment.  

Sun Jan 18 16:24:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Fix typo.  

Sun Jan 18 16:24:14 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): part of it was moved to
	extract_rows_or_cols_values(). Use static for these new functions.  

Sun Jan 18 16:22:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Describe (as pasky so gracefully suggested) css_scanner.  

Sun Jan 18 16:12:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): handle returned value as it should, and fix a
	typo.  

Sun Jan 18 16:12:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Comment struct css_token.  

Sun Jan 18 16:08:22 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): a part of it was moved to
	distribute_rows_or_cols_that_left().  

Sun Jan 18 15:59:38 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/scanner.h:

	Try to make it more clear the difference between char tokens and non
	char tokens. Non char tokens now start at 256.  

Sun Jan 18 15:59:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): a part of it was moved to
	distribute_rows_or_cols().  

Sun Jan 18 15:53:49 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	Moved CSS_TOKEN_NON_ASCII_END (*shudder*) to the end of the enum,
	therefore all the other tokens will have sane enum values.  

Sun Jan 18 15:52:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.h:

	CSS_TOKENS makes no sense in arbitrarily-numbered enum, therefore
	better remove it or it will confuse someone.  

Sun Jan 18 15:47:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/scanner.c:

	#include elinks.h 

Sun Jan 18 15:46:16 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): shorter lines by using a macro as @values
	iterator.  

Sun Jan 18 15:41:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/Makefile.am, css/parser.c,
	css/scanner.c, css/scanner.h:

	Introduce a CSS token scanner.  It maintains up to 10 tokens at a
	time to minimize the number of scans.  For scanning a scan table is
	used (idea by mozilla).  Only used in css_parse_properties() to
	minimize the impact.  

Sun Jan 18 15:38:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): localize @tmp_val.  

Sun Jan 18 15:34:54 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): fastmem mode minor optimization, let use
	alloca() here if possible.  

Sun Jan 18 15:32:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed unused variables.  

Sun Jan 18 15:32:33 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Removed the circular dependency hack, it results in a circular
	dependency even here now (dunno what happenned), so maybe it was
	silently resolved...  

Sun Jan 18 15:32:13 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): code flow cleanup.  

Sun Jan 18 15:30:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Assert for value_type in value parsers.  

Sun Jan 18 15:29:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	font-style and font-weight now uses separate value parsers.  

Sun Jan 18 15:28:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): localize and assert @divisor.  

Sun Jan 18 15:25:47 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: property.c, value.c, value.h:

	css_property_info.parser is now used instead of css_value_parsers[],
	which evaporated. Therefore the value parsers are now exported.  

Sun Jan 18 15:25:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): Use a loop instead of a goto, localize @number
	and @tmp_values.  

Sun Jan 18 15:19:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	css_value_parser_t is now redundant to css_property_value_parser 

Sun Jan 18 15:19:40 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): Use @tmp variable to cache calculations
	result.  

Sun Jan 18 15:18:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	css_value_parser_t now takes (struct css_property_info *) as its
	first argument.  

Sun Jan 18 15:14:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @nn -> @flag, local.  

Sun Jan 18 15:12:32 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): some comments were added.  

Sun Jan 18 15:10:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/.vimrc, src/bfu/.vimrc, src/bookmarks/.vimrc,
	src/bookmarks/backend/.vimrc, src/cache/.vimrc, src/config/.vimrc,
	src/cookies/.vimrc, src/dialogs/.vimrc, src/document/.vimrc,
	src/document/html/.vimrc, src/document/plain/.vimrc,
	src/encoding/.vimrc, src/formhist/.vimrc, src/globhist/.vimrc,
	src/intl/.vimrc, src/intl/gettext/.vimrc, src/lowlevel/.vimrc,
	src/mime/.vimrc, src/mime/backend/.vimrc, src/modules/.vimrc,
	src/osdep/.vimrc, src/osdep/beos/.vimrc, src/osdep/os2/.vimrc,
	src/osdep/riscos/.vimrc, src/osdep/unix/.vimrc,
	src/osdep/win32/.vimrc, src/protocol/.vimrc,
	src/protocol/auth/.vimrc, src/protocol/file/.vimrc,
	src/protocol/ftp/.vimrc, src/protocol/http/.vimrc,
	src/protocol/rewrite/.vimrc, src/protocol/smb/.vimrc,
	src/sched/.vimrc, src/scripting/.vimrc, src/scripting/guile/.vimrc,
	src/scripting/lua/.vimrc, src/ssl/.vimrc, src/terminal/.vimrc,
	src/terminal/graphics/.vimrc, src/terminal/text/.vimrc,
	src/util/.vimrc, src/viewer/.vimrc, src/viewer/dump/.vimrc,
	src/viewer/graphics/.vimrc, doc/.vimrc, src/viewer/text/.vimrc,
	doc/book/.vimrc, doc/book/config/.vimrc, doc/book/info/.vimrc,
	doc/book/intro/.vimrc, doc/book/manpages/.vimrc, doc/man/.vimrc,
	doc/man/man1/.vimrc, doc/man/man5/.vimrc, doc/tools/.vimrc,
	po/.vimrc:

	. is now appended to 'runtimepath' instead of setting 'runtimepath'
	to .,$VIMRUNTIME, therefore evading ~/.vimrc etc.  

Sun Jan 18 15:07:51 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @m -> @maxval, @mj -> @maxpos.  

Sun Jan 18 15:06:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: .vimrc, parser.c, value.c, value.h:

	css_parse_value() now takes (struct css_property_info *) instead of
	{enum css_property_value_type}.  

Sun Jan 18 15:05:43 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @q -> @val, @qq -> @tmp_val.  

Sun Jan 18 15:03:41 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @oo -> @tmp_values, @n -> @number.  

Sun Jan 18 15:01:28 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @o -> @values, @ol -> @values_count.  

Sun Jan 18 14:58:36 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @op -> @new_values, @olp -> @new_values_count.  

Sun Jan 18 14:55:01 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @ww -> @max_value, @www -> @pixels_per_chars.  

Sun Jan 18 14:53:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Introduced css_property_info.(parser|parser_data). Unused yet.  

Sun Jan 18 14:52:55 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @a -> @str, @aa -> @tmp_str.  

Sun Jan 18 14:50:12 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_frame_widths(): @d -> @divisor.  

Sun Jan 18 14:43:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.c, property.h, value.c:

	CSS_DP_* -> CSS_PT_*, CSS_DV_* -> CSS_VT_* 

Sun Jan 18 14:41:02 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Clarify {struct css_property} description.  

Sun Jan 18 14:37:56 2004  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh, configure:

	Removed ./configure and ./configure-do -> ./configure, therefore
	restoring the original situation. This solution is not going to fly,
	./configure gets overwritten by automake rules.  

Sun Jan 18 14:25:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, property.h:

	css_property*.property -> .type 

Sun Jan 18 14:23:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: value.c, value.h:

	Tidyup.  

Sun Jan 18 14:23:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, parser.h:

	css_parse_decl -> css_parse_properties 

Sun Jan 18 14:22:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.h, value.c, value.h:

	css_decl_value -> css_property_value, css_decl_valtype ->
	css_property_value_type -> css_decl_property -> css_property_type 

Sun Jan 18 14:18:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/property.h:

	Try to clarify more css_property_info.value_type.  

Sun Jan 18 12:54:45 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.h:

	Update css_parse_decl() description.  

Sun Jan 18 12:50:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Trivial clarification.  

Sun Jan 18 03:01:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, property.c, property.h:

	Remove @namelen from property info struct. It will be useles when we
	switch to fast find and we do not use it for other string to data
	mapping structs.  

Sun Jan 18 02:55:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, css/Makefile.am, css/parser.c,
	css/property.c, css/property.h:

	Move CSS property info to own file and expose css_property_info[].  

Sun Jan 18 02:40:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_decl(): Localize loop variables.  

Sun Jan 18 02:38:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.h:

	css_parse_decl(): Update comment.  

Sun Jan 18 02:36:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Minor cleanup.  

Sun Jan 18 02:33:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	css_parse_decl(): Use while loop. Nothing changed other than
	indentation and removal of again label.  

Sun Jan 18 02:28:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Fun with gotos so we don't parse declarations recursively anymore.  

Sun Jan 18 01:57:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Add css value type info to property_info struct. ObsoletesM
	prop2valtype.  

Sun Jan 18 01:50:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: parser.c, parser.h:

	css_parse_decl(): Don't return anything. Caller can check
	list_empty() to see if anything was added.  

Sun Jan 18 01:48:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/parser.c:

	Remove function comment that is also in the header file.  

Sun Jan 18 00:59:10 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, config/conf.c, lowlevel/home.c:

	Use the new confdir/conffile option names (config-dir/config-file).  

Sun Jan 18 00:56:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Fixed -confdir/-conffile.  

Sun Jan 18 00:29:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	-confdir -> -config-dir, -conffile -> -config-file, idea by Doug
	Kearns <djkea2@mugca.its.monash.edu.au>.  

Sun Jan 18 00:17:15 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	I'm sorry Zas, but you *knew* this is coming. Please split it up.  

Sun Jan 18 00:16:11 2004  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, Makefile.am, autogen.sh, configure:

	autoconf ./configure -> ./configure-do. ./configure is for now a
	trivial wrapper but will do some automagic feature.h rewriting and
	so. You will need to rm ./configure && cvs up && ./autogen.sh after
	this commit.  

Sun Jan 18 00:10:04 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Complete parse_frame_widths() cleanup. Changes made do not affect
	behavior. Among them, explicit variables names, minor trivial
	optimizations, got rid of a goto, comments. Sorry, this patch is
	quite big but concerns only this function, and i did not want to
	flood with cvs commits ;).  

Sat Jan 17 23:20:52 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Jan 17 23:16:19 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jan 17 23:05:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Converted Jonas' strlcasecmp()s to strncasecmp()s, which actually
	make sense :^). Should fix 'text-align: right;' bug reported by
	Jonas.  

Sat Jan 17 22:49:40 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Hotkey conflicts fixes.  

Sat Jan 17 22:12:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Fixed string shufflink in TEXT_ALIGN value parser.  

Sat Jan 17 22:11:32 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Jonas' div right; testcase.  

Sat Jan 17 22:04:49 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Also a <div> test.  

Sat Jan 17 21:22:41 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simpletext.html:

	Added text-align tests.  

Sat Jan 17 21:18:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Compilation fix.  

Sat Jan 17 21:17:22 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, parser.c, property.h, value.c:

	Added support for text-align property.  

Sat Jan 17 20:24:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, property.h, value.c:

	Fixed support for lighter and normal values of font-* properties.  

Sat Jan 17 19:59:17 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplefont.html:

	Enhance the font-weight: normal testing.  

Sat Jan 17 19:53:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Added support for font-weight lighter, bolder and normal.  

Sat Jan 17 19:52:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/README:

	About current big design problems.  

Sat Jan 17 19:43:25 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed redundant skip_whitespace() from FONT_ATTRIBUTE parser.  

Sat Jan 17 19:40:26 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplefont.html, src/document/css/apply.c,
	src/document/css/parser.c, src/document/css/property.h,
	src/document/css/value.c:

	font-style property support.  

Sat Jan 17 17:35:34 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/parser.c:

	Alphabetize.  

Sat Jan 17 16:46:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/Makefile.am:

	Fixed linking of the CSS code.  

Sat Jan 17 16:46:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/apply.c:

	Sort CSS appliers like the css_decl_propery enum.  

Sat Jan 17 16:46:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Removed obsolete TODOs.  

Sat Jan 17 16:45:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.c:

	Cleaned up the spaghetti rgb() parsing code by moving the color
	component extraction to rgb_component_parser().  

Sat Jan 17 16:36:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, apply.h, parser.c,
	property.h, value.c, value.h:

	Moved {struct css_property} from apply.h to property.h.  

Sat Jan 17 16:26:21 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/apply.h:

	Moved generic stuff from parser.h to README.  

Sat Jan 17 16:23:36 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.h:

	Removed redundant struct list_head.  

Sat Jan 17 16:23:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: parser.h, README, Makefile.am:

	Moved generic stuff from parser.h to README.  

Sat Jan 17 16:01:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: css/Makefile.am, css/apply.c, css/apply.h,
	css/css.c, css/css.h, html/parser.c:

	document/css/css.* -> document/css/apply.* 

Sat Jan 17 15:54:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, css.c, parser.c,
	parser.h:

	Moved the current stub of future CSS parser from document/css/css.*
	to document/css/parser.*.  

Sat Jan 17 15:46:31 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/value.h:

	Typo fix.  

Sat Jan 17 15:45:48 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: Makefile.am, apply.c, css.c, value.c, value.h:

	Moved CSS value parser from document/css/css.* to
	document/css/value.*.  

Sat Jan 17 15:40:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Removed already obsolete TODO.  

Sat Jan 17 15:36:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.h, css.h:

	Update the _H define.  

Sat Jan 17 15:32:33 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Oops, include document/css/css.h.  

Sat Jan 17 15:32:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Moved value parsing to separate functions.  

Sat Jan 17 15:25:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Statify the appliers.  

Sat Jan 17 15:22:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.h, css.h:

	Include some stuff required by {struct css_property}.  

Sat Jan 17 15:21:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/css/apply.c,
	document/css/css.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c, sched/session.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	Moved document/html/parser.h inclusion to the usual place, since it
	should be safe now.  

Sat Jan 17 15:18:27 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: Makefile.am, internal.h, parser.c, parser.h,
	renderer.c, tables.c:

	Moved the aggressive format/par_format #defines (together with
	html_top and html_stack) from document/html/parser.h to
	document/html/internal.h.  

Sat Jan 17 15:05:43 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, apply.h, css.c, css.h:

	Export {struct css_property}.  

Sat Jan 17 14:59:26 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Compilation fix.  

Sat Jan 17 14:57:55 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Moved proprety applying to separate functions.  

Sat Jan 17 14:49:07 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/idnes_mail.html:

	This is a nice test for font-weight, color, background-color on body
	etc. And it's all inlined in the style attributes.  

Sat Jan 17 14:44:56 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Make sure that background-color property on body element gets
	handled properly. Well, it's a mess.  

Sat Jan 17 14:38:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c:

	Compilation fix.  

Sat Jan 17 14:33:43 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/: simplecolors.html, simplefont.html:

	Separated font-related tests to simplefont.html, making them also
	more elaborate.  

Sat Jan 17 14:26:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/css/: apply.c, css.c, apply.h, css.h:

	css_apply() now returns void instead of int because we do not use
	the return value anywhere anyway. Proposed by Jonas.  

Sat Jan 17 14:18:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/opttypes.c, cookies/parser.c,
	document/html/parser.c, document/html/tables.c,
	protocol/http/header.c, protocol/smb/smb.c, util/string.h:

	Removed the WHITECHAR() macro, we use the standard builtin isspace()
	macro instead which should be completely equivalent.  

Sat Jan 17 14:16:28 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/css/apply.c, document/css/css.c, util/string.h:

	Make util/string.h directly include its prerequisite <ctype.h>.  

Sat Jan 17 14:12:34 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	Made the bold tests a little more explicit.  

Sat Jan 17 14:09:39 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/dialogs/document.c:

	Made the Document info msgbox scrollable, usable ie. for long
	titles/urls (test/longtitle.html). Patch by David A. Capello
	<dacap@users.sourceforge.net>.  

Sat Jan 17 14:06:22 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/document/Makefile.am,
	src/document/html/Makefile.am, src/document/html/css.c,
	src/document/html/css.h, src/document/html/parser.c,
	src/document/css/Makefile.am:

	document/html/css.* -> document/css/css.* 

Sat Jan 17 07:49:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Make the font-weight evaluation correct. Values pointed out by
	Miciah.  

Sat Jan 17 07:43:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Make property name to property enum data driven.  

Sat Jan 17 07:23:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Add support for font-weight (bold) support.  

Sat Jan 17 07:22:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* test/css/simplecolors.html:

	Add background-color and font-weight tests.  

Sat Jan 17 06:45:38 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sat Jan 17 02:24:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Handle the background-color property.  

Sat Jan 17 02:09:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: css/apply.c, css/css.c, html/css.c:

	Use skip_whitespace() macro.  

Sat Jan 17 01:56:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	open_current_link_in_new_tab(): Merge in get_tab_link_url(). Fix
	leak related to url list introduction previous today.  

Sat Jan 17 01:53:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	Specialize open_in_new_tab() to open current link in new tab. Rename
	to open_current_link_in_new_tab().  

Sat Jan 17 01:50:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Call open_url_in_new_tab() directly.  

Sat Jan 17 01:48:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Merge backend for 'tab openers' with open_url_in_new_tab().  

Sat Jan 17 01:43:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	Make open_in_new_tab() more generic to also handle backgrounded
	tabs.  

Sat Jan 17 01:29:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/Makefile.am:

	We actually don't use libhtml.a anywhere, so it'd be good to say so.  

Sat Jan 17 01:26:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, css/apply.c, css/apply.h, css/css.c,
	css/css.h, html/Makefile.am, html/css.c, html/css.h, html/parser.c:

	Very trivial CSS support introducted. It includes mostly the most
	basic framework for the style managment (basically just a temporary
	properties list), bunch of ideas in comments, and the initial
	css_apply(), which now just orders parsing of the element's style
	attribute (no real stylesheet yet, therefore). Oh and only 'color'
	property is supported for now, however it should be easy to
	introduce more. Have fun.  

Sat Jan 17 01:21:15 2004  Petr Baudis <pasky@ucw.cz>:

	* test/css/simplecolors.html:

	Very simple test case for the 'color' property specified in the
	'style' attribute of an element.  

Sat Jan 17 01:20:11 2004  Petr Baudis <pasky@ucw.cz>:

	* test/Makefile.am:

	New css/ directory.  

Sat Jan 17 01:09:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Rename @i to @current_frame_number and initialize it to 0 if it is
	-1 (no frame has been chosen yet). This fixes drawing of title for
	backgrounded tabs containing frame documents.  

Sat Jan 17 00:27:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, util/string.c, util/string.h:

	Define a string item struct for string lists moving list members out
	of struct string. Requested by pasky.  

Sat Jan 17 00:11:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: util/color.c, util/color.h, config/options.c,
	document/html/parser.c, config/opttypes.c:

	decode_color() now takes the source string length as an additional
	argument.  

Sat Jan 17 00:05:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/color.c:

	Make more use of @slen in decode_color().  

Fri Jan 16 23:49:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, sched/session.c, sched/session.h,
	terminal/tab.c:

	Use string lists instead of url_list structure and remove lot of
	trivial boring code.  

Fri Jan 16 23:48:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Add support for string lists. This adds list members to struct
	string but since we mostly use it via local variables it should not
	have a big impact.  

Fri Jan 16 22:31:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	do_open_in_new_tab(): Only add an url to list if it is non NULL
	since we test !list_empty() in process_session_info().  

Fri Jan 16 20:30:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Skip the 'MAP@' part of uris when dumping link references.  

Fri Jan 16 20:26:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Only dump link titles which are not empty.  

Fri Jan 16 20:08:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/cmdline.c, config/cmdline.h:

	Simplify the composing of the @url_list by using function variable
	and passing the list_head pointer to parse_option(). Let
	parse_option() return the first url again to simplify @url setup.  

Fri Jan 16 19:50:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	No empty @url in the case where the url list returned from
	parse_options() is empty is also a fatal error.  

Fri Jan 16 18:51:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor fastmem mode optimization in parser.  

Fri Jan 16 18:21:05 2004  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c, config/cmdline.h,
	sched/session.c, sched/session.h, terminal/tab.c:

	Support for more than one url on command line. ELinks will open new
	tabs for them. For now, -dump and -source will only consider first
	url given (ideas?). Patch by Witold Filipczyk, slightly modified by
	me.  

Fri Jan 16 18:09:59 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	We the normal people put system include to other system includes. We
	do not want to end up again like Links or some other software
	packages, do we? 

Fri Jan 16 17:49:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/css/: .cvsignore, .vimrc:

	Add control files.  

Fri Jan 16 16:30:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Update link_state using get_link_state() safer since there might be
	some corner cases.  

Fri Jan 16 16:29:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix the leak related to <sub> and <sup> the Right Way[tm].  

Fri Jan 16 16:18:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Revert last patch. It broke link numbering.  

Fri Jan 16 15:35:34 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Make the HTML renders link_state variable global so recursive calls
	to put_chars() also updates the outer put_chars() link_state. Should
	fix leaks related to links in <sub> and <sup> tags.  

Fri Jan 16 14:49:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add some temporary assertions for detecting leak in the renderer.  

Thu Jan 15 22:51:52 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use directly @doc_view when gettin current link for globhist.  

Thu Jan 15 22:51:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, session.h:

	Introduced get_current_link_in_view() which is same as
	get_current_link() but takes directly struct document_view as an
	argument.  

Thu Jan 15 22:36:11 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Jan 15 21:44:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use get_current_link() to get @historyitem, instead of copy of the
	code.  

Thu Jan 15 21:30:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A missing header inclusion was added.  

Thu Jan 15 17:34:27 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Simplify and fix scroll_menu(). It now behaves like it should when
	paging down in View menu.  

Thu Jan 15 17:02:24 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Simplify menu_page_(up|down)().  

Thu Jan 15 16:11:18 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Move menu page up/down code to separated functions.  

Thu Jan 15 16:04:19 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix a segfault occuring when pressing page down on empty Link
	submenu of main menu.  

Thu Jan 15 05:01:00 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Rename a few functions' parameters and local variables from @down to
	@file_download 

Thu Jan 15 04:41:22 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Create a new function, is_in_downloads_list, to check whether the
	passed struct file_download * is in @downloads (the global variable
	that points into the list of running file downloads).  
	
	Replace the equivalent code in display_download with a call to this
	function.  
	
	In common_download_do and continue_download_do, only add
	@file_download to the download manager _after_ calling load_url or
	change_connection, respectively, and only if
	is_in_downloads_list(file_download).  
	
	This fixes a bug reported by dacap on IRC whereby ELinks would crash 
	when one attempted to download a file while the download manager was
	open.  

Wed Jan 14 19:54:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Add temporary fix for redrawing after calling find_next*(). It broke
	during do_action() generalization.  

Wed Jan 14 18:22:44 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/download.c:

	Swap two lines. This should fix bug 366.  

Wed Jan 14 18:00:06 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fix.  

Wed Jan 14 17:40:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bug 231 (memory corruption in html renderer) should be fixed now.
	Patch by Miciah and me.  

Wed Jan 14 17:10:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/listbox.c, bfu/menu.c,
	bfu/menu.h, config/dialogs.c, config/kbdbind.c, config/kbdbind.h,
	dialogs/info.c, sched/action.c, sched/action.h,
	viewer/text/search.c, viewer/text/view.c:

	Rename keyact enum to action. Function names changed to reflect
	this.  

Wed Jan 14 16:53:06 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Binding keys to ACT_NONE is useful to get rid of default
	keybindings. Suggested by Jonas.  

Wed Jan 14 12:25:21 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Jan 13 18:46:57 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updated.  

Tue Jan 13 16:13:24 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Jan 13 15:37:41 2004  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Do not display ACT_NONE action in keybinding manager, bind keys to
	this action is useless.  

Tue Jan 13 15:05:32 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix mouse click detection on main menu (introduced by main menu
	previous patch).  

Tue Jan 13 14:54:39 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, mime/dialogs.c:

	FREE_ANY macro is now used to shorten lines, it is equivalent to
	(FREE_LIST|FREE_TEXT|FREE_RTEXT|FREE_DATA).  

Tue Jan 13 14:48:51 2004  Laurent Monin <zas@norz.org>:

	* src/mime/dialogs.c:

	No need to pass @xxx to do_menu(), just use NULL instead. Safer
	imho.  

Tue Jan 13 14:41:41 2004  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some assertions were added (related to bug 366).  

Tue Jan 13 14:26:48 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Fix handling of various spacing in main menu.  

Tue Jan 13 14:22:55 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listmenu.c:

	Use macros to check end of menu.  

Tue Jan 13 14:13:15 2004  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	Move ACT_NONE at start of enum keyact and use zero as value for it.
	It was breaking contextual menus display and perhaps other stuff.  

Tue Jan 13 08:45:53 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 12 18:23:07 2004  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Updated italian translation.  

Sun Jan 11 22:16:17 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sun Jan 11 18:18:42 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	GPLv2 only. Reminded by Jonas.  

Sun Jan 11 18:13:57 2004  Petr Baudis <pasky@ucw.cz>:

	* COPYING:

	Removed ELusive part for the foreseeable future.  

Sun Jan 11 17:48:25 2004  Petr Baudis <pasky@ucw.cz>:

	* COPYING:

	GPLv2, not any future version.  

Sun Jan 11 05:41:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/status.c, sched/task.c:

	Instead of zeroing the session's 'visited' flag in display_tab_bar, 
	zero it in ses_forward.  
	
	This is more logical and efficient, as we now zero the flag once, 
	when we finish loading the page, instead of repeatedly, once every
	time we update the tab bar, from when we first start trying to load
	the page to when we finish or fail.  
	
	More importantly, it fixes a bug whereby we would leave the tab
	highlighted as freshly loaded even if the page failed to load.  

Sat Jan 10 11:16:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jan 10 11:03:58 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Made -confdir/-conffile captions more consistent and fixed -confdir
	description. Idea by Doug Kerans <djkea@mugca.its.monash.edu.au>.  

Sat Jan 10 06:10:36 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Fri Jan  9 21:30:58 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Explode count_menu_size() in 4 functions.  

Fri Jan  9 21:04:19 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Got rid of @s, and initialize mx to zero.  

Fri Jan  9 20:48:01 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	count_menu_size() was cleaned and fixed. Next step will be to cache
	text and rtext widths, as well as display-related infos, it will
	simplify things a lot (we currently make and remake many useless
	calculations) 

Fri Jan  9 15:20:59 2004  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bfu/menu.c:

	Use constants and make calculations explicit, code simplification,
	MENU_HOTKEY_SPACE disappears, locally defined macros replace it,
	improving code clarity.  

Fri Jan  9 14:14:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	...except this little mistake. Fixed segfaults when opening menu
	thru kbd.  

Fri Jan  9 14:14:08 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reverted bogus Miciah' fix, what we did previously was ok...  

Fri Jan  9 14:07:03 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Fix segfaults resulting from pasky's menu-handler butchering.
	(@win->data->win is _not_ the same as @win.) 

Fri Jan  9 13:12:12 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/backend/xbel.c:

	In the XBEL bookmark code, when adding a folder, do not bother to
	set ->root or ->box_item->type, as add_bookmark does that for us.  

Fri Jan  9 13:07:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/leds.c:

	Itty-bitty whitespace fix.  

Fri Jan  9 12:57:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	#undef macros once we're done with them.  

Fri Jan  9 12:38:30 2004  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Added feature.h. Oops.  

Fri Jan  9 11:08:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Pass @fwd to mainmenu_kbd_handler().  

Fri Jan  9 11:08:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved @s from mainmenu_handler() to mainmenu_kbd_handler().  

Fri Jan  9 11:00:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Readded DIST macro, which got chopped most of it off during
	reindentation.  

Fri Jan  9 10:56:14 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	In draw_menu_left_text_hk, rename the @len parameter to @hotkey_pos.  

Fri Jan  9 10:51:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Remove an inaccurate comment.  

Fri Jan  9 10:44:35 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved menu/kbd event handling from mainmenu_handler() to
	mainmenu_(mouse|kbd)_handler().  

Fri Jan  9 10:40:07 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Blanklines.  

Fri Jan  9 10:39:17 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Moved menu/kbd event handling from menu_handler() to
	menu_(mouse|kbd)_handler().  

Fri Jan  9 10:38:37 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	#undef macros once we're done with them.  

Fri Jan  9 10:36:44 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Remove useless test. Spotted by Miciah.  

Fri Jan  9 10:27:57 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/file/file.c:

	In stat_user and stat_group, don't check for the case where a
	successful stat(2) call gives a uid or gid of -1. If it ever does,
	why not humour the system and proceed to use the values it has
	provided to us? 

Fri Jan  9 10:25:54 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use @menu->selected instead of @s. Spotted by Miciah.  

Fri Jan  9 10:22:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed the Jonas' strangeness.  

Fri Jan  9 10:09:31 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Revert last patch, it was correct. Sorry, Miciah ;).  

Fri Jan  9 09:52:55 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Start on first main menu item displayed. Suggested by Miciah.  

Fri Jan  9 09:42:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Do not give the B_ENTER flag to the 'Do not show anymore' button in
	the 'Write config success' box.  

Fri Jan  9 09:36:45 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	When closing the current tab, switch to the previous tab _first_, so
	that the next tab doesn't lose its 'unvisited' highlighting.  

Fri Jan  9 09:31:55 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Fix session saving to bookmark tabs from left to right.  

Fri Jan  9 09:27:58 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/bookmarks.c:

	Remove an obsolete comment.  

Fri Jan  9 09:26:25 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.c:

	Update a comment: s/item_free/flags/ 

Fri Jan  9 09:14:21 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/tab.c:

	Remove the @link parameter from get_tab_link_url. The parameter only
	says whether to return NULL or to actually do something, so move
	that check to the callers.  

Fri Jan  9 07:20:11 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	Include util/ttime.h for ttime.  

Fri Jan  9 01:22:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	I hope this is strange enough.  

Fri Jan  9 01:10:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Remove a few ending action description dots.  

Fri Jan  9 01:08:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Minor cleanup of action listbox initialization. No longer gettext
	action names but only the descriptions.  

Fri Jan  9 01:06:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Add description to 'none' action.  

Fri Jan  9 00:43:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Don't add listbox for ACT_SCRIPTING_FUNCTION since we hide it anyway
	and the current generic hierbox handling always unhides all root
	level boxes.  

Fri Jan  9 00:21:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix off by one error, which is really not my fault because we
	skipped 'none' before.  

Fri Jan  9 00:14:28 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Alphabetise action_table and keyact enum. Hmm 

Thu Jan  8 23:36:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix startup goto dialog. Patch by Zardoz.  

Thu Jan  8 23:26:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/cmdline.c, config/options.h, config/options.inc,
	mime/backend/mailcap.c:

	We only use alias description and captions for commandlines so no
	need to store them for 'regular' options.  

Thu Jan  8 22:26:04 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	automatic session saving/restoring support 

Thu Jan  8 22:22:23 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.9.CVS. Please backport all the relevant bugfixes to REL_0_9_1rc1
	branch. Expected 0.9.1-final release: Sunday. What a mess.  

Thu Jan  8 22:15:46 2004  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.9.1rc1 

Thu Jan  8 22:14:57 2004  Laurent Monin <zas@norz.org>:

	* src/document/renderer.c:

	Revert extra patch made by Jonas. It has nothing to do there.  

Thu Jan  8 22:14:44 2004  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	now: feature.h and <object>.  

Thu Jan  8 22:08:11 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Thu Jan  8 22:03:15 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Jan  8 22:03:08 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Jan  8 22:00:01 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Typo fix.  

Thu Jan  8 21:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Jan  8 21:54:48 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 21:54:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c,
	document/renderer.c:

	Hmm or was it document.browse.forms.input_size. :-P 

Thu Jan  8 21:51:12 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Jan  8 21:48:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	'Twas document.browse.forms.input_size.  

Thu Jan  8 21:43:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	document.html.default_forms_input_size ->
	document.browse.frames.input_size. It wasn't introduced that long
	ago so I think it doesn't deserve an alias ;-).  

Thu Jan  8 21:26:00 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	get_bgcolor() now again bails out when it smells mono color_mode.
	Zas removed this, but he didn't mention it in the log message so I
	believe it was just a mistake.  

Thu Jan  8 21:17:29 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Add the ELinks VERSION header only when we are writing the file from
	scratch.  

Thu Jan  8 21:07:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Sort Document :: Cache options.  

Thu Jan  8 21:00:37 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Punct. fix.  

Thu Jan  8 18:37:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c,
	dialogs/info.h, dialogs/menu.c, sched/action.c:

	Add resource-info action and cleanup res_info() renaming it to
	resource_info() and trimming args.  

Thu Jan  8 17:58:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Update elinks.conf.5 copyright and sync with current option tree.  

Thu Jan  8 17:53:06 2004  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Thu Jan  8 17:49:00 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Various fixes and cleanups.  

Thu Jan  8 17:24:37 2004  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarion translation update.  

Thu Jan  8 17:17:36 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Remove ending dots in captions.  

Thu Jan  8 17:14:41 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Extend caption test to i18n captions.  

Thu Jan  8 16:58:17 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French grammar fixes.  

Thu Jan  8 16:53:04 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	ELinks version is now written at top of configuration file.  

Thu Jan  8 16:07:48 2004  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Only add a slash to config file name when needed, it prevents double
	slashes in filename displayed in message boxes.  

Thu Jan  8 15:41:21 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 15:25:18 2004  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Touch option when toggling, suggested by Jonas, and test for term in
	write_config_success().  

Thu Jan  8 14:59:53 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 14:57:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, sched/session.c:

	Rename ui.sessions.homepage_url to ui.session.homepage, and change
	the behaviour so that "" means use getenv(WWW_HOME) instead. Also
	restore the fallback to WWW_HOME_URL.  

Thu Jan  8 14:56:35 2004  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, dialogs.c:

	Test for ui.success_msgbox was moved to write_config_success(). A
	new button [ Do not show anymore ] permits to toggle
	ui.success_msgbox from the message box.  

Thu Jan  8 14:25:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Do a little wrapping to make it possible to call enter() through
	do_frame_action().  

Thu Jan  8 14:19:24 2004  Laurent Monin <zas@norz.org>:

	* src/document/: options.h, html/parser.c, html/renderer.c:

	Use macros to wrap comparaisons of use_document_colors.  

Thu Jan  8 13:47:05 2004  Laurent Monin <zas@norz.org>:

	* src/document/: options.c, options.h, html/parser.c,
	html/renderer.c:

	Use "colors" instead of "colours" since it seems the first one is
	the most used in ELinks code.  

Thu Jan  8 13:37:08 2004  Laurent Monin <zas@norz.org>:

	* src/: document/options.c, viewer/text/marks.c:

	Trailing spaces fixes.  

Thu Jan  8 13:32:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Thu Jan  8 13:28:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c:

	Normalise exit_prog(). It now takes a @query argument inverting the
	previous meaning.  

Thu Jan  8 13:13:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, lowlevel/signals.c:

	Don't call exit_prog() but queue terminal destruction directly.
	exit_prog() is a high level ui function and should not be called
	from a signal handler.  

Thu Jan  8 10:04:05 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan  8 09:53:06 2004  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/action.c, sched/session.c,
	sched/session.h:

	As requested by Jonas, ui.sessions.homepage_url option now controls
	default homepage. And ui.sessions.ignore_www_home permits to force
	use of ui.sessions.homepage_url value instead of env. var. WWW_HOME.
	Note that WWW_HOME_URL still exists in setup.h and is used as
	default value for ui.sessions.homepage_url 

Thu Jan  8 09:09:35 2004  Laurent Monin <zas@norz.org>:

	* src/sched/action.c:

	Typo fixes.  

Thu Jan  8 03:48:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix action for submit-form-reload.  

Thu Jan  8 03:44:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c:

	Introduce submit-form and submit-form-reload actions mostly to use
	them for menus and simplify submit_form_do() [renamed to
	submit_form()] by calling it through do_frame_action().  

Thu Jan  8 03:28:06 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, sched/action.c,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c:

	Introduce reset-form action and handle it in do_action() making it
	possible to handle form reseting entries in the link menu via the
	action object model and frontend reset form via do_frame_action().  

Thu Jan  8 03:15:02 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	do_action(): Handle enter and enter-reload for menu code. Nuke
	send_enter_reload().  

Thu Jan  8 02:50:21 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup double up on action kbd_action() call.  

Thu Jan  8 02:48:19 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Complete merging of send_event() stuff with do_action(). Quit.  

Thu Jan  8 02:34:46 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle quit and lua-console actions.  

Thu Jan  8 02:23:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Woopsi, forgot to check whether !anonymous before downloading link.  

Thu Jan  8 02:20:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Another adventures simplification. Merge frm_download() goodies into 
	download_link().  We do not need the link->type checking parts since 
	get_link_url() will take care of those for us. Instead of passing
	some new enum the action enum is passed to download_link(), much
	simpler. As for the "MAP@" checking it should hopefully not harm
	anything else we could surround it in ACT_DOWNLOAD or something.  

Thu Jan  8 02:02:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	Another big simplification possible by using do_frame_action() as
	front end.  It is now used to handle download and download-image
	actions.  send_download() is now equivalent to download_link().  

Thu Jan  8 01:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Make it possible to pass magic numbers to the do_frame_action()
	@func handler.  

Thu Jan  8 01:34:13 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Rename send_image() to view_image() and use it through
	do_frame_action().  

Thu Jan  8 01:26:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/link.c, viewer/text/view.c:

	do_action(): Handle image and link menu actions. Eh patch is bloated
	by a few cleanups.  

Thu Jan  8 01:09:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Backend the goto url bi'nez using the get_current_*url() functions.  

Thu Jan  8 00:57:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	do_action(): Handle the rest of the goto url actions.  

Thu Jan  8 00:39:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Move goto home page code to separate function to keep the switch
	noodle clean.  

Thu Jan  8 00:29:58 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Move lots of action handling from send_event() to do_action().  

Wed Jan  7 23:53:30 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Bug when trying to get_opt_*() an alias.  

Wed Jan  7 23:26:12 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  7 23:24:29 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Debug mode helper to detect ending dot in option captions. It will
	emit a debug message in this case.  

Wed Jan  7 22:55:37 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Ending dot was removed in option caption.  

Wed Jan  7 21:24:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, viewer/text/search.c:

	Move typeahead options to document.browse.search.* and make them
	more generic so they might even be used for other search actions.  

Wed Jan  7 20:02:11 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	html_iframe() now handles id as a synonymum to name attribute.  

Wed Jan  7 20:01:14 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Implemented very simplistic, quick'n'dirty <object> element support.
	Now it just wraps either html_iframe() or html_img() or it just does
	nothing. You can test it ie. at http://digitasaru.net/ (the
	navbar.html is an object of type text/html).  

Wed Jan  7 19:32:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c:

	menu_save_url_as() -> save_url_as() and drop some args.  

Wed Jan  7 19:27:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	Use local term variable.  

Wed Jan  7 19:18:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/action.c,
	terminal/terminal.c, terminal/terminal.h:

	Rename menu_shell() to exec_shell() and move to terminal files.  

Wed Jan  7 19:11:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/action.c:

	do_frame_action(): Assert the view state.  

Wed Jan  7 19:08:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Rename menu_save_formatted() to save_formatted_dlg() and use
	do_frame_action() as backend (or is it front end ;).  

Wed Jan  7 18:57:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	More #include fixes related to the recent action patches.  

Wed Jan  7 18:52:59 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, terminal/tab.c,
	viewer/text/view.c:

	Remove / fix #includes related to the recent action patches.  

Wed Jan  7 18:26:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Mention what '~' in string mean that hotkeys should be unique.  

Wed Jan  7 17:02:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle save-* actions. Saving formatted should always
	be interactive so we hardcode that in menu_save_formatted() now.  

Wed Jan  7 16:46:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Update the anonymous setup menu to use the new *buzz* action object
	model *buzz ;-) 

Wed Jan  7 16:42:27 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	do_action(): Save option and open terminal option dialog was added.  

Wed Jan  7 16:29:00 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/view.c:

	Move some frame related action handling to do_action(). It uses
	do_frame_action() as a backend which is just a moved version of
	menu_for_frame().  

Wed Jan  7 15:23:16 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c:

	Introduce INIT_MENU_ACTION() to decrease the noise of unused
	arguments.  

Wed Jan  7 14:53:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Use add_menu_action() in link_menu().  

Wed Jan  7 14:47:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c, viewer/text/link.c:

	Make add_menu_action() reflect that no data can be passed. Also
	purge the flag arg since it is not used.  

Wed Jan  7 14:44:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, sched/action.c, sched/action.h,
	viewer/text/view.c:

	do_action(): Don't take any data arg. We handle that in the
	function.  

Wed Jan  7 14:41:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/link.c,
	viewer/text/view.c:

	Move bookmark adding action handling to do_action().  

Wed Jan  7 12:13:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/action.c, viewer/text/link.c,
	viewer/text/view.c:

	Move ACT_OPEN_* handlers to do_action().  

Wed Jan  7 08:44:27 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jan  7 03:49:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, bookmarks/dialogs.h, dialogs/menu.c,
	sched/action.c:

	Handle ACT_BOOKMARK_TABS in do_action(). Normalise the dialog to
	only take the terminal.  

Wed Jan  7 03:47:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Ensure we are not in anonynous mode before autosaving.  

Wed Jan  7 03:42:43 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Don.t add bookmark entries when running in anonymous mode.  

Wed Jan  7 03:18:18 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, bookmarks/dialogs.h, cache/dialogs.c,
	cache/dialogs.h, config/dialogs.c, config/dialogs.h,
	cookies/dialogs.c, cookies/dialogs.h, dialogs/download.c,
	dialogs/download.h, formhist/dialogs.c, formhist/dialogs.h,
	globhist/dialogs.c, globhist/dialogs.h, sched/action.c:

	Normalise manager functions. They are nolonger menu functions so
	there is no need to pass bogus arguments to them.  

Wed Jan  7 03:02:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Presenting the missing good parts from last patch. Removing
	#includes. I sense a small break in the moaning from paskys build
	box.  

Wed Jan  7 02:57:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Oops forgot to remove menu functions so do_action() is used.  

Wed Jan  7 02:53:30 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Remove a superfluous |continue| introduced in
	src/document/html/renderer.c:1.254->1.255.  

Wed Jan  7 02:50:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: globhist/dialogs.c, sched/action.c, viewer/text/view.c:

	do_action(): Handle the manager actions. Also drop the anonymous
	checking since unwanted buttons will not be shown. For globhist
	manager it basicly becomes more like the cache manager, and
	option/keybinding manager will only let the user read descriptions
	and do we really want to deprive anonymous users this educational
	experience? ;-) 

Wed Jan  7 02:01:45 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c:

	Move the rest of the document option toggling in send_event() to
	do_action().  

Wed Jan  7 01:57:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/action.c, viewer/text/view.c, viewer/text/view.h:

	Ahh the joy of generalization. Toggling document option that is.  

Wed Jan  7 01:22:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, dialogs/menu.c, dialogs/menu.h,
	sched/Makefile.am, sched/action.c, sched/action.h,
	viewer/text/view.c:

	Move do_action() to separate file.  

Wed Jan  7 01:09:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	send_event(): Use do_action().  

Wed Jan  7 00:58:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, dialogs/menu.c, dialogs/menu.h:

	Optionalize whether to bug or not when the action was not handled
	and also return the action if it handled or ACT_NONE. This should
	make it usable for send_event() later.  

Wed Jan  7 00:40:47 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/renderer.c, viewer/text/link.c, viewer/text/link.h:

	Finish the moving of sort_links() by also moving done_link_members()
	used by it and others only in document/. Fix #include of stdlib.h
	for qsort (on FreeBSD atleast).  

Wed Jan  7 00:38:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Instead of defining a wrapper function for each sub menu define
	do_submenu() and pass the sub menu items as the data.  

Wed Jan  7 00:21:48 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/view.c:

	do_action(): Handle close all tabs but current action and normalize
	the function since it no longer needs to be a menu function.  

Wed Jan  7 00:12:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Handle most used toggling actions.  

Wed Jan  7 00:06:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Handle ACT_DOCUMENT_INFO, ACT_HEADER_INFO and
	ACT_KILL_BACKGROUNDED_CONNECTIONS.  

Tue Jan  6 23:59:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	It was unanimously decided to use minimize instead of shrink.  

Tue Jan  6 23:39:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Insert all unhandled actions so it will be easier to
	muddle on.  

Tue Jan  6 23:26:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	Add ACT_CACHE_SHRINK action and use it for do_action(). The concept
	is muddled so I chose shrink since to me it only indicates some best
	effort kind of thing but the action description should be quite
	clear.  

Tue Jan  6 23:02:39 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Add ACT_RELOAD handling.  

Tue Jan  6 22:55:22 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	do_action(): Add ACT_GOTO_URL and sort actions alphabetically for
	now.  

Tue Jan  6 22:47:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Blast menu wrappers in favour of do_action() handling.  

Tue Jan  6 21:48:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: document/renderer.c, viewer/text/link.c,
	viewer/text/link.h:

	Moved sort_links() from viewer/text/link.c to document/renderer.c.
	It really operates on {struct document} exclusively, so it really
	belongs to document/.  

Tue Jan  6 21:43:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Add a notice to the force_dump() that what happenned is not a
	regular segfault but rather an internal error, and therefore users
	shouldn't report it as a segfault but internal error. Really tired
	of those 'ELinks segfaulted' reports, being just assertion failures
	in disguise.  

Tue Jan  6 21:00:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/menu.h:

	Introduce do_action() for handling session oriented actions. It can
	hopefully gradually evolve into some backend for frame_ev() or
	send_event(). To start with it is used for menus since - after Zas'
	menu action hacking - we begin to use generic action event handlers.
	It is called when the menu function is NULL and the action !=
	ACT_NONE. A macro add_menu_action() ease the dynamic adding of such
	menu entries.  

Tue Jan  6 19:35:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Fix bookmark adding from plain document (where link->name is NULL)
	and improve the 'name' by checking if globhist can provide us with a
	title.  

Tue Jan  6 06:28:15 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/dialogs/status.c:

	Displaying of received after resume was broken.  

Mon Jan  5 19:47:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Fix compiling globhist with warnings. The write timer is unused.  

Mon Jan  5 19:44:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Add missing #include <stdarg.h> 

Mon Jan  5 16:55:30 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/download.c:

	Removed ancient FIXME, I'm not gonna fix anything anymore :-).  

Mon Jan  5 13:33:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Use tab instead of bunch of spaces to indent link target.  

Mon Jan  5 13:32:53 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Fixed an off-by-one overflow when iterating through links.  

Mon Jan  5 11:29:40 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Remove unused menu macro.  

Mon Jan  5 11:11:19 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	gcc flag -fno-inline was removed (--enable-debug mode). It causes
	compilation failure with old gcc/glibc. Errors like undefined
	reference to __strcpy_small are shown, and linking fails.  

Mon Jan  5 08:51:15 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	Print the title with each link when a title is available.  

Mon Jan  5 08:42:27 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	In the dump output, when printing the link footnotes below the
	document, include the first link.  

Mon Jan  5 06:14:10 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	In page_down, remove some useless assignments to @newpos, which were
	introduced in src/viewer/text/view.c:1.302->1.303.  

Mon Jan  5 05:51:08 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	Remove do_format, which was made a pretty well useless wrapper in
	src/document/html/renderer.c:1.344->1.345, and instead call
	parse_html directly from format_html_part.  

Mon Jan  5 04:54:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: osdep/os2/os2.c, viewer/text/view.c, util/error.h:

	Update a few occurrences of the error(), debug(), wdebug(), and
	internal() macros (now ERROR(), DBG(), WDBG(), and INTERNAL(),
	respectively) in comments and commented-out code.  

Sun Jan  4 23:40:49 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Use dynamic menu interface for tab completion menus.  

Sun Jan  4 20:57:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Fix the is-that-a-folder check introduced by zas.  

Sun Jan  4 20:54:09 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Removed some seemingly forgotten condition if (range) in the middle
	of source.  

Sun Jan  4 20:36:26 2004  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	pasky.ji.cz -> pasky.or.cz 

Sun Jan  4 20:18:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.h:

	Name the listbox item type enum so we can use exact type in
	functions.  

Sun Jan  4 20:02:42 2004  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Jan  4 18:56:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: download.c, status.c, status.h:

	Move download_is_progressing() to header (that is now included in
	the .c file) so it can be used by the download dialog code.  

Sun Jan  4 18:13:04 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.h:

	Declare input_history now used for global_history.  

Sun Jan  4 17:53:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Update copyright.  

Sun Jan  4 17:42:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Sun Jan  4 16:54:03 2004  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Removed some funny semicolons.  

Sun Jan  4 16:47:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 16:22:24 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.inc:

	Introduced ui.success_msgbox which controls displaying of the
	file-was-saved-successfully msgbox. Like it would be so difficult,
	Jonas and Zas.  

Sun Jan  4 16:20:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/dialogs.c, config/dialogs.h,
	dialogs/options.c:

	Moved options saving success reporting from individual save button
	handlers to write_config_file().  

Sun Jan  4 15:56:43 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 15:41:15 2004  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/conf.h, config/dialogs.c,
	dialogs/options.c:

	A success message is now displayed when options and terminal options
	are sucessfully saved through UI.  

Sun Jan  4 15:40:54 2004  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	display_timer() tidyup.  

Sun Jan  4 15:05:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, globhist/globhist.c:

	Use macros to add to and delete from input_history.  

Sun Jan  4 15:04:40 2004  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Option modify/info dialogs now shows valid range for boolean,
	integer, and long types.  

Sun Jan  4 15:03:03 2004  Laurent Monin <zas@norz.org>:

	* src/config/options.h:

	Use long type for struct option min and max fields since value may
	be long.  

Sun Jan  4 14:53:36 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Cleanup and unify finalizers.  

Sun Jan  4 14:40:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Cleanup.  

Sun Jan  4 14:11:22 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Show a simple message when pressing Info on a folder in an hierbox
	browser. "Press space to expand this folder." is now displayed in
	this case. It works in Cookies manager. Jonas please check if it is
	done as it should or not.  

Sun Jan  4 11:57:35 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/: dialogs.c, globhist.c, globhist.h:

	Replace global_history_list with input_history. 'One struct to rule
	them all ..' Well maybe we should s/input_history/history_list/ but
	it makes good sense .. also in the perspective of history modules.  

Sun Jan  4 11:42:10 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Remove usage of struct globhist_cache_entry that only takes up extra
	memory since struct hash_item does all the work.  

Sun Jan  4 06:21:29 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Jan  4 01:47:56 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jan  4 01:42:29 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/: history.c, history.h:

	Comment out the definition and use of compress_history (introduced
	in src/sched/history.c:1.59->1.60 and src/sched/history.h:1.23->1.24
	to fix bug 309) as they were preventing session items from beïng
	added when one follows a link in a frame or a link to a fragment
	identifier on the current page.  

Sun Jan  4 01:40:36 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	Add -fno-inline to CFLAGS when gcc and --enable-debug are used. It
	permits to get more meaningfull backtrace.  

Sun Jan  4 00:56:29 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/listmenu.c:

	Some TODO were added.  

Sun Jan  4 00:44:15 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Test was simplified.  

Sun Jan  4 00:40:45 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Testing against NULL is done in strlcasecmp(), extra test was
	removed.  

Sun Jan  4 00:38:08 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Prevent useless computation of constant string length by caching its
	value. Test with strlcasecmp() were simplified since now NULL string
	is correctly handled. An assertion was added to check name and
	*name.  

Sun Jan  4 00:20:31 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	draw_text() will now simply return on negative length case, when
	assertions are disabled.  

Sun Jan  4 00:17:42 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	An assertion failure was fixed. It was triggered by resizing
	download dialog in progress to a very low width: negative length for
	text, badly accepted by draw_text().  

Sun Jan  4 00:07:50 2004  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Some assertions were added to resize_screen(). Use size_t type
	instead of int for size and bsize variables.  

Sat Jan  3 23:43:05 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Remove functions that are now macros.  

Sat Jan  3 16:04:42 2004  Laurent Monin <zas@norz.org>:

	* src/: bfu/listmenu.h, document/html/parser.h, viewer/text/form.c:

	Now useless header declarations were removed. bfu/listmenu.h is now
	included in viewer/text/form.c.  

Sat Jan  3 15:10:26 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Include listmenu.h.  

Sat Jan  3 15:10:02 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Last bits of list menus changes.  

Sat Jan  3 15:08:46 2004  Laurent Monin <zas@norz.org>:

	* src/bfu/: Makefile.am, listmenu.c, listmenu.h:

	List menu functions were moved from parser.c to separate files.  

Sat Jan  3 15:07:43 2004  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	clr_spaces() was moved from document/html/parser.c to conv.c. It is
	needed since next patch will move list menu functions to
	bfu/listmenu.{c,h}.  

Sat Jan  3 13:59:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, cookies/dialogs.c:

	Make it possible to remove cookie folders.  

Sat Jan  3 13:12:15 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c,
	cookies/dialogs.c:

	Cookies are now grouped by server. Patch contains some changes to
	make clearing work. It is still not possible to delete a server
	folder.  

Sat Jan  3 13:08:46 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/palette.inc:

	Compilation fix for CONFIG_256_COLORS.  

Sat Jan  3 11:56:08 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Backend add_listbox_item().  

Sat Jan  3 11:07:32 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, listbox.h:

	Add free_empty_folder member to listbox_item.  

Sat Jan  3 10:58:50 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.h, listbox.h:

	Move up the listbox_item depth member and define it to -1 for
	hierbox_browser root boxes.  

Sat Jan  3 06:53:19 2004  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	Now executables (when not in CGI path) are displayed as normal
	files.  Displaying of error dialog box was annoying.  

Sat Jan  3 01:11:57 2004  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/Makefile.am:

	Fixed linking parsetst when having separate srcdir and builddir,
	patch by Harold L Hunt II <huntharo@msu.edu>.  

Sat Jan  3 01:11:31 2004  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, Makefile.base:

	Fixed make testutils when having separate srcdir and builddir, patch
	by Harold L Hunt II <huntharo@msu.edu>.  

Fri Jan  2 22:06:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Remove unused variables left untouched from last patch. BTW Miciah
	pointed out the suspicious code that lead to the fix.  

Fri Jan  2 21:58:53 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Whoops major bookmark corruption since we do smarter text management
	and this part was not updated.  

Fri Jan  2 20:05:44 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed hotkey conflict.  

Fri Jan  2 19:54:51 2004  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, util/color.c:

	Better cast the color to (unsigned long), to stay safe on 16-bit
	systems.  

Fri Jan  2 19:33:09 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cache/cache.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	init_listbox_item() -> add_listbox_item().  

Fri Jan  2 18:37:56 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bfu/listbox.c,
	bookmarks/bookmarks.c, bookmarks/bookmarks.h, bookmarks/dialogs.c,
	cache/cache.c, cache/cache.h, cache/dialogs.c, config/dialogs.c,
	config/kbdbind.c, config/kbdbind.h, config/options.c,
	cookies/dialogs.c, dialogs/download.c, formhist/dialogs.c,
	globhist/dialogs.c, globhist/globhist.c, globhist/globhist.h:

	Add a root listbox item to the hierbox_browser struct. It will ease
	hierarchic cookies and other stuff.  

Fri Jan  2 17:53:20 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Remove default keybinding for tab-close-all-but-current action.  

Fri Jan  2 17:51:23 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, bookmarks/dialogs.c, cache/dialogs.c,
	config/dialogs.c, cookies/dialogs.c, dialogs/download.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Use macros to intialize hierbox_browser structs.  

Fri Jan  2 16:19:52 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Revert last patch. It breaks wraparound.  

Fri Jan  2 16:14:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Use link->name if available to compare with in typeahead searching.  

Fri Jan  2 15:47:20 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Fixed indentation of ACT_SAVE_AS.  

Fri Jan  2 15:39:41 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	It's ok to pass NULL strings to strl*cmp() now. Suggested by zas.  

Fri Jan  2 15:38:06 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Reverted useless same_*str(), I explicitly said no to them before
	their introduction.  

Fri Jan  2 15:35:19 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	strl*cmp() non-zero return value meaning is undefined.  

Fri Jan  2 15:29:38 2004  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	same_str() and same_casestr() were introduced. Their behavior is
	similar (and in most cases) to strlcmp() and strlcasecmp() but well
	defined. They return 1 if strings match (regarding rules we defined)
	and 0 in all others case, they accept NULL pointers as strings, but
	returns always 0 in that case. If passed string length is negative,
	then nul char is used to detect end of comparaison. In near future,
	almost all occurrences of strl[case]cmp() will be replaced by those,
	and trashed. Feel free to propose better names, but not *strcmp*
	since it may be confusing.  

Fri Jan  2 14:42:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Fixed missspeling.  

Fri Jan  2 13:29:18 2004  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Show references list header only when we have some links to print.  

Fri Jan  2 12:42:52 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Test against NULL strings before calling strlcasecmp(), it prevents
	assertions failure.  

Thu Jan  1 23:40:56 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, util/string.h:

	empty_string_or_() and null_or_stracpy() macros were moved to
	util/string.h.  

Thu Jan  1 23:36:44 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/tables.c,
	util/string.h:

	is_same_str() -> !strlcasecmp(). Idea by Jonas and Pasky ;).  

Thu Jan  1 22:02:12 2004  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/tables.c,
	util/string.h:

	is_same_str(name, namelen, what, whatlen) was introduced. It
	shortens lines and is equivalent to ((namelen) == (whatlen) &&
	!strncasecmp((name), (what), (whatlen))), especially in parser.c.  

Thu Jan  1 20:08:47 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	Update the comment for the <ctype.h> inclusion to mention that we
	now also use isprint().  

Thu Jan  1 19:18:46 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* doc/events.txt:

	Improve the description of the goto-url event.  

Thu Jan  1 18:52:05 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Move Alt-< (beginning-of-buffer) and Alt-> (end-of-buffer) to the
	edit keymap, as suggested by pasky and Jonas.  

Thu Jan  1 18:50:31 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/status.c:

	s/if/ifdef/ so that ELinks can compile with CONFIG_LEDS enabled.  

Thu Jan  1 18:21:55 2004  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, config/options.c, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c, sched/task.c,
	viewer/text/link.c:

	Macro null_or_stracpy() was introduced to shorten lines. It is
	equivalent to (str ? stracpy(str) : NULL).  

Thu Jan  1 16:56:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.c:

	foreach_(mime backend_module () ...  

Thu Jan  1 16:42:31 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Sort #includes.  

Thu Jan  1 16:34:41 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h, src/lowlevel/signals.c,
	src/modules/version.c, src/util/error.c, src/util/error.h:

	BACKTRACE -> CONFIG_BACKTRACE.  

Thu Jan  1 16:15:16 2004  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Glum glum.  

Thu Jan  1 15:54:37 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/dialog.c, src/bfu/listbox.c, src/bfu/menu.c,
	src/bfu/text.c, src/modules/version.c, src/osdep/osdep.c,
	src/osdep/os2/sysinfo.h, src/osdep/unix/unix.c,
	src/terminal/event.c, src/terminal/kbd.c, src/viewer/text/view.c:

	USE_MOUSE -> CONFIG_MOUSE.  

Thu Jan  1 15:50:29 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/options.c, src/terminal/color.c,
	src/terminal/color.h, src/terminal/draw.c, src/terminal/draw.h,
	src/terminal/screen.c:

	USE_256_COLORS -> CONFIG_256_COLORS.  

Thu Jan  1 15:47:25 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/mime/mime.c, src/mime/backend/common.c,
	src/mime/backend/mailcap.c, src/mime/backend/mailcap.h,
	src/mime/backend/mimetypes.c, src/mime/backend/mimetypes.h,
	src/modules/module.c, src/protocol/rewrite/rewrite.c,
	src/protocol/rewrite/rewrite.h, src/sched/task.c:

	URI_REWRITE, MAILCAP and MIMETYPES was prefixed with CONFIG_.  

Thu Jan  1 15:38:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Removed close(p) from exec_thread(). We do that later and better in
	the caller (by Mikulas; from 0.99pre15).  

Thu Jan  1 15:36:17 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/cookies/cookies.c, src/cookies/dialogs.c,
	src/cookies/parser.c, src/cookies/parsetst.c, src/dialogs/menu.c,
	src/modules/module.c, src/protocol/file/cgi.c,
	src/protocol/http/http.c, src/viewer/text/view.c:

	COOKIES -> CONFIG_COOKIES. More code is now excluded when cookies
	are disabled.  

Thu Jan  1 15:24:44 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Fixed delayed signal delivery, or so ;) (by Mikulas; from
	0.99pre15).  

Thu Jan  1 15:20:32 2004  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: signals.c, signals.h:

	Volatilize @critical_section and @pending_alarm (by Mikulas; from
	0.99pre15).  

Thu Jan  1 15:16:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	check_protocol(): Handle NULL backends and insert NULL backend if we
	are not supporting SMB.  

Thu Jan  1 15:14:47 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Normalize anti-recursive #define.  

Thu Jan  1 15:14:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Use CONFIG_XBEL_BOOKMARKS.  

Thu Jan  1 15:12:12 2004  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/: common.c, xbel.c:

	Reverted part of the CONFIG_XBEL_BOOKMARKS introduction, which was
	already vetoed by me before introduction, didn't undergo discussion
	and the usual overloaded-patch stuff. I feel touchy now, too little
	sleep, so better don't do these things to me today.  

Thu Jan  1 15:04:32 2004  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and some hotkeys conflict were fixed.  

Thu Jan  1 14:51:00 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed invalid translation.  

Thu Jan  1 14:50:06 2004  Laurent Monin <zas@norz.org>:

	* test/imgmap.html:

	A test file for image map was added.  

Thu Jan  1 14:47:33 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bookmarks/bookmarks.c,
	src/bookmarks/backend/common.c, src/bookmarks/backend/xbel.c:

	HAVE_LIBEXPAT usage converted to use CONFIG_XBEL_BOOKMARKS 

Thu Jan  1 14:34:58 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Code simplification, i variable is uneeded.  

Thu Jan  1 14:34:57 2004  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Rather desperate attempt to try to clarify translation of Toggle
	display.  

Thu Jan  1 14:33:13 2004  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Fixed accidentally swapped colors of .tabs.univisited.  

Thu Jan  1 14:28:07 2004  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Regression bug was fixed. USEMAP should now work as it should and
	show all map entries.  

Thu Jan  1 14:24:07 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/hierbox.c, src/bookmarks/bookmarks.c,
	src/bookmarks/bookmarks.h, src/bookmarks/dialogs.c,
	src/bookmarks/dialogs.h, src/bookmarks/backend/common.c,
	src/bookmarks/backend/default.c, src/bookmarks/backend/xbel.c,
	src/dialogs/menu.c, src/globhist/dialogs.c, src/modules/module.c,
	src/sched/session.c, src/terminal/terminal.c,
	src/viewer/text/link.c, src/viewer/text/view.c:

	BOOKMARKS -> CONFIG_BOOKMARKS.  

Thu Jan  1 14:03:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/bfu/leds.c, src/bfu/leds.h, src/dialogs/status.c,
	src/modules/module.c, src/sched/session.c, src/sched/session.h:

	USE_LEDS -> CONFIG_LEDS.  

Thu Jan  1 13:58:44 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file/cgi.c, smb/smb.c:

	Exclude even more includes.  

Thu Jan  1 13:54:57 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/protocol/file/cgi.c, src/protocol/file/file.c:

	ELINKS_LOCAL_CGI -> CONFIG_CGI.  

Thu Jan  1 13:54:14 2004  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/: smb.c, smb.h:

	Exclude more includes.  

Thu Jan  1 13:38:36 2004  Laurent Monin <zas@norz.org>:

	* configure.in:

	ELINKS_SMB -> CONFIG_SMB 

Thu Jan  1 11:53:36 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	s/myself/pasky/, noticed by Jonas.  

Thu Jan  1 10:12:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/main.c:

	ELINKS_ROOT_EXEC -> CONFIG_NO_ROOT_EXEC + move dependencies. Now it
	should be correct and not the inverted behaviour.  

Thu Jan  1 10:04:03 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, feature.h, src/protocol/protocol.c,
	src/protocol/smb/smb.c, src/protocol/smb/smb.h:

	ELINKS_SMB -> CONFIG_SMB + make it possible to not compile in the
	smb code when disabled.  

Thu Jan  1 09:56:01 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/document.c, src/dialogs/menu.c,
	src/document/html/parser.c, src/globhist/dialogs.c,
	src/globhist/globhist.c, src/modules/module.c, src/sched/session.c,
	src/viewer/text/view.c:

	GLOBHIST -> CONFIG_GLOBHIST.  

Thu Jan  1 09:52:51 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h, src/dialogs/menu.c, src/formhist/formhist.c,
	src/modules/module.c, src/util/base64.c, src/viewer/text/form.c,
	src/viewer/text/view.c:

	FORMS_MEMORY -> CONFIG_FORMHIST.  

Thu Jan  1 09:42:54 2004  Jonas Fonseca <fonseca@diku.dk>:

	* feature.h:

	A few glitches, a few fixes.  

Thu Jan  1 07:21:24 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	Add default bindings of Alt-< to beginning-of-buffer and Alt-> to
	end-of-buffer.  

Thu Jan  1 07:16:48 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/form.c,
	viewer/text/textarea.c, viewer/text/textarea.h:

	Add beginning-of-buffer and end-of-buffer actions. This closes bug
	147.  

Thu Jan  1 07:03:49 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: config/conf.c, protocol/http/header.c:

	Improve some comments: s/whitespaces/whitespace/, and clarify
	skip_white's description.  

Thu Jan  1 04:17:56 2004  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/encoding/encoding.c:

	Add .tbz to bzip2_extensions.  

Thu Jan  1 03:40:10 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h:

	Reintroduced ELINKS_SMB.  

Thu Jan  1 03:27:48 2004  Laurent Monin <zas@norz.org>:

	* src/viewer/text/marks.c:

	index_from_char() was added to marks.c, it permits to reduce size of
	array used by converting valid chars to an index in the marks array.
	Some macros were added to clarify the code.  

Thu Jan  1 03:25:48 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized ELINKS_SMB.  

Thu Jan  1 03:16:53 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized Local CGI Support.  

Thu Jan  1 03:09:13 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Moved USE_MOUSE to feature.h.  

Thu Jan  1 02:53:39 2004  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Updated copyright notice. Welcome to the year 2004! 

Thu Jan  1 02:53:00 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Capitalize captions.  

Thu Jan  1 02:22:21 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Featurized FORMS_MEMORY.  

Thu Jan  1 02:06:03 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Examples of the URI rewriting.  

Thu Jan  1 01:49:23 2004  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Cleanup.  

Thu Jan  1 01:46:19 2004  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h:

	Oops, BACKTRACE still must be here. Spotted by zas.  

Thu Jan  1 01:06:55 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	Disable root user was featured.  

Thu Jan  1 00:47:12 2004  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	URI rewriting was featured.  

Wed Dec 31 23:52:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 23:26:34 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 23:19:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	No ELusive yet. See the tireless army of ELinks hackers, not even
	taking their break for new year celebrations. Happy new one, btw.  

Wed Dec 31 22:15:38 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Removed now-obsolete --without-xbel.  

Wed Dec 31 22:02:40 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Fixed forced disabling of the xbel/backtrace.  

Wed Dec 31 22:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Move backtrace printing support enabling to feature.h.  

Wed Dec 31 21:52:31 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Added notice to developers about what to include in this file and
	how.  

Wed Dec 31 21:44:20 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Added details about what happens if disabled or why to enable it to
	features missing it.  

Wed Dec 31 21:35:10 2003  Petr Baudis <pasky@ucw.cz>:

	* feature.h:

	Cleanup of the MIME/256colors entries.  

Wed Dec 31 21:31:49 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, feature.h:

	Moved cookies and global history to features.h.  

Wed Dec 31 21:28:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Quite big update featuring the color cleanups and additions, auto
	save stuff and sorting changes.  

Wed Dec 31 21:26:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, feature.h:

	Move mailcap, mimetypes and 256 color configuration to feature.h
	file.  

Wed Dec 31 19:13:20 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, acconfig.h, configure.in, feature.h:

	Introduced feature.h, which should hold most of the fine-tuned
	compile-time features configuration. As an example case, leds and
	bookmarks were already moved there. Idea stolen from vim.  

Wed Dec 31 18:47:48 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Whitespaces cleanup.  

Wed Dec 31 17:43:49 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Dec 31 14:26:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.h, version.c:

	Move builtin_modules declaration.  

Wed Dec 31 14:25:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 31 13:32:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.c, module.h, version.c:

	Introduce module iterators to ease module hacking.  

Wed Dec 31 12:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	.. and move libmime.a to link correctly.  

Wed Dec 31 12:53:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/Makefile.am, dialogs/menu.c, dialogs/mime.c,
	dialogs/mime.h, mime/Makefile.am, mime/dialogs.c, mime/dialogs.h:

	dialogs/mime.* -> mime/dialogs.*, suggested by Jonas.  

Wed Dec 31 10:44:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.c:

	Remove MAX(). It is already defined.  

Wed Dec 31 10:42:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/mailcap.c, mime/backend/mimetypes.c,
	util/string.h:

	Move skip_whitespace() macro.  

Wed Dec 31 08:50:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.h, mime/backend/common.c, mime/backend/common.h,
	mime/backend/default.c, mime/backend/mailcap.c, sched/download.c:

	Introduce mime handler initializer and allocate the program with the
	struct so freeing is easier.  

Wed Dec 31 08:37:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/smb/smb.c:

	Glum.  

Wed Dec 31 08:14:10 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/smb/smb.c:

	Small, untested optimisation.  

Wed Dec 31 07:53:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/dialogs.c:

	In push_login_button, allow the title of the "Form not saved"
	message box to be localised.  

Wed Dec 31 07:25:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Whoops, bfu/style.h _does_ need to be included. Pointed out by
	Jonas.  

Wed Dec 31 06:20:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/rewrite/rewrite.c:

	Remove a superfluous test.  

Wed Dec 31 04:48:00 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Remove an unnecessary #include.  

Wed Dec 31 02:57:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Include terminal/terminal.h for cls_redraw_all_terminals(). This
	effectively reverts src/config/options.c:1.415->1.416. My first
	reversion, and it is a patch by pasky, too. How 'bout that.  

Wed Dec 31 02:49:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.h:

	Declare struct download instead of struct dowload, and include
	cache/cache.h for enum cache_mode.  

Wed Dec 31 00:34:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Simplified tabs.unselected description.  

Tue Dec 30 22:44:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec 30 22:20:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	*INIT_OPT_COLORS(), more swapping due to pasky, it is an idiot.  

Tue Dec 30 21:49:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	*INIT_OPT_COLORS(), has first f g coming well, then b g follows.
	Haiku is exciting.  

Tue Dec 30 21:37:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Hmm, a lot of new stuff, not finished yet.  

Tue Dec 30 21:28:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 30 21:28:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Default fg color for tabs.unvisited changed from green to darkblue.
	It _is_ the best choice, fullstop (green is totally unreadable).  

Tue Dec 30 19:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Fix hotkey.  

Tue Dec 30 19:37:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, renderer.c, html/renderer.c:

	Reintroduce needs_width but be less optimistic and always set it to
	1 for HTML documents. A half way fix is added out commented but it
	will be non trivial to fix it for all cases.  

Tue Dec 30 18:45:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Hotkey conflict is now detected even for first menu item. It fixes
	bug 350.  

Tue Dec 30 18:44:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, config/options.inc:

	Optionalize hotkey underlining (ui.dialogs.underline_hotkeys) off by
	default.  

Tue Dec 30 18:36:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/renderer.c:

	Rename document_view -> doc_view.  

Tue Dec 30 18:26:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, options.c, options.h, renderer.c,
	html/parser.c:

	Patches concerning plain text resizing issue and needs_width
	introduction were reverted. Jonas will fix that soon.  

Tue Dec 30 17:54:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Underline hotkey chars to make them more visible. Maybe it should be
	configurable anyway it is of course disabled if the terminal
	underline option is.  

Tue Dec 30 16:38:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix up() and down() handling so they call page_up() and page_down()
	when link wraparound is disabled. I believe that is the old
	behaviour.  

Tue Dec 30 13:57:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/html/parser.c:

	Default form input size is now configurable through
	document.html.default_form_input_size. It helps with textarea
	without cols attribute.  

Tue Dec 30 13:02:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, options.c, options.h, renderer.c:

	Separate document options comparaison functions to better handling
	terminal size changes, it should fix cache growing on height change.  

Tue Dec 30 12:45:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/: options.c, options.h, renderer.c, html/parser.c:

	A field needs_width was added to struct document_options. We now use
	it as needs_height. It fixes non rerendering of plain text documents
	on width change. Please report any side-effect this patch may have.  

Tue Dec 30 11:22:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/refresh.c:

	Compilation fix: include config/options.h header file needed for
	get_opt_int().  

Tue Dec 30 10:48:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Always use the color mode set in the document options since the
	global one might have a color mode different from the current mode.
	Fixes wrong drawing of current link when changing back and forth
	between color modes.  

Tue Dec 30 08:17:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/refresh.c:

	Add option to control the minimum time used for document refreshing.
	By default set to 1 second (is this fair?). Fixes last part of bug
	309 (Broken go back).  

Tue Dec 30 00:25:20 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Add itrm queue debug code, and new escape sequences are now
	recognised, it fixes impossibility to bind some function keys under
	rxvt-like terminals, now Shift-F5 should work more often.  

Mon Dec 29 22:47:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor french grammar fix.  

Mon Dec 29 22:43:46 2003  Laurent Monin <zas@norz.org>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Trivial cleanup: use enum keyact type for action, drop 2 useless
	variables in really_add_keybinding() and make it call
	really_really_add_keybinding() instead of add_keybinding().  

Mon Dec 29 22:36:23 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Mon Dec 29 21:10:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec 29 21:02:02 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/session.c, terminal/terminal.c:

	ui.auto_save_restore_session tristate option was replaced by two
	boolean options ui.sessions.auto_save and ui.sessions.auto_restore.  
	Folder name is now configurable through
	ui.sessions.auto_save_foldername.  It fixes issues related to i18n
	of this folder name.  

Mon Dec 29 20:20:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor translation fix.  

Mon Dec 29 20:15:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.c:

	Redo the bogus fix for hierbox browser cursor position restoring
	(bug 36) by saving the complete box data and check it is till valid
	when initializing a new browser.  

Mon Dec 29 19:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Jonas told me about cvs admin -m <rev>:<msg> <file> and suddenly...  

Mon Dec 29 19:43:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Ooops twice the same message... Previous patch changed order of
	parameter in realloc_line() from y,x to x,y as other functions
	there. This commit is a dummy one i just added a new line.  

Mon Dec 29 19:38:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Order of parameters of realloc_line() was modified: y,x -> x,y.  

Mon Dec 29 19:35:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Move some code from add_document_lines() to new functions add_node()
	and init_template() and make them more generic.  

Mon Dec 29 19:04:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	We now call get_uri_length() only if we are at the start of line or
	we have two consecutive alpha chars.  

Mon Dec 29 18:27:06 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanup.  

Mon Dec 29 17:54:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Code cleanup.  

Mon Dec 29 17:46:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Minor code simplification.  

Mon Dec 29 14:05:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.c, history.h:

	A cleanuped up version of the history compression patch pasky
	attached to bug 309. It ensures that the added history location is
	unique and that redirects can be bypassed. It does not fix it for
	the bug URI tho' since it uses document refresh with time set to
	zero.  

Mon Dec 29 13:15:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.h:

	Cleanup workaround.  

Mon Dec 29 12:24:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: document/plain/renderer.c, intl/charsets.c,
	intl/charsets.h:

	Add CSM_NONE to enum convert_string_mode for the plain-text
	renderer. I hope that this works! 

Mon Dec 29 12:23:09 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_line, simplify to eliminate a variable.  

Mon Dec 29 11:59:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Optimizations and clean up. Now useless debug code was removed.  

Mon Dec 29 11:42:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Replace bad chars but tab before calling convert_string(). It
	preserves previous behavior.  

Mon Dec 29 11:33:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	Fix an off-by-one error in the plain-text renderer's linkyfying
	code.  

Mon Dec 29 11:28:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In the plain text renderer, perform character-set conversion on the
	input _before_ expanding tabs. Closes bug 351. Thanks to zas for
	finding the problem.  

Mon Dec 29 08:25:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Keep state of whether link lines was drawn. Only draw link lines if
	we actually put some and if the background color is different from
	the default one.  Fixes bug 326.  

Mon Dec 29 08:04:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Whoops revert stupid part of last patch.  

Mon Dec 29 07:58:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Improve forcing of current scaling to last position in the
	scrollbar.  

Mon Dec 29 07:43:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Partly revert previous scollbar fixes and only adjust the offset of
	current (@step) to hit the last position.  

Mon Dec 29 07:34:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use set_screen_dirty() macro.  

Sun Dec 28 20:56:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use explicit constants instead of hardcoded numbers.  

Sun Dec 28 20:02:48 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use a while loop instead of a goto.  

Sun Dec 28 20:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Improve/fix scroll meter drawing by removing adjustment of widget
	height according to y set by dlg_format_text_do() and by scaling
	current to be last when it should be.  

Sun Dec 28 19:53:03 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Take in account space used by right scroll main menu indicator
	(appears when term width is insufficent to display all the main menu
	entries).  

Sun Dec 28 19:27:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Even with minimum width for stuff like "\n\n" this line should be
	added. Also allow starting space needed when scrolling so we do not
	ignore empty lines. Fixes scrolling in text widget.  

Sun Dec 28 18:45:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Use ACT_ENTER for 'Follow link' and ACT_ENTER_RELOAD for 'Follow
	link and reload' in the link menu. Could the actions also be used
	for submit form (and reload)? 

Sun Dec 28 15:44:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Assertions and debugging code were added to help to track down nul
	chars insertion in plain renderer output, an ssertion is triggered
	now for that. Help is welcomed here. Note previous patch fixed bug
	317.  

Sun Dec 28 13:58:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Use strlen() to gather true length of line after convert_string()
	call. It fixes trailing chars garbage in some cases.  

Sun Dec 28 10:42:43 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Dec 28 09:24:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Colors the status bar with white background, so the progress bar
	works.  

Sun Dec 28 06:25:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Sort protocol.file.cgi.*.  

Sun Dec 28 06:24:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Sort protocol.file.*.  

Sun Dec 28 06:12:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Set window title in GNU Screen. (Backport from 1.81.2.1->1.81.2.2,
	ELUSION branch.) 

Sun Dec 28 06:11:19 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Sun Dec 28 06:11:19 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Introduce is_gnuscreen(). (Backport from 1.81->1.81.2.1, ELUSION
	branch.) 

Sun Dec 28 05:58:35 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	Fix a hotkey conflict on the ~Help menu between ~ELinks homepage and
	~ELinks CvsWeb (now ~ELinks CvsWeb). See bug 350 for why this wasn't
	spotted long ago.  

Sun Dec 28 05:21:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hotkey.c:

	In is_hotkey, declare and assign @key_pos outside the DEBUG code and
	eliminate the thus superfluous braces and duplicate return
	statement.  

Sun Dec 28 05:19:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Improvements in Polish translation. Patch by Mikolaj Machowski.  

Sun Dec 28 05:05:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Hook change_hook_html to the document.codepage option tree.  

Sun Dec 28 04:56:34 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Give the "V~iew image" menu item the correct @action argument.  

Sun Dec 28 03:34:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Drop whitespaces on empty lines and trailing whitespaces before
	rendering plain text. It reduces memory usage a bit, please tell me
	if it has any other impact.  

Sun Dec 28 03:14:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Support for goto marked listbox_items. Fixes bug 123.  

Sun Dec 28 02:58:51 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	ACT_TOGGLE_PLAIN_COMPRESS_EMPTY_LINES is now bind by default to "w"
	(like whitespaces/lines).  

Sun Dec 28 02:55:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Compress_empty_lines now handles line containing only whitespaces
	too. It gives obvious result on BZ source.  

Sun Dec 28 02:39:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Add mono/colors ui.color options together to ensure sync and slim
	code (removes ~300 lines of code. :-) 

Sun Dec 28 02:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	quiting ->quitting.  

Sun Dec 28 02:19:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Add mono trees together with the color one.  

Sun Dec 28 02:16:13 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Keyact ACT_TOGGLE_PLAIN_COMPRESS_EMPTY_LINES was added. No default
	keystroke.  

Sun Dec 28 02:12:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Introduce INIT_OPT_COLOR_TREE() for adding relative color trees.  

Sun Dec 28 02:07:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Getting ready to unify colors/mono color option declaration.  

Sun Dec 28 02:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use a copy since first hop may be freed. It fixes a segfault when
	adding an already used keystoke.  

Sun Dec 28 01:58:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify tab color options.  

Sun Dec 28 01:55:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify status and searched color options.  

Sun Dec 28 01:53:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify dialog color options.  

Sun Dec 28 01:45:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Simplify menu bar color options.  

Sun Dec 28 01:34:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	config/options.inc, sched/session.c, terminal/terminal.c:

	A hackish prototype for auto save/restoring session (as in tabs)
	using ui.auto_save_restore_session option. 0 is off, 1 is save but
	no restore, 2 is save and restore if no URI is given.  

Sun Dec 28 01:31:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Clean the folder where the terminal tabs should be bookmarked under.  

Sun Dec 28 01:31:12 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	A change hook was added to document.plain. It prevents reload of
	document after changing document.plain.compress_empty_lines option.  

Sun Dec 28 01:06:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Plain renderer was inserting useless nul chars in formatted
	document, these were invisible on screen but visible in a file
	generated by save formatted as. Jonas please review carefully.  

Sat Dec 27 23:33:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h, listbox.c:

	Save state of the latest selected item in a browser.  

Sat Dec 27 23:06:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 22:58:19 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/plain/renderer.c:

	Option document.plain.compress_empty_lines was added. It makes
	successive empty lines appear as one. Try
	http://pasky.ji.cz/~pasky/dev/links/README for a demo. This option
	is off by default.  

Sat Dec 27 22:18:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h:

	Confirm close also when attempting to close all tabs but the current
	one.  

Sat Dec 27 22:05:15 2003  Laurent Monin <zas@norz.org>:

	* src/util/color.c:

	Silent a possible warning under Cygwin.  

Sat Dec 27 22:03:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/file/file.c:

	Use explicit type casting to quiet gcc 3.3.1 under Cygwin. It should
	not harm.  

Sat Dec 27 21:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Use really_close_tab() function always.  

Sat Dec 27 21:56:08 2003  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Type cast color_t to unsigned int in order to prevent a compiler
	warning, notably on Cygwin. Reported by fredlwm.  

Sat Dec 27 21:51:07 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Horizontal main menu scrolling was fixed, now part of last visible
	option may be printed, it gives a smoother effect.  

Sat Dec 27 20:03:45 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	In display_text, eliminate a superfluous int_max().  

Sat Dec 27 19:35:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, terminal/tab.c, terminal/tab.h:

	Make the open in new tab take backend work on url strings and add
	open_url_in_new_tab().  

Sat Dec 27 18:21:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. 1162 messages ;).  

Sat Dec 27 17:36:01 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Do not show Description: in option info dialog if there is no
	description text.  

Sat Dec 27 17:31:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, bookmarks/dialogs.h, config/kbdbind.c,
	config/kbdbind.h, dialogs/menu.c:

	Add support for bookmarking all tabs for a terminal. Entry was added
	to tab menu. ACT_ADD_BOOKMARK_TABS also added with no default value
	bound.  

Sat Dec 27 17:18:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Attempt to fix division by zero problem reported by zas caused by
	paskys 'wide' hacking using evil gotos to bypass essentiel tests.
	;-) 

Sat Dec 27 17:02:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Translation fix.  

Sat Dec 27 16:11:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix tab-close-all-but-current action name.  

Sat Dec 27 15:52:44 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 15:46:26 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SAVE_OPTIONS was added. No default keystroke.  

Sat Dec 27 15:38:22 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SHOW_TERM_OPTIONS was added. No default keystroke.  

Sat Dec 27 15:16:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Populate with menu_item macros, and correctly handle i18n regarding
	hotkeys. It fixes incorrect not so hot keys behavior in translated
	language menu.  

Sat Dec 27 14:59:43 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Display iso639 code at right of language menu, as proposed by Jonas.
	As a side effect it displays which code is associated with the
	system language.  

Sat Dec 27 14:49:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 27 14:33:28 2003  Laurent Monin <zas@norz.org>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	A confirmation dialog was added when attempting to bind a keystroke
	which is already used elsewhere.  

Sat Dec 27 14:28:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Oops we only need @term non NULL.  

Sat Dec 27 14:27:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/tab.c, viewer/text/view.c:

	close_all_tabs_but_current(): NULL current means look it up your
	damn self. ;) 

Sat Dec 27 14:14:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Add close all but current tab action. By default bound to 'i'.  

Sat Dec 27 14:13:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h:

	Move close all but current function to tab file.  

Sat Dec 27 13:55:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Add ACT_TAB_MENU action bound to 'e' by default.  

Sat Dec 27 13:41:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Dialog width takes now in account title length. Long dialog titles
	were displayed outside message box before (ie. in "Invalid
	keystroke" message box).  

Sat Dec 27 13:35:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Finally got the close all but current menu action working.  

Sat Dec 27 13:21:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	Cleanup the naming. No need for two variables for the same thing.  

Sat Dec 27 13:08:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: tab.c, tab.h:

	Introduce tab iterator macros.  

Sat Dec 27 12:50:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Raised LEDS_COUNT to 6, so that the progress meter will look nicer.  

Sat Dec 27 12:50:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Now, if not @full, show ETT instead of elapsed time and ETA instead
	of estimated time.  

Sat Dec 27 12:47:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Swapped @wide and @full in get_stat_msg(). So now if @wide, we
	already show avg/cur, but we show the full strings only if @full.  

Sat Dec 27 12:44:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/: bookmarks.c, dialogs.c, backend/xbel.c:

	add_bookmark(): Set the box_item to BI_FOLDER if url is NULL or "".  

Sat Dec 27 12:36:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	get_stat_msg()'s @full behaviour changed. Now, when showing it in
	the statusbar, it is set only if > 130 (empirical value) and it now
	prevents from displaying the current/average speed (it always
	displays just the speed) and elapsed time (it displays just the
	estimated time).  

Sat Dec 27 12:27:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: leds.c, leds.h:

	Removed support for leds coloring. We'll do things like progress-bar
	on the background and this would interfere.  

Sat Dec 27 12:17:20 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Hotkeys conflict were fixed.  

Sat Dec 27 12:14:40 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, viewer/text/view.c:

	ACT_OPEN_OS_SHELL was added. Minor changes to make it working. No
	default keystroke.  

Sat Dec 27 11:45:02 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	dialogs/menu.h, viewer/text/view.c:

	ACT_SAVE_URL_AS was added. No default keystroke.  

Sat Dec 27 11:37:07 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	ACT_SAVE_AS was added. No default key for now.  

Sat Dec 27 11:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Show kill all backgrounded connections keystroke in menu.  

Sat Dec 27 11:25:56 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	ACT_KILL_BACKGROUNDED_CONNECTIONS keyact was added. No default key
	for now (idea?).  

Sat Dec 27 08:13:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Shift percentage text 1 to the right because it looks better.  

Sat Dec 27 07:41:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Only do progress stuff when size > 0.  

Sat Dec 27 04:34:33 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/msgbox.h:

	Include bfu/dialog.h for struct dialog_data.  

Sat Dec 27 04:29:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/menu.h:

	Declare struct window.  

Sat Dec 27 04:14:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.h:

	Include bfu/widget.h for struct widget_data.  

Sat Dec 27 04:09:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.h:

	Declare struct term_event.  

Sat Dec 27 03:27:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.h:

	Alphabetise those includes. (Whoops!) 

Sat Dec 27 03:21:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.h:

	Include bfu/style.h for enum format_align.  

Sat Dec 27 03:12:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.h:

	Declare struct link.  

Sat Dec 27 01:38:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Main menu horizontal scrolling was improved a bit. It still doesnt
	work very well when resizing terminal while menus are opened.  

Sat Dec 27 01:26:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.h:

	Declare struct list_head and remove extra declarations of struct
	session and struct menu_item.  

Sat Dec 27 00:56:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Various calculations were tuned. Display is improved.  

Fri Dec 26 23:53:24 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/proxy.c, protocol/http/http.c, sched/download.c,
	terminal/kbd.c:

	Trailing spaces were removed.  

Fri Dec 26 23:16:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.h:

	Declare struct terminal (forgotten when removing the #include for
	terminal/terminal.h in 1.9->1.10).  

Fri Dec 26 17:23:20 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Nullify rtext when possible.  

Fri Dec 26 17:14:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	DEBUG mode visual helper to detect useless rtext if an action is
	given.  

Fri Dec 26 17:06:09 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	rtext can now be set to NULL instead of hardcoded string, since we
	use dynamic keybindings.  

Fri Dec 26 16:57:47 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Align antislashes in macro description to improved readibility.  

Fri Dec 26 16:43:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 26 16:28:41 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Main menu is now able to scroll horizontally, ever by keyboard or
	mouse actions. An indicator now appears when menu is truncated.
	Still need to tune up.  

Fri Dec 26 16:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/status.c:

	Restore behavior and default values of loading tab color.  Make
	unvisited tab text color green by default so it is distinct.  Tab
	progress uses dialog.meter colors.  Ideas by pasky.  

Fri Dec 26 14:21:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Remove https_real_uri and use @uri instead. Proxy URIs should always
	contain data so assert it.  

Fri Dec 26 14:14:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	An action ACT_FORMHIST_MANAGER was added, associated default key is
	F.  

Fri Dec 26 14:10:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Setup ssl connection establishment earlier .. improve error
	handling. Patch by Timo Lindfors.  

Fri Dec 26 14:08:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Unbind ACT_COPY_CLIPBOARD from Ctrl-C.  

Fri Dec 26 14:02:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Don't be so optimistic we need atleast around 6 chars to make the
	meter usable.  

Fri Dec 26 13:57:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Add temporary status load progress meter next to leds.  

Fri Dec 26 13:40:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Empty rtext string was replaced by NULL.  

Fri Dec 26 13:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/search.c, viewer/text/search.h,
	viewer/text/view.c:

	Add typeahead search to menu.  

Fri Dec 26 13:17:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	A minor taste of what macros can do to reduce trivial color option
	code.  

Fri Dec 26 13:15:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.h, dialogs/menu.c,
	dialogs/options.c, document/html/parser.c, viewer/text/link.c,
	viewer/text/view.c:

	We do not need empty strings as rtext anymore, just use NULL.  

Fri Dec 26 13:08:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, dialogs/menu.c:

	Display current keybinding in menus, if no key action, then provided
	right text is used.  

Fri Dec 26 12:55:10 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	mime/dialogs.c, viewer/text/link.c, viewer/text/view.c:

	Key actions were added to menu items.  

Fri Dec 26 12:20:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	@keyact -> @action in struct menu_item, since we use action
	elsewhere (in kbdbind.c).  

Fri Dec 26 12:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/config/: kbdbind.c, kbdbind.h:

	add_keystroke_to_string() was introduced. It returns a string
	representing a keystroke, for @action and @map.  

Fri Dec 26 12:08:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	A field keyact of enum keyact type was added to struct menu_item.  

Fri Dec 26 12:01:16 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Right text is no more translated by default, a flag RIGHT_INTL was
	added to menu_item flags to force translation.  

Fri Dec 26 11:48:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use draw_menu_left_text{,_hk}() for main menu.  

Fri Dec 26 11:11:31 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/options.inc:

	Mainmenu specific-colors are not used anymore. Though they are not
	yet aliased in options.inc.  

Fri Dec 26 10:55:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Do not add 1 to xbase, let the caller do it.  

Fri Dec 26 10:49:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	draw_menu_left_text_hk() and draw_menu_left_text() are now used to
	draw left text in menus.  

Fri Dec 26 10:19:10 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	draw_menu_right_text() was introduced.  

Fri Dec 26 10:10:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/download.c, dialogs/download.h,
	dialogs/status.c:

	Revive loading tab color so it is used for drawing progress bar in
	backgrounded tabs that are loading. We use unvisited color for the
	non progress part.  

Fri Dec 26 09:56:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use macro to determine whether download is progressing.  

Fri Dec 26 09:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/status.c, sched/session.h:

	Add support for fresh color in unvisited or incomplete tabs.  

Fri Dec 26 09:54:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	document/html/parser.c, viewer/text/link.c:

	M_SUBMENU was dropped. Macro mi_is_submenu() is used, and m_submenu
	string is no more exported.  

Fri Dec 26 09:41:53 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	mi_text_translate() macro is now used instead of direct flags
	comparaison against NO_INTL.  

Fri Dec 26 09:34:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	mi_is_submenu() is now used instead of direct flags comparaison.  

Fri Dec 26 09:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	mime/dialogs.c, viewer/text/link.c:

	M_BAR was dropped, horizontal separator is now marked by NO_SELECT
	flags, used for unselectable menu items too. Most tests were
	replaced by macros. More to come.  

Fri Dec 26 08:53:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): Make it possible to pass the meter color
	again. NULL means use dialog.meter (and who says C doesn.t support
	default arg values ;-).  

Fri Dec 26 08:46:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): Make it possible to pass strings that will
	be coloured. NULL means draw percentage string.  

Fri Dec 26 08:33:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Set ui.language to "System" if writing in conf file when configured
	--without-nls. Patch by Timo Lindfors <lindi@kurp.hut.fi>.  

Fri Dec 26 08:23:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Make progress bar drawing more safe and prioritize drawing of the
	progress 'colouring' if width is small.  

Fri Dec 26 08:04:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Move up the progress bar drawing.  

Thu Dec 25 17:59:33 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	ELinks-0.5.0 -> ELinks-0.9.0, inspired by AnAnt.  

Thu Dec 25 15:09:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Use new draw_text() when drawing the progress bar.  

Thu Dec 25 15:01:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_text(): NULL color now means only set the data parts.  

Thu Dec 25 14:02:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	download_progress_bar(): It is not a widget formatter (yet) and is
	used for other progress stuff so take @y as clean int.  

Thu Dec 25 13:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Compile fix. Pasky please check.  

Thu Dec 25 13:10:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use term instead of ses->tab->term.  

Thu Dec 25 12:11:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Pass directly ses->tab->term to field_op_do(), instead of just @ses.  

Thu Dec 25 12:10:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Separated the field_op() grand switch to field_op_do(), patch by
	Martin Bays <elinks-dev@zugzwang.port5.com>.  

Thu Dec 25 12:04:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Grand field_op() switch tidyup.  

Thu Dec 25 12:01:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Removed the b label from the grand field_op() switch.  

Thu Dec 25 11:21:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix more infinit looping in some rare corner cases.  

Thu Dec 25 10:46:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	If there is no current link use 0. Fixes previous patch.  

Thu Dec 25 10:02:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix first bug introduced in 0.9.0
	(viewer/text/search.c:1.142->1.143) :/.  

Thu Dec 25 09:57:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h,
	viewer/text/search.c:

	Fix link numbers prefixes matching search strings (bug 57).  

Thu Dec 25 08:29:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make typeahead case sensitive using the document.browse.search.case
	option. Fixes 3rd part of bug 344.  

Thu Dec 25 08:17:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Minor cleanup of hit top/botton dialog calling.  

Thu Dec 25 08:09:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix typeahed so both inf. looping in some rare occasions and wrap
	around so it always works (also for the last link being matched). We
	now assert that anyone mangling the link position (@i) keeps it
	valid.  

Thu Dec 25 08:06:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Move typeahead error handling to separate function to avoid evil
	gotos in next patch >:).  

Thu Dec 25 06:59:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation fixes.  

Wed Dec 24 22:06:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Removed compatibility aliases ui.shadow and config_saving_style,
	both added before 0.4.0.  

Wed Dec 24 18:40:23 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 24 18:14:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	ELinks-0.9.0.CVS 

Wed Dec 24 18:04:32 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	ELinks-0.9.0 

Wed Dec 24 17:18:01 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec 24 17:08:14 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec 24 15:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Disable scrollability for hierbox browsers info buttons (for now).  

Wed Dec 24 14:18:39 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More update.  

Wed Dec 24 14:01:43 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Dec 24 13:39:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc, doc/man/man5/elinks.conf.5:

	Fix bogus option description.  

Wed Dec 24 12:22:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/small.txt:

	--without-x only removes possibility to restore the old window
	title.  

Wed Dec 24 12:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Translators can also update existing .po files. :) 

Wed Dec 24 12:15:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Fix typo.  

Wed Dec 24 12:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	No good update.  

Wed Dec 24 11:55:21 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation update.  

Wed Dec 24 11:07:29 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Missing tags were added to smb:// page output.  

Wed Dec 24 11:02:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Dec 24 10:45:19 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Mouse-related code was enclosed in #ifdef USE_MOUSE/#endif.  

Wed Dec 24 02:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc4.CVS 

Wed Dec 24 02:03:55 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc4 

Wed Dec 24 01:29:48 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec 24 00:59:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Fixed handling of the $FTP_PROXY, patch by Timo.  

Wed Dec 24 00:31:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix bug 315 - Tilde expansion doesn't work in file upload form
	fields.  

Wed Dec 24 00:30:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Comment on the code related to bug 282.  

Wed Dec 24 00:11:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 23 23:59:37 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po:

	.po files were resynced.  

Tue Dec 23 23:51:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Last-minute attempt to fix possible segfault when passing
	close_socket() a NULL pointer, extracted from Timo's patch.  

Tue Dec 23 19:24:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Sort prefixes.  

Tue Dec 23 19:08:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Position the now unblockable cursor where text is typed in the
	typeahead statusline. Fixes second part of bug 344 and improves
	i18n.  

Tue Dec 23 17:30:17 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Decompression bug fix was reintroduced, it should now work in any
	case. Please review and test with special attention. Patch by Jonas.  

Tue Dec 23 17:08:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted. freshmeat.net gzipped index page is not
	decompressed anymore. So the fix was not a good one.  

Tue Dec 23 17:01:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Unattended decompression of .tgz files was fixed by Jonas. We now
	use guess_encoding().  

Tue Dec 23 16:59:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Redraw screen when entering typeahead mode so the status line is
	updated. Fixes first part of bug 344.  

Tue Dec 23 14:19:11 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Dec 23 13:45:15 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Dec 23 12:44:04 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc3.CVS 

Tue Dec 23 12:41:11 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc3 

Tue Dec 23 12:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Dec 23 12:28:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Only send keyboard and mouse events to the current tab. Should fix
	strange behaviour of two tabs and one Alt-d aka bug 296. Untested
	tho' as I cannot reproduce it anymore.  

Tue Dec 23 12:08:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Use the NUL-terminated @domain string instead of the @server string
	when checking if part of the cookie domain matches. Was introduced
	in my struct uri introducing summer hacking. Fixes bug 308 so ELinks
	works with yahoo groups/mail again.  

Tue Dec 23 12:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	More verbose COOKIES_DEBUG domain security violation reporting. This
	is harmless as it is in normally-dead part of code.  

Tue Dec 23 11:34:28 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Tue Dec 23 11:11:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	Revert part of patch adding ACT_REDRAW keybinding (in
	event.c:1.20->1.21) that removed the hardcoded ^L. The user can
	still define new keybindings but now overrule this one for now. We
	need some universal keybinding handler to better handle this.  

Tue Dec 23 11:04:31 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/dialogs.c:

	Formhist info dialog layout was improved a bit. Fields list is now
	separated from header by a newline, and field types are displayed in
	a fancy manner.  

Tue Dec 23 10:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Make witekfl's fix to not decompress files with .gz or .bz2
	(http.c:1.220->1.221) also handle URIs with query parts, like the
	ones at http://www.icculus.org/openbox/download.php. Reported by
	Quazgaa.  

Tue Dec 23 10:10:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Really really fix the off by one error in the progress bar. We have
	to consider both starting and ending brackets.  

Tue Dec 23 06:08:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Tue Dec 23 01:24:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make CGI support depend on the presence of setenv().  

Mon Dec 22 23:35:58 2003  Laurent Monin <zas@norz.org>:

	* doc/man/man1/elinks.1.in:

	Manpage date was updated.  

Mon Dec 22 22:55:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Fix help2tool to properly handle '('s in strings so now the default
	for http user agent should be correct.  

Mon Dec 22 22:55:05 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/Makefile.am:

	We should dump the generated manpage back to the srcdir, not
	builddir.  

Mon Dec 22 22:53:25 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/Makefile.am:

	Make update-manpages to actually work.  

Mon Dec 22 22:50:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Fix to proper test the $(ELINKS) binary, plus use top_builddir
	reported by pasky.  

Mon Dec 22 22:40:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/elinks.1.in, man5/elinks.conf.5:

	Add -conffile descriptiong to elinks.1 and update for user agent
	string in elinks.conf.5.  

Mon Dec 22 22:00:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	I will think out some punishments for those who remove blank lines.
	Someone may get hurt the next time, zas.  

Mon Dec 22 21:22:01 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Mon Dec 22 21:06:54 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, intl/gettext/libintl.c:

	Provide translations for language menu.  

Mon Dec 22 20:39:34 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Dec 22 20:21:30 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc2.CVS 

Mon Dec 22 18:24:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc2 

Mon Dec 22 18:23:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Dec 22 17:45:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Partially revert last patch. No off by one here, but somewhere else.  

Mon Dec 22 17:18:16 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Fix an off by one error, preventing display of scrollbar when only
	one element is out of visible range. Stricter values checking.  

Mon Dec 22 17:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Oops, swapped '_' and '-' in my last fix.  

Mon Dec 22 16:31:33 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Restore rev 1.134 option description layout: a extra newline before
	Description: and one after it. It makes msgbox easier to read.  

Mon Dec 22 16:25:47 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use isspace() and drop only the first space char after a split.  

Mon Dec 22 13:42:52 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Typeahead searches support.  

Mon Dec 22 13:13:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Fixed not showing the last link in the list.  

Mon Dec 22 12:15:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Changed the default User-Agent string from ELinks (ver; sys; dim) to
	ELinks/ver (textmode; sys; dim). I know it is quite late to do this,
	but it is really important that we get this right in 0.5.0 ;-).
	Uncovered long ago by Cliff Cunnington.  

Mon Dec 22 11:54:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Removed one really ancient TODO sticked to _parse_options().  

Mon Dec 22 11:54:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Try to fix compatibility problems with lynx using underscores in
	their argument names vs. we using dashes (-force-html in
	particular).  

Mon Dec 22 11:45:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Trivial cleanup. I know. But this is an exception ;).  

Mon Dec 22 09:57:19 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec 22 09:53:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Revert previous illicit lets-fix-end-in-textarea part.  

Mon Dec 22 09:49:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/: dump/dump.c, text/textarea.c:

	Setup the link numbering option before the call to
	init_document_options(). Fixes references to links being dumped
	without the link numbers appearing.  

Mon Dec 22 07:44:43 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Dec 22 04:30:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/widget.h:

	Improve the comments for widget_data.info.text.*.  

Mon Dec 22 04:14:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	Add the guideline that trees should be sorted before non-trees.  

Mon Dec 22 03:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc1.CVS 

Mon Dec 22 03:42:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5rc1 

Mon Dec 22 03:41:05 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, Czech translation updated.  

Mon Dec 22 03:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Fix ACT_HOME in textareas.  

Mon Dec 22 03:01:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/cmdline.c:

	.xif elipmoC 

Mon Dec 22 02:53:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c:

	Introduced -conffile, through which you can specify alternate
	configuration file name. Fixes bug 302, suggested by zas.  

Mon Dec 22 02:15:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Initialize @term in download_data_store(). Spotted by Jonas.  

Mon Dec 22 02:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Ensure correct handling of get_download_ses() returning NULL.  

Mon Dec 22 02:10:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Handle allocation failure.  

Mon Dec 22 02:09:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, download.h:

	get_download_ses() now --- when the original session is not around
	anymore --- prefers session belonging to the same terminal as the
	original one. This is accomplished by introduction of
	file_download.term.  

Mon Dec 22 02:07:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	When destroying session, do not destroy downloads to external
	handlers if we have another session belonging to that terminal,
	which could still handle these. Being reported by Miciah, this
	should fix bug 226.  

Mon Dec 22 01:45:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, viewer/dump/dump.c:

	Introduced commandline argument -no-numbering, which turns out
	numbering of links in the dump output. Numbering of links in the
	dump output is now the default behaviour.  

Mon Dec 22 01:19:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	Add new command line options, some undocumented env. variables and
	finally new ~/.elinks/ files.  

Mon Dec 22 01:12:41 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/viewer/dump/dump.c:

	If the links are numbered, show their list at the dump output
	footer. Patch by Jakub Horak <thement@hysteria.sk>, cleaned up by
	me.  

Mon Dec 22 00:24:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Mon Dec 22 00:10:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Add multiple new actions.  

Sun Dec 21 23:56:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/hierbox.c, bfu/menu.c, config/kbdbind.c,
	config/kbdbind.h:

	Remake ACT_TOGGLE_EXPAND into ACT_SELECT bound to ' ', and handle
	ACT_SELECT as ACT_ENTER in the other dialog kbd event handlers. This
	is a clean fix for the previous patch making hierbox browser keys
	configurable.  

Sun Dec 21 23:23:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Fix alphabetic order of actions.  

Sun Dec 21 23:19:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, config/kbdbind.c, config/kbdbind.h:

	Make hierbox browser keys configurable through ACT_TOGGLE_EXPAND,
	ACT_EXPAND and ACT_UNEXPAND.  

Sun Dec 21 23:02:40 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	HTTPS proxy support.  

Sun Dec 21 22:46:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	For now drop the @uttered_glyph and associated proposed fix for bug
	171 (<frameset> should be ignored if not the very first thing after
	<head>). It broke virtually all framesets because whitespaces were
	considered as 'anything' as well. It is much less pressing now,
	tho', so the real fix has to wait.  

Sun Dec 21 22:45:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Fix and improve last jonas patch: we now detects 3 types of end of
	lines and display lines as it should.  

Sun Dec 21 22:30:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed nonsensical unreachable comment near a statement in
	parse_html(). It is perfectly reachable. I guess it was me who
	sticked it there, tho' ;-).  

Sun Dec 21 22:20:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, terminal/screen.c, terminal/terminal.h:

	Changed back order of TERM_FREEBSD and TERM_KOI8 not to reposition
	TERM_KOI8. This keeps backward compatibility, although I'm not sure
	if we have *any* koi8 users now... whatever ;-).  

Sun Dec 21 22:15:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.inc:

	In the description for terminal._template_.type, add FreeBSD and
	correct the value of KOI-8. Raise the maximum value for the option
	by one so that selecting KOI-8 as the terminal type does not crash
	ELinks with an internal error.  

Sun Dec 21 22:01:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	In display_text, when the text widget is selected, ignore the block
	cursor setting and always display the cursor at the top-left corner
	of widget. This is done to aid screen readers that depend on the
	position of the cursor, as well as to help the user see that the
	text widget is selected.  

Sun Dec 21 21:54:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, document/plain/renderer.c:

	Don't show \r in "\r\n" as '.'. Requested by zas.  

Sun Dec 21 21:52:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	Display the scroll bar's elevator in the correct position, instead
	of always at the top of the bar, when the text widget is not
	selected.  

Sun Dec 21 21:42:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/text.c:

	Remove an obsolete TODO for scroll bars.  

Sun Dec 21 21:41:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Make URI rewrite prefix selection dependant on whether args was
	passed. So dumb prefixes won't shadow smart ones.  

Sun Dec 21 21:28:39 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in, src/protocol/rewrite/rewrite.c:

	The prefixes were copied from lua hooks to URI rewrite plugin.  

Sun Dec 21 21:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Revert last bogus patch.  

Sun Dec 21 21:25:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Use file_history for 'Save URL as' dialog and not goto_history.  

Sun Dec 21 21:18:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Use setup defines for URIs and add some useful #ifdef DEBUG smart
	prefixes.  

Sun Dec 21 21:14:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	document.browse.forms.show_formhist is by default off for now. I
	believe it is currently rather annoying for most of the ELinks user
	audience, has some rough edges etc.  

Sun Dec 21 20:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix possible leak in last patch.  

Sun Dec 21 20:50:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Use expand_tilde() always on possible file:// requests. Fixes bug
	331.  

Sun Dec 21 20:46:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Grammar fix in a comment.  

Sun Dec 21 19:40:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Finish zas' fixes for link wrap around to also include pressing down
	on last link.  

Sun Dec 21 19:29:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Add support for ACT_KILL_TO_BOL and ACT_REDRAW.  

Sun Dec 21 19:18:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Make the typeahead searching work both forward and backwards so
	up/down can also be used to navigate matching links.  

Sun Dec 21 19:09:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c, vs.c:

	Rename c_in_view() to current_link_is_visible().  

Sun Dec 21 19:08:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Force a reload when the document refresh URI is the current one.
	Idea by pasky.  

Sun Dec 21 18:30:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	The <noframe> element content is now also printed when its parent
	<frameset> wasn't processed.  

Sun Dec 21 18:25:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Introduced search_html_stack() (+ debug facility dump_html_stack).
	@encountered_body was removed and instead we now check whether the
	stack contains the BODY element.  

Sun Dec 21 18:17:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix page up to not move change current link if we do not have to.
	Same for page down.  

Sun Dec 21 17:55:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	sleep(1) when error was encountered so that user can read it.  

Sun Dec 21 17:25:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Do not report configuration file errors through elinks_error(). It
	was really quite clumsy as elinks_error() is designed just for
	rather internal errors reporting. It looked ugly, slowed down
	startup by great deal as it was beeping at each line, etc. Let's
	live in a happier world ;-).  

Sun Dec 21 17:20:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted the detach_formatted() changes. You can't just blast it off
	madly like that, it should only clean up well-defined items. At
	least examine the users before doing such a thing, please, so that
	you will see you just introduced bunch of segfaults when the
	detached document will be del_from_list()'d.  

Sun Dec 21 17:09:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Track CPPFLAGS along CFLAGS when hunting -I directives.  

Sun Dec 21 17:04:09 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Dec 21 17:03:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Dropped really horrid zas' hack. If we are going to fix the
	warnings, we have not to do it in such a pervert way. ;p 

Sun Dec 21 17:01:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h, view.c:

	Make typeahead keys configurable.  

Sun Dec 21 16:54:34 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Attempt to fix a weird configure time warning, please review and
	propose a better fix if any.  

Sun Dec 21 16:44:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Fixed l10n of error message when deleting error occurs.  

Sun Dec 21 16:37:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	detach_formatted(): Cleanup and simplification.  

Sun Dec 21 16:33:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	A possible fix (although I don.t know if it is even the correct one)
	for some image option configuration that breaks numbered links.
	Reported by Zellner.  

Sun Dec 21 16:30:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Slightly alter the typeahead status appearence and position the
	cursor there.  

Sun Dec 21 16:26:43 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sun Dec 21 16:22:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Dec 21 15:20:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Fixed negation bug introduced by the Jonas' cleanups ;-). This fixes
	uncancellable mainmenu aka bug 334.  

Sun Dec 21 14:56:54 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, cache/cache.c,
	document/document.c, document/renderer.c, document/html/parser.c,
	document/html/tables.c, globhist/globhist.c, lowlevel/interlink.c,
	lowlevel/select.c, protocol/uri.c, protocol/ftp/ftp.c,
	sched/session.c, sched/task.c, ssl/ssl.c, terminal/color.c,
	terminal/screen.c, util/error.h, util/file.c, util/lists.h,
	util/memory.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/view.c:

	internal() -> INTERNAL().  

Sun Dec 21 14:51:18 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/listbox.c, cache/cache.c, config/options.c,
	cookies/cookies.c, dialogs/status.c, document/html/parser.c,
	document/html/tables.c, lowlevel/dns.c, mime/mime.c,
	osdep/os2/os2.c, protocol/auth/auth.c, sched/connection.c,
	ssl/connect.c, ssl/ssl.c, util/error.h, util/object.h:

	debug() -> DBG(), wdebug() -> WDBG().  

Sun Dec 21 14:46:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Yeah, sure, go ahead, kill me. Typo fix.  

Sun Dec 21 14:41:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/dialogs.c:

	Supertypo fix.  

Sun Dec 21 14:39:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	internal() -> assertm() 

Sun Dec 21 14:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Changed the listbox_item info composition to be done the cookies way
	- sequence of add_format_to_string()s. This will hopefully ease the
	translation and overally sanitize this stuff. ;-) 

Sun Dec 21 14:13:19 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, bookmarks/backend/xbel.c, config/cmdline.c,
	config/options.c, intl/gettext/libintl.h, lowlevel/home.c,
	lowlevel/interlink.c, lowlevel/select.c, mime/backend/mailcap.c,
	scripting/lua/core.c, terminal/event.c, terminal/kbd.c,
	util/error.h, util/memory.c, viewer/dump/dump.c:

	error() -> ERROR().  

Sun Dec 21 14:08:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Include title in the info string for bookmarks.  

Sun Dec 21 13:53:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Renamed er()'s @sleep to @shall_sleep. Spotted by zas.  

Sun Dec 21 13:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reverted accidental change to the if (!s) condition.  

Sun Dec 21 12:51:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	debug() now doesn't sleep() anymore. Introduced wdebug() which still
	sleep()s.  

Sun Dec 21 12:40:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Tidyup of in_term().  

Sun Dec 21 12:33:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Removed some redundant keybindings introduced by Jonas.  

Sun Dec 21 12:25:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, options.c, options.inc:

	Moved cmdline options and option handlers from config/options.* to
	config/cmdline.c.  

Sun Dec 21 12:04:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Blank lines and trivial reindentation.  

Sun Dec 21 11:32:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Trivial cleanup.  

Sun Dec 21 11:25:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Group destructors in dump_formatted().  

Sun Dec 21 06:55:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/core.c:

	Handle malloc failures in init_guile.  

Sun Dec 21 06:54:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/: core.c, hooks.c:

	Fix problems that occur when a binary that is compiled with Guile
	support is started with the -no-home argument: 
	
	1. In init_guile, if elinks_home is NULL, 
	   return before attempting to straconcat it with a filename.  
	   This fixes an assertion failure upon starting ELinks.  
	
	2. In Guile's ELinks event hook handlers, when looking up the
	   corresponding Guile code functions, handle (i.e., ignore) any
	   exceptions.  This fixes the problem that ELinks immediately dies 
	   when the Guile code attempts to look up an undefined hook.  
	
	Note: Altho these changes seem to work, I don't know Guile; they
	might be entirely cruddy.  

Sun Dec 21 02:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Some minor cleanups.  

Sun Dec 21 02:06:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/menu.c, config/kbdbind.c,
	config/kbdbind.h:

	Introduce ACT_CANCEL as a configurable version of KBD_ESC, and
	ACT_NEXT_ITEM as a configurable version of KBD_TAB.  

Sun Dec 21 00:40:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, config/kbdbind.c:

	Make select and submit button keybinding configurable.  

Sun Dec 21 00:30:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, config/kbdbind.c,
	config/kbdbind.h, terminal/event.c, viewer/text/form.c,
	viewer/text/view.c:

	Introduce ACT_REDRAW used for redrawing the terminal. Bound to
	ctrl-(l|L) in all mappings.  

Sat Dec 20 23:54:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Remove macro that was made obsolete in last patch.  

Sat Dec 20 23:53:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c:

	Move some builtin keybindings to default keybindings and remove some
	that already existed.  

Sat Dec 20 23:42:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Arrange default keybindings so they are sorted by the key.  

Sat Dec 20 23:06:20 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.inc, src/protocol/proxy.c,
	src/protocol/http/http.c:

	HTTPS proxy support, patch by Timo Lindfors <lindi@kurp.hut.fi>,
	presumably also with some minor help of Jan Sembera
	<jan.sembera@flexible.cz>. This will probably yet need some little
	tuning, but seems generally ok.  

Sat Dec 20 23:02:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Add missing values for meta key in default keybindings.  

Sat Dec 20 22:42:53 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, INSTALL, configure.in, src/scripting/lua/core.h:

	Lua5 support, patch by Christian Cornelssen <ccorn@cs.tu-berlin.de>.  

Sat Dec 20 22:42:36 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	HACKING -> doc/hacking.txt 

Sat Dec 20 22:41:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c, config/kbdbind.h:

	Add ACT_MARK_ITEM used for hierbox browser item marking so it is
	user configurable.  

Sat Dec 20 22:18:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/kbdbind.c:

	Bring keybinding to the listbox browser so people with a tendency to
	weird keymappings can have their way.  

Sat Dec 20 22:12:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	cp2utf_8() optimization by witekfl from 2003-05-22. Chars < 128 are
	never translated so may be returned right away w/o even looking for
	the conversions. This should be quite measurable improvement. Again
	thanks to Miciah for bringing this to my attention.  

Sat Dec 20 22:07:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Use macro to cleanup some builtin keyboard combos.  

Sat Dec 20 22:06:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Finally commited witekfl's patch from 2003-05-22, removing redundant
	ei->name tests (it is never NULL). Thanks to Miciah for refreshing
	my memory.  

Sat Dec 20 21:57:21 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/scripting/lua/core.c:

	va_list may not be a pointer on all systems, so such a usage is
	invalid. This fixes compilation on alpha-linux platform, bug 322,
	and is work of Jakub Bogusz.  

Sat Dec 20 21:49:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Do not proceed with html_frameset() when we already either
	encountered the <body> tag or printed something to the document.
	This should +/- fix conformance problem triggered by
	
	(http://www.w3.org/MarkUp/Test/HTML401/current/tests/16_2-BF-01.html) aka bug 171, reported by zardoz.

Sat Dec 20 21:41:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	In the dialog KBD handler, use KM_MENU instead of KM_MAIN. Should
	fix various dialog navigation bugs. Introduced and reported by Jonas
	;-))).  

Sat Dec 20 21:22:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	SP_COLOR_LINK_LINES is triggered only for the first <body> tag in
	the document. This should fix weird link coloring when multiple
	<body> tags are in the document. This fixes bug 325.  

Sat Dec 20 19:00:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/auth/Makefile.am:

	Build dialogs.*.  

Sat Dec 20 18:59:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Some minor tidyup.  

Sat Dec 20 18:55:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Be more terse when babbling about SMB.  

Sat Dec 20 18:53:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	--enable-smb -> --disable-smb (by default enabled now), we check for
	smbclient presence (idea by zas).  

Sat Dec 20 18:48:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: mime/mime.c, protocol/file/file.c, sched/connection.c,
	sched/connection.h:

	src/util/encoding.* -> src/encoding/encoding.* 

Sat Dec 20 18:35:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Adjusted a little the linking order to link libauth.a after
	libhttp.a.  

Sat Dec 20 18:35:16 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/encoding/Makefile.am,
	src/encoding/encoding.c, src/encoding/encoding.h,
	src/util/Makefile.am, src/util/encoding.c, src/util/encoding.h:

	src/util/encoding.* -> src/encoding/encoding.* 

Sat Dec 20 18:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/Makefile.am:

	src/dialogs/auth.* -> src/protocol/auth/dialogs.*,
	src/protocol/http/auth.* -> src/protocol/auth/auth.*. And integrated
	to the build system.  

Sat Dec 20 17:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/encoding/: .cvsignore, .vimrc:

	Fairies.  

Sat Dec 20 16:59:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/dialogs/Makefile.am, src/dialogs/auth.c, src/dialogs/auth.h,
	src/protocol/auth/Makefile.am, src/protocol/auth/auth.c,
	src/protocol/auth/auth.h, src/protocol/auth/dialogs.c,
	src/protocol/auth/dialogs.h, src/protocol/http/Makefile.am,
	src/protocol/http/auth.c, src/protocol/http/auth.h,
	src/protocol/http/http.c, src/viewer/text/view.c:

	src/dialogs/auth.* -> src/protocol/auth/dialogs.*,
	src/protocol/http/auth.* -> src/protocol/auth/auth.*. And integrated
	to the build system.  

Sat Dec 20 16:42:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/auth/: .cvsignore, .vimrc:

	Fairies.  

Fri Dec 19 23:37:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Check for @url protocol in request_additional_file() and take
	appropriate protocols if it is strange. This fixes crash reported by
	zas at http://www.contenido.de. I hope we have all the possible URL
	entry points hardened now.  

Fri Dec 19 23:21:24 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/sched/task.c:

	Update @protocol in do_move() when redirected, so that
	PROTOCOL_UNKNOWN redirects are catched and dismissed and the right
	handler is used when we were redirected to a different @protocol.
	Spotted and proposed fix by Martin Bays
	<elinks-dev@zugzwang.port5.com>.  

Fri Dec 19 22:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Localize @fn in do_follow_url().  

Fri Dec 19 18:30:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sysname.c:

	Removed a newline. Just wanted to trigger a commit ;-).  

Fri Dec 19 16:27:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, mime/backend/mailcap.c:

	Moved the protocol.mailcap compatibility aliases from
	config/options.inc to mime/backend/mailcap.c.  

Fri Dec 19 16:24:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	protocol.mailcap.description is now alias to
	mime.mailcap.description like all the other protocol.mailcap
	options. Jonas, please review. Spotted by Zas.  

Fri Dec 19 14:29:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanups.  

Fri Dec 19 12:07:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Clarify confusing (or confused?) description of
	replace_listbox_item().  

Fri Dec 19 12:03:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	cache/cache.c, config/kbdbind.c, config/options.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	Renamed *horribly* misnamed functions: init_browser_box_item() ->
	init_listbox_item(), replace_box_item() -> replace_listbox_item(),
	done_browser_box() (!!!) -> done_listbox_item().  

Fri Dec 19 11:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Blank lines changes.  

Fri Dec 19 11:32:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): free_ct -> plaintext_follow 

Fri Dec 19 11:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): Unify end and free_ct 

Fri Dec 19 11:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	ses_chktype(): ret1 -> do_not_follow 

Fri Dec 19 08:29:28 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec 18 22:37:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, menu.c:

	Removed some strange redundant kbd event tests *puzzlement*.  

Thu Dec 18 20:55:15 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* configure.in:

	Reverted last modification, it is useless now.  

Thu Dec 18 20:52:34 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Fabio, tell me, what is this rint() thing for? 

Thu Dec 18 20:38:08 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Dec 18 20:34:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/config/options.inc:

	Typo fix.  

Thu Dec 18 20:25:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* configure.in:

	Link against libm even if we don't compile LUA stuff.  Spotted by
	Zardoz@users.sourceforge.net.  

Thu Dec 18 17:05:44 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	Simplify fabio's last patch by using int_max().  

Thu Dec 18 13:47:58 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Distribute tab size in a more uniform way.  

Wed Dec 17 20:28:46 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More translation update 

Wed Dec 17 19:54:55 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Tranlsation update 

Wed Dec 17 17:42:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Dec 17 14:54:04 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec 17 14:05:55 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation fixes.  

Wed Dec 17 13:29:36 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Tue Dec 16 20:35:44 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/: bookmarks.c, bookmarks.h:

	s/const char */char */ 

Tue Dec 16 20:34:10 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated .po files and Italian translation.  

Tue Dec 16 19:54:56 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Check if get_attribute_value() returns NULL with the href attribute.  
	This is a sort of workaround for bug #150 (avoid crashes with
	invalid XBEL).  

Tue Dec 16 06:41:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	s/tab/karta/. Patch by Mikolaj Machowski.  

Mon Dec 15 20:21:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Removed obsolete comment about bzlib weirdness.  

Mon Dec 15 06:39:04 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/file/cgi.c:

	POST method should be handled correctly now.  

Mon Dec 15 06:21:07 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation was updated.  

Mon Dec 15 06:15:42 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Do not decompress files with suffixes 'gz' and 'bz2' sent via http.  

Sun Dec 14 14:46:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Use isspace() and ispunct(), and fix handling of newline char when
	splitting: only first one should be ignored after a split.  

Sun Dec 14 14:09:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	@dlg_width -> @width.  

Sat Dec 13 12:56:00 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sat Dec 13 10:03:52 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Dec 13 05:29:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Eliminate the @new_url variable from goto_url_with_hook and
	follow_url, and re-use the @url parameter instead.  

Sat Dec 13 05:25:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Improve the typeahead error message with the help from Miciah.  

Sat Dec 13 05:22:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/task.c:

	Complete the previous commit.  

Sat Dec 13 05:17:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/: guile/hooks.c, lua/hooks.c:

	Fix memory leaks in the Guile and Lua follow-url event hooks,
	following Jonas' pattern for the goto-url event hooks.  

Sat Dec 13 04:40:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/guile/: core.c, hooks.c:

	Compilation fixes: Add the void *data parameters to event hooks per
	src/sched/event.h:1.7->1.8, and add the struct module *module
	parameter to the module initialisation callback (wow, has Guile
	support been broken since it was modularised?!).  

Sat Dec 13 03:46:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	2 is pop up msg_box() and 1 is b33p in typeahead error handling.  

Sat Dec 13 01:53:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Make it possible to use the user defined keyactions for navigating
	widgets in the dialogs. Idea by Mikolaj Machowski <mikmach@wp.pl>.  

Sat Dec 13 01:41:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Make it possible to use the user defined keyactions in the main
	menu. Idea by Mikolaj Machowski <mikmach@wp.pl>.  

Sat Dec 13 00:39:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Quickly fix last patch before pasky starts complaining. ;) 

Sat Dec 13 00:32:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.inc,
	dialogs/status.c, sched/session.h, viewer/text/search.c,
	viewer/text/search.h, viewer/text/view.c:

	Melodic patch in hack minor adding support for typeahead searching
	of link text.  

Fri Dec 12 23:38:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Tree tagged. Prepare for assault attack... Three! Two! One! Let's
	go, first three at the right wing, next three at the left wing, me
	and seven and eight will keep at the centre. Target coordinates zero
	dot fife papa romeo echo one two, designation dot charlie victor
	sierra. Right wing, go. Left wing, go. The middle follows me.  

Fri Dec 12 23:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12. I'm a revisionist! 

Fri Dec 12 23:25:42 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12.CVS 

Fri Dec 12 23:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre12 

Fri Dec 12 23:18:30 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	_builtin_ user prefixes support 

Fri Dec 12 23:14:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed keybinding info for Tab::Go forward ('->' -> 'u') as well.  

Fri Dec 12 23:13:45 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed hotkeys conflict.  

Fri Dec 12 23:01:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Fri Dec 12 14:36:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	done_string(): Also clear the string magic.  

Fri Dec 12 14:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, util/string.c, util/string.h:

	Remove copy_string().  

Fri Dec 12 14:05:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Fix goto-url event (part II).  

Fri Dec 12 08:24:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Dec 12 07:19:56 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/sched/session.c:

	Avoid overlapping dialogs upon first start up.  

Fri Dec 12 06:30:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Thu Dec 11 12:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Wrap <sys/time.h> #include in HAVE_SYS_TIME_H.  

Thu Dec 11 10:54:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/hooks.c, lua/hooks.c:

	Free goto-url before setting it to NULL. Prevents ``Boom'' 

Thu Dec 11 10:41:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Added hotkey to Tab::Go forward.  

Thu Dec 11 10:41:07 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Dec 11 10:27:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed useless prototype.  

Thu Dec 11 06:42:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated .po and Italian translation.  

Wed Dec 10 21:34:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed shortcut of File::Go forward.  

Wed Dec 10 19:02:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	A few hotkey fixes.  

Wed Dec 10 17:14:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Add a few separators to the link menu.  

Wed Dec 10 17:05:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.h, dialogs/menu.c:

	Add more fun stuff to the tab menu.  

Wed Dec 10 16:42:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Move the tab_menu() so more handlers are accessible.  

Wed Dec 10 15:50:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Other part of fix for goto-url leak.  

Wed Dec 10 11:21:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/menu.c:

	Add missing #ifdef BOOKMARKS.  

Wed Dec 10 05:07:35 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/status.c:

	Compilation fix.  

Wed Dec 10 04:47:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.h:

	Handle the led panel like everything else in the status struct. Also
	fixes a bug causing leds from other that the current tab to be
	drawn.  

Wed Dec 10 03:45:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Pass the session for the selected tab to the tab menu.  

Wed Dec 10 03:38:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add bookmark entry to the tab menu.  

Wed Dec 10 02:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Properly adjust the position of the tab menu so entries are not
	accidentially envoked.  

Wed Dec 10 01:49:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Remove unused text color.  

Wed Dec 10 01:45:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Simplify getting of meter color.  

Wed Dec 10 00:24:09 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Enabled leds and local-cgi.  

Wed Dec 10 00:13:39 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Dec 10 00:12:08 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/task.c:

	The cursor was repositioned at the first link of a frame, if a link
	(of this frame) opens page in another frame. It should be fixed now.  

Tue Dec  9 23:08:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/rewrite/rewrite.c, scripting/guile/hooks.c,
	scripting/lua/hooks.c:

	Fix leak in relation to goto-url event.  

Tue Dec  9 22:59:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Hopefully fix the resetting to original title regression.  

Tue Dec  9 22:13:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Fixed internationalization and a trivial cleanup of
	push_login_button().  

Tue Dec  9 21:09:40 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update + menu hotkey binding fixes.  

Tue Dec  9 20:18:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, inpfield.c:

	Move DIALOG_MIN_WIDTH usage to the cause of the problem - the input
	field formatter.  

Tue Dec  9 17:33:57 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation update.  

Tue Dec  9 16:37:00 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Dec  9 13:59:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Moved smb_get_cache() to _even_ better spot.  

Tue Dec  9 13:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Whoops, moved READ_SIZE undef back where it was.  

Tue Dec  9 13:58:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	smb_read_data() now just uses READ_SIZE instead of taking ssize_t
	long. Besides, I have my doubts about ssize_t portability. (Dunno.) 

Tue Dec  9 13:51:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Moved smb_get_cache() to a better spot.  

Tue Dec  9 13:47:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Test for datalen instead of struri(conn->uri) in end_smb_func().
	This was porting error.  

Tue Dec  9 13:42:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	+-----------------------------+ | Do NOT remove blanklines!!! | 
	+-----------------------------+ 
	               | 
	               | 
	               | 
	               | 
	               | 
	               | 

Tue Dec  9 13:40:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Undef MAX_SMBCLIENT_ARGS.  

Tue Dec  9 13:39:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	smb port is now again 139. It doesn't break anything and looks nice.  

Tue Dec  9 13:38:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Overflow risk was handled by zas' in previous patch so shortened the
	FIXME.  

Tue Dec  9 13:38:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	error() introduced by zas was reverted back to fprintf(). stderr is
	standard error reporting channel.  

Tue Dec  9 11:37:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/smb/smb.c:

	Add #includes needed by FreeBSD.  

Tue Dec  9 09:34:06 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	An assertion to detect possible overflow was added. error() is used
	instead of fprintf().  

Tue Dec  9 09:21:25 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Protocol port is now zero, 139 is a non sense here. smbclient
	options were commented, and debug level was set to zero to preserve
	display even if we have a global smb.conf debug level set.  

Tue Dec  9 08:56:18 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Code redundancy reduction by introducing smb_get_cache(). Previous
	change about assertion was changed again since i am not sure about
	what to do in uri.datalen == 0 case.  

Tue Dec  9 08:44:21 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Reduce code redundancy by introducing smb_read_data(). A wrong
	assertion was replaced by a test.  

Tue Dec  9 07:15:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update and fix.  

Tue Dec  9 03:38:47 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/dialogs.c:

	Do not allow Login for dontsave pages in Form history manager (fix
	for bug #306). Implemented with a dialog that informs the user.  

Mon Dec  8 23:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/rewrite/rewrite.c:

	A colon can separate smartprefix from its arguments as well.  

Mon Dec  8 23:00:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, protocol/rewrite/Makefile.am:

	librewrite.a -> liburirewrite.a 

Mon Dec  8 22:58:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Removed now-redundant assignment.  

Mon Dec  8 22:57:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Fixed rlimit code introduced by zas.  

Mon Dec  8 22:45:33 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Bunch of comments, fixme, minor cleanup. Sorry but i have no time
	for fixing it now, but this patch will give some directions.  

Mon Dec  8 19:45:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Dec  8 19:36:56 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced 

Mon Dec  8 17:53:02 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Dec  8 16:16:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/smb/smb.c:

	Do not show . in smb directory list, and use a better way to close
	all unneeded file descriptors.  

Mon Dec  8 11:06:35 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec  8 09:23:55 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Mon Dec  8 02:56:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Funky stuff .. the previous buggy '_template' actually worked.  

Mon Dec  8 02:51:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	For builtin templates set the description to the one in the template
	when adding the option.  

Mon Dec  8 00:39:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, bfu/dialog.c:

	Ensure that dialogs (and especially the _template_ option edit ones
	that contains no text to increase it) has a comfortable minimum
	width. Set to the magic number of 42.  

Mon Dec  8 00:24:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Do not add the proxy URI but the 'real' URI to globhist. Regression
	introduced when the adding of URIs in frames fixed.  

Mon Dec  8 00:22:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Validate sanity check although it should not happen.  

Sun Dec  7 23:34:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed hotkey.  

Sun Dec  7 21:40:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Hopefully a fix of an off by one error in the progress bar filed as
	bug 320.  

Sun Dec  7 21:39:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Compile fix for FreeBSD frame patch.  

Sun Dec  7 21:26:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Update widgets count. Spotted by Jonas.  

Sun Dec  7 21:03:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/options.c, terminal/screen.c, terminal/terminal.h:

	Support for FreeBSD frames (by mikulas, from 0.99pre14).  

Sun Dec  7 20:49:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Improved HTTP code 204 handling (by mikulas, from 0.99pre14).  

Sun Dec  7 20:18:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Reorder cases in the @type switch to eliminate a goto.  

Sun Dec  7 20:17:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Convert @type checking to a switch.  

Sun Dec  7 20:15:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	close() can spoil @errno, so save errno before.  

Sun Dec  7 20:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/smb.c:

	Abort connection with state S_OUT_OF_MEM instead of -errno after
	allocation failure, spotted by Jonas.  

Sun Dec  7 16:51:43 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	SMB protocol, goto rewritting. Kicked to do that by Jonas.  

Sun Dec  7 16:45:15 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, src/Makefile.am,
	src/protocol/Makefile.am, src/protocol/protocol.c,
	src/protocol/protocol.h, src/protocol/smb/Makefile.am,
	src/protocol/smb/smb.c, src/protocol/smb/smb.h:

	Introduced support for SMB protocol (you need to have smbclient
	installed), by default disabled at compile time (--enable-smb) (by
	mikulas, from 0.99pre12).  

Sun Dec  7 15:59:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Compilation fixes.  

Sun Dec  7 12:50:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed another possible aliasing bug in lists handling (by mikulas,
	from 0.99pre14).  

Sun Dec  7 12:01:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/smb/: .cvsignore, .vimrc:

	Fairies.  

Sun Dec  7 11:55:05 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/man/man1/elinks.1.in:

	ELinks was written by a team.  

Sun Dec  7 11:52:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/event.c:

	Fixed possibility of invalid intercom communication crashing ELinks
	(by mikulas, from 0.99pre10).  

Sun Dec  7 11:39:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed possible aliasing bug in lists handling (by mikulas, from
	0.99pre10).  

Sun Dec  7 11:34:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed incorrect file truncation of file on 304 reply (by mikulas,
	from 0.99pre10).  

Sun Dec  7 11:29:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Set IPTOS_THROUGHPUT on data sockets (assumably by either mikulas or
	brain, from 0.99pre10).  

Sun Dec  7 11:24:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/ftp/ftp.c:

	Localized the @fd variable in ftp_retr_file().  

Sun Dec  7 11:17:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Do not retry DNS failures (by mikulas, from 0.99pre10).  

Sun Dec  7 02:45:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Added some TODOs.  

Sun Dec  7 02:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Cleanup to use macro for array sizes.  

Sun Dec  7 02:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Cleanup.  

Sun Dec  7 01:57:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Add .  

Sun Dec  7 01:45:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/rewrite/rewrite.c:

	Elaborate a bit in the URI rewriting option description.  

Sun Dec  7 00:59:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Sun Dec  7 00:50:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in, src/Makefile.am, src/modules/module.c,
	src/protocol/Makefile.am, src/protocol/rewrite/.cvsignore,
	src/protocol/rewrite/.vimrc, src/protocol/rewrite/Makefile.am,
	src/protocol/rewrite/rewrite.c, src/protocol/rewrite/rewrite.h,
	src/sched/task.c:

	Support for URI rewriting like the one scripting extensions provide.
	Prefix enable options are on by default since it can lead to
	confusion if it does not seem to work because of this when first
	rewrite rule is defined by the user. Patch by kuser and me.  

Sun Dec  7 00:26:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	File::Bookmark document has now 'a' as its hotkey. Idea by Jonas.  

Sun Dec  7 00:26:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reassigned menu hotkeys in the File menu to make some actual sense,
	cleaning up some historical twists. This oughta happen once.  

Sun Dec  7 00:22:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reverted 1.62 (by me) and re-add 'add bookmark' menu item.  

Sun Dec  7 00:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Moved @tools_menu near do_tools_menu().  

Sat Dec  6 23:37:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.c:

	Missing include sched/event.h added. Spotted by Jonas.  

Sat Dec  6 23:02:35 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre11.CVS 

Sat Dec  6 23:00:11 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre11 

Sat Dec  6 22:59:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Dec  6 22:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Dec  6 22:37:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed parsing of the Status HTTP header.  

Sat Dec  6 21:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Removed useless include.  

Sat Dec  6 21:58:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, task.c:

	Bunch of compilation fixes.  

Sat Dec  6 21:57:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Compilation fix.  

Sat Dec  6 21:57:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Reverted Jonas' removal of setting @bookmark_dirty when a folder
	expansion was changed.  

Sat Dec  6 21:04:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Fixed names of members of struct session_task.  

Sat Dec  6 21:03:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Compilation fix.  

Sat Dec  6 17:10:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Removed useless include left there by Jonas ;-).  

Sat Dec  6 17:05:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Compilation fix.  

Sat Dec  6 17:04:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.c, session.h, task.c,
	task.h:

	More task-related routines were moved from sched/session.* to
	sched/task.*.  

Sat Dec  6 16:44:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Trivial tidyup.  

Sat Dec  6 16:44:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.c, session.h, task.c:

	Introduced struct session_task, session.task* moved there,
	session.task is now of that type.  

Sat Dec  6 16:34:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/task.h:

	Declare struct terminal instead of including terminal/terminal.h.  

Sat Dec  6 09:52:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed leaking of @d if Status: 101 header occurs. Introduced by me,
	reported by Jonas. So the edification is not to write new code when
	sleeping.  

Sat Dec  6 09:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed REFERER_SAME_URL HTTP_REFERER-related leak introduced by me,
	reported by Jonas.  

Sat Dec  6 09:48:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file/cgi.c, http/http.c:

	Fixed send_cookies()-related leaks introduced by me, reported by
	Jonas.  

Sat Dec  6 02:57:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/task.c:

	Fix typo.  

Sat Dec  6 02:56:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, dialogs/menu.c, document/refresh.c,
	document/html/parser.c, sched/Makefile.am, sched/session.c,
	sched/session.h, sched/task.c, sched/task.h, viewer/text/link.c,
	viewer/text/view.c:

	Move the goto family to task oriented file.  

Sat Dec  6 02:53:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.h:

	This is unfortunately necessary since we have a few leaks.  

Sat Dec  6 02:27:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Minor simplification to use uri.protocol instead of string
	comparing.  

Sat Dec  6 00:30:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	SERVER_PROTOCOL is now HTTP/1.1. Hmm, I think the CGI environment is
	more-or-less complete now, modulo some really tiny details.  

Sat Dec  6 00:25:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Added support for the 'Status' HTTP header. It can get there from a
	CGI script.  

Sat Dec  6 00:04:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Typo fix.  

Sat Dec  6 00:02:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/file/cgi.c:

	Compilation fixes.  

Fri Dec  5 23:52:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_COOKIE.  

Fri Dec  5 23:45:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	send_cookies() now does not take the @header argument anymore and
	returns a string on its own, without leading 'Cookie: ' and trailing
	'\r\n'.  

Fri Dec  5 22:58:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/: cookies.c, cookies.h:

	send_cookies() now returns struct string *, for now being the passed
	@header if some cookies were actually appended there or NULL
	otherwise.  

Fri Dec  5 22:46:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/: Makefile.in, localealias.c:

	Use LOCALEDIR defined in configure.in to /locale since HP-UX' cc
	preprocessor cannot handle all these -D args.  

Fri Dec  5 22:31:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Fixed invalid zas' cleanup. Trivial algebra ;-).  

Fri Dec  5 22:30:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Compile fix for HP-UX' cc that do not like bogus ';' in structs.  

Fri Dec  5 22:22:00 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Abnormal link wraparound from top to low part of document view when
	going up was fixed.  

Fri Dec  5 22:13:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Now, subdirs of the CGI path directories are allowed when testing
	validity of CGI script path. Internally, we now pass the path with
	trailing slash to test_path().  

Fri Dec  5 22:01:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	choose_mouse_link(): cleanup, comments and code simplification.  

Fri Dec  5 21:37:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Code simplification, using int_upper|lower_bound() and temp. vars.  

Fri Dec  5 21:19:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	find_link(): @l -> @link_pos, improved readibility by introducing
	ymin and ymax.  

Fri Dec  5 21:00:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Tiny tidyup of test_path().  

Fri Dec  5 20:49:07 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	get_link_url(): use @link instead of @,  use a switch here since it
	looks more appropriate when matching enum values.  

Fri Dec  5 20:27:31 2003  Laurent Monin <zas@norz.org>:

	* po/sk.po:

	Fix missing \n in a translation.  

Fri Dec  5 19:12:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Damned unsigned chars makes it necessary to put all kinds of garbage
	casts in the code. ;-) 

Fri Dec  5 19:02:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	When setting QUERY_STRING and using the query string we need to
	temporarily insert NUL char on the @post position if there is any.  

Fri Dec  5 18:53:25 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Dec  5 18:21:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	TODO about HTTP auth.  

Fri Dec  5 18:20:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_PRAGMA and HTTP_CACHE_CONTROL to no-cache if appropriate.  

Fri Dec  5 18:18:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_IF_MODIFIED_SINCE.  

Fri Dec  5 18:17:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT_LANGUAGE more properly.  

Fri Dec  5 18:14:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT_LANGUAGE.  

Fri Dec  5 18:12:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Explain why we won't set HTTP_ACCEPT_ENCODING.  

Fri Dec  5 18:11:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Protect against vim's cindent bugs ("*/*" messed it up).  

Fri Dec  5 18:08:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_ACCEPT to */*.  

Fri Dec  5 18:07:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Do not check for setenv("HTTP_USER_AGENT") failure.  

Fri Dec  5 18:07:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_REFERER.  

Fri Dec  5 18:02:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set HTTP_USER_AGENT.  

Fri Dec  5 18:02:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: http.c, http.h:

	Export subst_user_agent().  

Fri Dec  5 17:53:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_PROTOCOL to ELGI/1.0.  

Fri Dec  5 17:49:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	It is possible to have QUERY_STRING in POST query, so added support
	for that to set_vars().  

Fri Dec  5 17:48:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Added blank line ;-).  

Fri Dec  5 17:47:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Cleaned up setting SCRIPT_NAME to be uniform to the others.  

Fri Dec  5 17:45:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set REMOTE_ADDR to 127.0.0.1. Empty string could be maybe better,
	though.  

Fri Dec  5 17:41:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set GATEWAY_INTERFACE to CGI/1.1.  

Fri Dec  5 17:40:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_NAME to localhost. Empty string could be maybe better,
	though.  

Fri Dec  5 17:38:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Convert handling of c_pipe() error to goto end1 in execute_cgi().  

Fri Dec  5 17:37:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	close() pipes on error, if they were created already.  

Fri Dec  5 17:31:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Set SERVER_SOFTWARE to ELinks/<VERSION>.  

Fri Dec  5 17:11:58 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Stahuju -> stahuji 

Fri Dec  5 17:10:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed bug of ELinks not closing local CGI connections.  

Fri Dec  5 15:17:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Only compare document options width if the document is not plain.  

Fri Dec  5 13:50:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, renderer.c, html/parser.c:

	A nice little hack that will mark those document that actually
	depend on a specific document height (those that contain textareas
	or frames). This means we can better check if we need to compare the
	height and determine if we need to rerender.  

Fri Dec  5 08:38:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Convert assertion to test, and extends it to check for uri->hostlen
	== 0, which is correct but do not have sense here. It shold fix bug
	280 (...).  

Fri Dec  5 05:41:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/viewer/text/view.c:

	Middle click opens links in a new backgrounded tab.  

Fri Dec  5 05:18:16 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/viewer/text/view.c:

	Invert behaviour of the mouse wheel on tabs, wheel down jumps to the
	next tab. Based on new IThinkIsBetterThisWay(TM) technology.  

Thu Dec  4 19:40:15 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated translation.  

Thu Dec  4 18:20:42 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/: config/options.c, cookies/dialogs.c:

	Indentation and whitespace fixes.  

Thu Dec  4 18:05:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/file.c:

	Trivial tidyup.  

Thu Dec  4 16:31:26 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Thu Dec  4 16:01:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Dec  4 13:42:57 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Dec  4 12:28:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Bunch of minor fixes: split_line() is now clever in some rare cases
	of unsplittable text. Some assertions were added, cleanup. Note that
	more work is needed we still have weird issues here.  

Thu Dec  4 11:11:03 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/config/options.inc,
	src/protocol/file/cgi.c, src/protocol/file/file.c:

	Support for local CGIs is now controlled by --enable-local-cgi
	configure option. Whitespaces and ending dots were fixed too.  

Thu Dec  4 09:27:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, dialogs/status.c, document/renderer.c,
	sched/session.c, sched/session.h, viewer/text/view.c:

	Move session status info to new session_status struct.  

Wed Dec  3 23:23:12 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Glorified Jonas a little.  

Wed Dec  3 23:21:15 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Slightly updated Mikulas' record.  

Wed Dec  3 23:20:42 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed BFU colorization from my record.  

Wed Dec  3 23:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, NEWS:

	Local CGI support.  

Wed Dec  3 23:18:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Dec  3 18:32:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Increase padding so also Ctrl-Insert is within the limit.  

Wed Dec  3 18:31:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Compile fix for FreeBSD.  

Wed Dec  3 17:16:08 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Do not attempt to display text widget if there is no room for it in
	dialog.  

Wed Dec  3 17:10:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Make it possible to cycle tabs by mouse wheeling in the tab area.  

Wed Dec  3 17:07:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/view.c:

	Add small (right clickable) tab menu.  

Wed Dec  3 16:40:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	Previous patch was breaking loading of file URIs (ie .), reported by
	Jonas. Now we check if protocol needs a slash after host or not and
	fail if there is no host part for concerned protocols.  

Wed Dec  3 15:30:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Fix the hotkey listed for the menu item 'Open in external editor':
	s/Ctrl-E/Ctrl-T/.  

Wed Dec  3 15:15:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/download.c:

	In dlg_abort_download and dlg_undisplay_download, use @file_download
	instead of dlg_data->dlg->udata as we've assigned the latter to the
	former.  

Wed Dec  3 14:08:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Give do_refresh_dialog() the static keyword.  

Wed Dec  3 13:58:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/download.c:

	In push_delete_button, use @file_download instead of
	dlg_data->dlg->udata as we've assigned the latter to the former.  

Wed Dec  3 13:03:51 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	When there's no host part in url, we should just emit a bad url
	syntax error instead of attempting to create a connection to an
	obviously invalid host. This patch does that and should fix bug 280.  

Wed Dec  3 13:02:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Clean up draw_frames: Remove an unused variable, add a blank line,
	and simplify the bounding of current_link.  

Wed Dec  3 12:37:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Remove a TODO that was done by pasky in
	src/globhist/globhist.c:1.53->1.54: Do not read/write globhist when
	anonymous.  

Wed Dec  3 11:27:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Give request_frameset() the static keyword.  

Wed Dec  3 07:29:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Remove an unnecessary |if (ml)|: freeml() checks that its argument
	is not NULL before dereferencing it.  

Wed Dec  3 07:23:28 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In get_form_url, improve upon (i.e., fix) my previous fix for a
	memory leak that could occur when malloc fails
	(src/viewer/text/form.c:1.60->1.61).  

Wed Dec  3 01:19:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Dec  3 01:16:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Hopefully restore test_path() handling to original one.  

Wed Dec  3 01:06:05 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Dec  3 00:49:52 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/hierbox.c:

	s/can not/cannot/ 

Wed Dec  3 00:46:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Remove an #include for document/document.h, which was made
	unnecessary in src/config/options.c:1.410->1.411.  

Tue Dec  2 23:48:31 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Revert attempt to fix bug 304.  

Tue Dec  2 20:53:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, dialogs/status.h, document/renderer.c,
	viewer/text/view.c:

	Blast off init_bars_status(). We now update the (status) bars when
	needed and makes sure the document is also updated.  

Tue Dec  2 20:18:46 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Fix in Italian translation.  

Tue Dec  2 20:18:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Rerender the document when the tab bar visibility changes. Fixes bug
	87.  

Tue Dec  2 19:57:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, sched/session.c, terminal/window.c:

	Update ses->visible_tabs_bar in update_status() and call it when
	opening and closing tabs.  

Tue Dec  2 19:16:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/status.c, dialogs/status.h:

	Move status updating to update_status() and call it from the ui
	changehook.  

Tue Dec  2 19:07:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/window.h:

	Comment the window struct.  

Tue Dec  2 18:38:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Make it possible to add actions for any key map and add a toggle
	button to the keys dialog. Reveals some bugs in the text scrolling
	widget.  

Tue Dec  2 17:31:41 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Simple mouse support for text widget scrollbar.  

Tue Dec  2 16:51:19 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Define BIG_READ as 65536 and use it instead of hardcoded number.  

Tue Dec  2 16:26:39 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Dec  2 16:00:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	HTTP code 307 is now handled (as a 302, not perfect but should do
	the job).  

Tue Dec  2 14:58:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/renderer.c:

	Fixed potential bug created in rev1.10 by Jonas, when cache_entry
	could be freed and then used in init_document(), in particularily
	pathological case.  

Tue Dec  2 14:49:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Fixed capital letters in download window.  

Tue Dec  2 14:42:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Use hardcoded comma, not separator, between elapsed and estimated
	time, to keep it at one line and thus make the download window more
	compact.  

Tue Dec  2 14:36:04 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/status.c:

	Use @separator instead of hardcoded string.  

Tue Dec  2 14:22:58 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hotkey fix.  

Tue Dec  2 11:23:45 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Do not copy post data when copying old to new session. This patch
	should fix bug 304.  

Tue Dec  2 10:54:12 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/text.c:

	Vertical scrollbar display was tuned a bit, not yet perfect, but
	better. format_and_display_text() was introduced to shorten
	kbd_text().  

Mon Dec  1 23:44:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/tab.c:

	m33p.  

Mon Dec  1 21:50:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Cleanup.  

Mon Dec  1 21:47:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Don't be so optimistic.  

Mon Dec  1 21:46:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move window title code to display_window_title().  

Mon Dec  1 21:06:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Cleanup title trimming.  

Mon Dec  1 20:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Merge print_current_title() with other title tab displaying and
	rename it display_tab_bar().  

Mon Dec  1 20:44:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, viewer/text/link.h, viewer/text/view.c:

	Move print_current_title() to the status dialog file.  

Mon Dec  1 20:42:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fix IP address detection to be less naive and drastically reduce
	false positives (triggered ie. by elinks -dump links-2.1pre14 bug
	reported by Jonas).  

Mon Dec  1 20:31:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/status.c, sched/session.c,
	sched/session.h:

	Cache ui.window_title option in the session struct so we don't check
	in the status updating hotspot.  

Mon Dec  1 19:49:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/status.c, terminal/kbd.c:

	We cannot check option values in slaves because their option system
	may be out of sync. This was done for the ui.window_title option.
	Instead check it at the top level in print_screen_status().  
	
	Fixes debian bug #209303: "window_title gets ignored by secondary
	instances".  

Mon Dec  1 19:04:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	When I say fix, I mean fix.  

Mon Dec  1 19:03:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Whoops, fixed typo fix introduced in the latest patch. Spotted by
	Jonas.  

Mon Dec  1 19:01:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Revert part of rev. 1.13 Jonas' merge of shrink_format_cache() and
	delete_unused_format_cache_entries(). The two-phase cache cleanup
	was reintroduced, thus hopefully fixing huge memory leaks
	(basically, almost no documents were voluntarily freed from the
	cache. This could also somehow affect bug 297, but probably not.  

Mon Dec  1 18:55:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Reverted latest shrink_format_cache() change, it is still wrong.  

Mon Dec  1 18:42:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Do not break when the format cache size is within the value of
	format.size but keep looping to also check out of sync entries. This
	is more in the spirit of the original cache shrinking code.  

Mon Dec  1 18:28:38 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Typo fix.  

Mon Dec  1 18:28:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Fixed trying to run already running connection.  

Mon Dec  1 18:23:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/document.c, document/document.h:

	Check that format_cache_entries is in sync and do not allow
	recalculation.  

Mon Dec  1 18:13:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, renderer.c:

	Pass cache_entry to init_document() so cache locking is handled in
	the document lifecycle functions. Also move global document option
	re-initialization.  

Mon Dec  1 18:06:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/common.c:

	If @filenamelen is zero in get_next_path_filename(), return NULL.
	This fixes infinite loop in protocol/file/cgi.c:test_path().  

Mon Dec  1 16:33:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Added missing includes.  

Mon Dec  1 16:08:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Use horizontal border line as tab separator.  

Mon Dec  1 16:05:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/refresh.c,
	document/renderer.c, document/plain/renderer.c,
	protocol/protocol.c, protocol/user.c, sched/session.c,
	terminal/event.c, terminal/tab.c, viewer/dump/dump.c,
	viewer/text/form.c, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/vs.c:

	Fsck #includes.  

Mon Dec  1 15:45:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Minor simplifications.  

Mon Dec  1 15:35:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/document.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c, sched/session.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/textarea.c:

	Defer inclusion of document/html/parser.h because of introduced
	unsafe macros (ie. 'format').  

Mon Dec  1 15:30:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Include document/html/frames.h for struct frameset_param.  

Mon Dec  1 15:29:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:28:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/widget.c:

	Added missing include bfu/inphist.h.  

Mon Dec  1 15:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.h:

	Declare struct menu_head.  

Mon Dec  1 15:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, dialog.h:

	Include terminal/window.h in bfu/dialog.h, dlg_data->win->term is so
	common that...  

Mon Dec  1 15:23:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/button.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:23:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/widget.h:

	Added missing struct term_event decl.  

Mon Dec  1 15:21:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/status.c:

	Added missing includes.  

Mon Dec  1 15:20:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.h:

	Fixed missing struct doucment declaration.  

Mon Dec  1 15:19:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.h, checkbox.h, dialog.h, group.h, hierbox.h,
	hotkey.h, inpfield.h, inphist.h, listbox.h, menu.h, msgbox.h,
	text.h, widget.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 15:11:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.h:

	Reinclude document/view.h, we dereference struct document_view.  

Mon Dec  1 15:09:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Re-include document/document.h because of enum cp_status.  

Mon Dec  1 15:06:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include document/document.h.  

Mon Dec  1 15:04:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 15:02:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Added missing include terminal/window.h.  

Mon Dec  1 15:01:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Restore alphabetical order of includes.  

Mon Dec  1 15:01:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Added missing include document/view.h.  

Mon Dec  1 15:00:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.h, document/plain/renderer.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:55:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Revert accidentally committed incomplete patch.  

Mon Dec  1 14:51:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/session.h:

	Fixed missing include document/document.h.  

Mon Dec  1 14:51:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.h, download.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:41:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/style.c:

	Added missing include terminal/terminal.h.  

Mon Dec  1 14:40:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: frames.h, parser.h, renderer.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:36:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/style.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:33:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: refresh.h, renderer.h, view.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:31:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Typo fix.  

Mon Dec  1 14:31:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Include config/option.h instead of declaring struct option. We
	rename it to option_elinks.  

Mon Dec  1 14:24:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: color.h, draw.h, screen.h, tab.h, terminal.h,
	window.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:21:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:17:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Declare struct screen_char instead of including terminal/draw.h.  

Mon Dec  1 14:15:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, cookies/cookies.h,
	document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, document/html/renderer.h, lowlevel/dns.c,
	lowlevel/select.c, protocol/http/date.c:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:13:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Include util/error.h only when debugging.  

Mon Dec  1 14:11:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:10:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Declare struct string instead of including util/string.h.  

Mon Dec  1 14:10:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	TODO about using string fields for the struct uri members.  

Mon Dec  1 14:08:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: form.h, link.h, search.h, textarea.h, view.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:02:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.h:

	Substitute includes by necessary struct declarations.  

Mon Dec  1 14:01:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 14:00:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.h:

	Declare struct connection instead of including sched/connection.h.  

Mon Dec  1 14:00:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: connect.h, dns.h:

	Removed ancient comment.  

Mon Dec  1 13:56:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.h:

	Added missing include <string.h>.  

Mon Dec  1 13:55:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/download.c, globhist/globhist.c,
	globhist/globhist.h, lowlevel/Makefile.am, lowlevel/ttime.c,
	lowlevel/ttime.h, sched/connection.c, sched/connection.h,
	sched/download.c, sched/download.h, sched/session.c,
	util/Makefile.am, util/conv.h, util/ttime.c, util/ttime.h:

	lowlevel/ttime.* -> util/ttime.* 

Mon Dec  1 13:50:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/file/cgi.c, sched/connection.c,
	sched/connection.h:

	Merge connection.cgi_* to connection.cgi_pipes.  

Mon Dec  1 12:30:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/cgi.c:

	Minor tidyup.  

Mon Dec  1 11:28:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move tab bar updating to display_tab_bar().  

Mon Dec  1 11:23:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/status.c:

	Move status bar updating to display_status_bar().  

Mon Dec  1 11:15:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Remove unused variable.  

Mon Dec  1 10:57:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Replace ugly usage of strchr with scriptlen.  

Mon Dec  1 10:51:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Don't mangle conn->uri but use memacpy and length variable instead.  

Mon Dec  1 10:43:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Fix last patch.  

Mon Dec  1 10:42:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/file/cgi.c:

	Make test path take the path length and don't do any string
	mangling.  

Mon Dec  1 09:16:38 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Dec  1 06:23:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: config/options.inc, protocol/file/Makefile.am,
	protocol/file/cgi.c, protocol/file/cgi.h, protocol/file/file.c,
	sched/connection.c, sched/connection.h, sched/error.c:

	Buggy CGI support.  

Mon Dec  1 05:58:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sun Nov 30 19:45:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/Makefile.am, dialogs/download.c,
	dialogs/status.c, dialogs/status.h, document/renderer.c,
	sched/history.c, sched/session.c, sched/session.h,
	viewer/text/link.c, viewer/text/view.c:

	Move session status management to separate file.  

Sun Nov 30 18:36:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, sched/session.c:

	Move ses->visible_(title|status)_bar management to change_hook.  

Sun Nov 30 16:13:36 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation updates/fixes.  

Sun Nov 30 06:42:48 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/: http.c, http.h:

	Preparation for CGI support.  

Sun Nov 30 00:22:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Change horizontal scrolling back to it was before (1.276 -> 1.277) 

Sat Nov 29 23:01:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	@separater -> @separator in get_stat_msg().  

Sat Nov 29 21:58:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Let's not use capital letters in the middle of sentence in
	get_stat_msg().  

Sat Nov 29 21:55:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/error.c, sched/error.h,
	sched/session.c, sched/session.h:

	Move get_stat_msg() back home. Requested by pasky.  

Sat Nov 29 21:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Finally fixed the auto-file://-assuming. Now also absolute paths
	will work.  

Sat Nov 29 21:37:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Make the download progress meter look like "[  7%  ]". It uses less
	space and looks spiffy too.  

Sat Nov 29 21:20:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed ./elinks bla.html usage, broken by changes in file:// URI
	semantics changes.  

Sat Nov 29 20:55:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Disable abort and delete file button in the download manager. The
	locking causing assertion failures.  

Sat Nov 29 20:39:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Show download meter in the download manager.  

Sat Nov 29 19:16:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Calculate x and y after layouting.  

Sat Nov 29 19:09:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Do not use dialog refreshing for the download dialog but control it
	the old way.  

Sat Nov 29 19:03:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Expose redraw_dialog() and make it control the calling of the
	layouter bassed on boolean argument.  

Sat Nov 29 18:33:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Use get_stat_msg() for the download dialog.  

Sat Nov 29 18:32:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	Make even the state message separater configurable.  

Sat Nov 29 18:18:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Oops fix floating point exception. >:) 

Sat Nov 29 18:07:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	Make the caller control the 'wide terminal' heuristics.  

Sat Nov 29 17:50:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	For URL 'file://', go to the current directory.  

Sat Nov 29 17:49:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Show elapsed time info in the status message and change the 'wide
	terminal' heuristics.  

Sat Nov 29 17:45:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed handling of absolute paths in transform_file_url().  

Sat Nov 29 17:37:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Inform that the speed is infact the speed.  

Sat Nov 29 17:31:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_stat_msg(): If the terminal is wide enough use longer names for
	values.  

Sat Nov 29 17:12:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_stat_msg(): Use macros for the calculations.  

Sat Nov 29 16:58:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless global_doc_opts declaration.  

Sat Nov 29 16:56:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: error.c, error.h, session.c:

	get_stat_msg() was moved to sched/error.* 

Sat Nov 29 16:46:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	get_stat_msg(): Decrease indentation by moving get_err_msg() up
	front.  

Sat Nov 29 16:12:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/header.c:

	parse_http_header(): Use memacpy and improve comment.  

Sat Nov 29 16:02:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/header.c:

	parse_http_header(): Fix off by one error eating non whitespace
	chars.  

Sat Nov 29 13:37:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Compilation fix.  

Sat Nov 29 13:14:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@h -> @value, @g -> @valend in parse_http_header().  

Sat Nov 29 13:13:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Swapped @h and @g declaration in parse_http_header().  

Sat Nov 29 13:13:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Described a little the value part parsing in parse_http_header().  

Sat Nov 29 13:10:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@i -> @itempos in parse_http_header().  

Sat Nov 29 13:09:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Minor simplifications in parse_http_header().  

Sat Nov 29 13:08:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	No need to rename parse_http_header_param().  

Sat Nov 29 13:06:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Comment a bit what's going on in parse_http_header().  

Sat Nov 29 13:02:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @i even more in parse_http_header().  

Sat Nov 29 13:01:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	@f -> @pos in parse_http_header().  

Sat Nov 29 13:00:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Minor tidyup of parse_http_header().  

Sat Nov 29 13:00:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @h in parse_http_header().  

Sat Nov 29 12:59:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Simplification of @h handling in parse_http_header().  

Sat Nov 29 12:59:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/header.c:

	Localized @i, @g in parse_http_header().  

Sat Nov 29 06:01:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix previous patch not handling lines being lower than max height.  

Sat Nov 29 05:40:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Simplify bounds checking and handle more keyboard actions.  

Sat Nov 29 05:21:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Always ensure that the maximum number of lines are available.  

Sat Nov 29 04:31:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/text.c, config/options.inc:

	Make real scroll bar for scrollable text. Not perfect yet (the
	scroll bar steps are not that smooth).  

Sat Nov 29 02:40:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Only make room for top and bottom space and one button line.  

Sat Nov 29 02:38:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use text scrollable for hierbox item info.  

Sat Nov 29 02:26:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix some issues with resizing and add set cursor to (trivially) show
	that the text is selected.  

Sat Nov 29 02:13:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Cleanup widget_is_focusable() by creating text_is_scrollable()
	macro.  

Sat Nov 29 01:46:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Readd scrollable text widgets. Basicly it is the first version but
	with a few flaws fixed. Stuff like correct trimming so we do not
	draw an extra new line and forcing the dialog to be the width of the
	longest line.  

Sat Nov 29 01:06:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Introduced download-manager action, by default bound to 'D'.  

Sat Nov 29 00:53:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/file/file.c:

	Make it clear that the file URI we work on is pre-chewed by
	transform_file_url().  

Sat Nov 29 00:49:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	transform_file_url(): @cwdlen localized to the if() body inserting
	cwd.  

Sat Nov 29 00:48:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Keep the conventions - transform_file_uri() -> transform_file_url() 

Sat Nov 29 00:47:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	transform_file_uri() was cleaned up, goto converted to if() body.  

Sat Nov 29 00:45:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Zas' piggy comment sanitization in transform_file_uri().  

Sat Nov 29 00:44:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	insert_wd() -> transform_file_uri(), added function description.  

Sat Nov 29 00:40:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Changed file URL sanitization in insert_wd(). Now, it is more
	standard-compilant, respecting the host part of URI, modulo few
	practical extensions to help maintain backwards compatibility (disk
	in host part for dosfs and '.' in host part denoting the current
	working directory). However, this notation is NOT
	backwards-compatible per se. It shouldn't hurt pretty much anything
	though, I believe. Note that even non-localhost hostname is assumed
	to express the local system, although that may well not be the case
	:/.  

Sat Nov 29 00:16:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	insert_wd() cleanup - shift @url so that we don't work with big
	offsets later.  

Fri Nov 28 20:53:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, listbox.c:

	Calculate max dialog height like we calculate max width. This makes
	manager dialogs scale better.  

Fri Nov 28 19:49:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	widget_is_focusable() was make static inlined.  

Fri Nov 28 19:49:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Check if the selected is still focusable after the layouter has been
	called since dimension changes can affect it.  

Fri Nov 28 19:38:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Revert my monster scrollable text widget patch.  

Fri Nov 28 18:05:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Like vertical scrolling don't scroll horizontally when the rest of
	the document is already visible.  

Fri Nov 28 16:55:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix compile error.  

Fri Nov 28 16:32:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/msgbox.c, bfu/msgbox.h, bfu/text.c,
	bfu/text.h, bfu/widget.h, dialogs/info.c:

	Implement support for scrollable text widgets. First usage is the
	Keys message box.  It is not perfect yet but has not segfaulted for
	a long time now and I would like to have a reference for further
	hacking.  
	
	Text widgets can now be focusable but only when there is actually
	anything to scroll.  This is checked after calling the layouter
	whether we should cycle focus.  
	
	Forcing redrawing while the textwidget is scrollable will resize the
	dialog (and lead to unwanted recalculations of the line splitting.
	This should maybe be fixed. Also I'd like to have some percentage
	overview (like the title bar) when we are scrolling.  

Fri Nov 28 16:16:45 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Nov 28 16:12:06 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	More translation updates.  

Fri Nov 28 16:00:18 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Hungarian translation updated.  

Fri Nov 28 15:59:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Strip the post data part of URL when setting document title.  

Fri Nov 28 14:47:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	ui subtree is now auto-sorted. This should fix misplaced LED folder,
	reported iirc by zas.  

Fri Nov 28 14:02:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/widget.c:

	Remove an unnecessary #include "bfu/listbox.h".  

Fri Nov 28 13:47:48 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Nov 28 10:57:59 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Fri Nov 28 04:59:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Fix whitespace noise in last patch.  

Fri Nov 28 04:58:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h, link.c:

	Add reset action to the link menu.  

Fri Nov 28 04:57:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	Minor simplification.  

Fri Nov 28 03:49:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c, sched/download.h:

	Add support for delete the file when stopping a download. Idea from
	links-2.1pre8.  

Fri Nov 28 02:24:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, dialogs/download.c,
	sched/download.c, sched/download.h:

	Make dialog refreshing more controllable like signaling that there
	is no need to redraw. Add dirty flag to file_download so we only
	update the dialog when needed. This should restore behaviour from
	before usage of dialog refreshing.  

Fri Nov 28 02:22:30 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Nov 28 02:18:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/download.c:

	Stop -> Abort in the downloads manager.  

Fri Nov 28 01:51:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Always beep when download is finished, if we are supposed to.  

Fri Nov 28 01:46:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, sched/download.c:

	Use real dialog refresh for the download dialog.  

Fri Nov 28 01:40:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Removed strange and obvious comment.  

Fri Nov 28 01:31:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reverted making the notify beeping more buggy^Wclever, it breaks
	document.download.notify_bell == 2 case. Sorry Jonas, shouldn't have
	advise you w/o actually looking at the code.  

Fri Nov 28 01:06:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Make the notify b33ping even more clever.  

Fri Nov 28 00:57:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Eliminate gettext() call and error() calls from check_signals(),
	both presumably quite unsafe.  

Fri Nov 28 00:53:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Remove file_download->ask that is apparently unused.  

Fri Nov 28 00:53:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: link.c, textarea.c, textarea.h:

	Add 'Open in external editor' item to the Link menu for textarea
	form item. Hope this makes this feature more visible ;-).  

Fri Nov 28 00:48:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Documented assertm() being called in signal handler.  

Fri Nov 28 00:46:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.c:

	Eliminate memset() (function unsafe in signal context) from
	install_signal_handler().  

Fri Nov 28 00:39:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	done_document(): Blast off global document option pointer if the
	document is the `owner' so we don't have a dangling pointer. Could
	fix global_doc_opts corruption reported by Zas.  

Fri Nov 28 00:26:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Revert change to src/viewer/text: link.c (1.108 -> 1.109). "Links
	are sorted horizontally. See bug 11 for reasons." It breaks numbered
	links.  

Fri Nov 28 00:21:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/: Makefile.am, refresh.c, refresh.h:

	We now have more integrated dialog refreshing so remove the old one.  

Fri Nov 28 00:17:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Use the generic refreshed message box.  

Fri Nov 28 00:17:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c, msgbox.h:

	Add generic refreshed message box. When refreshing we also have to
	call the layouter now.  

Thu Nov 27 21:52:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/download.c:

	Refresh downloads in the manager so we can show progress with simple
	percentage. Implementing meter should not be that hard now.  

Thu Nov 27 21:51:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Add support for more generic dialog refresh.  

Thu Nov 27 21:20:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c:

	A bunch of compile fixes.  

Thu Nov 27 19:40:41 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: dialogs.c, formhist.c:

	Indentation beautification.  

Thu Nov 27 19:26:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	I cannot see how the auth dialog could have worked before since the
	text field data was not synced to the auth entry. At least it should
	be now.  

Thu Nov 27 19:12:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Set loaded = 1 when successfully saving formhist file, this should
	definitely close bug #295-take2.  

Thu Nov 27 18:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, dialogs/mime.c, mime/dialogs.c:

	Use default ok button handler.  

Thu Nov 27 18:43:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use default ok button handler.  

Thu Nov 27 18:39:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/dialog.c, bfu/dialog.h, bfu/widget.h,
	dialogs/edit.c, scripting/lua/core.c:

	Introduce a default ok handler to make a cleaner interface than the
	current dlg->refresh(_data).  

Thu Nov 27 16:02:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Create wrapper for cell formatting.  

Thu Nov 27 14:17:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Correctly pass the delete error type.  

Thu Nov 27 14:08:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Check if the item is used before asking whether the user wants to
	delete it.  

Thu Nov 27 14:05:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, terminal.c:

	Lock the 'real' term->spec .. not the _template_ :/ 

Thu Nov 27 13:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix hierbox delete actions by propagating delete properties from
	parents to children.  

Thu Nov 27 13:56:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Just another compile fix[tm].  

Thu Nov 27 13:53:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	Lock the term->spec option tree so it won't be deleted.  

Thu Nov 27 13:16:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Fix superfluous blank line between text and OK button in the
	Help::Keys dialogs.  

Thu Nov 27 13:09:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Remove FIXME.  

Thu Nov 27 13:08:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Paranoid handling in mailcap / mimetypes MIME when running in
	anonymous mode. They will now disable themselves. Enable checking
	was moved to the entry functions.  

Thu Nov 27 12:42:01 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/bfu/leds.c:

	Description of LEDs is now more complete. .po files were resynced
	and french translation was updated.  

Thu Nov 27 12:16:56 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and improved.  

Thu Nov 27 11:34:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Try to hint more to the new users - in the info window, show that
	space expands the folder if you open the info window upon a folder.  

Thu Nov 27 11:16:01 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A segfault occuring when calling keybinding manager was fixed, it
	was introduced by rev 1.123. No ops case is now handled correctly.
	It closes bug 298.  

Thu Nov 27 08:11:26 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 27 06:56:48 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, session.c:

	Simplification.  

Thu Nov 27 06:31:59 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Thu Nov 27 03:47:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use print_delete_error().  

Thu Nov 27 03:13:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	When resizing ensure that the selected item is moved into the
	hierbox browsers visible area. Fixes bug 58.  

Thu Nov 27 02:14:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	No need to call ok_dialog() since we just want to cancel the dialog.  

Thu Nov 27 02:06:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	No need to call ok_dialog() since input_field_ok() already does
	everything it does. Use macro to check whether to add to history.  

Thu Nov 27 01:55:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	No need to call ok_dialog() since we have already done everything it
	does and we really just want to nuke the dialog.  

Thu Nov 27 01:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Ok I try once more (although I should really go to bed). Dialog
	checking should now be ok when adding mime extensions.  

Thu Nov 27 01:43:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Fix last patch. We should of course also check dialog data.  

Thu Nov 27 01:19:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Use real button handler in the add mime extensions dialog.  

Thu Nov 27 01:06:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Don't allow to bookmark glohist entries in anonymous mode.  

Thu Nov 27 01:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Don't show terminal option save button in anonymous mode.  

Thu Nov 27 00:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Fix last patch to proxy ok button handler.  

Thu Nov 27 00:38:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use button handler to do the terminal resizing and not dlg->refresh.  

Thu Nov 27 00:29:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Fix bad usage of dlg->refresh_data .. instead use dlg->udata.  

Thu Nov 27 00:05:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/html/renderer.c:

	Add new option to control handling of non breaking space. If set it
	means do not honour non breaking space (the nbsp entity) but allow
	to wrap the text.  This can help keeping the width of documents down
	so no horizontal scrolling is needed. This is a partial fix of bug
	292 "Text should wrap on screen boundary".  

Wed Nov 26 23:49:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	dialogs/download.c, formhist/dialogs.c, globhist/dialogs.c:

	Add support for listbox specific drawing operations. For now it is
	used by download to trim long urls with ending dots.  

Wed Nov 26 23:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Rename delete_info -> context.  

Wed Nov 26 23:02:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Rename action_info -> context.  

Wed Nov 26 23:01:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Replace hierbox_action_info structure with listbox_context.  

Wed Nov 26 22:55:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Add listbox_item and fix comment.  

Wed Nov 26 22:44:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use listbox_context in test_search() when moving to parent box.  

Wed Nov 26 22:42:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Initialize html_top.invisible to 1, not ELEMENT_DONT_KILL.  

Wed Nov 26 22:35:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listbox.c, listbox.h:

	Move box_context to header and rename to listbox_context. This
	should be shared so we don't end up with 30 context data structure.  

Wed Nov 26 22:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Make it explicit in the info dialog that forms are saved for the
	given URL. I'm getting a bit tired'n'sleepy so maybe this isn't 100%
	best, but it looks like a good idea now :).  

Wed Nov 26 22:30:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/dialogs.c:

	Dontsave button label changed from 'Toggle enable' to 'Toggle
	saving'.  

Wed Nov 26 22:27:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Do not permit adding of new keybindings in anonymous mode.  

Wed Nov 26 22:26:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Update the includes, we moved stuff.  

Wed Nov 26 22:25:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Disallow bookmarks changes in anonymous mode.  

Wed Nov 26 22:21:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	dislpay_listbox_item(): Minor simplification.  

Wed Nov 26 22:16:32 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/protocol/Makefile.am,
	src/protocol/file.c, src/protocol/file.h,
	src/protocol/file/Makefile.am, src/protocol/file/file.c,
	src/protocol/file/file.h:

	protocol/file.* -> protocol/file/file.* 

Wed Nov 26 22:14:29 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/protocol/Makefile.am,
	src/protocol/ftp.c, src/protocol/ftp.h, src/protocol/ftpparse.c,
	src/protocol/ftpparse.h, src/protocol/ftp/Makefile.am,
	src/protocol/ftp/ftp.c, src/protocol/ftp/ftp.h,
	src/protocol/ftp/ftpparse.c, src/protocol/ftp/ftpparse.h:

	src/protocol/ftp(parse).* -> src/protocol/ftp/ftp(parse).* 

Wed Nov 26 22:10:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Reindentations, to keep the indentation at least a little in
	control.  

Wed Nov 26 22:06:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Remove useless prototype.  

Wed Nov 26 22:05:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Correct protocol/ftpparse.h inclusion.  

Wed Nov 26 22:01:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file/.cvsignore, file/.vimrc, ftp/.cvsignore,
	ftp/.vimrc:

	Added fairies.  

Wed Nov 26 21:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Fix error introduced in parser.c (1.270 -> 1.271). Spotted by pasky.  

Wed Nov 26 21:58:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Complete SP_FRAMESET root frameset setting condition, being lost in
	Jonas' not passing of @document to create_frameset(). (r1.379) 

Wed Nov 26 21:52:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Add button to toggle formhist_data->dontsave requested by zas (and
	also fix call to ensure that form history has been loaded when the
	manager is opened.  

Wed Nov 26 21:48:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Reindent some tiny bits more intelligently than Jonas ;-).  

Wed Nov 26 21:39:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	formhist/dialogs.c, globhist/dialogs.c:

	Add flag member to hierbox_button to signal whether the button
	should be shown when elinks runs in anonymous mode. This is (IMHO) a
	more proper fix compared to paskys previous (buggy ;-) patch that
	dublicated code since hierbox_browser() will take care of the logics
	for us.  

Wed Nov 26 21:33:15 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Do not optimize-thru-group structures if that would break logical
	structure.  

Wed Nov 26 21:27:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Minor fix_next_link_in_search() tidyup.  

Wed Nov 26 21:27:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Localize the variables to an inner loop in
	fix_next_link_in_search().  

Wed Nov 26 21:15:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Mention mimetypes file support as part of new MIME subsystem. Add
	download manager and displaying of URIs in plain text documents.  

Wed Nov 26 21:08:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	When !cookies.expire, its more usual meaning is just that the cookie
	should not be saved and expires with ELinks quitting.  

Wed Nov 26 20:58:44 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Skip fields lines if any, even if dontsave is set.  

Wed Nov 26 20:35:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/uri.c, protocol/uri.h, sched/session.c:

	extract_position() -> extract_fragment() 

Wed Nov 26 20:34:25 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov 26 20:30:13 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/dialogs.c:

	Info about save/dontsave was added to dialog.  

Wed Nov 26 19:39:31 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: dialogs.c, formhist.c, formhist.h:

	Formhist was fixed.  A field dontsave was added to struct
	formhist_data.  Load/save functions are now named
	load_forms_from_file() and save_forms_to_file(),
	form_already_saved() was renamed to form_exists(), old names were
	ambiguous (save to memory or file).  Cleanup and simplifications.  

Wed Nov 26 18:27:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Do not show the lua console in anonymous mode.  

Wed Nov 26 18:24:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Do not save cookies in anonymous mode.  

Wed Nov 26 18:21:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: formhist/dialogs.c, cookies/dialogs.c:

	Do not offer the [ Save ] button in anonymous mode.  

Wed Nov 26 18:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Never save formhist to disk in anonymous mode.  

Wed Nov 26 18:17:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix wrong error message order.  

Wed Nov 26 18:14:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, viewer/text/view.c:

	Enable bookmark manager even for anonymous users, but never actually
	save anything to disk. Useful for having some predefined bookmarks
	for the anonymous users.  

Wed Nov 26 18:09:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Do not read/write globhist when anonymous.  

Wed Nov 26 17:59:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Paranoia: disallow anonymous users to save formatted.  

Wed Nov 26 17:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make delete error printing more generic and handle undeletability
	(;/) even tho' it is a corner case.  

Wed Nov 26 17:41:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov 26 17:35:54 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Wed Nov 26 16:44:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Minor clarification of traverse_listbox_items_list() description.  

Wed Nov 26 16:19:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Recovery path for assertm().  

Wed Nov 26 14:31:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Don't center hierbox message boxes that contains additional item
	info.  

Wed Nov 26 14:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Don't allocate the box_context but use a local one.  

Wed Nov 26 14:10:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Add missing NULL_MENU_ITEM in the tools menu.  

Wed Nov 26 13:39:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/memlist.c:

	Clarify freeml's second comment.  

Wed Nov 26 13:13:23 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	In get_form_url, fix a memory leak that could occur if malloc
	failed.  

Wed Nov 26 13:00:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	In try_encoding_extensions, use memcpy instead of safe_strncpy as we
	already have the length of the string.  

Wed Nov 26 12:44:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.c:

	In bookmark_search_do, use assertm() instead of if and internal().  

Wed Nov 26 12:33:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Fix an omission in my last commit: Explain the significance of @fn's
	return value.  

Wed Nov 26 12:28:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Rewrite traverse_listbox_items_list's comment for clarity and
	accuracy.  

Wed Nov 26 11:45:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Give tp_cancel() and tp_free() the static keyword.  

Wed Nov 26 11:34:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	Now that the items have their own menu with many keyboard
	accellerators free, change the accellerators for the items on the
	Tools menu to be more intuitive. This also fixes a conflict between
	Global histor~y and Form histor~y that was introduced in
	src/dialogs/menu.c:1.196->1.197.  

Wed Nov 26 11:29:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/cookies.c,
	cache/cache.c, formhist/formhist.c, globhist/globhist.c,
	sched/download.c:

	Rename init_browser_box to init_browser_box_item and rename its @box
	variable to @item.  

Wed Nov 26 11:19:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Fix some memory leaks that could occur if malloc failed.  

Wed Nov 26 04:47:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	The download main menu item has been made obsolete by the download
	manager.  

Wed Nov 26 04:43:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/download.c, dialogs/download.h, dialogs/menu.c,
	sched/download.c, sched/download.h:

	More tools. Presenting a new and shiny download manager using under
	132 lines of code. The managers sure are cheap these days. :) 

Wed Nov 26 04:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix leak when deleting by proceeding even if msg is NULL.  

Wed Nov 26 04:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Compile fix.  

Wed Nov 26 04:07:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	object_nolock(cookie) when initializing.  

Wed Nov 26 03:19:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Rename all widget_data variables to widget_data.  

Wed Nov 26 01:29:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/Makefile.am, dialogs/download.c,
	dialogs/download.h, dialogs/menu.c, sched/download.c,
	sched/download.h:

	Move download dialog to separate file.  

Wed Nov 26 01:27:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	Include own header.  

Wed Nov 26 00:18:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/dialogs/menu.c:

	Moved the managers to the Tools menu.  

Tue Nov 25 22:59:45 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Cookies manager, cache manager 

Tue Nov 25 22:57:00 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Forms history.  

Tue Nov 25 22:56:09 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Marks support.  

Tue Nov 25 22:55:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/kbdbind.c, config/kbdbind.h,
	sched/session.h, viewer/text/Makefile.am, viewer/text/marks.c,
	viewer/text/marks.h, viewer/text/view.c:

	Marks support. Rather simple for now, especially you can jump only
	between marks set in the current document for now. (The marks have
	only single namespace over all the documents, though.) 

Tue Nov 25 22:03:41 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 25 21:58:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, opttypes.c:

	Re-fixed bug 216, ELinks should now correctly save already-saved
	aliases. It would be better if it actually deleted the aliases, but
	that'd be more complicated and I don't want to get into *this*
	trouble right now.  

Tue Nov 25 21:45:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	The redir_*() handlers having tons of duplicate code were unified to
	just frontends to a single wrap_or_() backend. F33r d4 pr3pr0c3ss0r.  

Tue Nov 25 21:27:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Reverted my old fix (1.86) for bug 216 (invalid saving of aliased
	options). It does not work, it turns out, and needs to be approached
	from entirely different way.  

Tue Nov 25 21:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Simplify parse_config_file()'s inner loop a little.  

Tue Nov 25 21:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	goto-url-home was rebound from 'm' to 'H' (by default) 

Tue Nov 25 19:48:01 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Tue Nov 25 19:46:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Removed apparently-dead kbdprefix.prefix.  

Tue Nov 25 19:35:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	Fix compile error.  

Tue Nov 25 18:04:03 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Nov 25 16:08:25 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Tue Nov 25 13:29:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/bookmarks.c, bookmarks/dialogs.c, config/kbdbind.c,
	config/options.c, globhist/dialogs.c:

	Remove listbox_items box member. That part of the design was (to me)
	a bit confusing since the items should not need know anything about
	the listbox_data because it is dynamic and we can easily derive the
	``correct'' box data in all functions that uses it.
	traverse_listbox_items_list() was updated to take the box data as an
	argument.  

Tue Nov 25 12:51:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Minor simplification.  

Tue Nov 25 10:09:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Fix can_delete_option to check whether the _parent_ option has the
	auto-create flag.  

Tue Nov 25 08:42:29 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/dialogs/menu.c:

	Hotkey was added for form history menu entry. French translation was
	updated and .po files resynced.  

Tue Nov 25 01:12:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Use generic delete button in the option manager.  

Tue Nov 25 01:07:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	bookmarks/dialogs.c, cache/dialogs.c, config/dialogs.c,
	cookies/dialogs.c, formhist/dialogs.c, globhist/dialogs.c:

	Add can_delete() method to listbox_ops.  

Tue Nov 25 00:34:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: dialogs.c, options.h:

	Introduce listbox_ops implementation for options and use it for the
	info button.  

Mon Nov 24 23:41:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Add comments for each button sectino and remove legacy code.  

Mon Nov 24 23:34:23 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: dialogs.c, formhist.h:

	Formhist item info box is now more complete.  

Mon Nov 24 23:22:25 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Typos fixes, oops. Compare types too in form_already_saved().  

Mon Nov 24 23:22:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/: dump/dump.c, text/vs.c, text/vs.h:

	Hrmpf. Reverted the view_state refcounting. It is not the way for
	the thing I ponder about ;-).  

Mon Nov 24 23:11:11 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Full field type information is now saved. formhist file format
	changed again (but now is more coherent), new file format will be
	automagically used and old files converted.  

Mon Nov 24 23:06:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	lock/unlock @vs we create for render_document() just in case we'd do
	something with it refcounting-wise along the way.  

Mon Nov 24 22:58:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.h:

	Introduced release_vs(), which unlocks view_state and destroy it if
	it becomes unused.  

Mon Nov 24 22:56:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: vs.c, vs.h:

	Added view_state.refcount.  

Mon Nov 24 22:39:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Finally fixed segfault on <frameset rows="200,*"> on FreeBSD (and
	maybe other BSD flavours). This was reported by various people,
	especially thanks to #linux.cz staff and guli for providing account
	on FBSD so that I could fix this. The fix was inspired by a patch
	(http://www.freebsd.org/cgi/query-pr.cgi?pr=3Dports/56668) by Mário
	Freitas <sub_0@netcabo.pt> included in the FreeBSD port, but it is
	slightly more paranoid.  

Mon Nov 24 20:46:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Nov 24 18:22:21 2003  Peter Samek <samek@upc.uniba.sk>:

	* po/sk.po:

	Slovak translation update.  

Mon Nov 24 17:35:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Mark the password entry in formhist file. This is a format change,
	please add a '*' at the beginning of each password entry in the
	file.  

Mon Nov 24 17:07:09 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: dialogs.c, formhist.c, formhist.h:

	Load saved forms on formhist dialog opening.  

Mon Nov 24 17:01:17 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Fix a memory leak.  

Mon Nov 24 16:42:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Add login button to the form history manager. It uses the generic
	hierbox goto handler.  

Mon Nov 24 16:35:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/sched/: download.c, session.c, session.h:

	Fix a crash when trying to download from a unknown protocol.  

Mon Nov 24 16:34:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/dialogs.c:

	Fix comment.  

Mon Nov 24 16:34:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Fix off by one error that caused the last button to be hidden.  

Mon Nov 24 16:23:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, formhist/Makefile.am, formhist/dialogs.c,
	formhist/dialogs.h, formhist/formhist.c, formhist/formhist.h:

	Add form history manager.  

Mon Nov 24 13:30:01 2003  Laurent Monin <zas@norz.org>:

	* contrib/lua/: bm.lua, hooks.lua.in, md5check.lua:

	Dumbprefix "bug" now exists and is a synonym of "bz", linked to
	"http://bugzilla.elinks.or.cz". Trailing spaces were removed.  

Mon Nov 24 13:15:48 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Elinksification.  

Mon Nov 24 12:00:33 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bookmarks/backend/default.c,
	bookmarks/backend/xbel.c, config/conf.c, config/urlhist.c,
	cookies/cookies.c, formhist/formhist.c, globhist/globhist.c,
	scripting/lua/core.c, viewer/text/search.c:

	Macros are now used for all filenames.  

Mon Nov 24 08:18:45 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Nov 24 06:54:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Back to previous version.  

Mon Nov 24 06:46:36 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Grammar fix.  

Mon Nov 24 04:45:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/viewer/text/link.c:

	Links are sorted horizontally. See bug 11 for reasons.  

Mon Nov 24 01:22:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c, mime/dialogs.c,
	protocol/auth/dialogs.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use get_dialog_offset() all over the place to get added dialog
	memory.  

Mon Nov 24 01:10:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, hierbox.c, listbox.c, listbox.h:

	Allocate listbox_data as 'add_size' when creating the hierbox
	browser.  

Mon Nov 24 00:33:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Store the number of buttons in the hierbox browser. A little faster
	and a little smaller.  

Mon Nov 24 00:23:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Remove add size usage from hierbox browsers. It seems to be pure
	legacy code not in use by anything anymore.  

Sun Nov 23 23:07:53 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fix.  

Sun Nov 23 23:02:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Oops fix leak when clearing and something is already in use. :/ 

Sun Nov 23 23:01:07 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/: formhist.c, formhist.h:

	@submit is now a pointer, should fix bug #288 + check for allocation
	failures.  

Sun Nov 23 22:48:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() take the initial value of the item
	member so my buggy hack can be gracefully avoided. Thanks Miciah.  

Sun Nov 23 18:52:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	[6 / 6] Use new data driven design for global history manager.  

Sun Nov 23 18:52:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	[5 / 6] Use new data driven design for cookie manager.  

Sun Nov 23 18:52:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	[4 / 6] Use new data driven design for cache manager.  

Sun Nov 23 18:49:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	[3 / 6] Use new data driven design for option and keybinding
	manager.  

Sun Nov 23 18:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	[2 / 6] Use new data driven design for bookmark manager.  

Sun Nov 23 18:47:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	[1 / 6] Make hierbox browser more data-driven by introducing a
	button structure (so the number of buttons is dynamically
	calculated) and storing the manager title in the browser structure.  

Sun Nov 23 17:33:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Make it official that hierbox_browser() button handlers always uses
	B_ENTER for the key and never passes any udata.  

Sun Nov 23 17:22:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Remove useless passing of session as button handler udata.  

Sun Nov 23 17:09:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Remove useless passing of session as button handler udata.  

Sun Nov 23 17:07:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Add TODO about making when_*() handler take dialog_data instead of
	dialog.  

Sun Nov 23 17:06:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Prefer deriving the session from dlg_data->dlg->udata rather than
	the button udata. We already does this for the generic goto handler
	do it for the bookmark edit button handler as well.  

Sun Nov 23 16:35:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	Comment the fix for bug 289.  

Sun Nov 23 13:59:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/refresh.c:

	We apparently still need to bail out if a type query is in progress
	for a refreshed URI. Fixes endless downloading of refreshed document
	aka. bug 289.  

Sun Nov 23 06:41:19 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Sun Nov 23 02:03:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Doh! Italian translation fixed.  

Sun Nov 23 02:01:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Sat Nov 22 22:05:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, cache/dialogs.c, globhist/dialogs.c:

	Use the goto button for bookmark and globhist browsers .. and eh add
	a goto button to the cache manager although it might not be too
	useful we need lots of shiny buttons, right? ;) 

Sat Nov 22 22:02:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Add generic hierbox goto button handler.  

Sat Nov 22 21:42:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Add support for various info requests like URI (usable for generic
	goto button) or full info.  

Sat Nov 22 20:49:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Merge info and delete button finalizers into
	done_hierbox_action_info().  

Sat Nov 22 20:47:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Restore behavior when ui.timer.enable == 2 that was broken by the
	introduction of the leds enable option.  

Sat Nov 22 20:39:28 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, src/bfu/hierbox.c, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/leet.po, po/lt.po, po/nl.po, po/no.po, po/pl.po,
	po/pt_BR.po, po/pt.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po:

	Missing space fix. .po files were resynced.  

Sat Nov 22 20:25:55 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Nov 22 19:19:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/timer.c:

	Set interactivity countdown timer to -1 after killing it. Fixes an
	assertion failure triggered when enabling/disabling it.  

Sat Nov 22 19:07:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Add option to control enabling of leds at runtime. It is only used
	in the led code so there is still a bit of overhead. Proposed fix
	for bug 287.  

Sat Nov 22 17:05:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, config/opttypes.c:

	Use add_to_list_end() instead of add_at_pos().  

Sat Nov 22 17:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Fix some locking issues.  

Sat Nov 22 16:50:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/backend/common.c:

	Remove useless #undef.  

Sat Nov 22 16:48:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() static.  

Sat Nov 22 16:28:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	We now require the info button text before locking the object so no
	need to subtract one to the refcount.  

Sat Nov 22 16:22:55 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Nov 22 16:18:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Use generic info button handler.  

Sat Nov 22 16:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Add delete button to cache manager.  

Sat Nov 22 16:16:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/dialogs.c:

	Implement all the listbox_ops for cache_entries.  

Sat Nov 22 16:10:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Merge get_cookie_info() and get_cookie_item_info().  

Sat Nov 22 16:10:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Not "Delete item <name>" but just "Delete <name>" 

Sat Nov 22 15:50:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/dialogs.c, globhist/dialogs.c:

	Use generic clear button for cookie and globhist browser.  

Sat Nov 22 15:43:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Add generic hierbox clear button handler.  

Sat Nov 22 15:38:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Fix wrong button numbers.  

Sat Nov 22 15:09:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make init_hierbox_action_info() take traverse_listbox_items_list()
	function instead of integer.  

Sat Nov 22 14:38:27 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, session.c:

	Hopefully fixed all issues related with rendering plain documents in
	frames.  

Sat Nov 22 14:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Expand the get_info() string to include all history item info and
	use hierbox info button handler.  

Sat Nov 22 14:19:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, cookies/dialogs.c:

	Provide generalized hierbox info button handler and use it for the
	cookie browser.  

Sat Nov 22 14:08:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	More action info generalization. get_hierbox_delete_info() renamed
	to init_hierbox_action_info() and now takes @scan_marked arg.  

Sat Nov 22 14:02:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Cleanup moving delete_hierbox_item_info to c file and renaming it
	hierbox_action_info since it can be used for implementing other
	button actions too.  

Sat Nov 22 13:54:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Add support for deleting cookies in the cookie manager.  

Sat Nov 22 13:45:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Make global history use the new (listbox item deletion) interface.  

Sat Nov 22 13:45:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Make bookmarks use the new interface.  

Sat Nov 22 13:44:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: listbox.c, listbox.h:

	Remove @del function from the listbox_ops. It has been replaced.  

Sat Nov 22 13:42:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Provide generic interface for deleting items in a hierbox_browser.  

Sat Nov 22 12:28:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Ideally the hierbox deletion helpers should handle any dialog stuff
	so no need to pass a term.  

Sat Nov 22 12:06:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Also add item finalizer to listbox_ops.  

Sat Nov 22 11:55:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, globhist/dialogs.c:

	Add object refcount utility and an info retriever to the
	listbox_ops.  

Sat Nov 22 10:25:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/download.c:

	Zas, please test! 

Sat Nov 22 03:04:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In done_browser_box, do not check whether box_data->sel and
	box_data->top are NULL before comparing them to @box_item: @box_item
	has already been asserted to be non-NULL, and besides, nothing
	horrible will come from passing replace_box_item a NULL pointer.  

Sat Nov 22 02:40:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	globhist/dialogs.c:

	Generalize hierbox delete info setup using
	get_hierbox_delete_info().  

Sat Nov 22 02:30:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, bookmarks/dialogs.c:

	Use generic delete structure for bookmark browser.  

Sat Nov 22 02:28:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Small fix for last patch. Also check if the selected item has an
	object attached.  

Sat Nov 22 02:16:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, globhist/dialogs.c:

	Create a generic hierbox delete info structure.  

Sat Nov 22 01:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	globhist/dialogs.c:

	Provide a generic hierbox delete button handler.  

Sat Nov 22 01:27:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Move browser item visibility setup to the event handler.  

Fri Nov 21 23:38:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	add_opt(): Pass the real option when initializing the listbox_item
	since all needed members has already been setup.  

Fri Nov 21 23:17:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	The check for NBSP_CHAR in the dump viewer should now be unneeded
	with the last patch.  

Fri Nov 21 23:15:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Wipe out the NBSP_CHAR encoding in the HTML renderer when we have
	registered it in the space list.  

Fri Nov 21 23:07:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.h:

	Define hierbox_browsers as extern.  

Fri Nov 21 22:39:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.h, cookies/dialogs.h, globhist/dialogs.h:

	Declare hierbox_browsers extern.  

Fri Nov 21 22:36:34 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Minor cleanup.  

Fri Nov 21 22:31:32 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Cleanup/minor optim. related to strange_chars.  

Fri Nov 21 22:23:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/xbel.c, intl/charsets.c, intl/charsets.h,
	terminal/event.c:

	Attempt to fix some issues consisting of char 1 to be printed in
	place of space when &nbsp; is encountered: one issue in xbel.c, and
	a simplification in terminal/event.c.  

Fri Nov 21 21:27:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, listbox.c, listbox.h:

	Move listbox_data initialization to init_listbox(). This looks like
	were it was designed to be done although error handling is not
	possible.  

Fri Nov 21 16:18:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Remove unused listbox_item members and save a few bytes.  

Fri Nov 21 16:15:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/dialogs.c, config/dialogs.c,
	globhist/globhist.c:

	Generalize replacing of the selected and top box item in
	done_browser_box().  The code is not equivalent to all the current
	way of doing it since it is basicly doing it the globhist way. This
	however seems more correct and it should now be consistent across
	all hierbox browsers. Also note that this seem to fix a bug where
	before it was not possible to highlight the bottom box unless the
	browser was first scrolled up.  

Fri Nov 21 11:01:49 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	l_current_title() now cleans the title from bad chars before
	returning it. It should fix bug 183. Miciah, please verify.  

Fri Nov 21 10:22:20 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, intl/charsets.c, intl/charsets.h,
	viewer/dump/dump.c:

	Use NBSP_CHAR and NBSP_CHAR_STRING macros to mark the use of special
	encoding for non-breaking spaces. It clarifies char 1 related
	issues. Thanks to Mikulas.  

Fri Nov 21 04:57:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, history.c, session.c,
	session.h:

	Rendering of plaintext document in frames should be fine now.  

Fri Nov 21 04:54:33 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/session.c:

	Added field target_frame to struct ftl.  

Fri Nov 21 04:52:23 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, download.h, session.c:

	Additional parameter for ses_chktype.  

Fri Nov 21 04:50:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Introduced list of struct tq.  

Fri Nov 21 04:47:50 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: download.c, session.h:

	tp_* functions use struct tq * instead of struct sesssion *.  

Fri Nov 21 04:45:10 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: dialogs/menu.c, dialogs/menu.h, sched/download.c,
	sched/download.h, viewer/text/view.c:

	Additional param for query_file 

Fri Nov 21 01:13:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, cache/cache.c,
	cache/cache.h, cache/dialogs.c, config/dialogs.c, config/kbdbind.c,
	config/kbdbind.h, config/options.c, config/options.h,
	cookies/dialogs.c, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h:

	The hierbox_browser now 0wnz the boxes list_head. Idea by Miciah.
	(Fixes bug with wrong ordering of list_head pointers introduced with
	the hierbox_browser structure) 

Fri Nov 21 00:59:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/dialogs.c, config/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	The hierbox_browser now 0wnz the dialog list_head. Idea by Miciah.  

Fri Nov 21 00:44:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/renderer.c:

	Clean up a comment that was introduced in
	src/document/html/renderer.c:1.278->1.279. @o was renamed to
	@doc_opts long ago, and it never was named @0.  

Thu Nov 20 21:27:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	A weird line was reintroduced to prevent ^A chars to be printed in
	dumps (reported by zardoz).  

Thu Nov 20 16:17:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Access globhist enable option value directly.  

Thu Nov 20 16:09:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/bookmarks.c:

	Use the bookmark title as the listbox text.  

Thu Nov 20 14:27:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Prospone the dialog list setup to the event handler.  

Thu Nov 20 13:07:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Use temporary variable to avoid funny wrapping.  

Thu Nov 20 12:37:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Update hierbox_browser() argument comment.  

Thu Nov 20 12:33:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Move struct hierbox_dialog_list_item to c file.  

Thu Nov 20 09:46:32 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Compilation fix.  

Thu Nov 20 04:21:23 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Thu Nov 20 02:51:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	In menu_cache_manager, ignore the return value of hierbox_browser
	and eliminate the @dlg_data variable.  

Thu Nov 20 02:49:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	Complete Jonas Fonseca's previous change: Generalize visibility
	setup.  

Thu Nov 20 02:14:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Update the option browser in add_opt_rec() _when_ the box item has
	been actually added.  

Thu Nov 20 01:14:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, bookmarks/dialogs.h, cache/cache.c,
	config/dialogs.c, config/dialogs.h, config/kbdbind.c,
	config/options.c, cookies/cookies.c, globhist/globhist.c:

	Use standard done_browser_box() function so hierbox browser dialogs
	are updated when deleting items.  

Wed Nov 19 23:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	A goto was nuked. Instead use switch breaking.  

Wed Nov 19 23:46:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	It seems the bookmarks are already marked dirty the relevant places.  

Wed Nov 19 23:44:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Decrease indentation level.  

Wed Nov 19 18:38:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	A weird line was disabled and heavily commented. Please help, this
	point needs to be clarified.  

Wed Nov 19 18:15:49 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, document/plain/renderer.c,
	viewer/dump/dump.c, viewer/text/search.c, viewer/text/view.c:

	struct line: @d -> @chars.  

Wed Nov 19 17:59:18 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.h, document/html/renderer.c,
	document/plain/renderer.c, viewer/dump/dump.c,
	viewer/text/search.c, viewer/text/view.c:

	struct line: @l -> @length.  

Wed Nov 19 17:22:10 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Indentations fixes.  

Wed Nov 19 16:49:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Make the default abort handler part of the event handler so the
	abort handler is usable for private dialog cleanup. Idea by Miciah.  

Wed Nov 19 08:58:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/plain/renderer.c:

	In add_document_lines, use memchr instead of strcspn to compute the
	width of the line. Now, the full line is displayed even if it
	contains the null character.  

Wed Nov 19 08:18:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Delete an ancient comment that was never even accurate (it
	originated in src/dialogs/globhist.c:1.3->1.4 and was incorrectly
	copied in src/document/globhist.c:1.20->1.21).  

Wed Nov 19 07:48:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	In hierbox_browser(), handle do_dialog() returning NULL.  

Wed Nov 19 07:44:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.h:

	Put back the #include "util/lists.h", which was dropped in
	src/bfu/hierbox.h:1.15->1.16 (the introduction of struct
	hierbox_browser).  

Wed Nov 19 05:15:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	In src/viewer/text/textarea.c, complete kuser's fix (1.30->1.31:
	"Set @y to 0.") for his earlier change (1.29->1.30: "Don't use gotos
	in a row.") to textarea_op_(up|down): He forgot to fix
	textarea_op_down, only fixing textarea_op_up.  

Wed Nov 19 02:29:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/: dialogs.c, globhist.c:

	No need to allocate the listbox item text + use init_browser_box().  

Wed Nov 19 02:09:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bookmarks/dialogs.c, cookies/dialogs.c,
	globhist/dialogs.c:

	Generalize visibility setup.  

Wed Nov 19 02:08:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Fix hotkey take 2.  

Wed Nov 19 01:55:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Cleanup.  

Wed Nov 19 01:45:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	cache/cache.c, cache/dialogs.c, cache/dialogs.h, config/dialogs.c,
	cookies/cookies.c, cookies/dialogs.c, cookies/dialogs.h,
	globhist/dialogs.c, globhist/dialogs.h, globhist/globhist.c:

	Generalize even more of the hierbox code by taking next step and
	introduce a hierbox_browser structure with the most important lists
	and the listbox operations.  

Wed Nov 19 01:39:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Make l the hotkey for kill background connection. #ifdef cookie
	manager although we probably can't build without cookies.  

Wed Nov 19 01:29:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Add missing #include.  

Wed Nov 19 00:02:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Added missing include.  

Wed Nov 19 00:02:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Enlarge @cur_len to strlen(entry->data) when matching yet the
	original string. Also always set @longest_common_match if it has
	been zero.  

Tue Nov 18 23:59:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Make the @match initialized to NULL.  

Tue Nov 18 23:53:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Simplify loop condition.  

Tue Nov 18 23:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Instead of staring at the tangled original code, let's just use
	common sense. This changes do_tab_compl_unambiguous() to make some
	sense :).  

Tue Nov 18 23:49:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Comment :-).  

Tue Nov 18 23:17:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/dialogs.c, globhist/dialogs.c:

	Yay more uncompiled code (untill pasky fixes his patches ;). Use
	hierbox_dialog_list_item.  

Tue Nov 18 23:08:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Finally fixed @width computation.  

Tue Nov 18 23:07:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Fixed @width computation in add_document_lines()'s loop.  

Tue Nov 18 23:05:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed missing include.  

Tue Nov 18 22:59:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Fixed missing include.  

Tue Nov 18 22:58:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Fixed missing trailing semicolon.  

Tue Nov 18 22:53:38 2003  Laurent Monin <zas@norz.org>:

	* po/cs.po:

	Compilation fix ;).  

Tue Nov 18 22:52:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	@longest_match_len -> @longest_common_match 

Tue Nov 18 22:46:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Simplify make_keystroke().  

Tue Nov 18 22:41:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Probably fixed XMP tag handling, broken by removing traces of the
	plaintext handling.  

Tue Nov 18 22:23:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: docdata.h, html/renderer.c, plain/renderer.c:

	Unified realloc_points().  

Tue Nov 18 22:19:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	realloc_document_links() is now just an ALIGN_LINK() frontend.  

Tue Nov 18 22:18:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/docdata.h:

	document/docdata.h requires document/document.h 

Tue Nov 18 22:18:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, docdata.c, docdata.h,
	html/renderer.c, plain/renderer.c:

	Unified realloc_lines() from document/*/renderer.c to
	document/docdata.c.  

Tue Nov 18 22:14:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, docdata.h, html/renderer.c,
	plain/renderer.c:

	Moved ALIGN_LINE, ALIGN_LINES and LIN*_GRANULARITY from
	document/*/renderer.c to document/docdata.h.  

Tue Nov 18 22:04:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	realloc_lines() now returns struct line * instead of int.  

Tue Nov 18 22:02:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	return NULL if_assert_failed inside of realloc_lines().  

Tue Nov 18 21:55:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Trivial whitespace cleanup.  

Tue Nov 18 21:52:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/session.c, viewer/text/view.c,
	viewer/text/view.h:

	draw_formatted() now takes a @rerender argument describing whether
	to rerender the documnet as well or not. This fixes a regression
	introduced by Jonas in the renderer multiplexing patch.  

Tue Nov 18 21:40:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.h, renderer.h, view.h:

	Removed useless includes, added missing includes and struct
	declarations.  

Tue Nov 18 21:35:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Set @y to 0. Lost this in a patch by me :( 

Tue Nov 18 20:54:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	viewer/text/view.c:

	Added cookie-manager action, by default bound to 'K'.  

Tue Nov 18 20:52:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Let 'k' be the Cookies hotkey in File menu.  

Tue Nov 18 20:44:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Another minor reindentation in get_srch().  

Tue Nov 18 20:43:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Minor reindentation in get_srch().  

Tue Nov 18 20:38:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 18 20:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Do not touch directly the cache entry content in
	add_document_line().  

Tue Nov 18 20:16:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Simplified (and fixed for NUL chars) the @width computation in
	add_document_lines().  

Tue Nov 18 20:07:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Fixed accidentally removed @convert_table declaration.  

Tue Nov 18 20:05:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Pass @length to add_document_lines(). This could fix displaying of
	\0 chars in the plaintext renderer.  

Tue Nov 18 20:03:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Each line is converted separately now. This makes the conversion to
	happen after substitution of dangerous chars like \0.  

Tue Nov 18 19:59:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/tables.c:

	Use @int_min.  

Tue Nov 18 19:57:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	For low values of @line_char, use '.' instead of ' '.  

Tue Nov 18 19:51:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/renderer.c:

	Trivial whitespace fix.  

Tue Nov 18 17:40:38 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Resynced .po and updated Italian translation.  

Tue Nov 18 17:23:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	NUL char will produce a parse errror and breaks some loops, wherever
	needed.  

Tue Nov 18 16:22:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Label end was renamed parse_error. Comments about unhandled cases
	were added.  

Tue Nov 18 16:05:20 2003  Laurent Monin <zas@norz.org>:

	* src/cache/dialogs.c:

	Minor tidy up of displayed info in Cache Manager 

Tue Nov 18 15:09:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Use @int_(min|max).  

Tue Nov 18 14:32:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Indentation fix.  

Tue Nov 18 13:29:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.h, cookies/dialogs.c:

	Introduce hierbox_dialog_list_item.  

Tue Nov 18 11:51:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/vs.c:

	Use @int_upper_bound.  

Tue Nov 18 11:40:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/view.c:

	Use @int_(bounds|lower_bound).  

Tue Nov 18 11:15:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Don't use gotos in a row.  

Tue Nov 18 11:07:44 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_upper_bound. Also fix last patch.  

Tue Nov 18 10:59:50 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_lower_bound.  

Tue Nov 18 10:55:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Reintroduced @longest_match_len description removed by Miciah.  

Tue Nov 18 10:55:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	@last -> @matchpos 

Tue Nov 18 10:54:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	last_match* -> match* 

Tue Nov 18 10:53:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	shortest_match_len -> longest_match_len 

Tue Nov 18 10:53:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	starting_len -> base_len 

Tue Nov 18 10:49:45 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Use @int_(lower|upper)_bound. @int_bounds could be used if
	@frm->(cols|rows) > 0 can be assumed.  

Tue Nov 18 10:48:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Last patch was fixed.  

Tue Nov 18 10:38:32 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/textarea.c:

	Reorder loop to make it more readable.  

Tue Nov 18 10:37:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_element() now treat NUL char as any other char, we rely on eof
	for exiting loops. We do not set *eof to NUL anymore, and just
	return -1 on parse error (as before but without goto stuff). Code
	was simplified a lot.  

Tue Nov 18 10:03:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), replace that awful while loop with a
	nicer for loop.  

Tue Nov 18 09:56:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), eliminate a useless check (I hope)
	and simplify the check for whether we hit the end of @last.  

Tue Nov 18 09:48:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Fix infinite loop when opening binary files.  

Tue Nov 18 09:44:54 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cache/dialogs.c:

	Finish previous commit: Introduce hierbox_browser_box_build(),
	replacing *_box_build().  

Tue Nov 18 09:25:39 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Tue Nov 18 09:21:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), initialise last_match to
	widget_data->cdata and s/!last_match/last_match ==
	widget_data->cdata/ to eliminate an ugly ternary expression in the
	loop.  

Tue Nov 18 09:12:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/inphist.c:

	In do_tab_compl_unambiguous(), rename cdata_len to starting_len,
	match_len to last_match_len, max to shortest_match_len, match to
	last_match, c to cur, m to last, and len to cur_len.  

Tue Nov 18 07:52:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	config/dialogs.c, cookies/dialogs.c, globhist/dialogs.c:

	Introduce hierbox_browser_box_build(), replacing *_box_build().  

Tue Nov 18 05:51:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h:

	Use reference counting macros for bookmarks and global history
	items.  

Tue Nov 18 05:44:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/bookmarks.c, globhist/globhist.c:

	Use mem_calloc to allocate bookmarks and global history items.  

Mon Nov 17 23:42:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Cookie hotkey conflict with OS shell.  

Mon Nov 17 22:59:18 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Mon Nov 17 22:44:40 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Nov 17 22:27:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Reinserted the removed semicolon (=> compilation fix).  

Mon Nov 17 22:22:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h, dialogs.c:

	Add save button.  

Mon Nov 17 22:17:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/form.c:

	Remove superfluous ';' ;) 

Mon Nov 17 22:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/dialogs.c:

	Fix dialog title spotted by pasky.  

Mon Nov 17 22:11:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: dialogs.c, dialogs.h:

	Add dialog file. Eh.  

Mon Nov 17 22:10:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/Makefile.am, cookies/cookies.c, cookies/cookies.h,
	dialogs/menu.c:

	Adding start of cookie manager based on cache manager code. Only
	info button is available. This means cookies need to be moved to
	cookies.h and have both refcount and box_item member.  

Mon Nov 17 22:10:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/link.c:

	Use int_(upper|lower)_bound.  

Mon Nov 17 21:48:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/link.c:

	Rename @width to @height. The old name didn't fit.  

Mon Nov 17 21:41:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Alphabetize includes.  

Mon Nov 17 21:40:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Compilation fix.  

Mon Nov 17 21:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Fixed invalid usage of get_cache_uri() in delete_cache_entry().  

Mon Nov 17 21:36:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	ACT_CACHE_MANAGER is now handled properly.  

Mon Nov 17 21:33:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Removed antique cache_entry_nolock() macro.  

Mon Nov 17 21:32:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Include util/error.h even if DEBUG_REFCOUNT for debug() call.  

Mon Nov 17 21:31:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Removed some strange suspicious include.  

Mon Nov 17 21:31:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	Whitespace trivial fix.  

Mon Nov 17 21:31:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/object.h:

	refcount_sanity_check() -> object_sanity_check() 

Mon Nov 17 18:47:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Remove now needless test.  

Mon Nov 17 18:45:20 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move test for preceding spaces before the loop.  

Mon Nov 17 18:43:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/object.h:

	Add object.h file. Doh.  

Mon Nov 17 18:40:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show the Flags field only if we can show something inside.  

Mon Nov 17 18:39:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Do not translate strings ETag and Refcount.  

Mon Nov 17 18:39:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, cache/dialogs.c,
	document/document.c, document/document.h, document/renderer.c,
	sched/connection.c, sched/download.c, sched/session.c,
	util/Makefile.am, viewer/text/link.c:

	Generalize object refcount debugging.  

Mon Nov 17 18:38:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Simplify a bit.  

Mon Nov 17 18:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added the 'Redirect' field.  

Mon Nov 17 18:34:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'ID tag' field to the debugmode area.  

Mon Nov 17 18:33:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Separate the header visibly.  

Mon Nov 17 18:33:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show the newline _before_ Flags, not after.  

Mon Nov 17 18:33:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show refcount-1 in the info dialog.  

Mon Nov 17 18:31:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'ETag' field.  

Mon Nov 17 18:29:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Moved 'Last modified' below sizes.  

Mon Nov 17 18:29:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Oops, properly initialize @msg in push_info_button().  

Mon Nov 17 18:28:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Show refcount and complete header in the debug mode.  

Mon Nov 17 18:25:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added Flags field, possibly getting 'incomplete' and/or 'invalid'
	values.  

Mon Nov 17 18:23:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Do not be so elaborate. It's clear.  

Mon Nov 17 18:22:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Last modified time -> Last modified 

Mon Nov 17 18:22:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	Added 'SSL Cipher' and 'Encoding' fields.  

Mon Nov 17 18:20:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	cache_entry.data_size contains the loaded size, so show length in
	the 'Size' field of the info msgbox instead and add another field
	'Loaded size'.  

Mon Nov 17 18:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/dialogs.c:

	The cache entry info message composing was changed to look more like
	loc_msg()'s. Show URI rewritten without the password and post data
	as a side-effect.  

Mon Nov 17 18:06:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Removed the default uppercase keybindings for various actions where
	we have already bound the same lowercase keybindings to it. Do not
	pretend case-insensitivity when we are case-sensitive anyway and
	there is not that much keys on the keyboard. We might need them all
	in the future ;p.  

Mon Nov 17 18:03:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c:

	Introduced cache-manager action, by default bound to 'C'.  

Mon Nov 17 18:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cache/: dialogs.c, dialogs.h:

	Fix #includes. *tsk* 

Mon Nov 17 18:00:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: info.c, menu.c:

	Removed now-obsolete Cache info dialog (cache_inf()).  

Mon Nov 17 17:58:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/Makefile.am, cache/cache.c, cache/cache.h,
	cache/dialogs.c, cache/dialogs.h, dialogs/menu.c:

	Introduced very simplistic and trivial cache manager.  

Mon Nov 17 17:23:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/dialogs.c:

	Includes in alphabetical order.  

Mon Nov 17 17:18:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Missing ELEMENT_* thing.  

Mon Nov 17 17:01:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, sched/session.c:

	Mark the led as used in register_led().  

Mon Nov 17 17:00:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Removed obsolete comment.  

Mon Nov 17 16:59:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, sched/session.c, sched/session.h:

	The first led is now a SSL indicator. It shows 'S' if the current
	document was received through a secure channel.  

Mon Nov 17 14:34:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Generalize usage of end_of_tag() macro.  

Mon Nov 17 14:27:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use macros in parse_element().  

Mon Nov 17 13:18:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	html_element.dontkill renamed to type using html_element_type enum.
	0 -> ELEMENT_KILLABLE, 1 -> ELEMENT_DONT_KILL, 2 ->
	ELEMENT_IMMORTAL.  

Mon Nov 17 12:21:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Desperately strive to avoid infinite loops in HTML parser.  

Mon Nov 17 11:11:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Compilation fix.  

Mon Nov 17 11:10:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Compilation fix. Do not include sched/session.h but instead just
	assert existence of struct session.  

Mon Nov 17 11:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Sync leds for each session.  

Mon Nov 17 11:06:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	T now by default opens link in new tab instead of opening new tab in
	background. This is probably more useful. Idea by Tony.  

Mon Nov 17 10:58:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Fixed missing trailing ;.  

Mon Nov 17 10:56:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, bfu/leds.h, sched/session.c, sched/session.h:

	Make the leds localized to a session.  

Mon Nov 17 10:47:23 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	0 | SUBMENU -> SUBMENU.  

Mon Nov 17 10:34:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/leds.c, bfu/leds.h, sched/session.c:

	draw_leds() now take struct session instead of struct terminal.  

Mon Nov 17 06:51:13 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Mon Nov 17 02:04:21 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/session.c, viewer/dump/dump.c, viewer/text/vs.c,
	viewer/text/vs.h:

	Add the @plain parameter to init_vs(). Now ses_forward() needn't
	save vs->plain and restore it after calling init_vs(), but need
	merely pass vs->plain to init_vs().  

Mon Nov 17 01:48:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Fix two logic inversions in download_data_part() introduced in
	src/sched/download.c:1.160->1.161.  

Mon Nov 17 00:37:45 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/frames.c:

	#include cache/cache.h in src/document/html/frames.c for struct
	cache_entry and find_in_cache().  

Mon Nov 17 00:33:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/frames.c:

	#include document/document.h in src/document/html/frames.c for
	document_has_frames().  

Sun Nov 16 23:20:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	In l_current_document(), return the integer 1, not a complex number:
	The latter is unnecessary and less portable. Seriously, fix a typo
	introduced in src/scripting/lua/core.c:1.127->1.128.  

Sun Nov 16 17:28:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Cleanup.  

Sun Nov 16 17:07:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	Cleanup.  

Sun Nov 16 15:46:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h, renderer.c:

	create_frameset(): Don't pass the @document but handle it locally.  

Sun Nov 16 15:25:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h, parser.c, renderer.c:

	Remove frame_param struct. I think we can manage to pass the 3
	members. Knock out create_frame() and just use add_frameset_entry()
	directly.  

Sun Nov 16 15:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.h:

	document_has_frames() already lives in document.h.  

Sun Nov 16 15:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.c, frames.h:

	No need to export format_frame().  

Sun Nov 16 14:34:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/inphist.c, bfu/listbox.h, bfu/menu.c,
	bfu/menu.h, dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, document/html/parser.c, viewer/text/link.c,
	viewer/text/view.c:

	In struct menu_item, enum item_free was replaced by more general
	enum menu_item_flags, fields item_free, submenu and no_intl are
	joined in one flags field. Related functions and macros were
	modified to reflect that change. FREE_NOTHING was replaced by a
	shorter 0, everywhere. MENU_FULLNAME special case (parser.c) is now
	handled as other flags.  

Sun Nov 16 13:01:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Fixed a logic error regarding the setting of o->plain depending on
	vs->plain. Now, o->plain is set if vs->plain is _NOT_ -1.  

Sun Nov 16 12:57:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, sched/download.c:

	Unreverted the witekfl's plain-in-frames patch. Please do not rush
	so much to revert patches :-).  

Sun Nov 16 12:34:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reverting my last patch, as the goto is needed :( 

Sun Nov 16 12:11:22 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Comment the hackish goto, scheduling it for removal :) 

Sun Nov 16 11:41:53 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, sched/download.c:

	Patch from Witek was reverted for now. It breaks rendering of html
	documents in frames.  

Sun Nov 16 06:48:22 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/html/frames.c, sched/download.c:

	Rendering of plain documents in existing frames is good now.  

Sun Nov 16 06:28:59 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/sched/: session.c, session.h:

	ses_forward now returns view_state *. vs->plain is preserved, 
	because is used by renderer.  

Sun Nov 16 06:25:12 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: document/refresh.c, sched/download.c, sched/session.c,
	sched/session.h:

	Introduction of struct tq.  

Sun Nov 16 03:19:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/document.c,
	document/document.c, document/renderer.c, document/html/frames.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/session.c, scripting/lua/core.c:

	Make find_in_cache() and get_cache_entry() actually return the
	cache_entry.  

Sun Nov 16 01:23:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Only display known protocol URIs.  

Sun Nov 16 01:11:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Cleanup allocation code.  

Sun Nov 16 01:03:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Making some bit field hacks more explicit.  

Sun Nov 16 01:02:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	set_cookie(): No need for @term variable or to return anything.  

Sun Nov 16 00:19:13 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Useless debugging code was removed. It is legal for getml() to be
	called with NULL as first parameter, so no need to check for that.  

Sun Nov 16 00:14:36 2003  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, config/cmdline.c, config/conf.c,
	cookies/cookies.c, dialogs/mime.c, globhist/globhist.c,
	mime/dialogs.c, sched/download.c:

	empty_string_or_() macro was introduced.  

Sat Nov 15 23:44:17 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	getml() will do nothing if first argument is NULL, so this test is
	useless.  

Sat Nov 15 23:36:04 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Sat Nov 15 23:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/sched/error.c:

	A typo was fixed. Revealed without any will by Tony
	<falcon611@yahoo.com> on ml.  

Sat Nov 15 22:33:02 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/cookies/cookies.c:

	In accept_cookie_dialog(), don't pad or terminate the string created
	by strftime(): The padding is useless, and we only use the string as
	an argument to memacpy(), which terminates its result. This also
	fixes a bug: Previously, when strftime() returned 0, signalling an
	error, we would pad the empty string, memacpy() it, and assign the
	copy to @expires, instead of leaving @expires to NULL to indicate
	that we should print "unknown" as the expiration date.  

Sat Nov 15 20:40:42 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Restore original behaviour.  

Sat Nov 15 20:38:54 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reorder @find_next_link_in_search in a clean way.  

Sat Nov 15 20:21:34 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename @xp,@yp,@xx,@yy to @xmin,@ymin,@xmax,@ymax.  

Sat Nov 15 20:11:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename @xpv and @ypv to @xoffset and @yoffset.  

Sat Nov 15 20:05:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Reindentation.  

Sat Nov 15 19:53:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Rename s1v to search_start.  

Sat Nov 15 19:05:21 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Build fix.  

Sat Nov 15 19:01:16 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Search only on visible data. Should fix bug 250.  

Sat Nov 15 18:51:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move regcomp to the start, so we save needless allocation in case
	regcomp fails.  

Sat Nov 15 18:44:37 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.inc, viewer/text/search.c:

	Remove overlapping regex searches, assuming nobody uses this ;) 

Sat Nov 15 18:29:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	do_html_select(): @lbls -> @labels, @mw -> @max_width, @la ->
	@label, simplify max_width calculation.  

Sat Nov 15 18:15:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	add_select_item() is now a function.  

Sat Nov 15 17:43:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Format the expire time with code from protocol/file.*.  

Sat Nov 15 17:25:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	new_menu_item(): @nmenu -> @new_menu_item, test name before
	menu->stack_size.  

Sat Nov 15 17:20:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	new_menu_item(): variables declarations moved to inner block, old
	commented code was removed, tidy up.  

Sat Nov 15 17:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Add support for asking user whether to accept or reject cookies.  

Sat Nov 15 17:10:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre10.CVS 

Sat Nov 15 17:07:07 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre10 

Sat Nov 15 17:05:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation was updated.  

Sat Nov 15 17:02:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Reverted the ask cookie policy implementation. It comes in feature
	freeze.  

Sat Nov 15 16:55:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Add support for ask cookie policy.  

Sat Nov 15 16:53:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/parser.c:

	In clr_spaces(), remove an extra check: *nm is already checked as
	the loop condition.  

Sat Nov 15 16:39:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: document.c, document.h:

	is_document_locked() -> is_document_used() 

Sat Nov 15 16:38:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	Grammar fix: it's -> its. Who needs to take more English classes? :) 

Sat Nov 15 16:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	Include util/error.h (if needed), providing the assert() used in the
	macros.  

Sat Nov 15 16:36:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	get_document_locks() -> get_document_refcount() 

Sat Nov 15 16:36:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.h:

	document.locks -> document.refcount 

Sat Nov 15 16:35:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	Try to repair @refcount/@locks in the case of underflow.  

Sat Nov 15 16:31:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.h:

	*_sanity_check() now does something only if DEBUG.  

Sat Nov 15 16:29:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Finish locks -> refcount.  

Sat Nov 15 16:25:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, cache/cache.h, sched/connection.c:

	is_cache_entry_locked() -> is_cache_entry_used() 

Sat Nov 15 16:23:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	get_cache_entry_locks() -> get_cache_entry_refcount() 

Sat Nov 15 16:18:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	cache_entry.locks -> cache_entry.refcount 

Sat Nov 15 16:06:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Reinserted deleted blank line. Please do not remove blank lines
	unless you are sure what are you doing ;-).  

Sat Nov 15 15:47:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, sched/connection.c,
	viewer/dump/dump.c:

	Add valid field to cache_entries to avoid nasty uri hack.  

Sat Nov 15 15:38:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, document/html/renderer.c,
	sched/connection.c, sched/download.c, sched/session.c,
	viewer/dump/dump.c:

	Encapsulate uri string access.  

Sat Nov 15 15:20:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Always prefer to output color names.  

Sat Nov 15 15:06:57 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre9.CVS 

Sat Nov 15 15:03:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre9 

Sat Nov 15 15:03:06 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	No ELusive.  

Sat Nov 15 15:01:21 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Nov 15 14:53:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Always prefer to have color names. Feature will be added after pre9.  

Sat Nov 15 14:48:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	unparse_uri(&conn->cache->uri) before we clear it, so that the uri
	structure doesn't contain dangling pointers pointing to some strange
	places.  

Sat Nov 15 14:43:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	Introduced unparse_uri().  

Sat Nov 15 14:15:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	struct list_menu was introduced. It will help to generalize list
	menu functions.  

Sat Nov 15 14:11:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync elinks.conf.5. Contains rearrangements from moving options to
	modules.  

Sat Nov 15 14:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Make the assert() completentary to color_mode switch in
	set_term_color().  

Sat Nov 15 14:00:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	It seems testing against char 1 is useless. So related code was
	removed. Minor simplification in clr_spaces().  

Sat Nov 15 06:37:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Sat Nov 15 00:19:55 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	src/sched/session.c:1.229->1.230 introduced a very stupid bug. It
	should be fixed now. Reported by Miciah.  

Fri Nov 14 22:55:01 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Fix --disable-root.  

Fri Nov 14 21:21:18 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	ELinks can be ran as root by default.  

Fri Nov 14 20:50:41 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/main.c:

	A configure option named enable-root was added. By default, ELinks
	will refuse to be executed by user root, this option overrides this
	safe limitation.  

Fri Nov 14 19:42:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.h:

	Fix typo.  

Fri Nov 14 19:22:22 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Compilation fix (debug code): oops, disable debug.  

Fri Nov 14 19:21:59 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Compilation fix (debug code).  

Fri Nov 14 18:30:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, cache/cache.h, dialogs/info.c,
	document/html/renderer.c, sched/connection.c, sched/download.c,
	sched/session.c, viewer/dump/dump.c:

	Add struct uri member to struct cache_entry.  

Fri Nov 14 16:54:10 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Debugging code was added to get_content_type().  

Fri Nov 14 15:55:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Properly free cell fragment ids. Reported by Zas.  

Fri Nov 14 15:35:28 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Trailing spaces fix.  

Fri Nov 14 15:30:09 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt, src/document/document.h:

	A notice was moved to hacking.txt.  

Fri Nov 14 15:03:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Proper support for table fragment ids. The previous one was
	completely bogus.  

Fri Nov 14 15:03:06 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Accept [] in url, needed to recognise IPv6 urls.  

Fri Nov 14 15:00:27 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	An assertion was reintroduced, it checks again negative value of
	color_mode.  

Fri Nov 14 14:38:01 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Add comments on lines where post data may be copied again in memory.
	Since post data may be large we should avoid this. Please add
	comments to lines where you think it may the case.  

Fri Nov 14 14:24:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	No space in URIs.  

Fri Nov 14 13:59:39 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.inc:

	Disable document.plain.display_links by default.  

Fri Nov 14 13:53:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/plain/renderer.c:

	Url in plain text file detection was improved.  

Fri Nov 14 13:44:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup.  

Fri Nov 14 13:27:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Cleanup to fit line within 80 chars. No need to - 1 on the returned
	link length.  

Fri Nov 14 13:19:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Split up add_document_link() to improve error handling. Idea by
	Miciah.  

Fri Nov 14 12:49:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Check @was_xmp rather then ei->func. Idea by Miciah. Fixes last xmp
	/ plain cleanup patch.  

Fri Nov 14 12:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c:

	Revert change to parse_uri() to require host or data part.  

Fri Nov 14 12:39:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Useless get_no_post_url_length_() was removed.  

Fri Nov 14 12:38:08 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, sched/session.c, viewer/dump/dump.c:

	Use *post* functions wherever possible. post_data_start() was
	simplified (am i so dumb ?).  

Fri Nov 14 12:29:23 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, protocol/uri.h, sched/download.c:

	post_data_start() was introduced.  

Fri Nov 14 12:04:56 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	add_url_to_http_string() is now using get_no_post_url(), number of
	parameters was reduce by one.  

Fri Nov 14 12:00:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Compilation fix.  

Fri Nov 14 11:51:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use get_no_post_url_length() instead of using POST_CHAR directly.  

Fri Nov 14 11:47:00 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/info.c, protocol/uri.c, protocol/uri.h:

	get_post_start() was replaced by get_no_post_url_length(), which is
	simpler. A bug introduced by get_post_start() patch was fixed in
	get_no_post_url().  

Fri Nov 14 11:38:15 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Use get_post_start() in cache_inf().  

Fri Nov 14 11:31:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	get_post_start() was introduced and get_no_post_url() was modified
	to use it. It will help to reduce occurences of POST_CHAR in various
	source files.  

Fri Nov 14 11:21:41 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Old staled code was removed.  

Fri Nov 14 11:15:46 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Use get_no_post_url() in extract_proxy(). Miciah, please review this
	one carefully, thanks ;).  

Fri Nov 14 09:26:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Nov 14 09:18:30 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	Some cases where moved at end of switch, idea by Pasky.  

Fri Nov 14 08:40:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Add the @attr parameter to set_fragment_identifier(), and use
	set_fragment_identifier() in html_a().  

Fri Nov 14 08:28:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Rename set_id_attribute() to set_fragment_identifier() and its @attr
	parameter to @attr_name.  

Fri Nov 14 06:16:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Nov 14 03:39:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move illicit chars.  

Fri Nov 14 03:27:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Stop when finding illicit URI chars.  

Fri Nov 14 03:17:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Even trim " so href="<uri>" also work better.  

Fri Nov 14 03:12:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Improve error handling. Fix possible leaks.  

Fri Nov 14 03:04:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Add support for mailto URIs. Only allocate link->where.  

Fri Nov 14 02:49:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move URI parsing to add_document_link().  

Fri Nov 14 02:31:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Another compilation fix for that patch.  

Fri Nov 14 02:29:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move uri end finding to separate function.  

Fri Nov 14 02:28:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Compilation fix for my last patch.  

Fri Nov 14 02:20:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix indentation and only jump with accepted URIs.  

Fri Nov 14 02:15:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/plain/renderer.c, protocol/uri.c:

	Require valid URIs to have something after the <scheme>':'.  

Fri Nov 14 02:07:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Be more aggressive when looking for URIs. Trim ending ')', '>', ','
	and '.'.  

Fri Nov 14 02:06:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/document.c, dialogs/info.c, sched/session.c,
	scripting/lua/core.c:

	Fix some calls to msg_box() to localise when appropriate and _only_
	when appropriate.  

Fri Nov 14 01:35:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, document/options.c, document/options.h,
	document/plain/renderer.c:

	Add support for displaying links in plain pages. Not perfect yet.  

Fri Nov 14 00:25:30 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Resolve a minor compilation error (unused variable) that occurs when
	OpenSSL is not used.  

Thu Nov 13 23:40:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c:

	sort_links() in render_document().  

Thu Nov 13 22:56:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/refresh.c:

	Describe why we call goto_url_frame().  

Thu Nov 13 22:44:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Trailing newline removed.  

Thu Nov 13 22:44:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Always comment ``dead'' code.  

Thu Nov 13 22:43:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny ses_chktype() reindentation.  

Thu Nov 13 22:42:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny kill_downloads_to_file() reindentation.  

Thu Nov 13 22:41:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tiny destroy_downloads() reindentation.  

Thu Nov 13 22:40:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Outcomment proposed fix for bug 60.  

Thu Nov 13 22:39:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	write_cache_entry_to_file() foreach() loop body reindentation.  

Thu Nov 13 22:38:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	download_data_store()'s state != S_OK case reindentation.  

Thu Nov 13 22:35:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reduced download_data_store() indentation levels even more
	drastically.  

Thu Nov 13 22:33:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Reindented download_data_store().  

Thu Nov 13 22:31:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	download_data()'s end_store label -> store 

Thu Nov 13 21:42:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, sched/download.c, sched/history.c,
	sched/session.c, sched/session.h:

	Reverted the changes introduced in a "fix" for bug 12 by witekfl.
	They need to be reintroduced with some clear description of what
	each of them do and especially why does it do it.  

Thu Nov 13 21:39:53 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Nov 13 21:02:14 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Nov 13 20:32:46 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Nov 13 18:44:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, dialogs/menu.c, dialogs/menu.h,
	terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	Option to ask for confirmation when closing a tab (by default off).
	Fixes bug 43. Ask to quit when closing last tab. Fixes bug 44.  

Thu Nov 13 18:18:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	Handle id attributes for table tags. Fixes bug 39.  

Thu Nov 13 17:56:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Add plain / html toggle button to Info -> Keys. Requested by Miciah.  

Thu Nov 13 17:56:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Add escape variable to make_keystroke() so keystroke string for
	dialogs is more correct.  

Thu Nov 13 17:43:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Merge write_key() into make_keystroke() .. less dirty ;) 

Thu Nov 13 17:22:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add points to links when justifying text. Fixes bug 60.  

Thu Nov 13 14:50:40 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were updated and french translation was updated.  

Thu Nov 13 14:28:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Show the url as title for plain text document. Doh.  

Thu Nov 13 14:25:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove traces of plain text renderer in the html renderer.  

Thu Nov 13 14:23:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove traces of plain text parser in the html parser.  

Thu Nov 13 13:17:27 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/protocol.c, protocol/protocol.h, protocol/uri.c,
	sched/session.c, viewer/dump/dump.c:

	PROTOCOL_INVALID was added to enum protocol, it is used to handle
	unknown protocols in a clever way. This should fix bug 245.  

Thu Nov 13 10:01:46 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Nov 13 09:24:41 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	My entry was completed a bit ;) 

Thu Nov 13 09:20:16 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Simon Wilkinson was added to AUTHORS, as author of X509 client
	certificates support.  

Thu Nov 13 09:17:23 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/: connect.c, ssl.c:

	Support for X509 client certificates. Patch by Simon Wilkinson. Tidy
	up by me.  

Thu Nov 13 01:46:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	In add_keyactions_to_string(), use add_char_to_string() instead of
	add_bytes_to_string() to add the newline.  

Wed Nov 12 23:32:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Removed redundant comment.  

Wed Nov 12 23:15:20 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mailcap.c:

	Tidy up.  

Wed Nov 12 21:17:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Nov 12 17:35:39 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Nov 12 17:28:27 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Wed Nov 12 16:52:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/info.c:

	Make Info -> Keys show the current keybindings. Fixes bug 25.  

Wed Nov 12 15:52:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	get_protocol_end() was introduced, it returns a pointer to end of
	protocol scheme.  

Wed Nov 12 15:52:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Only set hX align if no alignment is set. Fixes bug 9.  

Wed Nov 12 15:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Fix potential leak and improve error handling.  

Wed Nov 12 13:18:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Fix tab expansion by maintaining the number of expanded chars.  

Wed Nov 12 09:53:05 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c:

	A debug compile-time option was added to http auth code.  

Wed Nov 12 09:19:25 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, terminal/screen.c:

	Trailing spaces fix.  

Wed Nov 12 09:17:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	An assertion failure introduced by Miciah was fixed. Miciah please
	review that change ;) 

Wed Nov 12 08:42:35 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	In the Info box (opened by '=' or View->Document info), display any
	available information from global history about the selected link.
	This fixes bug 118.  

Wed Nov 12 07:46:12 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/renderer.c:

	In process_link(), if link_state is LINK_STATE_SAME, catenate the
	new text to the old link's name. This fixes bug 92.  

Wed Nov 12 06:03:16 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/: sched/download.c, sched/history.c, sched/session.c,
	sched/session.h, document/html/frames.c:

	Partial fix for bug 12. Rendering of plaintext documents in existing
	frames is good now. The rest of the fix be later, but in this year.  
	I don't like wait too long for the response! 

Wed Nov 12 05:17:40 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Nov 12 01:44:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	Remove a stray semicolon.  

Wed Nov 12 01:42:51 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/protocol.c:

	Fix logic errors in revision 1.24 of src/protocol/protocol.c that
	prevented the revision from making any effective difference.  

Wed Nov 12 01:29:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/refresh.c, sched/session.c:

	Pass int options to signal whether to set referrer or not. No
	referrer for goto_url() (goto dialog, globhist, bookmarks) calls.
	Had to change document refresh to use goto_url_frame() so the
	referrer gets set.  

Wed Nov 12 01:15:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename: *goto_url_w() to *follow_url().  

Wed Nov 12 01:07:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Revert last bogus patch.  

Wed Nov 12 00:52:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Don't set any referrer when the url comes from the goto dialog. Idea
	by Dmitry Pinchukov <dpinch@zen.com.ua>.  

Wed Nov 12 00:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Don't set the referrer for local files. Idea by Dmitry Pinchukov
	<dpinch@zen.com.ua>.  

Wed Nov 12 00:38:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	In doc_end_load(), add to global history the document that was just
	loaded, not the currently displayed document--an important
	distinction with frames. Fixes bug 48.  

Wed Nov 12 00:33:30 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Add comment from Miciah about enum cache ordering and a related
	TODO.  

Wed Nov 12 00:29:45 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Useless stuff was removed.  

Wed Nov 12 00:21:04 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, session.h:

	Field reloadlevel of struct session has now enum cache_mode type. An
	upper bound (CACHE_MODE_NEVER) is now enforced for reloadlevel in
	reload().  

Wed Nov 12 00:16:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	set_referrer(): Introduce to wrap access to session->ref_url. It
	will ease avoiding setting referrer for certain protocols.  

Wed Nov 12 00:10:33 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, dialogs/auth.c, dialogs/menu.c,
	protocol/auth/dialogs.c, sched/session.c, viewer/text/view.c:

	CACHE_MODE_INCREMENT was added to struct cache_mode. -1 occurences
	were replaced by it.  

Tue Nov 11 23:44:30 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/protocol.c:

	gett_protocol_external_handler() was modified to be able to
	differentiate case where no protocol scheme is found from case where
	no known protocol is found. End of scheme protocol detection is now
	stricter, but related code should be moved elsewhere. We will need
	that later to prevent bug 245.  

Tue Nov 11 22:32:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, protocol/http/http.c, sched/connection.c:

	Reverted the last zas' patch. Exact matches exclusively are
	hindering readability, efficiency and ease of changing of the enum
	cache_mode content.  

Tue Nov 11 22:26:04 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/color.c:

	Trigger an internal() error immediately when the invalid mode
	COLOR_MODES is given to set_term_color().  

Tue Nov 11 22:03:11 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, protocol/http/http.c, sched/connection.c:

	Got rid of CACHE_MODE_CHECK_IF_MODIFIED, and make only exact matches
	against enum type.  

Tue Nov 11 21:57:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, sched/connection.c, sched/download.c,
	sched/history.c, sched/session.c:

	CACHE_MODE_DEFAULT -> CACHE_MODE_NORMAL 

Tue Nov 11 21:47:50 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, sched/download.c, sched/history.c,
	sched/session.c:

	enum cache_mode NC_* -> CACHE_MODE_*.  

Tue Nov 11 21:43:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Describe enum cache_mode a little.  

Tue Nov 11 21:25:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Update document width so horizontal scrolling is usable.  

Tue Nov 11 21:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Ok so my lousy plain text renderer did not handle tabs. But now it
	does. Reported by pasky.  

Tue Nov 11 21:00:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain/renderer.c:

	Move plain line adding to separate function.  

Tue Nov 11 20:25:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov 11 20:23:11 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Nov 11 20:15:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Nov 11 20:11:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	document.browse.refresh is now by default enabled.  

Tue Nov 11 19:08:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Fix terminal option dialog.  

Tue Nov 11 17:50:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Kill document refresh in release_document(), so detach_formatted()
	will ensure consistency that ses->doc_view->document->refresh is the
	active refresh. Fixes bug 278.  

Tue Nov 11 17:26:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Removed the comparing of old and new cache size - do not set @whole
	if user changed the cache limit, we have no reason to flush the
	cache. Also removed the raising of cache size limit to the minimal
	possible cache size at the given time. Basically, we want to shrink
	on when some of the cache entries now used will be unused, and it's
	rather confusing behaviour for the user. See mailing list for more
	reasons.  

Tue Nov 11 15:48:12 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Let compiler warn about untested enum elements in switch(). More
	error messages for secsave errors.  

Tue Nov 11 15:35:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hierbox.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:31:41 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/select.c, bfu/listbox.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:29:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Let compiler warn about untested enum elements in switch(). Handle
	FC_RESET as FC_SUBMIT in get_succesful_controls(), please check if
	correct.  

Tue Nov 11 15:25:06 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Let compiler warn about untested enum elements in switch().  

Tue Nov 11 15:20:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.c:

	Let compiler warn about untested enum elements in switch().
	Inclusion of headers was moved to top of file with others.  

Tue Nov 11 15:12:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:08:16 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:05:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 15:00:40 2003  Laurent Monin <zas@norz.org>:

	* src/sched/connection.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:52:20 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:43:20 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.c, form.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:39:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: color.c, screen.c:

	Let compiler warns about untested enum elements in switch().  

Tue Nov 11 14:26:18 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Let compiler emits a warning for unhandled case instead of using
	runtime assertion. Previous issue should have been detected sooner.  

Tue Nov 11 14:17:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	ui.colors.color.tabs.separator.text default value was changed from
	red to brown after thorough usability and visibility tests and is
	actually likely to stay so for some time now ;-).  

Tue Nov 11 14:16:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	An assertion failure triggered by http://bd.ji.cz/ was fixed.
	WIDGET_FIELD_PASS was forgotten as a possible case.  

Tue Nov 11 13:45:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Only force redrawing when something changed.  

Tue Nov 11 13:38:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	No need for termopt_hop. Allocate checkbox values with the dialogs.  

Tue Nov 11 13:32:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Cleanup and simplify button handlers.  

Tue Nov 11 13:19:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make terminal option dialog more data driven.  

Tue Nov 11 12:42:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/stub.c, osdep/stub.h, util/stub.c, util/stub.h:

	A few compile fixes for FreeBSD.  

Tue Nov 11 09:13:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Fix a bug introduced two frinking weeks ago in
	src/scripting/lua/core.c revision 1.100: Text fields are not
	initialised in xdialogs.  

Tue Nov 11 06:28:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	Fix '[' to properly ignore hidden box_items when computing the
	offset to pass to box_sel_move; now it will not jump past the folder
	to which it should be jumping.  

Tue Nov 11 00:11:34 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Mon Nov 10 23:36:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Fix an issue revealed by linux /proc exploration with ELinks,
	concerning rendering of unreadable fs links.  

Mon Nov 10 22:57:48 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hierbox.c:

	Fix bug introduced in src/bfu/hierbox.c revision 1.54: '[' (or '-'
	or '_') no longer jumps to the parent folder when a leaf is
	selected.  

Mon Nov 10 22:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/main.c:

	@u -> @url.  

Mon Nov 10 22:36:11 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Nov 10 22:31:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/dialog.c:

	Eliminate superfluous assertions.  

Mon Nov 10 21:29:57 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/download.c:

	Fix a crash by restoring the old behaviour.  

Mon Nov 10 21:29:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/document/Makefile.am, src/document/renderer.c,
	src/document/plain/Makefile.am, src/document/plain/renderer.c,
	src/document/plain/renderer.h:

	Readd plain text renderer. Fixes some bug.  

Mon Nov 10 21:27:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: renderer.c, html/renderer.c:

	Generalize cache defragmentation.  

Mon Nov 10 20:53:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/Makefile.am,
	document/renderer.c, document/renderer.h, document/html/frames.c,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/text/view.c:

	Move the document rendering multiplexing to document/.
	cached_format_html() -> render_document(), html_interpret() ->
	render_document_frames(). We call render_document_frames() from
	draw_formatted() now since they seem to go together.  

Mon Nov 10 20:45:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Use by default red for the tabs separator, instead of green. Green
	is already used for highlighting the current tab, so red will stand
	out more, I think. It is also more visible on white.  

Mon Nov 10 20:35:32 2003  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh, configure.in, ltmain.sh, src/.cvsignore,
	src/Makefile.am, src/scripting/guile/.cvsignore,
	src/scripting/guile/Makefile.am, src/scripting/lua/.cvsignore,
	src/scripting/lua/Makefile.am:

	Blast off the libtool for good. We aren't going to have DSO modules
	anytime soon anyway, and this will make the world suddenly again so
	much brighter place.  

Mon Nov 10 20:19:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/: .cvsignore, .vimrc:

	Jonas: when copying fairies, take big care about their contents or
	just copy them over from some suitably ordinary directory at the
	same level in the directory hiearchy (that is, not from the parent
	directory).  

Mon Nov 10 17:06:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Fix testing of whether we are dealing with a radio button.  

Mon Nov 10 16:49:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/session.c:

	Include fix for bug 270 from links-0.99pre13 

Mon Nov 10 15:45:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/plain/: .cvsignore, .vimrc:

	Fairies.  

Mon Nov 10 15:35:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Return -1 that is not a valid group id. We can now enjoy space
	before the buttons in the terminal option dialog again.  

Mon Nov 10 15:13:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Nov 10 15:08:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/widget.h,
	viewer/text/search.c:

	Introduce float_group dialog layout option and blast the search
	dialog layouter.  

Mon Nov 10 14:12:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Maximize dialog width (to honour the hack).  

Mon Nov 10 09:42:35 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Mon Nov 10 00:51:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/widget.h, config/dialogs.c:

	Funky stuff to be able to float input field labels so we can use
	generic layouter for option edit dialogs.  

Mon Nov 10 00:32:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, bfu/text.c, bfu/text.h, bfu/widget.h,
	dialogs/auth.c, dialogs/options.c, protocol/auth/dialogs.c:

	Text widget can now be marked as being labels which means they do
	not put space afterwards. This is used to add labels to checkbox
	groups in the terminal option dialog.  

Mon Nov 10 00:15:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/dialog.c,
	dialogs/options.c:

	Add checkbox formatting to the generic dialog layouter and use it
	for the terminal option dialog. Features a nice little treat to
	visually group checkboxes in same group.  

Sun Nov  9 23:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/checkbox.c:

	dlg_format_checkbox(): Make more generic.  

Sun Nov  9 23:54:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Remove very hackish lua dialog layouters and use the generic one.
	Now if someone objects we can always add dlg->layout.force_50 ;) 

Sun Nov  9 23:43:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	download_data(): Minor simplification.  

Sun Nov  9 23:16:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Comments were added.  

Sun Nov  9 23:02:56 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Populate with get_no_post_url().  

Sun Nov  9 22:56:19 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c:

	Populate with get_no_post_url().  

Sun Nov  9 22:50:56 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Make use of get_no_post_url(), and reflects change in parameters
	list.  

Sun Nov  9 22:50:07 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	get_no_post_url() has a new int * parameter which may be set to
	length of the returned url.  

Sun Nov  9 22:41:51 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Make use of get_no_post_url(), and cleanup.  

Sun Nov  9 22:40:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: uri.c, uri.h:

	A function returning an allocated string from an url, without post
	data was introduced. Its name may not be well choosen, please
	propose good name.  

Sun Nov  9 22:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Part of download_data() was moved to download_data_store().  

Sun Nov  9 15:35:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Do not print POST part of the url in cache info.  

Sun Nov  9 15:24:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.h:

	There is no input_field_layouter().  

Sun Nov  9 15:22:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.h:

	Try to actually make dialog_layout.padding_top description
	comprehensible :).  

Sun Nov  9 15:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h:

	Remove nopad_widgets layout member. We always add horizontal space
	between widgets.  

Sun Nov  9 15:16:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Use text widget and the generic dialog layouter.  

Sun Nov  9 15:09:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, dialog.h, inpfield.c:

	Add fit_datalen layout member and use it for input_field() dialog
	layouting.  

Sun Nov  9 15:07:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, text.c, text.h:

	layout_text_widget() -> dlg_format_text(). Now text widget's format
	function is named as all nice widget format functions would always
	like to be.  

Sun Nov  9 15:05:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/text.c, bfu/text.h,
	config/dialogs.c, dialogs/auth.c, protocol/auth/dialogs.c,
	sched/download.c:

	dlg_format_text() -> dlg_format_text_do() 

Sun Nov  9 15:01:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	layout_widgets() -> format_widgets() 

Sun Nov  9 14:55:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/hierbox.c, bfu/msgbox.c,
	dialogs/edit.c, dialogs/mime.c, mime/dialogs.c, sched/download.c:

	Replace dlg->align with a dialog_layout bit array.  

Sun Nov  9 14:30:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c:

	Handle text widgets in the generic dialog layouter and make
	msg_box() use it. Note a small regression in that we do not pad the
	top of the text box. Will be fixed with layout bitarray.  

Sun Nov  9 14:24:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Use the text widget.  

Sun Nov  9 14:24:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/widget.h:

	Oops forgot to add text widget info update.  

Sun Nov  9 14:23:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: text.c, text.h:

	Provide text widget layouter. Add align member to text widget info.  

Sun Nov  9 14:09:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.h, msgbox.h:

	Fix typo.  

Sun Nov  9 14:02:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Compilation fix. Blablabla ;).  

Sun Nov  9 14:02:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Attempt to clarify layout_widget()'s WIDGET_BUTTON case description.  

Sun Nov  9 14:01:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Fix grammar .. describe the default close button.  

Sun Nov  9 13:53:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.h:

	Describe hierbox_browser().  

Sun Nov  9 13:44:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Trivial style fix.  

Sun Nov  9 13:44:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/options.c,
	protocol/auth/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Show me anyone who wouldn't want his dialog to be centered at the
	screen. He'd be pretty weird, I think. draw_dialog()'s @align
	parameter dropped, and AL_CENTER alignment made implicit.  

Sun Nov  9 13:40:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Newlines fix.  

Sun Nov  9 13:33:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: hierbox.c, listbox.c:

	When dealing with listbox_item.expanded, first check whether it is
	BI_FOLDER. This means some minor optimizations and fix of potential
	strangeness when clicking with mouse at bad places in the listbox.  

Sun Nov  9 13:31:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Whitespace tidyup.  

Sun Nov  9 13:28:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	If selected hierbox item is not a folder, pass the space keypress
	event on. So it behaves like enter and triggers the button. This
	reinforces the Miciah's muscle reflex in globhist dialog ;-).  

Sun Nov  9 13:23:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Describe a bit what is going on in hierbox_dialog_event_handler().  

Sun Nov  9 13:10:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	We rely on the fact of listbox being at particular position in the
	widget list that it's in fact confusing to say that explicitly at
	one place ;-). (And it's not last anymore anyway.) 

Sun Nov  9 13:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hierbox.c:

	Minor reindentation and tidyup.  

Sun Nov  9 13:04:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Limit dialog data x,y,width and height values. It prevents some
	assertion failures.  

Sun Nov  9 12:27:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Prevent an assertion failure and other bad things when width of
	terminal is very low.  

Sun Nov  9 11:40:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, hierbox.c, listbox.c, listbox.h:

	Use generic layouter for hiebox browsers. This requires to pass down
	the terminal height which might be usefull for other things later.  

Sun Nov  9 11:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Use generic dialog layouter.  

Sun Nov  9 11:22:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/edit.c, bfu/dialog.c, bfu/dialog.h:

	Make the edit layouter the generic dialog layouter.  

Sun Nov  9 11:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Move widget layouting to separate function. We now use not AL_NONE
	to figure out when to trim width.  

Sun Nov  9 03:55:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Cleanup and make the layouter generic to update width if dlg->align
	is AL_BLOCK.  

Sun Nov  9 03:39:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hierbox.c:

	Cleanup.  

Sun Nov  9 03:30:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: hierbox.c, hierbox.h:

	Make hierbox layouter and event handler static.  

Sun Nov  9 03:27:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Use hierbox_browser().  

Sun Nov  9 03:17:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, globhist/dialogs.c:

	Cleanup after the hierbox browser in the event handler and reserve
	the abort handler for browser specific cleanups.  

Sun Nov  9 03:13:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, text.c, text.h, widget.h:

	Add support for text widgets. Not used yet but it will make a
	generic layouter much more useful.  

Sun Nov  9 03:12:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Use generic hierbox event handler. It does the same and more useless
	stuff but what the hay ...  

Sun Nov  9 02:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Fix inf. loop prevention when cycling widgets.  

Sun Nov  9 00:19:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/Makefile.am, bfu/hierbox.c, bfu/hierbox.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/Makefile.am,
	dialogs/hierbox.c, dialogs/hierbox.h, globhist/dialogs.c:

	Move hierbox.* from dialogs/ to bfu/.  

Sun Nov  9 00:11:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bookmarks/dialogs.c:

	Use hierbox_browser().  

Sat Nov  8 23:46:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/dialogs.c, bfu/hierbox.c, bfu/hierbox.h,
	dialogs/hierbox.c, dialogs/hierbox.h:

	hierbox_browser() dialog initializer added. Same idea as for
	msg_box().  

Sat Nov  8 23:43:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_hline_width() contained some weird code since a long time it
	seems. It was fixed and cleaned up. Behavior should remain the same
	as before.  

Sat Nov  8 22:36:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, globhist/dialogs.c:

	Cleanup manager widgets number macros.  

Sat Nov  8 22:23:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/dialogs.c, bfu/hierbox.c, bfu/hierbox.h,
	config/dialogs.c, dialogs/hierbox.c, dialogs/hierbox.h:

	Provide generic hierbox dialog abort handler.  

Sat Nov  8 21:25:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/listbox.c, bfu/listbox.h, bfu/hierbox.c,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/hierbox.c,
	globhist/dialogs.c:

	Move listbox widget to be the first widget. Use macros to get the
	listbox_data. This will allow for various generalizations.  

Sat Nov  8 19:07:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, listbox.c, widget.h:

	cycle_widget_focus(): Handle unfocusable widgets like
	WIDGET_LISTBOX.  

Sat Nov  8 18:44:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	cycle_widget_focus() in cycle_widget_focus() 

Sat Nov  8 16:58:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Low limit for tab_width is 1, it prevents a segfault when resizing
	term with tabs displayed.  

Sat Nov  8 16:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/document.h:

	Always check locks sanity. Previously it was enabled by
	DEBUG_DOCUMENT/CACHE_LOCKS.  

Sat Nov  8 16:28:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.h:

	Ooops, i forgot to disable document locks debugging. Sorry.  

Sat Nov  8 16:24:29 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/document.h:

	Comment about locks usage.  

Sat Nov  8 16:20:24 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	viewer/text/link.c:

	Field refcount of struct document was renamed locks. Macros are
	wrapping locks handling and enable a debug mode for document locks.  

Sat Nov  8 13:11:41 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.h:

	Improved debugging output.  

Sat Nov  8 13:03:50 2003  Laurent Monin <zas@norz.org>:

	* src/cache/: cache.c, cache.h:

	Cache entries locks debugging was added.  

Sat Nov  8 12:48:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/document.c,
	document/html/renderer.c, sched/download.c, sched/session.c:

	cache_entry_lock_inc() -> cache_entry_lock(), cache_entry_lock_dec()
	-> cache_entry_unlock() 

Sat Nov  8 12:47:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Nothing uses cache_entry_unlock().  

Sat Nov  8 12:34:15 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, cache/cache.h, dialogs/info.c,
	document/document.c, document/html/renderer.c, sched/connection.c,
	sched/download.c, sched/session.c:

	Field refcount of struct cache_entry was renamed locks. Macros are
	provided to manipulate locks of a cache entry. Code was updated to
	reflect that change. It will ease debug and trace concerning cache
	entries handling.  

Sat Nov  8 12:13:05 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	More debug info at gc start. Simplify DEBUG_CACHE (de)activation.  

Sat Nov  8 12:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Assertion about cache_size was moved to enlarge_entry() which is now
	used in delete_entry_content(). One assertion about entry data size
	was added. Minor change in debug cache output macro.  

Sat Nov  8 05:51:27 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/osdep/osdep.c:

	Add support for GNU Screen's clipboard.  

Sat Nov  8 05:23:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/dialogs.c:

	Add a 'Bookmark' button to the global history dialogue box, using
	the new launch_bm_add_dialog() function. Has ugly stuff; will pasky
	revert it? 

Sat Nov  8 05:21:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/: dialogs.c, dialogs.h:

	Add launch_bm_add_dialog(), to launch an 'Add bookmark' dialogue box
	for the given URL and title. Use it as the backend for
	launch_bm_add_doc_dialog() and launch_bm_add_link_dialog().  

Sat Nov  8 05:17:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bookmarks/dialogs.h:

	Reformat, add parameter names, and expand comments.  

Sat Nov  8 05:09:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Refresh after open-link-in-new-(tab(|-in-background)|window). Call
	me blunt...  

Sat Nov  8 05:04:40 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Explain the meanings of the various possible values for @x in
	frame_ev().  

Sat Nov  8 05:00:50 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: dialogs/edit.c, globhist/dialogs.c:

	Whitespace.  

Sat Nov  8 02:37:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @overlay loop control cases were swapped until now.
	The one who did the original cleanup of this function did a *realy*
	BAD job. Looks like zas is to be blamed.  

Sat Nov  8 02:29:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @h -> @frag 

Sat Nov  8 02:27:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @l -> @new_frag_len 

Sat Nov  8 02:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @nf -> @new_frag 

Sat Nov  8 02:25:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @g -> @adj_frag 

Sat Nov  8 02:23:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): Reverse @overlay sign, IMHO it's more logical now.  

Sat Nov  8 02:22:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Fixed defrag_entry(), fundamentally broken by some older cleanup
	patch.  

Sat Nov  8 02:13:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	defrag_entry(): @f -> @first_frag 

Sat Nov  8 02:10:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	Rename resize_entry() back to enlarge_entry(). Rationale:
	resize_entry() gives no hint about direction to which the value is
	added, in fact it rather hints that the second argument is a new
	size as is. And nothing is bad on enlarging to negative ;-).  

Sat Nov  8 02:06:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.h:

	Described garbage_collection().  

Sat Nov  8 02:03:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Moved @entry to an inner scope.  

Sat Nov  8 02:01:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Reindentation.  

Sat Nov  8 01:59:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Whitespace here, whitespace there...  

Sat Nov  8 01:58:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Label g -> shrinked_enough.  

Sat Nov  8 01:56:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Commented the execution flow and
	individual scanning passes.  

Sat Nov  8 01:41:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Debug/assert prints consistency, make
	them actually print out some useful stuff, reformatting.  

Sat Nov  8 01:36:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @(old_)opt_cache_memory_size ->
	@(old_)opt_cache_size 

Sat Nov  8 01:35:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @opt_cache_gc_size -> @gc_cache_size 

Sat Nov  8 01:33:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: Declarations minor reorder and most of
	the variables described.  

Sat Nov  8 01:14:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @ccs -> @old_cache_size 

Sat Nov  8 01:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: @no -> @obstacle_entry 

Sat Nov  8 01:09:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/cache.c:

	garbage_collection() cleanup: ncs -> new_cache_size, newncs ->
	newer_cache_size 

Sat Nov  8 01:06:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/: cache.c, cache.h:

	cache_entry.tgc -> cache_entry.gc_target 

Sat Nov  8 00:56:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Restore bound of search dialog like in the previous input field
	patch.  

Sat Nov  8 00:49:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	Try to fix so it is more like the behaviour when <widget>_width()
	functions was used.  

Sat Nov  8 00:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A negative value caused a segfault, value is now ensured to be >= 0.  

Sat Nov  8 00:13:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Allocate name and type info for the edit option dialog in one go.  

Fri Nov  7 23:59:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	A batch of compile errors with the help of zas.  

Fri Nov  7 23:51:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c:

	Generalize feature to put label and input field on the same line
	when align is AL_NONE.  

Fri Nov  7 23:27:08 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Another update.  

Fri Nov  7 23:19:31 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Nov  7 23:14:06 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/uri.c:

	Disabled replacing '+' by ' ' in decode_uri_string.  Local files
	like index_linux+.html were badly decoded.  

Fri Nov  7 22:36:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update to use input field labels.  

Fri Nov  7 22:27:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix assertion. Spotted by Miciah.  

Fri Nov  7 22:20:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/search.c, dialogs/options.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c:

	Update to use input field label.  

Fri Nov  7 22:20:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: inpfield.c, inpfield.h:

	Integrate input field label as part of the widget.  

Fri Nov  7 21:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, config/dialogs.c:

	Now that all input field dialogs that should have maximum width are
	handled explicit in the layouters lets remove the maximizer in
	dlg_format_field().  

Fri Nov  7 21:04:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	We always want max width for edit dialogs so no need to maintain
	@rw.  

Fri Nov  7 20:56:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inpfield.c:

	We always want max width for input field dialogs so no need to
	maintain @rw.  

Fri Nov  7 20:52:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	We always want max width for search dialogs so no need to maintain
	@rw.  

Fri Nov  7 18:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: button.c, button.h, checkbox.c, checkbox.h, group.c,
	group.h, text.c, text.h:

	Remove unneeded <widget>_width() functions.  

Fri Nov  7 18:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	No need to call <widget>_width() when we have this wonderful hack
	for calculating the dialog width.  

Fri Nov  7 18:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: w -> max_width, remove TODO.  

Fri Nov  7 18:27:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	split_line(): Simplify the loop.  

Fri Nov  7 17:26:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/text.c:

	@tx -> @next_split 

Fri Nov  7 17:24:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/text.c:

	assertm() -> assert() 

Fri Nov  7 16:39:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	No need to use x and line_x positions.  

Fri Nov  7 16:22:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: w -> dlg_width, rw -> real_width.  

Fri Nov  7 16:20:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Oops it was not that cheap. ;) 

Fri Nov  7 16:17:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Handle AL_RIGHT .. yeah it is bloat but it is cheap bloat.  

Fri Nov  7 16:14:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Don't calculate shift if we are not drawing.  

Fri Nov  7 16:10:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Use for loop.  

Fri Nov  7 16:00:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Move line splitting to split_line().  

Fri Nov  7 15:59:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Prefer to use line_width over split.  

Fri Nov  7 15:50:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Minor cleanup.  

Fri Nov  7 15:45:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Also assert the line_width value.  

Fri Nov  7 15:39:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Establish some basic sanity checking.  

Fri Nov  7 15:28:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Roll back to pre 1.24 state. We are gonna take this one i slow mo'.
	;) 

Fri Nov  7 15:04:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed the potential TODO of moving html_frameset() to frames.c.
	This is just parsing the HTML tag, thus correct to have in parser.  

Fri Nov  7 15:02:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Fri Nov  7 14:42:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Trim url when have the real width so we show as much of the url as
	possible.  

Fri Nov  7 14:36:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Oops minor fix for last patch.  

Fri Nov  7 14:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 14:32:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Pass real width arg to dlg_format_<widget>.  

Fri Nov  7 14:21:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup download url trimming to only allocate needed string.  

Fri Nov  7 13:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, dialogs/auth.c, globhist/dialogs.c,
	protocol/auth/dialogs.c:

	do_dialog() can return NULL so we better check before using it. Fix
	potential leak by freeml().  

Fri Nov  7 13:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 13:32:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/group.c, bfu/inpfield.c, bfu/hierbox.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/options.c,
	protocol/auth/dialogs.c, viewer/text/search.c:

	In dlg_format_<widget>() we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 11:45:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	In dlg_format_<widget> we trust ... so don't call <widget>_width()
	also.  

Fri Nov  7 00:39:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	I don't really see the point of using the dialog <widget>_width()
	functions. a) it makes us calculate width 3 times, b) with
	reasonable initialized dialog width we do not need to bound the
	width. A whole tree patch doing this for all dialog layouter will
	save us 120 lines of code that only seems to slow us down.  

Fri Nov  7 00:35:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, text.c:

	Bahh the upper bound can be lower than the lower bound in
	int_bound() which caused the dialog width to become 0 and thus
	triggered an assertion failure.  

Thu Nov  6 23:49:01 2003  Laurent Monin <zas@norz.org>:

	* src/cache/cache.c:

	Fix a typo introduced in rev 1.41. It may affect bug 264. Witold
	please check.  

Thu Nov  6 23:46:14 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Thu Nov  6 23:38:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.h, text.c:

	Fix infinite loop under tiny dimensions.  

Thu Nov  6 23:28:06 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po were resynced and french translation was updated.  

Thu Nov  6 22:45:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Local variables renaming.  

Thu Nov  6 22:25:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Intermediate variable to improve readibility and perhaps more.  

Thu Nov  6 22:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.h, bfu/group.c, bfu/hierbox.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, protocol/auth/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	Set dialog max default width by using a macro.  

Thu Nov  6 22:01:27 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	It seems /proc/#/statm is unreliable, values reported in it are not
	well defined and are different in  2.4 and 2.6 linux kernels. Have a
	look at http://mail.nl.linux.org/linux-mm/2003-08/msg00073.html
	thread for more info. Since it was only used in debug mode and is
	not portable, i prefer to drop it for now.  

Thu Nov  6 21:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix to not skip any characters when forcing a split.  

Thu Nov  6 20:11:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/group.h,
	bfu/inpfield.c, bfu/inpfield.h, bfu/msgbox.c, bookmarks/dialogs.c,
	bfu/hierbox.c, bfu/hierbox.h, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/hierbox.h,
	dialogs/mime.c, dialogs/options.c, globhist/dialogs.c,
	mime/dialogs.c, protocol/auth/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	Rename: dlg.fn to dlg.layouter and rename layout functions to end
	with *_layouter.  

Thu Nov  6 19:03:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Fix some text wraparound issues by adding increasing the search
	string by one byte.  

Thu Nov  6 18:36:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	If we can.t find a place to split force one.  

Thu Nov  6 17:29:23 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Compilation fix: use new draw_dialog().  

Thu Nov  6 16:59:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/hierbox.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, viewer/text/search.c:

	Rename: draw_dlg() -> draw_dialog().  

Thu Nov  6 16:52:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/hierbox.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, viewer/text/search.c:

	draw_dlg(): Merge in center_dlg() using an align parameter + take
	width and height parameter.  

Thu Nov  6 16:45:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	Use local term variable.  

Thu Nov  6 16:43:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/checkbox.h:

	Fix space.  

Thu Nov  6 14:47:04 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup and variables renaming in download_progress_bar(), more
	generic now.  

Thu Nov  6 14:34:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, terminal/draw.c, terminal/draw.h:

	Reverted download_progress_bar() -> draw_progress_bar() change +
	cleanups in the same commit. Please do not move code and change it
	at once (except strictly necessary changes to keep it working, of
	course). (Note that this is different from the reverts of Jonas
	patches - cause of this revert is not undesirability of the
	direction nor staying in the way, just grave formal mistake.) Please
	split the patch up and reintroduce it.  

Thu Nov  6 14:22:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Completely rewrite to only have one main loop.
	Find split positions smarter in separate function and don.t
	calculate shift if we don't need to draw the text.  

Thu Nov  6 11:42:43 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, terminal/draw.c, terminal/draw.h:

	download_progress_bar() was replaced by draw_progress_bar(), more
	generic. It was cleanup and moved to draw.c.  

Thu Nov  6 09:45:58 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, intl/charsets.c, sched/session.c,
	viewer/text/link.c:

	d_opt was renamed global_doc_opts.  

Thu Nov  6 02:38:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Introduce is_unsplitable() macro.  

Thu Nov  6 01:59:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Don.t move to next line if the shift needs to be corrected.  Fix off
	by one error? reported by Miciah so we do not draw the ending space
	charecter.  

Thu Nov  6 01:02:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: xx -> line_x, ww -> line_width.  

Thu Nov  6 00:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	Rename: s -> split, tt -> split and turn make that the working
	pointer.  

Thu Nov  6 00:15:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Use draw_text() to draw one line at a time
	instead of one char.  

Thu Nov  6 00:07:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/text.c:

	dlg_format_text(): Cleanup.  

Wed Nov  5 22:55:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Variable rp was renamed part.  

Wed Nov  5 22:51:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Some local variables were renamed: o -> doc_opts, l -> vs. A comment
	was updated.  

Wed Nov  5 22:09:21 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	dlg_format_(field|text)(): Only accept one term argument.  

Wed Nov  5 20:28:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	dialogs/hierbox.c:

	dlg_format_box(): Only accept one term argument.  

Wed Nov  5 20:24:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c, viewer/text/search.c:

	dlg_format_field(): Only accept one term argument.  

Wed Nov  5 20:21:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	dlg_format_group(): Only accept one term argument.  

Wed Nov  5 20:18:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	dlg_format_checkboxes(): Only accept one term argument.  

Wed Nov  5 20:16:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/msgbox.c, bfu/text.c,
	bfu/text.h, config/dialogs.c, dialogs/auth.c,
	protocol/auth/dialogs.c, dialogs/edit.c, dialogs/mime.c,
	mime/dialogs.c, sched/download.c, viewer/text/search.c:

	dlg_format_text(): Only accept one term argument.  

Wed Nov  5 20:08:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/button.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, bfu/hierbox.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, viewer/text/search.c:

	dlg_format_buttons(): Only accept one term argument.  

Wed Nov  5 15:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	It.s guile_scripting_module not lua_.. ;) 

Wed Nov  5 15:09:21 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/scripting/guile/README:

	Lower the Guile FUD. You should be able to use Guile and Lua at once
	now.  

Wed Nov  5 15:06:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Simplify case 2 of the @om switch to a fall-thru in
	distribute_widths().  

Wed Nov  5 14:50:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c, scripting/lua/core.c:

	More uncompiled code that fixes remaining? dialog extra data off by
	one errors.  

Wed Nov  5 14:47:45 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Nov  5 14:46:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Considerably simplified the lines splitting as outlined in my
	comments to the witekfl's patch.  

Wed Nov  5 14:44:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update some missing lua bits from last patch. Untested :/ 

Wed Nov  5 14:23:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, viewer/text/search.c:

	Make the add_dlg_<widget>() macros operate and update on
	dlg->widgets_size directly instead of a passed dlg->widgets[]
	position.  add_dlg_end() now only asserts that the number of widgets
	is what we think it is.  I think it also fixes a potential bug in
	msg_box(). When no button label is passed since we could potentially
	overwrite the previous button before.  

Wed Nov  5 13:39:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Minor fix in the comments.  

Wed Nov  5 11:30:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	is_safe_in_shell() now considers : char as safe. Please check if
	correct. It fixes bug 273.  

Wed Nov  5 10:56:15 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, viewer/text/search.c, viewer/text/view.c:

	Old commented code was removed.  

Wed Nov  5 10:46:53 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: window.c, window.h:

	Fields xp,yp of struct window were renamed x,y. set_window_ptr()
	macro was modified a bit.  

Wed Nov  5 10:40:20 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Fields xp,yp of struct menu were renamed parent_x,parent_y.  

Wed Nov  5 10:34:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Fields xw,yw of struct menu were renamed width,height.  

Wed Nov  5 09:23:18 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/group.c, bfu/inpfield.c,
	bfu/msgbox.c, config/dialogs.c, bfu/hierbox.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Fields xw,yw of struct dialog_data were renamed width,height.  

Wed Nov  5 08:09:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Nov  5 00:52:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Synced .pos and updated Italian translation.  

Wed Nov  5 00:45:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Oops, forgot N_() for the button text and to mention this fixes bug
	#240.  

Wed Nov  5 00:40:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/connection.c:

	Fix bug 266 introduced in rev 1.58 :) 

Wed Nov  5 00:40:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/formhist/formhist.c:

	Added the "Never try to remember the form for this site" button in
	the form dialog.  

Tue Nov  4 23:35:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/edit.c:

	Fix off by one error in edit dialog. It is similar to the one in the
	option manager. Reported by Miciah.  

Tue Nov  4 23:25:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/group.c, bfu/group.h,
	dialogs/options.c, viewer/text/search.c:

	Do the translation when adding the radio or checkbox widget (as we
	do with buttons) and save a few _() calls.  

Tue Nov  4 23:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Extended memory info string tidyup.  

Tue Nov  4 23:17:32 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Nov  4 23:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Finish off the minor tidyup of zas.  

Tue Nov  4 23:12:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	shrink_format_cache(): If !whole, break the loop as soon as
	format_cache_entries <= format_cache_size.  

Tue Nov  4 23:10:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	Mimick the order of original shrink_format_cache() loop.  

Tue Nov  4 23:06:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/document.c:

	shrink_format_cache(): Unify document->refcount. Mine is better!
	;-))) 

Tue Nov  4 23:04:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/document.c:

	Eliminate an extra check for document->refcount in
	shrink_format_cache().  

Tue Nov  4 22:43:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/document.c:

	Do not attempt to remove used document when shrinking cache. It
	prevents assertion failure reported in bug 272.  

Tue Nov  4 22:01:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	text_width() now accepts NULL as minwidth or maxwidth parameters.
	min_/max_text_width() were removed.  

Tue Nov  4 21:56:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: group.c, group.h:

	group_width() now accepts NULL as min_width or max_width parameters.
	min_/max_group_width() functions were definitively removed.  

Tue Nov  4 21:50:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	min/max_buttons_width() were replaced by a modified buttons_width()
	which can now take NULL as min or max width parameter.  

Tue Nov  4 20:15:54 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Tue Nov  4 19:56:01 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Nov  4 17:11:57 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.inc, sched/session.c:

	Tab separator colors are now configurable.  

Tue Nov  4 17:04:17 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Some assertions were added to add_opt_rec().  

Tue Nov  4 15:28:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Extended memory info using /proc/self/statm. It works only on linux,
	and will simply give no info on systems without /proc. Please check
	units are correct. Only available when LEAK_DEBUG is used.  

Tue Nov  4 14:25:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	group_width() was introduced. It does the same of both min_/max_
	group_width() functions. Code was populated with it, and old ones
	are commented out for now.  

Tue Nov  4 13:46:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Update underline state + compare attributes when we are dealing with
	space (which probably defeats the whole idea about this branch).
	Fixes underlining of the top and wide links on the mandrake security
	site.  

Tue Nov  4 13:41:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Clear deleted built-in autocreated option. Fix segfault when
	deleting extensions in mime.extension.* 

Tue Nov  4 10:04:33 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Cleanup of handling of protocol.http.accept_ui_language in
	http_send_header().  

Tue Nov  4 09:41:42 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/tables.c:

	Fix bug 269, by renaming yw to height and not width.  

Mon Nov  3 15:26:26 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	parse_http_header_param("", "name") now returns NULL, instead of
	triggering an assertion failure. It fixes bug 268.  

Mon Nov  3 15:06:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Broken end action was fixed, bug introduced by me in rev 1.245. It
	closes bug 263.  

Mon Nov  3 13:55:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/: document.c, document.h:

	id parameter should be unsigned.  

Mon Nov  3 10:10:49 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor tidyup.  

Mon Nov  3 09:37:58 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	A typo (bad search/replace) was fixed.  

Mon Nov  3 09:32:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Attempt to rewrite some weird tests. Please have a look to these
	changes.  

Sun Nov  2 21:37:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use WIDTH_AUTO and WIDTH_RELATIVE in distribute_widths().  

Sun Nov  2 06:27:54 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/conf.c:

	No need for '\n' in descriptions.  

Sun Nov  2 00:10:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Make links standout in mono mode and decrease lightness again. They
	were broken when I moved active link option handling out of the
	renderer.  

Sat Nov  1 22:38:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed broken compilation w/ --disable-nls.  

Sat Nov  1 22:35:03 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/small.txt:

	Linking fails on unresolved __hton(s|l) symbols when compiling with
	-fno-inline on cygwin. Reported by Frederic <0@pervalidus.tk>.  

Fri Oct 31 22:37:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/Makefile.am, document/view.c, document/view.h,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/link.c, viewer/text/view.c, viewer/text/view.h:

	Reverted moving of some document_view specific functions. These
	functions are about _viewing_ the document on some device, thus
	inherently 100% viewer stuff, and have no business at all to live in
	document processing.  

Fri Oct 31 22:33:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, document/view.h, document/html/frames.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, sched/session.c:

	Reverted moving of document_view setup from the renderer to document
	view file. This bit is in principle not bad, but it is stucking
	clumsily in the way of the future reverting. This should be
	reintroduced later.  

Fri Oct 31 22:28:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, plain.c, plain.h, view.c,
	html/parser.c, html/renderer.c:

	Removed plaintext 'renderer'. Other patches to be reverted depend on
	it. Also, it should live in own directory. This could otherwise be a
	good bit in principle, but it is in the way.  

Fri Oct 31 22:18:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/document.c, dialogs/info.c,
	dialogs/menu.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h, viewer/text/link.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Reverted the includes fix from document/ split up, other patches to
	be reverted depend on it.  

Fri Oct 31 22:15:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, draw.c, draw.h, plain.c:

	Removed the drawing library, other patches to be reverted depend on
	it. Drawing belongs to viewer, viewer _views_ the document.  

Fri Oct 31 21:51:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, dialog.h:

	Hmm, I deleted the wrong part of the patch. This one wasn't supposed
	to be reverted, for one.  

Fri Oct 31 21:46:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Clean up resize terminal dialog after Jonas.  

Fri Oct 31 21:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/msgbox.c,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c, mime/dialogs.c,
	protocol/auth/dialogs.c, globhist/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c, bfu/widget.h:

	Reverted removal of add_dlg_end().  

Fri Oct 31 20:40:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: draw.c, draw.h, plain.c:

	Setup default colors in get_document_line().  

Fri Oct 31 19:54:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, draw.c, draw.h, plain.c:

	Start up a document drawing library.  

Fri Oct 31 19:14:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/plain.c:

	Setup document bg color.  

Fri Oct 31 18:16:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Remove traces of plain text handling in the html parser.  

Fri Oct 31 18:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Remove unused html init feature.  

Fri Oct 31 17:56:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h:

	Encapsulate document backend lifecycles.  

Fri Oct 31 17:32:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, dialogs/document.c, dialogs/info.c,
	dialogs/menu.h, scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h, viewer/text/link.c, viewer/text/textarea.c,
	viewer/text/view.c:

	Fix #includes from document/ split up.  

Fri Oct 31 17:32:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: view.c, html/renderer.c:

	Sort links in the common render function.  

Fri Oct 31 17:11:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: Makefile.am, plain.c, plain.h, view.c,
	html/renderer.c:

	Introducing a plain text renderer. This should fix bug 260 and move
	us towards backending various document type handling.  

Fri Oct 31 12:58:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, document/Makefile.am:

	Build only one libdocument archive.  

Fri Oct 31 12:57:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/view.c:

	Include own header file. :/ 

Fri Oct 31 12:57:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/Makefile.am:

	Fix comment.  

Fri Oct 31 12:42:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/view.c, document/view.h, document/html/frames.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, sched/session.c:

	Move document_view setup from the html renderer to the document view
	file. This also fixes a fix #includes.  

Fri Oct 31 06:53:46 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Fri Oct 31 02:08:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/document.h,
	document/refresh.c, document/refresh.h, sched/session.c,
	sched/session.h:

	Move document refresh stuff to own file.  

Fri Oct 31 01:59:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/view.c, document/view.h,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/link.c, viewer/text/view.c, viewer/text/view.h:

	Move some document_view specific functions.  

Fri Oct 31 01:38:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/view.h,
	document/html/frames.c, document/html/frames.h, sched/session.h,
	viewer/text/link.h, viewer/text/textarea.h, viewer/text/vs.c:

	Move the precious document_view struct to it's own file.  

Fri Oct 31 01:11:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h:

	Cleanup.  

Thu Oct 30 22:57:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	Use (init|done)_html_parser_state() when formatting tables.  

Thu Oct 30 22:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, tables.c:

	html_stack_dup(): Take dontkill arg.  

Thu Oct 30 19:34:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Cleanup goto mess.  

Thu Oct 30 19:34:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	Readd sanity checks.  

Thu Oct 30 19:29:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, document/document.c, document/document.h,
	sched/connection.c:

	Merge shrink_format_cache() and
	delete_unused_format_cache_entries().  

Thu Oct 30 18:30:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c:

	Move format cache lookup function to document.* 

Thu Oct 30 18:25:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, html/renderer.c:

	init_document(): Add document to format_cache.  

Thu Oct 30 18:23:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.c:

	cached_format_html(): Split out format cache lookup.  

Thu Oct 30 18:12:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	sched/session.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Rename link_types from L_<type> to LINK_<type>, L_LINK is now
	LINK_HYPERTEXT.  

Thu Oct 30 17:53:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, viewer/text/view.c:

	Reactivate (put to start of list) when releasing a document so
	format cache shrinking can be faster.  

Thu Oct 30 17:51:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields used and spanned of struct table_cell were renamed is_used
	and is_spanned.  

Thu Oct 30 17:49:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field b of struct table_cell was renamed ... is_header.  

Thu Oct 30 17:45:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	viewer/text/link.c:

	decrement_document_refcount(): Move to document/ and rename to
	release_document().  

Thu Oct 30 17:43:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	struct s_e was renamed html_start_end and its fields s,e ->
	start,end.  

Thu Oct 30 17:38:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields cellsp, cellpd, vcellpd in struct table were renamed
	cellspacing, cellpadding, vcellpadding.  

Thu Oct 30 17:27:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Macros and variables renaming.  

Thu Oct 30 17:13:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, document/Makefile.am:

	Update buildsystem to handle cache/ 

Thu Oct 30 17:07:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate src/cache/Makefile.  

Thu Oct 30 17:04:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	w -> width. Field c of struct table was renamed columns_count.  

Thu Oct 30 17:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, cache/Makefile.am, cache/cache.c,
	cache/cache.h, config/options.c, dialogs/document.c,
	dialogs/info.c, document/cache.c, document/cache.h,
	document/document.c, document/html/renderer.c, lowlevel/select.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/session.c, sched/session.h,
	scripting/lua/core.c, viewer/dump/dump.c, viewer/text/view.c:

	Moved cache stuff from document/cache.* to cache/cache.*.  

Thu Oct 30 16:57:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cache/: .cvsignore, .vimrc:

	Fairies.  

Thu Oct 30 16:49:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, tables.c:

	Remove support for passing renderer hook to parse_html(). It was a
	feature we didn't use. Instead we now setup the hooks in the call to
	init_html_parser().  

Thu Oct 30 16:48:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Function get_c_width() was renamed get_column_width().  

Thu Oct 30 16:44:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field cols of struct table was renamed columns.  

Thu Oct 30 16:36:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field r_heights of struct table was renamed rows_height.  

Thu Oct 30 16:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field w_c of struct table was renamed columns_width.  

Thu Oct 30 16:15:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/leds.c:

	Use intermediate variables xpos, ypos.  

Thu Oct 30 16:12:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Some missing terminal width / height renaming bits.  

Thu Oct 30 15:50:53 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/group.c, bfu/inpfield.c, bfu/inphist.c,
	bfu/listbox.c, bfu/menu.c, bfu/msgbox.c, config/dialogs.c,
	bfu/hierbox.c, dialogs/auth.c, dialogs/edit.c, dialogs/hierbox.c,
	dialogs/info.c, dialogs/mime.c, dialogs/options.c, mime/dialogs.c,
	protocol/auth/dialogs.c, protocol/http/http.c, sched/download.c,
	sched/session.c, scripting/lua/core.c, terminal/draw.c,
	terminal/event.c, terminal/screen.c, terminal/tab.c,
	terminal/terminal.c, terminal/terminal.h, terminal/window.c,
	viewer/text/search.c, viewer/text/view.c:

	Fields x,y of struct terminal were renamed width,height.  

Thu Oct 30 15:29:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.inc, ssl/ssl.c, config/options.inc,
	mime/mime.c:

	Sort trees to which you add stuff in modules.  

Thu Oct 30 15:05:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.h:

	Move x and y back so it is not compared.  

Thu Oct 30 14:27:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Fields xp,yp of struct part were renamed x,y.  

Thu Oct 30 14:09:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Field xmax of struct part was renamed max_width.  

Thu Oct 30 14:04:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Fields x,y of struct part were renamed height,width.  

Thu Oct 30 13:52:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	TODO: rename struct table field. Please help here since most fields
	have undescriptive names.  

Thu Oct 30 13:50:20 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Field x_width of struct table_cell was renamed width.  

Thu Oct 30 13:43:11 2003  Laurent Monin <zas@norz.org>:

	* src/: document/options.h, document/html/frames.c,
	document/html/renderer.c, sched/session.c, viewer/dump/dump.c,
	viewer/text/view.c:

	Use x,y instead of xp,yp in struct document_options.  

Thu Oct 30 13:30:32 2003  Laurent Monin <zas@norz.org>:

	* src/: document/options.h, document/html/frames.c,
	document/html/parser.c, document/html/renderer.c, sched/session.c,
	viewer/dump/dump.c, viewer/text/link.c, viewer/text/view.c:

	Use width,height instead of xw,yw in struct document_options. A bad
	bound checking was fixed in view.c.  

Thu Oct 30 13:12:58 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.h, document/html/renderer.c,
	viewer/text/view.c:

	Use last_x,last_y instead of xl,yl in struct document_view.  

Thu Oct 30 12:04:58 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	Use x,y instead of xp,yp in struct document_view.  

Thu Oct 30 11:57:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Use width,height instead of xw,yw in struct frameset_param.  

Thu Oct 30 11:51:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, frames.h, parser.c:

	Use x,y instead of xp,yp in struct frameset_desc.  

Thu Oct 30 11:41:16 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/html/frames.c,
	document/html/frames.h, document/html/parser.c, sched/session.c,
	viewer/text/view.c:

	Field f of struct frameset_desc was renamed frame_desc.  

Thu Oct 30 11:22:10 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.c, viewer/text/view.c:

	Use width,height instead of x,y in struct frameset_desc.  

Thu Oct 30 11:17:08 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated/fixed translation.  

Thu Oct 30 02:25:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c:

	Revert buggy part of last patch and add a big fat TODO.  

Thu Oct 30 02:15:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Fix version string.  

Thu Oct 30 01:53:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.c, document.h, html/renderer.c,
	html/renderer.h:

	Move management of the formatted cache to document utilities.  

Thu Oct 30 01:25:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.h, formhist/formhist.c,
	formhist/formhist.h, viewer/text/form.c, viewer/text/link.c,
	viewer/text/link.h, viewer/text/textarea.h, viewer/text/view.c:

	Fix includes.  

Thu Oct 30 01:08:24 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, link.c, search.c, textarea.c, view.c,
	vs.h:

	Use x,y instead of view_posx,view_pos in struct view_state.  

Thu Oct 30 00:54:55 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.h, document/html/renderer.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Use width and height instead of xw,yw in struct document_view.  

Thu Oct 30 00:34:33 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.c, viewer/text/view.c:

	Use width and height instead of xw,yw in struct frame_desc.  

Thu Oct 30 00:34:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	More absurd hacks to make some probably strange autoconf version
	behave.  

Thu Oct 30 00:28:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Fix overflow in edit dialog (bug 259) and badness in last patch.  

Thu Oct 30 00:11:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	Fix double edit button in option manager.  

Wed Oct 29 23:59:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Update the search dialog to use the new radio button and group
	handling.  

Wed Oct 29 23:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Update the terminal options dialog to use the new checkbox/radio
	handling.  

Wed Oct 29 23:58:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: group.c, group.h:

	Use widget->text instead of a label table.  

Wed Oct 29 23:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: checkbox.c, checkbox.h:

	Store the checkbox or radio label in widget->text, and use it when
	formatting and calculating width. Make dlg_format_checkboxes() look
	more mainstream.  

Wed Oct 29 23:00:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix some #includes.  

Wed Oct 29 22:58:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.h:

	Move link_bg declaration nearer to document_view.  

Wed Oct 29 22:35:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Reorder the parser header and give the special function a proper
	type.  

Wed Oct 29 22:18:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h:

	Don't export scan_http_equiv().  

Wed Oct 29 22:11:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/parser.c, document/html/parser.h,
	viewer/text/form.h:

	Move form_control and friends to the viewer.  

Wed Oct 29 21:58:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	init_html_parser(): Move to the parser. Note g_ctrl_num
	initialization was moved back to format_html().  

Wed Oct 29 21:51:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	init_html_parser(): Initialize the document title string and startf
	/ eoff variables.  

Wed Oct 29 21:40:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Rename push_base_format() to init_html_parser() + move some parser
	variables initialization to it.  

Wed Oct 29 21:27:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Introduce *_html_parser_state() to encapsulate various parser
	variables.  

Wed Oct 29 20:53:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, renderer.c:

	Also move empty stack assertion to done_html_parser().  

Wed Oct 29 20:30:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Encapsulate struct form global variable in the html parser.  

Wed Oct 29 20:18:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/dialogs.h, config/options.c, document/html/frames.c,
	document/html/parser.h, viewer/text/form.h, viewer/text/vs.c,
	viewer/text/vs.h:

	Move form_state to viewer (the only user) and cleanup a few
	dependency hacks.  

Wed Oct 29 19:59:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	viewer/text/link.c:

	Introduce link_is_textinput() macro.  

Wed Oct 29 19:43:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, sched/session.c, viewer/text/link.c,
	viewer/text/view.c:

	Rename document opt to options.  

Wed Oct 29 19:30:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Rename node variables to node + simplify the get_srch() loop.  

Wed Oct 29 19:29:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, tables.c:

	Rename node variables to node.  

Wed Oct 29 19:17:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/document.h, document/html/renderer.c,
	document/html/tables.c, viewer/text/search.c:

	Rename struct node xw and yw fields to width and height.  

Wed Oct 29 17:51:06 2003  Laurent Monin <zas@norz.org>:

	* src/: document/document.c, document/document.h,
	document/html/renderer.c, viewer/dump/dump.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/view.c:

	Fields x and y of struct document were renamed width and height.
	Please use x and y for horizontal and vertical position not for
	height and width.  

Wed Oct 29 17:47:44 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Compilation fix. add_dlg_end() is no more used.  

Wed Oct 29 17:17:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, viewer/text/search.c:

	Maintain the number of widgets in a dialog, and don't recount each
	time. Now we only allocate n - 1 widgets.  

Wed Oct 29 16:29:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.h:

	Even move the node and tag structs.  

Wed Oct 29 16:27:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/document.c:

	#include memory as well.  

Wed Oct 29 16:24:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/Makefile.am, document/document.c,
	document/document.h, document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	Move lifecycle functions and add new document files to build system.  

Wed Oct 29 16:14:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/renderer.h:

	Move link and search structs + friends.  

Wed Oct 29 16:10:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: document.h, html/frames.h, html/parser.h:

	Move struct document to own file.  

Wed Oct 29 15:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Remove useless #includes.  

Wed Oct 29 15:38:44 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, bfu/inphist.c:

	MAX_HISTORY_ITEMS was renamed MAX_INPUT_HISTORY_ENTRIES.  

Wed Oct 29 15:25:38 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/frames.c, sched/location.c, sched/session.c:

	Use frame variable name for struct frame. Fix a one-byte leak in a
	frame allocation.  

Wed Oct 29 15:01:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inphist.c, inphist.h, widget.c:

	Field d of struct input_history_entry was renamed data.  

Wed Oct 29 14:56:27 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, inpfield.c, inphist.c, inphist.h, widget.h:

	struct input_history_item was renamed struct input_history_entry.  

Wed Oct 29 14:47:13 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bfu/inphist.c, bfu/inphist.h,
	config/urlhist.c, dialogs/menu.c, scripting/lua/core.c,
	viewer/text/search.c:

	Field items of struct input_history was renamed entries.  

Wed Oct 29 14:31:35 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	An one-byte leak was fixed. A useless initialization to zero was
	removed.  

Wed Oct 29 14:27:40 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.h, dialogs/options.c, viewer/text/search.c:

	add_dlg_radio() was introduced, and add_dlg_checkbox() was
	simplified.  

Wed Oct 29 14:09:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/listbox.h,
	bfu/widget.c, bfu/widget.h, dialogs/options.c,
	viewer/text/search.c:

	Reverted zas' overloaded cummulative patch introducing
	add_dlg_radio() etc.  

Wed Oct 29 13:38:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, modules/version.c, sched/connection.c:

	Whitespaces fix.  

Wed Oct 29 13:26:45 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	This patch fixes a segfault when pressing login button on
	freshmeat.net however I don't know if it breaks form data posting. A
	far as I can see encode_multipart() and encode_controls() sets d_opt
	with the sole purpose of having d_opt->plain available in
	convert_string(). What an ugly way to do it. Instead I've add a new
	CSM_FORM convert mode so we can test if CSM_FORM was passed in
	convert_string().  Patch by Jonas.  

Wed Oct 29 11:12:03 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Uniformize number of widgets per dialog macro name:
	something_WIDGETS_COUNT.  

Wed Oct 29 10:51:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/listbox.h,
	bfu/widget.c, bfu/widget.h, dialogs/options.c,
	viewer/text/search.c:

	add_dlg_radio() was introduced and add_dlg_checkbox() loose two
	paremeters. Comments about checkbox/radios were added. struct
	input_history_item field d was renamed data, a one-byte leak was
	fixed. Minor tidyup.  

Tue Oct 28 21:28:20 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated and fixed.  

Tue Oct 28 20:50:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	get_ssl_connection_cipher(): Cleanup.  

Tue Oct 28 20:38:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: checkbox.c, checkbox.h:

	Outcomment unused function.  

Tue Oct 28 19:03:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, bfu/button.h, bfu/checkbox.c,
	bfu/checkbox.h, bfu/dialog.c, bfu/group.c, bfu/inpfield.h,
	bfu/listbox.h, bfu/widget.h:

	Rename widget_type from D_<type> to WIDGET_<type>. Convert last
	widget_type users (lua) outside bfu/.  

Tue Oct 28 17:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	clear_dialog(): no need to rename, just added a comment about what
	it does.  

Tue Oct 28 16:38:02 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Use only one local variable.  

Tue Oct 28 16:28:47 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Use intermediate variable, make code easier to read.  

Tue Oct 28 14:36:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Fix last patch. Don't use flags use bflags ;) 

Tue Oct 28 14:34:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Use add_dlg_button().  

Tue Oct 28 14:14:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	set_term_color(): Assert the color mode.  

Tue Oct 28 12:47:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, viewer/text/link.c:

	Replace current boolean color members with a color_flag enum in
	document_options. This nicely centralizes the terminal color
	handling.  

Tue Oct 28 12:25:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_links(): Ensure we always have a document options pointer, by
	falling back to the options of the document (we draw the link for)
	if d_opt is NULL.  

Tue Oct 28 11:20:48 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Bunch of FIXME for you, Jonas ;).  

Tue Oct 28 11:10:10 2003  Laurent Monin <zas@norz.org>:

	* src/document/options.h:

	Use correct type for color_mode.  

Tue Oct 28 10:17:58 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Got rid of a useless goto.  

Tue Oct 28 10:12:35 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Fix one byte memleak.  

Tue Oct 28 09:48:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Space fix.  

Tue Oct 28 09:45:23 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Fix last patch: return EVENT_NOT_PROCESSED, when it is the case.  

Tue Oct 28 09:29:02 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/group.c, bfu/inpfield.c, bfu/inpfield.h,
	bfu/widget.c, bfu/widget.h, dialogs/auth.c,
	protocol/auth/dialogs.c:

	widget_has_history() macro was introduced.  widget_is_textfield()
	macro was introduced.  They help to do stricter checks about whether
	a widget has or no history.  add_dlg_field_pass() do not take
	history parameter anymore (forced to be NULL) since we never use
	history for such field.  

Tue Oct 28 09:26:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, ssl/ssl.c:

	Move SSL options to modules.  

Tue Oct 28 08:07:08 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Tue Oct 28 03:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Removed ELusive from HEAD for now. 0.6 stuff. ELusive will live in
	the ELUSIVE branch for now.  

Tue Oct 28 02:51:24 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre8.CVS 

Tue Oct 28 02:48:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre8 

Tue Oct 28 02:47:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Tue Oct 28 02:46:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Tue Oct 28 02:44:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Sort ordinary options behind tree options, this time for real.  

Tue Oct 28 01:42:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Substitute shell-unsafe chars in string passed to shell by %<hex>
	instead of just _. Idea by Felix von Leitner <felix-elinks@fefe.de>,
	fixes bug 243.  

Tue Oct 28 01:25:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/unix/unix.c:

	Compilation fix.  

Tue Oct 28 01:22:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/unix/unix.c:

	Minor tidyup.  

Tue Oct 28 01:21:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Call suspend_mouse() / resume_mouse() when suspending or recovering
	from a suspend. This should maybe fix bug 55.  

Tue Oct 28 01:18:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: osdep.c, osdep.h, os2/os2.c, unix/unix.c:

	Introduced suspend_mouse() and resume_mouse() - for GPM driver they
	suspend the mouse temporarily, or resume it from sleep respectively.  

Tue Oct 28 00:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Include osdep/osdep.h.  

Tue Oct 28 00:35:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/signals.h:

	Compilation fix, spotted by Jonas.  

Tue Oct 28 00:34:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos/.cvsignore, beos/.vimrc, os2/.cvsignore,
	os2/.vimrc, riscos/.cvsignore, riscos/.vimrc, unix/.cvsignore,
	unix/.vimrc, win32/.cvsignore, win32/.vimrc:

	Populated with fairies.  

Tue Oct 28 00:28:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/newwin.c:

	Oops, forgot to include newwin.h. Spotted by Jonas.  

Tue Oct 28 00:27:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/Makefile.am:

	There's no sysinfo subdir.  

Tue Oct 28 00:27:05 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Don't generate Makefile for src/osdep/sysinfo/.  

Tue Oct 28 00:23:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: system.h, beos/Makefile.am, beos/sysinfo.h,
	os2/Makefile.am, os2/sysinfo.h, riscos/Makefile.am,
	riscos/sysinfo.h, unix/Makefile.am, unix/sysinfo.h,
	win32/Makefile.am, win32/sysinfo.h:

	Moved sysinfo/*.h -> */sysinfo.h.  

Tue Oct 28 00:20:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate osdep Makefiles.  

Tue Oct 28 00:17:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os2.c, os2.h, osdep.h, riscos.c,
	riscos.h, unix.c, unix.h, win32.c, win32.h, os2/Makefile.am,
	os2/os2.c, os2/os2.h, riscos/Makefile.am, riscos/riscos.c,
	riscos/riscos.h, unix/Makefile.am, unix/unix.c, unix/unix.h,
	win32/Makefile.am, win32/win32.c, win32/win32.h:

	Moved system-specific files to their own directories.  

Tue Oct 28 00:04:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, Makefile.am, beos/Makefile.am:

	Build fix.  

Tue Oct 28 00:00:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/newwin.h:

	Compilation fix.  

Mon Oct 27 23:58:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: modules/module.c, ssl/ssl.h:

	Properly export the SSL module .. ok 'nough SSL fun from me. ;) 

Mon Oct 27 23:58:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, main.c, bfu/inpfield.c, config/conf.c,
	dialogs/menu.c, lowlevel/connect.c, lowlevel/dns.c,
	lowlevel/interlink.c, protocol/file.c, protocol/file/file.c,
	protocol/user.c, protocol/http/http.c, sched/download.c,
	terminal/kbd.c, terminal/screen.c, terminal/terminal.c,
	viewer/dump/dump.c, viewer/text/form.c, viewer/text/view.c:

	Do not include osdep/osdep.h by default anymore.  

Mon Oct 27 23:55:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Revert bogus init_gnutls() cleanup.  

Mon Oct 27 23:53:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: osdep.c, osdep.h:

	Removed unused check_file_name().  

Mon Oct 27 23:46:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: system.h, beos/beos.c, beos/overrides.c,
	beos/overrides.h, beos/sysinfo.h:

	Moved BeOS POSIX emulation from beos/beos.c and sysinfo/beos.h to
	beos/overrides.*.  

Mon Oct 27 23:45:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Move PATH_MAX definition inside #ifdef HAVE_OPENSSL.  

Mon Oct 27 23:43:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	init_gnutls(): Cleanup.  

Mon Oct 27 23:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.c, beos.h, osdep.h, beos/beos.c,
	beos/beos.h:

	osdep/beos.* -> osdep/beos/beos.*.  

Mon Oct 27 23:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.h, os2.h, osdep.h, riscos.h,
	system.h, unix.h, win32.h, beos/beos.h, beos/sysinfo.h, os2/os2.h,
	os2/sysinfo.h, riscos/riscos.h, riscos/sysinfo.h, unix/sysinfo.h,
	unix/unix.h, win32/sysinfo.h, win32/win32.h:

	Moved system-definition records (plus things which need to be
	propagated to *everywhere*) from <system>.h to sysinfo/<system>.h.
	The <system>.h includes will instead serve just as osdep.h (which
	won't be globally included) backends. Do not delete the empty ones.  

Mon Oct 27 23:38:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Split up lifecycle functions into *_openssl() and *_gnutls() and
	initialize via the submodules.  

Mon Oct 27 23:30:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Remove bitching comment. ;) 

Mon Oct 27 23:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	init_ssl_connection(): Cleanup.  

Mon Oct 27 23:26:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	Updated comment about external commands.  

Mon Oct 27 23:25:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, setup.h, intl/gettext/dcigettext.c,
	mime/backend/default.c, mime/backend/mailcap.c, osdep/Makefile.am,
	osdep/newwin.c, osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h:

	osdep/os_dep.* -> osdep/osdep.* - the inconsistencies were here for
	too long and writing the underscore all the time can really get on
	your nerves.  

Mon Oct 27 23:22:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, osdep/Makefile.am, osdep/newwin.c,
	osdep/newwin.h, osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h, viewer/text/link.c, viewer/text/view.c:

	Moved stuff related to new windows business from osdep/os_dep.* to
	osdep/newwin.*.  

Mon Oct 27 23:14:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/: connect.c, ssl.c, ssl.h:

	Partially reverted ssl_t localization - moved the defintion back to
	ssl.h, but without the accompanied SSL library includes.  

Mon Oct 27 23:09:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Whitespace cleanup.  

Mon Oct 27 23:08:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, protocol/http/https.c,
	sched/connection.c, ssl/connect.c, ssl/ssl.c, ssl/ssl.h:

	Remove the whole fight club experience by moving ssl header includes
	to ssl/connect.c and declaring ssl_t in both ssl/ files.  

Mon Oct 27 22:53:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, protocol/http/https.c,
	sched/connection.c, ssl/connect.c, ssl/ssl.c, ssl/ssl.h:

	Change the ssl connection interface to take struct connection
	pointer instead of ssl_t.  The initializer [init_ssl_connection()]
	returns S_OK or S_SSL_ERROR to signal success or failure.  The
	cleanup function [done_ssl_connection()] now sets conn->ssl to NULL
	after freeing it.  

Mon Oct 27 22:51:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2/os2.c:

	Statify winch_thread().  

Mon Oct 27 22:44:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2/os2.c:

	Statify winch().  

Mon Oct 27 22:32:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/http/http.c,
	sched/connection.c, ssl/connect.c, ssl/connect.h, ssl/ssl.c,
	ssl/ssl.h:

	Add #ifdefs around users of ssl code and remove them inside the ssl
	code.  

Mon Oct 27 22:07:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Remove useless prototype.  

Mon Oct 27 21:46:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	Minor tidyup.  

Mon Oct 27 21:44:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Shield extern ssl_module declaration by #ifdef.  

Mon Oct 27 21:43:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c, modules/version.c, ssl/ssl.c,
	ssl/ssl.h:

	Modulize ssl.  

Mon Oct 27 21:36:48 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Oct 27 21:04:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/version.c:

	Make module string functions static.  

Mon Oct 27 20:57:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/: module.c, version.c:

	Use builtin modules for version string composing. This means we have
	to export builtin_modules and make it NULL terminated.  

Mon Oct 27 20:48:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Capitalize history.  

Mon Oct 27 16:42:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Move check for duplicate entries before allocation so if there is a
	dublicate entry we can just move it to the start of the list.  

Mon Oct 27 16:19:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Rename variables to be more consistent and remove trace of urlhist
	connection.  

Mon Oct 27 16:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Compilation fix.  

Mon Oct 27 15:59:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Reverted nonsensical second part of the patch.  

Mon Oct 27 15:57:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/proxy.c:

	Fixed bug reported by Stepan Kasal <kasal@ucw.cz>, FTP couldn't be
	proxied through HTTP proxy like squid, even though that's a valid
	setup and supported by other clients.  

Mon Oct 27 15:56:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Update lua input history to new struct layout.  

Mon Oct 27 15:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/menu.c, viewer/text/search.c,
	viewer/text/search.h:

	Make search history static and free the list locally.  Rename
	load/save functions to init/done since the input history already
	provides these functions.  

Mon Oct 27 15:40:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c,
	dialogs/menu.c, viewer/text/search.c:

	Rename input_history.n to size.  

Mon Oct 27 15:33:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c,
	config/urlhist.h, viewer/text/search.c:

	Add dirty and nosave member to input history to generalize the code
	(and store dirty state for search history) 

Mon Oct 27 10:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/msgbox.c, bfu/hierbox.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Remove unused term variable passed to *buttons_width().  

Mon Oct 27 09:52:51 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: unix.c, unix/unix.c:

	No comment.  

Mon Oct 27 09:40:00 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation updated.  

Mon Oct 27 03:29:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2/os2.c:

	Removed ancient commented out code.  

Mon Oct 27 03:29:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c, osdep.c, unix.c, unix.h, os2/os2.c,
	unix/unix.c, unix/unix.h:

	USE_GPM -> GPM_MOUSE (consistency with OS2_MOUSE) 

Mon Oct 27 03:27:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c, unix.c, unix.h, unix/unix.c,
	unix/unix.h:

	Define USE_GPM in unix.h.  

Mon Oct 27 03:26:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.h, os2.h, os_dep.c, osdep.c, win32.h,
	beos/beos.h, os2/os2.h, win32/win32.h:

	Make the appropriate header files prototype system-specific
	open-in-new handlers.  

Mon Oct 27 03:18:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/beos.c, osdep/beos.h,
	osdep/os_dep.h, osdep/osdep.h, osdep/overrides.h,
	osdep/beos/beos.c, osdep/beos/beos.h:

	Abadonded the osdep/overrides.h. Dissolved to osdep/beos.h and
	osdep/os_dep.h. NO_OVERRIDES -> BEOS_SELF.  

Mon Oct 27 03:13:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, osdep/Makefile.am, osdep/ascii.h,
	osdep/os_dep.h, osdep/osdep.h, protocol/ftpparse.c,
	protocol/ftp/ftpparse.c, protocol/http/http.c, terminal/kbd.c,
	terminal/screen.c, util/string.h, viewer/dump/dump.c,
	viewer/text/form.c:

	Moved ASCII_* constants from osdep/os_dep.h to osdep/ascii.h.  

Mon Oct 27 03:10:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, beos/beos.c:

	Declare NO_OVERRIDES.  

Mon Oct 27 03:09:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Introduced NO_OVERRIDES condition around inclusion of
	osdep/overrides.h.  

Mon Oct 27 03:08:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Detailed comments regarding the 'bootup' includes.  

Mon Oct 27 03:01:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/generic.h,
	osdep/overrides.h:

	Moved overrides of the standard functions by out stubs from
	osdep/generic.h to osdep/overrides.h.  

Mon Oct 27 02:58:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	No it's bad idea to include generic.h before system.h. Do it between
	system.h and os_dep.h ;-).  

Mon Oct 27 02:55:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Include first osdep/generic.h, then the other osdeps.  

Mon Oct 27 02:55:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/os_dep.h, osdep/osdep.h:

	Include osdep/system.h directly in elinks.h, not in osdep/os_dep.h.  

Mon Oct 27 02:52:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, osdep/Makefile.am, osdep/generic.h,
	osdep/os_depx.h:

	mv osdep/os_depx.h osdep/generic.h 

Mon Oct 27 02:50:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: unix.c, unix/unix.c:

	Removed useless include.  

Mon Oct 27 02:49:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: generic.h, os_depx.h:

	Removed some forever-commented-out fragment.  

Mon Oct 27 02:47:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Removed obsolete TODO.  

Mon Oct 27 02:47:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2.h, os_dep.c, osdep.c, os2/os2.c,
	os2/os2.h:

	USING_OS2_MOUSE -> OS2_MOUSE 

Mon Oct 27 02:46:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.h, system.h, os2/os2.h:

	Moved USING_OS2_MOUSE define from system.h to os2.h.  

Mon Oct 27 02:45:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	GPM is UNIX-specific so remove it from the deciding process of
	USING_OS2_MOUSE.  

Mon Oct 27 02:44:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os2.c, riscos.c, unix.c, win32.c,
	beos/beos.c, os2/os2.c, riscos/riscos.c, unix/unix.c,
	win32/win32.c:

	In the system-specific .c files, include osdep/system.h early
	(before system includes) and decide whether to proceed right away.
	This eliminates various compilation errors.  

Mon Oct 27 02:41:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.h, os2.h, system.h, beos/beos.h, os2/os2.h:

	THREAD_SAFE_LOOKUP #define moved to the system-specific header
	files.  

Mon Oct 27 02:40:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/dns.c, osdep/system.h:

	THREAD_SAFE_LOOKUP seems to be the exact opposite of its name. So
	this turns it around.  

Mon Oct 27 02:37:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, beos.h, os2.h, riscos.h, system.h,
	unix.h, win32.h, beos/beos.h, os2/os2.h, riscos/riscos.h,
	unix/unix.h, win32/win32.h:

	Splitted system-specific stuff in system.h to
	beos.h,os2.h,riscos.h,unix.h,win32.h.  

Mon Oct 27 02:30:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	Questionable tidyup.  

Mon Oct 27 02:29:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/system.h:

	The funny __EMX__ stuff is part of OS2.  

Mon Oct 27 02:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.h, osdep.h, system.h:

	Moved system-specific macros from os_dep.h to system.h, which is
	included from os_dep.h at that place.  

Mon Oct 27 02:25:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.h, osdep.h:

	Removed some really ancient comment.  

Mon Oct 27 02:24:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.h, osdep.h:

	Cleanup of the system decision procedure.  

Mon Oct 27 02:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os2.c, riscos.c, win32.c, beos/beos.c,
	os2/os2.c, riscos/riscos.c, win32/win32.c:

	Normalized the headers.  

Mon Oct 27 02:19:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.c, osdep.c, unix.c, unix/unix.c:

	Moved GPM mouse handling from os_dep.c to unix.c.  

Mon Oct 27 02:18:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: version.c, version.h:

	Moved to modules/version.* 

Mon Oct 27 02:17:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, dialogs/info.c, lowlevel/signals.c,
	modules/Makefile.am, modules/version.c, modules/version.h,
	util/Makefile.am, util/error.c, util/error.h:

	Move util/version.* to modules/version.*.  Trim get_version() from
	the interface.  Move full_static_version[] to util/error.* since it
	is the reason for that mess.  

Mon Oct 27 02:08:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os_dep.c, osdep.c, riscos.c,
	riscos/riscos.c:

	Moved RISCOS specific stuff from os_dep.c to riscos.c.  

Mon Oct 27 02:04:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Put back accidentally removed get_ctl_handle(). Spotted by Jonas.  

Mon Oct 27 02:00:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/osdep/os_dep.c, src/osdep/os_dep.h,
	src/osdep/osdep.c, src/osdep/osdep.h:

	While at it kill pthreads support as well, dead as clone() support.  

Mon Oct 27 01:59:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/osdep/os_dep.c, src/osdep/os_dep.h,
	src/osdep/osdep.c, src/osdep/osdep.h:

	Killed clone() support, long-disabled and useless and so on, for
	good.  

Mon Oct 27 01:50:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: win32.c, win32/win32.c:

	Added standard includes suite.  

Mon Oct 27 01:38:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c, win32.c, win32/win32.c:

	Moved win32 bits from os_dep.c to win32.c.  

Mon Oct 27 01:33:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, os_dep.h, osdep.c, osdep.h:

	Export get_e(), os2.c needs it.  

Mon Oct 27 01:30:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c, osdep.c, os2/os2.c:

	Moved some hopefully last bits of OS/2 stuff.  

Mon Oct 27 01:24:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os_dep.c, osdep.c, beos/beos.c:

	Migrated BeOS-specific exe().  

Mon Oct 27 01:21:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c, osdep.c, os2/os2.c:

	Made OS2-specific can_open_os_shell().  

Mon Oct 27 01:20:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Removed some unused OS/2 garbage.  

Mon Oct 27 01:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os_dep.c, osdep.c, os2/os2.c:

	Moved OS/2 mouse handling from os_dep.c to os2.c.  

Mon Oct 27 01:17:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, os_dep.h, osdep.c, osdep.h:

	Moved defining of USING_OS2_MOUSE from os_dep.c to os_dep.h.  

Mon Oct 27 01:12:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os2.c, os2/os2.c, os_dep.c, osdep.c:

	Tons of OS/2-specific stuff moved from os_dep.c to os2.c. What a
	relief.. not everything yet, though.  

Mon Oct 27 01:12:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bookmarks/bookmarks.c, cookies/cookies.c,
	formhist/formhist.c, globhist/globhist.c, mime/mime.c,
	mime/backend/default.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c, scripting/scripting.c,
	scripting/guile/core.c, scripting/lua/core.c:

	Make the module name useful for version strings.  

Mon Oct 27 01:05:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: Makefile.am, os2.c, os2/os2.c:

	Added some dummy os2.c.  

Mon Oct 27 01:03:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, beos/beos.c:

	Fixed include of os_depx.h.  

Mon Oct 27 01:02:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, os_dep.c, osdep.c, beos/beos.c:

	Moved some BeOS-specific bits from os_dep.c to beos.c.  

Mon Oct 27 00:55:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Removed redundant preprocessor branch.  

Mon Oct 27 00:55:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, beos/beos.c:

	Rearrange. Standard includes.  

Mon Oct 27 00:46:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: beos.c, beos/beos.c:

	Id tag and stuff.  

Mon Oct 27 00:37:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Split out GPM-specific parts of (un)handle_mouse() to
	(init|done)_mouse().  

Sun Oct 26 23:43:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add change hook to update d_opt active link members.  

Sun Oct 26 23:29:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: viewer/text/link.c, document/options.h,
	document/html/renderer.c:

	Move all active link handling to the viewer.  

Sun Oct 26 23:23:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, connection.h:

	Use conn instead of c in struct download.  

Sun Oct 26 23:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c, lowlevel/connect.c,
	protocol/finger.c, protocol/http/https.c, sched/connection.c:

	Use conn for struct connection *.  Use keep_conn for struct
	keepalive_connection *.  Use host_conn for struct host_connection *.  
	Use ce for struct cache_entry *. (not finished, nor definitive) 

Sun Oct 26 22:22:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Pass document color flags when coloring link lines. Spotted by
	pasky.  

Sun Oct 26 19:49:00 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/widget.h, config/conf.c, dialogs/menu.c,
	dialogs/options.c, lowlevel/dns.c, mime/backend/mimetypes.c,
	osdep/generic.h, osdep/os_depx.h, terminal/event.c,
	terminal/hardio.c, terminal/kbd.c:

	Trailing spaces were trimmed.  

Sun Oct 26 19:37:45 2003  Laurent Monin <zas@norz.org>:

	* src/modules/module.c:

	Use sizeof() to calculate number of builtin modules.  

Sun Oct 26 19:18:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.h, cookies/cookies.h:

	Move enum cookies_accept to cookie header.  

Sun Oct 26 19:11:02 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes suggested by beatricet@libero.it.  Thank
	you Beatrice.  

Sun Oct 26 19:10:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	Fix buggy #ifdef.  

Sun Oct 26 18:41:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, config/options.inc, formhist/formhist.c,
	formhist/formhist.h, modules/module.c:

	Modularize forms history and move options to the new module.  

Sun Oct 26 18:25:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Access cookies options directly.  

Sun Oct 26 18:13:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, cookies/cookies.c:

	Move cookies options to module.  

Sun Oct 26 18:09:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Access global history options directly.  

Sun Oct 26 18:00:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, globhist/globhist.c:

	Move global history options to the module.  

Sun Oct 26 17:53:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/globhist.c:

	Whoops .. module name should be "global history" 

Sun Oct 26 17:22:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/default.c:

	Added association for image/png.  

Sun Oct 26 16:56:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, mime/mime.c:

	Move #define of default mime type to setup.  

Sun Oct 26 16:53:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Access mime options directly.  

Sun Oct 26 16:47:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.inc, mime/mime.c,
	mime/backend/default.c:

	Move remaining mime options to mime/. Initialize default mime
	template options like ``ordinary'' options.  

Sun Oct 26 16:29:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/: .cvsignore, .vimrc:

	Added fairies. What a poor soul am I, having to do everything myself
	;-).  

Sun Oct 26 16:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Clean up whitespaces after zas.  

Sun Oct 26 16:23:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Initialize and free widget history only if needed.  

Sun Oct 26 16:23:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Make it possible to turn UTF8 I/O off when some poor soul turned it
	on once ;-).  

Sun Oct 26 16:11:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/inpfield.h, bfu/widget.c,
	bfu/widget.h, viewer/text/search.c:

	History only concerns text fields, so move history-related fields to
	union.  

Sun Oct 26 16:02:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Call change hook after the last change, not after the first change
	to the terminal options.  

Sun Oct 26 15:59:12 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, group.c, inpfield.c, listbox.c, widget.c,
	widget.h:

	Use w (for width) instead of l in struct widget_data. So now we have
	x,y,w,h ;).  

Sun Oct 26 15:47:24 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.h, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/msgbox.c, bfu/widget.c,
	bfu/widget.h, scripting/lua/core.c, viewer/text/search.c:

	Use datalen instead of dlen in struct widget.  

Sun Oct 26 15:37:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, dialog.c, inpfield.c, inphist.c, widget.c,
	widget.h:

	Use unnamed struct in unions. Use union in struct widget_data for
	per-widget infos.  

Sun Oct 26 15:24:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Compile fix by #including modules/module.h 

Sun Oct 26 15:20:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: modules/module.c, main.c:

	Moved triggering of the quit event back to
	terminate_all_subsystems() - it just doesn't sound right
	architecturally to have it in done_modules(). It prevents using
	done_modules() in different contexts than quitting, for example.  

Sun Oct 26 15:19:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.h, checkbox.c, checkbox.h, dialog.c, inpfield.c,
	inpfield.h, listbox.h, msgbox.c, widget.h:

	Use an union to handle struct widget per widget type infos.  

Sun Oct 26 15:12:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, modules/module.c:

	Move triggering of the quit event to done_modules().  

Sun Oct 26 15:10:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, globhist/globhist.c, globhist/globhist.h,
	modules/module.c:

	Modularize global history.  

Sun Oct 26 15:00:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Remove #include for things that has been modularized.  

Sun Oct 26 14:58:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, main.c, cookies/cookies.c, cookies/cookies.h,
	modules/module.c:

	Modularize (yes money of Danish taxpayers have been wasted on me)
	cookies.  

Sun Oct 26 14:30:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/leds.c, bfu/leds.h, modules/module.c:

	Modulize leds.  

Sun Oct 26 14:20:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/mailcap.c, viewer/dump/dump.c:

	Remove ending spaces.  

Sun Oct 26 14:14:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.h:

	Fix typo.  

Sun Oct 26 14:04:09 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/dialog.c,
	bfu/group.c, bfu/group.h, bfu/inpfield.c, bfu/inphist.c,
	bfu/listbox.c, bfu/msgbox.c, bfu/widget.c, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	protocol/auth/dialogs.c, globhist/dialogs.c, sched/download.c,
	viewer/text/search.c:

	Always use widget_data for struct widget_data*.  

Sun Oct 26 14:02:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, modules/module.c,
	modules/module.h, scripting/scripting.c, scripting/guile/core.c,
	scripting/guile/core.h, scripting/lua/core.c, scripting/lua/core.h:

	Rename module.events to module.hooks and module_struct to
	struct_module.  

Sun Oct 26 13:47:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/modules/module.c:

	Actually use the scripting modules. ;) 

Sun Oct 26 13:46:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	Modulize guile scripting backend.  

Sun Oct 26 13:46:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/: core.c, core.h:

	Modulize lua scripting backend.  

Sun Oct 26 13:46:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, scripting/scripting.c, scripting/scripting.h:

	Modulize scripting core.  

Sun Oct 26 13:26:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, modules/module.c,
	modules/module.h:

	Add an event_hook_info table to struct module. Rename INIT_MODULE to
	module_struct.  

Sun Oct 26 13:25:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/group.c, bfu/inpfield.c, bfu/listbox.c, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c, bfu/hierbox.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c,
	dialogs/options.c, globhist/dialogs.c, mime/dialogs.c,
	protocol/auth/dialogs.c, sched/download.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use widgets_data instead of items in struct dialog_data.  

Sun Oct 26 13:13:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.c,
	scripting/scripting.h, scripting/guile/hooks.c,
	scripting/guile/hooks.h, scripting/lua/hooks.c,
	scripting/lua/hooks.h:

	Rename struct scripting_hook to event_hook_info and make it part of
	the event system.  

Sun Oct 26 13:12:06 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/dialog.c, bfu/dialog.h,
	bfu/inpfield.c, bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c,
	bfu/widget.h, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/edit.c, dialogs/mime.c, globhist/dialogs.c, mime/dialogs.c,
	scripting/lua/core.c, viewer/text/search.c:

	Use widgets instead of items in struct dialog.  

Sun Oct 26 12:52:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/inphist.c, bfu/listbox.c, bfu/msgbox.c,
	bfu/widget.c, bfu/widget.h, bookmarks/dialogs.c, bfu/hierbox.c,
	dialogs/hierbox.c, globhist/dialogs.c, scripting/lua/core.c,
	viewer/text/search.c:

	Use widget variable name for struct widget *.  

Sun Oct 26 12:26:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, inphist.c,
	listbox.c, widget.h:

	selected_widget() macro and init_widget() function were introduced.
	Tidyup.  

Sun Oct 26 07:35:15 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Revert to version from 5 October.  

Sun Oct 26 03:00:19 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Explicit 0x25254545 as LISTMAGIC3 

Sun Oct 26 02:46:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.h:

	Workaround for the 0x25254545 segfault.  

Sat Oct 25 22:34:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make DEFAULT_MAILCAP_PATH available through option WITHOUT screwing
	up compatibility. :) 

Sat Oct 25 22:30:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, mime/mime.c, mime/backend/default.c,
	mime/backend/mailcap.c, modules/module.h:

	Add @data to INIT_MODULE() args.  

Sat Oct 25 22:26:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Revert the bad part like the last mailcap path.  

Sat Oct 25 22:23:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/mailcap.c:

	Reverted patch breaking mailcap functionality for users with default
	value of mime.mailcap.path in their configuration file [rev 1.62].  

Sat Oct 25 22:21:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Make DEFAULT_MIMETYPES_PATH available through option.  

Sat Oct 25 22:11:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Access mimetypes options directly.  

Sat Oct 25 22:09:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make DEFAULT_MAILCAP_PATH available via the option.  

Sat Oct 25 22:03:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Cleanup and fix last patch.  

Sat Oct 25 21:46:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Added module.data.  

Sat Oct 25 21:43:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Captionized some comments.  

Sat Oct 25 21:43:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Access mailcap option directly.  

Sat Oct 25 21:40:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Describe the lifecycle functions.  

Sat Oct 25 21:39:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.h:

	Clarified uniqueness of module.name.  

Sat Oct 25 21:34:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/modules/module.c:

	Fixed missing include of the paired .h file.  

Sat Oct 25 19:53:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, mime/backend/mimetypes.c:

	Move mimetypes options to the backend.  

Sat Oct 25 19:52:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix. And that's it. I'm disgusted and exhausted, I
	really do not want to touch the options system logic for at least
	few days. Brrr.  

Sat Oct 25 19:50:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Femtotidyup.  

Sat Oct 25 19:48:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	gqap 

Sat Oct 25 19:47:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Sort all OPT_TREEs before the other options.  

Sat Oct 25 19:46:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.inc, mime/backend/mailcap.c:

	Move mailcap options to the backend.  

Sat Oct 25 19:38:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	We must track the listboxes (major PITA ;) independently to options
	in the foreach in add_opt_rec(). If no assert()s will fail, and
	everything will be symmetric enough, this could even finally work.  

Sat Oct 25 19:29:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	add_opt_rec(): Introduced @bcat, mirroring @cat but for
	listbox_item.  

Sat Oct 25 19:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Compile fix[tm].  

Sat Oct 25 19:24:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved @cat to inner scope in add_opt_rec(). This means elaborating
	at some places but the overall result is IMHO more elegant.  

Sat Oct 25 19:22:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Try to fix the problem with listbox_item being added to itself.  

Sat Oct 25 19:17:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mimetypes.c, mimetypes.h:

	Modulize mimetypes mime backend.  

Sat Oct 25 19:17:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mailcap.h:

	Modulize mailcap mime backend.  

Sat Oct 25 19:17:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: default.c, default.h:

	Modulize default mime backend.  

Sat Oct 25 19:16:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	Move lifecycle functions out of mime_backend and into mime
	submodules. The begining.  

Sat Oct 25 19:10:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, modules/module.c:

	Introduce a mime module.  

Sat Oct 25 18:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	[no log message] 

Sat Oct 25 17:55:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Oct 25 17:14:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Sort box_items properly as well if OPT_SORT.  

Sat Oct 25 16:38:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/main.c,
	src/bookmarks/bookmarks.c, src/bookmarks/bookmarks.h,
	src/modules/Makefile.am, src/modules/module.c,
	src/modules/module.h:

	Introducing struct module. Behaviour of submodules handling is not
	tested. Fixes unknown option errors at startup.  

Sat Oct 25 16:32:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation fix.  

Sat Oct 25 16:19:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	config_root-parent options won't care about its listbox at all.  

Sat Oct 25 16:06:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Stop traversing in traverse_listbox_items_list() when cnext is NULL,
	instead of crashing happily.  

Sat Oct 25 16:05:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make the config_options->box_item invisible.  

Sat Oct 25 15:22:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Do the del_from_list() test right.  

Sat Oct 25 15:19:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	del_from_list(option->box_item) only if it is in any list (that's
	not the case for config_options->box_item.  

Sat Oct 25 15:15:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Forgot one instance of introduction of the new OPT_LISTBOX meaning.  

Sat Oct 25 15:09:58 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Revert brain-dead and useless changes. Thanks to Pasky.  

Sat Oct 25 14:49:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Changed OPT_LISTBOX behaviour so that it makes listbox even on the
	option which has it set itself.  

Sat Oct 25 14:41:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/options.h, document/html/tables.c,
	intl/charsets.c, util/lists.h, viewer/text/view.c:

	Make namespace pollution fixing macros look like <original struct
	name>_elinks.  That should be unique enough and our keyboards will
	be more likely to survive debugging sessions.  

Sat Oct 25 14:09:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bookmarks/bookmarks.c, config/options.c, config/options.h:

	Make option registration via [un]register_options().  Previous
	internal [un]register_option() was merged with [init|done]_options() 

Sat Oct 25 13:49:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c, options.h, opttypes.c:

	Removed config_option_box_items, config_options->box_item exists
	now.  

Sat Oct 25 13:44:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	init_listbox_item() reindentation.  

Sat Oct 25 13:26:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Cleaned up possibly confusing form of typecast.  

Sat Oct 25 13:25:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Reenabled the OPT_SORT implementation, let's see what will happen.  

Sat Oct 25 13:13:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	add_at_pos -> add_to_list_end in add_opt_rec().  

Sat Oct 25 13:01:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, sched/download.c:

	Add temporary file name prefix macro. Make indentation consistent.  

Sat Oct 25 12:59:06 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Fix a memleak caused by unfreed lua console history.  

Sat Oct 25 12:50:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Oct 25 12:49:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Detector of options which were not properly unregistered. It ignores
	autocreated options, maybe it shouldn't.  

Sat Oct 25 12:45:08 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, globhist/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	Use calloc_dialog().  

Sat Oct 25 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Unregister options through unregister_option_info().  

Sat Oct 25 12:31:05 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Use calloc_dialog().  

Sat Oct 25 12:28:07 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use calloc_dialog(). Fix the count of widgets in main options
	dialog.  

Sat Oct 25 12:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bfu/msgbox.c, bookmarks/dialogs.c,
	dialogs/refresh.c:

	Use calloc_dialog().  

Sat Oct 25 12:17:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.h:

	calloc_dialog(n, add_size) and sizeof_dialog(n, add_size) macros
	were introduced.  

Sat Oct 25 12:13:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Initialize @i to zero in unregister_option_info(). Spotted by Zas.  

Sat Oct 25 12:02:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Call unregister_option_info() from done_bookmarks().  

Sat Oct 25 11:54:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Introduced unregister_option_info().  

Sat Oct 25 11:46:31 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:42:55 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:39:19 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: listbox.c, widget.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:33:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:29:58 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: dialog.c, group.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 11:18:23 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c:

	Use dlg_data for struct dialog_data *.  

Sat Oct 25 10:45:37 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, config/options.c:

	Use setup.h to define default user protocols handlers, and save few
	bytes using static const strings.  

Sat Oct 25 10:42:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Reorganization, no source changes.  

Sat Oct 25 10:31:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.h:

	Populated with some more comments + little reorganization.  

Sat Oct 25 10:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	globhist/globhist.c, globhist/globhist.h:

	finalize_*() -> done_*() 

Sat Oct 25 10:19:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Reverted unapproved witekfl's patch [rev 1.99].  

Sat Oct 25 10:17:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Temporarily comment out the OPT_SORT implementation, it causes
	segfaults upon startup.  

Sat Oct 25 05:39:33 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	More BRs.  

Sat Oct 25 04:45:58 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/config/conf.c:

	Smart config is even smarter now. '\n' could be removed from
	descriptions.  

Sat Oct 25 04:39:07 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/: file.c, file/file.c:

	Length must be recalculated after decoding string.  

Sat Oct 25 01:32:54 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Oct 25 00:53:47 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Oct 25 00:52:55 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, leet.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	.po files were resynced.  

Sat Oct 25 00:37:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Added support for OPT_SORT option flag, automagically sorting
	subtree options. The flag is set on the config_options root tree.  

Sat Oct 25 00:04:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Actually register the options.  

Fri Oct 24 23:59:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Added include for N_().  

Fri Oct 24 23:53:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, config/options.c, config/options.h,
	config/options.inc:

	Moved bookmarks options registration from config/options.inc to
	bookmarks/bookmarks.c. It will probably get a wrong order in the
	tree, but it is going to serve nicely as a testbed for the New
	Order.  

Fri Oct 24 23:49:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Cleanup removing useless #define.  

Fri Oct 24 23:46:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, bookmarks/bookmarks.h:

	Introduced init_bookmarks().  

Fri Oct 24 23:39:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.h, bfu/checkbox.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/listbox.h, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c, mime/dialogs.c,
	protocol/auth/dialogs.c, globhist/dialogs.c, sched/download.c,
	scripting/lua/core.c, viewer/text/search.c:

	set_dlg_*() -> add_dlg_*(). Okay, I probably should've thought about
	this before spreading it all over the source ;-).  

Fri Oct 24 23:36:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.h, bookmarks/dialogs.c, config/dialogs.c,
	globhist/dialogs.c:

	Introduced set_dlg_listbox().  

Fri Oct 24 23:35:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.h, bfu/inpfield.h, sched/download.c:

	A few trivial fixes.  

Fri Oct 24 23:31:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/msgbox.c, bfu/widget.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	set_dlg_end() introduced. Probably the most useful one ;-).  

Fri Oct 24 23:24:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Dialog titles don't contain hotkeys.  

Fri Oct 24 23:24:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.h:

	We cannot use @history because it would get expanded on both sides
	of the assignment.  

Fri Oct 24 23:23:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.h, dialogs/auth.c, protocol/auth/dialogs.c:

	set_dlg_field_pass() introduced, and used in the HTTP auth dialog.  

Fri Oct 24 23:19:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, protocol/auth/dialogs.c, scripting/lua/core.c,
	viewer/text/search.c:

	Introduced ses_dlg_field().  

Fri Oct 24 23:08:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, protocol/auth/dialogs.c, globhist/dialogs.c,
	sched/download.c, scripting/lua/core.c, viewer/text/search.c:

	Use ses_dlg_button(). Blah. I wonder what did I mess up during this.  

Fri Oct 24 22:57:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Remove useless end goto.  

Fri Oct 24 22:46:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.h, dialogs/options.c:

	Moved set_dlg_button() from dialogs/options.c to bfu/button.h, and
	added udata parameter to it.  

Fri Oct 24 22:38:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.h, dialogs/options.c, viewer/text/search.c:

	Moved set_dlg_checkbox() from dialogs/options.c to bfu/checkbox.h,
	and used in viewer/text/search.c.  

Fri Oct 24 22:33:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	set_term_opt*() -> set_dlg*() 

Fri Oct 24 22:30:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c:

	Moved the keep_unhistory check from really_goto_url_w() (completely
	inappropriate, IMNSHO) to ses_history_move().  

Fri Oct 24 22:25:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	clean_unhistory() in ses_forward().  

Fri Oct 24 21:19:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Now we can again use cur_loc() in go_(un)back() ;-).  

Fri Oct 24 21:17:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/history.h, sched/session.h, viewer/text/view.c:

	Okay, no help, moved go_(un)back() from sched/history.h to
	sched/session.h. It belongs there more anyway.  

Fri Oct 24 21:15:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	cur_loc() is session.h's thing, so don't use it in go_(un)back()
	definitions.  

Fri Oct 24 21:11:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	#undef history_menu_model 

Fri Oct 24 21:11:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reduced code duplication for (un)history_menu(), now it is done
	through history_menu_model() macro.  

Fri Oct 24 21:05:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed abort_loading() from go_historywards() because it is already
	done in go_history().  

Fri Oct 24 21:05:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fix go_history() definition.  

Fri Oct 24 21:04:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Removed obsolete go_history() comment.  

Fri Oct 24 21:03:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	go_(un)backwards() unified to go_historywards().  

Fri Oct 24 21:02:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	The only dangling prototype in this .h file which had unnamed
	parameter, the black sheep ses_history_move(). Tsk.  

Fri Oct 24 21:00:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	About the dangers of go_history().  

Fri Oct 24 20:57:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Tidyup.  

Fri Oct 24 20:56:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h,
	viewer/text/view.c:

	go_history() exported. go_(un)back() now just wraps going right to
	the previous/next location in the history.  

Fri Oct 24 20:52:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	go_away() -> go_history().  

Fri Oct 24 20:51:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c, session.h:

	TASK_(UN)BACK unified to TASK_HISTORY.  

Fri Oct 24 20:49:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Do the same thing when coming forward from nowhere to a redirect as
	when coming back from nowhere. *mumble* 

Fri Oct 24 20:46:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed going in history to a document which was a redirect.  

Fri Oct 24 20:39:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.h, session.c:

	Unified ses_leave_location(), ses_back() and ses_unback() to
	ses_history_move().  

Fri Oct 24 20:32:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Factored out go_(un)back() just to call of go_away().  

Fri Oct 24 20:11:54 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Always use dlg for struct dialog*, dlg_data for struct dialog_data*.  
	Use counter for dialog creation.  

Fri Oct 24 20:02:16 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Always use dlg for struct dialog*, dlg_data for struct dialog_data*.  
	Use counter for dialog creation.  Prefix lua hackish dlg_data and
	xdialog_data structures with lua_.  

Fri Oct 24 19:43:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, globhist/globhist.c, globhist/globhist.h:

	Move global history change_hooks back home.  

Fri Oct 24 19:35:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c:

	Move mailcap/mimetypes change_hooks back home.  

Fri Oct 24 19:08:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 24 17:25:22 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert(). Always use file_download for struct file_download *.  

Fri Oct 24 17:12:38 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 17:05:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/session.c,
	sched/session.h:

	ses_goto() takes additional task_target_location parameter, which is
	in turn harvested by ses_(un)back() and is used instead of assuming
	the item next/previous to the cur_loc(). This should fix bug 255.  

Fri Oct 24 17:04:37 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:55:22 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:50:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, viewer/dump/dump.c,
	viewer/dump/dump.h:

	add_document_to_string(): Centralize the ``dump'' code. Only user is
	lua backend since it hurts performance for --dump a bit.  

Fri Oct 24 16:47:41 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:44:32 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:36:21 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:34:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, mime/backend/mailcap.c,
	mime/backend/mimetypes.c:

	Move over the mailcap/mimetypes change hooks.  

Fri Oct 24 16:30:39 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 16:26:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *. Use a counter for dialog items creation and
	assert().  

Fri Oct 24 16:14:36 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Use a counter for dialog items creation and assert(): it will ease
	deletion or insertion of buttons, and will ensure size of dialog is
	correctly set.  

Fri Oct 24 16:04:50 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 16:00:07 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:54:32 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:37:51 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Always use dlg variable name for struct dialog *, and dlg_data for
	struct dialog_data *.  

Fri Oct 24 15:11:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A potential bug was fixed: loops should exit if nul char is
	encountered by parser.  

Fri Oct 24 14:10:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Drastically simplify (un)history menu handling - don't pass steps as
	data, but directly the target location pointer.  

Fri Oct 24 13:36:51 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	"Do not specify variable names in prototypes" recommendation was
	removed.  

Fri Oct 24 12:07:24 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Oct 24 12:00:28 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	read() -> safe_read(), write() -> safe_write().  

Fri Oct 24 11:52:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation update.  

Fri Oct 24 11:41:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, lowlevel/dns.c, protocol/ftp.c,
	protocol/ftp/ftp.c, terminal/event.c, terminal/hardio.c:

	Cleaned up the whitespace mess created by last zas' patch ;-).  

Fri Oct 24 11:41:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Moved safe_read() back to the while() condition.  

Fri Oct 24 11:21:18 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, intl/gettext/loadmsgcat.c,
	lowlevel/connect.c, lowlevel/dns.c, osdep/generic.h,
	osdep/os_depx.h, protocol/ftp.c, protocol/ftp/ftp.c,
	encoding/encoding.c, protocol/http/http.c, sched/download.c,
	terminal/event.c, terminal/hardio.c, terminal/kbd.c,
	util/encoding.c, viewer/text/form.c:

	Attempt to workaround the EINTR mess.  

Fri Oct 24 09:35:40 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Old inactive code was removed.  

Fri Oct 24 09:01:36 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hotkey fix.  

Fri Oct 24 08:11:41 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Frecnh translation was updated.  

Fri Oct 24 01:41:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reset cur_loc() only if it didn't change.  

Fri Oct 24 01:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	And yet another fix of obsolete test in menu_history().  

Fri Oct 24 01:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed some stupid obsolete measure from the history_menu()'s loop,
	runing my day.  

Fri Oct 24 01:17:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed the history_menu()'s for loop.  

Fri Oct 24 01:09:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed the potential theoetical bad-num-of-steps problem in
	go_(un)back().  

Fri Oct 24 01:02:39 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Oct 24 00:59:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Reverted bogus change by zas [options.c:1.317] - add globhist
	options even if globhist support is not compiled in.  

Fri Oct 24 00:58:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Minor tidyup. Always add document.browse.forms.show_formhist.  

Fri Oct 24 00:49:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.c:

	Compilation fix.  

Fri Oct 24 00:33:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Compilation fixes.  

Fri Oct 24 00:28:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: menu.c, menu.c:

	Compilation fix.  

Fri Oct 24 00:27:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Oops, ses_history.history is not a pointer, really.  

Fri Oct 24 00:23:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Compilation fix.  

Fri Oct 24 00:22:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	This should be the final fix for the (un)history menu - set the
	original document as cur_loc() when calling go_(un)back(), as
	expected by the cleanup workers. Now I should actually test the
	whole beast ;-).  

Fri Oct 24 00:21:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix so globhist changehook will not result in fetching non existent
	option.  

Fri Oct 24 00:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h,
	viewer/text/view.c:

	go_(un)back now takes the 'destination location' as second
	parameter.  

Fri Oct 24 00:09:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Don't set referer to the previous document when moving through
	history.  

Fri Oct 24 00:00:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Sanitize the history menus handler so that it actually has a chance
	to work.  

Thu Oct 23 23:53:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	del_from_history(): if there's something in history, move there,
	otherwise if there's something in unhistory, move there, otherwise
	set it to NULL.  

Thu Oct 23 23:52:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	copy_option(): Fix bug in last patch. option->udata should point to
	the resulting option not the template.  

Thu Oct 23 23:49:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Fixed del_from_history() to move @current to the previous location,
	not to the next location.  

Thu Oct 23 23:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/history.h:

	Unify the history and unhistory to one single list, with
	ses_history.current acting as a movable pivot inside indicating the
	current location.  

Thu Oct 23 23:44:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	init_option_listbox_item(): Introduced.  

Thu Oct 23 23:35:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 23 23:23:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	delete_option(): Merge in free_option_value() and free_option().
	Should cleanup the namespace a little.  

Thu Oct 23 23:09:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Add document color toggling to View menu. Fix link numbering toggle
	handler.  

Thu Oct 23 23:00:04 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 23 22:50:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Actually remove location from list in free_history().  

Thu Oct 23 22:49:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Quick fix colliding hotkeys.  

Thu Oct 23 22:42:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	Fix typos spotted by zas.  

Thu Oct 23 22:39:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.inc:

	Made document.cache.memory.size long. It is supposed to be so from
	the very time when this changed units to bytes, and I'd bet it *was*
	so for at least some time. At least all users happily get_opt_long()
	it anyway. And it's the right thing. Trust me. My name is Pasky.  

Thu Oct 23 22:37:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: generic.h, os_depx.h:

	Introduced MAXLONG definition, mimicking the MAXINT one.  

Thu Oct 23 22:35:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Improve comments.  

Thu Oct 23 22:29:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Removed never-used add_to_unhistory(). We may reintroduce it later,
	but it'd only complicate stuff now.  

Thu Oct 23 22:27:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, session.c:

	clean_unhistory() now always does so.  

Thu Oct 23 22:22:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, config/kbdbind.c, config/options.c,
	document/html/frames.c, mime/backend/mailcap.c, util/lists.h:

	add_to_list_bottom() -> add_to_list_end(). Much more accurate, IMHO.  

Thu Oct 23 22:20:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	ses_history.current is used now.  

Thu Oct 23 22:20:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Update cur_loc() and have_location() to use ses_history.current.  

Thu Oct 23 22:19:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Keep session existence tests outside download_error_dialog(),
	cleaner imho.  

Thu Oct 23 22:18:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c:

	Use cur_loc() more.  

Thu Oct 23 22:16:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, options.inc:

	Rename option info initializers from add_opt_<type> to
	INIT_OPT_<type>.  

Thu Oct 23 22:16:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Alphabetize includes.  

Thu Oct 23 22:15:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.c, history.h, location.c, location.h,
	session.c:

	Keep ses_history.current up-to-date. Newly introduced
	del_from_history() helps with that task.  

Thu Oct 23 22:05:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Removed useless historical note.  

Thu Oct 23 21:54:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/download.c, sched/history.c,
	sched/history.h, sched/session.c, sched/session.h:

	Session history was moved from sched/session.h to sched/history.h,
	history functions calling convention was changed to take just
	{struct ses_history}. Corrected a little the session.location (part
	of the move) hype advertised in the associated comment.  

Thu Oct 23 21:46:12 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 23 21:43:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/parser.h, document/html/renderer.h, sched/session.h:

	Remove tons of useless cross-including, hopefully finding some way
	from this terrible maze and nest of overhead.  

Thu Oct 23 21:40:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.inc:

	Indent options.  

Thu Oct 23 21:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h, options.inc:

	Store options in tables. One for config options and one for command
	line options.  This means a new flag (OPT_ALLOC) is introduced to
	mark which options (and option names) to free when an option is
	released. Major cleanups ahead.  

Thu Oct 23 16:41:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Translation updated.  

Thu Oct 23 16:01:47 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Oct 23 15:18:53 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	A new menu entry was added to toggle link numbering. It is not yet a
	per-document action, but it will help newbies to know about "."
	shortcut existence.  

Thu Oct 23 15:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Introduce INIT_OPTION() macro.  

Thu Oct 23 14:51:21 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	A new menu entry was added to toggle images rendering. It is not yet
	a per-document action, but it will help newbies to know about "*"
	shortcut existence.  

Thu Oct 23 14:47:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.inc:

	Move autocreated function to their own function.  

Thu Oct 23 13:44:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Some comment updates regarding (un)history.  

Thu Oct 23 13:21:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Tidyup.  

Thu Oct 23 10:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Thu Oct 23 10:11:25 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Thu Oct 23 09:48:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Don't allocate alias full path strings.  

Thu Oct 23 09:18:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Whoops. Tiny typo fix.  

Thu Oct 23 09:11:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved over register_change_hooks() to a more honorable place.  

Thu Oct 23 09:09:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Export register_change_hooks().  

Thu Oct 23 08:59:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	...and reindent of the opttype info switch.  

Thu Oct 23 08:59:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Tiny cleanup...  

Thu Oct 23 08:57:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Moved the common opttype info prefix (path,saved,option->name,help)
	before the switch. This also reduces the translation strings to the
	interesting part.  

Thu Oct 23 08:50:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Converted the opttype info printing to a switch.  

Thu Oct 23 08:49:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use stricter checks while parsing attributes. It prevents infinite
	loop triggered by garbage.html test file.  

Thu Oct 23 08:43:54 2003  Laurent Monin <zas@norz.org>:

	* test/garbage.html:

	Special garbage file ;) test it and see. Be prepared to bad things
	[tm]. A fix is on the road.  

Thu Oct 23 08:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 23 08:42:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	As long as we assert right things.  

Thu Oct 23 08:39:05 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Oct 23 08:32:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	I assert, you assert, everyone asserts. We are one happy asserting
	family.  

Thu Oct 23 08:26:15 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct 23 08:20:27 2003  Laurent Monin <zas@norz.org>:

	* po/Makefile.in:

	Specify which language (C) we use. It prevents some warnings about
	.inc files when doing make update-po.  

Thu Oct 23 08:11:45 2003  Laurent Monin <zas@norz.org>:

	* po/Makefile.in:

	msgid-bugs-address xgettext option is not supported on all xgettext
	versions, so it prevents this stuff to work on some platforms.  

Thu Oct 23 07:58:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Reverted patch by Jonas ("sanitization" of translation strings)
	[1.332]. This kind of changes break languages with different order
	of words than English. It needs to be done less agressively.  

Thu Oct 23 01:45:01 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Cosmetic changes.  

Thu Oct 23 00:59:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.inc:

	Centralize change hook registration. I hope this is elegant enough!
	;) 

Thu Oct 23 00:39:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, options.inc:

	add_opt_codepage(): Call get_cp_index() in the macro.  

Thu Oct 23 00:26:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	get_opt_(): Do better sanity checking.  

Thu Oct 23 00:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Sync.  

Thu Oct 23 00:12:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Try to make help printing format strings a little saner from a
	translation standpoint.  

Wed Oct 22 23:57:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Cleanup.  

Wed Oct 22 23:53:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Add flag to xgettext to set "Report-Msgid-Bugs-To:
	elinks-dev@linuxfromscratch.org" 

Wed Oct 22 23:44:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in, src/config/options.inc:

	A few hacks and po file updating should work again.  

Wed Oct 22 22:50:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: Makefile.am, options.c, options.inc:

	Move option adding to separate file to make po files more stable.  

Wed Oct 22 21:59:40 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup: added some comments about tempnam(), removed an obsolete
	TODO, moved download error dialog code to a separate function.  

Wed Oct 22 21:55:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Described the order of items in session.(un)history.  

Wed Oct 22 21:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Make the changehooks a bit smarter.  

Wed Oct 22 21:35:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.h, opttypes.h:

	More option value unionization comment updates.  

Wed Oct 22 21:23:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Update help printing comments.  

Wed Oct 22 21:14:44 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* doc/small.txt:

	ELinks doesn't depend on libxml.  

Wed Oct 22 21:13:03 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Little fix.  

Wed Oct 22 20:56:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove FIXME.  

Wed Oct 22 20:52:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	str_dup(): Revert and don't use memacpy().  

Wed Oct 22 20:44:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Fixed add_opt_str_tree(), broken by the un-ionization.  

Wed Oct 22 20:22:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	gen_cmd(): Cleanup.  

Wed Oct 22 20:19:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Misc. cleanups. Int and long options now use common num_set()
	function.  

Wed Oct 22 20:13:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	color_set(): Cleanups.  

Wed Oct 22 20:07:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Cleanup.  

Wed Oct 22 20:00:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with current option tree.  

Wed Oct 22 19:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	str_dup(): Use memacpy().  

Wed Oct 22 19:57:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	Don't return anything in option_types[type]->dub() functions.  

Wed Oct 22 19:50:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use &options_root_tree instead of options_root.value.tree.  

Wed Oct 22 19:46:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Make free_option_value() static.  

Wed Oct 22 19:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use delete_option() and cleanup indentation.  

Wed Oct 22 19:42:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Check for option value allocation error.  

Wed Oct 22 19:24:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/conf.c, config/options.c, config/options.h,
	config/opttypes.c, dialogs/mime.c, mime/dialogs.c,
	dialogs/options.c, globhist/dialogs.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, protocol/user.c,
	viewer/text/search.c, viewer/text/view.c:

	Use union type for option values. Improves type safety, startup time
	and memory usage.  I've not yet found a sane way to cast to the
	requested type in get_opt_*() calls so for now we cast locally.  

Wed Oct 22 17:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	menu_handler(): Don't propagate the event when calling
	delete_window_ev().  Bug was reproducable with backgrounded tab and
	opening link menu and clicking outside the menu.  This is the same
	as the fix for bug 33 (bfu/menu.c rev 1.92).  One delete_window_ev()
	that propagate the event remains .. should it also be changed? 

Wed Oct 22 17:20:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Oct 22 16:57:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	New attempt to fix bug 42: Font tags are not handled correctly but
	shown verbatim. Please test heavily since parser is concerned, this
	patch may break some other things (but it should not).  

Wed Oct 22 15:11:29 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	A typo preventing gmo compilation was fixed. Witekfl please review.  

Wed Oct 22 14:00:56 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Translation update.  

Wed Oct 22 12:53:25 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	This should fix the mouse handler issue when calling OS Shell (bug
	55).  

Wed Oct 22 11:45:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	do_move(): When handling TASK_FORWARD do a lookup to see if any
	external handlers are defined. If so use that and do not attempt to
	run the connection. Fixes bug 253.  

Wed Oct 22 10:48:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Wrap assignment of boolean expression in ().  

Wed Oct 22 10:37:27 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Wed Oct 22 10:09:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Expand 1 chars less. Make slrn.sf.net and /. look better.  

Wed Oct 22 08:54:11 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Tue Oct 21 15:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/search.c:

	An option to enable/disable dialogs when search hits top or bottom
	of the document was added. Default is 1.  

Tue Oct 21 15:27:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Tidyup.  

Tue Oct 21 15:24:07 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Minor fixes.  

Tue Oct 21 15:22:59 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Translation of type field in options manager info boxes was fixed.  

Tue Oct 21 15:12:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: search.c, search.h, view.c:

	has_search_word(): Introduced as inlined function to simplify search
	word testing.  

Tue Oct 21 14:36:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Comment on some old code.  

Tue Oct 21 14:34:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Highlight current link after search strings. Idea by Johannes
	Zellner.  

Tue Oct 21 13:26:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	assert(func) in run_connection(). Regarding bug 253.  

Tue Oct 21 13:20:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add comment about why to check part->cx.  

Tue Oct 21 09:15:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation cleanup.  

Tue Oct 21 00:29:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_link_number(): Readd check for part->cx == -1 that was
	wrongfully removed by me in version 1.312 and which caused underflow
	of part->spaces. Thanks to Zardoz once again for helping out and
	spotting my bad patches.  

Mon Oct 20 21:52:21 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Oct 20 19:48:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Simplify call to realloc_spaces() and check if allocation is needed.  

Mon Oct 20 18:22:57 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Updated translation, 94.40% 

Mon Oct 20 17:37:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix off by one error that caused centered string to be a little to
	the left. Together with the previous patch the right/center
	alignment regression should have been fixed.  

Mon Oct 20 17:32:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix off by one error introduced between 1.253 and 1.254 by me. Jonas
	r00lez! 

Mon Oct 20 16:55:50 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Mon Oct 20 16:36:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/leet.po:

	Bad string translation fix.  

Mon Oct 20 16:34:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Mon Oct 20 16:23:02 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Oct 20 16:22:51 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/small.txt:

	Various typo fixes and similiar changes. Added note about non-diet
	gcc and -O's.  

Mon Oct 20 16:10:13 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fix.  

Mon Oct 20 15:51:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	There's no xterm256, only xterm-256color.  

Mon Oct 20 15:50:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Elaborate on the dangers of config.i18n ;-).  

Mon Oct 20 15:47:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Little tidyup and some typo fixes.  

Mon Oct 20 15:42:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Factor out some art from the translation strings.  

Mon Oct 20 15:39:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Form memory -> Forms memory in dialog title, spotted by Jonas.  

Mon Oct 20 15:38:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/kbdbind.c, osdep/os_dep.h,
	osdep/osdep.h:

	Removed NEWLINE. It's getting to be too much hassle and the libc
	should emulate that properly for us anyway, if the system is
	non-standard.  

Mon Oct 20 15:38:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/leet.po:

	l337 VV45 0p7.  

Mon Oct 20 15:24:57 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	100% pure Italian translation.  

Mon Oct 20 15:22:32 2003  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, options.c, options.h:

	An option to control configuration file localization was added, off
	by default.  

Mon Oct 20 15:15:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Remove useless #include.  

Mon Oct 20 14:54:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, default.c, mailcap.c,
	mimetypes.c:

	Store mime backends in a table instead of a list. My intensions
	never got realized. Hopefully fixes local file crash.  

Mon Oct 20 13:58:13 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Remove -Os gcc flag, and add -Os diet flag instead. Updated results,
	using gcc-2.95.3.  

Mon Oct 20 11:46:14 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/conf.c:

	elinks.conf is now localized.  

Mon Oct 20 09:16:15 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Details about --enable-small effects.  

Mon Oct 20 08:59:05 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Note about executable compression (example using UPX): 200kb static
	elinks.  

Mon Oct 20 08:49:27 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Some cflags were added, and a note about smaller results with
	gcc-3.2.x than with gcc-2.95.x.  

Mon Oct 20 08:42:30 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	Disable fastfind when compiled with --enable-small, and fix a
	compilation issue when fastfind is disabled.  

Mon Oct 20 08:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Compilation fix when globhist is disabled.  

Mon Oct 20 08:12:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Minor cleanup.  

Sun Oct 19 22:29:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: README, bookmarks.txt, color-model.txt, small.txt:

	Plain text documentation files got aspelled.  

Sun Oct 19 22:28:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/files.xml, config/mime.xml, config/syntax.xml,
	intro/installation.xml:

	DocBook files got aspelled.  

Sun Oct 19 20:42:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/small.txt:

	Fix typos.  

Sun Oct 19 19:07:48 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Sun Oct 19 18:12:24 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Sun Oct 19 18:12:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char16(): Checking of the bold attribute is also needed for 16
	mode even though we still have the bold bit in the color byte. Hmm
	fixes "links on freshmeat.net are sometimes bold sometimes not"
	reported by zas.  

Sun Oct 19 18:00:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Explain what struct connection's @socket and @data_socket is.  

Sun Oct 19 17:57:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, sched/connection.c,
	sched/connection.h:

	connection.sock2 -> connection.data_socket 

Sun Oct 19 17:51:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/finger.c, protocol/ftp.c, protocol/ftp/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h:

	connection.sock1 -> connection.socket 

Sun Oct 19 15:23:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/align.html:

	Add right align test case from
	http://www.czech-tv.cz/program/1063623931-17.10.2003-22:00-1.html
	that is currently broken.  

Sun Oct 19 14:59:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync "Mention expand_table_columns to break overall layout"
	description improvement.  

Sun Oct 19 13:58:53 2003  Petr Baudis <pasky@ucw.cz>:

	* .vimrc:

	*.inc files are C files in the ELinks tree.  

Sun Oct 19 13:45:16 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Done. 100%.  

Sun Oct 19 13:31:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix, reported by fissie. Three people continued happily
	committing even to uncompilable tree. Looks like noone here bothers
	actually compiling the beast anymore. See the bad example I give.  

Sun Oct 19 12:56:05 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Oct 19 12:50:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Moved now-useless struct option; prototype to #if 0 innards.  

Sun Oct 19 12:41:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Enlarged non-ELINKS_SMALL span by the <hr />.  

Sun Oct 19 12:20:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	No need to check part->cx we do that already in put_chars().  Use
	int_lower_bound() to ease formatting and possibly save an asignment.  

Sun Oct 19 11:31:15 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, bfu/hierbox.c, dialogs/hierbox.c,
	lowlevel/home.c, scripting/lua/core.c, terminal/color.c,
	viewer/text/form.c, viewer/text/link.c:

	Ending spaces removal.  

Sun Oct 19 11:23:27 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/codes.c:

	Shorter message if ELINKS_SMALL is defined, save more bytes.  

Sun Oct 19 11:19:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Remove useless thing.  

Sun Oct 19 11:12:50 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	enable-small configure option was added, it helps to get a very
	small static binary suitable for mini-distributions. Useless
	intermediate variable was removed.  

Sun Oct 19 11:10:23 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/config/kbdbind.c,
	src/config/options.h:

	enable-small configure option was added, it helps to get a very
	small static binary suitable for mini-distributions.  

Sun Oct 19 11:08:54 2003  Laurent Monin <zas@norz.org>:

	* doc/small.txt:

	Small ELinks howto.  

Sun Oct 19 09:41:22 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Oct 19 07:12:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Mention expand_table_columns to break overall layout (some lines
	overflowing from the defined boxes etc), reformat and small typo fix
	(vertical -> vertically).  

Sun Oct 19 00:44:21 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Oct 19 00:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	New option .. new version.  

Sat Oct 18 23:48:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Improve the document.html.expand_table_columns option description.  

Sat Oct 18 23:42:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/tables.c:

	Introduce document.html.expand_table_columns. Maybe it can help to
	pin point what sort of pages are better or worse. Off by default.  

Sat Oct 18 23:14:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	File menu hotkey fixes. Grm.  

Sat Oct 18 23:12:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Mention the default keybinding for the opening new tab action in
	file menu.  

Sat Oct 18 23:07:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Fix the --elinks=* option eating an argument.  

Sat Oct 18 23:06:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync to include typo fixes and some new options.  

Sat Oct 18 22:39:28 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Sat Oct 18 22:32:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	document.browse.links.active_link.bold description typo fix: test ->
	text.  

Sat Oct 18 22:31:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Normalize document.browse.images.image_link_tagging description.  

Sat Oct 18 22:30:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. Czech translation update.  

Sat Oct 18 22:15:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	ACT_OPEN_NEW_TAB bound to 't' by default, _IN_BACKGROUND to 'T'.  

Sat Oct 18 22:13:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, viewer/text/view.c:

	Introduced all the four actions relevant to tab opening.  

Sat Oct 18 22:01:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Open in new tab -> Open new tab in the File menu.  

Sat Oct 18 22:00:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/link.c:

	Fix the open_in_new_tab*() suite so that it opens the active link at
	correct times. The old behaviour was some strange mindtwist of mine,
	mixing opening in background and opening upon a link ;-).  

Sat Oct 18 21:45:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Duh, this is terrible. Again fixed get_link_url() calling ;-).  

Sat Oct 18 21:44:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Fixed calling of get_link_url().  

Sat Oct 18 21:41:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.h, tab.c:

	Compilation fix.  

Sat Oct 18 21:41:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, terminal/tab.c, terminal/tab.h,
	viewer/text/link.c:

	open_in_new_tab*() is now called directly, not through the annoying
	send_open*_new_window() wrapper.  

Sat Oct 18 21:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Remove useless @exe_name parameter from do_open_in_new_tab().  

Sat Oct 18 21:17:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Compilation fix.  

Sat Oct 18 21:16:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Oops, use send_open_new_window instead of send_open_in_new_window in
	file_menu11.  

Sat Oct 18 21:14:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, viewer/text/link.c, viewer/text/view.c,
	viewer/text/view.h:

	send_open_*new_xterm() -> send_open_*new_window().  

Sat Oct 18 21:10:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, osdep/os_dep.c, osdep/osdep.c,
	viewer/text/link.c:

	Moved the opening in new tab [in background] from the New window
	submenu.  

Sat Oct 18 20:40:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Removed useless prototype (already in the .h file).  

Sat Oct 18 20:27:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/osdep.c, terminal/tab.c,
	terminal/tab.h:

	Moved *open_in_new_tab*() from osdep/os_dep.c to terminal/tab.*.  

Sat Oct 18 19:49:47 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/document/html/parser.c:

	document.browse.images.show_any_as_links introduced (by default on).
	If off, images are shown only as their alt attribute, but aren't
	selectable links. Requested by and inspired by a patch of Johannes
	Zellner <johannes@zellner.org>.  

Sat Oct 18 19:46:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* autogen.sh:

	Add configure fixup for broken autotool on FreeBSD. Fixes "ltconfig:
	you must specify a host type if you use `--no-verify'" reported by
	Dmitry Pinchukov <dpinch@viart.com.ua> and me.  

Sat Oct 18 19:23:05 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Reverted the --without-x11 - it is completely redundant to
	--without-x, already provided by autoconf.  

Sat Oct 18 19:17:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Avoid *blatant* lies in directory listing.  

Sat Oct 18 17:38:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/gen_translations_stats.sh:

	Fix prefix number removal with FreeBSD sed.  

Sat Oct 18 17:16:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	No need for DEFAULT_COLOR_FLAGS after all. d_opt rules! 

Sat Oct 18 17:10:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	get_format_screen_char(): Use d_opt to acquire color_flags as it is
	more "stable" than using part->document.opt, fixes a few stains.  

Sat Oct 18 17:04:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	get_format_screen_char(): Clear @color_flag before updating it,
	initialize it to the default color options.  

Sat Oct 18 16:55:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Rename: xset_hchars() to draw_frame_hchars(), xset_vchars() to
	draw_frame_vchars().  

Sat Oct 18 16:48:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Added a few comments.  

Sat Oct 18 16:41:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Yes .. being a lazy programmer commiting uncompiled code makes you
	look more active with all the following fixups.  

Sat Oct 18 16:37:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchars(): Add assertion "xl > 0" again.  

Sat Oct 18 16:33:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Acquire color_flags from the document options. This fixes the
	problem with table border drawing.  

Sat Oct 18 16:28:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_{h,v}chars(): Factor out common part into get_frame_char().  

Sat Oct 18 16:12:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Make xset_vchars() look like xset_hchars() by moving template
	preparation out the loop.  

Sat Oct 18 16:07:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xset_hchars() with set_hchars().  

Sat Oct 18 16:02:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	clear_hchars(): Introduced as a specialized version of set_hchars().  

Sat Oct 18 15:38:38 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	A configure option named without-x11 was added to prevent linking
	against libx11 even if it is available.  

Sat Oct 18 13:33:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Improve usage help.  

Sat Oct 18 13:32:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Change order of arguments.  

Sat Oct 18 13:24:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Prevent manpage updating when elinks has not been build.  

Sat Oct 18 13:14:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, tools/help2doc:

	Add update-manpages build rule. Please help keeping the elinks.conf
	manpage up to date when options are changed.  

Sat Oct 18 13:11:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Update against current option tree.  

Sat Oct 18 13:08:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Only use "(DISABLED)" in option description.  

Sat Oct 18 12:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add comment about when the aliases has been added.  

Sat Oct 18 12:29:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, config/options.c:

	Properly fix the get_bfu_style(..., "dialog") issue by introducing
	ui.colors.*.generic color and aliasing ui.colors.*.dialog.background
	to *.generic.background.  

Sat Oct 18 09:14:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	No trailing spaces in ui.window_title description.  

Sat Oct 18 09:12:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Only few config options descriptions and
	most of commandline options descriptions left.  

Sat Oct 18 01:37:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/dialog.c:

	"dialog" is not a valid bfu style name. Use dialog.frame instead.  

Sat Oct 18 01:19:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Make links standout again in mono mode.  

Sat Oct 18 01:16:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Oct 18 00:57:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	viewer/text/link.c:

	Add active link bold option.  

Sat Oct 18 00:38:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char16(): Like in add_char256() handle boldness as if it is not
	part of the color byte when USE_256_COLORS.  

Sat Oct 18 00:26:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Propagate the bold attribute from the foreground color brightness
	and check the screen_char->attr bolt bit when drawing.  

Sat Oct 18 00:14:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Clear the bold bit. Fixes color weirdness.  

Sat Oct 18 00:09:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Fix COLOR_INCREASE_CONTRAST comment.  

Sat Oct 18 00:01:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 23:54:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use macros when comparing fore- and background colors.  

Fri Oct 17 23:52:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use macros when assigning fore- and background colors.  

Fri Oct 17 23:27:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix option text, set ensure_contrast on by default.  

Fri Oct 17 22:57:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: man/man5/elinks.conf.5, tools/help2doc:

	Sync with current option tree, fix path to imported xml files.  

Fri Oct 17 22:57:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Minor cleanup.  

Fri Oct 17 22:45:52 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Makes ftp directory listing looks like local directory listing. It
	lies a bit, and is a hack for now. Feel free to improve.  

Fri Oct 17 21:37:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. A giant leap, we're getting near :^). Got
	over de.po again as well as hu.po and leet.po...  

Fri Oct 17 21:29:34 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 20:57:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c, viewer/text/link.c:

	Lots of nice link options to play with: 
	
	document.browse.links.active_link 
	        tree with underline / invert colors / default color options.  
	
	document.html.underline_links 
		this is not perfect yet it seems (some weirdness in underline
		drawing) 

Fri Oct 17 20:16:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fixes in comment.  

Fri Oct 17 19:58:33 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update: 94.93% 

Fri Oct 17 19:53:02 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Fri Oct 17 18:57:34 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update, now 92.13% 

Fri Oct 17 18:46:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c, terminal/color.c, terminal/color.h,
	viewer/text/link.c:

	Add document.colors.ensure_contrast option. Patch by Johannes
	Zellner and me.  

Fri Oct 17 18:44:52 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 18:18:10 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Fri Oct 17 18:12:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	viewer/text/link.c:

	Color info about whether to allow dark on black is passed using
	color_flags.  For link colors we have to lookup the option value.
	This is done using a nice int option value pointer.  

Fri Oct 17 17:40:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of pasky ;-) 

Fri Oct 17 17:37:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	Introduce color_flags to control how a view color is converted to a
	terminal color.  This is nicely mixed with a few renames so pasky
	will be even more worried about how broken the color conversion is.  
	Lots of TODOs.  

Fri Oct 17 16:25:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Fri Oct 17 15:46:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, screen.c:

	Improve redrawing to only care about the background color when
	dealing with ``space''.  

Fri Oct 17 15:31:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, dialogs/menu.c, document/html/renderer.c,
	sched/session.c, sched/session.h, viewer/text/view.c,
	viewer/text/vs.c:

	struct session screen field was renamed doc_view.  

Fri Oct 17 15:24:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	t -> term, l -> link.  

Fri Oct 17 15:20:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.h:

	Improve terminal_screen->dirty_* comment.  

Fri Oct 17 15:15:18 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 15:13:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Minimize dirty_to if >= the terminal height.  

Fri Oct 17 15:12:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 15:09:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Only iterate for the range of dirty lines. Mostly dialog drawing
	benefits.  

Fri Oct 17 15:08:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/draw.c, terminal/screen.c,
	terminal/screen.h, terminal/tab.c:

	Maintain a dirty range instead of a dirty flag. dirty_from <=
	dirty_to means the screen is dirty.  

Fri Oct 17 14:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view + minor cleanup.  

Fri Oct 17 14:19:43 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: link.h, view.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:16:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:11:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/vs.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 14:10:51 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Rename struct document_view variables to doc_view. Final part.  

Fri Oct 17 14:08:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Rename struct document_view variables to doc_view + minor cleanup.  

Fri Oct 17 14:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: form.c, form.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:59:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:58:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Rename struct document_view variables to doc_view. Part 1.  

Fri Oct 17 13:50:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Rename struct document_view variables to doc_view.  Simplify
	l_current_link(LS) to use get_current_link().  

Fri Oct 17 13:46:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Fri Oct 17 13:42:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:39:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: search.c, search.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:35:19 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:26:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/history.c, document/html/frames.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:25:50 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: textarea.c, textarea.h, textarea.h:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:20:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Rename struct document_view variables to *doc_view.  

Fri Oct 17 13:13:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, document/html/frames.c:

	Rename struct document_view variables to doc_view.  

Fri Oct 17 13:05:35 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Always use document variable name for struct document *.  

Fri Oct 17 13:04:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, viewer/dump/dump.c:

	Use document variable name for struct document *.  

Fri Oct 17 13:00:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Use document variable name for struct document *.  

Fri Oct 17 12:56:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Always use document variable name for struct document *.  

Fri Oct 17 12:35:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, view.c:

	Always use document variable name for struct document *.
	has_form_submit() cleanup.  

Fri Oct 17 12:26:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: frames.c, renderer.c, tables.c:

	Always use document variable name for struct document *.  

Fri Oct 17 11:39:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, document/cache.h:

	Make boolean members unsigned. Felt by Miciah.  

Fri Oct 17 11:12:47 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, cache/cache.h, document/cache.c,
	document/cache.h, document/html/frames.h, document/html/renderer.c:

	Renamed struct cache_entry count field and struct document use_tag
	field to id_tag. cache_count is now id_tag_counter. Use document
	variable name for struct document * variables, instead of confusing
	ce or screen.  

Fri Oct 17 10:47:51 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Fri Oct 17 09:32:35 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/cache.h:

	Use bitfields for boolean fields in struct cache_entry.  

Fri Oct 17 09:07:23 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Now useless comment was removed.  

Fri Oct 17 07:56:21 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Fri Oct 17 07:38:27 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Fix typo.  

Fri Oct 17 05:11:44 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Null chars are replaced by spaces. www.gazeta.pl is viewable now.  

Thu Oct 16 23:02:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 16 22:31:33 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update. Got in front of Hungary, hope de.po won't
	get too near :-). (But of course don't get discouraged, kuser ;-) 

Thu Oct 16 21:17:10 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of fonseca ;-) 

Thu Oct 16 21:09:19 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update. Getting ahead of fonseca ;-) 

Thu Oct 16 19:23:07 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Thu Oct 16 15:53:19 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	s/Info/Informazioni/ 

Thu Oct 16 14:01:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Thu Oct 16 13:36:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Explain what the HTTP referer is and why can it be bad in
	protocol.http.referer description.  

Thu Oct 16 13:29:26 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and fr,hu,pl,it translations were updated.  

Thu Oct 16 13:14:36 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Unixware should be written UnixWare, should prevent some SCO
	lawsuits... ;).  

Thu Oct 16 13:12:02 2003  Laurent Monin <zas@norz.org>:

	* doc/: mailcap.html, book/info/preface.xml,
	book/intro/installation.xml, man/man5/elinks.conf.5:

	Bunch of typo fixes with the help of
	http://fgouget.free.fr/typos/typos program.  

Thu Oct 16 13:08:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/leds.c, config/options.c, document/html/parser.c,
	protocol/uri.h, protocol/http/codes.c, protocol/http/http.c,
	sched/connection.c, sched/event.c, util/fastfind.c:

	Bunch of typo fixes with the help of
	http://fgouget.free.fr/typos/typos program.  

Thu Oct 16 11:02:28 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	Little hack to make translation stats correctly sorted.  

Thu Oct 16 08:35:43 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Use cep variable name instead of f (which is used for fragment
	elsewhere) in find_in_cache() and get_cache_entry().  

Thu Oct 16 08:31:39 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Use ce variable name instead of f (which is used for fragment
	elsewhere) in garbage_collection().  

Thu Oct 16 08:28:19 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	A macro FRAGSIZE() was added and is now used.  

Thu Oct 16 08:20:19 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Declarations moved near variable usage.  

Thu Oct 16 08:16:40 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Declaration moved near variable usage.  

Thu Oct 16 05:01:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/protocol/http/http.c:

	Removed test for null characters in header.  Some buggy servers eg.
	www.gazeta.pl send them.  

Thu Oct 16 02:17:45 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Wed Oct 15 22:31:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* po/de.po:

	German translation update.  

Wed Oct 15 21:40:15 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	enlarge() was renamed resize_entry() since it may reduce entry size
	too. Misc cleanups.  

Wed Oct 15 20:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Added default settings for xterm-256color.  

Wed Oct 15 19:39:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed broken defaults for terminal._template_.underline - it is now
	by default off, which is much safer and more reasonable.
	Co-suggested by Jonas, fixes bug 252.  

Wed Oct 15 19:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Massive Czech translation update. Jonas has no chance.  

Wed Oct 15 19:22:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix by Zardoz to handle --with-gnutls=/path/to/gnutls again.  

Wed Oct 15 17:15:02 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation update.  

Wed Oct 15 16:59:17 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Better handling of memory cache size reduction by user while cache
	usage is currently over given value. document.cache.memory.size
	option changes are now detected and minimal cache size is tested and
	eventually modified to be a reasonable value.  

Wed Oct 15 14:19:40 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	Sort lines by percentage of translation and alphabetic order of .po
	file.  

Wed Oct 15 14:02:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Light unfuzziation and continued new translation.  

Wed Oct 15 13:56:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Removed exporting util/profile.h to the whole ELinks source. It is
	useless for most of it and slows down compilation etc.  

Wed Oct 15 13:42:45 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes.  

Wed Oct 15 13:17:04 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced and french translation was updated.  

Wed Oct 15 11:59:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Really fix problem reported by David Gómez where openssl was
	disabled when calling configure with --without-gnutls.  

Wed Oct 15 11:01:16 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	defrag_entry() minor cleanup.  

Wed Oct 15 10:55:57 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	document.cache.memory.size is in bytes not in kilobytes.  

Wed Oct 15 10:50:12 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Cache debug macros cleanup, use debug() instead of internal() for gc
	failure, defrag_entry() cleanup.  

Wed Oct 15 07:51:19 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/connect.c:

	Fix compilation error due to unused label.  

Tue Oct 14 20:06:05 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	translation updated to 84.68% 

Tue Oct 14 18:43:54 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Fixed typos in Italian translation.  

Tue Oct 14 18:43:02 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/html/parser.c:

	Move mem_free(href) where it belongs, pasky sees everything.  

Tue Oct 14 15:57:27 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/ssl/connect.c:

	Removed unreached goto.  

Tue Oct 14 14:15:31 2003  Laurent Monin <zas@norz.org>:

	* src/: util/Makefile.am, util/profile.h, elinks.h:

	Moved CLK_* macros to util/profile.h 

Tue Oct 14 14:00:35 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Remove useless ; at end of CLK_STA() and CLK_STO() definitions.  

Tue Oct 14 13:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Fix stupid stuff in last patch. No need to use do {} while (0) with
	CLK_STA() and CLK_STO().  

Tue Oct 14 13:52:48 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Process cpu time gathering utilities to help developpers in
	profiling ELinks functions. These tools are not so hi-resolution as
	possible but they should be portable since only clock() is used.
	These macros are only effective in debug mode. Feel free to improve.  

Tue Oct 14 11:16:30 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/document/html/parser.c:

	Prevent a memory leak if !label, 'cause every byte is sacred, every
	byte is great, if a byte is wasted god gets quite irate.  

Tue Oct 14 10:27:36 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Translation fixes.  

Mon Oct 13 23:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/: .cvsignore, .vimrc:

	Fairy files added.  

Mon Oct 13 22:40:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Trim a few tags and use | for the markup .. we can use the
	indentation to figure out what's a section title.  

Mon Oct 13 21:49:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: modules/version.c, util/version.c:

	Show whether mailcap and/or mimetypes are compiled in.  

Mon Oct 13 21:45:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/backend/mimetypes.c:

	assert(mimetypes_tree), something weird seems to happen there...  

Mon Oct 13 18:55:36 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* doc/: README, bookmarks.txt, color-model.txt, configure.txt,
	events.txt, feedback.txt, hacking.txt:

	Bunch of typo fixes.  

Mon Oct 13 18:39:13 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* README:

	Fixed a typo.  

Mon Oct 13 12:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Textarea wrap attribute value is now by default virtual (as almost
	everyone else does as well, it seems); implemented wrap=(none|off).
	Idea by Benjamin Schwenk (DerBenni).  

Sun Oct 12 21:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre7.CVS 

Sun Oct 12 21:53:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre7 

Sun Oct 12 20:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Some random changes my xgettext did.  

Sun Oct 12 20:33:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Another small step in cs.po updates.  

Sun Oct 12 19:35:00 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Sun Oct 12 19:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/manpages/elinkskeys.5.xml, man/man5/elinkskeys.5:

	Sync documentation fixes mentioned in Debian Bug#210305: man page
	typos: "each of this keys" by <agcosta@gis.net>.  

Sun Oct 12 15:28:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed standards-violating behaviour when we ignored TITLE outside of
	HEAD tags pair (the HEAD element has both start and end tag
	optional). Pointed out by DerBenni.  

Sun Oct 12 10:12:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/leet.po:

	Unfuzzing.  

Sun Oct 12 10:03:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Unfuzzy and translate a few oneliners.  

Sat Oct 11 22:13:29 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated, .po files were resynced.  

Sat Oct 11 18:57:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Added info about syntax file and else a bit reformatting.  

Sat Oct 11 16:25:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Some light markup was added and the document reformatted.  

Sat Oct 11 13:56:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	Ideas about an ELinks DocTool.  

Sat Oct 11 13:20:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix screen_driver comment.  

Sat Oct 11 13:15:37 2003  Laurent Monin <zas@norz.org>:

	* src/: cookies/cookies.c, protocol/uri.c, protocol/uri.h:

	end_with_known_tld() was introduced, to reduce code redundancy.  

Sat Oct 11 12:30:11 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Some typos in comment were fixed.  

Sat Oct 11 10:49:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.h, sched/download.c:

	Fix #including of terminal/screen.h: renderer.h is remnants from the
	summer cleanup so removed, download.h needs beep_terminal().  

Sat Oct 11 05:39:45 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/msgbox.c:

	Added comment.  

Sat Oct 11 05:35:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Polish translation update.  

Fri Oct 10 20:32:27 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Also show a message if the search hits the top.  

Fri Oct 10 19:55:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug where '^.' matches every character, not only the first in
	a line.  

Fri Oct 10 19:49:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Sync is_in_range_regex to get_searched_regex.  

Thu Oct  9 16:12:04 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* AUTHORS:

	Cristiano Guadagnino and criguada@libero.it are the same physical
	entity.  

Thu Oct  9 15:49:17 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation fixes in order to please the Accademia della
	Crusca.  

Thu Oct  9 12:27:12 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated, unfuzzied some older bits. Have to keep
	some jump in front of Jonas.  

Thu Oct  9 10:36:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Add comments.  

Thu Oct  9 10:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation micro update.  

Thu Oct  9 10:09:48 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Thu Oct  9 09:55:02 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update, 77.41% done 

Thu Oct  9 09:49:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h, html/parser.c:

	Add "meta" link display option to struct document_options so
	changing it will automagically rerender the page.  

Thu Oct  9 09:41:00 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Oct  9 09:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Reverse links are now printed (reported by Peter Gervai), html link
	display format was improved.  

Thu Oct  9 09:09:59 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Do not call trim_chars() if string has zero length, it prevents
	segfault reported by Stephane Chazelas, when calling add_bookmark()
	with a read-only empty string in do_add_folder().  

Thu Oct  9 05:57:28 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/bfu/msgbox.c:

	Deinlining msg_text_do. With inline elinks segfaults on Cygwin.  

Thu Oct  9 05:54:39 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/osdep/: os_dep.h, osdep.h, win32.c, win32/win32.c:

	When Cygwin is treated as UNIX cursor is visible. Before it wasn't.  

Thu Oct  9 05:51:21 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Enabled 256 colors.  

Wed Oct  8 21:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Don't send Cache-Control: reload but Cache-Control: no-cache for
	NC_RELOAD, the Radim's request contained a mistake.  

Wed Oct  8 17:06:47 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 17:01:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove dot from confdir caption.  

Wed Oct  8 15:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/stub.c, util/stub.c:

	Fix elinks_memmove(), cases where n == 0 or src == dst were not
	handled correctly. May be reported by Stephane CHAZELAS ;) 

Wed Oct  8 14:51:49 2003  Varga Balázs <vinnui@ent.hu>:

	* po/hu.po:

	Translation update.  

Wed Oct  8 13:30:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Minor simplification needed to make the script run on FreeBSD.  

Wed Oct  8 13:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Updated to reflect the current state of options.  

Wed Oct  8 13:07:30 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Oct  8 12:59:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Cleanup and optimization of last patch, now truncated url ends with
	three dots.  

Wed Oct  8 12:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Truncate very long urls in download progress dialog, it prevents
	progress info to be hidden in such a case.  

Wed Oct  8 12:26:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make ui.startup_goto_dialog by default enabled. This is probably
	much easier for the newbies.  

Wed Oct  8 11:08:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Add header .. fix typo .. add note.  

Wed Oct  8 10:45:31 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	More ideas.  

Wed Oct  8 07:49:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	Select the parent item, if there is one, when '[' is pressed on a
	leaf item or collapsed folder in a listbox.  
	
	Warning: Excessive indentation and roundabout code. It took me ages 
	to figure how to select an arbitrary listbox item; we need a better
	way.  

Tue Oct  7 23:24:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some comments about configuration and tidyup of the example.  

Tue Oct  7 22:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Added vim: textwidth modeliner .. Lots of reformatting .. Added
	comment about availability .. A few type/grammar fixes.  

Tue Oct  7 22:28:46 2003  Laurent Monin <zas@norz.org>:

	* doc/color-model.txt:

	Some ideas (as is) that may be bad ;).  

Tue Oct  7 22:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	A bit hackish fix so that the "Search hit bottom" msg_box is not
	shown when the search string is not found.  

Tue Oct  7 20:42:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Some rant about the state of the implementation (AFAIK, that is;
	please write up on that) and especially the expected availability
	(my opinion on that).  

Tue Oct  7 20:30:47 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated vinnui contact email addy.  

Tue Oct  7 20:21:03 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/color-model.txt:

	Typo/grammar fixes.  

Tue Oct  7 20:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Tiny whitespace fix.  

Tue Oct  7 18:56:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: color-model.txt, configure.txt:

	Add CVS Id tag and TODOs.  

Tue Oct  7 18:51:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/color-model.txt:

	Some thoughts/excerpts/links about color models 

Tue Oct  7 17:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	s/links-current/elinks-current/ 

Tue Oct  7 16:49:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Allocate 9 widgets .. fixes spurious segfaults I was having.  

Tue Oct  7 14:54:58 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Tue Oct  7 12:04:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Show a 'Search hit bottom, continuing at top.' notice to the user
	when the search wraps to the start of the document.  

Tue Oct  7 11:59:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Fixed case insensitivity reversed after Jonas' cleanups.  

Tue Oct  7 09:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Fix two potential memleaks, regfree() should be called before
	return. Code preparation to handle regexp errors messages, but we
	need to pass term, or to display messages in calling functions.  

Tue Oct  7 08:43:26 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Mon Oct  6 23:35:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Oops .. commiting late and uncompiled code is bad.  

Mon Oct  6 23:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Cleanup.  

Mon Oct  6 21:52:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Add case sensitivity radiogroup to the search dialog.  

Mon Oct  6 21:36:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed sorting error (folders after regular options) introduced few
	revs ago by me.  

Mon Oct  6 21:35:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, viewer/text/search.c:

	Introduced document.browse.search.case, controlling case sensitivity
	of the searches (by default off, mimicking the current behaviour).
	Hold me back while the damage done on the searching code is actually
	reversible.  

Mon Oct  6 20:58:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Remove some cruft left from the removal of view_state.view 
	(src/sched/session.c:1.168->1.169).  

Mon Oct  6 20:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	KEEP OPTIONS IN ALPHABETICAL ORDER. ;-) 

Mon Oct  6 19:38:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Wishful dreams of optimization of the string searches.  

Mon Oct  6 19:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Try to be more consistent in enumeration lists in the description -
	always use /^\d (is|means|for)/. Inspired by fabio.  

Mon Oct  6 18:49:41 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/options.c, src/dialogs/info.c, src/sched/session.c:

	s/url/URL/ and resynced .pos.  

Mon Oct  6 18:05:03 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation updated.  

Mon Oct  6 00:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	globhist/dialogs.c, protocol/protocol.c, protocol/user.c,
	sched/download.c, viewer/text/form.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	Always use OK label for message boxes with only one choice. Cancel
	is not appropriated since no action is cancelled by pressing the
	button, a better one can be Close, but most dialogs are using OK
	already. It makes UI more coherent.  

Sun Oct  5 23:19:27 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sun Oct  5 22:42:08 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Error dialog button is now OK instead of Cancel, it makes more sense
	and is a more common label for this kind of box.  

Sun Oct  5 21:33:33 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix crash which showed then pressing 'n' after the searching pattern
	has cleared.  

Sun Oct  5 20:47:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/group.c, bfu/group.h, viewer/text/search.c:

	Compress the search type selector to one line.  

Sun Oct  5 20:18:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Only display codepage info if @frame is not NULL. Catched by Miciah.  

Sun Oct  5 20:13:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, viewer/text/search.c, viewer/text/search.h:

	Add search history file support.  

Sun Oct  5 20:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Added TODO about checkboxes on one line.  

Sun Oct  5 20:03:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	load_input_history(): Rename fp -> file, url -> line.  

Sun Oct  5 19:55:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: checkbox.c, checkbox.h:

	Don't export dlg_format_checkbox().  

Sun Oct  5 19:55:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inphist.c, bfu/inphist.h, config/urlhist.c:

	Move input history file loading and saving.  

Sun Oct  5 19:53:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Dirty stuff coming. Let the user choose search type (normal, regex,
	...) in the search dialog. Unfortunately I had to clone
	input_field() & co in order to do this :-(.  

Sun Oct  5 19:44:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/urlhist.c:

	Split url history load and save functions into a generic part and
	...  

Sun Oct  5 19:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Reindent loop innards in select method.  

Sun Oct  5 18:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	assertm() without message? Converted to assert().  

Sun Oct  5 16:36:44 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug, where a regex matches string of length 0 e.g. '.*'.  

Sun Oct  5 16:11:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Restrict regex so that '.' doesn't match a newline.  

Sun Oct  5 16:02:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Sun Oct  5 15:49:26 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	kuser is random hacker and implemented regex searches.  

Sun Oct  5 15:48:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Make it possible to search empty string - it just cancels the
	previous search, effectively unhighlighting it.  

Sun Oct  5 15:40:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Include <sys/types.h> before <regex.h> to make off_t defined on
	FreeBSD.  

Sun Oct  5 15:09:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Removed nonsensical inlinization of display_field_(_pass)().  

Sun Oct  5 14:07:10 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, SITES:

	Update SITES - weed out out-of-date URIs etc. Patch by Frédéric L.
	W. Meunier <0@pervalidus.tk>.  

Sun Oct  5 14:05:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, sched/session.c,
	viewer/text/vs.c, viewer/text/vs.h:

	Remove view_state.view, it is useless now - nothing uses it anymore
	(by mikulas, from 0.99pre9).  

Sun Oct  5 13:58:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 3: look_for_link. Splitting complete.  

Sun Oct  5 13:55:30 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 2: look_for_tag.  

Sun Oct  5 13:37:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/document/html/parser.c:

	Split get_img_map part 1: look_for_map.  

Sun Oct  5 13:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* README:

	Update URIs ... no need to mention how to request features or report
	bugs twice.  

Sun Oct  5 13:16:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Commented out some strange frameset test in request_frame() (by
	mikulas, from 0.99pre9).  

Sun Oct  5 12:54:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Insert space between codepage string and notice in parentheses.  

Sun Oct  5 12:54:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	In current_frame(), take @fd from ses->screen, not
	cur_loc(ses)->vs.view (by mikulas; from 0.99pre9).  

Sun Oct  5 12:48:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Use @frame instead of @location->vs.view (by mikulas, from
	0.99pre9).  

Sun Oct  5 12:40:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed some ancient linksherited commented out stuff from
	request_frame(). Even Mikulas removed it in 0.99pre9 ;-).  

Sun Oct  5 12:37:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/generic.h, osdep/os_dep.c, osdep/os_depx.h,
	osdep/osdep.c, terminal/kbd.c:

	Workaround broken cfmakeraw() on AIX (by mikulas, from 0.99pre9).  

Sun Oct  5 11:34:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	DEBUG_CACHE cleanups - @f -> @frag, @e -> @entry, @c -> @comment.  

Sun Oct  5 11:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	Macroize dump_frag*(), merge dump_all_frag() and dump_frags(),
	change fprintf()s to debug()s. Hope zas will kill me fast and won't
	let me suffer.  

Sun Oct  5 05:26:53 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Removed ncurses-devel from BuildRequires 

Sun Oct  5 04:44:38 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	Spelling fixes.  

Sat Oct  4 23:16:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	The manpages has been moved to the man/ dir already.  

Sat Oct  4 22:31:31 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a bug with regex searching.  

Sat Oct  4 22:21:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/menu.h, viewer/text/search.c,
	viewer/text/search.h:

	Moved search dialog functions from dialogs/menu.* to
	viewer/text/search.*.  

Sat Oct  4 22:19:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/urlhist.h:

	Make config/urlhist.h standalone - it depends on bfu/inphist.h so
	include it inside.  

Sat Oct  4 21:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/html/renderer.c:

	Make usage of tabindex optional (document.browse.links.use_tabindex)
	.. on by default like the current behaviour.  

Sat Oct  4 21:40:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, viewer/text/search.c:

	Add extended regular expressions. And move a wrong #ifdef/#endif.  

Sat Oct  4 21:19:39 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Change the comment of the regex option if disabled.  

Sat Oct  4 21:15:05 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Make regex searching depend on HAVE_REGEX_H.  

Sat Oct  4 21:03:36 2003  Karsten Schölzel <kuser@gmx.de>:

	* acconfig.h, configure.in:

	Add test for regex.h and regex_t to configure.  

Sat Oct  4 20:56:04 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/README:

	Spelling/grammar fixes. Huh.  

Sat Oct  4 20:50:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Corrected scripting/ note.  

Sat Oct  4 20:43:02 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added regex searches.  

Sat Oct  4 20:42:40 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Added 256 colors support.  

Sat Oct  4 20:33:02 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @get_searched_regex and use it. Regex searching is useable ;) 

Sat Oct  4 20:24:54 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Add @is_in_range_regex and use.  

Sat Oct  4 20:19:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/options.c:

	Add options for regular expressions searching.  

Sat Oct  4 20:03:11 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@get_searched_plain in preparation of regex searching. Also removing
	some unneeded variables.  

Sat Oct  4 19:53:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Move things specific to plain string searching into
	@is_in_range_plain in preparation of regex searching.  

Sat Oct  4 18:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Add TODO about using color_flags instead of color_type.  

Sat Oct  4 18:26:51 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Fix a off by one error, that prevented the last character to match.  

Sat Oct  4 18:08:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, viewer/dump/dump.c:

	Introduce COLOR_MODE_DUMP so dump_pos does not need to be exported.  

Sat Oct  4 14:01:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Trivial whitespace and comment cleanups.  

Sat Oct  4 14:00:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/viewer/text/search.c:

	Use int_(lower|upper)_bound.  

Sat Oct  4 13:25:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Trash last patch and provide proper fix of was_li usage to handle
	<li><li> correctly.  

Sat Oct  4 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use was_li again but put the control in html_li(). <li><li> is still
	broken but any following <li> will be rendered correctly.  

Sat Oct  4 12:46:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Tidyup.  

Sat Oct  4 12:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Only do table cell ``offset´´ fix up in 256 color builds. It is a
	bad hack.  

Sat Oct  4 11:37:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Send Pragma: reload if cache_mode is >= NC_RELOAD. Idea by Radim
	Kolar <hsn@cybermail.net>.  

Sat Oct  4 08:59:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	home can be NULL.  

Sat Oct  4 01:58:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.c:

	box_sel_move(): Use local box_context variable instead of allocating
	one.  

Sat Oct  4 01:44:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, config/options.c:

	Highlight marked listbox items in addition to putting asterisks next
	to them. Fixes bug 137.  

Fri Oct  3 18:31:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	``Cache'' the color type and mode so they can be used as fallback
	when part->document is NULL. Fixes some ugly stains on google and
	freshmeat.  

Fri Oct  3 18:28:01 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call to gettext into test_confdir and use N_ to mark the
	messages instead. inspired by fonseca ;-) 

Fri Oct  3 17:47:43 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: lowlevel/home.c, config/options.c:

	If -confdir option or ELINKS_CONFDIR begin with a dir_sep treat them
	as absolute paths.  

Fri Oct  3 17:36:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/options.c, lowlevel/home.c:

	Add commandline option '-confdir'.  

Fri Oct  3 17:12:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove no longer needed envconfdir.  

Fri Oct  3 17:10:38 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Test if path is valid.  

Fri Oct  3 17:06:59 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Use a 'else' and remove goto.  

Fri Oct  3 17:03:32 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add error_message to test_confdir and show it on failure.  
	
	Also add a missing NULL to straconcat.  

Fri Oct  3 16:45:26 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move building of the confdir into test_confdir.  

Fri Oct  3 16:28:17 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 16:25:41 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move one strip_trailing_dir_sep to test_confdir.  

Fri Oct  3 16:18:23 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	elinks_home should be home_elinks in this call.  

Fri Oct  3 16:15:25 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change the behaviour of ELINKS_CONFDIR, so that "/elinks" is not
	appended and elinks will try to create the dir specified by
	ELINKS_CONFDIR.  

Fri Oct  3 15:57:37 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Change indentation.  

Fri Oct  3 15:44:58 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Remove mem_free(home) calls and use 'goto end;'.  

Fri Oct  3 15:32:08 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Move call elinks_dirname(path_to_exe) to initialization of home.  

Fri Oct  3 15:17:13 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Add strip_trailing_dir_sep(unsigned char *path) and use it.  

Fri Oct  3 13:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	The change hooks should never initialize the map .. we do that only
	when needed.  

Fri Oct  3 12:50:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Only initialize the mimetypes map when requested for a MIME type
	mapping.  

Fri Oct  3 12:35:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	init_mimetypes(): Split out map initialization to
	init_mimetypes_map().  

Fri Oct  3 12:26:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Only initialize the map when a user actually requests a mailcap mime
	handler. This should reduce the startup time.  

Fri Oct  3 12:05:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Split map initialization into init_mailcap_map().  

Fri Oct  3 11:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Use mem_calloc() when allocating the mime_handler.  

Fri Oct  3 11:51:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	get_mime_handler_mailcap(): Split out the mailcap_hash lookup to
	get_mailcap_entry().  

Fri Oct  3 11:44:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	init_mailcap(): Test if mailcap is enabled each time it is called.  

Fri Oct  3 11:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Whitespace fix.  

Fri Oct  3 11:25:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Improve comments.  

Thu Oct  2 23:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix cleanup.  

Thu Oct  2 23:51:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Minor cleanup and macrofy color adding.  

Thu Oct  2 23:36:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	add_char_color(): Introduced as a fast and specialized alternative
	to add_format_to_string(). It could maybe even be considered for use
	by 16 color mode.  

Thu Oct  2 23:33:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix yet another one of my off by oners. :( 

Thu Oct  2 22:51:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Expand the comment with info from discussion on #elinks.  

Thu Oct  2 22:40:56 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Added comment.  

Thu Oct  2 22:25:58 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* src/document/html/parser.c:

	Commented out LI related stuff. Fixed bug 208.  

Thu Oct  2 22:08:02 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* contrib/elinks.spec.in:

	Spec polished.  

Thu Oct  2 21:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Provide a color_mode_info fallback when 256 color are not compiled
	in.  

Thu Oct  2 21:28:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Make COLOR_MODE_256 visible even when 256 color support is not
	enabled. As fabiob says never trust the users.  

Thu Oct  2 20:49:55 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/config/kbdbind.c:

	Remove unneeded header.  

Thu Oct  2 20:13:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of the char data.  

Thu Oct  2 17:28:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Use white not purple as fallback.  

Thu Oct  2 17:27:37 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* src/bookmarks/backend/xbel.c:

	Whitespace fix.  

Thu Oct  2 17:21:01 2003  Fabio Bonelli <fabiobonelli@libero.it>:

	* po/it.po:

	Italian translation update.  

Thu Oct  2 17:16:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix comment.  

Thu Oct  2 17:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h, screen.c:

	Update screen_char->color[] to have 2 chars in a 256 color build.  
	Add add_char256() and 256 color mode loop to redraw_screen().  

Thu Oct  2 17:12:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make it possible to choose 256 color mode.  

Thu Oct  2 17:10:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add 256 color mode info and setting.  

Thu Oct  2 17:09:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, acconfig.h:

	Add configuration of 256 color support.  

Thu Oct  2 16:42:14 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/lowlevel/home.c:

	Simplify loop.  

Thu Oct  2 16:37:06 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/util/conv.h:

	Typo fix in comment.  

Thu Oct  2 16:25:54 2003  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Free u if needed at function end only, reducing code redundancy,
	variables declarations were moved near usage, useless return were
	removed.  

Thu Oct  2 16:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move add_cursor_move_to_string().  

Thu Oct  2 15:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, cache/cache.c, document/cache.c,
	document/html/renderer.c:

	Use whole instead of less significant u.  

Thu Oct  2 15:37:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix off by one error. ;P 

Thu Oct  2 15:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Obsolete commented out code was removed.  

Thu Oct  2 15:18:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, draw.c, draw.h, screen.c:

	Make screen_char->color an array. ELusives unmaintained code is a
	PITA.  

Thu Oct  2 15:02:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	No need for add_chars16() so removed.  

Thu Oct  2 14:58:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Macrofy add_chars() .. Although it is a bit ugly this way we can
	reduce code dublication I hope.  

Thu Oct  2 14:36:17 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Functions were provided to ease cache debugging (disabled by
	default).  

Thu Oct  2 14:05:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Use trigger_event_name().  

Thu Oct  2 14:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	enlarge() is now an inlined function instead of a macro.  

Thu Oct  2 13:38:28 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: main.c, dialogs/menu.c:

	Use trigger_event_name where appropriate.  

Thu Oct  2 13:35:18 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/sched/: event.c, event.h:

	Add trigger_event_name(unsigned char *name, ...) 

Thu Oct  2 13:24:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* doc/events.txt:

	Add description of dialog-lua-console and free-history to
	doc/events.txt 

Thu Oct  2 12:54:35 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: viewer/text/view.c, scripting/lua/core.c,
	scripting/lua/core.h, scripting/lua/hooks.c:

	Use event system for dialog_lua_console.  

Thu Oct  2 12:47:15 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: dialogs/menu.c, scripting/lua/core.c, scripting/lua/core.h,
	scripting/lua/hooks.c:

	Use event system for free_lua_console_history.  

Thu Oct  2 12:29:03 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/core.c:

	Compile fix because of wrong pointer type.  

Thu Oct  2 12:16:04 2003  Karsten Schölzel <kuser@gmx.de>:

	* contrib/lua/bm.lua, contrib/lua/config.lua,
	contrib/lua/hooks.lua.in, contrib/lua/remote.lua,
	src/scripting/lua/core.c:

	Make elinks_home available for Lua and use it.  

Thu Oct  2 11:09:12 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/scripting/lua/: core.c, core.h:

	Move run_lua_func near l_bind_key and make it static.  

Thu Oct  2 10:46:22 2003  Karsten Schölzel <kuser@gmx.de>:

	* src/: config/kbdbind.c, config/kbdbind.h, scripting/lua/core.c,
	scripting/lua/core.h, viewer/text/view.c:

	Use event calls to provide keybinding functionality for scripting
	backends.  

Thu Oct  2 08:43:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix bold attribute detection by using ch->color again.  

Thu Oct  2 05:53:41 2003  Witold Filipczyk <witekfl@poczta.gazeta.pl>:

	* po/pl.po:

	- Polish translation update 

Thu Oct  2 00:07:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Compile fix. Hmm time to sign off ;) 

Thu Oct  2 00:06:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Wrap color comparison and copying in macros.  

Wed Oct  1 23:48:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup.  

Wed Oct  1 23:24:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Tidyup and a small "experimental" simplification.  

Wed Oct  1 23:12:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/renderer.c,
	terminal/color.c, terminal/color.h, terminal/screen.c:

	Move the underline color enhancement to set_term_color() and out of
	the critical screen drawing loop so it can be simplified. This is
	done using a new COLOR_ENHANCE type. Underlining is now part of the
	document options.  

Wed Oct  1 22:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Alphabetize #includes.  

Wed Oct  1 22:18:35 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Bug 86 is now fixed, nothing to do ifno fragment in cache entry.  

Wed Oct  1 20:02:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix segfault when trying to /. openoffice.org's 1.1 feature page.  

Wed Oct  1 18:09:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed alignment of a condition.  

Wed Oct  1 17:39:57 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Title and url are now sanitized before adding or modifying a
	bookmark, starting/ending spaces are removed, and bad chars are
	repplaced with spaces in title, and causes error if in url.  

Wed Oct  1 17:16:14 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, util/conv.h, util/string.c, util/string.h:

	trim_chars() was moved from string.c to conv.h, since this function
	modifies strings.  

Wed Oct  1 16:38:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/hooks.c:

	Use evhook_use_params() to silence compiler warnings, uncommented
	fetching of @ses from @va even if unused.  

Wed Oct  1 16:37:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Introduced evhook_use_params(), universal usage enforcer of all
	evhook parameters ;-). Idea by kuser and jonas.  

Wed Oct  1 15:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix my reckless programming in previous patch. We need to va_arg()
	ses but still silence any compiler warnings.  

Wed Oct  1 15:09:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/Makefile.am:

	Add palette.inc to list of files.  

Wed Oct  1 15:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/configure.txt:

	Fix minor typos and add info about string magic.  

Wed Oct  1 14:52:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Wrap unused event parameters in #if 0 #endif 

Wed Oct  1 14:52:44 2003  Laurent Monin <zas@norz.org>:

	* doc/configure.txt:

	Descriptions of debug and fastmem configure options were added (idea
	by Jonas). Feel free to complete and fix.  

Wed Oct  1 14:19:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Fix add_format_to_string.  There must be `width + 1' instead of
	`newlength´ as argument to vsnprintf because the size attribute of
	vsnprintf includes the trailing null, but the return value doesn't.  
	Patch by Karsten Schölzel.  

Wed Oct  1 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.h, guile/hooks.c, lua/hooks.c:

	Introduce NULL_SCRIPTING_HOOK ..  

Wed Oct  1 10:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.c,
	scripting/scripting.h, scripting/guile/hooks.c,
	scripting/lua/hooks.c:

	Add a data pointer to event_handler and scripting_hook, which can be
	set through register_event_hook to save a hook specific data
	pointer. It is especially useful for binding keys from scripting
	backends, e.g. if you register one callback to two different events,
	you can distinguish both events with the data pointer, if you set
	them to different values.  
	
	This patch and the 3 previous by Karsten Schölzel.  

Wed Oct  1 10:26:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Move libscripting before scripting backends.  

Wed Oct  1 10:25:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Fix wrong variable name.  

Wed Oct  1 10:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Return enum evnhook_tatus.  

Wed Oct  1 00:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Hack of the day: Repaint the link line background when
	use_document_colours = 2. Might need some fine tuning.  

Wed Oct  1 00:35:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix blackspace.  

Tue Sep 30 23:49:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* NEWS:

	Add Guile scripting and HTML meta refresh ..  

Tue Sep 30 23:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	Missing update of pld-linux.org for links rpms, drop
	elinks.pld.org.pl and point to the community page for mailinglist
	info.  

Tue Sep 30 23:18:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Add toggle-document-colors ...  

Tue Sep 30 23:15:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/completion.tcsh:

	Painfully out of date so better remove it.  

Tue Sep 30 16:31:51 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po were resynced.  

Tue Sep 30 16:22:06 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Typo fix (missing \n).  

Tue Sep 30 11:49:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add missing #include and comments.  

Tue Sep 30 11:47:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify things to how they was before I unrolled the code array.  

Tue Sep 30 08:43:23 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	Fix brackets escaping (with-gnutls and with-openssl configure
	options).  

Tue Sep 30 00:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Checkbox the color mode choosing.  

Tue Sep 30 00:17:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.h, document/html/parser.c,
	document/html/renderer.c, viewer/dump/dump.c, viewer/text/link.c:

	struct document_options: Rename @col to @color_mode.  

Tue Sep 30 00:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes (part two).  

Mon Sep 29 23:51:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Handle more than two color modes + fix #include.  

Mon Sep 29 23:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Store the color mode in the screen drivers.  

Mon Sep 29 23:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Make the terminal._template_.colors option hold the color mode.  

Mon Sep 29 23:36:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Cleanup.  

Mon Sep 29 23:32:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Factor out the looping into add_chars16() + rename
	print_char() to add_char16().  

Mon Sep 29 23:09:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.h:

	Fix comment.  

Mon Sep 29 23:07:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Introducing struct color_mode_info and use the color mode to control
	the blending.  Finally rename find_nearest_color() to get_color().  

Mon Sep 29 22:28:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Add 256 color mode to enum and move out 16 color mode setting to
	seperate function.  

Mon Sep 29 22:13:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	set_term_color(): Take color mode as an argument.  

Mon Sep 29 21:15:45 2003  Laurent Monin <zas@norz.org>:

	* src/: modules/version.c, util/version.c:

	get_dyn_full_version() was fixed. In some cases, features line ended
	with a comma.  

Mon Sep 29 20:45:08 2003  Laurent Monin <zas@norz.org>:

	* src/ssl/ssl.c:

	Gnutls needs extra options to talk to https://login.yahoo.com, this
	patch should fix it. Patch by Zardoz.  

Mon Sep 29 17:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops @name is shadows by my wrong merging of last patch .. not good
	so fix it.  

Mon Sep 29 16:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Update the event hash if @events got relocated. Patch by kuser.  

Mon Sep 29 14:18:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Moved PUTC declaration into the llop.  

Mon Sep 29 14:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	@e -> @translit in convert_string().  

Sun Sep 28 23:44:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Minor optimization to only do two multiplications.  

Sun Sep 28 23:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Restyle "if(" code snippet. Shame on me.  

Sun Sep 28 23:31:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: error.c, error.h:

	Prevent cancellation of one assertion by another, first assertion
	failure triggers first if_assert_failed met, which reset
	assert_failed. This behavior makes legal assert(a); assert(b);
	if_assert_failed return;.  

Sun Sep 28 22:55:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Simplification of end_load().  

Sun Sep 28 22:38:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup in do_move().  

Sun Sep 28 22:29:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	select_menu_item(): Use menu_func. ;) 

Sun Sep 28 22:17:29 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Minor optimization: url is absolutely not null here. Patch by
	Witold.  

Sun Sep 28 22:12:38 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Open tab bug was fixed again ;). Reported and reintroduced by Jonas.  

Sun Sep 28 21:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix assertion failure reported by darix when downloading md5summer
	from http://fileforum.betanews.com.  

Sun Sep 28 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Use granular allocation for dynamic menues.  

Sun Sep 28 19:55:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	"Eew" someone cried. Under normal circumstances the mere sight of
	such ill formed creatures would make any sane person want to give it
	all up, turn around and head back. But there was no way back. No
	sane way out of this one. Only forward one step at a time.  

Sun Sep 28 18:38:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Simplify 'No link selected' testing to see if the menu item list is
	empty 

Sun Sep 28 18:23:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	A missing obvious user of menu_func.  

Sun Sep 28 18:22:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS, contrib/elinks.spec.in:

	RPM spec update by darix.  

Sun Sep 28 16:10:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Seems we can keep the goodies and eat it too (or how was that saying
	;) so clean away temporary variables since menu->data is passed (so
	no segfaulting like a few patches ago).  

Sun Sep 28 16:04:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Remove dublicate code by making select_(main)menu() wrap
	select_menu_item().  

Sun Sep 28 15:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	Further simplify dejavu code in select_(main)menu().  

Sun Sep 28 15:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Reordering of declarations.  

Sun Sep 28 15:33:00 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use SET_MENU_ITEM() in add_to_menu().  

Sun Sep 28 15:16:39 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Got rid of a useless #else.  

Sun Sep 28 15:12:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Declarations were moved near variable use.  

Sun Sep 28 15:05:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup (logical operators at start of lines).  

Sun Sep 28 14:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	x?1:0 things were rewritten !!x.  

Sun Sep 28 14:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Use SET_MENU_ITEM() when setting up select menus.  

Sun Sep 28 13:43:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/html/parser.c, mime/dialogs.c,
	viewer/text/link.c, viewer/text/view.c:

	Replace MENU_FUNC* with a typedef. Should it be made so the cast is
	(menu_func *)? 

Sun Sep 28 13:07:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.h:

	Use INIT_MENU_ITEM() when defining NULL_MENU_ITEM 

Sun Sep 28 13:02:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use MENU_HEAD macro.  

Sun Sep 28 13:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Tidyup patch was reverted. It causes a weird segfault when opening
	new tab. Reported by Jonas.  

Sun Sep 28 12:09:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Small update by Witold.  

Sun Sep 28 00:13:16 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/bfu/dialog.c, src/bfu/listbox.c,
	src/bfu/menu.c, src/osdep/os_dep.c, src/osdep/osdep.c,
	src/sched/session.c, src/terminal/event.c, src/terminal/kbd.c,
	src/modules/version.c, src/util/version.c, src/viewer/text/view.c:

	A configure option --disable-mouse was added. If used, it undefines
	USE_MOUSE which control compilation of mouse-related code. A bunch
	of #ifdef/#endif was spread among the code for that.  

Sat Sep 27 22:23:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	As the guile and lua backends no longer conflict with global
	function names, it should be possible for the user to select both
	backends at the same time. This patch removes logic from configure
	which blocked this.  --Karsten Schölzel 

Sat Sep 27 16:10:00 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Check what $RPM_BUILD_ROOT actually is before rm -rf'ing it.
	Suggested by darix. I wonder what darix actually experienced before
	suggesting this ;-).  

Sat Sep 27 15:26:31 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	(void *) 1 thing seems useless, i replaced it with NULL, please let
	me know if it has any impact.  

Sat Sep 27 15:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Tidyup.  

Sat Sep 27 15:17:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Tidyup.  

Sat Sep 27 14:03:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Tidyup.  

Sat Sep 27 13:56:19 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Old inactive code was removed. Cache info menu item is now displayed
	only in debug mode (as it needs more work).  

Sat Sep 27 13:47:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, viewer/text/view.c, viewer/text/vs.c:

	Wrap testing of whether a document has frames in
	document_has_frames() macro.  

Sat Sep 27 13:16:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Generalizing offsetof() in elinks.h was a bad idea - reverted. Mixed
	in is removal of ISSLASH() macro in favor of our own dir_sep().  

Sat Sep 27 12:50:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, document/options.c, intl/gettext/dcigettext.c:

	Move offsetof() macro definition to elinks.h 

Sat Sep 27 12:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Remove a debug() call that should not have been part of last patch.  

Sat Sep 27 12:01:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/html/renderer.c,
	viewer/dump/dump.c:

	init_document_options(): Clear the struct. This hopefully fixes the
	mess I created in the last couple of patches.  

Sat Sep 27 11:40:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, viewer/dump/dump.c:

	Rename mk_document_options() to init_document_options() and move
	more code shared by dump and text viewer to it. Doing memset() (in
	the light of zeroing out padding bytes, sorry I overlooked this) is
	on the TODO list but this causes problems that has to be fixed
	first.  

Sat Sep 27 11:27:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated and .po files were resynced.  

Sat Sep 27 00:32:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Make boolean fields more visible and drop the bogus blame of @xw and
	@yw.  

Fri Sep 26 23:06:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/: options.c, options.h:

	Rearrange members of struct document_options so compare_opt() can be
	divided into a part compared using memcmp() and a part (from
	@framename) that need special or no comparing. This is very
	experimental but padding bytes should not be a problem since
	document_options are allocated via document allocation using
	mem_calloc()! 

Fri Sep 26 22:12:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	English style issues fixed in s-i-t-l dialog :-).  

Fri Sep 26 21:42:14 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6.CVS 

Fri Sep 26 21:39:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre6 

Fri Sep 26 21:36:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fix http://lists.pld-linux.org/ - Host: header sending was broken if
	URL contained : and IPv6 support was compiled in. Patch by Jakub
	Bogusz and me.  

Fri Sep 26 21:18:05 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added nest elinks pool RPM binaries link (more up-to-date), as
	suggested by witekfl.  

Fri Sep 26 21:16:04 2003  Petr Baudis <pasky@ucw.cz>:

	* po/uk.po:

	Ukrainian translation update, patch by Dmitry.  

Fri Sep 26 21:13:50 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files resynced, Polish translation update (by witekfl).  

Fri Sep 26 21:07:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	Add generalization TODO item and reformat.  

Fri Sep 26 21:05:02 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Specify further in which cases should the macro initializers be used
	;-).  

Fri Sep 26 20:58:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Reverted zas' introduction of INIT_STON() and relatives. It is IMHO
	unnecessary complication and overhead for such a simple and fairly
	localized structure as strtonum is.  

Fri Sep 26 20:39:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Always propagate the event + removed useless increasing of length in
	call to memacpy().  

Fri Sep 26 19:59:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Output asterisks instead of ¤ in case of unknown unicode values.
	That character is not ASCII nor transliterated to proper terminal
	codepage.  

Fri Sep 26 19:57:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Always propagate the event.  

Fri Sep 26 19:05:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Some preachment about EHS_LAST and how shouldn't you use it.  

Fri Sep 26 18:32:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Fixed namespace pollution. You guys will never learn, will you? 

Fri Sep 26 18:28:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/ttime.h, util/ttime.h:

	Do not include config.h in a .h file! What was I *smoking*?? This
	fixes compilation w/ --enable-own-libc. You wouldn't guess, would
	you? ;-) 

Fri Sep 26 17:44:42 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about wrapping hard struct initializations was added.  

Fri Sep 26 17:35:44 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, config/kbdbind.c,
	document/html/parser.c, document/html/parser.h:

	Various hard initializations to macros conversion.  

Fri Sep 26 16:56:14 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	use *_MENU_ITEM macros.  

Fri Sep 26 15:50:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/vs.c:

	Strange english fix.  

Fri Sep 26 15:49:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Grammar fix.  

Fri Sep 26 14:00:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	Add TODO to EXTRA_DIST.  

Fri Sep 26 12:56:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Be a little smarter and pre allocate the last menu item by calling
	mem_align_alloc() with 'size + 2'.  

Fri Sep 26 12:51:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Print ¤¤¤¤¤ instead of &#24505;&#24213;&#20837;&#38272;. Unicode
	entities values are now handled up to 0xFFFFFFFF.  

Fri Sep 26 12:36:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Remove temporary workaround for tab completion bug fixed in last
	patch.  

Fri Sep 26 12:33:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	Fix ancient bug by reallocationg items before the last memset(). Zas
	discovered this yesterday. It was exposed by the move to using
	mem_align_alloc() with more than 256 items in gotohist.  

Thu Sep 25 23:35:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Bug found...  

Thu Sep 25 21:47:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add some probably useless MRU mechanism and fix some whitespasms.  

Thu Sep 25 21:08:17 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	Use intermediate variables to clarify code.  

Thu Sep 25 20:52:31 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Use widget and widget_data intermediate variables to clarify code.  

Thu Sep 25 20:13:19 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/tables.c, globhist/dialogs.c:

	Ending spaces fix.  

Thu Sep 25 19:54:39 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	struct event -> struct term_event. No more.  

Thu Sep 25 19:50:40 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: form.c, form.h, link.c, link.h, textarea.c,
	view.c, view.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:45:49 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: event.c, kbd.c, terminal.c, window.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:44:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Fix get-proxy hook bug from last patch.  

Thu Sep 25 19:37:05 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, session.c, session.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:32:17 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/timer.c, osdep/os_dep.c, osdep/osdep.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:26:56 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:21:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, bfu/hierbox.c,
	bfu/hierbox.h, dialogs/hierbox.c, dialogs/hierbox.h:

	struct event -> struct term_event. More ...  

Thu Sep 25 19:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Correctly handle propagation in the get-proxy hook.  

Thu Sep 25 19:17:33 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, inphist.c, listbox.c, menu.c:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 19:11:33 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/event.h, terminal/terminal.h, terminal/window.h,
	bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h,
	bfu/widget.h:

	struct event -> struct term_event. A macro INIT_TERM_EVENT was added
	to replace hard initializations of current struct event.  

Thu Sep 25 18:53:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Cleanup and make the get-proxy handler propagate the event when an
	error occurs.  

Thu Sep 25 18:44:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/TODO:

	For now only one comment by pasky but please feed more ideas to this
	file.  

Thu Sep 25 17:08:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/core.c:

	It is guile_scripting_backend instead of lua_scripting_backend! 

Thu Sep 25 16:56:06 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Ooops, forgot some and made an error, fixed.  

Thu Sep 25 16:43:50 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/hotkey.c:

	Make use of enum hotkey_state values instead of hardcoded integer
	values.  

Thu Sep 25 16:42:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Rearrange and reduce the number of variables passed to
	pre-format-html.  

Thu Sep 25 16:39:43 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	*MENU_ITEM macros are now used everywhere in this file.  

Thu Sep 25 16:25:29 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hotkey.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c:

	ignore_hotkey field was renamed hotkey_state and is now an enum.
	Macros were introduced to wrap struct menu item initializations.
	Transition partly done.  

Thu Sep 25 16:08:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Cleanup.  

Thu Sep 25 16:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Some forgotten str_event_code() calls was changed to just return
	EHS_* code.  

Thu Sep 25 16:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt, src/sched/session.c, src/scripting/guile/hooks.c,
	src/scripting/lua/hooks.c:

	Next step in jonas' insane and untested scripting hacks. Minimize
	the number of variables passed to goto-url and follow-url events.  

Thu Sep 25 15:48:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_(goto|follow_url(): Be more strict and propagate the
	event if an error occurs. Only set @new_url if the hook function
	returns smt. valid.  

Thu Sep 25 15:25:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Explicitly use EHS_* and return EHS_NEXT without modifying.  

Thu Sep 25 14:59:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Bring the code back to look and work as the
	original one.  

Thu Sep 25 14:55:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Alphabetize #includes 

Thu Sep 25 14:29:04 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	Use an enum instead of an int for edit dialog type and remove
	obsolete BM_ in macros.  

Thu Sep 25 14:17:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Improve descriptions.  

Thu Sep 25 01:05:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Really really rename newurl to new_url in goto_url_with_hook().  

Thu Sep 25 00:50:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:46:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Weed out comments that are covered by doc/events.txt or not relevant
	anymore.  

Thu Sep 25 00:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Rename variables and change hooks function for goto-url and
	follow-url to act like the original ones.  

Thu Sep 25 00:38:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	A few renames and changes to support the original scripting hook
	interface when handling goto-url and follow-url.  

Thu Sep 25 00:36:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/events.txt:

	Describe the scripting events in use.  

Tue Sep 23 20:30:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: scripting.c, scripting.h, guile/core.c,
	guile/core.h, lua/core.c, lua/core.h:

	Further backend the scripting subsystem by introducing struct
	scripting_backend. Only handles init/done calls and hook management.  

Tue Sep 23 19:25:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/Makefile.am:

	libscripting.a is not a noinst_LTLIBRARIES so s/LT//. ;) 

Tue Sep 23 18:44:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, scripting/scripting.c, scripting/scripting.h:

	Introduce generic scripting setup and teardown functions that just
	call the backends.  

Tue Sep 23 15:03:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/Makefile.am:

	Deltize libscripting.a. *shudder* Sick from you, Jonas! ;-) 

Tue Sep 23 14:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.c:

	Attribute comment to me.  

Tue Sep 23 14:17:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Minor tidyup.  

Tue Sep 23 14:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h:

	Event hook handler is now covered by type event_hook.  

Tue Sep 23 14:03:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/event.c, sched/event.h, scripting/scripting.h,
	scripting/lua/hooks.c:

	Event hooks return {enum evhook_status}.  

Tue Sep 23 13:53:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/event.h:

	Tiny regrouping.  

Tue Sep 23 08:40:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/scripting.c:

	Fix scripting hook registration. Most events don't exist so create
	them.  

Tue Sep 23 08:30:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Make the scripting goto_url_* functions work when no scripting hooks
	are registered.  

Tue Sep 23 07:36:11 2003  Laurent Monin <zas@norz.org>:

	* src/Makefile.am:

	Linking failure due to libscripting introduction was fixed.  

Tue Sep 23 00:47:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/guile/: core.c, hooks.c, hooks.h:

	Use generic hook registration. (define untested-and-uncompiled true) 

Tue Sep 23 00:45:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/: core.c, hooks.c, hooks.h:

	Use generic hook registration.  

Tue Sep 23 00:45:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: Makefile.am, scripting.c, scripting.h:

	Add generic functionality for registering hooks.  

Tue Sep 23 00:05:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_pre_format_html(): Cleanup. Please test since I am not
	that big a lua extension user.  

Mon Sep 22 23:59:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_get_proxy(): Cleanup.  

Mon Sep 22 23:52:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	script_hook_follow_url(): Cleanup.  goto_url_w(): Always use @newurl
	but test if non NULL.  

Mon Sep 22 23:49:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): More streamlining.  

Mon Sep 22 23:34:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Always use @newurl and test if it is non NULL in
	goto_url_with_hook().  This greatly simplifies the lua
	script_hook_goto_url().  

Mon Sep 22 23:19:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_quit(): Cleanup.  

Mon Sep 22 23:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	Oops missed one t.h.i.n.g to keep the flow intact although all these
	"" seems pretty pointless.  

Mon Sep 22 23:02:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/hooks.c:

	script_hook_goto_url(): Cleanup.  

Mon Sep 22 22:21:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix problem reported by David Gómez where openssl was disabled when
	calling configure with --without-gnutls.  

Mon Sep 22 22:00:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Note who to blame for the event system.  

Mon Sep 22 21:54:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: scripting/lua/core.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h, main.c, scripting/guile/core.c,
	scripting/guile/core.h, scripting/guile/hooks.c,
	scripting/guile/hooks.h:

	Move guile hooks to the event system. --Karsten Schölzel 

Mon Sep 22 21:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, protocol/proxy.c:

	Use the event system to call the scripting hooks, calling
	set_event_id() to get rid of unnecessary event id lookups. --Karsten
	Schölzel 

Mon Sep 22 21:46:19 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	One byte memleak was fixed. Cleanup and optimization of
	shrink_dns_cache().  

Mon Sep 22 19:45:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.h:

	Safer macro definition for set_event_id().  

Mon Sep 22 18:41:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Remove useless #includes. Patch by kuser.  

Mon Sep 22 18:37:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.h:

	Introduces set_event_id(event, name) macro. --Karsten Schölzel 

Mon Sep 22 16:35:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Call done_event in terminate_all_subsystems as late as possible to
	make the event system usable in cleanup stage. --Karsten Schölzel 

Mon Sep 22 16:23:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add variable declaration needed by the last patch.  

Mon Sep 22 16:21:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Move out the known mime type strings to a structure that can be
	looped.  Use assertion and cleanup so we don't leak.  

Mon Sep 22 15:44:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	new_form(): Use one byte less when allocating the url.  

Mon Sep 22 15:39:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/error.c:

	get_err_msg(): Minor optimization and allocate one byte less.  

Mon Sep 22 15:31:11 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	One byte memleak was fixed.  

Mon Sep 22 15:25:24 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	More one-byte memleaks fixed. Please review this one carefully ;) 

Mon Sep 22 15:15:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	sizeof(struct frame_desc) bytes memleak was fixed.  

Mon Sep 22 15:10:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	One byte memleak fixed.  

Mon Sep 22 15:08:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Rename free_mimetype_entry() to done_... + allocate
	mimetype_entry->extension with the entry and save a few bytes.  

Mon Sep 22 15:06:49 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	One byte memory leak was fixed.  

Mon Sep 22 14:59:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	We already allocate mailcap_entry->command with the entry. Make it
	'official' and save a few bytes. ;) 

Mon Sep 22 14:59:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: inphist.c, inphist.h:

	One byte memory leak was fixed.  

Mon Sep 22 14:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	1 byte is already reserved for cmd_buffer in struct
	ftp_connection_info, so no need to allocate it. I think there is
	some other places with the same minor issue (well, 1 byte memory
	leak per allocation), please help me to fix them.  

Mon Sep 22 14:22:35 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c, http/date.c:

	Previous bug was cutnpasted to date.c, fixed. Small month2num()
	wrappers are now inlined.  

Mon Sep 22 14:14:37 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	A stupid bug introduced by month2num() patch was fixed. Now ftp
	should work as usual ;).  

Sun Sep 21 14:47:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inphist.c, globhist/dialogs.c,
	osdep/os_dep.c, osdep/osdep.c, sched/session.c, terminal/draw.c,
	terminal/tab.c, terminal/window.c, util/base64.c, util/error.c,
	util/hash.c, viewer/text/form.c, viewer/text/view.c:

	Trivial whitespace fixes.  

Sun Sep 21 14:13:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	More whitespace fixes.  

Sun Sep 21 14:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.h:

	Fix whitespace.  

Sun Sep 21 13:01:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	Comment about the need to pass lowercased strings to month2num() was
	added.  

Sun Sep 21 13:00:12 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/date.c, protocol/ftpparse.c,
	protocol/ftp/ftpparse.c, util/conv.c, util/conv.h:

	month2num() was introduced, and is now used in protocol/http/date.c
	and protocol/ftpparse.c.  

Sun Sep 21 12:35:25 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was even more optimized.  

Sun Sep 21 12:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month(): got rid of these useless break.  

Sun Sep 21 12:24:43 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/date.c:

	parse_month() was optimized.  

Sun Sep 21 12:02:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: date.c, date.h:

	char -> unsigned char, my_timegm() now takes a pointer to a struct
	tm as parameter.  

Sun Sep 21 11:24:48 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Cleanup and harmonisation: handle errors at end of functions.  

Sun Sep 21 11:08:11 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	l_current_url() code was simplified.  

Sun Sep 21 10:48:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep 21 00:15:27 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	I've got such associations: c - text/html spec - text/plain 
	
	but elinks recognize .spec as .c and display as html.  This patch
	"repair" it. In addition dot.in.middle.c like names should be
	handled correctly, too.  -- Witold Filipczyk tohu-bohu 
	<witekfl@poczta.gazeta.pl> 

Sun Sep 21 00:12:31 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Cleanup.  

Sat Sep 20 12:05:30 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	Compilation bug under Cygwin was fixed. Patch by Witold.  

Fri Sep 19 22:30:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Add dummy shadow.text option. This was causing get_bfu_color() to
	fetch a non existing option. Reported by darix.  

Fri Sep 19 15:41:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	I am in a maze with passages all alike .. and this cut'n'paste error
	is haunting me.  

Fri Sep 19 15:37:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	invalid_event_id(): Test == EVENT_NONE last since last will not be
	used in current code, but it protects against bad thing if
	EVENT_NONE becomes > 0 for some reason as zas pointed out.  

Fri Sep 19 15:33:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Oops cut'n'paste error in last patch spotted by kuser.  

Fri Sep 19 15:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/event.c:

	Rebounding cleanup.  

Fri Sep 19 14:43:43 2003  Laurent Monin <zas@norz.org>:

	* src/sched/event.c:

	Short lines were "compressed" a bit, make use of event variable name
	everywhere, make use of register attribute, cleanup,
	invalid_event_id() inlined function was added.  

Fri Sep 19 14:09:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use TERM_STRING() and friends for the underline sequences.  

Fri Sep 19 13:55:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce TERM_STRING() and add_term_string() to simplify the
	frame_seq handling.  

Fri Sep 19 13:48:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	This might be a bit abusive. Use mem_align_alloc() to cleanup link
	point setup.  

Fri Sep 19 13:14:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, sched/Makefile.am, sched/event.c, sched/event.h:

	Shiny new event system by kuser .. spiced up with comments by pasky
	and me.  

Thu Sep 18 19:04:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Removed trailing newlines ;-).  

Thu Sep 18 13:07:11 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, terminal/tab.c, terminal/tab.h,
	terminal/window.h, viewer/text/view.c:

	Mouse click detection was improved and fixed regarding variable-size
	tabs, get_tab_number_by_xpos() function was added.  

Thu Sep 18 12:33:10 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Distribute remaining spaces among all tabs, and draw last tab
	correctly. Issue reported by Miciah.  

Wed Sep 17 15:43:22 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Ooops, fix for stupid thing in last patch ;).  

Wed Sep 17 15:32:02 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Auth dialog was badly formatted. We now consider sticker text width
	before drawing it.  

Wed Sep 17 01:30:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/charsets.c:

	convert_string(): Fix potential leak.  

Wed Sep 17 01:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Purge mem_gralloc() and grmask(). IMHO the idea of aligned
	allocation much more straight forward than the ALLOC_GR ``oriented''
	so I hope this is ok.  Move ALLOC_GR and comment the alignment mask.  

Wed Sep 17 01:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Use mem_align_alloc().  

Wed Sep 17 00:02:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	format_text(): Use mem_align_alloc().  

Tue Sep 16 23:57:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	get_searched(): Use mem_align_alloc().  

Tue Sep 16 23:54:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	encode_multipart(): Use mem_align_alloc().  

Tue Sep 16 23:38:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	do_html_select(): Use mem_align_alloc().  

Tue Sep 16 23:33:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	add_chr(): Use mem_align_alloc().  

Tue Sep 16 23:27:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/inphist.c:

	do_tab_compl(): Use mem_align_alloc(). Never tried it before ..
	great feature! :) 

Tue Sep 16 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Use mem_align_alloc() for bad html mem. management.  

Tue Sep 16 18:25:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_table_frames(): Simplification.  

Tue Sep 16 18:11:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Add missing assertion handling.  

Tue Sep 16 18:08:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Rename: [HV]_LINE_X() -> [HV]_FRAME_POSITION() ... or should we
	static inline it all? 

Tue Sep 16 18:00:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup [HV]_LINE_X() macros to bug via an assertion instead of via
	the cruel *(unsigned char *)NULL.  

Tue Sep 16 14:58:53 2003  Laurent Monin <zas@norz.org>:

	* src/util/: hash.c, hash.h:

	Allocate hash and hash->hash in one time, X31 strhash() was
	optimized by unrolling the loop, some variables are now unsigned int
	instead of int, general cleanup.  

Tue Sep 16 00:04:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Slightly more elegant fix.  

Mon Sep 15 23:24:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix input field off by one bug.  

Mon Sep 15 22:41:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Minor code diet using memset() instead of for loops.  

Mon Sep 15 22:18:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Since item->l = w, int_bounds(rw, item->l, w) is is useless.  

Mon Sep 15 21:30:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Remove unused macros.  

Mon Sep 15 21:29:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Tidyup.  

Mon Sep 15 21:28:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	Blast off xset_hchar() and use xset_hchars() instead. Less is more
	;) Finally abuse that xset_[hv]chars() are specialized for table
	border drawing so there's no need to pass the bgcolor (hint
	par_format.bgcolor) and the attribute.  

Mon Sep 15 21:25:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): Store [HV]_LINE_X() lookups in local variables
	and general cleanup.  

Mon Sep 15 21:23:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_[hv]line(): Cleanup, use BORDER_* enums, add asserts." 

Mon Sep 15 21:14:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Move static variables inside the user functions.  

Mon Sep 15 21:13:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	See? It's all an illusion.  

Mon Sep 15 21:11:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_vline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:11:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_hline(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:10:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	draw_frame_point(): morphed to be static inline instead of a macro.  

Mon Sep 15 21:08:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Assert @charslen.  

Mon Sep 15 21:02:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	display_table_frames(): Store table frame pointers in an array and
	allocate space in one snap.  

Mon Sep 15 20:57:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Propagate the _table_ arg all the way down the frame drawing macro
	hell. If you see any variables named 'term' it is an illusion ;) ...
	Hmm apparently some whitespace clashing that makes the patch
	slightly bigger.  

Mon Sep 15 20:50:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Use macros to simplify the trivial code and make adding new term
	options easier.  

Mon Sep 15 20:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Bug fix: put_chars() asserts chars != NULL and put_chars_conv() call
	it with chars == NULL. Instead assert that charslen != 0.  

Mon Sep 15 20:45:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewy(): Cleanup (and a compile fix for free).  

Mon Sep 15 20:44:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	in_viewx(): Cleanup and variable renaming.  

Mon Sep 15 20:43:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_current_link(): Rename variables.  

Mon Sep 15 20:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, view.c:

	done_link_members(): Added. Free()s the link members.  

Mon Sep 15 20:40:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	set_link(): Cleanup.  

Mon Sep 15 20:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Add macro abstraction for clearing color.  

Mon Sep 15 20:30:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Purge INIT_SCREEN_CHAR().  

Mon Sep 15 20:29:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area(): Rewritten to not use INIT_SCREEN_CHAR().  

Mon Sep 15 20:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_text(): Use last char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:27:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix bad merging.  

Mon Sep 15 20:24:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Allocate an extra link_bg element to work on to avoid
	local variables.  

Mon Sep 15 20:23:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use first char as template and abandon
	INIT_SCREEN_CHAR() usage.  

Mon Sep 15 20:22:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Use local variable instead of multiple POS().  

Mon Sep 15 20:19:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Doh! The patch monkey climped the wrong tree. Revert part of last
	patch. :( 

Mon Sep 15 20:17:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	set_hchars(): Abandon usage of INIT_SCREEN_CHAR().  

Mon Sep 15 20:17:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Don't use local variable for initialization but the
	last char.  

Mon Sep 15 20:14:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Wipeout SLEN().  

Mon Sep 15 16:59:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce a link state type and get_link_state(). It is called
	before doing any link handling (the old way) and takes care of
	free()ing old link variables etc.  This patch fixes
	test/tabindex.html which have been broken for a long time since the
	old code didn't take the #targets into account. Sorry for taking so 
	long to fix this.  

Mon Sep 15 14:23:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	No need to allocate one byte for nul char, l was renamed to loc.  

Mon Sep 15 14:15:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:11:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 14:09:20 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Use memacpy() instead of stracpy() since we have length. Use loc
	name for location instead of l.  

Mon Sep 15 14:06:19 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Use memacpy() instead of stracpy() since we have length.  

Mon Sep 15 13:54:01 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Use vs->url_len instead of strlen(vs->url).  

Mon Sep 15 13:40:32 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Field url_len from struct view_state was not used as it should be.
	Fixed.  

Sun Sep 14 03:03:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/listbox.c:

	Add EMACS-style ^A, ^E, ^N, ^P, ^V, and Alt-V and Vi-style ^F and ^B 
	key bindings to listboxes.  

Sun Sep 14 02:15:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c, uri.c, uri.h:

	Encode links in file: listings, and decode them when following a
	file: link.  This is slightly slower, uses slightly more memory, and
	required that I reënable the decode_uri_string function, but is more
	correct and robust.  

Sun Sep 14 01:04:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/: dump/dump.c, text/vs.c:

	Only mem_alloc and memset sizeof(struct view_state) + strlen(url), 
	not sizeof(struct view_state) + strlen(url) + 1: struct view_state
	has unsigned char url[1], so the extra space necessary for the null
	terminator is already there, included in the sizeof(struct
	view_state).  
	
	This fixes the bug whereby ELinks overflow memory when displaying a
	file of an unrecognised type. It also saves a byte(!) of memory when
	-dump is used.  

Sat Sep 13 23:23:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Starting ELinks with -no-home specified make ELinks die on entering
	a site with forms. The attached patch solves the problem with
	elinks_home being NULL. Patch by Karsten Schölzel.  

Sat Sep 13 21:32:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	Move some variable declarations closer to where the variables are
	used.  

Sat Sep 13 21:25:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/document.c:

	loc_msg: Check the return value of ctime(). Use a constant instead
	of calling strlen() on the string returned by ctime(). Add comments.
	Bleh.  

Sat Sep 13 06:55:55 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	One can now recursively collapse or expand a folder in a
	hierarchical listbox using '-', '_', or '[' (collapse) or '+', '=',
	or ']' (expand). This closes bug 37 (until pasky reverts the patch).  
	
	I used gotos because: 
	 - similar code elsewhere uses gotos (of course there are TODOs; 
	   in that code indicating a desire to eliminate those gotos...) 
	 - they make the code more efficient, shorter, and thus--IMO--easier
	 to read; 
	- they bug pasky and Jonas.  
	
	Zas will love me, pasky will hate me, and Jonas will be ticked until
	I remind him about ui.colors.color.tabs.loading.{text,background}.  

Sat Sep 13 05:03:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Mangling pattern those JavaScript URLs on allmusic.com.  

Sat Sep 13 04:58:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Typo fix.  

Sat Sep 13 04:57:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Smartprefixes for the Open Directory Project and Cambridge's
	dictionary.  

Sat Sep 13 04:50:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	Allow lambdas for smartprefixes, and add three examples. I'm a bit
	proud of the CVSweb smartprefix, and less proud of the Debian
	package contents smartprefix and Gmane.org smartprefix. They all are
	a bit hackish, tho.  

Sat Sep 13 04:41:08 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* contrib/lua/hooks.lua.in:

	New dumb- and smartprefixes, and updated URL for the 'dict'
	smartprefix (the old URL still works, but as it forwards to the new
	URL, we might as well use the new URL in the first place).  

Sat Sep 13 00:51:56 2003  Laurent Monin <zas@norz.org>:

	* src/util/memory.c:

	Inline is a non sense here -> dropped.  

Sat Sep 13 00:32:32 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/stub.c, osdep/stub.h, util/stub.c, util/stub.h:

	Two headers were added to ease compilation with dietlibc.  

Sat Sep 13 00:30:48 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/loadmsgcat.c:

	Use of caddr_t type was dropped for simpler (void *) casts in
	loadmsgcat.c.  

Fri Sep 12 23:41:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	Ooops, off by one error ;).  

Fri Sep 12 23:37:16 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/location.c, viewer/text/vs.c, viewer/text/vs.h:

	A field url_len was added to struct view_state, and an assertion in
	copy_vs() now protects against bad things.  

Fri Sep 12 23:23:35 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	A note about an overflow risk was added in copy_vs().  

Fri Sep 12 22:49:57 2003  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/vs.h, sched/session.h:

	It seems safer to move struct view_state at end of struct frame,
	copy_vs() called from copy_location() let us think there s a risk to
	corrupt redirect_cnt.  

Fri Sep 12 22:22:24 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: download.c, download.h:

	Minor cleanup.  

Fri Sep 12 22:00:20 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some variables declarations were moved near their use.  

Fri Sep 12 21:46:46 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some code from download_window_function() was moved to new functions
	download_progress_bar() and download_progress_string().  

Fri Sep 12 21:40:33 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Fri Sep 12 21:14:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: sched/download.c, util/error.h:

	Add a do_not_optimize_here_gcc_3_x() macro and use it instead of
	do_not_optimize_here_gcc_3_3() in tp_display(). This works around a
	bug that I experience with GCC 3.2.3-6 on Debian whereby ELinks 
	crashes when I tell it to display a file of an unknown file-type.  

Fri Sep 12 20:59:52 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Stupid Miciah forgot to commit src/config/options.c, which actually
	adds the ui.colors.color.tabs.loading.{text,background} options.
	Thanks, zas! No more black tabs.  

Fri Sep 12 18:51:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	New ui.colors.color.tabs.loading.{text,background} options: Colours
	for tabs that are loading in the background.  
	
	I have this vague memory of pasky telling to commit only small
	changes, passing larger patches by him before committing; or maybe
	it was all just a beautiful dream... I'm hoping just now that it was
	the latter.  

Fri Sep 12 15:15:05 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Use int_max() instead ... ;) Thanks to Jonas.  

Fri Sep 12 12:56:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some stains do not appear anymore, thanks to Jonas. Minor
	optimizations by me.  

Fri Sep 12 10:48:39 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c,
	dialogs/document.c, dialogs/mime.c, mime/dialogs.c,
	protocol/http/header.c, scripting/guile/hooks.c, ssl/ssl.h,
	terminal/screen.c:

	Whitespace fixes.  

Fri Sep 12 10:40:21 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Some of download_data() code was moved to new
	write_cache_entry_to_file() and set_file_download_win_handler().
	Tidyup.  

Wed Sep 10 19:23:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_spaces() with realloc_spaces() and use granular
	allocation.  

Wed Sep 10 19:15:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_line() with realloc_line().  realloc_line() now calls
	realloc_lines().  Use X() and Y() macros to get the canvas position.  

Wed Sep 10 18:43:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge xpand_lines() with realloc_lines().  

Wed Sep 10 18:12:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, util/memory.h:

	Make the granular allocation code generic.  

Wed Sep 10 16:06:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Introduce ALIGN_LINK().  

Wed Sep 10 15:49:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Minor cleanup remove useless assignments.  

Wed Sep 10 14:40:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Switch @from and @to macro names. Some say it is more correct ;) 

Wed Sep 10 14:10:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link navigation bug introduced in 1.250.  

Wed Sep 10 08:16:25 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Use a variable to save a few calls to current_frame() in
	print_screen_status().  

Wed Sep 10 06:06:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Eliminate some superfluous #includes.  
	
	When I suggested, made, and forgot to commit this change a few
	months ago, pasky had this comment: 
	
	20:21:10< pasky> Miciah: i'd not be against reducing it to
	                 ssl/ssl.h, as long as you will make clear in the log message that
			 pasky wishes this not to become a precedent and such things MUST be 
			 considered on case-by-case basis 20:21:35< pasky> i really don't
	                 want to see a flood of "removed redundant includes from ABC, it is
	included by XYZ as well" 

Wed Sep 10 03:41:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Add TODO about how to avoid last_* variables allocation and freeing.  

Wed Sep 10 03:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	new_link(): Use format.form instead of last_form.  

Wed Sep 10 03:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Merge link initialization from process_link() into new_link().  

Wed Sep 10 00:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup dir_sep() trimming.  

Wed Sep 10 00:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cut the b33p and just access @first_use directly.  

Wed Sep 10 00:33:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	Cleanup.  

Wed Sep 10 00:26:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Move directory testing to test_confdir(). Inspired by
	kuser.  

Wed Sep 10 00:04:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): No need to allocate config_dir. Inspired by kuser.  

Tue Sep  9 23:32:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/home.c:

	get_home(): Split out path_to_exe directory name extraction to
	elinks_dirname(). Patch by kuser.  

Tue Sep  9 21:57:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	move_links(): Cleanup indentation.  

Tue Sep  9 21:52:52 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/draw.c, viewer/text/view.c:

	Cursor positionning was fixed regarding block_cursor option.  

Tue Sep  9 21:33:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link numbering.  

Tue Sep  9 21:16:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Cleanup and optimize whitespace trimming.  

Tue Sep  9 20:46:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move up and call get_format_screen_char() from set_hline().
	Simplifies put_chars().  

Tue Sep  9 20:19:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Last patch fixed handling of <a href="foo">123<sup>456</sup>789</a>.
	:) 

Tue Sep  9 20:07:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	A bit experimental patch moving link processing after the
	set_hline() and the format changing. Passes fm! ;) 

Tue Sep  9 19:45:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Simplify the format change handling code. It is now done in
	get_format_screen_char() returning a pointer to a template
	screen_char 

Tue Sep  9 19:07:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Move sub/super state variables closer to user.  

Tue Sep  9 18:58:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Whitespace fixes.  

Tue Sep  9 18:00:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:53:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Minor cleanup.  

Tue Sep  9 17:50:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/screen.c, viewer/text/link.c:

	Use copy_screen_chars() macro.  

Tue Sep  9 17:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h:

	Introduce copy_screen_chars() macro to wrap memcpy()s.  

Tue Sep  9 13:11:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	An issue related to weird html links was fixed. It was revealed by
	an assertion failure when accessing to
	http://www.etla.org/articles/filter/.  

Tue Sep  9 10:52:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A useless label was removed in parse_element(), minor cleanup.  

Tue Sep  9 10:11:55 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Slightly improved get_attr_val() performance by moving some tests
	outsided loops (especially if (found) test)), gain is 25% mininum
	compared to previous code.  

Mon Sep  8 23:16:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	do_document_refresh(): Check if any type query is in progress and if
	it is for the same url bail out.  

Mon Sep  8 22:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, terminal/color.c, terminal/draw.c,
	terminal/draw.h, terminal/screen.c, terminal/screen.h,
	viewer/text/link.c:

	Revert the last 3 hours of patches from me. This stuff needs more
	thought.  

Mon Sep  8 21:16:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	set_term_color(): Bail out if !d_opt.  

Mon Sep  8 21:07:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/options.c, document/options.h,
	document/html/renderer.c, terminal/screen.c, terminal/screen.h:

	Add color_size to the document option structure.  

Mon Sep  8 20:54:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Add (kindof) support for the color array.  

Mon Sep  8 20:37:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix spurious redraws because of bad color comparison.  

Mon Sep  8 19:24:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/draw.c, terminal/draw.h, terminal/screen.c,
	viewer/text/link.c:

	Make the screen_char color an array. This will be necessary when
	moving towards support for 256. The patch contains a few hacks for
	when a local screen_char stack variable are needed because the color
	array can have various sizes. Also set_hline() is now responsible
	for making the format change in the renderer.  

Mon Sep  8 17:27:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix set_term_color() type.  

Mon Sep  8 15:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Oops fix comment.  

Mon Sep  8 15:43:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	Encapsulate the fg and bg color levels + drop 8 from
	set_term_color8().  

Mon Sep  8 15:22:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.h:

	Move comment about color encoding to header.  

Mon Sep  8 15:10:16 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Minor optimizations (mainly tests reordering and intermediate
	results caching).  

Mon Sep  8 12:32:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor cleanup and optimization in format_frames().  

Sun Sep  7 21:41:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	get_system_name(): Use snprintf() it's simpler and zas said I should
	do it. ;) 

Sun Sep  7 21:03:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sysname.c:

	Cleanup of get_system_name(). Now code dependant to popen() has its
	own function, some useless memset() were removed, struct utsname
	extraction do not use memory allocation (and free) anymore, some
	gotos are gone, and some hidden awful little bugs were added.  

Sun Sep  7 20:23:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tiny tidyup.  

Sun Sep  7 20:09:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/signals.c:

	Ooops, sizeof(struct signal_info) -> sizeof(signal_info) ;).  

Sun Sep  7 20:04:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: signals.c, signals.h:

	Signals handling code was simplified, struct signal_handler and
	signal_mask have been replaced by struct signal_info and is no more
	exported.  

Sun Sep  7 19:13:22 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	get_system_str() minor optimization and cleanup.  

Sun Sep  7 18:11:38 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/cache.h:

	This is a pure test, some time ago fields reorganization in struct
	cache_entry caused some issues, it doesnt seem to cause any problem
	know. So i moved fields and let see.  

Sun Sep  7 11:12:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation update by Witold.  

Sun Sep  7 11:08:56 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	A bug in truncate_entry() was fixed, a useless call to enlarge() has
	now some use, fixing a minor memory leak it seems. Some
	optimizations were made by caching some constant results.  

Sun Sep  7 00:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix <hr> drawing + minor cleanup of last patch.  

Sun Sep  7 00:10:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	I keep redoing the same patch over and over again. This time code is
	actually removed, it's slightly less hackish and adding support for
	xterm256 will hopefully be easier since a screen char is now passed
	to the color blender which btw is now renamed to set_term_color8().  

Sat Sep  6 22:50:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	Improve comments with help from Dickey's scripts.  

Sat Sep  6 22:33:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, palette.inc:

	Use the included palette16.  

Sat Sep  6 22:27:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/palette.inc:

	For the 16, 88 and 256 color palettes.  

Sat Sep  6 21:02:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Shit. Jonas pointed out that ITU copyright doesn't permit us to
	actually include that SGR 38 documentation. I think we have right to
	quote from it but let's stay safe :/.  

Sat Sep  6 20:36:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Eliminate an assignment that was made superfluous by a change in
	revision 1.180 of src/viewer/text/view.c.  

Sat Sep  6 20:33:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Added documentation of the mysterious SGR 38 (thanks to deltab
	again). It is precious and valuable enough to live in the source
	:-).  

Sat Sep  6 19:48:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_link_number(): Split out from process_link().  

Sat Sep  6 19:45:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	process_link(): Cleanup.  

Sat Sep  6 19:37:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Split out the whole process_link goto ``snask'' (Danish
	word for uncertain mixed things) into separate process_link()
	function.  

Sat Sep  6 15:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	Cleanup and require that @attr != NULL.  

Sat Sep  6 15:44:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/color.c, terminal/color.h, terminal/draw.h,
	terminal/screen.c, viewer/text/link.c:

	Move the check of wether to use inverse sequence in mono mode to
	color blending.  The flag used is a new SCREEN_ATTR_STANDOUT
	inspired by vim. This makes it possible to really make links
	standout in mono mode so navigation is improved.  

Sat Sep  6 15:29:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, viewer/text/link.c:

	6.5 on the richter^H^Hack scale. Propagate attributes up from the
	color blender.  

Sat Sep  6 15:09:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/draw.c, terminal/kbd.c,
	viewer/text/link.c:

	Unify the color handling into one function get_term_color8().  

Sat Sep  6 10:44:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Minor update. (Why are this sooooo boring ;) 

Sat Sep  6 10:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Cosmetic changes by Witold.  

Fri Sep  5 22:44:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated. po files were resynced.  

Fri Sep  5 21:29:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Put the static int @loaded local to load_saved_forms().  

Fri Sep  5 21:18:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/formhist/formhist.c:

	Don't call base64_decode with an empty string. This fixes an
	assertion failure when a saved form field is blank.  

Fri Sep  5 20:33:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/options.c:

	Expand the description for the document.browse.refresh option.  

Fri Sep  5 17:55:43 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Test for @url and @name parameters were added to
	get_form_history_value() to prevent bad things (like a segfault).
	Issue reported by Jonas.  

Fri Sep  5 13:40:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Support for html meta refresh. Patch by Witold and me.  

Fri Sep  5 13:25:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_special(): Cleanup.  

Fri Sep  5 12:02:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	doc_end_load(): Cleanup.  

Fri Sep  5 10:47:27 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Heh, we still have some. links -> ELinks.  

Fri Sep  5 09:41:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	French translation was updated, .po files were resynced.  

Fri Sep  5 02:01:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.h:

	Update comment.  

Fri Sep  5 01:19:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_border_cross(): Use BORDER_* enums in the lookup table.  

Fri Sep  5 00:29:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Tidyup + rename rgb_cache_entry->l to level.  

Fri Sep  5 00:17:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): No need to poison the cache since @level
	should always be > 0.  

Thu Sep  4 23:33:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/pl.po:

	Polish translation updated by Witold 

Thu Sep  4 19:05:46 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sending TWIN and XWIN sequences seems to make the thing work well at
	least with xterm, rxvt, linux console. Please test in other env. if
	it still works. Screen should be restored at exit, and mouse should
	always work as usual.  

Thu Sep  4 18:16:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Reduce the document line granularity. This maybe needs more tuning
	and/or only enabled for big documents.  

Thu Sep  4 18:14:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/options.c:

	Fix the document option comparison that was causing the extra memory
	usage. :P 

Thu Sep  4 16:58:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/memory.h:

	Fix grmask error. But how could it work before? 

Thu Sep  4 14:42:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Issue concerning alternate screen handling and xterm/rxvt was fixed,
	i hope.  

Thu Sep  4 14:14:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	send_term_sequence() -> send_done_sequence() 

Thu Sep  4 12:31:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/options.c, modules/version.c,
	sched/session.h, util/version.c:

	Information is like water, there is no plural.  
	
	-- Witold Filipczyk tohu-bohu <witekfl@poczta.gazeta.pl> 

Wed Sep  3 23:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h:

	Change the color encoding so the bold bit is now between bg and fg
	bits making it much simpler.  Adjusting of fg when bg == fg is now
	(more correctly) done using a fg_color[] lookup.  

Wed Sep  3 22:43:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove strange (bg & 0x02) and use make the foreground color bold if
	fg == bg.  This means that fg color will _always_ be visible (so I
	guess this is a bug fix).  

Wed Sep  3 22:34:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.h, terminal/screen.c:

	Update comments and move ``generic option cache'' TODO to better
	place..  

Wed Sep  3 22:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/form.c:

	Option document.browse.forms.show_formhist was added. It turns
	on/off the forms history dialog. Please improve description in
	options.c. Feature requested by Jonas.  

Wed Sep  3 22:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix a stupid bug: next <-> prev error.  

Wed Sep  3 22:05:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/options.c, terminal/screen.c:

	Update screen_drivers change_hook style.  

Wed Sep  3 21:17:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, terminal/screen.c, terminal/screen.h:

	Dynamically allocate screen drivers ... getting ready for
	change_hook updating.  

Wed Sep  3 20:14:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Silence gcc 3.3.* warnings even for --disable-debug builds.  

Wed Sep  3 16:21:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Do not use fmem_alloc() since using alloca() (fastmem only) prevents
	the function to be inlined.  

Wed Sep  3 16:15:30 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A segfault produced at exit in normal or fastmem mode was fixed. Why
	does it work with --enable-debug and segfault in other modes? 

Wed Sep  3 16:03:11 2003  Laurent Monin <zas@norz.org>:

	* src/util/: snprintf.c, snprintf.h, string.c, string.h:

	Changes were made to be able to compile ELinks with -Winline flag.
	Some functions were not inlined as it should. A bit hacky so feel
	free to improve.  

Wed Sep  3 12:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, config/cmdline.c:

	elinks -dump <somefile and elinks -dump - <somefile are now
	accepted. It works with -source too.  

Wed Sep  3 09:27:22 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor code simplification.  

Wed Sep  3 09:24:21 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Use url_size ;).  

Wed Sep  3 09:22:25 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	forget_forms_with_url() was introduced. It replaces previous
	get_form_with_url() + a loop.  

Tue Sep  2 21:21:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5.CVS 

Tue Sep  2 21:14:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre5 

Tue Sep  2 21:13:32 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	Updated po files.  

Tue Sep  2 21:11:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Minor update.  

Tue Sep  2 20:27:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Adding prefilled screen_drivers. If not for speed they make the
	defaults clearer.  

Tue Sep  2 19:54:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	init_screen_driver(): Moved and group with the screen driver struff.  

Tue Sep  2 19:47:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optim.  

Tue Sep  2 19:33:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Comments members of struct screen_driver.  

Tue Sep  2 19:25:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup UTF8 I/O and move most logic to init_screen_driver().  

Tue Sep  2 19:02:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Generalize adding of frame sequences when changing frame state.  

Tue Sep  2 18:39:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Handle ``frame char translation'' genericly depending on
	screen_driver->frame.  

Tue Sep  2 18:26:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge fill_option_cache() and get_frame_table() into
	init_screen_driver().  

Tue Sep  2 16:20:24 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/uri.c:

	Minor optimizations.  

Tue Sep  2 14:04:58 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	A useless list initialization was removed. Reported by Jonas.  

Tue Sep  2 14:01:00 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Goto fail is better ;) Spotted by Jonas.  

Tue Sep  2 13:55:01 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Allocate space for url + struct formhist_data in one time.  

Tue Sep  2 13:42:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Move screen_state->frame to the screen_driver.  

Tue Sep  2 13:38:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: opt_cache -> driver.  

Tue Sep  2 13:37:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Last bits of formhist fix.  

Tue Sep  2 13:32:55 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.h, formhist.c:

	Form history was fixed. Major tidyup. Please report any issue, all
	previous versions have some bad bugs and design errors.  

Mon Sep  1 23:59:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Always do two fg_color[] adjustments like in the old code.  

Mon Sep  1 23:53:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Can't sleep before this is done. Revert bogus patch that caused
	visited links and many other things to be drawn wrong.  

Mon Sep  1 23:31:12 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Code cleanup. Code redundancy was reduced. A potential memleak was
	fixed.  

Mon Sep  1 22:44:46 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forget_form() is now used.  

Mon Sep  1 21:11:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Revert fg_color[] white/bright white change that I applied to cure
	symptoms of terminal color bugs.  

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: rs_opt_cache -> screen_driver 

Mon Sep  1 20:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Do fg_color correction before applying attribute color enhancements.  

Mon Sep  1 20:46:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix link color mixing to be as in 0.5pre4.  

Mon Sep  1 20:38:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Moved format_change put_chars() fragment into separate function
	put_chars_format_change().  

Mon Sep  1 20:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Code cleanup and reordering. Statification. It fixes some issues
	with formhist feature. Formhist dialog do not pop up twice anymore,
	and multiple identical entries in formhist should not occur anymore.  

Mon Sep  1 20:16:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, viewer/text/link.c:

	Fix hovering of links to be like pre4 (even though always having
	bold links is more readable IMHO).  

Mon Sep  1 19:38:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/color.c:

	Fixed !allow_dark_on_black brokenness when lookup in the xlat
	(@fg_color) table didn't reflect bold attribute being set. As a
	result, the behaviour slightly deviated from the correct 0.5pre4 one
	and there were dark colors on dark backgrounds. Fix based on
	cooperation with jonas :-).  

Mon Sep  1 19:32:27 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Fix: comparaison failed because test order was inverted, having for
	effect to return false on form_already_saved() call. There are some
	bugs left.  

Mon Sep  1 13:17:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Use int_bounds().  

Mon Sep  1 13:13:32 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, form.c, link.c:

	Use int_bounds().  

Mon Sep  1 13:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, terminal/draw.c:

	Use int_bounds().  

Mon Sep  1 13:02:46 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, document/html/tables.c:

	Use int_bounds().  

Mon Sep  1 12:59:06 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c, dialogs/edit.c,
	bfu/hierbox.c, dialogs/hierbox.c, dialogs/mime.c, mime/dialogs.c:

	Use int_bounds().  

Mon Sep  1 12:55:33 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/default.c, config/dialogs.c:

	Use int_bounds().  

Mon Sep  1 12:52:25 2003  Laurent Monin <zas@norz.org>:

	* src/: elinks.h, bfu/button.c, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c:

	int_bounds() was introduced, it replaces int_lower_bound(&x, a) and
	int_upper_bound(&x, b) with int_bounds(&x, a, b), and should be
	faster.  

Mon Sep  1 12:35:10 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Optimization: struct widget_data *dlg_item = &dlg->items[dlg->n -
	1]; 

Mon Sep  1 12:15:57 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	Trivial optimization, cache dlg->n - 1.  

Sun Aug 31 22:49:07 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, leet.po,
	lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Sun Aug 31 22:27:03 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Aug 31 22:21:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Sync with options in 0.5pre4.CVS 

Sun Aug 31 22:14:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix --(config|long)-help color printing.  

Sun Aug 31 19:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, screen.c:

	Handling of underlining is now fully optional and hopefully with
	minimal overhead [two tests in print_char()].  

Sun Aug 31 17:28:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Draw underlines based on the terminal option.  

Sun Aug 31 17:24:19 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Aug 31 17:20:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h, draw.h, screen.c:

	Replace TERM_COLOR_BOLD with SCREEN_ATTR_BOLD.  

Sun Aug 31 17:03:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/options.c:

	Make terminal underline option appear in the terminal options
	dialog.  

Sun Aug 31 17:03:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix terminal restrict_852 description and add underline optinos.  

Sun Aug 31 15:51:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Cleanup the use negative image testing + only init @underline when
	appropriate.  

Sun Aug 31 13:07:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Fix color encoding comment.  

Sun Aug 31 12:51:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Merge INT2RGB() into HASH_RGB() and use INIT_RGB() if we have to
	calculate distance.  

Sun Aug 31 12:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	Generalization via macros.  

Sun Aug 31 10:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Use memacpy() in copy_string().  

Sun Aug 31 10:30:23 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	xstrcmp() optimization.  

Sun Aug 31 09:29:51 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/color.c:

	Profiling and optimization of find_nearest_color(), measured
	improvment is significative. Perhaps we can optimize a bit more by
	merging INT2RGB() and HASH_RGB() in this functions.  

Sun Aug 31 09:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	Code optimization in redraw_screen(), memcmp() call was removed,
	tests were optimized in the 2 levels loop.  

Sun Aug 31 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Completely rewrite the color encoding into one function. There's
	still some dark corners that don't make sense to me maybe someone
	can hit me with a cluebat? 

Sun Aug 31 00:19:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Transmorphed into just the foregroud color lookup table.
	Comments updated.  

Sun Aug 31 00:13:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.h, screen.c:

	Add comments and #define for bold rendering.  

Sat Aug 30 20:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Comment the color encoding and try to simplify it (not used yet).  

Sat Aug 30 19:36:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Change octal numbers to hex.  

Sat Aug 30 11:32:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, protocol/file.c, protocol/ftp.c,
	protocol/file/file.c, protocol/ftp/ftp.c:

	A few cleanups of color option handling.  

Sat Aug 30 11:08:14 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.c:

	dlg_set_history() was reworked.  

Sat Aug 30 08:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Reverted trivial simplification, it causes a segfault when accessing
	terminal options, and IMHO, is not faster nor more readable.  

Sat Aug 30 01:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Get rid of hardcoded colors and use status.status-text instead.  
	Also don't initialized @fgcolor of unused leds but fallback to
	default.  

Sat Aug 30 00:27:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: leds.c, leds.h:

	Updated to use the current color handling and terminal drawing.
	Colors are badly hardcoded.  

Sat Aug 30 00:06:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Add TODOs and small cleanup.  

Fri Aug 29 23:57:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	color_distance(): Fix braindamaged off by 4 error from last patch.  

Fri Aug 29 23:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Update comments and remove test of color arg since it is assert()ed.  

Fri Aug 29 23:28:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	Due to the change moving color mangling out of print_char() drawing
	of frame lines now requires that a color_pair is specified. Make all
	helpers take this color arg.  

Fri Aug 29 23:27:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Explain in the source why altscreen isn't used for xwin.  

Fri Aug 29 23:06:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	Fixed bug 244, compilation failures caused by expansion of 'format'
	tokens (#define'd at document/html/parser.h). Reported by Felix von
	Leitner <felix@fefe.de>.  

Fri Aug 29 21:39:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	Trivial simplification.  

Fri Aug 29 21:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/: formhist.c, formhist.h:

	Moved descriptions of public functions to the header file.  

Fri Aug 29 21:27:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	A small patch making rendering of tables more correct. Some pages
	might look a lot different. E.g. www.linux.org has some strange
	coloring in the bottom while but /. is much better.  

Fri Aug 29 21:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Comments cleanup.  

Fri Aug 29 21:21:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.c:

	Normalize (+ minor reindentation and tiny cleanup).  

Fri Aug 29 21:18:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/formhist/formhist.h:

	Normalize.  

Fri Aug 29 21:03:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	Fixed invalid negation in (my?) comment.  

Fri Aug 29 18:18:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Use INIT_COLOR_PAIR() wrapper.  

Fri Aug 29 17:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	Remove legacy code and check @dump_pos only in mix_attr_color().  

Fri Aug 29 17:28:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.c:

	color_to_string(): Use %06x fragment for converting the @color.  

Fri Aug 29 15:41:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cache intermediate results even more, misc. cleanups and
	optimizations.  

Fri Aug 29 15:08:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Cleanups and optimizations.  

Fri Aug 29 14:38:30 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Use int_[upper|lower]_bound().  

Fri Aug 29 14:30:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Use a temporary variable to prevent useless calculation, populate
	with int_max()/int_*/bound().  

Fri Aug 29 14:29:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	Use a temporary variable to prevent useless calculation.  

Fri Aug 29 14:09:17 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Various minor optimizations, populate with int_max() and
	int_[upper|lower]_bound().  

Fri Aug 29 12:16:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	find_nearest_color(): Rename l -> level.  

Fri Aug 29 11:50:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): Always add ' ' as fall back.  

Fri Aug 29 11:39:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Use memcmp() for exact matching.  

Fri Aug 29 11:31:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Cleanup the frame table handling to be more generic.  

Fri Aug 29 11:16:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/color.c,
	terminal/color.h, terminal/screen.c:

	Move the terminal color handling out of document/html/renderer.* and
	into terminal/color.* this way find_nearest_color() and fg_color() 
	can be static inline'd but the real benifit is the last chunk that 
	moves 3 lines of code outside print_char() which (at least in
	profiling) gives a small boost or said another way it doesn't hurt
	performance! ;) 
	
	The numbers: 
	
	  %   cumulative   self              self     total 
	 time   seconds   seconds    calls  ms/call  ms/call  name 
	  9.5       6.14     1.73  9142934     0.00     0.00  print_char
	  [27] 8.2       7.58     1.53  9107494     0.00     0.00 
				   print_char [29] ^^^^^^^ This must be because redraw_screen() can
	more correctly compare colors.  (btw. the case is scrolling up and
	 down twice on a page cat'd from 20 /. pages and a page of all debian
	unstables packages. 776 subpages) 

Fri Aug 29 11:13:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Make the ``mostly used'' string utils inlined.  

Fri Aug 29 09:47:05 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Many minor optimizations and cleanups. Some old staled code was
	removed. Speed was significantly improved since 0.5pre4.  

Fri Aug 29 04:40:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/menu.c:

	mainmenu_func(): Don't propagate the event when calling
	delete_window_ev(). Fixes bug 33.  

Fri Aug 29 03:33:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, viewer/text/view.c:

	draw_border_char(): Check @color before mixing it. Fixes bug 242.  

Thu Aug 28 23:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* SITES:

	*.pld.org.pl -> *.pld-linux.org 

Thu Aug 28 19:48:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	cookies.max_age description cleanup. Changed default to -1 (no
	preset deadline for the poor little cookies), unless someone will
	come with a sound reason for keeping it upon 1 year. (IMHO file
	growth is not an issue..) 

Thu Aug 28 19:43:13 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Reduce overflow risk to zero and drop some comments.  

Thu Aug 28 19:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Commenting on possible buffer overflow at forcehtml_cmd().  

Thu Aug 28 19:28:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	assertm() 

Thu Aug 28 19:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/frames.c:

	Massive grammar fixes in comment introduced in rev 1.8 and bound the
	workaround to bug 237.  

Thu Aug 28 19:17:47 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp tidyup and slight mostly cosmetical altering of the output.
	If fancy, then fancy. ;-) 

Thu Aug 28 18:17:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Major optimization in get_searched(), use tolower() and pre-lowered
	string comparaison instead of expensive strncasecmp(). Some
	arithmetic operations were moved out of loops, cleanup.  

Thu Aug 28 17:29:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Add missing snprintf.h #include.  

Thu Aug 28 17:22:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, intl/gettext/dcigettext.c,
	intl/gettext/l10nflist.c, intl/gettext/loadmsgcat.c,
	intl/gettext/localealias.c:

	#include the stubs via elinks.h. Makes elinks compile on FreeBSD
	again.  

Thu Aug 28 17:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/l10nflist.c:

	Remove useless pop() declaration.  

Thu Aug 28 17:01:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Add missing #include.  

Thu Aug 28 17:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/loadmsgcat.c:

	source_tree_filename(): Cleanup and rename to
	add_filename_to_string().  

Thu Aug 28 16:40:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/link.c:

	Typo fix in comment.  

Thu Aug 28 09:19:50 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Aug 28 09:00:38 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	fr.po space fix.  

Wed Aug 27 16:23:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Make @used, @spanned and @b members boolean.  

Wed Aug 27 16:03:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	struct table_cell: Remove useless variables.  

Tue Aug 26 23:52:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/color.c:

	fg_color(): Instead of using brightwhite on white use brightgrey.
	Improves /.  

Tue Aug 26 23:35:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	copy_chars(): Use memcpy().  

Tue Aug 26 23:23:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Fix compile error.  

Tue Aug 26 23:14:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_vchars(): Use memcpy().  

Tue Aug 26 23:10:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hline(): Move test outside the loop.  

Tue Aug 26 23:04:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line() + set_hchars(): Use memcpy().  

Tue Aug 26 12:50:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Typo fix.  

Tue Aug 26 12:40:19 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Minor cleanup.  

Tue Aug 26 09:35:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	Generic cleanup.  

Mon Aug 25 23:52:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	encode_color(): Remove in favor of mix_color_pair().  

Mon Aug 25 22:32:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_area() showed up as a real show stopper in profiling so lets
	try with a nu scheme: Draw first line and memcpy() the rest of the
	area from this.  

Mon Aug 25 22:22:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_line(): Use memcpy().  

Mon Aug 25 22:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Small optimization.  

Mon Aug 25 21:25:37 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Mon Aug 25 12:04:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, cookies/cookies.c:

	An option for control of max. age of cookies was added
	(cookies.max_age). It permits to control expiration of cookies: no
	check(old behavior), always expires at session end, or limit to a
	number of days (default is 365 days). Idea by Miciah and me.  

Mon Aug 25 07:28:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Readd the inlined code documentation. Requested by Miciah.  

Mon Aug 25 06:56:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	struct line: Remove @bgcolor since par_format.bg is always used.  

Mon Aug 25 02:46:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	inline and loose seq_len() macro.  

Mon Aug 25 02:45:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/hardio.c:

	Trival blackspace fix.  

Mon Aug 25 02:44:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/color.h:

	typedef uint32_t color_t.  

Mon Aug 25 02:43:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/event.c:

	assert on !list_empty instead of list.next.  

Sun Aug 24 20:26:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	write_sequence(): Macro that wraps the hard_write().  

Sun Aug 24 14:30:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/kbdbind.c, config/kbdbind.h, config/options.c,
	viewer/text/view.c:

	toggle-document-colors action added. Activator defaults to '%'.  

Sun Aug 24 13:57:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Oops somebody didn't test and compile before committing. ;( 

Sun Aug 24 13:55:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Tidyup of comments.  

Sun Aug 24 13:35:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Empty the color cache when a switch between a mono and color term is 
	detected. Fixes lookups of wrong colors and reduces the memory
	usage.  

Sun Aug 24 12:01:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Alternate term screen handling seems to be incompatible with mouse
	handling in X, i disabled support for alt screen under X for now.
	Mouse clicks are partially ignored if we use alt screen and ie.
	xterm, but it works on linux console. Miciah please have a look at
	that. ;) 

Sun Aug 24 02:54:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/link.c:

	Store link color as struct color_pair.  

Sun Aug 24 02:53:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: color.c, color.h:

	mix_colors(): Rename to mix_color_pair().  

Sun Aug 24 02:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Expand color info to also include option tree pointers to the
	colors.  This way the colors can be updated for each lookup.  

Sun Aug 24 00:32:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	Merge alternate screen support; fixes bug 28.  

Sat Aug 23 18:24:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, sched/session.c, viewer/text/link.c,
	viewer/text/view.c, viewer/text/vs.c:

	struct document: Remove @frame and just test @frame_desc instead.  

Sat Aug 23 18:18:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	struct document: Remove unused @time_to_get.  

Sat Aug 23 18:17:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, viewer/text/view.c, viewer/text/view.h:

	Merge do_for_frame() and menu_for_frame().  

Sat Aug 23 18:16:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	frm_download(): Move and make static.  

Sat Aug 23 18:15:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, view.c, view.h:

	decrement_fc_refcount(): Move and rename s/fc/document/.  

Sat Aug 23 18:14:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.h:

	Regroup and comment prototypes + correct #includes.  

Sat Aug 23 18:11:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Cleanup and merge print_current_title() and print_current_titlex().  

Sat Aug 23 18:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	clear_formatted() + destroy_formatted(): Merged to done_document().  

Sat Aug 23 17:54:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, viewer/text/view.c,
	viewer/text/view.h:

	init_document(): Introduced.  

Sat Aug 23 17:45:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	cached_format_html(): Lots of renames.  

Sat Aug 23 17:34:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	realloc_line[s](): Cleanup and remove unneeded variables from struct
	line.  

Sat Aug 23 16:53:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, document/html/renderer.h:

	Tidyups.  

Sat Aug 23 16:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/style.c, bfu/style.h, bfu/text.c, bfu/text.h, config/dialogs.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/search.c, viewer/text/view.c:

	struct screen_color: Replace with color_pair.  

Sat Aug 23 16:33:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/style.c, config/options.c, config/options.h,
	config/opttypes.c, document/options.c, document/options.h,
	document/html/Makefile.am, document/html/colors.c,
	document/html/colors.h, document/html/frames.c,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c,
	terminal/Makefile.am, terminal/color.c, terminal/color.h,
	terminal/draw.c, terminal/draw.h, util/Makefile.am, util/color.c,
	util/color.h, viewer/text/link.c:

	Split color handling.  

Sat Aug 23 16:03:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	put_chars(): Handle @attr the same way as colors; Cache it.  

Sat Aug 23 15:52:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/tables.c:

	Cleanup draw_frame_*() macros.  

Sat Aug 23 15:18:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchars(): Make @bgcolor argument a color_t pointer. When
	shifting and aligning NULL can now be used to signal that the
	original bgcolor should used which means no stains when
	use_document_colors = 2.  

Sat Aug 23 15:08:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	xset_hchar(): Cleanup.  

Sat Aug 23 15:07:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_hchar(): Only used by xset_hchar() so they were merged.  

Sat Aug 23 15:06:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Propagate @bgcolor to set_hchar*.  

Sat Aug 23 10:59:36 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Limit expiration date to one year from now, in set_cookie(). Is this
	ok ?.  

Sat Aug 23 10:41:58 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Loading/saving of expired cookies was disabled, especially whose
	that should expire with the session, please review, i am still
	unsure about the good behavior...  

Sat Aug 23 06:37:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	html_form_control(): Fix big leak from prev patch. (merge ;) 

Sat Aug 23 06:19:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h:

	struct part: Remvoe the @uf member. It was used to trash form
	controls and we migth as well free the controls if there's no
	document.  

Sat Aug 23 06:18:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/form.c, viewer/text/form.h, viewer/text/view.c:

	destroy_fc(): Move and rename to done_form_control().  

Sat Aug 23 06:15:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	Cleanup macros.  

Sat Aug 23 05:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/terminal.c:

	init_term(): Cleanup and fix a possible leak. (merge) 

Sat Aug 23 05:43:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Revert some bogus patches. Somebody must've been sleeping ... :( 

Sat Aug 23 04:54:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Moved things to style.* 

Sat Aug 23 04:46:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Merge small optimization in link drawing from ELUSION.  

Sat Aug 23 04:44:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, config/opttypes.c,
	document/options.c, document/options.h, document/html/colors.c,
	document/html/colors.h, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	document/html/tables.c, protocol/file.c, protocol/ftp.c,
	protocol/file/file.c, protocol/ftp/ftp.c, terminal/draw.c,
	terminal/draw.h, viewer/dump/dump.c, viewer/text/link.c,
	viewer/text/view.c:

	Merge color_t introduction from ELUSION. Contains patches from 6th
	to 8th of August.  

Sat Aug 23 04:42:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/style.c:

	Compilation fix.  

Sat Aug 23 04:33:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: style.c, style.h:

	The missing link in the bfu color handling.  

Sat Aug 23 03:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, bfu/Makefile.am, bfu/button.c, bfu/button.h,
	bfu/checkbox.c, bfu/dialog.c, bfu/dialog.h, bfu/group.c,
	bfu/hierbox.c, bfu/hotkey.c, bfu/inpfield.c, bfu/inpfield.h,
	bfu/listbox.c, bfu/listbox.h, bfu/menu.c, bfu/msgbox.c,
	bfu/msgbox.h, bfu/text.c, bfu/text.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, protocol/auth/dialogs.c, document/html/frames.h,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c, sched/download.c,
	sched/session.c, scripting/lua/core.c, terminal/draw.c,
	terminal/draw.h, viewer/text/form.c, viewer/text/link.c,
	viewer/text/search.c, viewer/text/textarea.c, viewer/text/view.c:

	Merge bfu color handling from ELUSION. This is a patchset of ELUSION
	patches applied between 3rd and 6th of August.  

Sat Aug 23 03:05:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/search.c:

	Fix useless adjustments of the view positions when searching. Thanks
	ElectricElf ;) 

Sat Aug 23 01:27:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Merge misc. cleanups from ELUSION.  

Sat Aug 23 01:01:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.c, terminal/draw.h,
	terminal/screen.c:

	Merge underline support in the lowest terminal layer from ELUSION.  

Sat Aug 23 00:01:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/codepage.inc:

	The fixed thingy from last patch.  

Fri Aug 22 23:46:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix tr usage (part II ;) .. though there still a bug I think because
	spaces are removed from strings? 

Fri Aug 22 21:43:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Unicode/gen-cp:

	Fix `tr' usage so "VISCII 1.1" (spaces in aliases) are handled
	correctly.  

Fri Aug 22 15:13:17 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Forms history feature now saves forms in ~/.elinks/formhist file
	instead of ~/.elinks/password, just move it to new name before
	starting elinks to update.  

Fri Aug 22 15:07:47 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/: formhist.c, formhist.h:

	Various variables were renamed, a potential memleak fixed, minor
	cleanup.  

Fri Aug 22 10:38:50 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Minor cleanup and bugfixes (potential memleaks).  

Fri Aug 22 10:11:04 2003  Laurent Monin <zas@norz.org>:

	* src/formhist/formhist.c:

	Tidyup and sscanf() replacement.  

Thu Aug 21 14:55:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memory.h, string.c:

	grmask() and mem_gralloc() macros were introduced to simplify
	granular allocation code.  

Thu Aug 21 14:29:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Partial fix for bug 237.  

Thu Aug 21 13:06:47 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore, Unicode/.cvsignore, contrib/.cvsignore,
	contrib/guile/.cvsignore, contrib/lua/.cvsignore, doc/.cvsignore,
	doc/book/.cvsignore, doc/book/config/.cvsignore,
	doc/book/info/.cvsignore, doc/book/intro/.cvsignore,
	doc/book/manpages/.cvsignore, doc/man/.cvsignore,
	doc/man/man1/.cvsignore, doc/man/man5/.cvsignore, intl/.cvsignore,
	po/.cvsignore, src/.cvsignore, src/bfu/.cvsignore,
	src/bookmarks/.cvsignore, src/bookmarks/backend/.cvsignore,
	src/config/.cvsignore, src/cookies/.cvsignore,
	src/dialogs/.cvsignore, src/document/.cvsignore,
	src/document/html/.cvsignore, src/formhist/.cvsignore,
	src/globhist/.cvsignore, src/intl/.cvsignore,
	src/intl/gettext/.cvsignore, src/lowlevel/.cvsignore,
	src/mime/.cvsignore, src/mime/backend/.cvsignore,
	src/osdep/.cvsignore, src/protocol/.cvsignore,
	src/protocol/http/.cvsignore, src/sched/.cvsignore,
	src/scripting/.cvsignore, src/scripting/guile/.cvsignore,
	src/scripting/lua/.cvsignore, src/ssl/.cvsignore,
	src/terminal/.cvsignore, src/terminal/graphics/.cvsignore,
	src/terminal/text/.cvsignore, src/util/.cvsignore,
	src/viewer/.cvsignore, src/viewer/dump/.cvsignore,
	src/viewer/graphics/.cvsignore, src/viewer/text/.cvsignore,
	test/.cvsignore:

	*.swp files (temporary vim files) are now ignored by cvs.  

Thu Aug 21 13:03:54 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/renderer.c,
	intl/charsets.c, intl/charsets.h, viewer/text/form.c:

	Attempt to fix &nbsp&nbsp bug without reintroducing bug 213. Please
	review for side effects.  

Thu Aug 21 07:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Another base64_decode() fix, ending nul is now added... Thanks to
	Zardoz.  

Wed Aug 20 11:11:44 2003  Laurent Monin <zas@norz.org>:

	* Unicode/gen-cp, src/intl/codepage.inc:

	gen.cp was improved, so we get fancier codepage.inc. Please review
	for portability issues.  

Wed Aug 20 10:10:31 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Cleanup and optimizations.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.h:

	file splash.h was initially added on branch ELUSION.  

Tue Aug 19 16:37:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/splash.c:

	file splash.c was initially added on branch ELUSION.  

Tue Aug 19 11:45:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files and french translation were updated.  

Tue Aug 19 07:26:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	A stupid bug was fixed, patch by Zardoz.  

Mon Aug 18 19:46:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	The first two fixes keep old form data around and avoid crashing on
	null value fields.  
	
	The last fix is my crude attempt to delete forms in and outside of
	lists without underflow/overflow. There should probably be a
	free_list_with_callback version that calls a per-element freer on
	each list member to reduce the number of times that lists are freed
	incorrectly.  
	
	Patch by Zardoz.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.c:

	file canvas.c was initially added on branch ELUSION.  

Sun Aug 17 14:49:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/canvas.h:

	file canvas.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.h:

	file splash.h was initially added on branch ELUSION.  

Sun Aug 17 11:08:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/splash.c:

	file splash.c was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.h:

	file refresh.h was initially added on branch ELUSION.  

Sun Aug 17 01:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/refresh.c:

	file refresh.c was initially added on branch ELUSION.  

Sat Aug 16 23:41:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	'Fix' narrow edit dialogue boxes again (bug 158).  I fixed this
	before but Zas reverted that fix with src/dialogs/edit.c 1.35: 
	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.c, util/colors.c:

	file colors.c was initially added on branch ELUSION.  

Sat Aug  9 01:52:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/colors.h, util/colors.h:

	file colors.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.h:

	file display.h was initially added on branch ELUSION.  

Wed Aug  6 23:08:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/display.c:

	file display.c was initially added on branch ELUSION.  

Tue Aug  5 01:12:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	Minor tidyups.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 20:38:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.h:

	file display.h was initially added on branch ELUSION.  

Mon Aug  4 19:49:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/display.c:

	file display.c was initially added on branch ELUSION.  

Mon Aug  4 19:32:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	I am rolling form memory back to where it was before I messed it up.
	Only a few renames + memorize_form() in formhist/ remains. I have
	kept my changes in the ELUSION branch where I will be doing most of
	my patches from now on. If I get it fixed we can merge it later.  

Mon Aug  4 18:54:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/frames.c:

	Tidyup.  

Sun Aug  3 04:55:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c, renderer.h,
	tables.c:

	Last big nasty patch separating screen_char color and attr. Is this
	a bad solution: In order for html_hr() to put out border_chars, an
	extra argument for passing around the char attributes is missing so
	I added it to put_ch*r*.  

Sun Aug  3 03:44:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, document/html/renderer.c, terminal/draw.c,
	terminal/draw.h, terminal/screen.c, viewer/text/link.c,
	viewer/text/view.c:

	Another big nasty patch ;-P ... A stepping stone towards separating
	color and attribute in struct screen_char ... which will make us
	able to support more attributes like underline.  

Sun Aug  3 00:15:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Stranded renaming bits.  

Sat Aug  2 20:20:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Revert something that was not supposed to have been commited.  

Sat Aug  2 20:17:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, util/string.c:

	memorize_form(): Possible fix for determining whether to save the
	form values.  

Sat Aug  2 20:05:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Some weird bug forces me to do this weird thing.  

Sat Aug  2 19:03:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	#define FORM_HISTORY_FILENAME.  

Sat Aug  2 18:58:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Do like globhist and be more careful about @elinks_home.  

Sat Aug  2 18:20:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	write_form_history(): Introduced. Now add_form_history_item() just
	marks the history dirty. We can always add save timer like globhist
	later.  

Sat Aug  2 18:10:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	remember_form(): Rename to add_form_history_item() and use the given
	@item purging unwanted submitted values instead of allocating new
	ones.  

Sat Aug  2 17:57:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.h:

	Add more comments.  

Sat Aug  2 17:50:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	init_form_history_item(): Introduced. We now allocate url and item
	in one chunk.  

Sat Aug  2 17:31:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	read_item_submit_list(): Introduced to make init_form_history()
	simpler. Now we even close the file when bailing out.  

Sat Aug  2 17:16:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	get_saved_control_value(): Renamed to get_form_history_value().
	Comment moved to header.  

Sat Aug  2 17:03:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Make @form_history static.  

Sat Aug  2 17:02:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Move done_form_history().  

Sat Aug  2 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.c:

	Use ~/.elinks/formhist as filename.  

Sat Aug  2 16:03:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	Rename: @saved_forms -> @form_history, load_saved_forms() ->
	init_form_history().  

Sat Aug  2 15:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.c:

	done_form_history_item(): Rename @form -> @item.  

Sat Aug  2 15:51:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, formhist/formhist.c, formhist/formhist.h:

	Rename: free_formsmemory() -> done_form_history().  

Sat Aug  2 15:46:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	Rename: free_form() -> done_form_history_item() and make it private.  

Sat Aug  2 15:39:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/: formhist.c, formhist.h:

	Removed private'' functions from header and made them static.  

Sat Aug  2 15:35:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: Makefile.am, formhist/formhist.c, formhist/formhist.h,
	viewer/text/form.c:

	memorize_form(): Move to formhist/. Link in correct archive. ;) 

Sat Aug  2 15:22:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): No need to free the form controls just return NULL
	and let get_form_url() will do it.  

Sat Aug  2 15:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/formhist/formhist.o:

	Oops this one shouldn't have been added. Sorry.  

Sat Aug  2 15:03:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: formhist/formhist.c, formhist/formhist.h,
	formhist/formhist.o, viewer/text/form.c:

	Rename: struct formsmem_data -> struct form_history_item.  

Sat Aug  2 14:59:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/Makefile.am, src/main.c,
	src/formhist/.cvsignore, src/formhist/.vimrc,
	src/formhist/Makefile.am, src/formhist/formhist.c,
	src/formhist/formhist.h, src/formhist/formhist.o,
	src/viewer/text/form.c:

	s/formsmem/formhist/ 

Sat Aug  2 08:42:26 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Only create arrays once.  

Fri Aug  1 22:19:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.h, screen.h:

	Move struct screen_char.  

Fri Aug  1 21:56:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	memorize_form(): Init the @fm_data->submit list.  

Fri Aug  1 21:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	base64_decode(): Fix warning: comparison is always false due to
	limited range of data type.  

Fri Aug  1 20:55:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A bug introduced in my last patch was fixed, we want lower_bound
	instead of upper_bound... ;).  

Fri Aug  1 20:22:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Re-implementation of base64_decode(), to prevent usage of strchr()
	which may return NULL on bad chars, causing bad things. New version
	should detect errors. Adapted from a public domain source code.  

Fri Aug  1 19:37:20 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup.  

Fri Aug  1 19:35:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	No need to allocate the submit list_head.  

Fri Aug  1 18:55:57 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Fix password form detection.  

Fri Aug  1 18:47:02 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Introduced memorize_form() and moved code from get_form_url() to it.  

Fri Aug  1 18:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	fmem_data -> fm_data, since fmem_ prefix is already used elsewhere.  

Fri Aug  1 17:32:15 2003  Laurent Monin <zas@norz.org>:

	* .cvsignore:

	Ignore libtool.  

Fri Aug  1 17:28:36 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/Makefile.am, src/main.c,
	src/modules/version.c, src/util/base64.c, src/util/base64.h,
	src/util/version.c, src/viewer/text/form.c:

	HTML form manager, please improve and tune. Patch by Fabio Bonelli
	and me.  

Fri Aug  1 15:26:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.h:

	Tidyup and a comment update.  

Fri Aug  1 15:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	init_leds(): Knock out last COL() user. Hinted by Zas.  

Fri Aug  1 15:17:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	unregister_led(): Use assertm().  

Fri Aug  1 15:14:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/leds.c:

	Sync'ed with the current drawing code.  

Fri Aug  1 14:59:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, document/html/parser.c, terminal/draw.c,
	terminal/draw.h:

	Purge frame_char and ATTR_FRAME.  

Fri Aug  1 14:46:30 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/ttime.c, util/ttime.c:

	Newline fix.  

Fri Aug  1 14:42:04 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: select.c, signals.c:

	Assertification.  

Fri Aug  1 14:34:56 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Populate with int_[upper|lower]_bound() + assertm().  

Fri Aug  1 14:24:28 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 14:12:34 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c:

	MIN() -> int_min().  

Fri Aug  1 13:58:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:13:06 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/search.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 13:05:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:39:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:32:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:16:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Populate with int_[upper|lower]_bound() and int_max().  

Fri Aug  1 12:03:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:51:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:49:51 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/auth.c, dialogs/hierbox.c,
	dialogs/mime.c, mime/dialogs.c, protocol/auth/dialogs.c:

	Cleanup.  

Fri Aug  1 11:44:36 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	set_char() compilation failure fixed (reported by pekdon).  

Fri Aug  1 11:41:35 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:36:02 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:32:53 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Populate with int_[upper|lower]_bound() and fix a missing bound
	check.  

Fri Aug  1 11:28:45 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:25:37 2003  Laurent Monin <zas@norz.org>:

	* src/config/opttypes.c:

	Do not memcpy() int or long + use int_upper_bound().  

Fri Aug  1 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/default.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:13:44 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, inphist.c, listbox.c,
	menu.c, msgbox.c, widget.c:

	Populate with int_[upper|lower]_bound().  

Fri Aug  1 11:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	assert() was removed. It forces include error.h, and this is a bad
	thing, so no check is done for what == NULL, but it shouldnt be a
	problem.  

Fri Aug  1 11:07:37 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	Use assert().  

Fri Aug  1 10:39:45 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Instead of returning on outbound values, just limit them to valid
	ones, and continue. It makes things nicer with very low terminal
	size.  

Fri Aug  1 10:38:00 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_upper_bound() and int_lower_bound() were introduced.  

Fri Aug  1 10:11:22 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, viewer/text/view.c:

	More int_min().  

Fri Aug  1 09:58:55 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Make use of int_min().  

Fri Aug  1 09:58:16 2003  Laurent Monin <zas@norz.org>:

	* src/elinks.h:

	int_min() and int_max() were introduced, these are better than MIN()
	and MAX() macros, since arguments are only evaluated once, but they
	only work for int type.  

Thu Jul 31 21:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Long line was wrapped.  

Thu Jul 31 21:55:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	frame_trans was made static and moved to set_xchar() body.  

Thu Jul 31 21:48:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Useless startx and starty vars were dropped from fill_area() + minor
	optimizations and whitespaces fixes.  

Thu Jul 31 21:35:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Major cleanup, draw_assert() is gone (sorry jonas), useless
	intermediate variables like screen were removed, correct assertions
	were added, out_of_range(term, x, y) macro is used to check coords
	against term dimensions, position variable is now always the same
	thing.  

Thu Jul 31 17:41:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_assert(): Introduced and just returns if the assertion don't
	hold. Apparently there's some bugs in the dialog code that requires
	more than trivial work. Work that nobody wants to do right now. ;) 

Thu Jul 31 17:29:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c,
	bfu/menu.c, document/html/colors.c, document/html/colors.h,
	document/html/frames.h, document/html/renderer.c, sched/download.c,
	sched/session.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	Remove last sign of color and char ``encoding'' by making also 
	find_nearest_color() return unsigned char and fill_area() take color
	as unsigned char. This patch also purges the get_screen_char_*() and
	COL() macros.  

Thu Jul 31 16:56:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/align.h, bfu/button.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/text.c, bfu/text.h, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c, sched/download.c, sched/session.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/search.c:

	This is a big patch doing mostly trivial stuff.  get_bfu_color():
	return unsigned char. No shifting of the color.  set_char(): Take
	color as unsigned char.  draw_frame(): Take color as unsigned char.  
	print_text(): Take color as unsigned char.  
	
	Sideeffects are that fill_area() (next in line) still needs the
	color shiftet.  

Thu Jul 31 15:46:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	draw_frame(): Tidyup.  

Thu Jul 31 15:40:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Various minor optimizations.  

Thu Jul 31 15:17:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	set_only_char(): Take unsigned char instead of unsigned.  

Thu Jul 31 15:04:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/dialog.c, bfu/inpfield.c, bfu/listbox.c, bfu/menu.c,
	sched/download.c, sched/session.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	fill_area(): Take screen data and attr value separately.  

Thu Jul 31 15:02:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	if () internal() -> assertm().  

Thu Jul 31 14:54:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells(): optimization, do not recalculate cells indexes if
	not needed.  

Thu Jul 31 14:42:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/view.c:

	fill_border_area(): Introduced as macro.  

Thu Jul 31 14:15:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_doc(): Insert sanity check. Bail out if width or height of the
	view is < 2. I don't know why but Zas spotted this. ;) 

Thu Jul 31 09:12:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	try_encoding_extensions: Fix possible infinite loop.  

Thu Jul 31 01:34:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Many minor optizations: bits shift instead of [*/]2, register some
	vars, moved some tests outside loops, reduce number of calls to
	strncasecmp()...  

Thu Jul 31 01:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/menu.c, bfu/text.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c:

	set_chars(): Take screen data and attr value separately.  

Thu Jul 31 00:33:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/listbox.c, bfu/menu.c, terminal/draw.c,
	terminal/draw.h, viewer/text/view.c:

	set_border_char(): Introduced and used instead of set_char(*FRAME*).  

Thu Jul 31 00:23:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	create_frameset(): optimization, only allocate memory if needed.  

Wed Jul 30 23:21:26 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Minor optimization, result of conversion (binary shift) is constant,
	moved outside loops.  

Wed Jul 30 22:41:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.h:

	Typo fix ;).  

Wed Jul 30 21:38:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar(): Remove useless bit operation.  

Wed Jul 30 21:17:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, terminal/draw.h, terminal/screen.c,
	terminal/screen.h, viewer/text/link.c:

	Move screen_char macros.  

Wed Jul 30 20:58:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h:

	Move and add function descriptions to the header file.  

Wed Jul 30 16:14:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchars(): Take screen data and attr value separately.  

Wed Jul 30 16:06:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: renderer.c, renderer.h, tables.c:

	(x)set_hchar(): Take screen data and attr value separately.  

Wed Jul 30 15:18:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_lines(): Cleanup.  

Wed Jul 30 00:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/frames.h, document/html/renderer.c,
	scripting/lua/core.c, terminal/draw.c, terminal/draw.h,
	viewer/dump/dump.c, viewer/text/search.c:

	Replace chr type with struct screen_char.  

Tue Jul 29 23:27:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: frames.h, renderer.c:

	struct line: Rename @c to @color with type unsigned char.  

Tue Jul 29 23:09:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	set_position(): Introduced to wrap POS(x, y) = c.  

Tue Jul 29 22:55:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	realloc_line(): Cleanup.  

Tue Jul 29 22:43:52 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Cleanup and assertions.  

Tue Jul 29 17:53:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	l_current_document_formatted(): Cleanup.  

Tue Jul 29 17:41:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	dump_to_file(): Cleanup.  

Tue Jul 29 15:39:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Oops some missing renames.  

Tue Jul 29 15:34:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/colors.c:

	find_nearest_color(): Rename variables and tidy up.  

Tue Jul 29 09:48:25 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	init_string() was moved after all return NULL, it fixes bug 233.
	Patch by Zardoz.  

Mon Jul 28 22:17:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	print_char(): More SCREEN_ATTR_FRAME usage.  

Mon Jul 28 22:12:54 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	put_chars(): a charslen > 0 assertion filure was fixed.  

Mon Jul 28 21:45:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	get_attr_val(): Use attrlen instead of calling strlen(attr), and
	memchr() instead of strchr().  

Mon Jul 28 20:53:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Some old staled code was removed, and an attempt to optimize a set
	of tests was done (please review).  

Mon Jul 28 20:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	alloc_screen() - rename to resize_screen().  

Mon Jul 28 20:23:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	alloc_screen() - Replaced possible init_screen() call with
	assertion. term->screen is allocated in init_term().  

Mon Jul 28 20:20:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	draw_frame_lines() - Fix assertion failure when calling set_xchar().  

Mon Jul 28 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Optimization of atchr(): isA() is redundant with test (c > ' ' && c
	!= '=' ...) since all chars valid for isA() make this test true and
	since we do isA() || the_test, any char > ' ' and < 'z' is valide
	but '=', '>', '<'. I change that for an optimized test, which match
	4 additionnal chars (> 'z' && < 127). This should not be a problem.  

Mon Jul 28 19:34:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_line_color() - removed.  

Mon Jul 28 19:33:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	set_xchar() - rename variables, use assertion, decrease indentaion.  

Mon Jul 28 19:29:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	erase_screen() - Tidyup.  

Mon Jul 28 17:05:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Old staled code was removed, cleanup and assertification.  

Mon Jul 28 16:43:03 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Assertification and minor cleanup.  

Mon Jul 28 16:18:56 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, sched/session.c, sched/session.h:

	destroy_all_sessions() was removed, since it does nothing.  

Mon Jul 28 16:15:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Indentation and whitespaces fixes, assertification, and some
	optimizations.  

Mon Jul 28 10:14:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, screen.h, terminal.c:

	init_screen() - introduced; fix leak from previous patch.  

Mon Jul 28 10:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rearrange alloc_screen() and move macro #define closer to user.  

Mon Jul 28 09:59:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/draw.h, viewer/text/view.c:

	set_xchar() - Moved to terminal/draw.* 

Mon Jul 28 09:53:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: terminal/draw.c, terminal/screen.c, terminal/screen.h,
	viewer/text/view.c:

	Add and use #define SCREEN_ATTR_FRAME 0x80.  

Mon Jul 28 09:39:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: document/html/renderer.h, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	get_char() - return screen_char position.  set_xchar() - access
	screen_char position directly.  struct link_bg now uses screen_char.  

Mon Jul 28 09:30:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Trivial renames and use of local terminal_screen var.  

Mon Jul 28 09:18:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Fix test of finalized string length.  

Mon Jul 28 09:05:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/session.c, terminal/draw.c, terminal/screen.c,
	terminal/screen.h, terminal/tab.c, terminal/terminal.c,
	terminal/terminal.h:

	Move terminal->dirty inside terminal->screen.  

Mon Jul 28 09:00:26 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Ouch, typo fix: close the comment ;) 

Mon Jul 28 08:57:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Refresh time extraction was added. Not yet used so enclosed in #if
	0/#endif.  

Mon Jul 28 08:51:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Move cursor positioning into struct terminal_screen. Also resulted
	in a little renaming in redraw_screen().  

Mon Jul 28 08:48:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print meta refresh original URL value as label.  

Mon Jul 28 08:35:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Support for relative url was added to META Refresh handling code.  

Mon Jul 28 08:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.c,
	terminal.h:

	Introduce struct terminal_screen that now holds the screen image.  

Mon Jul 28 07:33:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Bad memmove() was prevented, it fixes bug 231. Patch by Zardoz.  

Mon Jul 28 07:02:17 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Mark term as dirty at end of print_text().  

Mon Jul 28 06:54:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Assertion failure was fixed, no need to call set_line() with l = 0.  

Mon Jul 28 06:53:06 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Cleanup and optimization.  

Mon Jul 28 06:18:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.c:

	alloc_screen() - Allocate @screen and @last_screen in one chunk.  

Mon Jul 28 05:54:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	print_short_help() - Fix logic and string handling.  

Mon Jul 28 04:42:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Tidyup.  

Mon Jul 28 04:16:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen() - Use add_bytes_... when string length is known.  

Mon Jul 28 03:57:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Rewrite. Rename. Recomment. Reformat.  

Mon Jul 28 02:57:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	redraw_screen(): Move term option updating to fill_option_cache().  

Sun Jul 27 23:59:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	print_text(): Optimize to update term->screen directly.  

Sun Jul 27 23:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Tidy up.  

Sun Jul 27 23:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move initialization of loop vars closer to the loop.
	Also move calculation before the loop.  

Sun Jul 27 23:17:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move 'not in view' and failure setting up to decrease
	indentation. Remove useless test.  

Sun Jul 27 23:14:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Fix last patch. cursor_offset should atleast be 0.  

Sun Jul 27 23:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Rename @q -> @cursor_offset and use it to testing
	cursor updating.  

Sun Jul 27 22:54:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_doc(): Set @q in the switch for L_FIELD and L_AREA.  

Sun Jul 27 22:48:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	draw_link(): Move most of function body outside the switch.  

Sun Jul 27 22:45:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Renames in and around set_xchar().  

Sun Jul 27 22:44:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Tidy up.  

Sun Jul 27 21:47:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Whitespace and formatting fixed.  

Sun Jul 27 21:28:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: screen.c, terminal.h:

	Get rid of screen_char padding.  

Sun Jul 27 21:22:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, screen.c, screen.h, terminal.h:

	Introduce struct screen_char that is now used for
	terminal->(last_)screen.  

Sun Jul 27 20:20:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Fix issue where set_char() was called with @x = @y = -1 from
	clear_link().  

Sun Jul 27 19:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix issue where set_line() was called with negative @l from
	draw_doc(). Triggered when scrolling from link navigation.  

Sun Jul 27 19:39:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Fix bug cause by @l being wider than t->x - x triggering assertion
	in set_char() called from print_text().  

Sun Jul 27 17:51:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	Removed set_cursor assertion. I've removed setting of the blocked
	cursor in the active frame it seems. Was that a feature? Anyway it's
	much faster not to.  

Sun Jul 27 17:47:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Assertion that x == 0 removed. When drawing frame lines x can be
	positive and < t->x.  

Sun Jul 27 17:43:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Variables renaming, cleanup, assertification, and comments
	concerning parse_http_header_param() which should be renamed since
	current name is not representative of what it does, imho. Any idea ? 

Sun Jul 27 17:23:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, terminal/draw.c, terminal/draw.h,
	viewer/text/link.c, viewer/text/view.c:

	Make set_cursor() only take hint whether cursor can be blocked. It
	will save us a get_opt* calls. Also only dirty the terminal when the
	positions are new.  

Sun Jul 27 15:49:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	A few formatting and whitespace fixes.  

Sun Jul 27 15:24:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/: draw.c, draw.h:

	Outcommented set_line_color().  

Sun Jul 27 15:19:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/draw.c:

	Replaced a lot of test with assertions. I need to reason about this
	code and there are some suspicious things I'd like to get rid off.
	Please report failures to me.  

Sat Jul 26 21:24:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4.CVS 

Sat Jul 26 21:20:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre4 

Sat Jul 26 21:17:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul 26 21:13:49 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation minor fixes.  

Sat Jul 26 21:12:09 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jul 26 20:34:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: modules/version.c, util/version.c:

	Added info about Guile existence to the version string.  

Sat Jul 26 20:33:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	My regexps weren't smart enough. uri.string -> uri.protocol_str, the
	(hopefully) final bit.  

Sat Jul 26 20:30:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h, user.c:

	uri.string -> uri.protocol_str 

Sat Jul 26 11:26:50 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Some redundant tests were removed, minor optimization and cleanup.  

Sat Jul 26 11:16:28 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor optimization by increasing code redundancy a bit, we prevent a
	test with constant result to be done in a loop.  

Sat Jul 26 10:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	int -> register unsigned int for mask and cov, it seems safer.  

Sat Jul 26 10:55:40 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor hack to prevent double calls to get_opt_bool_tree() in some
	cases.  

Sat Jul 26 10:39:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/event.c:

	Be a nice code and assertm() instead of if+internal() in
	term_send_event(). Added recovery failure path.  

Sat Jul 26 10:20:12 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/event.c:

	Minor rewrite and assertions added in term_send_event().  

Sat Jul 26 10:01:24 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	pl.po was fixed (please review). fr.po was updated. .po files were
	resynced.  

Sat Jul 26 08:06:34 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Polish translation update, patch by witekfl.  

Sat Jul 26 08:04:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	build-in -> built-in, idea by witekfl.  

Sat Jul 26 02:14:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Rename: mode -> prev_mode, attrib -> prev_attrib, A -> attrib, B ->
	mode in print_char().  

Sat Jul 26 01:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Hardcode the first indexes in add_cursor_mode_to_string() for speed.  

Sat Jul 26 01:10:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Try to optimize attribute updating in print_char() by doing a little
	extra copying but only one string adding.  

Sat Jul 26 00:39:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Trim the number of args to print_char() plus use variables instead
	of macro.  

Sat Jul 26 00:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Inline add_cursor_move_to_string() by order of pasky! 

Sat Jul 26 00:06:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Introduce add_cursor_move_to_string().  

Fri Jul 25 22:58:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Format print_char() to look more homogenous and give the code room
	to breathe.  

Fri Jul 25 22:39:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Small optimization to only set charset if it is used (utf8).  

Fri Jul 25 22:18:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Simplify alloc_screen().  

Fri Jul 25 22:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted, it seems calling uncompress_data() even
	with len = 0 is mandatory at some point... preventing some code
	simplification.  

Fri Jul 25 21:52:21 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A test against zero length was added, it prevents useless code to be
	executed. More to come, please review carefully.  

Fri Jul 25 21:48:37 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	if + internal() -> assertm().  

Fri Jul 25 21:18:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Optimization: let the preprocessor calculate constant values, a
	local macro RD_SIZE() was introduced.  

Fri Jul 25 20:24:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A bug introduced by last patch was fixed. Reported by Pasky.  

Fri Jul 25 20:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Use add_bytes_to_string() when possible - it's faster, but
	sacrifices a bit of readability.  

Fri Jul 25 20:13:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Fix whitespace.  

Fri Jul 25 19:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	It won't. Reverted my last patches regarding enum protocol.  

Fri Jul 25 19:22:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Added missing include protocol/protocol.h. Let's see if it will
	work.  

Fri Jul 25 19:17:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	uri.protocol -> enum protocol 

Fri Jul 25 18:49:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Funny looking code is not always faster.  

Fri Jul 25 17:21:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Prevent useless symbols definition if bookmarks are not used.  

Fri Jul 25 17:21:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Comment updates - some my thoughts, extended documentation of few
	functions, typo/grammar fixes, blablabla.  

Fri Jul 25 17:16:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Updated commenting of struct uri.  

Fri Jul 25 17:03:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More uri->protocol usage.  

Fri Jul 25 16:57:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Only pass uri->protocol to get_protocol_handler().  

Fri Jul 25 16:36:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_focusable() cleanup and optimization.  

Fri Jul 25 16:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h:

	Introduce uri->protocol field of type enum protocol. Should save us
	a few cycles.  

Fri Jul 25 16:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Add missing #include.  

Fri Jul 25 15:58:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, uri.c, uri.h, user.c, http/http.c:

	Rename: uri->protocol to uri->string.  

Fri Jul 25 14:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Commented struct uri and updated parse_uri()'s comment.  

Fri Jul 25 14:13:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Added files generated by ltmain.sh 

Fri Jul 25 14:01:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	Complete the alloc_term_screen -> alloc_screen renaming.  

Fri Jul 25 13:23:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: event.c, screen.c, screen.h, terminal.c:

	terminal/terminal.c:alloc_term_screen() ->
	terminal/screen.c:alloc_screen() and exported.  

Fri Jul 25 13:21:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, lowlevel/timer.c, terminal/Makefile.am,
	terminal/event.c, terminal/event.h, terminal/terminal.c,
	terminal/terminal.h, terminal/window.c:

	Separated out event handling from terminal/terminal.* to
	terminal/event.*.  

Fri Jul 25 13:07:43 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Some spaces and indentation fixes, minor optimizations, and return
	NULL on realloc() failure instead of retrying.  

Fri Jul 25 13:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.h:

	Don't include terminal/termianal.h from here. That's sick, man! 

Fri Jul 25 12:56:35 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Got rid of more gotos in convert_string(), macro PUTC was
	introduced, it speeds up thing by increasing code redundancy a bit.  

Fri Jul 25 12:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:39:05 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A goto was replaced in convert_string().  

Fri Jul 25 12:38:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/text/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:33:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/graphics/: .cvsignore, .vimrc:

	Added fairies.  

Fri Jul 25 12:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/blacklist.c, util/blacklist.c:

	Ehm. strlcasecmp() -> strncasecmp(), it was not a bugfix ;-).
	Problems reported by zas.  

Fri Jul 25 10:03:52 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Interpretation of &nbsp &nbsp was fixed. Please review.  

Fri Jul 25 09:49:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print reverse links at top of current document, since it's a
	non-sense.  

Fri Jul 25 09:34:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html links synonyms were added, grouping by type was improved.  

Fri Jul 25 09:09:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Html link rev|rel made is now associated to LT_AUTHOR, links of type
	LT_AUTHOR are no more displayed by default.  

Fri Jul 25 03:02:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/.cvsignore:

	Add .libs dir.  

Fri Jul 25 03:01:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/: guile/.cvsignore, lua/.cvsignore:

	Add .lo files and .libs dir.  

Fri Jul 25 02:59:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Cleanup extract_position().  

Fri Jul 25 02:34:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Small optimization in uri encoding.  

Fri Jul 25 01:21:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Optimize add_string_uri_filename_to_string() by using strlcasecmp()
	and relying on uri.data being always set.  

Fri Jul 25 00:48:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	Use assertions for sanity checks.  

Fri Jul 25 00:39:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/base64.c:

	Revert the optimization from version 1.6. Fixes gcc 3.3 compile
	warning that `in' may be undefined. Hopes this is correct.  

Fri Jul 25 00:16:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Don't check for strstr() twice.  

Thu Jul 24 16:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fix libtool macros order.  

Thu Jul 24 16:20:26 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	'compilation' fix.  

Thu Jul 24 16:19:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Disable shared libraries generation (at least for now).  

Thu Jul 24 16:18:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, scripting/guile/Makefile.am:

	Use libtool for libguile generation.  

Thu Jul 24 16:11:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/.vimrc:

	Corrected invalid path in fairie.  

Thu Jul 24 15:33:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, contrib/Makefile.am,
	contrib/guile/internal-hooks.scm, contrib/guile/user-hooks.scm,
	src/Makefile.am, src/main.c, src/dialogs/menu.c,
	src/protocol/proxy.c, src/sched/session.c,
	src/scripting/Makefile.am, src/scripting/guile/Makefile.am,
	src/scripting/guile/README, src/scripting/guile/core.c,
	src/scripting/guile/core.h, src/scripting/guile/hooks.c,
	src/scripting/guile/hooks.h:

	Support for internal scripting in scheme (w/ similiar interface as
	Lua exports) through Guile. Patch by Peter Wang and little updates
	by me.  

Thu Jul 24 15:32:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/guile/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jul 24 15:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/guile/.cvsignore:

	Added fairy, even if useless here.  

Thu Jul 24 14:42:58 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.h:

	hx() and unhx() macros to static inline functions, better...  

Thu Jul 24 14:41:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.c, document/cache.c:

	Converted to use assertions in garbage_collection().  

Thu Jul 24 14:36:00 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	hx() and unhx() functions were converted to macros. A kind of forced
	inline ;).  

Thu Jul 24 14:02:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Simplification of abort_background_connections().  

Thu Jul 24 13:38:49 2003  Laurent Monin <zas@norz.org>:

	* src/util/base64.c:

	Cleanup, optimization and assertions. Type casting to (int) is
	useless, so removed.  

Thu Jul 24 13:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Do not try to compare NULL or empty strings. Please review, it fixes
	a segfault.  

Thu Jul 24 13:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/blacklist.c, util/blacklist.c:

	Some assertions and a comment about last field were added.  

Thu Jul 24 12:14:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/align.h:

	Jonas-inspired optimisation of get_bfu_color(). (It _seems_ to
	work...) 

Thu Jul 24 11:48:13 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/checkbox.c:

	Eliminate two unnecessary temp-vars in checkboxes_width().  

Thu Jul 24 11:47:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	if + internal() parse_uri() brackets security check converted to an
	assertm(). As a side-effect fixed off-by-one bug in the check.  

Thu Jul 24 11:35:11 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/connection.h:

	s/struct download/struct file_download/ in load_url()'s description 
	(the comment wasn't updated when Jonas was renaming stuff).  

Thu Jul 24 11:23:36 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/html/: parser.c, renderer.c:

	Use list_empty().  

Thu Jul 24 11:09:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/link.c:

	Assert fd->document in jump_to_link_number.  

Thu Jul 24 11:06:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/connect.c:

	Remove temp-var in dns_exception that is used only once.  

Thu Jul 24 10:55:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	send_event: Just pass @fd to do_mouse_event so as to save the latter 
	a call to current_frame.  

Thu Jul 24 10:48:49 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Remove unused parameters and an assertion of one of those parameters 
	from send_download_do().  

Thu Jul 24 10:43:04 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	s/rep[12]/rep/ now that the two labels are in separate functions and
	thus will not clash.  

Thu Jul 24 10:38:37 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	I don't normally mind when you explicitely initialise a static var
	to NULL, but it becomes a little confusing when you do it for one
	but not for others nearby that also need to be initialised to NULL
	(explicitly or implicitly).  

Thu Jul 24 10:26:18 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/menu.c:

	view_menu has no dangerous items over view_menu_anon, so comment out
	view_menu_anon and its use in do_view_menu.  

Thu Jul 24 09:50:57 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/textarea.c:

	Add $TMP to the list of environmental variables checked in
	textarea_edit().  

Thu Jul 24 09:42:50 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A segfault when viewing certain pages (especially internal http
	error page) was fixed, it was introduced by incomplete changes from
	pasky on my html_hx() patch :).  

Thu Jul 24 03:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Try to stracpy() follow_url_hook's return value naively instead of
	memacpy()ing it. Should be fine.  

Thu Jul 24 03:21:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_follow_url() tidyup and documentation.  

Thu Jul 24 03:15:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Tidied up and documented script_hook_goto_url().  

Thu Jul 24 03:11:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	script_hook_quit() tidyup.  

Thu Jul 24 03:02:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Return 1 instead of the uri length in parse_uri(). It wasn't used so
	pretty pointless.  

Thu Jul 24 02:31:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Small cleanup and optimization of add_to_strn() by 'caching' the
	@dst length.  

Thu Jul 24 02:05:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Introduced load_config_from() and write_config_to(), even further
	backending load_config() and write_config(). Based on part of
	attachment 94 of bug 70, patch by kuser and me.  

Thu Jul 24 02:01:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Update comments for string utilities and move most of them to the
	header file.  

Thu Jul 24 01:49:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Well, kuser's complete scripting reworking is *not* yet in ;-).  

Thu Jul 24 01:48:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c:

	Let script_hook_follow_url() return value to acquire same semantics
	as script_hook_goto_url()'s: URL to go to, "" to go nowhere, NULL to
	go to the original URL. Attachment 97 of bug 70, patch by kuser and
	me.  

Thu Jul 24 01:43:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, scripting/lua/hooks.c,
	scripting/lua/hooks.h:

	Changed script_hook_goto_url() to return the URL to go to ("" to go
	nowhere, NULL to go to the original URL), instead of directly
	calling goto_url() (which is now called from goto_url_with_hook()
	conditionally). Attachment 96 of bug 70, patch by kuser and me.  

Thu Jul 24 01:28:15 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Lua-specific CFLAGS and LIBS now *also* live in LUA_(CFLAGS|LIBS),
	whose are AC_SUBST()'d for Makefiles. Attachment 83 of bug 70, patch
	by kuser.  

Thu Jul 24 01:21:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, ltmain.sh, src/Makefile.am,
	src/scripting/lua/Makefile.am:

	[src/scripting/lua] liblua.a -> .libs/libscriptinglua.a and use
	libtool to generate it. Attachment 79 of bug 70, patch by kuser.  

Thu Jul 24 00:59:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	OPT_CONFIG -> OPT_LISTBOX and minor associated comment update.  

Thu Jul 24 00:52:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	parse_set() now saves the pre-value part of set command to @mirror
	only if the option has a @write method so we know we will get the
	actual option value in the @mirror as well. Hopefully fixes bug 216
	(alias'd options garbage the config file), reported by Dimitar
	Dimitrov <dinux@mail.bg>.  

Wed Jul 23 18:30:38 2003  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Added praises for Gerard and fis regarding the excellent yet hidden
	and frequently under-appreciated resources support they give us.  

Wed Jul 23 18:24:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/Makefile.am:

	Purge doc/book from the buildsystem.  

Wed Jul 23 18:20:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Create the linksarea temporary files in $TMPDIR || $TEMPDIR || $TEMP
	|| /tmp. Idea by Zardoz, fixes bug 232.  

Wed Jul 23 16:24:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3.CVS 

Wed Jul 23 16:21:19 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre3 

Wed Jul 23 16:19:56 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 16:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Do not yell when adding zero chars to string, just return string in
	add_bytes_to_string() and add_xchar_to_string().  

Wed Jul 23 16:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Stricter length assertion, calling add_bytes_to_string(p, c, 0) is a
	non-sense.  

Wed Jul 23 16:04:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Attempt to fix strl*cmp() users compilation, reported by Zas.  

Wed Jul 23 16:02:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added in what location the assertion happenned information to the
	assert()s. This is how did I mean it, Jonas ;-).  

Wed Jul 23 15:57:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Oops, removed stale @m argument in string_assert().  

Wed Jul 23 15:57:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	string_assertm() -> string_assert() 

Wed Jul 23 15:56:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	strlcmp() and strlcasecmp() assertoin failures now contain caller
	coordinates (used string_assertm() instead of assert()).  

Wed Jul 23 15:54:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	In-debug_*() assertion failure messages now have standarized format
	and contain the name of function they happenned inside.  

Wed Jul 23 15:35:50 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Optimizations of add_char_to_string() and add_xchar_to_string(),
	calls to add_bytes_to_string() were removed.  

Wed Jul 23 15:34:54 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Wed Jul 23 15:32:52 2003  Petr Baudis <pasky@ucw.cz>:

	* po/gen_translations_stats.sh:

	Fixed alignment. Annoying fr.po ;-)).  

Wed Jul 23 15:20:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/uri.c, protocol/uri.h, protocol/user.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c:

	Removed hardcoded assumption that the original URI string starts at
	uri.protocol, introduced struri() instead which encapsulates this
	fact nicely.  

Wed Jul 23 15:13:47 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 15:11:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Rearranged the declarations so that they cluster a little more
	naturally.  

Wed Jul 23 15:07:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Removed superfluous newline from the httpauth dialog box.  

Wed Jul 23 14:49:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fixed boolean expression in get_uri_string(), making it to actually
	work ;-).  

Wed Jul 23 14:09:09 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Wed Jul 23 14:05:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	It is now allowed to pass zarro @length to add_bytes_to_string().
	Hah, happiness! ... ;-) 

Wed Jul 23 13:46:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Moved the n1,n2 assert after -1 -> strlen(). Added comment
	explaining why :-). Idea by Jonas.  

Wed Jul 23 13:08:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small fix of strncmp -> strlcmp 

Wed Jul 23 13:00:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/blacklist.c, util/blacklist.c:

	Add missing include, reported by Zas.  

Wed Jul 23 12:59:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	strncmp() -> strlcmp() (this is a bugfix).  

Wed Jul 23 12:55:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Length checks + strncmp() -> strlcmp().  

Wed Jul 23 12:52:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Finish zas' renaming: set_auth_uid -> set_auth_user, set_auth_passwd
	-> set_auth_password.  

Wed Jul 23 12:51:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Reindentation.  

Wed Jul 23 12:49:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/blacklist.c, util/blacklist.c:

	strncasecmp() -> strlcasecmp() (this is a bugfix).  

Wed Jul 23 12:46:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Use strlcasecmp() instead of length compares + strncasecmp().  

Wed Jul 23 12:32:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Introduced strlcmp() and strlcasecmp() string functions which act
	like str[case]cmp() but on non-zero-terminated strings.  

Wed Jul 23 08:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/auth.c, protocol/auth/auth.c,
	protocol/auth/dialogs.c, protocol/http/auth.c:

	MAX_USER/PASSWD_LEN -> HTTP_AUTH_USER/PASSWORD_MAXLEN.  

Wed Jul 23 08:29:18 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c,
	protocol/auth/auth.c, protocol/auth/auth.h, protocol/http/auth.c,
	protocol/http/auth.h:

	Struct http_auth_basic field passwd was renamed to password.  

Wed Jul 23 08:21:21 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c,
	protocol/auth/auth.c, protocol/auth/auth.h, protocol/http/auth.c,
	protocol/http/auth.h:

	Struct http_auth_basic field uid was renamed to user. Note http auth
	is broken for now, due to some bugs introduced by Jonas at some
	time.  

Wed Jul 23 03:12:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	One sleepy hacker trying to fix last commit.  

Wed Jul 23 03:07:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad cs->server lookup. Gracefully spotted by Miciah.  

Wed Jul 23 02:53:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Add the location information that got lost in the assertion usage.  

Wed Jul 23 02:46:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Synchronize the what-to-do dialog no-open offers message text with
	the open ones.  

Wed Jul 23 02:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Moved the @filename bussiness to upper level in type_query().  

Wed Jul 23 02:11:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the get_opt_() change. Now it returns void * again.  

Wed Jul 23 02:10:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	More fixing. Give first parameter correct type.  

Wed Jul 23 01:54:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.c:

	Fix return value of add_string_uri_filename_to_string(). Reported by
	Jonas.  

Wed Jul 23 01:31:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Ok so I should wait with my bad patches until the "let's go against
	jonas crew" has gone to sleep. Revert bogus globhist toggling.  

Wed Jul 23 01:25:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Call elinks_internal() so errfile and errline gets set properly.  

Wed Jul 23 01:04:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	We only need one #define of add_opt_codepage_tree.  

Wed Jul 23 00:55:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Revert the changes trying to use union for option values. I don't
	have the patience to fight the config system monster right now. :( 

Wed Jul 23 00:47:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, protocol/uri.c, protocol/uri.h,
	sched/download.c:

	get_filename_from_url -> add_string_uri_filename_to_string (these
	identifiers rule) 

Wed Jul 23 00:30:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	get_filenamepart_from_url() declared but nowhere defined, nowhere
	used. So blasted off by the merciless monster^W^W^Wme.  

Wed Jul 23 00:11:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/globhist/dialogs.c:

	Cache toggle value in private variable instead of the option trees.  

Wed Jul 23 00:06:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Sleep for a second after printing out any error message. Making
	debug() usable ;-).  

Tue Jul 22 23:50:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	add_opt() now takes the union value. Dummy value introduced.  

Tue Jul 22 23:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.h:

	Hmm seems we need the union to be unanonymous so moved out.  

Tue Jul 22 23:21:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Add union @value member to struct option.  

Tue Jul 22 23:09:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Make get_opt_() only return the option.  

Tue Jul 22 16:16:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: osdep/stub.c, util/stub.c:

	#include "util/stub.h".  

Tue Jul 22 15:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, osdep/stub.c, osdep/stub.h, util/Makefile.am,
	util/string.c, util/string.h, util/stub.c, util/stub.h:

	Moved libc stub functions to util/stub.*. Idea by pasky.  

Tue Jul 22 15:50:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/string.c:

	Use assertions and get rid of old #defines.  

Tue Jul 22 15:36:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	Slim location message composing by using add_format_to_string().  

Tue Jul 22 15:09:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Updating comments.  

Tue Jul 22 15:01:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Commented out decode_uri_string() for it is not used and thus shall
	not defile our binary.  

Tue Jul 22 15:01:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print lang if hreflang is the same.  

Tue Jul 22 14:57:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Improve add_string_uri_to_string()s comment.  

Tue Jul 22 14:53:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	viewer/text/link.c:

	Stripping of uri password is now done through a generic
	add_string_uri_to_string() (yes the name is just too good).  

Tue Jul 22 14:25:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h:

	Introduce add_uri_to_string(). It's basicly the old get_uri_string()
	that now uses it as a backend.  

Tue Jul 22 14:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.c, session.h:

	session.task_target -> session.task_target_frame 

Tue Jul 22 13:46:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print name as title if no title, print media attribute value if any,
	and fix alternate stylesheets displaying.  

Tue Jul 22 13:35:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Give preferences to our names for html links. As a side effect, it
	forces lowercased name, print previous instead of prev, and more.
	Related functions and struct were enabled.  

Tue Jul 22 11:22:12 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced, french translation was updated.  

Tue Jul 22 10:57:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Print lang attribute value if link type is LT_ALTERNATE_LANG.  

Tue Jul 22 10:31:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Code simplification.  

Tue Jul 22 10:27:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	html_link() is now using html_link_parse(). Behavior should be
	unchanged. New code was activated and a missing else was added to
	html_link_parse().  

Tue Jul 22 10:03:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link of type UP was added, not standart but sometimes encountered.  

Tue Jul 22 09:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	First step to html_link() rewrite, some struct and functions were
	added to identify type of an html link, in respect of w3c
	documentation. Enclosed in #if 0/#endif to prevent compilation
	errors for now.  

Tue Jul 22 03:40:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	[String util restructuring] Purge the old string utils. <insert
	sentimental grace>.  

Tue Jul 22 03:34:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/conv.c:

	[String util restructuring] Convert (de|en)code_shell_safe_url().  

Tue Jul 22 03:30:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert some missing users in
	get_image_map(). Another strange goto function. Please verify.  

Tue Jul 22 03:09:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_option() but it's hard to
	figure out the gotos.  

Tue Jul 22 03:00:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Rearrange add_select_item() to get rid of double negation.  

Tue Jul 22 02:57:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Test that there something to add before calling
	add_bytes_to_string() in scan_http_equiv().  

Tue Jul 22 02:54:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/kbd.c:

	[String util restructuring] Convert in_sock().  

Tue Jul 22 02:44:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	Fix FIXME comment.  

Tue Jul 22 02:43:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/opttypes.c:

	[String util restructuring] Convert str_rd().  

Tue Jul 22 02:39:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/link.c:

	[String util restructuring] Convert print_current_link_do().  

Tue Jul 22 02:33:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reindentation of add_select_item().  

Tue Jul 22 02:29:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Fix last commit.  

Tue Jul 22 02:28:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, viewer/text/form.c:

	[String util restructuring] encode_uri_string() now takes struct
	string.  

Tue Jul 22 02:23:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_controls() now takes a string
	struct.  

Tue Jul 22 02:17:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] encode_multipart() now takes a string
	struct.  

Tue Jul 22 02:10:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/form.c:

	[String util restructuring] Convert get_form_url().  

Tue Jul 22 01:52:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	[String util restructuring] scan_http_equiv() now takes two string
	structs simplifying things a bit.  

Tue Jul 22 01:37:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert get_image_map().  

Tue Jul 22 01:30:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] Convert html_link(). Hmm not sure the if
	(text.source) is not always true.  

Tue Jul 22 01:20:31 2003  Petr Baudis <pasky@ucw.cz>:

	* Unicode/8859_5.cp, src/intl/codepage.inc:

	Typo fix in charset alias: 8895 -> 8859. Reported by Recai Oktas
	<roktas@omu.edu.tr>, fixes bug 225.  

Tue Jul 22 01:09:41 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Fix a bug introduced in src/sched/session.c:1.110->1.111: The
	titlebar is blanked while another tab is loading.  

Tue Jul 22 01:08:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Comment about perverse string composition in
	download_window_function().  

Tue Jul 22 01:07:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	[String util restructuring] do_html_select() gets the treatment.
	It's a very cryptic function. A macro is introduced to get rid of
	code dublication. Some ard nullification of the string is necessary
	but not that pretty. Mabbe a pointer that a (clear|reset)_string
	would be useful? 

Tue Jul 22 01:05:20 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/session.c:

	Removed a superfluous fill_area() in the code for drawing the
	tab-bar.  

Tue Jul 22 00:32:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/renderer.c:

	[String util restructuring] Convert format_html().  

Tue Jul 22 00:20:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	STR_MAGIC -> STRING_MAGIC 

Tue Jul 22 00:14:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] print_char() now takes struct string as
	parameter.  

Tue Jul 22 00:07:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	TODO added: An optimized add_term_escape_to_string() would be nice.  

Tue Jul 22 00:05:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/terminal/screen.c:

	[String util restructuring] Convert redraw_screen().  

Mon Jul 21 23:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: os_dep.c, os_dep.h, osdep.c, osdep.h:

	Purge check_shell_security(). It's partly made obsolete by
	add_shell_safe_to_string().  

Mon Jul 21 23:48:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert subst_file().  

Mon Jul 21 23:43:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert get_temp_name().  

Mon Jul 21 23:41:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Make actually use of add_string_to_string() in add_dir_entry().  

Mon Jul 21 23:39:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Minor reindentation.  

Mon Jul 21 23:37:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Added a FIXME regarding Bugzilla problems to newlines-coping part of
	do_textarea(). Entities are decoded too late.  

Mon Jul 21 23:34:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	[String util restructuring] Convert download_window_function(). Use
	string utils for both stat message code paths.  

Mon Jul 21 23:28:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	No code redundancy in convert_string() anymore - removed obsolete
	FIXME.  

Mon Jul 21 23:11:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	[String util restructuring] Attack get_stat_msg().  

Mon Jul 21 23:08:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Fixed another trailing blank line.  

Mon Jul 21 23:04:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Added some pathetic comment about how ugly is this file getting.  

Mon Jul 21 23:01:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Use in print_current_titlex(). Hmm
	there's some string.length mangling that I don't like, but if it
	worked before it should work still.  

Mon Jul 21 23:01:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	When actually cleaning up in done_string(), also zero
	string->length.  

Mon Jul 21 22:58:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Removed superfluous newline introduced in 1.42.  

Mon Jul 21 22:52:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/view.c:

	[String util restructuring] Rename and make
	add_session_ring_to_str() have the the generic string add type.
	Update the user.  

Mon Jul 21 22:38:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/textarea.c:

	[String util restructuring] Use it in encode_textarea().  

Mon Jul 21 22:31:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/ssl.c:

	[String util restructuring] This is untested but very trivial. We
	should probably use string_concat() to make things clearer.  

Mon Jul 21 22:19:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/sysname.c:

	[String util restructuring] First user of add_format_... since a
	little extra work should not be a problem here.  

Mon Jul 21 22:13:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Typo fix in summary for the document.html.link_display option: hmtl
	-> html.  

Mon Jul 21 22:01:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	[String util restructuring] 

Mon Jul 21 21:48:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/lowlevel/interlink.c:

	[String util restructuring] 

Mon Jul 21 18:34:00 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/uri.c, util/string.h:

	A string magic failure was fixed. INIT_STRING(s,l) macro was
	introduced (better name ?).  

Mon Jul 21 18:01:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	More paranoid fs->state test and removed the useless second one from
	ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 18:00:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Minor tidyup of ACT_KILL_TO_BOL handler in field_op().  

Mon Jul 21 17:58:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/form.c:

	Removed memrchr() usage introduced in 1.8 and sticked a TODO
	instead. It was never used anyway and needs a proper stub if
	supposed to be used.  

Mon Jul 21 17:37:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/mime.c:

	Tidyup of check_encoding_type(), mainly fixed bad indentation
	introduced in 1.24. Bad Miciah! ;-) 

Mon Jul 21 16:24:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/user.c, util/conv.c, util/conv.h:

	Introduce add_shell_safe_to_string() and use it in subs_cmd().  

Mon Jul 21 16:22:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Temp. fix for first string magic catch. Thanks zas. :) 

Mon Jul 21 16:22:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: string.c, string.h:

	Rename: (set|check)_magic -> (set|check)_string_magic.  

Mon Jul 21 15:52:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Didn't I patch this? Test uri->hostlen instead of uri->host.  

Mon Jul 21 14:18:57 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/options.c, util/string.c,
	util/string.h:

	Magic check for struct string. Some changes related to this
	implementation, especially string initialization with NULL_STRING.
	Currently string debug is enabled by default in --enable-debug. This
	should catch operations on badly initialized struct string.  

Mon Jul 21 13:26:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Test returned value of init_string().  

Mon Jul 21 10:39:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	switch tidyup.  

Mon Jul 21 10:17:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Minor tidyup.  

Mon Jul 21 09:17:15 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Do not mix preallocated strings with not preallocated ones. Reported
	by Miciah, fix by me.  

Mon Jul 21 06:52:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	[String util restructuring] (132 add_to_str() remains) 

Mon Jul 21 06:19:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	[String util restructuring] Last one for now which should also fix
	unfortunate too soon removal of option name (de|en)coders.  

Mon Jul 21 06:14:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	[String util restructuring] (1) We joggle two strings. An
	un+/encoded. Use the unencoded to 'cache' @fcp so it can be free()d
	making cleaning up easier and no goto required.  

Mon Jul 21 06:05:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: opttypes.c, opttypes.h:

	[String util restructuring] option_type_info->write now takes a
	struct string. s/add_quoted_to_str/add_optstring_to_string/ using
	quoted encode adder as backend. Makes src/config/ work again.  

Mon Jul 21 05:58:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	[String util restructuring] Even though the { "", 0 } initialization
	is potentially bad, this has to be.  

Mon Jul 21 05:55:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Remove option name encoders. Old users now use add_optname_...  

Mon Jul 21 05:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	[String util restructuring] I am getting the feeling that
	make_keystroke is not the best name.  

Mon Jul 21 05:49:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/dialogs.c:

	[String util restructuring] 

Mon Jul 21 05:47:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: conf.c, conf.h:

	[String util restructuring] The next few patches in src/config/
	depends on each other. This one is big sorry.  

Mon Jul 21 05:22:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	[String util restructuring] 

Mon Jul 21 05:20:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/document.c:

	[String util restructuring] *Yawn* maybe we should add some macro to
	pep things up a bit.  

Mon Jul 21 05:16:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	[String util restructuring] Use for cache info msg box assembling.  

Mon Jul 21 05:12:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	[String util restructuring] Yay we get to use the new
	add_optname_... and hopefully also a bit smarter handling of dot
	adding. Unidentified Patch Object: remove unused rmdots() ... my
	excuse: I have 1200 lines to sync and don't care 'bout these 9 so
	pasky please be in a good mood when you read this one. ;) 

Mon Jul 21 05:04:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	[String util restructuring] Please excuse the indentation but before
	we didn't even test if the initialization was good and now we do.  

Mon Jul 21 04:59:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/: cookies.c, cookies.h:

	[String util restructuring] Last patch depends on this one since
	@header is a string struct.  

Mon Jul 21 04:57:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	[String util restructuring] Also make the defined add_*_string()
	take string struct. TODO: they should go in favour of generic
	add_uri_(components|parts)_to_string() that can also be used as
	backend by get_uri_string().  

Mon Jul 21 04:51:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	[String util restructuring] A little strangeness in
	encode_uri_string() which hopefully will be improved by a possible
	introduction of add_encoded_uri_string() later.  

Mon Jul 21 04:38:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Test uri->hostlen not uri->host.  

Mon Jul 21 04:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	[String util restructuring] Don't panic. A bit preparing mixed in
	this patch mainly the macros for adding const strings to the
	fragment. Also some more test before adding. Could maybe use format
	string some places to improve readability.  

Mon Jul 21 04:14:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[String util restructuring] 

Mon Jul 21 04:11:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/finger.c:

	[String util restructuring] Use in the request sending.  

Mon Jul 21 04:09:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	[String util restructuring] First usage. Abandon file_data struct
	for string struct and make stat_* also take string.  

Mon Jul 21 04:00:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	Introduce the new restructured string util.  

Mon Jul 21 00:21:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Trivial @q optimization at parse_frame_widths().  

Mon Jul 21 00:17:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Partially reverted html_h() changes in zas' 1.146, restored proper
	encapsulation of the @h parameter.  

Mon Jul 21 00:03:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() synced w/ put_chars_conv() : put_chars_conv() now
	uses convert_string() as its backend. Finally got rid of this
	particularily annoying code duplication. Pasky is da master! 

Sun Jul 20 23:56:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	convert_string() syncing w/ put_chars_conv() : Use dynamically
	allocated @buffer inside of put_chars_conv(), and call put_chars()
	only once at the very end. (XXX: Memory hit?) Also slight
	optimization (exit right after dummy put_chars() if charslen is
	zero).  

Sun Jul 20 23:43:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Moved @b to local
	scope in convert_string().  

Sun Jul 20 23:42:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @pp -> @charspos at
	the both sides.  

Sun Jul 20 23:41:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @bp -> @bufferpos at
	the both sides.  

Sun Jul 20 23:35:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Left the @buffer
	reallocation code only at one place, using the same path to reach it
	as in put_chars_conv(). The diffs are nicely sync'd up already ;-).  

Sun Jul 20 23:25:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : Double-side tidyup.  

Sun Jul 20 23:16:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	convert_string() syncing w/ put_chars_conv() : @ct ->
	@convert_table, @c -> @chars, @l -> @charslen.  

Sun Jul 20 23:12:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Fix the bug 213 side-bug: don't eat the character terminating entity
	string if it's not valid entity terminator (';'). Some comment
	sticked around about how buggy this piece of code is.  

Sun Jul 20 22:36:23 2003  Petr Baudis <pasky@ucw.cz>:

	* po/it.po:

	Italian translation update by Fabio. Ufff. Postponing mail for over
	a month doesn't pay off, says my hour spent by resolving 80
	conflicts ;-). At least I learned a little Italian :^).  

Sun Jul 20 21:19:45 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Vendor (ELinks project) email addy should be elinks-users mailing
	list instead of my mail addy ;-).  

Sun Jul 20 21:15:49 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	Described recommended process of getting in changes to the
	elinks.spec.in file.  

Sun Jul 20 21:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	s/Copyright/License/, as Silviu Cojocaru <silviucc@home.ro> and vim
	syntax highlighting hints ;-).  

Sun Jul 20 21:02:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Commented out funny assertm() which (I _hope_) can never fail ;-).  

Sun Jul 20 20:33:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Use sprintf() instead of ulongcat() for printing the UID/GID
	numerical value, since we want to pad from right, not from left.
	Sorry, zas, that's something ulongcat() doesn't seem to be able to
	do so far ;-).  

Sun Jul 20 20:23:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Simplify the final ..<->.foo decision procedure, it should be much
	more straightforward (and elegant) now. This should hopefully also
	be the final fix to the ..foo being shown bug.  

Sun Jul 20 20:19:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Distributed the decision procedure comment in file_visible() to the
	individual steps.  

Sun Jul 20 20:18:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	file_visible(): @d_name -> @name 

Sun Jul 20 20:17:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Ehm. Compilation fix.  

Sun Jul 20 20:17:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Code flow naturalization in file_visible().  

Sun Jul 20 20:14:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Commented the file_visible() function, minor inner comment fix.  

Sun Jul 20 20:11:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Moved hidden-file decision procedure to new file_visible() function.  

Sun Jul 20 15:44:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, auth/auth.c, http/auth.c:

	Tidyup of the get_uri_string() calls.  

Sun Jul 20 15:44:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: uri.c, uri.h:

	get_uri_string()'s @components is of type enum uri_component.  

Sun Jul 20 15:43:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Moved the enum uri_component declaration near get_uri_string.  

Sun Jul 20 15:43:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/uri.h:

	Updated get_uri_string()'s comment.  

Sun Jul 20 15:37:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Use the new MIN() macro.  

Sun Jul 20 15:31:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/elinks.h:

	Defined global macros MIN() and MAX(). I dreamed about their
	existence for a long time already, so here they go, for purely my
	personal pleasure! ;p 

Sun Jul 20 15:30:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, auth/auth.c, http/auth.c:

	get_uri_string() now add the marked components. Users do ~(URI_*).  

Sun Jul 20 15:12:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Use assertm() instead of if <-> internal() pairs at few places.  

Sun Jul 20 14:41:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c:

	Reverted the HTML <link> tag handling rework. Too big, changing
	option meaning without changing option name, removing useful option.
	Difficult to see what was changed and how. Please split and
	recheckin as gradual changes.  

Sun Jul 20 10:17:17 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	Html link tag handling was reworked. Feel free to improve (tip: bfu
	menu for these).  

Sat Jul 19 23:40:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, options.h:

	Rename: add_opt_string() -> add_opt_str() by kuser.  

Sat Jul 19 23:12:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Some dummy comment about why option is defined as it is. Pasky is
	sleepy.  

Sat Jul 19 22:29:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.h:

	Comment of uri_component enum. CVS IS BACK! Weeeeee :))) 

Thu Jul 17 08:56:30 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/align.h, config/cmdline.c, config/conf.c,
	config/dialogs.c, config/options.c, config/options.h,
	config/opttypes.c, config/urlhist.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, globhist/globhist.c,
	lowlevel/interlink.c, mime/dialogs.c, mime/backend/default.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, protocol/file.c,
	protocol/file/file.c, protocol/user.c, sched/download.c,
	sched/session.c, terminal/terminal.c, util/secsave.c,
	viewer/dump/dump.c, viewer/text/form.c, viewer/text/link.c,
	viewer/text/view.c:

	Type of root_options and cmdline_options to struct option *. General
	cleanup. Patch by Karsten Schölzel <kuser@gmx.de>.  

Thu Jul 17 06:55:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/terminal/window.c:

	Fix bug 33: Problems with drawing out of tabs. I'm hardly sure of
	this change but it seems to work.  
	
	The problem was related to 'empty windows' used by image maps and
	listboxes.  I first tried substituting register_bottom_half() for
	add_empty_window() but that caused bad stuff with image maps so I
	changed empty_window_handler() to call term_send_event() instead of
	directly calling the next window's handler.  

Thu Jul 17 04:23:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Fix off by one error.  

Wed Jul 16 08:41:59 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po and french translation was updated.  

Wed Jul 16 02:45:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/search.c:

	point_intersect(): Removed assert(p1) because p1 will not have been
	set if the last search yielded no results.  

Tue Jul 15 23:15:07 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/globhist/globhist.c:

	Consistency fix from Jonas: s/void\nstatic /static void\n/ 

Tue Jul 15 22:32:10 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	An option named document.html.link_display was added to control how
	html link elements are rendered.  

Tue Jul 15 22:18:00 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: main.c, config/options.c, globhist/globhist.c,
	globhist/globhist.h:

	Fix bug 157: Periodically save globhist to disk.  

Tue Jul 15 22:15:56 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/form.c:

	Fix bug 99: ^K in textareas should kill to end-of-line, not
	end-of-buffer, and ^U should kill to beginning-of-line, not
	beginning-of-buffer.  Please review my super-funky code.  

Tue Jul 15 21:53:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Link: information now contains hreflang and type if they are
	provided.  

Tue Jul 15 21:33:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplification in check_encoding_type() composed by Miciah and me.  

Tue Jul 15 20:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Fix logic in check_encoding_type().  

Tue Jul 15 20:18:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, dialogs/menu.c, dialogs/menu.h,
	document/html/frames.c, document/html/frames.h,
	document/html/renderer.c, document/html/renderer.h,
	sched/history.c, sched/session.c, sched/session.h,
	scripting/lua/core.c, viewer/dump/dump.c, viewer/text/form.c,
	viewer/text/form.h, viewer/text/link.c, viewer/text/link.h,
	viewer/text/search.c, viewer/text/search.h, viewer/text/textarea.c,
	viewer/text/textarea.h, viewer/text/view.c, viewer/text/view.h,
	viewer/text/vs.c, viewer/text/vs.h:

	Another big rename: struct f_data_c -> struct document_view. Idea by
	pasky.  

Tue Jul 15 17:48:44 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/leet.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/viewer/text/link.c:

	Typo fix. ~ char was removed from title of reset button. .po files
	were updated.  

Tue Jul 15 16:52:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	Missing renames pasted by Zas.  

Tue Jul 15 12:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/frames.c,
	document/html/frames.h, document/html/renderer.c,
	document/html/renderer.h, document/html/tables.c, sched/history.c,
	sched/session.c, viewer/dump/dump.c, viewer/dump/dump.h,
	viewer/text/form.c, viewer/text/form.h, viewer/text/link.c,
	viewer/text/link.h, viewer/text/search.c, viewer/text/textarea.c,
	viewer/text/view.c, viewer/text/view.h, viewer/text/vs.c:

	Rename: struct f_data -> struct document and (f_)data member names
	to document. Idea by pasky.  

Tue Jul 15 06:32:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	Removed an unnecessary test.  

Tue Jul 15 06:17:22 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	If we're using snprintf to truncate, we might as well use it to pad
	as well, thus saving a variable, a loop, and some calls to
	add_chr_to_str.  

Tue Jul 15 06:07:44 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	Make MAX_(BIND|CONNECT)_TRIES attempts rather than
	MAX_(BIND|CONNECT)_TRIES - 1 attempts.  

Tue Jul 15 06:02:05 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	Declare list_directory() and read_file() as returning values of type 
	enum connection_state.  

Tue Jul 15 05:52:50 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/: file.c, file/file.c:

	When protocol.file.show_hidden_files is enabled, hide even files
	with names beginning with multiple dots.  

Mon Jul 14 20:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Switch off code to add default port in get_uri_string(). HTTP Auth
	hopefully won't suffer. Reported by Zas.  

Mon Jul 14 19:51:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, cache/cache.c, document/cache.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, lowlevel/connect.c, mime/mime.c,
	protocol/Makefile.am, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/url.h, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/auth/auth.c, protocol/http/auth.c, sched/download.c,
	sched/session.c, viewer/dump/dump.c, viewer/text/link.c,
	viewer/text/view.c:

	Complete first part of the url -> uri switch. Some of the moved
	functions still need to be cleaned up and we could probably populate
	with struct uri more places.  

Mon Jul 14 19:27:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in get_filename_from_url(). Last dep. part II. ;p 

Mon Jul 14 19:14:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_directories(). Last dependency on
	parse_url().  

Mon Jul 14 18:48:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in translate_url(). Note: !parse_url() ==
	parse_uri().  

Mon Jul 14 18:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Use struct uri in join_url(). Note: !parse_url() == parse_uri().  

Mon Jul 14 18:23:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplify check_encoding_extension() and correct the comment.  

Mon Jul 14 10:17:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Forgot to tune the assertions to how the function is now used.
	Thanks Zardoz.  

Mon Jul 14 07:15:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	Typo fix: costum -> custom.  

Mon Jul 14 07:09:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A double affectation was fixed ( int a = a = b;) 

Sun Jul 13 13:32:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Renames in extract_proxy().  

Sun Jul 13 13:09:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, protocol/uri.c, protocol/uri.h,
	protocol/url.c, protocol/url.h, viewer/text/link.c:

	Move get_uri_string() .. and rename it.  

Sun Jul 13 13:02:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	strip_url_password() now uses get_uri_string().  

Sun Jul 13 12:57:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, auth/auth.c, http/auth.c:

	get_uri_string() is now a Swiss army knife. Use with care. ;) 

Sun Jul 13 10:24:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Correctly handle PROTOCOL_UNKNOWN and free_syntax in uri string
	composing.  

Sun Jul 13 10:17:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, auth/auth.c, http/auth.c:

	The quick solution for configuring adding of data to the uri string.  

Sat Jul 12 20:42:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make get_uri_string() IPv6 aware and query protocol system for
	slashes.  

Sat Jul 12 20:21:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/url.h, viewer/text/form.c:

	Move (en|de)code_url_string() and friend doing s/url/uri/.  

Sat Jul 12 19:23:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Use entry->valid to test for invalid entries. ;) 

Sat Jul 12 17:38:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Fix whitespace and update comments.  

Sat Jul 12 17:29:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Fix realm double freeing on alloc failure.  

Sat Jul 12 17:23:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Remove useless test and assertion + comments updates.  

Sat Jul 12 17:17:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/auth.c,
	protocol/auth/dialogs.c, protocol/http/auth.c:

	*mumble* Fix http auth basic again. *mumble* 

Sat Jul 12 16:51:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/auth.c, protocol/auth/auth.h,
	protocol/auth/dialogs.c, protocol/http/auth.c,
	protocol/http/auth.h:

	Properly exporting of invalid entries through accessor.  

Sat Jul 12 13:08:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Allocate uid and passwd together.  

Sat Jul 12 12:59:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c, http/http.c:

	Actually copy something in set_auth_*().  

Fri Jul 11 23:17:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: url.c, url.h:

	Delete dead code.  

Fri Jul 11 19:58:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Update comments.  

Fri Jul 11 19:48:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Get rid of cleanup gotos by freeing @newurl after lookup.  

Fri Jul 11 19:40:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Use uri->(user*|pass*) for comparison.  

Fri Jul 11 19:22:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	One goto iterator out, one label to go.  

Fri Jul 11 19:20:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, http/auth.c,
	http/auth.h, http/http.c:

	Get rid of add_auth_code enum. Instead the added entry is returned.  

Fri Jul 11 17:25:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/auth.c,
	protocol/auth/dialogs.c, protocol/http/auth.c:

	A few fixes: Always set entry->valid according to @uid and @passwd.  
	Proper initialization of @uid and @passwd.  The entry can be invalid
	so removed from assertion.  

Fri Jul 11 14:26:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Update and add a few comments.  

Fri Jul 11 06:06:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Fix assertion failure and return value.  

Fri Jul 11 04:35:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Mark the entry valid when the user confirmed.  

Fri Jul 11 03:56:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Aasert members when updating.  

Fri Jul 11 03:53:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Simplify the updating code path.  

Fri Jul 11 03:47:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Update the entry members step by step instead of recreating the
	entry.  

Thu Jul 10 23:05:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/auth.c,
	protocol/auth/dialogs.c, protocol/http/auth.c:

	More usage of entry->valid to mark if @uid and @passwd is properly
	defined.  

Thu Jul 10 22:44:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/auth.c, protocol/auth/auth.c,
	protocol/auth/dialogs.c, protocol/http/auth.c:

	Always allocate @uid and @passwd in init_auth_entry().  

Thu Jul 10 13:53:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Try to cleanup the complicated auth entry comparison.  

Thu Jul 10 13:27:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, auth/auth.c, http/auth.c:

	Rename: get_auth_url() -> get_uri_string(), and move it to
	protocol/uri.* 

Thu Jul 10 13:19:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.h, http/auth.h:

	Make @valid and @blocked members boolean fields.  

Thu Jul 10 13:17:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.h, http/auth.h:

	Whitespace fix.  

Thu Jul 10 13:16:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, http/auth.c,
	http/auth.h:

	Remove unused url_len member.  

Thu Jul 10 13:02:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Split out auth entry initialization and get rid of gotos.  

Thu Jul 10 12:50:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Writeout @ret usage.  

Thu Jul 10 12:38:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Simplify the code path in auth adding.  

Thu Jul 10 12:30:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Remove allocation of username and password when adding an entry.  

Thu Jul 10 12:05:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Fix leak in the alloc failure code path.  

Thu Jul 10 04:38:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Generalize get_auth_url() to use protocol system for getting port
	number.  

Thu Jul 10 04:28:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Use struct uri in get_auth_entry(), 

Thu Jul 10 03:02:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, http/auth.c,
	http/auth.h, http/http.c:

	Urify add_auth_entry(). Add missing #include.  

Thu Jul 10 02:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Update comment to use enum names.  

Thu Jul 10 02:46:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, http/auth.c,
	http/auth.h, http/http.c:

	Use enum for add_auth_entry().  

Thu Jul 10 00:59:01 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/lowlevel/interlink.c:

	assert(info) _before_ dereferencing it.  

Thu Jul 10 00:35:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, auth/auth.h, http/auth.c,
	http/auth.h, http/http.c:

	Urify find_auth().  

Thu Jul 10 00:00:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix leak when parse_uri() failed.  

Wed Jul  9 23:56:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, protocol/url.c,
	protocol/user.c, protocol/http/http.c, sched/connection.c:

	Passing uristring to parse_uri() seems more natural.  

Wed Jul  9 23:03:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/leds.c, bookmarks/dialogs.c, config/dialogs.c,
	bfu/hierbox.c, bfu/hierbox.h, config/dialogs.h, dialogs/auth.c,
	dialogs/document.c, dialogs/edit.c, dialogs/edit.h,
	dialogs/hierbox.c, dialogs/hierbox.h, dialogs/info.c,
	dialogs/info.h, dialogs/menu.c, dialogs/menu.h, dialogs/options.c,
	dialogs/options.h, dialogs/refresh.c, globhist/dialogs.c,
	lowlevel/interlink.c, lowlevel/timer.c, mime/backend/default.c,
	protocol/auth/dialogs.c, osdep/os_dep.c, osdep/osdep.c,
	protocol/user.c, protocol/http/http.c, scripting/lua/core.c,
	ssl/connect.c, viewer/text/form.h, viewer/text/link.h,
	viewer/text/search.h, viewer/text/view.h:

	Misc. #include reordering all over the map.  

Wed Jul  9 20:21:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Compilation fix.  

Wed Jul  9 20:09:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	More mailcap and mime.types locations.  

Wed Jul  9 19:46:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Callocize back init_keepalive_connection().  

Wed Jul  9 19:40:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Uncle pasky's today compilation fixes.  

Wed Jul  9 19:21:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	add_host_connection() simplification. And always use mem_calloc()
	when allocating structures, Jonas.  

Wed Jul  9 18:37:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored assertion error message and recovery path for
	assigned!=download at load_url().  

Wed Jul  9 18:31:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Restored the assertion failure message in !list_empty() assertion at
	check_keepalive_connections().  

Wed Jul  9 18:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.c:

	Fixed add_keepalive_connection() c->sock1!=-1 recovery path.  

Wed Jul  9 18:19:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed bug intrduced in 1.152. POST requests _are_ unrestartable! 

Wed Jul  9 17:28:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	[P]urify user protocol handling. Should speed up thing a bit.  
	Reorder the flow so we bail out earlier if no program is defined.  
	Added note about possible problem of host containing also username
	uri part.  

Wed Jul  9 15:08:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Also show bad URL syntax warning if @proto is NULL.  

Wed Jul  9 15:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Require that @prot is non NULL and fix possible leak when no @host
	was returned.  

Wed Jul  9 14:39:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Merge in prog_func() in user_func().  

Wed Jul  9 14:31:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Split out subject scanning, and elimintate changes of the url
	string.  

Wed Jul  9 13:41:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove bad assertion and readd connection->from initialization.
	Triggered by Miciah unbacking to a https page.  

Wed Jul  9 08:54:39 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/ssl/connect.c:

	Compilation fix: Typecasts in the GNUTLS code.  

Wed Jul  9 01:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad memmove() size. Spotted by Zardoz.  

Wed Jul  9 01:51:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix collection of mailto subject.  

Wed Jul  9 01:24:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Fix untested usage of @subj when scanning for @subj_end. Reported by
	pasky.  

Wed Jul  9 01:23:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/uri.c:

	Make uri hostnames end also before '?' (needed for mailto uris).  

Tue Jul  8 23:21:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added some mailto test cases.  

Tue Jul  8 19:04:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/user.c:

	Simplify mailto subject handling even though it seems not to be
	correctly used.  

Tue Jul  8 18:46:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, user.c, user.h:

	Knock out more 'url' util users.  

Tue Jul  8 18:00:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/scripting/lua/core.c:

	#include POST_CHAR from the right place.  

Tue Jul  8 15:31:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Never mind the segfaults .. here come the fix.  

Tue Jul  8 15:10:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Pep up the cookie loading code to be less boring. Test return
	values.  

Tue Jul  8 13:54:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Get rid of gotos in allocation failure code path making it slower
	but more readable.  

Tue Jul  8 13:50:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Free the struct in free_cookie().  

Tue Jul  8 13:49:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Generalize and populate usage of cleanup_cookies().  

Tue Jul  8 13:04:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Fix bad domain and server matching introduced in last patch.  

Tue Jul  8 12:56:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Complete uri usage in cookie land.  

Tue Jul  8 12:39:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Prepare for the uri take over in cookie land. Fix some untested
	return values.  

Tue Jul  8 12:23:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.h:

	Move end_of_dir() to uri header.  

Tue Jul  8 12:18:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	mime/backend/default.c, sched/connection.c:

	Remove some #includes of protocol/url.h.  

Tue Jul  8 02:25:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.h, http/http.c:

	Complete the struct uri take over in the http backend.  

Tue Jul  8 02:01:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Struct uri usage: Revenge of the buggy servers.  

Tue Jul  8 01:52:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	More struct uri usage.  

Tue Jul  8 01:24:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cookies/cookies.c, cookies/cookies.h, protocol/http/http.c:

	Convert send_cookies() to use struct uri.  

Tue Jul  8 00:02:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Better sanity checking in http_send_header() + small cleanups.  
	Generalize adding hostname to header so IPv6 are correctly handled
	for REFERER_SAME_URL.  

Mon Jul  7 22:27:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/dump/dump.c:

	Fix leak triggered by `elinks --dump localhost:8080`.  

Mon Jul  7 20:13:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: kbdbind.c, kbdbind.h:

	Generalize keyact_box_item size.  

Mon Jul  7 20:01:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Small cleanup.  

Mon Jul  7 19:15:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Complete struct uri usage in http_send_header().  

Mon Jul  7 19:14:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove check_queue_bugs() assertion failure handling. It's debug
	code so we dump core.  

Mon Jul  7 17:49:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Add '.' before extension to temporary file.  

Mon Jul  7 15:36:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/blacklist.c, protocol/http/blacklist.h,
	protocol/http/http.c, util/blacklist.c, util/blacklist.h:

	Preparing for complete struct uri usage in http protocol backend.  

Mon Jul  7 15:04:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/Makefile.am, lowlevel/af_unix.c,
	lowlevel/af_unix.h, lowlevel/interlink.c, lowlevel/interlink.h:

	lowlevel/af_unix.* -> lowlevel/interlink.*.  

Mon Jul  7 13:14:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Fix post uri handling. Reported by hq_star on #elinks.  

Mon Jul  7 01:29:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Remove dead code that has been replaced by struct uri usage.  

Mon Jul  7 01:23:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Optimize the encoding extension testing.  

Mon Jul  7 00:57:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	More usage of connection uri.  

Sun Jul  6 23:24:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Don't think hidden file's name is its extension. (Ignore dot at the
	start of string or right after a slash when looking for a file
	extension.) Discovered by Diablo-D3.  

Sun Jul  6 23:17:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/hotkey.c, dialogs/document.c,
	document/html/frames.c, document/html/parser.c,
	document/html/renderer.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	protocol/protocol.c, protocol/uri.c, protocol/http/http.c,
	sched/connection.c, ssl/connect.c, util/fastfind.c,
	viewer/text/form.c, viewer/text/link.c, viewer/text/search.c,
	viewer/text/textarea.c, viewer/text/view.c:

	(Re)introduced recovery paths for failed assertions. Ufff.... Jonas,
	please check check_queue_bugs().  

Sun Jul  6 23:01:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Cleanup get_temp_name(). The appended extension is now everything
	after first dot, so external handler is given a better hint.  

Sun Jul  6 22:15:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Added note about if_assert_failed to assert() description.  

Sun Jul  6 22:15:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Moved if_assert_failed after other assert functions.  

Sun Jul  6 22:04:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Introduced if_assert_failed to exclude assert_failed tests and the
	(dead) recovery code from FASTMEM.  

Sun Jul  6 21:51:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/http.c:

	Whitespace fixes.  

Sun Jul  6 21:49:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Make sure assert_failed is initialized to zero. (I heard that global
	variables are automatically zeroed but didn't check that, so I'm
	taking the safe path.  

Sun Jul  6 21:25:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: elinks.h, main.c, protocol/http/http.c,
	protocol/http/https.c, sched/connection.c, ssl/connect.c,
	ssl/ssl.c, ssl/ssl.h:

	Removed SSL includes from elinks.h, this introduces not quite nice
	hack, but a great opportunity for certain thing (you'll see when you
	look at the diff >:) and mainly it speeds the compilation up by cca
	0.7s - 0.8s per file on my machine (which is about half of the whole
	compilation time for the smaller files). Violence, in the proper
	context, is good. Will you hit me? 

Sun Jul  6 20:59:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Add missing ssl/ssl.h  #include.  

Sun Jul  6 20:44:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/connection.h, ssl/connect.c, protocol/http/http.c:

	ssl_t *ssl -> void *ssl in struct connection. And we don't need to
	include ssl/ssl.h anymore in sched/connection.h as a nice
	side-effect.  

Sun Jul  6 20:28:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced assert_failed, which is set to 1 if the last assert(m)()
	failed, zero otherwise. Recovery paths made possible! ;-) Now who
	will reintroduce them...? ;) 

Sun Jul  6 17:53:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/connection.h:

	Removed some boring useless explicit values enumeration. If things
	will stop working now, blame this.  

Sun Jul  6 17:51:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/textarea.c:

	Assert sanity.  

Sun Jul  6 11:53:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move check_queue_bugs() and add #else branch so it don't have to be
	wrapped in macros.  

Sun Jul  6 11:11:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, sched/connection.h:

	Move read_func back to struct connection. No ftp_c.._info is valid.
	Reported by zas.  

Sun Jul  6 08:48:15 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	cmd_buffer must be last field in struct ftp_connection_info ! 

Sun Jul  6 03:42:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/proxy.c, sched/connection.c:

	Oops move scripting hook #include.  

Sun Jul  6 03:18:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Hopefully the keepalive connection host should be finally correct.
	Added assertion to back it up.  

Sun Jul  6 02:45:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/file.c, protocol/finger.c,
	protocol/ftp.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h:

	Finally knock out connection->url and users meaning lots of small
	optimizations.  

Sun Jul  6 01:31:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split out basic connection initialization.  

Sun Jul  6 00:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/proxy.c, protocol/proxy.h,
	sched/connection.c:

	Move out proxy handling.  

Sat Jul  5 19:09:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/ssl/connect.c:

	Add label removed in (void *) -1 cleanup when using GNUTLS. Reported
	by Zardoz.  

Sat Jul  5 18:13:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A small fix of the keepalive connection host initialization.  

Sat Jul  5 17:57:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Grouped and further commented host connection management.  

Sat Jul  5 16:13:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove INFO_LIST from connect_info(): unused and queue is public
	anyway.  

Sat Jul  5 13:19:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use correct option in forcehtml_cmd().  

Sat Jul  5 13:06:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, sched/connection.c:

	Remove captions from aliases introduced in mime/ integration.  

Sat Jul  5 12:45:43 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, osdep/os_dep.c, osdep/osdep.c:

	Some hardcoded in os_dep.c command strings are now defined in
	setup.h.  

Sat Jul  5 10:24:40 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, dialogs/document.h, dialogs/menu.c,
	viewer/text/view.c:

	Some assertion failures were fixed, some actions require a current
	document to make sense. nowhere_box() function was introduced, it
	print You are nowhere! message.  

Sat Jul  5 09:16:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	HTML4 attributes frame, border, rules for tables were not handled as
	it should. This was fixed accordingly to w3.org recommendations.
	This fixes bug 29.  

Sat Jul  5 08:07:41 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Sat Jul  5 03:41:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/README:

	Smooth out the rough edges. Add title and CVS Id tag.  

Sat Jul  5 03:20:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/https.c, sched/connection.c, ssl/connect.c:

	Initialize connection->ssl in https handler. This way we can get rid
	of the ugly (void *) -1 hack and bail out earlier. Untested but
	fairly simple.  

Sat Jul  5 01:20:36 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2.CVS 

Sat Jul  5 01:14:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre2 

Sat Jul  5 00:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Some final retouching of the boxes. I'm an ascii-art freak. Almost
	there, CIA commit #999! 

Sat Jul  5 00:48:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Retouched and actualized the ideal dependency tree, added couple of
	notes. CTYRI! 

Sat Jul  5 00:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, sched/connection.c, sched/connection.h,
	ssl/connect.c:

	'Predeclare' struct connection so we can give connection->conn_info
	proper type. (4 mississipi) 

Sat Jul  5 00:29:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, sched/connection.h:

	Cleanups of struct connection: remove unused member and move
	read_func to ftp_connection_info. If it should be reintroduced it
	should have some typedef attached.  

Fri Jul  4 23:35:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h:

	Make connection->unrestartable a boolean field. It was apparently
	involved in a http hack to mark form posting. We now use
	connection->uri.post to check that instead.  

Fri Jul  4 23:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.h, ssl/connect.c:

	Make connection->no_tsl a boolean field.  

Fri Jul  4 21:41:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Rename: add_keepalive_socket() -> add_keepalive_connection().  

Fri Jul  4 21:11:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	More connection uri usage and a small keepalive_connection
	allocation optimization.  

Fri Jul  4 20:55:44 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Potential bug fixed, get_url_data() may return NULL, causing
	stracpy() to fail. Minor cleanup and optimizations.  

Fri Jul  4 20:45:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup and move try_to_suspend_connection() closer to the
	user.  

Fri Jul  4 20:25:30 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Do not print . or .. directories in ftp listing, this bug was
	introduced recently.  

Fri Jul  4 20:18:39 2003  Petr Baudis <pasky@ucw.cz>:

	* test/README:

	Grammar fixes. 13! 

Fri Jul  4 20:04:06 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Do not print link of type text/css or image/x-icon, but let links of
	other types to be print. It clarifies a point discussed on #elinks.  

Fri Jul  4 19:27:03 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A buffer is now used for post data decoding, it prevents repeated
	calls to add_chr_to_str(). add_bytes_to_str() is now used instead.
	unhx() replaces equivalent code. As a side effect it fixes a warning
	(add_chr_to_str a=0) issued in debug mode when calling
	add_chr_to_str() with a nul char.  

Fri Jul  4 19:19:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	A assertion failure was fixed. goto_url() should only be called if
	url is not NULL.  

Fri Jul  4 19:02:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: keepalive_connection->conn -> keepalive_connection->socket.  

Fri Jul  4 18:57:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: host_connection->conn -> host_connection->connections.  

Fri Jul  4 18:50:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Remove useless test: get_protocol_handler() always returns handler.  

Fri Jul  4 18:45:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Reorganize host_connection management. Connection with no hosts
	(file protocol) are not in the list. Introduce accessors for the
	list. Uh and finally fix the buggy uri usage from previous patch.  

Fri Jul  4 15:53:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/uri.c, protocol/uri.h, sched/connection.c:

	Introduce and use get_uri_port().  

Fri Jul  4 15:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Change policy so all struct uri validation is done in accessors.  

Fri Jul  4 15:01:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c:

	Use struct uri when getting protocol handler.  

Fri Jul  4 14:50:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Move out initialization of keepalive connections. Makes way for
	removal of evil gotos. But now we always del_connection().  

Fri Jul  4 14:11:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Slightly alter done_keepalive_connection() to make socket closing
	optional. Use it in has_keepalive.connection().  

Fri Jul  4 13:34:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Rename: get_keepalive_socket() -> has_keepalive_connection() +
	altered it's semantics to match the name.  

Fri Jul  4 13:14:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: del_keepalive_socket() -> done_keepalive_connection() + and
	use it when aborting all.  

Fri Jul  4 12:58:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Some initial usage of connection->uri introduced. Uri helpers has to
	be added to go further.  

Fri Jul  4 12:12:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Add struct uri member to struct connection. It is not used yet but
	bad uris are detected by initialization.  

Fri Jul  4 11:56:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, protocol/ftp.c, protocol/ftp/ftp.c,
	protocol/http/http.c, sched/connection.c, sched/connection.h:

	Rename: set_timeout() -> set_connection_timeout().  

Fri Jul  4 10:57:16 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/html/renderer.h,
	viewer/text/search.c, viewer/text/search.h:

	get_search_data() and associate functions were moved from renderer.c
	to viewer/text/search.c, and becomes static.  

Fri Jul  4 09:45:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/frames.c:

	Minor optimizations.  

Fri Jul  4 09:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: Makefile.am, parser.h, renderer.c,
	renderer.h, frames.c, frames.h:

	Frame and frameset functions were moved to frames.{c,h}.  

Fri Jul  4 02:16:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, document/cache.h, sched/connection.h,
	sched/download.h, sched/session.h:

	Reorder and trim #includes.  

Fri Jul  4 01:49:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/connection.c, sched/connection.h, sched/download.c,
	sched/download.h, sched/location.h, sched/session.c,
	sched/session.h, viewer/dump/dump.c, viewer/dump/dump.h,
	viewer/text/view.c:

	Monster patch. Rename: struct status -> struct download. Idea by
	pasky. Also contains some variable renames, sorry.  

Fri Jul  4 00:54:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, download.h:

	Reorder #includes.  

Fri Jul  4 00:52:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/download.c, sched/download.h:

	Rename: struct download -> struct file_download. Idea by pasky.  

Fri Jul  4 00:46:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Added macros for testing connection state 'groups'.  

Fri Jul  4 00:25:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h:

	Put connection states in enum connection_state. Added paskys
	description of values.  

Thu Jul  3 23:30:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Group together keepalive functions.  

Thu Jul  3 22:55:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_keepalive_list() -> get_keepalive_connection().  

Thu Jul  3 22:49:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: is_host_on_list() -> get_host_connection().  

Thu Jul  3 22:43:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: h_conn -> host_connection, k_conn -> keepalive_connection.  

Thu Jul  3 22:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Useless test prevention.  

Thu Jul  3 22:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Split up stat_timer() to get rid of @st_r variable.  

Thu Jul  3 22:31:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor cleanup, optimizations, assert(), ....  

Thu Jul  3 22:26:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	A few cleanups.  

Thu Jul  3 22:08:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Bunch of miscelleanous cleanup, optimizations, assert(), ....  

Thu Jul  3 21:51:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use assertions instead of internal() calls.  

Thu Jul  3 21:36:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	assert() and assertm()...  

Thu Jul  3 21:30:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	check_queue_bugs() was greatly simplified. Don't try to sort and
	check again.  

Thu Jul  3 21:26:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	And a useless comment about previous stuff is gone...  

Thu Jul  3 21:25:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	An unused parameter was removed from format_frame().  

Thu Jul  3 21:22:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Rename: getpri() -> get_priority().  

Thu Jul  3 21:20:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	if () internal() -> assertm().  

Thu Jul  3 21:10:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Cleanup and if () internal() -> assertm().  

Thu Jul  3 21:05:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, document/html/renderer.c,
	document/html/renderer.h:

	enum cp_status was introduced, long variables names are now used in
	get_convert_table(), cleanup.  

Thu Jul  3 21:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Use given connections id in connection_disappeared().  

Thu Jul  3 20:52:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Rename connection->count to connection->id.  

Thu Jul  3 20:38:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, cookies/cookies.c, document/cache.h,
	document/html/renderer.h, osdep/os_dep.c, osdep/osdep.c,
	sched/connection.c, sched/connection.h, util/types.h:

	Eliminate tcount typedef. Hope nobody minds.  

Thu Jul  3 20:14:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Small cleanup.  

Thu Jul  3 10:59:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/info.c, cache/cache.c, document/cache.c,
	document/html/renderer.c, lowlevel/select.c, sched/connection.c,
	util/types.h:

	Rename: CI_* -> INFO_*.  

Thu Jul  3 10:45:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.c:

	Moved check_queue_bugs() call to del_connection().  

Thu Jul  3 10:32:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Put PRI_* values in enum connection_priority.  

Thu Jul  3 10:01:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Improved and moved comments for load_url to header file 

Thu Jul  3 09:00:05 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced.  

Thu Jul  3 08:47:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Cleanup, optimizations, missing assertions...  

Thu Jul  3 08:24:14 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/link.c:

	Some missing assertions were added.  

Thu Jul  3 08:19:39 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/form.c:

	Minor optimization.  

Thu Jul  3 03:10:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/connection.h:

	Only use one bit for boolean members.  

Thu Jul  3 02:25:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/document.c, document/html/parser.c,
	document/html/renderer.c:

	The last few compile fixes. ELinks is back online again.  

Thu Jul  3 02:18:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/viewer/text/: link.c, link.h, search.c, view.c, view.h, vs.c:

	Some more brute force compilation fixes. I hope you sleep tight zas
	;) 

Thu Jul  3 01:40:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/menu.c, sched/session.c, viewer/text/form.c,
	viewer/text/link.c, viewer/text/link.h:

	Some compilation fixes that I should apparently provide.  

Thu Jul  3 01:26:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: lowlevel/connect.c, protocol/finger.c, protocol/ftp.c,
	protocol/ftp/ftp.c, protocol/http/http.c, sched/connection.c,
	sched/connection.h, ssl/connect.c:

	Rename: setcstate() -> set_connection_state().  

Thu Jul  3 01:23:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/: Makefile.am, link.c, link.h, view.c, view.h:

	Moved link-related stuff from viewer/text/view.* to
	viewer/text/link.*. Jonas will do the compilation fixes associated.
	Have fun, Jonas ;-).  

Thu Jul  3 01:11:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, connection.h:

	Remove (hopefully) dead code.  

Thu Jul  3 01:03:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/finger.c, sched/download.c, sched/download.h,
	sched/error.c, sched/history.c, sched/location.h, sched/session.c,
	sched/session.h, ssl/connect.c, ssl/connect.h:

	More #include sched/connection.h fixes.  

Thu Jul  3 00:47:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/Makefile.am,
	viewer/text/form.c, viewer/text/form.h, viewer/text/textarea.c,
	viewer/text/textarea.h, viewer/text/view.c, viewer/text/view.h:

	Moved forms drawing/handling from viewer/text/view.* to
	viewer/text/form.*. Jonas will do the compilation fixes associated.  

Thu Jul  3 00:28:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: main.c, cache/cache.c, dialogs/info.c, dialogs/menu.c,
	document/cache.c, lowlevel/connect.c, lowlevel/connect.h,
	protocol/file.c, protocol/ftp.c, protocol/protocol.c,
	protocol/protocol.h, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/http.c, protocol/http/https.c, scripting/lua/hooks.h,
	viewer/dump/dump.c, viewer/dump/dump.h:

	sched/sched.h #includes changed to sched/connection.h 

Thu Jul  3 00:18:36 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: textarea.c, textarea.h, view.c, view.h:

	Compilation fixes.  

Thu Jul  3 00:15:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	sched/sched.* -> sched/connection.* 

Thu Jul  3 00:14:31 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/textarea.c:

	Moved a static function before its caller.  

Thu Jul  3 00:12:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, connection.h, sched.c, sched.h:

	Reverted the code move out of sched/sched.*. Don't panic, the change
	is good, but we'll do it w/ preserving history.  

Thu Jul  3 00:09:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.h, textarea.h:

	Header file fix.  

Thu Jul  3 00:07:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: terminal/terminal.c, viewer/text/Makefile.am,
	viewer/text/textarea.c, viewer/text/textarea.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved textarea-related functions from viewer/text/view.* to
	viewer/text/textarea.*. Zas will do the compilation fixes
	associated.  

Thu Jul  3 00:05:27 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Fix status message printing...  

Thu Jul  3 00:02:59 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Stricter assertions.  

Wed Jul  2 23:58:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup.  

Wed Jul  2 23:56:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Missing variables fixes.  

Wed Jul  2 23:49:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	The textarea fieldop handlers now take additional @rep parameter.  

Wed Jul  2 23:47:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Moved format_text() call from encode_controls() to
	encode_textarea().  

Wed Jul  2 23:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Ambiguous else fixes.  

Wed Jul  2 23:40:04 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: Makefile.am, connection.c, connection.h, sched.c,
	sched.h:

	Moved connection management to sched/connection.* 

Wed Jul  2 23:38:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Textarea drawing moved from draw_form_entry() to draw_textarea().  

Wed Jul  2 23:21:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Extracted out the textarea field_op handlers to separate functions.  

Wed Jul  2 23:14:16 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/: view.c, view.h:

	Compilation fixes.  

Wed Jul  2 23:03:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Namespace cleanup: _area_cursor() -> area_cursor().  

Wed Jul  2 23:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Should include search.h. Thanks, zas.  

Wed Jul  2 23:00:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/search.c:

	Namespace cleanup: _search_for() -> search_for_do().  

Wed Jul  2 22:59:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, viewer/text/Makefile.am,
	viewer/text/search.c, viewer/text/search.h, viewer/text/view.c,
	viewer/text/view.h:

	Moved searching-related functions from viewer/text/view.* to
	viewer/text/search.*. Zas will do the compile fixes associated.  

Wed Jul  2 22:36:41 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	Hmmm, french syntax error...  

Wed Jul  2 22:07:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	An assertion failure was fixed.  

Wed Jul  2 22:00:44 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Assertions: The End. Please report any assertion failure, false
	alerts may occur due to strictness.  

Wed Jul  2 20:47:50 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	back() and unback() functions were removed. go_back() and
	go_unback() are directly used.  

Wed Jul  2 20:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions.  

Wed Jul  2 18:30:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:17:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 18:05:33 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:55:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops.  

Wed Jul  2 17:54:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:26:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Oops, so he had _this_ in the srch_cmp() fail route ;-). Fixed
	search highlighting bug introduced by my last cleanups, reported and
	pointed out by zas.  

Wed Jul  2 17:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 17:17:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Minor tidyup. I wonder what so precious Mikulas had in the
	srch_cmp() fail route ;-).  

Wed Jul  2 17:13:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	is_in_range() cleanup, removal of some useless checks.  

Wed Jul  2 17:02:45 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added, minor cleanup and optimizations.  

Wed Jul  2 16:46:03 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. get_search() cleanup and optimization.  

Wed Jul  2 16:26:17 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	More assertions were added. Please report any issue.  

Wed Jul  2 16:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some assertions were added. Please report any issue.  

Wed Jul  2 16:02:55 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	Minor cleanup. Please do not write a = b == c but a = (b == c).  

Wed Jul  2 12:05:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Misc. small cleanups.  

Wed Jul  2 12:01:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix printing of checking message.  

Wed Jul  2 10:46:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Calling xpand_lines() with part->data->data == NULL is a valid case.
	Assertion was modified. It fixes bug 221.  

Wed Jul  2 10:23:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.h, sched.h:

	Added comment by pasky of connection->pri + fix #includes.  

Wed Jul  2 02:17:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: connection.c, sched.c:

	Rename: h_conns -> host_connections.  

Wed Jul  2 02:07:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	You do not see this commit. You never saw any commit like this. This
	commit does not exist. Better go and have some reading on e2, and
	forget this whole thing. (Comments update.) 

Wed Jul  2 02:06:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Fix BACKTRACE being wrongfully defined.  

Wed Jul  2 01:52:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	term being NULL is a valid case in get_bfu_color().  

Wed Jul  2 00:47:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/lua/hooks.lua.in:

	Prefixes by involved (aka A. Valente) and Grzegorz Adam Hankiewicz
	added.  

Wed Jul  2 00:44:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, cache/cache.c, cache/cache.h, document/cache.c,
	document/cache.h, sched/connection.c, sched/sched.c, util/types.h:

	Move type declarations from elinks.h to util/types.h but pasky still
	needs to rebuild *MUAHAHAHA* 

Wed Jul  2 00:16:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: elinks.h, cache/cache.h, document/cache.h,
	sched/connection.h, sched/sched.h:

	Minor #include cleanups and move longlong #define to elinks.h 

Tue Jul  1 22:39:00 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	A bug in entities cache was fixed. &Agrave;&agrave; gave two upcased
	chars, and &agrave;&Agrave two lowcased chars due to a case
	insensitive comparaison. Trivial.  

Tue Jul  1 22:06:34 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	XD_TOP -> XD_UP, XD_BOTTOM -> XD_DOWN 

Tue Jul  1 22:04:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimizations in set_xchar() and draw_frame_lines(). An enum was
	introduced for direction parameter of set_xchar().  

Tue Jul  1 21:36:38 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Last bits of draw_form_entry() cleanup.  

Tue Jul  1 21:24:04 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup and optimization in draw_form_entry(), case FC_TEXTAREA.  

Tue Jul  1 21:06:44 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup in draw_form_entry(), case FC_TEXTAREA, step 1.  

Tue Jul  1 20:59:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some declarations and one affectation were moved near where they are
	used.  

Tue Jul  1 20:51:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Reverted patches concerning get_last_link() and get_first_link(),
	they are buggy and cause segfaults.  

Tue Jul  1 20:22:01 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Oops, last patch was fixed. ;) 

Tue Jul  1 20:16:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in draw_form_entry(), case FC_FILE. Please review
	carefully.  

Tue Jul  1 19:50:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_last_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 19:47:12 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization in get_first_link(), tests against (locally) constant
	values were moved out of the loop. Please review.  

Tue Jul  1 18:26:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Indentation fixed, and small cleanup.  

Tue Jul  1 16:27:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: uri.c, uri.h, url.c:

	Use struct uri to pass uri component.  

Tue Jul  1 15:22:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: Makefile.am, uri.c, uri.h, url.c:

	Move parse_url() handling to new parse_uri().  

Tue Jul  1 15:07:09 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	get_form_url() cleanup and optimization.  

Tue Jul  1 14:28:48 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_controls() cleanup and optimization.  

Tue Jul  1 14:12:46 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	encode_multipart() cleanup and optimization.  

Tue Jul  1 00:00:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Small optimization + use of assertm.  

Mon Jun 30 23:23:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optim. in get_c_width().  

Mon Jun 30 23:20:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in format_table().  

Mon Jun 30 23:08:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations in display_table_frames().  

Mon Jun 30 22:57:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Cleanup and optimizations in format_table().  

Mon Jun 30 22:22:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some major optimizations were done in display_table_frames().  

Mon Jun 30 21:47:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	draw_frame_vline() was optimized.  

Mon Jun 30 21:17:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_heights() cleanup and optimization.  

Mon Jun 30 21:00:28 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	check_table_widths() cleanup attempt. Old inactive and/or debugging
	code was removed. Some optimizations were made.  

Mon Jun 30 20:32:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	A TODO comment was added concerning distribute_widths().  

Mon Jun 30 18:01:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_table_width() cleanup and optimization.  

Mon Jun 30 17:50:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	get_column_widths() cleanup and optimization.  

Mon Jun 30 10:05:16 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	leet.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po,
	sk.po, sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 29 22:32:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Some gotos and for were replaced by while loops in new_cell().  

Sun Jun 29 22:20:52 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	expand_cells() was optimized a bit.  

Sun Jun 29 22:13:40 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	In calloc() we trust...  

Sun Jun 29 22:12:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Fields reordering aka padding prevention.  

Sun Jun 29 21:55:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	get_bfu_color() was optimized.  

Sun Jun 29 16:07:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimization.  

Sun Jun 29 15:55:31 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	A variable declaration was moved near where it is used.  

Sun Jun 29 15:51:15 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Multiple if were replaced by a switch.  

Sun Jun 29 12:52:12 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Loading message was inappropriate, it was replaced by "No document"
	message.  

Sun Jun 29 12:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Cleanup, optimizations concerning tab bar. A loading message is now
	printed when we do not have any title yet, and a tab separator is
	now printed.  

Sat Jun 28 23:34:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, dialogs/mime.c,
	mime/dialogs.c, mime/backend/default.c:

	Introduce generic function for encoding/decoding option names.  

Sat Jun 28 23:07:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	Minor cleanup + use of register keyword.  

Sat Jun 28 21:43:55 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, os_dep.h, osdep.c, osdep.h:

	Cleanup.  

Sat Jun 28 11:56:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Cleanup.  

Sat Jun 28 11:13:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/osdep/: os_dep.c, osdep.c:

	Tidyup.  

Sat Jun 28 10:47:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: cache/cache.h, document/cache.h, lowlevel/af_unix.h,
	lowlevel/dns.h, lowlevel/interlink.h, lowlevel/select.h,
	osdep/os_dep.h, osdep/osdep.h, protocol/ftpparse.h,
	protocol/ftp/ftpparse.h:

	Rename header file guards.  

Sat Jun 28 10:46:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Use bitwidth of one for boolean members.  

Sat Jun 28 09:52:30 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Patches causing bugs 214 and 218 were reverted. It fixes bug 218.  

Fri Jun 27 20:51:54 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	checkboxes_width() was optimized a bit.  

Fri Jun 27 20:44:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	min_max_checkboxes_width() was renamed checkboxes_width().  

Fri Jun 27 20:42:37 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/inpfield.c, bfu/msgbox.c, bfu/text.c,
	bfu/text.h, bfu/hierbox.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/hierbox.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c, sched/download.c, scripting/lua/core.c:

	min_max_text_width() was renamed text_width().  

Fri Jun 27 20:39:32 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/group.c,
	bfu/inpfield.c, bfu/msgbox.c, config/dialogs.c, dialogs/auth.c,
	protocol/auth/dialogs.c, bfu/hierbox.c, dialogs/edit.c,
	dialogs/hierbox.c, dialogs/mime.c, dialogs/options.c,
	mime/dialogs.c, sched/download.c, scripting/lua/core.c:

	min_max_buttons_width() was renamed  buttons_width().  

Fri Jun 27 20:34:54 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	checkboxes_width() was replaced with min_max_checkboxes_width().  

Fri Jun 27 20:22:28 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, scripting/lua/core.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:19:08 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c, dialogs/mime.c,
	mime/dialogs.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:16:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, protocol/auth/dialogs.c,
	dialogs/edit.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:12:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: msgbox.c, inpfield.c:

	min_max_text_width() is now used.  

Fri Jun 27 20:11:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: text.c, text.h:

	min_max_text_width() was introduced.  

Fri Jun 27 19:57:49 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:54:17 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, sched/download.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:50:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c, dialogs/mime.c,
	mime/dialogs.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:46:47 2003  Laurent Monin <zas@norz.org>:

	* src/: config/dialogs.c, dialogs/auth.c, protocol/auth/dialogs.c,
	dialogs/edit.c:

	min_max_buttons_width() is used.  

Fri Jun 27 19:44:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: checkbox.c, group.c, inpfield.c, msgbox.c:

	Populate with min_max_buttons_width().  

Fri Jun 27 19:36:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, button.h:

	min_max_buttons_width() was introduced, it does the same job that
	min_buttons_width() and max_buttons_width() successive calls.  

Fri Jun 27 19:26:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/button.c:

	Indentation level was reduced in display_button().  

Fri Jun 27 01:52:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, po/leet.po, src/intl/gettext/libintl.c:

	1337 |_@|\|6|_|463 VV45 4|)|)3|).  

Fri Jun 27 00:16:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Cleanup and remove stale function declaration.  

Fri Jun 27 00:01:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Cleanup check_protocol().  

Thu Jun 26 23:49:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Eliminate get_prot_info() by adding one more accessor and
	simplifying get_protocol_*handler().  

Thu Jun 26 22:09:24 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	An obsolete TODO comment was removed.  

Thu Jun 26 21:50:04 2003  Laurent Monin <zas@norz.org>:

	* po/README:

	Some notes about #~ and make update-po were added.  

Thu Jun 26 21:39:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	enum uri_scheme -> enum protocol, @scheme -> @protocol. This
	finalizes the 'scheme' term evaporation.  

Thu Jun 26 21:34:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Rename: SCHEME_* -> PROTOCOL_*, requested by pasky.  

Thu Jun 26 21:19:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	The protocol (external) handler function has now its own type
	(protocol_(external_)handler) ! This could ease things a little for
	those with weaker in-mind C parser.  

Thu Jun 26 21:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/http/https.c:

	Great! Pasky joins the fun and every goes down the drain! ;) fix
	func -> handler rename.  

Thu Jun 26 21:09:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/protocol.c, protocol/protocol.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Normalize some methods: get_protocol_handle() ->
	get_protocol_handler(), get_external_protocol_function() ->
	get_protocol_external_handler().  

Thu Jun 26 21:07:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, finger.c, ftp.c, protocol.c, protocol.h,
	user.c, file/file.c, ftp/ftp.c, http/http.c, http/https.c:

	protocol_backend.(func -> handler, nc_func (which was NoCache_func)
	-> external_handler). Have a nice night spent by conflicts
	resolving, Jonas :-).  

Thu Jun 26 20:57:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/protocol.c:

	Minor tidyup and reindentation.  

Thu Jun 26 20:19:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Add and user accessors for protocol backends members. I feel better
	already :) 

Thu Jun 26 20:04:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file.h, finger.c, finger.h, ftp.c,
	file/file.c, file/file.h, ftp/ftp.c, ftp.h, protocol.c, user.c,
	user.h, ftp/ftp.h, http/http.c, http/http.h, http/https.c,
	http/https.h:

	Move all protocol backend declarations out. (Warning big patch, but
	simple) + fix some unconforming guards in the header files met on
	the way.  

Thu Jun 26 19:17:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h, url.c:

	Use enum uri_scheme.  

Thu Jun 26 19:11:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* test/href_tests.html:

	Added file://localhost/ test ;) 

Thu Jun 26 18:35:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.h:

	Introduce uri_scheme enum.  

Thu Jun 26 18:34:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	Make struct protocol_backend public for now atleast.  

Thu Jun 26 18:14:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/protocol.c:

	Start the process of backending the protocol/ handling.  

Thu Jun 26 17:06:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/Makefile.am, protocol/url.c, protocol/url.h,
	sched/connection.c, sched/sched.c, sched/session.c:

	Integrate and use file added by last commit.  

Thu Jun 26 17:02:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: protocol.c, protocol.h:

	The basic protocol implementation management moved from
	protocol/url.* 

Thu Jun 26 16:49:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/url.c:

	Encapsulate @protocols access even further so we easier split it
	out.  

Thu Jun 26 16:37:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/Makefile.in:

	Add README to DISTFILES ...  

Thu Jun 26 16:24:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/README:

	Some basic introduction for translators. Idea by zas.  

Thu Jun 26 14:28:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/.cvsignore:

	Add elinks.pot just in case.  

Thu Jun 26 13:55:55 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c, intl/charsets.h,
	document/html/colors.c, document/html/colors.h,
	document/html/parser.c, document/html/parser.h:

	fastfind initializations are now done at start, using
	init_xxx_lookup() functions. This prevents a superfluous test at
	search time.  

Thu Jun 26 13:26:57 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, intl/charsets.c:

	get_cp_index() now uses fastfind (if USE_FASTFIND is defined).  

Thu Jun 26 11:24:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Reverted part of the patch. Do test for '..' ;).  

Thu Jun 26 11:10:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Misc small cleanups and optimizations and fixes: 
		Don't test for ".." when comparing directory entries.  
		Only pass the @dirpath length to add_dir_entry().  
		Only iterate over @entries if nonempty, and test before free()ing
		it.  

Thu Jun 26 09:39:37 2003  Laurent Monin <zas@norz.org>:

	* Unicode/7bit.cp, Unicode/7bitrepl.lnx, Unicode/8859_1.cp,
	Unicode/8859_10.cp, Unicode/8859_13.cp, Unicode/8859_14.cp,
	Unicode/8859_15.cp, Unicode/8859_16.cp, Unicode/8859_2.cp,
	Unicode/8859_3.cp, Unicode/8859_4.cp, Unicode/8859_5.cp,
	Unicode/8859_6.cp, Unicode/8859_7.cp, Unicode/8859_8.cp,
	Unicode/8859_9.cp, Unicode/cp1250.cp, Unicode/cp1251.cp,
	Unicode/cp1256.cp, Unicode/cp1257.cp, Unicode/cp437.cp,
	Unicode/cp850.cp, Unicode/cp852.cp, Unicode/cp866.cp,
	Unicode/koi8_r.cp, Unicode/macroman.cp, Unicode/tcvn5712.cp,
	Unicode/tr7bit.awk, Unicode/viscii.cp, src/intl/codepage.inc,
	src/intl/uni_7b.inc:

	Charsets aliases were updated using information from iana.org, and
	GNU recode utility.  

Thu Jun 26 08:29:15 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. A bg.po warning was fixed.  

Wed Jun 25 10:30:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Optimization: memmove(p, p, n) is useless.  

Wed Jun 25 10:27:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Minor cleanup.  

Wed Jun 25 10:15:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Simplify and optimize stat_date().  

Wed Jun 25 09:57:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanup stat_user() and split it up.  

Wed Jun 25 09:06:58 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Bug 214 was fixed. It was introduced by last "viewport - 1" patch.
	Pasky, please review the fix ;).  

Wed Jun 25 08:39:06 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Bug 213 was fixed. We eat &nsbp &nbsp<foo>, but not &nbsp&nbsp123 or
	&nbsp=123 ...  

Tue Jun 24 23:55:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Inline stat_* functions + group them.  

Tue Jun 24 23:00:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Include the set*() functions in stat_mode().  

Tue Jun 24 22:43:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Split up stat_mode().  

Tue Jun 24 22:21:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanup stat_* functions.  

Tue Jun 24 21:44:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make xmlto the preferred doctool (the only one that can build the
	book).  

Tue Jun 24 20:58:28 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Some esotheric speech about changes.  

Tue Jun 24 20:57:02 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Some errors were fixed. Author was added. Translators please review.  

Tue Jun 24 20:49:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/hacking.txt:

	Update the language file section, fix expanded CVS tags and add
	comment about splitting big patches.  

Tue Jun 24 20:46:05 2003  Laurent Monin <zas@norz.org>:

	* po/bg.po:

	Fatal errors were fixed in recent translation update. Concerned
	translators should check that.  

Tue Jun 24 20:14:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	Changes from mime/ integration and the new show_hidden_files.  

Tue Jun 24 20:13:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/Makefile.am, book/Makefile.doc, book/TODO,
	book/manpages/Makefile.am, tools/help2doc:

	Misc small fixes and updates all over the map. Sorry.  

Tue Jun 24 17:52:34 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, po/bg.po:

	Some bulgarian translation updates by dinux <dinux@mail.bg>.  

Tue Jun 24 14:56:08 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Stupid patch was reverted. Reported by Pasky.  

Tue Jun 24 14:47:51 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	A comment was added about a strange part of code...  

Tue Jun 24 14:29:48 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Code redundancy was reduced.  

Tue Jun 24 12:32:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Minor clearifying cleanups.  

Tue Jun 24 12:08:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Purify the directory_entry allocation by making @name contain whole 
	path, so concatenation in add_dir_entry() isn't needed.  Also fix
	some possible leaks in the allocation.  

Tue Jun 24 10:03:19 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	A useless comment was removed.  

Tue Jun 24 09:37:30 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/screen.c:

	redraw_screen() was optimized, a useless test was removed, it fixes
	the status bar which was not drawn until its end.  

Tue Jun 24 01:51:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Inline all the split up functions and (my) cleanups should be done.  

Tue Jun 24 01:35:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Reduce the number of variables.  

Tue Jun 24 01:29:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanup the listing of (sym)links.  

Tue Jun 24 01:19:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	'Cache' html escaped entry->name to simplify and optimize.  

Tue Jun 24 00:35:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Relocate the testing of link is directory.  

Tue Jun 24 00:26:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Get ready to streamline the code for adding link entries.  

Tue Jun 24 00:07:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Minor cleanup and commenting.  

Mon Jun 23 23:36:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Sorry re^2name: (file_)info -> (file_)data seems more appropriate.  

Mon Jun 23 23:29:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Split out the adding of one directory entry to the fragment. Last
	one! ;) 

Mon Jun 23 23:12:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	:s/filename/dirpath/ in directory functions.  

Mon Jun 23 23:10:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Split out the adding of directory entries to the fragment.  

Mon Jun 23 22:41:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Another bunch of renames + small optimizations by sharing strlen()
	results.  

Mon Jun 23 21:53:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: dirs -> directory_entry + its members.  

Mon Jun 23 21:47:23 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Various optimizations: mark screen as dirty only if needed, make use
	of register, and move calculations outside loops (in fill_area()).  

Mon Jun 23 21:14:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanup.  

Mon Jun 23 15:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanups and comments.  

Mon Jun 23 14:47:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanups and commenting.  

Mon Jun 23 05:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Big cleanup removing lot's of redundant code by grouping and
	indenting. Also added a few comments.  

Mon Jun 23 03:11:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: d -> directory.  

Mon Jun 23 03:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Readd test of @stream. Hmm where did it go? 

Mon Jun 23 03:04:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: e -> cache.  

Mon Jun 23 02:55:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: c -> connection.  

Mon Jun 23 02:43:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Slim redundant error handling code.  

Mon Jun 23 02:27:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Test @stream before using it.  

Mon Jun 23 02:24:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Cleanup.  

Mon Jun 23 02:21:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Split out file reading to separate function.  

Mon Jun 23 01:49:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Move trying of encoding extensions to separate function and simplify
	it.  

Mon Jun 23 00:51:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Simplify so guess_encoding() is only called on filenames where
	encoding extensions have not been tried.  Plus we are not really
	interested in the filename of some tried encoding extension.  

Mon Jun 23 00:08:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Quite huge patch splitting out the directory listing to separate
	function.  

Sun Jun 22 23:17:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Updating at DIKU led to this fix for bug introduced in revision
	1.38.  

Sun Jun 22 17:32:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Oops fix @tmp not being used.  

Sun Jun 22 17:24:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Misc cleanups + 2 leak fixes 

Sun Jun 22 16:47:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	More renames.  

Sun Jun 22 16:43:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: fl -> fragmentlen.  

Sun Jun 22 16:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: file -> fragment.  

Sun Jun 22 16:28:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Followup cleanup: move vars close to their usage.  

Sun Jun 22 16:19:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	First try to open @name as a directory.  This greatly simplifies the
	code path and means there's only one entry point into the dir code.  

Sun Jun 22 16:03:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Combine !S_ISREG() branch with regular file branch.  

Sun Jun 22 15:44:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, util/error.h:

	GCC 3.3 do_not_optimize_here() introduced and used in tp_display()
	so vs.plain is set properly.  

Sun Jun 22 12:17:49 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jun 22 12:13:30 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/file.c, protocol/file/file.c:

	An option to specify if hidden files should be shown in local
	directory listing was added (protocol.file.show_hidden_files). It
	defaults to 1 for now to preserve old behavior.  

Sat Jun 21 22:45:38 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	How should all the .c and .h files start.  

Sat Jun 21 22:40:09 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Undo :). Everything is fine ;).  

Sat Jun 21 22:39:27 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/README:

	Dummy commit just to test whether ciabot still works fine even in
	multidirs situation.  

Sat Jun 21 15:12:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Move the directory coloring closer to where it is used.  

Sat Jun 21 14:55:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Decentralize @readlen.  

Sat Jun 21 14:45:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Rename: h -> fd, r -> readlen.  

Sat Jun 21 14:30:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.h:

	Standarized .h header. Zassie zassie... *sigh* 

Sat Jun 21 14:28:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Sticked a TODO about the troubles of l10n in the protocol/ corner.  

Sat Jun 21 14:25:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, http.c:

	http_connection_info.(error_code -> http_code). It is set to @h
	always, regardless on @h's value. http_error_document() itself tests
	whether the code is suitable for generic error document or not.
	Also, don't show the generic error document for documents with
	status 3xx.  

Sat Jun 21 14:19:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element content is now bold.  

Sat Jun 21 14:19:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	<h1> element now triggers not html_center() but html_h1(), which is
	like html_h2() but w/ default alignment AL_CENTER.  

Sat Jun 21 14:13:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	html_h() now takes additional parameter @default_align.  

Sat Jun 21 14:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintfa() instead of asprintf().  

Sat Jun 21 14:10:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	(v)asprintfa() ELinks memory managment wrappers for vasprintf()
	introduced.  

Sat Jun 21 14:07:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: file.c, file/file.c:

	Minor cleanup.  

Sat Jun 21 13:43:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, protocol/file/file.c, encoding/encoding.c,
	encoding/encoding.h, util/encoding.c, util/encoding.h:

	Rename NB_KNOWN_ENCODING -> ENCODINGS_KNOWN 

Sat Jun 21 13:25:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/: README, completion.tcsh:

	Fix typo and added note about how out dated tcsh completions are.  

Sat Jun 21 13:16:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Correctly cast &str in the asprintf() call.  

Sat Jun 21 13:15:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Use asprintf() instead of vasprintf(), fixed the calling semantics.
	*hide* 

Sat Jun 21 13:14:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Extended the error message by some dumb talk about what happenned.  

Sat Jun 21 13:01:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Compilation fix: info->error_code -> @code in http_error_document().  

Sat Jun 21 13:01:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Removed now superfluous @errs from http_error_document().  

Sat Jun 21 13:00:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	The error document is now a format string. Tidied up the generated
	document.  

Sat Jun 21 12:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: codes.c, codes.h, http.c:

	Moved the error document generator from thats_all_folks fragment of
	read_http_data() to http_error_document(), placed in
	protocol/http/codes.c.  

Sat Jun 21 12:29:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Added missing inclusion of codes.h, removed superfluous stdio.h
	inclusion.  

Sat Jun 21 12:28:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/codes.c:

	Normalized the file header. The second time already. *grumble* 

Sat Jun 21 12:26:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Oops, added forgotten break in the chunk loop ;-).  

Sat Jun 21 12:12:51 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Typo fix.  

Sat Jun 21 12:10:48 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: Makefile.am, codes.c, codes.h, http.c:

	Text error message corresponding to error code is now printed.
	codes.{c,h} provide a way to check if code is known and if yes,
	which is its associate message.  

Sat Jun 21 12:03:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Sticked a TODO.  

Sat Jun 21 12:03:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Converted some of the HTTP error dummy document to lowercase.  

Sat Jun 21 12:01:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunk decoding loop was converted from goto teleports to a while
	(1) loop.  

Sat Jun 21 11:58:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	The chunked branch moved outside of an else branch, the not-chunked
	branch now jumps at read_more at the end. I didn't reindent the
	chunked branch and i know why.  

Sat Jun 21 11:54:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Moved the thats_all_folks code at the end of read_http_data().  

Sat Jun 21 11:52:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Random minor cleanups --- mostly just reindentations.  

Sat Jun 21 11:06:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	error_code replaces code and is_error integers.  

Sat Jun 21 11:02:39 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix for bug 165 was improved a bit, now title is set.  

Sat Jun 21 10:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fast hack to fix bug 165. Feel free to improve.  

Sat Jun 21 09:09:08 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun 21 08:54:53 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	A now useless comment was removed.  

Sat Jun 21 08:48:11 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, lowlevel/af_unix.c, lowlevel/interlink.c:

	General cleanup. MAX_BIND_TRIES was removed from setup.h since it is
	only used in af_unix.c/AF_INET and there is no need for the user to
	change it. Code related to perhaps future remote mode was removed.  

Sat Jun 21 08:06:22 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Compilation fix: incomplete renaming of stat to status broke
	compilation, it was fixed. Pasky please review.  

Sat Jun 21 00:33:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Cleanup --- random variables renamed, some tests moved to nicer
	places and so on.  

Sat Jun 21 00:26:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved -dump implementation from dump_end() into dump_formatted().  

Sat Jun 21 00:21:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	stat->ce->... -> ce->...  

Sat Jun 21 00:17:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Oops, dump_source()'s return value fix.  

Sat Jun 21 00:17:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Reduced indentation.  

Sat Jun 21 00:16:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Moved the -source code from dump_end() into dump_source().  

Sat Jun 21 00:03:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Reverted most of the recent changes done in the realm of
	parse_element() and get_attr_val(). They were buggy beyond repair
	and it was agreed that they should go. I tried to preserve at least
	part of the cleanups done in the meantime, so some variable renames
	etc could be carried over.  

Fri Jun 20 23:34:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, util/encoding.c:

	Rename decoding_handler -> decoding_backend to better reflex the
	recent changes.  

Fri Jun 20 23:02:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, encoding/encoding.h,
	protocol/http/http.c, util/encoding.c, util/encoding.h:

	Further encapsulate the decoding handlers by making the name part of
	the backend.  

Fri Jun 20 20:20:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Cleanups.  

Fri Jun 20 19:02:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: encoding/encoding.c, util/encoding.c:

	Oops, wrong line deleted in dummy_decode() ;-). Fixed.  

Fri Jun 20 18:54:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: encoding/encoding.c, util/encoding.c:

	In the *_decode() methods, don't uselessly duplicate the data block
	but return the original one.  

Fri Jun 20 18:51:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	uncompress_data() leading comment reorganization into standard form,
	minor typo fixes and some details added.  

Fri Jun 20 18:21:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, config/options.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	Reverted the last patch. As I indicated clearly, this has no
	business in HEAD and should live in a branch on its own.  

Fri Jun 20 18:20:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: encoding/encoding.c, encoding/encoding.h, util/encoding.c,
	util/encoding.h:

	Introduced @decode method to the encoding object. It's dummy and
	returns just copy of its arguments in all encodings for now.  

Fri Jun 20 18:13:08 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	setup.h:

	Experimental remote mode is now (almost) functionnal. To test define
	ELINKS_REMOTE in setup.h, compile elinks, add a second ip to your
	machine or use a second machine, then launch elinks -listen
	<your_first_ip> on one side, and elinks -remote <your_first_ip> on
	the second side. There is many things to improve, and it may not
	function as you hope it does, but feel free to provide enhancements.
	Note this feature may disappear soon if none is interested in.
	Please report issues/comments/ideas/bugs on #elinks.  

Fri Jun 20 17:30:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: modules/version.c, util/version.c:

	LED indicators support.  

Fri Jun 20 17:29:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Use vsnprintf() instead of elinks_vsnprintf() inside of
	elinks_snprintf(). Quite unlikely to be needed, but Radim Kolar
	<hsn@cybermail.net> has a point anyway ;-) (<- idea).  

Fri Jun 20 17:28:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	The quick hack version of using encoding extensions in content type
	resolving (enhance bug 26) 

Fri Jun 20 17:16:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Some comments reorganization.  

Fri Jun 20 16:45:09 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	addr_info was renamed to socket_info which is more adequate, imho.  

Fri Jun 20 16:33:07 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	s_addr name may clash on Solaris, so all our s_addr were renamed to
	addr.  

Fri Jun 20 16:26:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, util/encoding.c:

	Fix problem with @extensions that made gcc-2.96 choke.  

Fri Jun 20 15:55:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, util/encoding.c:

	Simplify extension handling by making the extension list a backend
	member.  

Fri Jun 20 15:37:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: encoding/encoding.c, encoding/encoding.h, util/encoding.c,
	util/encoding.h:

	Cleanups.  

Fri Jun 20 15:24:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: protocol/file.c, protocol/file/file.c, encoding/encoding.c,
	encoding/encoding.h, util/encoding.c, util/encoding.h:

	Move guess_encoding() to a more appropriate so it will available to
	mime/.  

Fri Jun 20 14:08:43 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/url.c:

	Support for file://localhost/, fixes bug 107, based on patch by Hugo
	Haas <hugo@larve.net>.  

Fri Jun 20 13:56:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/backend/common.c, mime/backend/common.h,
	protocol/url.c, protocol/url.h:

	Move get_extension_from_url() to proper place.  

Fri Jun 20 13:50:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	get_extensionpart_from_url() -> get_extension_from_url(),
	@extensionpart -> @extension inside.  

Fri Jun 20 12:51:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/cookies/cookies.c:

	Another act of brutality from the 'Alphabetic Order of Header File'
	PD.  

Fri Jun 20 12:06:06 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Indentation fix.  

Fri Jun 20 12:04:10 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Fix a potential issue: in some cases, we try to free a NULL pointer,
	a little step to ELinks remote mode was done.  

Fri Jun 20 11:03:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	enum addr_type was introduced, it will be used soon for remote
	ELinks access.  

Fri Jun 20 08:09:42 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	af_unix_close() was fixed, in certain cases, we closed fd 0.
	session-ring now works with AF_INET too, we just bind/connect on
	ELINKS_PORT + session-ring number.  

Fri Jun 20 07:41:48 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Repetitive select() errors may cause an infinite loop. A minor hack
	prevents it.  

Fri Jun 20 01:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Mindre opdatering af dansk oversættelse. ;p 

Thu Jun 19 22:38:12 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, lowlevel/af_unix.c, lowlevel/af_unix.h,
	lowlevel/interlink.c, lowlevel/interlink.h:

	bind_to_af_unix() was splitted. connect_to_af_unix() and
	af_unix_open() were introduced. Please torture and review.  

Thu Jun 19 12:22:15 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for bug 209: do not call copy_chars() if not needed.  

Thu Jun 19 09:32:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	struct s_addr_info was introduced, it permit to get rid of s_unix,
	s_unix_l, s_unix_fd.  

Wed Jun 18 21:16:11 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	elinks_usleep() was introduced, it resides here for now.  

Wed Jun 18 20:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Prevent memleak in alloc_address(), assertions are now used.  

Wed Jun 18 20:29:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	alloc_address() was introduced.  

Wed Jun 18 20:11:01 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	void unlink_unix() -> void unlink_unix(struct sockaddr *s_addr) 

Wed Jun 18 20:05:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_sun_path() was introduced, it computes unix socket path.  

Wed Jun 18 19:44:49 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	get_address() now set values of passed parameters.  

Wed Jun 18 18:58:43 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Humm, better like that. ;) 

Wed Jun 18 18:39:12 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Well, struct sockaddr_un is a total mess. So i did it like that,
	have a look and comment.  

Wed Jun 18 17:21:17 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	part->data->data == NULL is acceptable in line_break() but there is
	no need to call xpand_lines() or following stuff in this case.
	Assertion was replaced by a if + goto end. It fixes bug 206 reported
	by pasky.  

Wed Jun 18 17:00:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Compilation fix: stdlib.h was not included, and free() declaration
	was missing.  

Wed Jun 18 14:04:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Use string utils for @saved option names. Fixes bug 207.  

Wed Jun 18 12:10:23 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Use SUN_LEN() macro to evaluate to actual length of the sockaddr_un
	structure and provide a definition of it for systems that may not
	have it.  

Wed Jun 18 11:53:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Moved the #includes back near the COL() and get_bfu_color()
	declaration, keeping the tightly related and somewhat alien stuff
	together. Hm, the #includes position doesn't really matter here, but
	when I was already doing at, I moved it back as I liked it more
	before. I don't care, though.  

Wed Jun 18 11:49:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Fixed memory leak in elinks_assertm() (@buf wasn't free()d). Also
	fixed possible usage of undefined value if @buf allocation failed.  

Wed Jun 18 11:46:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Tab must have always a terminal attached, must not it? 

Wed Jun 18 10:49:45 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	AF_UNIX get_address() was reworked. A check about too long path
	(elinks_home) was added. An error produced by connect() is ignored,
	since this case is normal.  

Wed Jun 18 08:51:25 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Adequate error messages are now printed on socket(), connect(),
	bind() failures.  

Wed Jun 18 08:20:38 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Dummy entry to fix last message log: accept() failure is now
	handled.  

Wed Jun 18 07:59:47 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Connect() failure is now handled.  

Wed Jun 18 07:48:33 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Some variables were marked as static, minor comments were added
	about future work to be done here.  

Wed Jun 18 01:55:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: modules/version.h, util/conv.h, util/hash.h,
	util/version.h:

	Cleanups.  

Wed Jun 18 01:11:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/align.h:

	Tidyup: Move enum declaration below header files.  

Wed Jun 18 01:05:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/hotkey.h:

	Convert to standard header file format.  

Wed Jun 18 00:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/listbox.h:

	Declare one-bit fields unsigned.  

Wed Jun 18 00:55:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Added TODO note about trouble with usage of (v)asprintf() under
	--enable-debug mode.  

Wed Jun 18 00:34:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	In try_extension_type() always do lookup with xwin on (even if ...)
	since we are only interested in the content type.  

Wed Jun 18 00:30:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: mime/mime.c, mime/mime.h, sched/download.c:

	No need to let mime/ know about terminals only about xwin
	capabilities.  

Wed Jun 18 00:21:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.h:

	Removed @flags member that is now represented by bitfields.  

Wed Jun 18 00:19:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	Removed comment that has been moved to header file.  

Wed Jun 18 00:09:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation updated.  

Tue Jun 17 23:47:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish update, that goes out to Miciah who doesn't speak a word
	Danish and still spotted a few errors in my translations. One
	thorough reviewer ;) 

Tue Jun 17 23:44:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Character sequence '< ' in <PRE></PRE> caused the document to not be
	entirely rendered. This was introduced by bug 200 fix. Concerned
	code was fixed.  

Tue Jun 17 23:23:46 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Static + minor cleanup.  

Tue Jun 17 23:04:52 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Redundant code was moved to a FF_SEARCH() macro. Idea by Pasky ;).  

Tue Jun 17 16:47:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Case sensitivity test was finally moved outside the loop, as it was
	planned. Now fastfind_search gives maximum performance.  

Tue Jun 17 16:26:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Clustered @head initialization in format_html().  

Tue Jun 17 16:18:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed segfault caused by carelessly placed assertm() in process_link
	fragment of put_chars(), reported by zas.  

Tue Jun 17 16:17:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup. assert(ce && screen) only if @head allocation didn't
	fail.  

Tue Jun 17 16:12:30 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	assert(): valid chars only at index time too.  

Tue Jun 17 16:10:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor get_convert_table() cleanup. Removed now useless tests for
	(head) (it is assert()'d).  

Tue Jun 17 16:07:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Tidyup.  

Tue Jun 17 16:07:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Account the recently introduced FF_MAX_CHARS if. And move it after
	interinc().  

Tue Jun 17 16:04:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted zas' 'fix', unreverting mine ;-).  

Tue Jun 17 15:58:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Fix a fatal bug: do not even consult index if char is not in a valid
	range. Bug reported by Pasky.  

Tue Jun 17 15:56:43 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix bad assertm().  

Tue Jun 17 15:27:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	And handle more gracefully the assert()ion failure.  

Tue Jun 17 15:26:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Assert about part->data->nlinks in put_chars() process_link
	fragment. This reflects the original code.  

Tue Jun 17 15:07:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup.  

Tue Jun 17 15:02:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reintroduced (p->data) assertion into xpand_line, it is not a valid
	situation even on the display_complicated_table() call path.  

Tue Jun 17 14:52:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Attempted to make the execution flow more intuitive.  

Tue Jun 17 14:51:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Indentation fix.  

Tue Jun 17 14:43:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_line() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_line() call path.  

Tue Jun 17 14:41:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reverted xpand_lines() assert(p->data) instead of just returning. It
	is apparently valid at the display_complicated_table() ->
	expand_lines() call path.  

Tue Jun 17 14:36:23 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about assert() and assertm() was added.  

Tue Jun 17 14:33:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A missing assertion p->data->data != NULL was added.  

Tue Jun 17 14:30:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	The bad "weird test" change was fixed. Reported by Pasky.  

Tue Jun 17 14:13:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Last steps to assert() generalization. Please report any assert()
	failure.  

Tue Jun 17 13:42:36 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:29:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 13:24:47 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless test was removed. A missing assert() was added.  

Tue Jun 17 13:18:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A weird test was reworked.  

Tue Jun 17 13:10:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Label no_l was renamed to no_link.  

Tue Jun 17 13:06:42 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A useless label and a goto were removed.  

Tue Jun 17 13:04:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:51:44 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:47:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:43:27 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 12:31:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Reverted reverting of changes. They are _not_ too agressive.  

Tue Jun 17 11:52:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Partially reverted some of the assert()ization, some of the changes
	seemed way too agressive.  

Tue Jun 17 11:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:29:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:26:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Next steps to assert() generalization.  

Tue Jun 17 11:21:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	First steps to assert() generalization.  

Tue Jun 17 11:11:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	_GNU_SOURCE #defining should be the very first thing we do.  

Tue Jun 17 11:09:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Reverted the removal of HAVE_C99_SNPRINTF test, we *DO* want to use
	our snprintf() if the system's doesn't provide C99 return value
	semantic. Oh, and s/C99_SNPRINTF/C99_VSNPRINTF/ ;-).  

Tue Jun 17 08:55:39 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Attempt to reduce code redundancy was a bad thing. This code was not
	exactly redundant. Fixed.  

Tue Jun 17 07:43:32 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	split_line() was fixed. Bug introduced by a bad movesky :) 

Tue Jun 17 07:27:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Superfluous indentation was removed. split_line_at() is now declared
	inline.  

Tue Jun 17 07:17:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Define _GNU_SOURCE for vasprintf(). It fixes a compilation issue...  

Tue Jun 17 01:16:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.h:

	Removed apparently bogus defined(HAVE_C99_SNPRINTF) test. It was not
	AC_DEFINE'd in configure.in so it caused undefined reference to
	elinks_snprintf errors. Maybe it's time to at least take the time to
	compile before committing? 

Tue Jun 17 00:13:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/error.c:

	Correctly cast buffer pointer in vasprintf call.  

Mon Jun 16 16:43:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	When paging up/down, move by viewport_height - 1 rather than by
	viewport_height, making the first/last line common between the two
	states. I think this has rather big impact on ease of usability in
	some situations.  

Mon Jun 16 16:13:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use assertm() instead of the manual checks + internal() calls.  

Mon Jun 16 16:11:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Introduced (unexpectably kludgy, after all :[ ) assertm() macro,
	which can print out a user-provided message (defined by format
	string) if the assertion fails.  

Mon Jun 16 15:42:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Minor tidyup, spelling fixes.  

Mon Jun 16 15:37:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed redundant code in split_line_at() and split_line(), I hope
	the change is ok.  

Mon Jun 16 15:36:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Described split_line() and documented its return value.  

Mon Jun 16 15:22:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove pointless assignment.  

Mon Jun 16 15:17:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Forked split_line_at() from split_line(), just containing everything
	after the 'split:' label.  

Mon Jun 16 15:15:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed usage of @tmp from the 'trunk' part of split_line().  

Mon Jun 16 15:13:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@i -> @x in split_line().  

Mon Jun 16 15:01:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	The (i + 1) change reverted, I'm silly and zas is the god :).  

Mon Jun 16 15:00:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Use explicitly either (i + 1) or (i - 1) --- this fixes few bugs
	introduced by the simplification and also makes it a little easier
	to see what's moving around where, I think.  

Mon Jun 16 14:51:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Reduce comments noise.  

Mon Jun 16 14:50:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed the old split_line() implementation.  

Mon Jun 16 14:45:01 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Big code simplification in split_line().  

Mon Jun 16 14:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Removed stale variable usage, compilation fix.  

Mon Jun 16 14:33:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	set_hline() cleanup and minor parameters reordering.  

Mon Jun 16 14:30:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	@c -> @chars, @l -> @charslen in put_chars(_conv)().  

Mon Jun 16 14:12:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, renderer.h:

	part.spl -> part.spaces_len 

Mon Jun 16 14:08:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Grammar fix.  

Mon Jun 16 14:07:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Tidyup of split_line().  

Mon Jun 16 09:06:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix for &nbsp &nbsp<foo> is now complete.  

Mon Jun 16 00:40:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Small cleanup to use more general 'buffer layout'.  

Sun Jun 15 23:34:53 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Code was simplified by using straconcat().  

Sun Jun 15 23:25:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	More cleanups of type_query(). The 'What to do?' dialog is more
	informative.  

Sun Jun 15 23:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Fix the fix.  

Sun Jun 15 23:12:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix warning from using uninitialized variable. Hmm.  

Sun Jun 15 23:07:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/: mailcap.c, mailcap.h, mime.c, mime.h:

	Functionality for these files are now integrated in mime/ system.  

Sun Jun 15 23:05:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Finally also actually use the mime/ system. I am a happy man (or
	what ever I am) now. :) 

Sun Jun 15 23:04:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/Makefile.am:

	No need for protocol/ mime files anymore.  

Sun Jun 15 23:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/main.c:

	Install the new init/done hooks for the mime systems.  

Sun Jun 15 23:02:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/Makefile.am:

	Link in the mime system.  

Sun Jun 15 22:53:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Fix potential memleak.  

Sun Jun 15 22:44:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c, src/config/kbdbind.c,
	src/dialogs/menu.c, src/sched/connection.c, src/sched/sched.c,
	src/sched/session.c, src/scripting/Makefile.am,
	src/scripting/lua/core.c, src/scripting/lua/core.h,
	src/scripting/lua/hooks.c, src/scripting/lua/hooks.h,
	src/viewer/text/view.c:

	src/lua/* -> src/scripting/lua/*, inspired by kuser.  

Sun Jun 15 22:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/scripting/Makefile.am:

	Added src/scripting/Makefile.am, dummy for now.  

Sun Jun 15 22:32:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/: .cvsignore, .vimrc:

	More fairies.  

Sun Jun 15 22:32:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/: .cvsignore, .vimrc:

	Added fairies.  

Sun Jun 15 22:23:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@ct -> @ctype in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:22:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	@r -> @plaintext in ses_chktype(). Inspired by Jonas.  

Sun Jun 15 22:17:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Don't assume that option.flags bitmask contains just one flag when
	testing for OPT_AUTOCREATE --- test properly by &'ing it. Patch by
	kuser.  

Sun Jun 15 22:11:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/protocol/mailcap.c:

	Don't try to fix problems using a sledge hammer. Use options at
	mime.mailcap.*.  

Sun Jun 15 22:11:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Tidyup.  

Sun Jun 15 21:56:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Huh. Reverted strange patch by Jonas. It is not clear what exactly
	it fixes, and whatever it fixes, it certainly fixes it at the wrong
	place.  

Sun Jun 15 19:57:45 2003  Laurent Monin <zas@norz.org>:

	* src/sched/history.c:

	Bug 202 should be fixed by that.  

Sun Jun 15 19:12:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun Jun 15 17:21:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Elaborated a bit in the mime.mimetypes describtion. Hope it's ok Zas
	;).  

Sun Jun 15 17:11:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/download.c:

	Remove unused argument to type_query().  

Sun Jun 15 17:06:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	2nd step of mime/ integration. Move mailcap options to mime.* and
	introduce options for the mimetype backend.  

Sun Jun 15 16:58:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Fix grave option alias bug to actually fetch the aliased option.  

Sun Jun 15 15:59:34 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Hm, forgot to update NEWS. Whatever... ;-).  

Sun Jun 15 15:47:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* acconfig.h, configure.in:

	Compile time configuration for mimetypes backend.  

Sun Jun 15 15:25:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1.CVS --- let the fun begin again 

Sun Jun 15 15:20:28 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre1 

Sun Jun 15 15:10:49 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/book/Makefile.am:

	Typo fix.  

Sun Jun 15 15:04:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Upgrade myself to doc/book keeper.  

Sun Jun 15 15:01:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	ELINKS_CVSWEB_URL changed to http://cvsweb.elinks.or.cz/ ;-).  

Sun Jun 15 14:39:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, location.c, location.h, session.c:

	Reverted the last Jonas' patch, it ignored my remarks --- the
	direction argument is reverse than how it is commonly used and
	set_session_location() doesn't belong to sched/location.*.  

Sun Jun 15 14:35:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/: elinks.conf.5, elinkskeys.5:

	Oops. DISABLED notices removed.  

Sun Jun 15 14:28:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	First version using help2doc so a lot of changes. It's maybe needs
	some more work but _template_ and language help printing makes
	updating a must.  

Sun Jun 15 14:24:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man1/elinks.1.in:

	First version using the output from help2doc.  

Sun Jun 15 14:19:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Improve the description of ui.window_title so it contains the word
	xterm. Idea by Jeremy C. Reed <reed@reedmedia.net> 

Sun Jun 15 14:05:10 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, location.c, location.h, session.c:

	Encapsulate setting of the session location.  

Sun Jun 15 13:59:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Tadaaaaaaaaaaaaaaaaam. Use go_(un)back() in the loops traversing
	history/unhistory when moving by n>1 steps, instad of just manually
	moving the locations between lists. Accidentally, this also fixes
	the famous Bug 114. Good, time to start huge celebration! 0.5pre1 on
	its way.  

Sun Jun 15 13:59:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	No need to access session variables through task 

Sun Jun 15 12:59:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	First Tab, then Tab in background.  

Sun Jun 15 12:38:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/colors.c, document/html/parser.c,
	util/fastfind.c, util/fastfind.h:

	fastfind_terminate() -> fastfind_done() 

Sun Jun 15 12:36:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Finish the trampoline -> leafset change.  

Sun Jun 15 12:20:11 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Compilation fix.  

Sun Jun 15 12:07:19 2003  Laurent Monin <zas@norz.org>:

	* test/color.html:

	Color chart was added.  

Sun Jun 15 11:55:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor cleanup of fastfind_node_compress().  

Sun Jun 15 11:29:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor tidyup.  

Sun Jun 15 11:25:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	_Some_ current -> leafset changes.  

Sun Jun 15 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/html/parser.c, document/html/parser.h:

	free_tags_cache -> free_tags_lookup 

Sun Jun 15 11:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Comment fix.  

Sun Jun 15 11:17:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	trampoline -> leafset. Let's see how long _this_ name will stand :).  

Sun Jun 15 11:14:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	fastfind_node_compress() now takes directly @current.  

Sun Jun 15 11:13:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Removed useless ff_info_colors NULL initialization. It's static.
	It's static. Yadda yadda. It's static ;-).  

Sun Jun 15 11:09:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Compilation fix.  

Sun Jun 15 11:06:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, util/fastfind.c, util/fastfind.h,
	document/html/colors.c:

	fastfind_index_compress() -> fastfind_node_compress(). Support for
	NULL @current removed. fastfind_index_compress() is now just a
	wrapper around fastfind_node_compress() passing it the
	@handle.root_trampoline as @current. fastfind_index_compress() now
	also takes only the @fastfind_handle argument.  

Sun Jun 15 11:06:01 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, document/html/colors.c, document/html/colors.h:

	Colors lookup is now fastfind enabled ;).  

Sun Jun 15 10:55:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed useless NULL initialization of ff_info_tags (it's static,
	thus preinitialized).  

Sun Jun 15 10:54:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	ff_elt* -> ff_node* 

Sun Jun 15 10:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	line -> trampoline.. a bit longer and sounding perhaps a bit weird,
	but hopefully MUCH less confusing. All identifiers containing that
	token converted.  

Sun Jun 15 10:43:16 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Initialize struct fastfind_info * to NULL, since it may not be
	modified.  

Sun Jun 15 10:01:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Now useless #ifdef/#endif was removed, it prevented usage of
	fastfind...  

Sun Jun 15 02:00:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Cleanup the long help print function. Adding both language and
	_template_ support. Sorry pasky, this ended up as an all or nothing
	config.  

Sun Jun 15 00:21:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Fix for bug 200 was buggy, this one should fix it, please check.  

Sat Jun 14 23:42:46 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, osdep/osdep.c, terminal/tab.c,
	terminal/tab.h:

	stay_here -> in_background. Suggestion by Jonas.  

Sat Jun 14 22:36:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Tried to guess the algorithm behind fastfind. May not be accurate,
	please correct. Wasn't that easy to figure out due to the funny
	alphabets translations. Please document your code better, zas :-).  

Sat Jun 14 22:31:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Put short help printing in separate function and clean it up.  

Sat Jun 14 22:07:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Minor ifdef tidyup.  

Sat Jun 14 21:08:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Remove indentation hack. It didn't improve readability and
	complicated the code.  

Sat Jun 14 20:42:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Introduced accif(), which merged testinc() and if() into one. Use it
	at most places where testinc() was used.  

Sat Jun 14 20:35:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/html/parser.c:

	Move ff_into_tags inside #USE_FASTFIND #ifdef and type it correctly.  

Sat Jun 14 20:29:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Don't forget to #undef ifcase.  

Sat Jun 14 20:26:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Normalized util/fastfind.c header.  

Sat Jun 14 20:21:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: fastfind.c, fastfind.h:

	Unanonymize fastfind_handle, it is pointer to (struct
	fastfind_info).  

Sat Jun 14 20:13:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, document/html/parser.c, document/html/parser.h,
	util/fastfind.h:

	Introduced free_tags_cache() and moved+statified ff_info_tags inside
	of document/html/parser.c. fastfind_terminate() is called from
	free_tags_cache().  

Sat Jun 14 20:07:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.h:

	fastfind_terminate() now against takes @fastfind_handle as its
	argument.  

Sat Jun 14 20:05:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.h:

	#define USE_FASTFIND in util/fastfind.h.  

Sat Jun 14 20:02:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, main.h, setup.h:

	Source garbage collection. Don't pollute setup.h by USE_FASTFIND and
	don't pollute main.* with totally unrelated things. We won't compile
	for a while now, it seems. Please stand by.  

Sat Jun 14 19:59:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/fastfind.c:

	Don't assert() things that can be just allocation errors.  

Sat Jun 14 19:37:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Fixed &nbsp &nbsp<foo> handling regression reported by Miciah.  

Sat Jun 14 18:58:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: fastfind.c, fastfind.h:

	Small improvement of searching a compressed line + spell fix.  

Sat Jun 14 17:21:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	Major code cleanup by Jonas (and a bit by me). Thanks a lot Jonas
	;).  

Sat Jun 14 13:16:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Bad tags interpretation fix. See bug 200.  

Sat Jun 14 13:15:30 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, osdep/osdep.c, terminal/tab.c,
	terminal/tab.h, terminal/terminal.c:

	Now we can open tabs without swapping to them with "Open tab (but
	stay here).", feel free to improve..  

Sat Jun 14 10:36:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/: fastfind.c, fastfind.h:

	FASTFIND_DEBUG moved from .h to .c.  

Sat Jun 14 10:32:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Shorter struct is now used by default. Cleanup and more statistics.  

Sat Jun 14 01:13:23 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Missing #define were added.  

Sat Jun 14 01:00:42 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, intl/charsets.c:

	FastFind for entities was removed and entities cache is now fully
	enabled.  

Sat Jun 14 00:48:20 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	More statistics and cleanup.  

Sat Jun 14 00:25:14 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	General cleanup: assertions, macros, minor fixes.  

Fri Jun 13 23:00:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Cleanup, some assert() and macros were added to check limits.  

Fri Jun 13 22:36:06 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	I prefer (*reset)() over reset() notation, for a callback function.
	Sorry fonseca ;).  

Fri Jun 13 22:31:51 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	ifcase() macro was introduced to shorten the code concerning case
	sensitivity.  

Fri Jun 13 22:14:02 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Temporary vars now handles realloc returned values in alloc_line() +
	some cleanup.  

Fri Jun 13 22:04:51 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Temporary vars now handles realloc returned values in
	add_to_pointers + some cleanup.  

Fri Jun 13 21:47:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	void *calloc (size_t nmemb, size_t size)... Order of parameters were
	inverted .Thanks to Jonas for the report.  

Fri Jun 13 18:38:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/fastfind.c:

	A lot of s/ff_info/info/ .. Improves line length and readability ..
	atleast for me ;) 

Fri Jun 13 18:12:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/fastfind.c:

	Some small cleanups. Rename member s/searchs/searches/.  

Fri Jun 13 17:54:22 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, main.c, main.h:

	Use fastfind for entities searching, due to entity cache efficiency,
	performance gain is minimal, we should make it optionnal.  

Fri Jun 13 17:48:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.c:

	Case sensitive key match was fixed. Use ff_elt and ff_elt_c for more
	than 512 keys.  

Fri Jun 13 17:04:39 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, setup.h, document/html/parser.c:

	Now fastfind is used by parser.  

Fri Jun 13 17:02:36 2003  Laurent Monin <zas@norz.org>:

	* src/util/fastfind.h:

	Debug mode is now disabled. Feel free to use it, it will produce
	statistics about fastfind efficiency.  

Fri Jun 13 16:59:32 2003  Laurent Monin <zas@norz.org>:

	* src/util/: Makefile.am, fastfind.c, fastfind.h:

	Zas's Fast Find Algorithm: it will replace bsearch() + strcasecmp()
	... in parser.c. Please test, comment, improve.  

Fri Jun 13 14:07:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, config/.cvsignore, manpages/.cvsignore:

	Update files cvs should ignore.  

Fri Jun 13 14:06:32 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/tools/help2doc:

	Some over escaped chars was trimmed.  

Fri Jun 13 13:34:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Small description change that will make generating elinks.conf
	easier.  

Thu Jun 12 18:43:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Since go_backwards() is called only with psteps being 1 and more,
	steps is always >= 0. Thus removed useless check.  

Thu Jun 12 18:41:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Really do.  

Thu Jun 12 18:40:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, sched/history.c, sched/location.c,
	sched/location.h:

	Removed the location.unhist_jump hack, it will not be needed soon
	anymoe and it didn't sound as a good idea anyway.  

Thu Jun 12 16:26:03 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/Makefile.doc, book/config/elinks.conf.xml,
	tools/help2doc:

	Renamed the doc script. It has been hacked extensively to also
	support generating elinks.conf.5, just fly to src/doc/book and `make
	generated-docs`.  

Thu Jun 12 01:15:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/hooks.c:

	Fix a login inversion in 'Use have_location() instead of hardwired
	list_empty() call.' 

Thu Jun 12 01:06:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Damn dependencies. Removed set_location() ...  

Thu Jun 12 00:47:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: history.h, session.h:

	Added more functions to encapsulate location/history management.  

Thu Jun 12 00:08:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.h:

	Minor tidy up of comments 

Thu Jun 12 00:02:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/: download.c, history.c, session.c, session.h:

	Renames: session_wtd -> task_type, wtd_data -> task.  

Wed Jun 11 22:54:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, document/html/renderer.c,
	scripting/lua/core.c, viewer/text/vs.c:

	Removed useless including of sched/history.h.  

Wed Jun 11 22:52:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, scripting/lua/core.c,
	viewer/text/view.h:

	Removed useless including of sched/location.h.  

Wed Jun 11 22:49:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	If @location, destroy_location() upon destroying struct session.  

Wed Jun 11 22:49:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/hooks.c:

	Use have_location() instead of hardwired list_empty() call.  

Wed Jun 11 22:42:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.h:

	Reordering of declarations.  

Wed Jun 11 22:42:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: history.h, session.h:

	Moved have_location() from sched/history.h to sched/session.h.  

Wed Jun 11 22:36:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: location.h, session.h:

	Moved cur_loc() from sched/location.h to sched/session.h, it makes
	more sense and is nicer from the OO POV. Added session.location
	field, not being used yet. The gracious reviewer shall overlook that
	the comments inserted already reflect the planned final state.  

Wed Jun 11 22:29:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Briefly described struct session. Massively reorganized it --- now
	it is logically chunked to several parts clustering tightly related
	fields, and each of the parts is even captioned! ;-). Documented
	type of linked lists items.  

Wed Jun 11 22:14:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.h:

	Commented (struct session)'s helper structures, minor reorder inside
	of (struct frame) to be a bit more logical.  

Wed Jun 11 22:05:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Make ses_unback() more consistent with ses_back() --- when
	loc->vs.url ne ses->loading_url (when can that happen? only when we
	would call ses_unback() w/o preceding go_unback(), it seems..?),
	remake the current location.  

Wed Jun 11 20:14:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config/examples.xml:

	More snippets ...  

Wed Jun 11 20:08:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, config/elinks.conf.xml,
	config/syntax.xml:

	Adding snippets that will be used by both tools/help2docbook and
	config/intro.xml.  

Wed Jun 11 16:53:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Removed unused label no_mem in frm_download().  

Wed Jun 11 16:42:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed unused variable @l from do_move().  

Wed Jun 11 16:28:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fixed typo in history movement backends return value description.  

Wed Jun 11 16:22:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, fixed errorneous commit --- the previous change was bogus,
	sorry.  

Wed Jun 11 16:20:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.h:

	C++ style comments -> C comments 

Wed Jun 11 15:38:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Simplify the get_opt_() declaration a little.  

Wed Jun 11 15:35:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Be a little more paranoid regarding Heisenbugs (that's how they call
	it in man assert(3)\! ;-) --- even in non-DEBUG mode, the real
	function is get_opt_ and get_opt macro wraps around it.  

Wed Jun 11 15:29:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	ses->ref_url may be NULL and it's no problem, so don't panic if its
	allocation fails.  

Wed Jun 11 15:27:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/http.c, sched/connection.c,
	sched/connection.h, sched/sched.c, sched/sched.h:

	prev_url -> ref_url - Makes Grepping Easier.  

Wed Jun 11 15:26:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/history.c, sched/session.c, viewer/text/view.c:

	ref_url is now ordinary string, not the granural one (that is, we
	alloc it by stracpy(), not init_str()). Inspiration by Jonas and
	Miciah.  

Wed Jun 11 14:59:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Rename get_field* -> get_mailcap_field* 

Wed Jun 11 14:54:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Further conformance fixes: Correctly handle implicit wild type.  

Wed Jun 11 14:43:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: setup.h, mime/backend/mailcap.c:

	Improve of conformance. Triggered by Miciah's comment updates. :) 

Wed Jun 11 14:40:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Compile fix of the heap to stack usage change.  

Wed Jun 11 12:00:46 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	Check that memacpy did not return NULL. Miciah is a dunce.  

Wed Jun 11 11:03:16 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: encoding/encoding.c, util/encoding.c:

	Make some structures static.  

Wed Jun 11 10:44:18 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/mailcap.c:

	A few comment clean-ups for fun.  

Wed Jun 11 10:23:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/dump/dump.c:

	error("%s", m) is silly! 

Wed Jun 11 10:05:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/dialogs.c, globhist/dialogs.c:

	Fix two more strings that had a space before a question mark.  

Wed Jun 11 09:59:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Fix some line-breaks in the Options manager Info box which were
	inadvertently changed the msg_text migration.  

Wed Jun 11 09:30:38 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: bookmarks/dialogs.c, config/dialogs.c:

	Fix two strings where we had a space before a question mark.  

Wed Jun 11 09:25:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/bfu/hotkey.c:

	is_hotkey: Test whether a pointer is NULL _before_ we dereference 
	that pointer, and while I'm at it, use assert() for that test.  

Wed Jun 11 09:09:10 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/error.c:

	elinks_debug, elinks_error, and elinks_internal now print even if
	they need to truncate the string.  The code is slightly simpler as a
	side-effect of this change.  

Wed Jun 11 08:39:05 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/: options.c, options.h:

	Don't pass line-numbers and file-names to get_opt in non-DEBUG
	builds.  

Wed Jun 11 07:21:20 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Wed Jun 11 06:19:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/util/error.h:

	Fix assert() and all uses of it: Before, assert(foo) failed if foo
	was true; now, assert(foo) fails if foo is false. (What do you think
	'assert' *means*?) 

Wed Jun 11 05:55:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	go_away: As suggested by Jonas Fonseca a few days ago, replace a
	init_str()/add_to_str() combination with stracpy().  

Wed Jun 11 05:45:03 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/scripting/lua/core.c:

	l_current_url: Instead of stracpying vs->url and replacing any
	POST_CHAR with \0, now we memacpy vs->url up to POST_CHAR, or the
	whole line if there is no POST_CHAR.  This improves memory usage and
	performance, especially with file-uploads.  

Wed Jun 11 05:19:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/mimetypes.c:

	Use the stack instead of mem_allocing in parse_mimetypes_file.  

Wed Jun 11 05:16:23 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	Remove a pointless assignment in free_history().  

Wed Jun 11 05:12:15 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/backend/: default.c, mailcap.c:

	'bool ? 1 : 0' is superfluous; just use 'bool'.  

Wed Jun 11 05:08:42 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/download.c:

	Remove unnecessary strcmp in lookup_unique_name; pointer comparison
	is sufficient.  

Wed Jun 11 05:02:58 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/mime/mime.c:

	try_extension_type: Replace safe_strncpy with memcpy; we just
	allocated the necessary space, and the string is already
	null-terminated, so memcpy is fine.  

Wed Jun 11 03:04:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Cleanups and small optimizations + fix of skip_whitespace macro 

Wed Jun 11 03:01:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Tidy up.  

Wed Jun 11 01:40:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, Makefile.doc, config/cmdoptions.xml,
	manpages/.cvsignore, manpages/elinks.1.xml,
	manpages/elinkskeys.5.xml:

	Varies adjustments. Make rule for building config/cmdoptions.xml so
	it can be removed (again already).  

Tue Jun 10 23:52:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/book/config.ent.in, doc/book/elinksbook.dtd,
	doc/man/man5/elinkskeys.5:

	Make configure control wether to use DocBook XML or not.  

Tue Jun 10 23:47:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc:

	Generalize book build rules the same way as the manpages.  

Tue Jun 10 23:45:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/book.xml:

	s/manual/book/. Is this a good change? 

Tue Jun 10 23:35:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/mime.xml, features/bookmarks.xml,
	intro/installation.xml:

	A lot of small fixes. Remove <chapterinfo> and unused links.  

Tue Jun 10 23:31:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/info/: authors.xml, preface.xml, revision.xml:

	Rest of the meta data.  

Tue Jun 10 21:39:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: book.xml, elinksbook.dtd:

	Added the last file entities and the book main file.  

Tue Jun 10 21:29:43 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, elinksbook.dtd, intro/installation.xml:

	Installation docs. And declare entities for the current files. Put
	features/* in EXTRA_DIST.  

Tue Jun 10 21:19:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h:

	Remove now unused function get_extension_from_url() virtually
	patched by Miciah.  

Tue Jun 10 21:10:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config/mime.xml:

	Adding Jose' mime docs.  

Tue Jun 10 20:32:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: features/bookmarks.xml, manpages/elinks.1.xml,
	manpages/elinkskeys.5.xml:

	Tiny. A few id renames. Give hint for html filename.  

Tue Jun 10 19:27:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config.ent.in:

	Comments must not contain '--' 

Tue Jun 10 19:23:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: modules/version.c, util/version.c:

	Elaborated some feature names and other details changed regarding
	features listing.  

Tue Jun 10 19:19:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Oops, we should then call elinks_error() directly, not the error()
	wrapper ;-).  

Tue Jun 10 19:19:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Now config file syntax errors are reported w/o useless stuff
	(error() location in the source --- show error location in the
	configfile instead).  

Tue Jun 10 19:17:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config.ent.in, elinksbook.dtd:

	s/use-config-entities/override-config-entities/. This way we can get
	the @VERSION@.  

Tue Jun 10 18:16:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, features/bookmarks.xml:

	Pasky ultimate bookmark guide.  

Tue Jun 10 17:26:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.doc, manpages/Makefile.am:

	Test if *DOCTOOL is set before building docs. Moved manpage rules.  

Tue Jun 10 16:29:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/TODO:

	Removed and added a few items.  

Tue Jun 10 16:17:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/.cvsignore:

	Added generated config.ent 

Tue Jun 10 16:15:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: elinksbook.dtd, config/cmdoptions.xml,
	config/envvars.xml, manpages/elinks.1.xml:

	More splitting and removed <?xml ...?> since docbook2man choked on
	it :( 

Tue Jun 10 16:05:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/files.xml, manpages/elinks.1.xml:

	First step of splitting and generalizing documentation. New concept:
	object oriented documentation. ;) 

Tue Jun 10 16:02:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config.ent.in, elinksbook.dtd:

	Reorganizing the dtd to make it readable. Make it include
	config.ent.  

Tue Jun 10 15:40:37 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Hmm too trigger happy. Let configure generate file added in last
	commit.  

Tue Jun 10 15:38:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/config.ent.in:

	configure.in 

Tue Jun 10 15:27:54 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/sched/history.c:

	Fix the return type of ses_leave_location per pasky's request.  

Tue Jun 10 14:50:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, session.h:

	Oops, this wasn't supposed to be committed (yet). Sorry for a bogus
	commit.  

Tue Jun 10 14:49:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: download.c, history.c, session.h:

	Reindentation, basically.  

Tue Jun 10 14:47:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, added missing test for return value of ses_leave_location()
	inside of ses_unback().  

Tue Jun 10 14:46:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Added @dir parameter also to ses_leave_location(), fixed its
	documentation near go_away().  

Tue Jun 10 14:38:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	ses_leave_location() now returns the same thing as go_away() does.
	have_location() moved from ses_back() to ses_leave_location(),
	making the test to also take place in ses_unback().  

Tue Jun 10 14:35:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Tiny whitespace additions, documented roughly ses_leave_location().  

Tue Jun 10 13:41:59 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, elinksbook.dtd, manpages/Makefile.am,
	manpages/elinks.1.xml, manpages/elinkskeys.5.xml:

	Misc updates. Added dtd to use for configuring the doc/book
	processing, and make manpages use it. Minor fixes of the xml.  

Tue Jun 10 02:12:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, Makefile.doc:

	Move DOCBUILDIR to Makefile.doc. Make sure the build subdirs are
	available.  

Tue Jun 10 00:24:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, document/html/parser.c:

	Two felonies corrected by the whitespace police.  

Mon Jun  9 23:56:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: config/.cvsignore, config/.vimrc, info/.cvsignore,
	info/.vimrc, intro/.cvsignore, intro/.vimrc:

	Addedd fairies.  

Mon Jun  9 23:23:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: .cvsignore, book/Makefile.am:

	Adding missing files to EXTRA_DIST and .cvsignore.  

Mon Jun  9 22:39:02 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.doc, manpages/Makefile.am:

	Experimented with building html. For now it is dumped in its own
	dir.  

Mon Jun  9 22:12:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Added checks for doctools.  

Mon Jun  9 22:11:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/Makefile.doc, book/manpages/Makefile.am,
	man/man5/elinkskeys.5:

	Manpages are now buildable from the doc/book/manpages dir only.  

Mon Jun  9 21:41:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Major cleanup and optimization of get_attr_val(). Performance
	improvment by partially duplicating code.  

Mon Jun  9 20:13:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/Makefile.am:

	Use EXTRA_* for everything.  

Mon Jun  9 19:43:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/book/Makefile.am, doc/book/Makefile.doc,
	doc/book/manpages/Makefile.am:

	Let's (auto)make buildsystem handle doc/book or die trying. General
	Makefile for inclusion added.  

Mon Jun  9 18:44:34 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Now useless variable was removed.  

Mon Jun  9 18:09:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	The strerror() output was uselessly dynamically allocated (useless
	for format-string msgboxes).  

Mon Jun  9 15:54:13 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Mon Jun  9 15:34:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Memleak on download error was fixed (bug 195). Patch by zardoz and
	me.  

Mon Jun  9 10:47:02 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Cleanup + comments.  

Mon Jun  9 10:29:18 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Entity handling in attribute cleanup.  

Mon Jun  9 10:24:14 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	add_chr() macro cleanup.  

Mon Jun  9 10:07:12 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Short labels and variables names in get_attr_val() were replaced by
	explicit ones.  

Mon Jun  9 09:57:13 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Label end_1 was renamed parse_error.  

Mon Jun  9 09:44:25 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some gotos were replaced by while loop.  

Mon Jun  9 01:48:56 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	parse_element() now skip invalid attributes. It fixes bug 42. Please
	review and test extensively.  

Mon Jun  9 00:08:59 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	The character ":" was added to handle tag attribute like
	xml:lang="en" 

Sun Jun  8 23:59:21 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some useless tests were removed, one concerning exit on error, the
	other since TAG_DELIM() introduction.  

Sun Jun  8 23:36:33 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	tmp -> saved_eof_char.  

Sun Jun  8 23:34:38 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Use TAG_START macro.  

Sun Jun  8 23:27:53 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	atchr() function is now a macro called ATTR_CHAR().  

Sun Jun  8 22:36:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Oops, a compilation fix. Fast, before anyone notices! 

Sun Jun  8 22:35:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	More reducing of code duplication (=> merging stuff to go_away(),
	which now also takes dir parameter describing the exact action being
	performed).  

Sun Jun  8 22:26:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Removed wrapping-up of some warn() calls by ifdef DEBUG, it's
	useless.  

Sun Jun  8 22:24:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Since internal() doesn't dump core unless DEBUG anyway, call always
	internal() for fatal errors. So DEBUG mode now just increases
	verbosity by emitting error()s when warn*() is called.  

Sun Jun  8 22:22:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, memlist.c, string.c:

	error() now prints the message source's longitude and latitude by
	itself, so don't do a redundant job. Rather pass higher-level
	caller's coordinates to elinks_error() where appropriate.  

Sun Jun  8 22:17:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, string.c:

	Use elinks_internal() instead of int_error() if you already want to
	pass own errfile,errline.  

Sun Jun  8 22:12:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Don't highglight error.  

Sun Jun  8 22:11:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/cmdline.c, config/options.c,
	lowlevel/af_unix.c, lowlevel/interlink.c, lowlevel/select.c,
	lowlevel/signals.c, sched/session.c, scripting/lua/core.c,
	terminal/kbd.c, terminal/terminal.c, viewer/dump/dump.c:

	Normalized error() users: the messages are now localized where it
	makes sense, the messages text is edited for brevity, superfluous
	leading 'ERROR' strings removed etc.  

Sun Jun  8 21:57:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Use select_menu()'s window destroying loop inside of
	select_mainmenu(), the original one (inherited from Links) was buggy
	(but it is virtually never used, as we have only submenus inside of
	the main menu).  

Sun Jun  8 21:52:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Moved wtd checking from go_back() to go_away(). Now we check for
	ses->wtd even in go_unback(). Let's see what will happen ;-).  

Sun Jun  8 21:49:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Introduced go_away() static helper for go_back(), go_unback(). Okay,
	it doesn't contain much stuff for now ;-).  

Sun Jun  8 21:45:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Introduced static helper ses_leave_location(), merging common
	preparation code from ses_back() and ses_unback().  

Sun Jun  8 20:00:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Improve extension type lookup so it again only uses last extension
	part. Also fix for not freeing returned mime handler.  

Sun Jun  8 18:47:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h,
	backend/default.c, backend/mimetypes.c:

	Backend content type resolvers now explicitly take extension instead
	of url. Improved mimetypes resolving to try trimmed extensions.  

Sun Jun  8 17:42:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, backend/common.c, backend/common.h:

	Introduce get_extensionpart_from_url() and use it for guessing.  

Sun Jun  8 17:41:07 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Interpretation of /> was fixed.  

Sun Jun  8 17:18:51 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	More cleanup. Getting ready for better extension handling.  

Sun Jun  8 16:51:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Minor cleanup.  

Sun Jun  8 16:24:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimization in test order.  

Sun Jun  8 16:17:45 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Local variable flags was shadowing flags parameter. It was
	responsible of the "No" button untranslated bug.  

Sun Jun  8 16:13:51 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Variable declarations were moved close to their usage point.  

Sun Jun  8 15:20:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: util/conv.h, osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h:

	Move is_safe_in_shell() to util/ so it is completely independed
	again.  

Sun Jun  8 15:09:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Reverted previous changes. Use file_read_line() again.  

Sun Jun  8 14:54:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	*cough* 

Sun Jun  8 14:53:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Compilation fixes (stupid char vs. unsigned char), discovered by
	Jonas.  

Sun Jun  8 14:48:35 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	isA() cames back in atchr().  

Sun Jun  8 14:45:55 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.h:

	isA() is now a macro instead of a static inline function.  

Sun Jun  8 14:42:41 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Hint for compiler: register for e.  

Sun Jun  8 14:40:30 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	uu variable was renamed to quote.  

Sun Jun  8 14:39:57 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: file.c, file.h:

	Cleanup file_read_line(): leveling indentation and correctly handle
	reallocation.  

Sun Jun  8 14:29:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/: file.c, file.h:

	Small tidy up.  

Sun Jun  8 14:28:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c:

	Handle correctly case of option.desc being NULL.  

Sun Jun  8 14:17:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Some generic util/error.* description, added parameter names to
	declarations where they were missing before.  

Sun Jun  8 14:14:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Documented dump_backtrace().  

Sun Jun  8 14:13:57 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sun Jun  8 14:11:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Moving around of stuff (hopefully the final one now): first comes
	error reporting, then force_dump(), hten optimization games, and the
	backtrace function closes the suite.  

Sun Jun  8 14:06:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Documented force_dump(). Don't declare/define it if !defined(DEBUG).  

Sun Jun  8 13:59:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, util/error.h, util/lists.h:

	Documented do_not_optimize_here(). Introduced
	do_not_optimize_here_gcc_2_7() which expands to
	do_not_optimize_here() under gcc <= 2.7.*. All usages of
	do_not_optimize_here() converted to that.  

Sun Jun  8 13:58:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.h:

	Documented functions.  

Sun Jun  8 13:47:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Effectively reverted the last patch --- *eof is '\0', so we
	automagically test for eof at the most places, and frequently for
	free as it comes out as the negation of the other conditions.
	Compared to the state before the previous patch being applied, we
	now take more advantage from *eof being '\0', and the checks are
	placed more effectively somewhere.  

Sun Jun  8 13:30:55 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Stricter eof checking and infinite loop prevention in
	parse_element().  

Sun Jun  8 13:21:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, lowlevel/connect.c, protocol/ftp.c,
	protocol/ftp/ftp.c, sched/download.c, scripting/lua/core.c,
	util/memdebug.c, viewer/text/view.c:

	Fixes for label name collisions with error and int_error ->
	elinks_internal 

Sun Jun  8 13:04:05 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	atchr() now really does what it should.  

Sun Jun  8 12:55:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, lists.h, error.h:

	list_magic_error() now expands just to an internal() call, removed
	support function list_magic_error_().  

Sun Jun  8 12:46:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Sorted the error-reporting functions in order
	debug(),error(),internal(), both declarations and definitions.  

Sun Jun  8 12:44:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	Now error() also shows __FILE__:__LINE__ where it happenned.  

Sun Jun  8 12:41:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Now error() messages are automagically prepended by '<b>ERROR</b>: '
	string as well.  

Sun Jun  8 12:37:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	To be sure, undef internal,error,debug before redefining them as
	wrappers to elinks_\&().  

Sun Jun  8 12:36:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	error() -> elinks_error(), error() is now just a macro wrapper.
	Moved error() declaration near internal() and debug() and documented
	error() behaviour.  

Sun Jun  8 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h:

	int_error -> elinks_interal, debug_msg -> elinks_debug 

Sun Jun  8 12:33:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* TODO:

	Removed items that are in bugzilla and regrouped existing.  

Sun Jun  8 12:30:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Tiny reorganization, documented the debug() and internal() calls.  

Sun Jun  8 12:19:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.h:

	Introduced assert() macro. It does nothing if in FASTMEM mode,
	prints internal error in normal mode and prints error + crash in the
	DEBUG mode. Idea by Jonas, Zas, me, and many others over the
	timeline ;-).  

Sun Jun  8 11:54:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/kbdbind.c:

	Small fixes of keybinding captions.  

Sun Jun  8 11:54:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Make --enable-fastmem compile even if we don't have alloca().  

Sun Jun  8 11:51:47 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Danish translation updated.  

Sun Jun  8 11:38:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, version.c, version.h, dialogs/info.c,
	lowlevel/signals.c, modules/version.c, modules/version.h,
	util/Makefile.am, util/error.c, util/version.c, util/version.h:

	Moved src/version.* to src/util/. This helps making util/ more or
	less standalone, and we will (soon) want to use src/version.h for
	something more interesting.  

Sun Jun  8 10:59:53 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	msgbox formattized :) 

Sun Jun  8 10:49:25 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, bookmarks/backend/xbel.c,
	config/kbdbind.c, config/opttypes.c, dialogs/menu.c,
	document/html/parser.c, document/html/renderer.c,
	globhist/globhist.c, intl/gettext/bindtextdom.c,
	intl/gettext/dcigettext.c, intl/gettext/finddomain.c,
	intl/gettext/l10nflist.c, intl/gettext/libintl.c,
	intl/gettext/loadmsgcat.c, intl/gettext/localcharset.c,
	intl/gettext/localealias.c, lowlevel/dns.c, lowlevel/select.c,
	mime/backend/mailcap.c, mime/backend/mimetypes.c, osdep/os_dep.c,
	osdep/osdep.c, protocol/file.c, protocol/mailcap.c,
	protocol/auth/auth.c, protocol/file/file.c, protocol/http/auth.c,
	sched/connection.c, sched/download.c, sched/location.c,
	sched/sched.c, sched/session.c, protocol/http/blacklist.c,
	terminal/terminal.c, util/blacklist.c, util/hash.c,
	util/snprintf.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/vs.c:

	for(), foreach(), while(), .... -> for (), foreach (), while ()...  

Sun Jun  8 10:40:09 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about ie. for () vs for() was added.  

Sun Jun  8 10:39:54 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, config/m4/gettext.m4, po/.cvsignore,
	po/Makefile.in, po/Makefile.in.in, po/POTFILES.in, po/be.po,
	po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po,
	po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po, po/hr.po,
	po/hu.po, po/id.po, po/is.po, po/it.po, po/lt.po, po/nl.po,
	po/no.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/uk.po:

	Removed POTFILES.in usage, we now just assume that all *.[ch] files
	in src/ might contain stuff for l18n. This also involves
	po/Makefile.in.in -> po/Makefile.in.  

Sun Jun  8 02:00:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Destroy file_read_line() and integrate it in parse_mailcap_file()
	all cleaned up. Also makes parsing more tolerant and optimized.  

Sat Jun  7 23:50:50 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt_BR.po, pt.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun  7 23:42:42 2003  Laurent Monin <zas@norz.org>:

	* po/POTFILES.in:

	All source files were added to POTFILES.in, sometimes later it will
	be changed to be automagically generated.  

Sat Jun  7 23:42:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, default.c, mailcap.c,
	mimetypes.c:

	Store backends in a list. Simplifies multiplexing and could lead to
	some fun optimization of lookups and/or easier configuration of the
	order.  

Sat Jun  7 23:37:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	Minor tidyup.  

Sat Jun  7 23:31:43 2003  Petr Baudis <pasky@ucw.cz>:

	* README, src/ssl/TODO:

	Finish ciabot2 test.  

Sat Jun  7 23:30:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/TODO:

	further test ciabot2 

Sat Jun  7 23:29:05 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	test ciabot2 

Sat Jun  7 23:08:55 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/info.c, dialogs/mime.c, mime/dialogs.c,
	globhist/dialogs.c, protocol/user.c, sched/download.c,
	sched/session.c, viewer/text/view.c:

	MSGBOX_EXTD_TEXT was renamed to a more appropriate MSGBOX_FREE_TEXT.  

Sat Jun  7 23:00:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	A test against buttons < 0 was added, in that case, we just return.  

Sat Jun  7 22:53:43 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Sat Jun  7 22:52:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Simplified extension type initialization. Unused #include removed 

Sat Jun  7 22:50:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Minor tidyup.  

Sat Jun  7 22:42:42 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Update the .po files suite.  

Sat Jun  7 22:37:10 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	More ciabot debugging.  

Sat Jun  7 22:36:01 2003  Petr Baudis <pasky@ucw.cz>:

	* README:

	Debugging ciabot.  

Sat Jun  7 22:18:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.h, backend/mailcap.c:

	Hint accepted. s/(int [a-z]+:1;)/unsigned \1/ 

Sat Jun  7 22:13:41 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Comment tidyups suggested by Miciah.  

Sat Jun  7 22:10:39 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	s/quadro/tetra/, thanks to Troska.  

Sat Jun  7 22:09:41 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Drop a note about bitfields usage and especially about how important
	it is to specify signedness near bit-sized structure field. *hint*
	*hint* 

Sat Jun  7 21:56:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/default.c, backend/mailcap.c:

	Use bitfield width of one for boolean members. If not faster it is
	prettier.  

Sat Jun  7 21:41:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	One add_to_menu() was forgotten.  

Sat Jun  7 21:39:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	document/html/parser.c, mime/dialogs.c, viewer/text/view.c:

	Introduced menu_item.no_intl and additional parameter to
	add_to_menu() with the same effect. If zero, menu system will again
	translate the menu items properly. If non-zero, the item won't be
	translated at all.  

Sat Jun  7 21:33:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	s/term/win->term/ 

Sat Jun  7 21:33:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Nasty sneaky DEBUG piece. Compilation fix.  

Sat Jun  7 21:31:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Yet Another Aftermath Compile Fix[tm] 

Sat Jun  7 21:31:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.c:

	Oops, typo fix.  

Sat Jun  7 21:28:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: hotkey.c, inphist.c, menu.c, menu.h:

	Introduced menu_item.no_intl and additional parameter to
	add_to_menu() with the same effect. If zero, menu system will again
	translate the menu items properly. If non-zero, the item won't be
	translated at all.  

Sat Jun  7 21:20:42 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Tiny tidy up fixing indentation.  

Sat Jun  7 20:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Minor reorder of fields, limit ignore_hotkey to 2 bits.  

Sat Jun  7 20:51:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	ignore_hotkey must be unsigned 

Sat Jun  7 20:51:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	Minor reorder of fields, limit ignore_hotkey to 2 bits.  

Sat Jun  7 20:08:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.h, dialogs/menu.c:

	menu_item.submenu is now boolean and takes only one bit.  

Sat Jun  7 20:05:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	document/html/parser.c:

	(menu_item.) in_m -> submenu 

Sat Jun  7 20:00:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Namespace cleanup --- _send_download() -> send_download_do().  

Sat Jun  7 19:44:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/history.c:

	Fixed now-misplaced comment.  

Sat Jun  7 19:07:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/history.c:

	Cleanups: Use list functions (magic tests), make vars local, let the
	code breathe.  

Sat Jun  7 18:29:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/menu.c:

	Small cleanup. Use have_location().  

Sat Jun  7 17:53:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/hotkey.c:

	Removed trailing newline.  

Sat Jun  7 17:53:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/group.c, dialogs/options.c:

	Group layouting functions now also can translate lists of strings by
	themselves if told so.  

Sat Jun  7 17:34:55 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/checkbox.c:

	t2 -> term, fix previous patch.  

Sat Jun  7 16:21:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/checkbox.c, bfu/checkbox.h, dialogs/options.c:

	Checkboxes layouting functions now also can translate lists of
	strings by themselves if told so.  

Sat Jun  7 15:43:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/sched/session.c:

	Save position of POST_CHAR in variable.  

Sat Jun  7 15:35:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/inpfield.c, sched/error.c, sched/session.c:

	Picking up the broken pieces of pasky hacking frenzy 

Sat Jun  7 15:34:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	do_edit_dialog() now also takes parameter specifying whether it
	should translate the passed strings by itself.  

Sat Jun  7 15:29:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Fixed localization of the 'Auth. required for blabla' message in the
	authentication dialog.  

Sat Jun  7 15:25:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/mime.c, dialogs/options.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/auth/dialogs.c,
	sched/download.c, scripting/lua/core.c:

	Make user dialogs (created by do_dialog) again translated properly
	(or at least most of them for now).  

Sat Jun  7 15:10:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inpfield.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/menu.c, scripting/lua/core.c,
	viewer/text/view.c:

	input_field() now takes additional parameter telling whether to
	translate the string parameters passed or not. Now the input_field()
	dialogs should be properly translated again as well.  

Sat Jun  7 15:01:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	@t is already localized, so msg_box() shouldn't try to further
	localize the strings passed.  

Sat Jun  7 15:00:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	All print_error_dialog() were setting the title to Error, so make it
	implicit.  

Sat Jun  7 14:56:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, sched/error.c, sched/error.h,
	sched/session.c, viewer/dump/dump.c:

	get_err_msg() now returns localized result when it makes sense.  

Sat Jun  7 14:51:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	When term is NULL, just go and straightly call gettext().  

Sat Jun  7 14:44:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	s/value/Value/ in option info dialog.  

Sat Jun  7 14:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Legalize _() calls with term == NULL.  

Sat Jun  7 14:40:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: sched/download.c, sched/session.c, viewer/text/view.c:

	Fix previous patch adding term to msg_text() + fix of MSG_* typo 

Sat Jun  7 14:40:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, connection.h, error.c, sched.c,
	sched.h:

	Moved msg_dsc from sched/sched.* to sched/error.*.  

Sat Jun  7 14:37:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, sched/Makefile.am, sched/download.c, sched/error.c,
	sched/error.h, sched/session.c, sched/session.h,
	viewer/dump/dump.c:

	Moved free_strerror_buf() and get_err_msg() from sched/session.* to
	sched/error.*.  

Sat Jun  7 14:16:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/info.c,
	dialogs/mime.c, globhist/dialogs.c, mime/dialogs.c,
	protocol/user.c, sched/download.c, sched/session.c,
	viewer/text/view.c:

	Pass term parameter to msg_text().  

Sat Jun  7 14:07:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reformatted Search string not found message to look more natural.  

Sat Jun  7 14:03:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Indentation fix.  

Sat Jun  7 14:02:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Translate option description in option info msgbox.  

Sat Jun  7 13:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/user.c:

	More clear error message when protocol has no handler.  

Sat Jun  7 13:54:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: msgbox.c, msgbox.h:

	Introduced msg_text_ni() along msg_text(), not performing automatic
	localization (msg_box() now automagically localizes the format
	string). Both those functions now use the same backend,
	msg_text_do().  

Sat Jun  7 13:46:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/button.c, bfu/text.c,
	document/html/parser.c:

	Removed now-useless AL_MASK. Also destroyed one forgotten
	AL_EXTD_TEXT, thanks Jonas.  

Sat Jun  7 13:45:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Tiny comment updates.  

Sat Jun  7 13:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: msgbox.c, msgbox.h:

	MSGBOX_INTL -> MSGBOX_NO_INTL and inverted its meaning. Now, w/o any
	flags all the string arguments are automagically localized.  

Sat Jun  7 13:27:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/da.po:

	Small language update. Now da.po rates higher than de.po! ;)) 

Sat Jun  7 13:18:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Grammar fix of delete folder message.  

Sat Jun  7 13:17:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/inpfield.c, bfu/msgbox.c, bfu/msgbox.h,
	bookmarks/dialogs.c, config/dialogs.c, dialogs/document.c,
	dialogs/info.c, dialogs/menu.c, dialogs/mime.c, globhist/dialogs.c,
	mime/dialogs.c, scripting/lua/core.c, protocol/url.c,
	protocol/user.c, sched/download.c, sched/session.c,
	viewer/text/view.c:

	Moved the msg_box() flags from enum format_align at bfu/align.h to
	enum msgbox_flags in bfu/msgbox.h. msg_box() now takes additional
	flags parameter. AL_* -> MSGBOX_*.  

Sat Jun  7 12:58:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c:

	AL_NO -> AL_NONE 

Sat Jun  7 12:54:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: align.h, msgbox.c, msgbox.h:

	Introduced AL_INTL msg_box() flag, which will make msg_box() to l18n
	all the passed strings for you. Must not be used in conjuction with
	msg_text(), though.  

Sat Jun  7 12:46:16 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: dialog.c, msgbox.c:

	Removed unused variables.  

Sat Jun  7 12:40:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Rewritten msg_text() description, it had nothing to do with
	gettextization ;-). Added note about its recommended usage.  

Sat Jun  7 12:30:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Documentation of the msg_box() call extended, reintroduced
	informations lost during the transition, bunch of grammar/typo
	fixes, some more docs about AL_EXTD_TEXT behaviour...  

Sat Jun  7 12:15:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.h:

	Reformatted msg_box() declaration, it is not definiton but really a
	declaration ;).  

Sat Jun  7 12:13:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Removed the 'info' udata hack, pass directly the text as udata to
	the formatting function. Side effect is ungettextization of
	msg_box(). People should pass already gettextized strings to it.  

Sat Jun  7 12:08:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Typo fix.  

Sat Jun  7 12:07:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/msgbox.c:

	Reverted the last patch, it does bad thing at a bad place. We
	shouldn't assume that we can't have zero btutons, and the implicit
	Ok button insertion doesn't feel that great. It should be done
	differently, if at all... (I personally believe the current state of
	ok button being inserted explicitly is fine, *shrug*.) 

Sat Jun  7 12:05:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, group.c, hotkey.c,
	menu.c, text.c:

	Removed early gettextization from the BFU routines. All (or almost
	all) the strings getting into BFU routines should be already
	gettextized, as they may be constructed from various format strings
	etc. And double-gettextization is eeevil. Uff, now the harder part:
	look around the BFU users and properly gettextize everything.  

Sat Jun  7 11:35:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Removed useless fmttext variable from memory_inf(), format string
	can be used directly in msg_text().  

Sat Jun  7 11:00:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Insert VERSION_STRING to menu_copying()'s msg_box() thru %s, making
	gettext not choke on it.  

Sat Jun  7 10:58:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	ses_goto() really-post msg_box() cleanup --- make m1 a real format
	string, taking m2 as %s content.  

Sat Jun  7 10:57:33 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Missing type casting was fixed.  

Sat Jun  7 10:56:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, config/dialogs.c, dialogs/document.c,
	dialogs/info.c, globhist/dialogs.c, sched/download.c,
	sched/session.c, viewer/text/view.c:

	msg_box() / msg_text() calls tidyup --- minor reformatting and
	mainly reindentation of parameters. I know, stupid pasky changing
	his mind...  

Sat Jun  7 10:43:34 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	If buttons count is < 1, we always print default OK button. It will
	simplifies msg_box() calls too.  

Sat Jun  7 10:34:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Renamed internal snprintf implementation entry points to
	elinks_\&(), and defined the proper names to point at them by
	preprocessor (just like it is in util/string.h). This is to avoid
	linking and declarations shadowing problems.  

Sat Jun  7 10:27:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Include elinks.h.  

Sat Jun  7 10:24:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.h:

	If USE_OWN_LIBC is defined, pretend that we don't have any of the
	snprintf() routines and use the own ones.  

Sat Jun  7 10:24:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Attempt to clarify the #if maze just a little.  

Sat Jun  7 10:21:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Removed useless if discovered by Zas.  

Sat Jun  7 10:20:59 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Use add_one_to_ml() to simplify code.  

Sat Jun  7 10:20:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Removed useless SAFE_FREE macro.  

Sat Jun  7 10:16:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Moved #include <math.h> into the main TEST_SNPRINTF code piece.  

Sat Jun  7 10:15:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/snprintf.c:

	Minor reorganization of #includes, to follow more the ELinks
	standards.  

Sat Jun  7 10:03:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memlist.c, memlist.h:

	add1_to_ml -> add_one_to_ml 

Sat Jun  7 09:59:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Make VA_COPY declaration public, so that not only snprintf.c can use
	it.  

Sat Jun  7 09:56:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memlist.c, memlist.h:

	add1_to_ml() was introduced, it behaves like add_to_ml() but is
	faster when only one element is added.  

Sat Jun  7 09:56:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: snprintf.c, snprintf.h:

	Reverted 'Internal *snprintf() functions can now be used when
	--enable-own-libc is set. Minor cleanup and portability
	improvments.'. It is doing too much stuff at the same time.  

Sat Jun  7 09:26:20 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat Jun  7 09:01:13 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Dependancy to submenu label was removed in welcome message.  

Sat Jun  7 08:47:49 2003  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	Typo fix.  

Sat Jun  7 08:37:21 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.h:

	Test exists in configure script, so just use HAVE_VARIADIC_MACROS.  

Sat Jun  7 08:30:20 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in, src/version.c, src/modules/version.c,
	src/util/snprintf.h, src/util/string.h, src/util/version.c:

	USE_LIBC  was renamed to USE_OWN_LIBC.  

Sat Jun  7 08:22:54 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, modules/version.c, util/version.c:

	Own_libc now appears in version string if was compiled with
	--enable-own-libc.  

Sat Jun  7 08:16:02 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Redundant VA_COPY test was removed, it is in snprintf.h.  

Sat Jun  7 08:14:07 2003  Laurent Monin <zas@norz.org>:

	* src/util/: snprintf.c, snprintf.h:

	Internal *snprintf() functions can now be used when
	--enable-own-libc is set. Minor cleanup and portability improvments.  

Sat Jun  7 03:55:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Add sanity check before freeing hash. Apparently needed when exiting
	a slave instance. Interesting.  

Sat Jun  7 03:13:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/dialogs/info.c:

	Cleanup memory info dialog to use msg_text().  

Sat Jun  7 01:55:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Check malloc() failure and give vsnprintf() full buffer size. This
	should round up the code part of the migration. Now po files needs
	to be synced and (re)translated 8/ 

Sat Jun  7 01:45:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/: bfu/msgbox.c, bfu/msgbox.h, bookmarks/dialogs.c,
	config/dialogs.c, dialogs/info.c, dialogs/mime.c,
	globhist/dialogs.c, mime/dialogs.c, protocol/user.c,
	sched/download.c, sched/session.c, viewer/text/view.c:

	Migrate to use printf format strings in msg_box 

Sat Jun  7 01:43:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/setup.h:

	Used in mimetypes backend. Hmmm.  

Sat Jun  7 01:04:05 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Minor optimizations: use variables for temporary results.  

Sat Jun  7 00:54:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Don't end string too soon 

Sat Jun  7 00:49:14 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Elinksification and whitespaces fix.  

Sat Jun  7 00:35:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/snprintf.c:

	Move up #define of VA_COPY so it is reachable from vasprintf() 

Sat Jun  7 00:33:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/: msgbox.c, msgbox.h:

	First step of migrating to using printf style strings in msg_box.  

Fri Jun  6 23:23:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Ditto as last commit for mailcap backend 

Fri Jun  6 23:20:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	Use the option systems change_hook to control the backend.  We now
	store a local pointer to the mimetypes option tree and uses it for 
	getting all options this pointer.  

Fri Jun  6 23:14:53 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mimetypes.c:

	A few cleanups adding missing #includes and changing the indentation
	level.  

Fri Jun  6 23:13:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	When using key prefix Ctrl-, automagically upcase the letter after
	the prefix, since normally we can't catch lowercase variant of this
	(but don't save the keybindings such transformed since in the
	future, this could change and that prefix could become perfectly
	valid). Should fix bug 34, reported by Stepan Roh.  

Fri Jun  6 23:06:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Whitespaces.  

Fri Jun  6 22:56:21 2003  Petr Baudis <pasky@ucw.cz>:

	* COPYING:

	Relicenced ELusive to BSD licence (w/o advertising clause), as
	agreed upon in the bug 50. This should fix it.  

Fri Jun  6 21:18:07 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.h, default.c, mailcap.c, mimetypes.c:

	Add identifying name to backends.  

Fri Jun  6 20:34:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Make wildcard lookup more compact and readable 

Fri Jun  6 20:22:31 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Further improve the clarity and testing.  

Fri Jun  6 20:07:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Remake previous fix to actually work. Missing #include added.  

Fri Jun  6 19:37:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Possible badness was fixed with type being NULL when formatting 

Fri Jun  6 19:24:28 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Finally ignore entries where testneedsfile or parsing of optional
	fields reported error.  

Fri Jun  6 19:13:35 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Always use strncasecmp. s/mailcap_map_entries/mailcap_map_size/.  

Fri Jun  6 19:04:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	A lot of small cleanups and improving comments. More sanity checks.  

Fri Jun  6 17:37:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Use lists. This also means introducing a hash item for each type
	that holds the list_head.  

Fri Jun  6 17:24:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Simplify code flow. Add missing allocated memory tests 

Fri Jun  6 16:03:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Cleanups and reduce code duplication by using pointer magic ;) 

Fri Jun  6 12:59:54 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: mailcap.c, mimetypes.c:

	Make mailcap use #defined backend name. Make mimetypes name reflect
	option system.  

Fri Jun  6 12:46:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Quite huge sorry.  Generalize and fix command formatting for
	bufferoverflows.  Formatting is prosponed to when needed.  The bogus
	file expansion removed. Fail if test needs file always! 

Fri Jun  6 11:41:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Completely change the flow of parsing the file. Nomore 'lazy'
	allocation of @entry. Moved most of @entry initialization to
	init_mailcap_entry() 

Fri Jun  6 11:14:26 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Rename to (done|init)_mailcap_entry(). Changed their order which
	will be usefull in next steps.  

Thu Jun  5 23:34:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Move variables to make them as local as possible.  

Thu Jun  5 23:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/file.c:

	Added missing mem_alloc() test.  

Thu Jun  5 22:46:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/common.h:

	Add void to non args struct functions 

Thu Jun  5 22:40:27 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Greatly simplify the code flow in check_entries().  

Thu Jun  5 21:54:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Try to workaround buggy FreeBSD libc containing namespace-polluting
	***** like LIST_HEAD or list_head. Should fix bug 193, reported by
	Jonas.  

Thu Jun  5 16:55:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/memlist.c:

	Reverted bad reindentation.  

Thu Jun  5 16:40:31 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A useless call to getml() was removed.  

Thu Jun  5 16:39:25 2003  Laurent Monin <zas@norz.org>:

	* src/util/: memlist.c, memlist.h:

	Memlist debug now prints file and line.  

Thu Jun  5 15:45:05 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entities cache is now enabled (it will perhaps be disabled at
	0.5pre1 release). Please report any issue.  

Thu Jun  5 15:28:02 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/colors.c, lowlevel/af_unix.c,
	lowlevel/interlink.c, lowlevel/signals.c, osdep/os_dep.c,
	osdep/osdep.c, osdep/win32.c, osdep/win32/win32.c, protocol/ftp.c,
	protocol/url.h, protocol/ftp/ftp.c, sched/session.c:

	Functions declarations tidyup.  

Thu Jun  5 14:38:16 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, bfu/leds.c, bookmarks/bookmarks.c,
	bookmarks/backend/common.c, config/conf.c, config/kbdbind.c,
	config/options.c, cookies/cookies.c, dialogs/menu.c,
	modules/version.c, util/version.c, document/html/parser.c,
	document/html/renderer.c, globhist/globhist.c, intl/charsets.c,
	intl/gettext/libintl.c, intl/gettext/localealias.c,
	lowlevel/home.c, lowlevel/select.c, lowlevel/sysname.c,
	lowlevel/timer.c, lowlevel/ttime.c, osdep/beos.c, osdep/os_dep.c,
	osdep/osdep.c, osdep/beos/beos.c, util/ttime.c, protocol/mailcap.c,
	protocol/auth/auth.c, protocol/http/auth.c,
	protocol/http/blacklist.c, sched/connection.c, sched/download.c,
	sched/sched.c, sched/session.c, ssl/ssl.c, terminal/kbd.c,
	terminal/terminal.c, util/blacklist.c, util/error.c,
	util/memdebug.c, util/string.c:

	type func() -> type func(void) in declarations.  

Thu Jun  5 14:28:02 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	A note about functions without parameters declaration was added.  

Thu Jun  5 14:23:54 2003  Laurent Monin <zas@norz.org>:

	* src/mime/: mime.c, mime.h:

	type func() -> type func(void).  

Thu Jun  5 14:18:37 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/: common.c, common.h, mailcap.c, mimetypes.c:

	type func() -> type func(void).  

Thu Jun  5 14:15:02 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mimetypes.c:

	Spaces fix.  

Thu Jun  5 14:00:30 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Move out the parsing of optional fields 

Thu Jun  5 13:49:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Nested error() call moved to the caller so less parameters are
	needed.  

Thu Jun  5 13:06:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	First step of cleaning ups mailcap support. Rework comments.  

Thu Jun  5 12:08:04 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Errors are now produced in --enable-debug mode if getml() or
	add_to_ml() are called with a NULL first element.  

Thu Jun  5 04:58:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Only freeml() if ml is not NULL.  

Thu Jun  5 00:41:12 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/bfu/msgbox.c:

	Free memory list also before the other two possible returns.  

Wed Jun  4 23:23:18 2003  Laurent Monin <zas@norz.org>:

	* src/util/memlist.c:

	Almost complete rewrite of memory list routines. Useless allocation
	for empty lists were removed. Comments were added.  

Wed Jun  4 22:43:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	-force-html option for compatibility with lynx introduced, doing
	essentially the same thing as -default-mime-type text/html. Fixes
	bug 8. Idea by Boris Filipovic <b.filipovic@centrum.cz>.  

Wed Jun  4 22:21:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/Makefile.am:

	Mark man pages as EXTRA_DIST. Fixes problem reported by Raul.  

Wed Jun  4 22:02:13 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	A potential memleak (when !dlg) was fixed. Reported by fabiob.  

Wed Jun  4 21:47:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	tab-* actions added .. and actions was reordered 

Wed Jun  4 20:05:55 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, config/dialogs.c, config/dialogs.h,
	util/secsave.c, util/secsave.h:

	Secsave error display was improved, now an internal message _and_ a
	strerror message are possible. Dialog refresh was fixed.  

Wed Jun  4 19:34:00 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Indentation cleanups to use tabs if possible in --enable section 

Wed Jun  4 19:26:22 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/common.c, backend/common.h:

	Cleanups correcting #include order, updating comments and parameter
	names for prototypes to be more guiding.  

Wed Jun  4 19:08:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/util/secsave.c:

	Trivial fix of cut'n'paste error reported by Zardoz.  

Wed Jun  4 19:04:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: Makefile.am, backend/Makefile.am, backend/common.c,
	backend/mimetypes.c, backend/mimetypes.h:

	This adds support for mime.types files. Inspired once again by Mutt
	and also existing mailcap support.  

Wed Jun  4 18:39:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h:

	Added get_extension_from_url() which should be moved to
	protocol/url.? ASAP Now mime/ should compile again. Sorry for the
	inconvenience.  

Wed Jun  4 18:05:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Make get_content_type() use get_extension_from_url() introduced in 
	http://bugzilla.elinks.or.cz/attachment.cgi?id=68&action=view 

Wed Jun  4 18:01:24 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, common.h, mailcap.c:

	Introduce utility function to walk through a PATH style string and
	use it in the mailcap backend.  

Wed Jun  4 17:20:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/mime.c:

	Dir was separator not correctly handled when extracting url
	extension, under cygwin it was taking \ as a dir separator even in
	ie. http URLs. Fixes bug 191, patch by Jonas.  

Wed Jun  4 17:15:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: secsave.c, secsave.h:

	enum secsave_errno_set -> enum secsave_errno 

Wed Jun  4 17:14:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, util/secsave.c, util/secsave.h:

	Fixed stupid namespace clash of secsave_errno_set enum and useless
	forcing of values on the enum members.  

Wed Jun  4 17:10:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Captialization fix, reduced regression caused by unknown error used
	instead of Secure open failed.  

Wed Jun  4 17:05:43 2003  Laurent Monin <zas@norz.org>:

	* src/: config/conf.c, util/secsave.c, util/secsave.h:

	Errors handling in secsave was slightly modified, now an explicit
	message is printed when file saving is disabled by option (ie.
	-no-connect).  

Wed Jun  4 16:55:52 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Statification of get_content_type_default().  

Wed Jun  4 16:27:24 2003  Laurent Monin <zas@norz.org>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	write_config_error() now takes an error string as parameter instead
	of an error code. It removes that 2222 ret code from it, and will
	ease things (ie. when error reason will be set by secure_open(), to
	have correct messages when trying to save conf in -no-connect mode).  

Wed Jun  4 15:46:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Make no_str static instead of being dynamic. Also statify the symbol
	(not used anywhere outside of charsets.c). This should fix bug 115.
	Patch by Witek (and me).  

Wed Jun  4 13:32:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Make ELinks compile using gcc version 3.3 with -O2 and -Werror
	(closes: #189) 

Wed Jun  4 10:26:41 2003  Laurent Monin <zas@norz.org>:

	* src/: viewer/text/view.c, dialogs/info.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:23:10 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, ssl/ssl.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:17:22 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: finger.c, ftp.c, ftp/ftp.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:10:37 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: http/http.c, file.c, file/file.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:06:03 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, lowlevel/sysname.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 10:02:42 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 09:59:14 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, cookies/cookies.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 09:49:20 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	add_to_str() -> add_chr_to_str().  

Wed Jun  4 08:56:58 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	add_to_str() calls were replaced with less expensive
	add_chr_to_str() calls if applicable.  

Tue Jun  3 23:20:21 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: common.c, mailcap.c, mailcap.h:

	Only define backend symbols when they are required. Idea by
	kuser@...  

Tue Jun  3 20:23:35 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	elinks_memmove() was fixed (again).  

Mon Jun  2 17:05:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	memmove() should take void *, not char *. Suggested by zas.  

Mon Jun  2 16:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Some comments reorganization (very minor).  

Mon Jun  2 16:04:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Moved libc functions before string comparasion functions. Prevents
	'declared inline after being called' warnings, reported by zas.  

Mon Jun  2 15:55:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Reverted overloaded patch.  

Mon Jun  2 15:42:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fix bug (bug 184) when document.browse.links.wraparound skips link
	#1 and the last link (as it gets moved twice). Patch by
	Zardoz@users.sf.net (and me). Will need more work in future, maybe.  

Mon Jun  2 10:02:42 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	Replacement functions for strchr() and strrchr() were added, fixing
	an issue reported by Jonas. elinks_memmove() was fixed. All stub
	functions were moved at top of source file to prevent "declared
	inline after being called" warnings.  

Mon Jun  2 01:52:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix bug 188: Need to redraw after enter/enter-reload with a prefix.  

Sun Jun  1 18:57:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	When we receive \027[^]O\027], always assume it is alt+something,
	not only if the something is >= ' '. This enables even ie. alt+tab
	being catched. Based on patch by Miciah, fixing bug 186. Hopefully.  

Sun Jun  1 18:55:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/kbd.c:

	Minor tidyup.  

Sun Jun  1 17:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	These are the cosmetical changes (minor indentation fixes).  

Sun Jun  1 16:50:43 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Prefer withval over default when looking for SSL libs. Perhaps
	co-fixes bug 7.  

Sun Jun  1 16:46:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Use prefix optionally passed along the --with parameters.  

Sun Jun  1 11:53:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	No need to redraw when the user is entering a key prefix (or did I
	miss some thing?) 

Sun Jun  1 11:37:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix for bug 187: Check that prefixes don't specify non-existent
	links.  

Wed May 28 09:59:23 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entity cache was greatly improved. memmove() call was removed. It
	uses iterative search + a kind of hashing on length + dichotomic
	search for not yet cached entities. Disabled for now but fully
	functionnal, please test and profile. Feel free to improve ;).
	Hashing whole entity table does not seem to improve things. Current
	solution is very effective.  

Wed May 28 08:41:40 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	A now useless test was removed (reported by Miciah). A comment about
	code redundancy between convert_string() and put_chars_conv() was
	added.  

Wed May 28 00:58:41 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.h:

	Sync header with new get_entity_string() definition which use const.  

Wed May 28 00:45:46 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, intl/charsets.c:

	Ooops, fix bug in &#1234; interpretation introduced by last patch
	and cleanup of experimental cache code (disable for now). Thanks to
	Master "Eye-Of-The-Awk" Pasky for the report.  

Tue May 27 22:12:58 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/gettext.m4:

	The bison detection was wrong, fixed by skim <skim@psi.cz>.  

Tue May 27 21:57:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, dialogs/options.c, sched/session.c,
	sched/session.h, terminal/terminal.c, terminal/terminal.h:

	Reverted patch changing title setting stuff by zas. It was
	overloaded and corrupted by some changes bad from the design
	standpoint. Needs to be reintroduced by smaller bits. Reopens bug
	178.  

Tue May 27 20:03:37 2003  Laurent Monin <zas@norz.org>:

	* src/: intl/charsets.c, document/html/renderer.c:

	Entity decoding was inefficient since we were calling
	get_entity_string() for non-entity strings like &t=abc;. This was
	fixed. An experimental entity string cache was added (but disabled
	for now). Feel free to test and improve, have a look at
	src/intl/charsets.c near line 37 if interested.  

Tue May 27 07:58:59 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Fix a potential segfault introduced by my last patch, fix some
	comments.  

Mon May 26 08:51:00 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Copy TERM env variable before usage, code redundancy was reduced. It
	fixes bug 180. Issue reported by Pasky, partially fixed by Karsten,
	patch by me.  

Mon May 26 08:25:29 2003  Laurent Monin <zas@norz.org>:

	* po/: POTFILES.in, be.po, bg.po, ca.po, cs.po, da.po, de.po,
	el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po,
	is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po,
	ru.po, sk.po, sv.po, tr.po, uk.po:

	POTFILES.in was updated, .po files resynced and french translation
	updated.  

Sun May 25 11:29:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, sched/session.c:

	Internationalized TERM_TITLE_DEFAULT.  

Sun May 25 11:28:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, sched/session.c:

	Reverted TERM_TITLE_DEFAULT removal.  

Sun May 25 10:01:29 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, terminal/terminal.c, terminal/terminal.h:

	attach_terminal() was moved from main.c to terminal.{c,h},
	check_terminal_pipes() and close_terminal_pipes() were introduced.  

Sun May 25 09:41:44 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: signals.c, signals.h:

	Typo fixes. I prefer sizeof(var) against sizeof var, more consistent
	notation imho.  

Sun May 25 09:35:22 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, osdep/osdep.c, sched/session.c,
	sched/session.h, util/conv.c, util/conv.h, viewer/text/view.c:

	[encode|decode]_url() were renamed to
	[encode|decode]_shell_safe_url() and moved from session.{c,h} to
	conv.{c,h}.  

Sun May 25 09:22:53 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, sched/session.h, util/conv.c, util/conv.h:

	add_xnum_to_str() and add_time_to_str() were moved from
	session.{c,h} to conv{c,h}.  

Sun May 25 01:55:56 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, sched/session.c:

	TERM_TITLE_DEFAULT was dropped and replaced by a gettextized string
	in session.c.  

Sun May 25 01:39:45 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/options.c, sched/session.c,
	sched/session.h, terminal/terminal.c, terminal/terminal.h:

	set_terminal_title() was rewritten, now it belongs to session.c
	since it depends on session title, do_terminal_title is kept in
	terminal.c and was slightly modified. Now prefix, default title, and
	suffix are macros in setup.h, feel free to adapt them to your taste.
	These changes fix bug 178.  

Sat May 24 23:40:14 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/dialogs.c:

	Remove the space before the question mark in the 'Delete keybinding'
	confirmation box.  

Sat May 24 22:55:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	At least partially documented terminal-related structures. Doesn't
	feel bad to have structures look like this, does it? ;-) 

Sat May 24 22:32:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/renderer.c, bookmarks/bookmarks.c,
	config/kbdbind.c, config/options.c, util/lists.h:

	Introduced add_to_list_bottom(), which inserts stuff at the list's
	bottom, surprisingly. Use that instead of the ugly add_at_pos()
	hacks. Gloria turns out to be a KGB secret agent and blows up
	everything when she reaches the Simon's ranch, accompanied by
	John/Richard. Junior is kidnapped, frozen and his genotype is
	inserted into unnamed web browser's source.  

Sat May 24 22:07:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Somehow, we all of sudden have plenty of completely redundant code
	at the both sides of the magic border. So took it outside and
	unified. John visits Junior, introduces himself as Sally's good
	friend and praises for a lend. As Junior goes to the city to get
	some money, John seduces Gloria, steals some precious stuff at
	Junior's mansion and changes his name back to Richard. They catch a
	fly to Texas.  

Sat May 24 21:50:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Moved the del_from_list() (x) clearing hack to list_del_enforce(),
	non-magic counterpart introduced together with the dummy call in the
	non-magic del_from_list(). Sally meets Simon and discuss his
	attitude to John, together with Thomas and Fred's father Alan.
	Eventually, Sally discovers that John is in fact Richard. In the
	meantime, John arrives to L.A.  

Sat May 24 21:41:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Introduced harmless list_magic_*() macro calls to the list handling
	routines on the non-magic side. Junior takes Gloria to his maison
	and they spend a night together.  

Sat May 24 21:35:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Moved list_magic_error() to a better place, introduced dummy
	counterpart of it at the nonmagic side. Sally catches flight to
	Texas.  

Sat May 24 21:32:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	List magic checks encapsulated to a suite of macros
	(list_magic_check() and list_magic_chkbool(), wrapping up
	list_magic_correct()). In non-magic part, same named dummy macros
	are introduced. Simon discovered that Junior didn't abide the
	agreement they had and sold his part of the HBRCOPOITA Ltd. As John
	tells Sally about his visit at Simon's, tension starts to slowly
	develop and Sally is about to call Simon.  

Sat May 24 21:15:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Unified magic setting to list_magic_set(), LIST_SET_MAGIC() now
	wraps list_magic_set(). list_magic_set() exists both in magic and
	non-magic scenario (then it's empty). Sally meets John, who was
	previously introduced to Fred by Thomas in the airplane, when they
	were flying to Texas in order to visit Sally's mother (real,
	although none of them know) and Simon on their ranch.  

Sat May 24 21:08:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Tidyup. Hopeless attempt to orient myself inside ;-).  

Sat May 24 20:26:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: select.c, select.h, signals.c:

	Removed that terrible CHK_BH; thing, check_bottom_halves() now acts
	like CHK_BH and wraps do_check_bottom_halves() (original
	check_bottom_halves() ;). dcbh() is now slightly optimized. Sally
	goes after Richard, who she believes to secretly married her
	lately-divorced mother-in-law, daughter of Simon's nephew who went
	to Vietnam. In the meantime, Junior meets Gloria and something
	seemingly starts to develop between them.  

Sat May 24 20:16:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/signals.c, lowlevel/signals.h, main.c:

	Move cleanup.  

Sat May 24 14:48:49 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/setup.h:

	ELINKS_DOC_URL now points to http://elinks.or.cz/docmentation 

Sat May 24 13:52:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Fix crash caused by resizing with multiple tabs, closes bug 163.
	Patch by Witek (and me). Note that the comment may not be 100% true
	yet (and there may be some out-of-tabs drawing problems), but it
	will be true VERY soon ;). Stay tuned.  

Sat May 24 13:44:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.h:

	Oops, stale argument forgotten there.  

Sat May 24 13:38:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.h, terminal.c, window.c:

	Removed IF_ACTIVE and intrudced inactive_tab() instead, which has
	simpler usage and expands to a boolean expression with effect
	opposite to IF_ACTIVE. Hrm.. Oh, and some more minor whitespace
	cleanups could slip through.  

Sat May 24 13:30:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Whitespaces cleanup. Er.. ;) 

Sat May 24 11:38:34 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	get_entity_string() cleanup, optimization, comments.  

Sat May 24 10:24:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sat May 24 09:38:52 2003  Laurent Monin <zas@norz.org>:

	* configure.in, src/version.c, src/modules/version.c,
	src/util/version.c:

	Configure option --disable-backtrace is now fixed. An information
	about it was added in version info (only when disable). It closes
	bug 103.  

Sat May 24 08:55:58 2003  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Entities decoding was fixed and improved. It closes bug 175. Patch
	by Zardoz and me.  

Fri May 23 21:22:20 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, lowlevel/Makefile.am, lowlevel/select.c,
	lowlevel/select.h, lowlevel/signals.c, lowlevel/signals.h,
	osdep/os_dep.c, osdep/osdep.c, scripting/lua/core.c,
	terminal/terminal.c:

	Signals related functions were moved to lowlevel/signals.{c,h}.  

Thu May 22 14:35:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: encoding/encoding.c, util/encoding.c:

	Reverted Miciah' change (keep related stuff together).  

Thu May 22 14:29:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Slightly simlified code flow.  

Wed May 21 18:07:39 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/gen_translations_stats.sh:

	Fix for division by zero in awk part caused by parsing of error
	messages.  Also some minor alignment adjustments.  

Wed May 21 11:44:46 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Menu entries were added for tab navigation. Fix bug 156.  

Wed May 21 11:32:38 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	switch_to_[next|prev]_tab() were introduced.  

Wed May 21 10:19:19 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/config/kbdbind.c:

	s/Open in a new window/Open a new window/ 

Wed May 21 10:08:42 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: Makefile.am, menu.c, menu.h, hotkey.c, hotkey.h:

	Hotkeys functions were moved to hotkey.{c,h}.  

Wed May 21 10:00:28 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: encoding/encoding.c, util/encoding.c:

	Move encoding_names definition up to where that unnecessary
	prototype for it that I removed in the last commit was.  

Wed May 21 09:47:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Submenu mark was changed from > to >> to prevent conflict with > key
	shortcut (will be used for tabs). Please comment.  

Wed May 21 09:46:24 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/: encoding/encoding.c, encoding/encoding.h, util/encoding.c,
	util/encoding.h:

	Just for fun, s/\[ \]/[]/ and remove an unnecessary prototype.  

Wed May 21 09:32:59 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix for bug 162: open-link-in-new-window displays menu even if no
	link is selected.  

Wed May 21 08:35:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	A missing newline after version information is now printed on forced
	core dump.  

Wed May 21 07:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Is there any need to copy address to a buffer ? Please test,
	comment, improve or revert (if needed).  

Wed May 21 02:04:45 2003  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.1, elinks.conf.5, elinkskeys.5.in:

	Manpages are now hosted in doc/man/ ...  

Wed May 21 02:02:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in, doc/Makefile.am,
	doc/book/manpages/elinks.1.xml, doc/man/.cvsignore,
	doc/man/Makefile.am, doc/man/man1/.cvsignore,
	doc/man/man1/Makefile.am, doc/man/man5/.cvsignore,
	doc/man/man5/Makefile.am:

	Installed manpages are now hosted in doc/man/ and maintained in
	DocBook format (elinks.conf.5 will join later). Automake dictates
	that we have to use separate Makefiles since path/to/manpage is not
	supported.  

Wed May 21 01:57:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/man5/elinks.conf.5:

	This is the file from the root dir moved to prepare installing
	manpages from doc/man dir.  

Tue May 20 22:41:46 2003  Laurent Monin <zas@norz.org>:

	* contrib/lua/hooks.lua.in:

	A dumb prefix bz and a smart prefix bug were added to fasten access
	to ELinks bugzilla. Idea by fonseca ;).  

Tue May 20 22:11:17 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Fixed problems with 'gg:foo bar' query parsing, patch by thement.  

Tue May 20 22:09:16 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, version.h, dialogs/info.c, modules/version.c,
	modules/version.h, util/version.c, util/version.h:

	Only print useful version information at backtrace time. A new
	parameter @more was added to get_dyn_full_version() to handle that..  

Tue May 20 21:54:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Emit panicking message when addrlen was too bad. We should catch
	this stuff.  

Tue May 20 21:47:08 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Er... static hostbuf is better ;).  

Tue May 20 21:33:41 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Fixes, cleanup and optimizations in parse_url(), useless calls to
	strchr() family were reduced, brackets tests simplified, a
	typo/compile error introduced by last patch fixed, see diff for more
	details. Please test extensively.  

Tue May 20 21:27:40 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/terminal/kbd.c:

	Translate bad chars in terminal string to -. Patch by Karsten and
	me, fixes bug 168.  

Tue May 20 19:35:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fixed potential crash pointed out by Sergey.  

Tue May 20 17:56:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Minor simplification in parse_url(), use safe_strncpy() instead of
	memcpy() and nulling.  

Tue May 20 17:44:57 2003  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Added notice about Lua (and its required version).  

Tue May 20 10:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/config/urlhist.c:

	Ooops, forgot initialization of goto_url_history. Fixed.  

Tue May 20 10:07:25 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, version.h, config/urlhist.c, config/urlhist.h,
	dialogs/menu.c, encoding/encoding.c, modules/version.c,
	modules/version.h, util/encoding.c, util/version.c, util/version.h,
	encoding/encoding.h, util/encoding.h:

	Some global variables are now correctly (i hope) declared as extern
	in .h files. Compilation with -fno-common is now possible.  

Tue May 20 09:43:29 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, modules/version.c, util/version.c:

	memset() call is useless, just set first byte to NUL char is
	sufficient.  

Tue May 20 09:41:34 2003  Laurent Monin <zas@norz.org>:

	* src/: version.c, modules/version.c, util/version.c:

	Use safe_strncpy() instead of memcpy() + strlen() + comparaisons.
	Pointed out by Miciah.  

Mon May 19 23:10:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A potential buffer overflow (pointed by Karsten Scholzel) and some
	minor issues were fixed in IPv6 url handling. Please recheck for bug
	160.  

Mon May 19 14:12:29 2003  Laurent Monin <zas@norz.org>:

	* src/: Makefile.am, main.c, version.c, version.h, dialogs/info.c,
	modules/version.c, modules/version.h, util/error.c, util/version.c,
	util/version.h:

	version.{c,h} were introduced. Info box uses now a function to
	retrieve version, and backtrace or core dump now print some version
	information too. Some calls to fprintf() were replaced by fputs().
	Feel free to improve, it is not perfect yet.  

Mon May 19 13:23:03 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Gettextization of some strings (like "ELinks" or "gzip") was
	removed, spaces are now outside gettextized strings.  

Mon May 19 13:21:16 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/libintl.h:

	term == NULL case is now handled. It will help later ;).  

Mon May 19 08:46:47 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/protocol/http/http.c:

	s/(?<=encoding\.c)onn// to fix a tiny error by pasky in a comment 
	("Renamed 'c' identifier to 'conn'", 2003/05/18 16:05:18) 

Sun May 18 23:37:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Revert the reverted non-bug fix. If table cache was not initialized
	there is no need to search an entry in it.  

Sun May 18 23:14:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	ADD wasn't properly undef'd after the cleanup.  

Sun May 18 23:09:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed a bug which came through the last zas' cleanup.  

Sun May 18 23:05:34 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Ooops ;).  

Sun May 18 23:00:48 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Many minor cleanups, optim, and some comments.  

Sun May 18 16:30:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	If *headers starts by a newline, pretend it is empty.  

Sun May 18 16:27:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Default is like HTTP code is 200.  

Sun May 18 16:26:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	HTTP/0.9 documents are text/html. Thanks to Mikulas for
	implementation tips.  

Sun May 18 16:08:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Removed useless 'cache' variables, conn->cache used instead.  

Sun May 18 16:05:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Renamed 'c' identifier to 'conn'.  

Sun May 18 16:03:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Renamed 'e' identifier to 'cache'.  

Sun May 18 15:59:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Removed some now-dead code. Effectively reverted the whole previous
	zas' patch by now.  

Sun May 18 15:56:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Real HTTP/0.9 support. When we don't receive a header starting by
	/^HTTP\//, it is treated as no header and immediatelly a body. Fixes
	bug 14.  

Sun May 18 15:15:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	sent_version.major can never be zero now. We always hope for better
	;).  

Sun May 18 15:13:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/http/http.c:

	Removed protocol.http.bugs.http09, it does not seem really useful.  

Sun May 18 13:16:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Wha, stupid CVS! ;) 

Sun May 18 13:16:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Structurize (use struct http_version more agressively), indentation
	fixes (minor).  

Sun May 18 12:45:53 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Use a pointer to struct http_version in get_http_code(). Idea by
	fonseca ;).  

Sun May 18 12:37:08 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/http/http.c:

	Support from HTTP/0.9 was added. A new option
	protocol.http.bugs.http09 enables it. An issue still exists, since
	we have no content-type header, it always renders document as text.
	Please propose fix for that.  

Sun May 18 11:43:50 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	HTTP version handling was almost totally rewritten, major and minor
	version numbers are handled separately, get_http_code() is now able
	to handle any http version (past, present and future). A new struct
	http_version was introduced. Minor changes were made to prepare
	HTTP/0.9 support. Feel free to improve.  

Sat May 17 22:01:04 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	In bz already.  

Sat May 17 21:04:41 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/dialogs/edit.c:

	Fix bug 158: 'Add bookmark' and 'Search history' boxes too small.  
	layout_add_dialog and layout_hierbox_browser grow yet more
	similar...  

Sat May 17 20:53:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Minor cleanup.  

Sat May 17 20:43:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	When not resuming, open() file w/ O_TRUNC, fixing bug 27. Patch by
	Witek and me.  

Sat May 17 10:56:00 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	A useless call to _() was removed.  

Sat May 17 10:49:38 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Useless calls to _() were reduced.  

Sat May 17 10:28:11 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/libintl.h:

	An helper was added to detect redundant calls to _(). Should help
	with bug 141. To enable it, define DEBUG_IT in libintl.h 

Sat May 17 00:09:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	...and now properly wrap=hardize the textareas being sent. wrap=hard
	is now supported properly. hopefully.  

Sat May 17 00:00:58 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Reordering of file menu entries. Feel free to improve.  

Fri May 16 23:44:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Tidyup.  

Fri May 16 23:44:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Don't normally call format_text with wrap attribute being hard. That
	gives us weird result, by hard-inserting newlines there and thus
	smooth rewrapping not being done correctly.  

Fri May 16 23:31:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/terminal.c:

	Removed that terrible startup goto dialog hack, this also fixes
	various problems with tabs, redrawing and opening/closing while this
	is turned on. Fixes bug 142. Patch by Sergey and me.  

Fri May 16 23:09:26 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/mailcap.c:

	Comments about a potential buffer overflow concerning
	convert_command() were added. Jonas please fix it asap.  

Fri May 16 22:49:12 2003  Laurent Monin <zas@norz.org>:

	* src/mime/backend/default.c:

	Cleanup, fixes (i hope), and optim.  

Fri May 16 22:38:41 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Fixed my last patch is...  

Fri May 16 22:30:06 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed a bug which slipped between my fingers and entered bugzilla
	already ;-).  

Fri May 16 22:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/mime/mime.c:

	Cleanup and optimizations. fonseca please verify.  

Fri May 16 22:28:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Cleanup of the Help menu URL shortcuts, use a common function and
	per-item data (the URL).  

Fri May 16 22:25:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Minor help menu reordering, added some bars.  

Fri May 16 21:57:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	An additional magic check was added to free_list() macro.  

Fri May 16 21:25:01 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/cache.h:

	Ooops, a field added for test pruposes was removed.  

Fri May 16 21:20:22 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/cache.h:

	Reverted struct fields reordering, it causes bug 101. There's
	something very weird there. Fields order dependencies are very bad
	thind [tm].  

Fri May 16 19:42:32 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/menu.c:

	Help menu was reordered and modified. Lua documentation link was
	removed (it'll appear on documentation page). Two new links will
	appear in debug mode, one to cvsweb and the other to bugzilla. A
	macro is used as helper for this kind of menu entry. Cvsweb url is
	not definitive.  

Fri May 16 19:13:05 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	A useless test was removed.  

Fri May 16 19:06:40 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/vs.c:

	In memset() we trust.  

Fri May 16 19:05:24 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Reverted last patch, space for NUL byte is in struct view_state.
	Thanks to Pasky.  

Fri May 16 17:47:00 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Reorganization, now it's almost the final new look, except the
	to-go-bugzilla bugs.  

Fri May 16 17:42:14 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed stuff insterted to bugzilla or fixed. Very minor updates.  

Fri May 16 10:01:48 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Allocated space was not enough to store ending NUL char of url
	string, please recheck.  

Thu May 15 23:37:11 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Pasky reverted a patch i made, result is buggy, well, as usual, so
	whats changed ? Bug disappears and cleanup. Please pasky dont revert
	it :) 

Thu May 15 23:02:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, viewer/text/view.c:

	Support for wrap=hard introduced (supporting few aliases as well),
	fixes bug 38. Patch by Witek and me.  

Thu May 15 22:42:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	A bug workaround was removed. Last patch about textarea renders it
	useless and it causes some issues. Textarea navigation seems to work
	well now. Thanks to witekfl.  

Thu May 15 22:40:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, renderer.c:

	Parse <head> contents even when viewing page source, closes bug 40.
	Patch by Witek and me.  

Thu May 15 22:28:19 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Rows limits were badly calculated in textarea code. Minor cleanup.
	Patch by witekfl and me.  

Thu May 15 21:43:38 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Download progress dialog was fixed and improved, it now uses
	ulongcat().  

Thu May 15 21:20:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h:

	elinks_ulongcat() now supports base choice. elinks_ulonghexcat()
	function have disappear and is now a macro using elinks_ulongcat().  

Thu May 15 12:53:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	ulongcat() recent changes were ported to ulonghexcat(),
	add_[k]num_to_str() were fixed accordingly too.  

Thu May 15 08:10:17 2003  Laurent Monin <zas@norz.org>:

	* src/Makefile.am:

	mime subdir was added to enable libmime.a building. Idea by fonseca
	;) 

Thu May 15 08:01:50 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	stpcpu() detection will always fail, this is an error, removed ;).
	Thanks to fonseca.  

Wed May 14 22:48:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed weirdness of go_unbackwards() add_to_list() ussage, it was
	apparently incorrect. Now it is simpler but should be in fact
	correct. And appears to work. Closes bug 114. Discovered by zas.  

Wed May 14 21:08:45 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	We sometimes memmove() 0 bytes, fixed. An internal error detection
	was added to prevent a similar issue.  

Wed May 14 20:58:05 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	We sometimes memmove() 0 bytes, fixed.  

Wed May 14 17:20:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Reintroduced sanity paranoid checks into ulongcat().  

Wed May 14 16:59:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Gdb-friendly lists debugging....  

Wed May 14 16:34:38 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Always force segfault on bad list magic detection.  

Wed May 14 15:11:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	ulongcat() comment updates (stylistic fix and added comment about
	purpose and supposed usage).  

Wed May 14 15:03:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Initialize pos at declaration time.  

Wed May 14 13:08:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Clarified the return value description for ulongcat().  

Wed May 14 13:06:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Again moved start initialization to declaration.  

Wed May 14 13:06:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Comments tidyup and reduction to a useful rate.  

Wed May 14 12:48:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Fixed return value if truncated.  

Wed May 14 12:43:12 2003  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	Fully tested ulongcat() version. Optimizations are welcomed, but
	take care.  

Wed May 14 12:00:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Changed return value of elinks_ulongcat(): now it returns -1 on
	error, 0 if ok and desired ideal width if truncated. Also some
	possible wrong value being returned at edge cases (reported by zas)
	should be fixed. Let's see ;).  

Wed May 14 11:49:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Directly initialize start.  

Wed May 14 11:47:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	With non-zero slen initial value, the resulting slen value was
	wrong, this should fix that. Pointed out, explained etc by zas.  

Wed May 14 11:43:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Do more paranoical pos value checks. Let's go the safe way ;-). Does
	not change the functionality.  

Tue May 13 23:57:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/view.c:

	Removed use of d_opt in context of init_bars_status(), it was
	completely wrong (it frequently points to some crap and should not
	exist altogether anyway; resulted in random shooting into memory).
	Now NULL is passed instead and code was added inside of
	init_bars_status() to try to retrieve the document_options from
	ses->screen->f_data in that case. Fixes bug 96.  

Tue May 13 22:53:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inpfield.c:

	Huge reorganization of one-char identifier, resulting in something 5
	times larger, as usual. (Compilation fix.) Thanks, zas.  

Tue May 13 22:37:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bfu/inphist.c, config/urlhist.c:

	Tidyup and minor reindentations, attempting to clear out some
	probably buggy code.  

Tue May 13 15:48:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Prevention of calloc(0, sizeof(int)) calls.  

Tue May 13 14:29:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Minor tidyup. Fixed write_global_history() to handle properly
	elinks_home==NULL.  

Tue May 13 13:38:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Reverted recent save_cookies() change, we don't want to create
	./cookies randomly when not elinks_home. Instead, do not
	save_cookies() at all if not elinks_home.  

Tue May 13 13:34:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/common.c:

	Added missing elinks_home check to bookmarks_save(). Moved
	half-redundant !file_name check in bookmarks_load(), introduced by
	the previous patch.  

Tue May 13 13:29:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/urlhist.c:

	Added missing elinks_home check to save_url_history(). Fixed double
	free in load_url_history introduced by the previous patch.  

Tue May 13 12:27:44 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.c, config/conf.c,
	config/urlhist.c, cookies/cookies.c, globhist/globhist.c:

	Bug 102 is now fixed. elinks_home can be NULL, especially with
	-no-home option.  

Mon May 12 21:59:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed gettextization of cache_inf().  

Mon May 12 21:53:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Reverted memory_inf() changes (broke gettextization sanitization and
	paralel dialog instances), sanitized gettextization while at it ;).  

Mon May 12 21:46:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	This just slipped through, sorry. Linkage fix.  

Mon May 12 21:23:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	The variables change flow was made hopefully a little more
	intuitive.  

Mon May 12 21:21:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Added explicit parenthesis near signification, ensure that we have
	space for the - sign.  

Mon May 12 21:18:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	The variables change flow was made hopefully a little more
	intuitive.  

Mon May 12 20:43:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Minor reindentation.  

Mon May 12 20:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: conv.c, conv.c:

	Code redundancy reduced, removed the all-that-frequent generic
	reallocation code.  

Mon May 12 20:39:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Minor reindentation.  

Mon May 12 20:37:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, util/conv.c, util/conv.h, util/string.c,
	util/string.h:

	Moved sn*print() functions back to util/conv.h, where they belong.
	Moved u?long(hex)?cat() functions suite from util/string.* to
	util/conv.*, where it belongs.  

Mon May 12 20:24:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Leave more space for percentage counter. It can exceed 100%
	theoretically and it does no harm.  

Mon May 12 20:23:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/parser.c, protocol/file.c,
	protocol/file/file.c, protocol/http/http.c, sched/download.c,
	sched/session.c:

	Undone the hyperscary &-ization of static strings in ulongcat()
	calls, introduced before for some unknown reason.  

Mon May 12 19:33:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Rewritten elinks_ulongcat() description in a comprehensible way.  

Mon May 12 19:09:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Whoops. Fixed the 'do you want to post form' msgbox().  

Mon May 12 19:06:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Removed confusing No/Cancel differentation in 'Shall I post that
	form' dialog. Now, the no possibility (which for some reason just
	stripped the POST string and went on) was removed and cancel
	possibility (cancelling the whole action) became the new no
	possibility. Fixes comment 6 of bug 2.  

Mon May 12 08:09:06 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* TODO:

	Ditto. Forgot to :wq.  

Mon May 12 08:07:31 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* TODO:

	Deleted some entries that have been moved to Bugzilla. I'll finish
	the job tomorrow, if pasky doesn't.  

Sun May 11 22:56:45 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Bug fix was fixed. Am i so tired ? 

Sun May 11 22:42:42 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	A stupid and fatal bug was fixed in longcat().  

Sun May 11 21:28:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* AUTHORS:

	Added Michail as author of Mutt's mailcap code + elinks.or.cz to
	self 

Sun May 11 19:49:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	A function ulonghexcat() was added to do fast convertion of integers
	to hexa strings. Bye bye snprintf(str, 8, "#%02x%02x%02x", color->r,
	color->g, color->b), you are 100x too slow for us.  

Sun May 11 18:34:26 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* AUTHORS:

	Update my E-mail address in AUTHORS and, while I'm editing the file, 
	put in the rest of my name.  

Sun May 11 16:28:14 2003  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Two minor optimizations and very minor cleanup.  

Sat May 10 23:05:27 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Updated mailing list info.  

Sat May 10 23:03:12 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	The bugs now live in Bugzilla.  

Sat May 10 22:50:32 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	The count of remaining entries was wrong (by one), fixed. Cache
	entry refcount and data_size now appear in dialog when compiled with
	--enable-debug.  

Sat May 10 20:06:27 2003  Laurent Monin <zas@norz.org>:

	* src/util/snprintf.c:

	Cleanup, elinksification, comments.  

Sat May 10 12:59:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	When closing tab, move to the _previous_ tab, not the next one.
	Fixes bug 35.  

Sat May 10 12:00:17 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A bug entry was removed. Thanks to Witekfl :) 

Sat May 10 11:55:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Tags were badly interpreted in plain documents. This is now fixed.
	Patch by Witold Filipczyk.  

Sat May 10 11:36:08 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Titles in link tags are now honoured. It helps to get significant
	bookmarks titles. Patch by Hugo Haas and me.  

Sat May 10 11:33:05 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Hugo Haas was added to AUTHORS document.  

Sat May 10 04:07:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Added default irc protocol handlers.  

Sat May 10 02:18:15 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A minor bug (term title and html<>souce) was added.  

Sat May 10 01:29:08 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h, string.h:

	add_knum_to_str() was rewritten. snprint() and snzprinf() are now
	macros using [u]longcat(), these were moved to string.h.  

Sat May 10 00:27:59 2003  Laurent Monin <zas@norz.org>:

	* src/util/: conv.c, conv.h, string.c, string.h:

	ulongcat(), longcat(), add_num_to_str() now returns int instead of
	void. add_num_to_str() was totally rewritten. Performance made a
	jump.  

Fri May  9 22:06:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/.vimrc:

	Added missing fairy 

Fri May  9 22:04:15 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in:

	Generate doc/man/man1/elinks.1 with info about sysconfdir 

Fri May  9 21:59:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/Makefile.am:

	Added man pages as EXTRA_DISTS.  

Fri May  9 21:58:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	Some small corrections and updates. Added info about bugzilla.  

Fri May  9 21:45:17 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/.cvsignore:

	Added man state files when export MANPATH=doc/man:$MANPATH 

Fri May  9 21:43:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/elinks.1.in, man5/elinkskeys.5:

	The docbook generated man pages.  

Fri May  9 21:42:18 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/man/: man1/.cvsignore, man5/.cvsignore:

	Added jade wrapper state files.  

Fri May  9 21:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Added navigation keys from elinks.1.  

Fri May  9 18:18:57 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/: info.c, menu.c:

	Cleanup and cache info menu was re-enabled. A limit to the number of
	printed entries was added.  

Fri May  9 17:40:19 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	snprintf() -> ulongcat().  

Fri May  9 17:27:29 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	snprintf() -> ulongcat().  

Fri May  9 17:19:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	snprintf() -> ulongcat() for terminal size in user agent string.  

Fri May  9 17:11:37 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Another snprintf() -> ulongcat(): it concerns percentage info in the
	download progress dialog.  

Fri May  9 17:09:38 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	ulongcat() fix: returned length was one less than it should with
	fillchar set.  

Fri May  9 16:49:43 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	longcat() was introduced (identical to ulongcat() but accepts
	negative numbers (as long).  

Fri May  9 16:30:15 2003  Laurent Monin <zas@norz.org>:

	* src/: protocol/file.c, protocol/file/file.c, sched/session.c,
	util/string.c, util/string.h:

	ulongcat() fix (padding error) and behavior change. Now if fillchar
	parameter is not a NUL char, then padding is done with that char,
	one application can be seen in file.c.  

Fri May  9 15:36:25 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	The memset() call in ulongcat() was removed, since most times we'll
	use that function with less than 10 zero padding, gain is not
	significant imho.  

Fri May  9 15:11:39 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, sched/session.c, util/string.c,
	util/string.h:

	ulongcat() function is now able to print zeros before a number
	(00123), a macro wrapper is used to enforce correct typecasting, and
	it now replaces more snprintf() calls.  

Fri May  9 15:11:20 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: book/.vimrc, book/manpages/.vimrc, man/.cvsignore,
	man/.vimrc, man/man1/.cvsignore, man/man1/.vimrc,
	man/man5/.cvsignore, man/man5/.vimrc:

	More fairies 

Fri May  9 15:03:58 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/README:

	A few words to doc seekers ...  

Fri May  9 14:23:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: authors.xml, bookmarks.xml, configuration.xml,
	fdl.xml, installation.xml, introduction.xml, mailcap.xml,
	manual.xml, mime.xml, misc.xml, options-reference.xml, preface.xml,
	revision.xml, sample-configfile.xml, style.css, wordlist.xml:

	Giving doc/book/ a facelift. It will involve restructuring documents
	and introduce them one by one later when they are actually done.
	Hopefully it'll make it easier to get the buildsystem right.  

Fri May  9 13:43:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed missing typecast.  

Fri May  9 13:23:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, terminal/terminal.c:

	decode_session_info() now actually works properly (hopefully). It
	doesn't take len parameter but takes it from the first int in the
	session info data (which was not anticipated before, thus the whole
	decoding went tragical). It should fix various problems with elinks
	<url>, opening document in a new window and so on.  

Fri May  9 12:42:13 2003  Laurent Monin <zas@norz.org>:

	* src/: util/string.c, util/string.h, document/html/parser.c:

	An sprintf(foo, "%d", bar) was replaced by an ulongcat() call.  

Fri May  9 10:43:05 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Inserted new 'default keybindings'.  

Fri May  9 10:24:38 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Done cleaning up the last part.  

Fri May  9 01:25:48 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/README:

	Rewritten a bit 

Fri May  9 00:57:01 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/VERSION:

	Version will be maintained as an entity 

Fri May  9 00:43:36 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinkskeys.5.xml:

	Still some work to be done to 'clean' it up in regards to coding
	style.  Also maybe needs to contain info about navigation keys (from
	elinks.1) 

Fri May  9 00:41:06 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	Moved info about system wide conf file over from elinkskeys man
	page.  

Thu May  8 23:03:06 2003  Laurent Monin <zas@norz.org>:

	* src/: main.h, config/urlhist.c, bfu/hierbox.c,
	dialogs/document.c, dialogs/hierbox.c, dialogs/menu.h,
	document/html/renderer.c, intl/charsets.c,
	intl/gettext/localcharset.c, lowlevel/af_unix.c,
	lowlevel/connect.c, lowlevel/dns.c, lowlevel/home.c,
	lowlevel/interlink.c, lowlevel/timer.c, osdep/os_dep.c,
	osdep/osdep.c, protocol/url.c, protocol/auth/auth.c,
	protocol/http/auth.c, protocol/http/date.c, protocol/http/http.c,
	sched/connection.c, sched/download.c, sched/sched.c,
	scripting/lua/hooks.c, encoding/encoding.c, sched/session.c,
	ssl/connect.c, util/encoding.c, util/error.c, util/memdebug.h,
	util/snprintf.c, viewer/text/view.c, viewer/text/view.h:

	Many missing declarations + static. Big patch, sorry.  

Thu May  8 22:42:29 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/elinks.1.xml:

	First attempt at cleaning up the main elinks manpage. This means
	moving all the keys stuff (some of which are dublicate) to the
	elinkskeys man page.  

Thu May  8 22:34:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/manpages/.cvsignore:

	Fairy added 

Thu May  8 22:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.h:

	win->type is enum.  

Thu May  8 21:50:07 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, cookies/cookies.c, cookies/cookies.h,
	dialogs/menu.h, document/html/parser.c, document/html/parser.h,
	document/html/renderer.h, document/html/tables.c,
	globhist/dialogs.c, globhist/globhist.c, globhist/globhist.h,
	intl/charsets.c, intl/charsets.h, intl/gettext/gettextP.h,
	intl/gettext/libintl.h, intl/gettext/loadmsgcat.c,
	intl/gettext/localcharset.c, lowlevel/af_unix.c,
	lowlevel/af_unix.h, lowlevel/connect.c, lowlevel/home.h,
	lowlevel/interlink.c, lowlevel/interlink.h, lowlevel/select.c,
	lowlevel/select.h, lowlevel/sysname.h, lowlevel/timer.h,
	lowlevel/ttime.h, osdep/os_dep.c, osdep/osdep.c,
	sched/connection.c, sched/connection.h, sched/download.h,
	sched/sched.c, sched/sched.h, sched/session.h, ssl/ssl.h,
	terminal/kbd.h, terminal/terminal.c, terminal/terminal.h,
	util/ttime.h, encoding/encoding.c, protocol/http/blacklist.h,
	util/blacklist.h, util/encoding.c, util/error.h, util/string.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 21:46:00 2003  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, config/urlhist.h, osdep/os_dep.h,
	osdep/osdep.h, protocol/auth/auth.h, protocol/http/auth.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 21:42:57 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.h, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, config/conf.h, config/dialogs.c,
	config/kbdbind.c, config/kbdbind.h, config/options.c,
	config/options.h:

	Strict prototypes. void func() -> void func(void).  

Thu May  8 18:13:46 2003  Jonas Fonseca <fonseca@diku.dk>:

	* BUGS:

	'The black blocked cursor bug' added. Due to the many bugs that has
	been found they have been grouped to give a better overview. Hope
	the groupings are sane enough.  

Thu May  8 15:39:58 2003  Laurent Monin <zas@norz.org>:

	* TODO, src/config/options.c, src/viewer/text/view.c:

	Highlight colour for text matched after a search is now
	configurable. TODO was updatecd.  

Thu May  8 14:19:48 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup and optimization of count_menu_size().  

Thu May  8 14:02:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c, TODO:

	Search string in "Search string not found" error box is now
	included. TODO was updated.  

Thu May  8 12:44:12 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	About gg: & co.  

Thu May  8 12:42:34 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Please maintain proper blanklining.  

Thu May  8 12:41:15 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Something about modularization and scripting.  

Thu May  8 12:33:45 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Please maintain proper blanklining.  

Thu May  8 12:11:32 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/options.c:

	Check o1->num_links_key == o2->num_links_key in compare_opt so that 
	document.browse.links.number_keys_select_link doesn't exhibit 
	seemingly random I'll-work-when-I-want-to behaviour.  

Thu May  8 11:51:33 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/document/options.c:

	Itty-bitty fix that really has no effect:
	document.browse.links.numbering is a boolean, use get_opt_bool, not
	get_opt_int, to get its value.  

Thu May  8 11:46:43 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* src/viewer/text/view.c:

	Fix a logic inversion in jump_to_link_number that pasky made in his
	2003/05/06 14:52:12 commit when reverting one of zas' clean-ups.  

Thu May  8 11:39:23 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A new feature was added to BUGS file, now it triggers one ;).  

Thu May  8 11:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some bugs (infinite loop) in menu hotkeys handling were fixed. Code
	cleanup, mainmenu and menu use the same code now regarding hotkeys,
	2 new functions were introduced, one for handling hotkeys, the
	others to handle not_so_hot_keys ;).  

Thu May  8 11:07:29 2003  Miciah Dashiel Butler Masters <miciah@myrealbox.com>:

	* BUGS, TODO:

	More BUGS and TODO items. Small changes requested by pasky.  

Thu May  8 06:12:11 2003  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/preface.xml:

	s/elink/elinks/ thanks to witekfl 

Thu May  8 01:30:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Oops, forgot to pass length of the string to decode_session_info().  

Thu May  8 01:28:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Typo fix.  

Thu May  8 01:27:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Compilation fix, missing typecast.  

Thu May  8 01:24:34 2003  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Minor coding style example correction.  

Thu May  8 01:23:15 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Debugging code is now cleaner and is useable with hard_read() too.  

Thu May  8 01:20:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Reindented and removed some useless temporary variables (insert
	param parsing output directly to the struct initial_session_info).  

Thu May  8 01:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Tiny cleanup.  

Thu May  8 01:16:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/osdep.c, sched/session.c:

	Rewritten open_in_new_tab() functional part to emit EV_INIT instead
	of EV_RESIZE, removed code duplicate with process_session_info() and
	make use of struct initial_session_info.  

Thu May  8 01:07:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info() -> process_session_info() 

Thu May  8 01:06:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, terminal/terminal.c:

	Store struct initial_session_info directly in ev->b, decoding it
	ASAP. read_session_info() now takes directly struct
	initial_session_info.  

Thu May  8 00:57:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: session.c, session.h:

	Introduced struct initial_session_info (being freed by newly
	introduced free_session_info), which carries the initial session
	information, converted from the session init string by newly
	introduced decode_session_info() (moved some code from
	read_session_info()).  

Thu May  8 00:40:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info(): minor reinentation, removed one useless
	argument.  

Thu May  8 00:38:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	read_session_info() cleanup.  

Thu May  8 00:37:57 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	check_not_so_hot_keys() was introduced to check keys in menus, this
	one permits search of the next entry with first letter matching key.
	The behavior has changed: now selection wraps around the list of
	entries.  

Thu May  8 00:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	XMP tag support, patch by witekfl.  

Wed May  7 23:18:46 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys are now working in main menu. Fix a fix of a cleanup...  

Wed May  7 23:04:06 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Ooops, incomplete patch, fixed.  

Wed May  7 22:48:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.h:

	A bad patch was reverted, it fixes the bug known as the TODO bug.  

Wed May  7 20:57:20 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Some debugging code was added, dump hard_write data to stderr 

Wed May  7 18:26:23 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/mailcap.c:

	Miscelleanous optimizations and cleanups. Patch by zas.  

Wed May  7 18:19:50 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/mime.c:

	Default mime type will be moved to mime.default_type 

Wed May  7 18:07:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Compilation fix.  

Wed May  7 17:57:13 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.h:

	ASCII_BSD systems don't exist (yet).  

Wed May  7 17:46:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, globhist/globhist.c, sched/session.c,
	scripting/lua/core.c:

	Frame title may be NULL after witekfl's fix of <title> element
	handling.  

Wed May  7 17:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Use -rdynamic when available. It makes backtrace work right and it
	will be a must when dynamic .so modules will be introduced (not that
	it would be anytime soon). Looks like zero or only very minimal
	overhead.  

Wed May  7 16:43:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	SIGSEGV handler is critical. Thus don't postpone it to the select
	loop but handle it immediatelly. Fixes infinite loop upon segfault,
	reported by Jonas.  

Wed May  7 16:29:40 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	A new function was added (disabled for now). ulongcat() which may
	replace some sprintf("%d", x) calls later.  

Wed May  7 15:16:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Reduced the number of printed stack frames from 30 to 20.  

Wed May  7 15:11:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, util/error.c, util/error.h:

	Reverted bogus backtrace patch.  

Wed May  7 14:45:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.h:

	Reintroduced bitfields ;-).  

Wed May  7 14:36:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.h:

	Explicit signedness to fix some portability issues
	
	(http://mailman.webdav.org/pipermail/neon/2001-December/000757.html). Thanks, zas.

Wed May  7 14:31:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.h:

	Reorganized the listbox structures to make sense again.  

Wed May  7 14:17:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.h:

	led.value isn't private data ;p 

Wed May  7 13:56:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Prevent shifting of the code too far at the right ;-).  

Wed May  7 13:45:24 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	ELinks is now either Normal or Debug regarding info box.  

Wed May  7 13:38:44 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.h:

	Minor cleanup.  

Wed May  7 13:03:29 2003  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Some comments about structs.  

Wed May  7 12:59:24 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.h:

	Reordering and comment about struct fields order.  

Wed May  7 12:55:40 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/common.h:

	Order matters in struct bookmarks_backend.  

Wed May  7 12:54:03 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.h:

	Minor reordering in fields of struct bookmark.  

Wed May  7 12:49:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/widget.h:

	Fields reordering and comment about bounded to order struct
	widget_ops.  

Wed May  7 12:41:43 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: menu.c, menu.h:

	Change in struct mneu_item fields order was reverted, a comment was
	added about it. Cleanup, optimization and more debugging code in
	menu.c.  

Wed May  7 11:55:07 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, util/error.c, util/error.h:

	Backtrace feature was simplified and now it works. SEGV signal must
	be handled by system at some time to perform core dump. Backtrace
	size is now 100 (we use many parameters in some functions).  

Wed May  7 10:49:31 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.h:

	Minor reorganization of struct menu_item fields.  

Wed May  7 10:47:26 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.h:

	Structs fields were reorganized. Bitfields were replaced by int
	type.  

Wed May  7 10:40:11 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/leds.h:

	Struct leds fields were reorganized.  

Wed May  7 10:39:04 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.h:

	Structs fields were reorganized.  

Wed May  7 10:35:14 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.h:

	Struct session fields were reorganized.  

Wed May  7 10:28:27 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Structs fields cleanup and minor changes.  

Wed May  7 10:13:36 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.h:

	Structs fields cleanup.  

Wed May  7 10:07:23 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.h:

	Structs fields were reorganized.  

Wed May  7 09:57:56 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/terminal.h:

	Struct terminal fields were reorganized.  

Wed May  7 09:49:01 2003  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, cache/cache.h, document/cache.c,
	document/cache.h:

	Structs were a bit reorganized. Made use of mem_calloc() instead of
	mem_alloc().  

Wed May  7 09:22:55 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/connection.c, sched/connection.h, sched/sched.c,
	sched/sched.h, sched/session.c, viewer/text/view.c:

	Some structs were reorganized to prevent memory padding. There was a
	badly initialized struct status, one field was missing, fixed now.  

Wed May  7 08:42:03 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h:

	Minor cleanup and optimization. Please take care of memory
	alignement of fields in structs.  

Tue May  6 23:10:45 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Ad frame bugs, s/plain-text/non-HTML/ as it happens for images etc
	as well. I'm sorry, Witek ;-).  

Tue May  6 23:09:51 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Removed some bugs fixed (and todo items implemented) by witekfl.  

Tue May  6 23:08:24 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Keep the text wrapped at 80th column.  

Tue May  6 23:07:37 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	More accurate description of the ^Z bug.  

Tue May  6 22:39:28 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Another entry was blasted by Witold.  

Tue May  6 22:36:24 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	The newline displayed before a list is superfluous when that list is
	nested under another list. Minor optimizations. Patch by Witold
	Filipczyk and me.  

Tue May  6 22:36:03 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Expand single ~ correctly in the URL. Patch by witekfl.  

Tue May  6 22:34:43 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	System functions (like getenv()) are enabled in global config.lua,
	so execute it first and _then_ set home_dir. Patch by witekfl.  

Tue May  6 22:00:16 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	check_queue() function was optimized, options are now cached.
	try_connection() wins two parameters.  

Tue May  6 21:48:47 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: connection.c, sched.c:

	Minor optimizations and cleanup: in calloc() we trust (II).  

Tue May  6 21:45:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reformatted goto_link() and fixed it so that it returns correct
	value now.  

Tue May  6 20:28:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	In calloc we trust.  

Tue May  6 20:28:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Reverted whitespace 'fix'.  

Tue May  6 20:25:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/draw.c:

	Reverted end removal. First optimizing for speed, now
	disoptimizing... I don't understand zas ;-).  

Tue May  6 20:16:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Partially reverted zas' 'cleanups'.  

Tue May  6 19:54:25 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/default.c:

	Last part of mime system. Should be buildable now.  

Tue May  6 18:53:56 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/backend/: .cvsignore, .vimrc:

	How could I forget. More fairies.  

Tue May  6 18:39:14 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Code redundancy was reduced.  

Tue May  6 18:25:29 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.h, osdep/osdep.h, terminal/kbd.c:

	octal 033 was renamed ASCII_ESC.  

Tue May  6 17:24:40 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: mime.c, mime.h, backend/common.c, backend/common.h,
	backend/default.h, backend/mailcap.c, backend/mailcap.h:

	First part of the restructuring of mime handling. It has been
	modelled after the bookmark handling. This is not yet integrated
	with the build system.  

Tue May  6 17:16:14 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, src/mime/Makefile.am, src/mime/backend/Makefile.am:

	Adding mime/ to build system.  

Tue May  6 16:47:44 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, osdep/os_dep.h, osdep/osdep.h,
	protocol/ftpparse.c, protocol/ftp/ftpparse.c, protocol/http/http.c,
	terminal/kbd.c, terminal/screen.c, util/string.h:

	Hard-coded ascii char (8,9,10,13,127) were renamed to macros
	ASCII_BS, ASCII_TAB ,ASCII_LF,ASCII_CR,ASCII_DEL.  

Tue May  6 16:44:09 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/mime/: .cvsignore, .vimrc:

	Stuff from fairyland 

Tue May  6 15:32:31 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/window.c:

	Reversion of zas's patches is not that easy :) Compilation bug
	fixed.  

Tue May  6 15:30:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Reverted part of previous cleanup, removed obsolete FIXME and some
	more pasky-style cleanups ;-).  

Tue May  6 15:20:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/window.c:

	Reverted cleanups.  

Tue May  6 14:58:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/inphist.c:

	Reverted part of the previous cleanup.  

Tue May  6 14:55:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted cleanup.  

Tue May  6 14:52:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, viewer/text/view.c:

	Reverted cleanup.  

Tue May  6 14:49:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/hardio.c:

	Reverted the cleanup, the original form is slightly faster and IMHO
	equally clean.  

Tue May  6 14:24:15 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Minor cleanup.  

Tue May  6 14:18:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Inline + minor optim.  

Tue May  6 14:11:05 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/: group.c, group.h:

	Cleanup, minor optim., staticification.  

Tue May  6 13:34:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Minor cleanup + optim.  

Tue May  6 12:10:02 2003  Laurent Monin <zas@norz.org>:

	* doc/hacking.txt:

	More info about --enable-debug.  

Tue May  6 11:33:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inpfield.c:

	Minor optimizations.  

Tue May  6 11:16:41 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Window title is now handled properly regarding tabs. Bad title when
	swapping tabs during document loading and window title flickering
	are now fixed.  

Tue May  6 10:10:11 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Tue May  6 10:03:55 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Minor cleanup.  

Tue May  6 09:56:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Optimization of goto_link() by Miciah and me.  

Tue May  6 09:00:44 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One fresh bug was added.  

Tue May  6 08:38:09 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Minor update.  

Tue May  6 08:35:02 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Last entry was modified.  

Tue May  6 08:27:27 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry was added. Thanks to Zas ;).  

Tue May  6 08:04:35 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry have disappear. Thanks to Witold.  

Tue May  6 08:02:57 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Printing of title of plain text document containing text enclosed in
	<TITLE></TITLE> tags was fixed. Patch by Witold Filipczyk.  

Mon May  5 23:32:25 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	One entry was removed. Thanks to Jonas.  

Mon May  5 23:27:13 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Tabs and backgrounded loading bug was fixed. Patch by Jonas Fonseca.  

Mon May  5 23:13:47 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Major cleanup.  

Mon May  5 22:36:57 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Minor cleanup.  

Mon May  5 22:18:50 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, viewer/text/view.c:

	Some silly things were trashed. Idea by Miciah and Pasky. Well, now,
	i must find a hole in the ground and stay hiddenin it until the end
	of the time...  

Mon May  5 21:55:37 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/: terminal.h, window.c:

	Cleanup and optimizations.  

Mon May  5 16:04:56 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	An entry about tabs/document loading issue was added.  

Mon May  5 16:00:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	A test for num_tabs was added. Safer.  

Mon May  5 15:40:03 2003  Laurent Monin <zas@norz.org>:

	* src/: terminal/tab.c, terminal/tab.h, viewer/text/view.c:

	Number of tabs can now be passed to switch_tab(), it prevents some
	useless calculations.  

Mon May  5 14:40:29 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Minor cleanup + optim.  

Mon May  5 14:19:08 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/hardio.c:

	Minor cleanup.  

Mon May  5 14:08:02 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.h:

	Minor cleanup (2) ;) 

Mon May  5 14:06:47 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.h:

	Minor cleanup.  

Mon May  5 13:43:15 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	A function init_bars_status() was introduced. It updates information
	about bars visibility. Not yet perfect but a step...  

Mon May  5 10:33:44 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/terminal.c:

	Optimizations and cleanups: strcpy() -> memcpy(), whitespaces fixes,
	some comments were added.  

Mon May  5 09:37:51 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some "end" useless variables were removed.  

Mon May  5 09:27:21 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some useless mathematical calculations were removed.
	Temporary variables names are badly choosen. Feel free to find
	better ones.  

Mon May  5 09:17:26 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/draw.c:

	Optimization: some useless mathematical calculations were removed.  

Sun May  4 21:53:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Use fprintf instead of printf in execinfo non-trouble
	dump_backtrace().  

Sun May  4 21:52:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Reformatted the pre-backtrace rant.  

Sun May  4 21:45:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, util/error.c, util/error.h:

	Couple of compilation fixes and gcchappying, thanks to zas.  

Sun May  4 21:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fixed indentation in ./configure --help. Sorry.  

Sun May  4 21:38:16 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Formatting fixes. *sigh* those ELinks developers...  

Sun May  4 21:37:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	--enable-libc -> --enable-own-libc 

Sun May  4 21:36:55 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/main.c, src/util/error.c,
	src/util/error.h:

	(Untested) support for dumping of backtrace upon segfault. Only
	glibc supported for now (I don't know of any other possibilities,
	however if you know about one, it should be pretty trivial to write
	a patch).  

Sun May  4 21:23:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	One ses->term -> ses->tab->term got missed for some reason. Fixed.  

Sun May  4 21:11:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed variable names conflict, reported by zas.  

Sun May  4 20:54:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Nasty tricky download.c, tsk tsk\! ->term -> ->tab->term, thanks to
	zas.  

Sun May  4 20:50:59 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	Attempt to make mouse and bars gentle with us.  

Sun May  4 20:44:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/osdep.c, sched/session.c:

	Renamed some variable names from win to tab. Added comment about
	brokenness of tabwin_func().  

Sun May  4 20:42:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, dialogs/document.c, dialogs/menu.c,
	protocol/auth/dialogs.c, document/html/renderer.c, protocol/url.c,
	protocol/user.c, scripting/lua/core.c, sched/download.c,
	sched/session.c, sched/session.h, viewer/text/view.c:

	Removed redundant term field from the struct session.  

Sun May  4 20:39:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/session.c, sched/session.h, viewer/text/view.c:

	Renamed win to tab in struct session.  

Sun May  4 20:37:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.c, terminal.c:

	Blasted off the term 'root window', use 'tab' instead.  

Sun May  4 20:35:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: terminal/tab.c, terminal/tab.h, terminal/terminal.c,
	viewer/text/view.c:

	get_root_window() -> get_current_tab() 

Sun May  4 20:33:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: tab.c, terminal.c, window.h:

	WT_ROOT -> WT_TAB 

Sun May  4 20:29:52 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/tab.c:

	Use redraw_terminal() instead of redraw_terminal_cls(), it reduces
	flickering when swapping tabs. Reported and fixed by Pasky.  

Sun May  4 20:13:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.c:

	Readded util/conv.h, thanks, zas.  

Sun May  4 20:10:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/tab.c:

	Oops, include own .h\! Thanks, zas.  

Sun May  4 20:08:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Fix missing is_blocked(), reported by zas.  

Sun May  4 20:06:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/osdep.c, sched/session.c,
	terminal/Makefile.am, terminal/tab.c, terminal/tab.h,
	terminal/terminal.c, terminal/terminal.h, terminal/window.c,
	viewer/text/view.c:

	Moved tab-related functions from terminal.* to tab.*.  

Sun May  4 19:54:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, bfu/inpfield.c, bfu/inphist.c,
	bfu/inphist.h, bfu/menu.c, dialogs/refresh.h, sched/download.h,
	sched/session.c, sched/session.h, terminal/Makefile.am,
	terminal/terminal.c, terminal/terminal.h, terminal/window.c,
	terminal/window.h, viewer/text/view.c:

	Moved window-related functions (except tabs) from terminal.* to
	window.*.  

Sun May  4 19:40:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Removed duplicate typedef.  

Sun May  4 19:39:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: draw.h, terminal.h:

	Moved ATTR_FRAME from terminal.h to draw.h.  

Sun May  4 19:38:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/screen.c:

	Minor reindentation.  

Sun May  4 19:38:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: screen.c, screen.h, terminal.c:

	Moved erase_screen() from terminal.c to screen.*.  

Sun May  4 19:36:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: draw.c, draw.h, terminal.c:

	Moved clear_terminal() from terminal.c to draw.*.  

Sun May  4 19:30:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/leds.c, bfu/listbox.c, bfu/menu.c, bfu/text.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, document/html/tables.c, sched/download.c,
	sched/session.c, terminal/Makefile.am, terminal/draw.c,
	terminal/draw.h, terminal/terminal.c, terminal/terminal.h,
	viewer/text/view.c:

	Moved (virtual) screen drawing functions from terminal.* to draw.*.  

Sun May  4 19:19:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: screen.c, terminal.c:

	Moved the terminfo TODO from terminal.c to screen.c 

Sun May  4 19:11:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, terminal/Makefile.am, terminal/screen.c,
	terminal/screen.h, terminal/terminal.c, terminal/terminal.h:

	Moved some screen output routines from terminal.* to screen.*.  

Sun May  4 19:09:33 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sequence length cache thing is now fixed.  

Sun May  4 18:57:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/Makefile.am:

	Distribute my rants.  

Sun May  4 18:57:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/TODO:

	Some general blah blah.  

Sun May  4 18:49:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/terminal.h:

	Trashed piece of some old junk.  

Sun May  4 18:11:45 2003  Laurent Monin <zas@norz.org>:

	* src/terminal/kbd.c:

	Sequence codes length is now cached. Please review.  

Sun May  4 18:09:37 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	Compilation fix: missing header.  

Sun May  4 17:51:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: Makefile.am, hardio.c, hardio.h, kbd.c,
	terminal.c, terminal.h:

	Moved hard_(read|write) from terminal.* to hardio.*.  

Sun May  4 17:50:54 2003  Laurent Monin <zas@norz.org>:

	* po/.cvsignore, src/.cvsignore, src/intl/gettext/.cvsignore:

	More files are now ignored by cvs.  

Sun May  4 17:45:58 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	An hotkey conflict in contextual menu was fixed.  

Sun May  4 17:36:49 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	The fix for a potential bug in menu scrolling code was reversed.
	Ancient code was ok, this patch causes the mouse click to have a
	strange behavior in menus.  

Sun May  4 17:26:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: kbd.h, terminal.h:

	Updated anti-reinclude defines.  

Sun May  4 17:23:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/Makefile.am, lowlevel/kbd.c, lowlevel/kbd.h,
	lowlevel/terminal.c, lowlevel/terminal.h, terminal/Makefile.am,
	terminal/kbd.c, terminal/kbd.h, terminal/terminal.c,
	terminal/terminal.h, main.c, main.h, bfu/align.h, bfu/button.c,
	bfu/button.h, bfu/checkbox.c, bfu/checkbox.h, bfu/dialog.c,
	bfu/dialog.h, bfu/group.c, bfu/group.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/inphist.h, bfu/leds.c,
	bfu/leds.h, bfu/listbox.c, bfu/listbox.h, bfu/menu.c, bfu/menu.h,
	bfu/msgbox.c, bfu/msgbox.h, bfu/text.c, bfu/text.h, bfu/widget.c,
	bfu/widget.h, bookmarks/dialogs.c, bookmarks/dialogs.h,
	config/conf.c, config/conf.h, config/dialogs.c, config/dialogs.h,
	config/kbdbind.c, config/kbdbind.h, cookies/cookies.c,
	cookies/cookies.h, dialogs/auth.c, dialogs/document.c,
	protocol/auth/dialogs.c, bfu/hierbox.c, bfu/hierbox.h,
	dialogs/edit.c, dialogs/edit.h, dialogs/hierbox.c,
	dialogs/hierbox.h, dialogs/info.c, dialogs/info.h, dialogs/menu.c,
	dialogs/menu.h, dialogs/mime.c, dialogs/mime.h, dialogs/options.c,
	dialogs/options.h, dialogs/refresh.c, dialogs/refresh.h,
	document/html/parser.c, document/html/renderer.h,
	globhist/dialogs.c, globhist/dialogs.h, mime/dialogs.c,
	mime/dialogs.h, intl/gettext/libintl.h, lowlevel/af_unix.c,
	lowlevel/interlink.c, lowlevel/select.c, lowlevel/timer.c,
	osdep/os_dep.c, osdep/osdep.c, scripting/lua/core.c,
	protocol/mime.c, protocol/mime.h, protocol/user.c, protocol/user.h,
	protocol/http/http.c, sched/download.c, sched/download.h,
	sched/session.c, sched/session.h, terminal/kbd.c,
	terminal/terminal.c, viewer/dump/dump.c, viewer/text/view.c,
	viewer/text/view.h:

	Moved lowlevel/(kbd|terminal).* to terminal/.  

Sun May  4 17:21:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/terminal/Makefile.am:

	Added src/terminal/ to the build system.  

Sun May  4 17:21:09 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A potential bug in menu scrolling cpde was fixed. Reported by Sergey
	Karpov.  

Sun May  4 17:13:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/terminal/: .cvsignore, .vimrc:

	Fairies.  

Sun May  4 17:11:34 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: terminal.c, terminal.h:

	Changed get_root_window() to a #define in terminal.h.  

Sun May  4 17:11:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Paranoia test whether get_root_window() returned something.  

Sun May  4 16:58:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/af_unix.c, lowlevel/interlink.c,
	sched/session.c, sched/session.h:

	win_func() -> tabwin_func() 

Sun May  4 16:52:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	osdep/osdep.c, sched/session.c:

	Introduced init_tab(), moved root window callocation and basic
	initialization from init_term() and open_in_new_tab() to there.  

Sun May  4 16:27:26 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Terminal title update is now done properly. An useless variable was
	removed. Reported by Petr Baudis aka pasky.  

Sun May  4 16:25:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Use mem_calloc() when allocating window. Proper allocation error
	handling.  

Sun May  4 14:50:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	osdep/osdep.c:

	Enumerated win->type. Reformatted get_tab_number() and
	get_tab_by_number(), minor optimization of get_tab_number().  

Sun May  4 14:47:44 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	An hotkey conflict was solved in french translation.  

Sun May  4 14:42:37 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys conflict causes all concerned hotkeys to be highlighted in
	menu.  

Sun May  4 14:18:28 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkey debugging feature is now case-insensitive ;) 

Sun May  4 14:08:08 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Hotkeys debugging feature: when --enable-debug is used, hotkeys used
	more than once in a menu are highlighted.  

Sun May  4 11:03:55 2003  Laurent Monin <zas@norz.org>:

	* po/gen_translations_stats.sh:

	An helper script was added. It generates translation statistics
	(percentage). Improvements are welcomed.  

Sun May  4 10:06:28 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Sun May  4 01:45:23 2003  Laurent Monin <zas@norz.org>:

	* src/sched/: session.c, session.h:

	A potential segfault and a memleak were fixed. Minor optimizations.  

Sun May  4 01:21:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Code reorganization, minor optimizations, and calls to
	set_terminal_title() are only done when needed.  

Sun May  4 00:17:25 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Tab bar didn't appear when opening a new tab on an empty window, it
	should be fixed. Please test. Reported by Pasky on #elinks, fix by
	Zas.  

Sat May  3 23:43:07 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Update status info. Very minor updates.  

Sat May  3 23:26:43 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c, sched/session.h:

	Calculation of usable screen for renderer with one or more visible
	bars is now fixed (i hope). Please test ;) 

Sat May  3 23:11:30 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	A tab number is now printed in status bar, if there are some tabs
	but show_tabs_bar is set to 0. It appears as [1] for tab 1, [2] ...  

Sat May  3 22:46:28 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c, BUGS:

	Menu accelerators are now case-insensitive.  

Sat May  3 22:42:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	del_from_list(term) before mem_free()ing it upon allocation failure.
	Reported by Miciah.  

Sat May  3 22:34:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Minor fix. Screen height calculation was wrong, and it still need to
	be tested, with one, two or three bars...  

Sat May  3 22:28:04 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed proxy-info-from-environment goal, already done.  

Sat May  3 22:25:41 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Reorganized TODO file, created several categories where the stuff is
	grouped now.  

Sat May  3 21:59:27 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	Changed format of the TODO/BUGS items. Hopefully more readable now.  

Sat May  3 21:55:07 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Removed some obsolete items.  

Sat May  3 21:54:20 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Moved around certain items.  

Sat May  3 21:44:00 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/xbel.c, config/options.c,
	config/opttypes.c, dialogs/mime.c, mime/dialogs.c, sched/session.c:

	Removed superfluous includes, patch by Jonas.  

Sat May  3 21:43:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Reorganized the strchr/index ifdefs a little, patch by Jonas.  

Sat May  3 21:42:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Removed superfluous save possibility from some type query
	msg_box()es, patch by Jonas.  

Sat May  3 21:00:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	The cc is too detailist.  

Sat May  3 20:56:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Revert m_bar from 1 to 0, should fix some unused empty spots at the
	right side of some menus. Reported by zas.  

Sat May  3 20:42:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: terminal.c, terminal.h:

	Unexport and statify add_window_at_pos(), noone uses it anyway.  

Sat May  3 20:41:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Allocate windows w/ mem_calloc(). Very minor reorganization in
	init_term().  

Sat May  3 20:38:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Oops.  

Sat May  3 20:26:58 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Whitespace consistency.  

Sat May  3 19:49:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/kbd.c:

	Use mem_calloc() when allocating itrm.  

Sat May  3 19:44:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Reindentation.  

Sat May  3 19:40:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Poor code lament inserted. url is now NULL by default. Whitespace
	consistency is also important.  

Sat May  3 19:35:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Reindentation. Don't show any windows etc if session allocation
	failed.  

Sat May  3 19:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Actually translate the "Untitled" tab title.  

Sat May  3 19:29:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed one possible off-by-one visual overflow when showing tabs.  

Sat May  3 19:27:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Removed the xget_bfu_color() hack.  

Sat May  3 19:26:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/renderer.c,
	lowlevel/terminal.c, sched/session.c:

	ui.tabs_bar -> ui.tabs, ui.tabs_bar.show -> ui.tabs.show_bar,
	ui.tabs_bar.cycle -> ui.tabs.wraparound, moved tabs bar color
	settings to proper place, moved ui.tabs to proper place.  

Sat May  3 19:09:31 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Removed a bogus redundant add() call and restored the proper
	alphabetical order.  

Sat May  3 19:05:57 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Compute certain stuff just once.  

Sat May  3 18:14:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Oops, negated a condition.  

Sat May  3 17:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Blah.  

Sat May  3 17:13:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Hopefully fixed the stroked unselectable items bug.  

Sat May  3 17:11:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: osdep/os_dep.c, osdep/os_dep.h, osdep/osdep.c,
	osdep/osdep.h, viewer/text/view.c, viewer/text/view.h:

	Moved can_open_in_new() from viewer/text/view.* to osdep/os_dep.*.  

Sat May  3 17:07:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Open in new tab is available in all &ENV_CONSOLE environments now.  

Sat May  3 17:05:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	This changes the get_open_in_new() environment matching to a more
	natural behaviour. Now, we make sure that at least one of the
	environment bits is in the oinw[i].env of our choice rather than all
	the oinw[i].env bits are set in the environment bitmask (that made
	it ie. impossible to introduce multi-env oinw items).  

Sat May  3 17:02:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Reindenation.  

Sat May  3 17:01:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/kbd.c, osdep/os_dep.c, osdep/osdep.c:

	Some ad hoc environment bitmask setting moved from handle_itrm() to
	get_common_env(), value returned from whose is used and contemplated
	in get_system_env(). xwin -> env in handle_itrm() and use just the
	value got by get_system_env(). ENV_CONSOLE is now always set (for
	now and all the foreseeable future).  

Sat May  3 17:00:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.h:

	Describe the enum term_env_type.  

Sat May  3 16:33:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.h, osdep/os_dep.c, osdep/osdep.c:

	Introduced ENV_CONSOLE, which means the default text environment.
	Now term->environment == 0 is illegal. This enables bitmasking for
	ENV_CONSOLE, which will be very soon useful ;-).  

Sat May  3 15:24:38 2003  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/viewer/text/view.c:

	Don't show 'Add link to bookmarks' in the Link menu in anonymous
	mode. Reported by Miciah (?).  

Sat May  3 15:21:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Don't be too enthusiastic when using own 'libc', it makes no sense
	to just use index() instead of strchr(). Also don't use bcopy() for
	memmove(), but the real implementation. Motion impulse by Jonas.  

Sat May  3 12:12:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Fixed gcc3's warning and indentation. Patch by witekfl.  

Sat May  3 10:54:03 2003  Laurent Monin <zas@norz.org>:

	* BUGS, TODO:

	TODO and BUGS big updates by Miciah.  

Sat May  3 03:01:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Change default of document.colors.use_document_colors to 2, that is
	use even document-specific background. Let's hope this will get more
	attention (and bugfixes) to this feature.  

Sat May  3 02:58:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	But... but... zas should at least commit smaller bits and say what
	is he actually changing in particular. ;-) Refixed hotkeys displaing
	in open window menu.  

Sat May  3 02:49:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Removed that weird free_list() NULLifying. When you think about it,
	it maks no sense at all anyway. And it didn't work ;-).  

Sat May  3 02:43:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, viewer/text/view.c:

	submenu_indicator -> m_submenu 

Sat May  3 02:42:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Inlined few functions. Cleaned up term_send_event().  

Sat May  3 02:38:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Added space.  

Sat May  3 02:37:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Blah, compilation fix.  

Sat May  3 02:36:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Oops, compilation fix.  

Sat May  3 02:36:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Whitespaces added.  

Sat May  3 02:33:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Use term_send_event() instead of own crafted code.  

Sat May  3 02:31:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed unsigned vs signed issue.  

Sat May  3 02:29:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Bunch of compilation fixes.  

Sat May  3 02:27:05 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Tidyup.  

Sat May  3 02:25:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Cast properly.  

Sat May  3 02:18:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	[POLL] Shouldn't zas take more care about what he actually commits
	alongside the changes he intends to commit? ;-) 

Sat May  3 02:12:35 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Added email addy to our phantom.  

Sat May  3 01:55:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Spurious whitespace elliminated.  

Sat May  3 01:53:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/session.c:

	Heavy reindation and a little bit of tidyup.  

Sat May  3 01:48:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Whitespace fix.  

Sat May  3 01:38:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	*sigh* ... put back my fix for free_list(). Either do it correctly
	or don't do it at all, hm? 

Sat May  3 01:30:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Reverted (the most of) bogus 'cleanups'.  

Sat May  3 01:16:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Reindentation & stuff.  

Sat May  3 01:11:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Whitespace fixes.  

Sat May  3 01:07:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	mime/dialogs.c, viewer/text/view.c:

	M_BAR was re-added, reverted menu item's rtext usage changes. I'm
	almost sure I broke something ;-).  

Sat May  3 00:41:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.h, dialogs/menu.c, document/html/parser.c,
	viewer/text/view.c:

	SUBMENU_INDICATOR -> M_SUBMENU 

Sat May  3 00:12:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed missing bracked. This will be a long night.  

Sat May  3 00:09:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Compressed cache declaration.  

Sat May  3 00:07:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Oops, compilation fix. Reported by zas.  

Sat May  3 00:04:22 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/kbdbind.c, config/kbdbind.h,
	lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	osdep/osdep.c, sched/session.c, viewer/text/view.c:

	Whitespaces cleanup by Jonas.  

Fri May  2 23:59:14 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, sched/session.c:

	True full screen, bars are handled cirrectly in screen size respect,
	but reloading of document may be necessary. Try to play with options
	that enable/disable main menu, status bar, tabs bar.  

Fri May  2 23:48:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.h:

	Reverted the keybindings-use FIXME removal. Apparently it still
	applies.  

Fri May  2 23:34:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Something terrible must've happenned. Reindented to correct style.  

Fri May  2 23:19:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Slightly moved now-harmless misplaced condition.  

Fri May  2 23:17:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed corner cases bugs in witekfl's marked items deletion patch.
	Now we traverse to the next item correctly, not blindly cycling in
	the frame of one level (which can be deadly).  

Fri May  2 22:39:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/dialogs.c, globhist/dialogs.c:

	ofs -> offset change reverted, the purpose of the original change is
	unknown, undocumented and so on.. you've no chance, infiltrator
	witekfl \! ;-)) 

Fri May  2 22:25:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed whitespace inconsistency.  

Fri May  2 22:20:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	abrt -> stop. sts -> status.  

Fri May  2 22:20:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Keep the namespace clean. _reload -> do_reload.  

Fri May  2 22:16:18 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, scripting/lua/core.c, sched/session.h,
	viewer/text/view.c, viewer/text/view.h:

	Stupid patch i made was reversed. Sorry for the inconvenience ;) 

Fri May  2 21:59:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	If display_dir_entry() failed, return the error value it threw on
	us, not behave like there was no error at all.  

Fri May  2 21:58:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Reverted not exactly style-clean change.  

Fri May  2 21:43:44 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Original authors of the tab browsing patch were added. But who is
	John ? 

Fri May  2 21:25:43 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/align.h, config/options.c, document/html/renderer.c,
	lowlevel/terminal.c, sched/session.c:

	Color configuration was added for the tabs bar. An attempt to group
	tabs bar options under the same tree was done, please give your
	opinion. Little hack of get_bfu_color(). Minor fixes.  

Fri May  2 20:24:32 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	The cycle tab segfault is now fixed. Thanks to Jonas Fonseca.  

Fri May  2 16:33:00 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced. French translation was updated.  

Fri May  2 16:08:03 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, lowlevel/terminal.c:

	Cycle tabs is now possible through ui.cycle_tabs_bar option.  

Fri May  2 15:41:15 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/renderer.c,
	sched/session.c:

	show_tabs_bar option was added. It defaults to 1 which is show tabs
	bar only if there are 2 or more visible tabs. Feel free to improve
	;) 

Fri May  2 14:55:05 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	sched/session.c, sched/session.h, scripting/lua/core.c,
	viewer/text/view.c, viewer/text/view.h:

	Some stupid changes were reverted (frm->form and lnk->link thing).
	Sorry ;). And struct link -> struct a_link rename happenned, just to
	be surely reverted promptly by zas :^). --pasky 

Fri May  2 14:37:46 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Fix a bug in free_list(), temporary fix ;) 

Fri May  2 14:13:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Use more fantasy in naming of parameters ;-).  

Fri May  2 14:09:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Attempt to clarify that o.plain setting enigmatic code even more.
	How many more rewrites will it need? ;-) 

Fri May  2 13:53:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed free_list() ->next NULLifying.  

Fri May  2 13:50:06 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Whitespace fix.  

Fri May  2 13:44:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h, lists.h:

	Show affected expression when list_magic_error() occurs.  

Fri May  2 13:31:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	hashmagic -> HASH_MAGIC 

Fri May  2 13:26:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Removed some redundant bits.  

Fri May  2 13:00:14 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Minor reformatting.  

Fri May  2 12:10:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: error.c, error.h, lists.h:

	listmagicerror -> list_magic_error, minor cleanup and invalid
	pointers resistance. Keep the namespace clean: _listmagicerror ->
	list_magic_error_.  

Fri May  2 11:15:09 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, config/kbdbind.c, config/kbdbind.h,
	document/html/renderer.c, lowlevel/terminal.c, lowlevel/terminal.h,
	osdep/os_dep.c, osdep/osdep.c, sched/session.c, sched/session.h,
	viewer/text/view.c:

	Tabbed browsing support :). Patch by Sergey Karpov and me.  

Fri May  2 08:26:35 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a bug was removed, elinks_str[n]casecmp() functions
	were buggy.  

Fri May  2 08:25:30 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, sched/session.c, util/string.c,
	util/string.h, viewer/dump/dump.c, viewer/text/view.c:

	Minor compilation issues were fixed (with --enable-libc).
	elinks_strcasecmp() and elinks_strncasecmp() were fixed.  

Thu May  1 23:45:08 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A comment about --enable-libc and rendering issue was added...
	Should be fixed soon.  

Thu May  1 23:39:45 2003  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in:

	Configure option --enable-libc was added. It forces the use of
	internal functions instead of system ones if they exist.  

Thu May  1 23:21:29 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	USE_LIBC was added. Many changes to permit debugging of replacement
	functions on a system that have some of these. It reveals a bug...  

Thu May  1 17:09:13 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanups.  

Thu May  1 11:08:03 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some useless refresh_hotkeys() calls were removed.  

Thu May  1 10:46:43 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about the wrong tilde expansion in goto dialog was added. A
	patch ? Nobody ? ;) 

Thu May  1 10:43:14 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, util/file.c:

	Fix of get_unique_name()/expand_tilde() was fixed. Patch by Jonas
	Fonseca.  

Thu May  1 00:22:02 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Ooops, this initialization prevents a compilation warning.  

Thu May  1 00:16:46 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Very minor cleanup.  

Thu May  1 00:04:20 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Cleanup.  

Wed Apr 30 23:55:58 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	A mailcap issue was fixed. Patch by fonseca and me.  

Wed Apr 30 22:17:55 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	An errno check was added around an strtoul() call.  

Wed Apr 30 21:56:52 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, dialogs/menu.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	The url to links manual was replaced by a link to documentation page
	on ELinks website. Minor ELinksification in setup.h.  

Wed Apr 30 21:30:53 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup and optimizations.  

Wed Apr 30 21:06:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, dialogs/menu.c:

	Some compilation and hotkeys issues with --disable-nls were fixed.  

Wed Apr 30 18:28:45 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a known bug was added. It will be fixed soon.  

Wed Apr 30 17:34:55 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	An issue with mouse selection of menu items was fixed (finally).  

Wed Apr 30 17:28:51 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	An issue with mouse selection of menu items was fixed.  

Wed Apr 30 17:16:36 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 17:13:18 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 17:06:25 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 16:59:37 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.c, bfu/menu.h, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/html/parser.c, mime/dialogs.c,
	viewer/text/view.c:

	Cleanup and optimizations, M_BAR was removed, NULL is used instead
	of "" when no right text should be printed, see menu.h.  

Wed Apr 30 12:24:41 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/menu.h, dialogs/menu.c, document/html/parser.c,
	viewer/text/view.c:

	Hardcoded ">" string was replaced by a macro named
	SUBMENU_INDICATOR.  

Wed Apr 30 10:26:14 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c, po/be.po, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, src/bfu/menu.c, po/gl.po, po/hr.po, po/hu.po, po/id.po,
	po/is.po, po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po,
	po/pt.po, po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po:

	Hotkeys colors are now fully configurable.  

Wed Apr 30 08:49:59 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Debugging output was removed :) 

Wed Apr 30 08:46:56 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Cleanup, optimizations, and correct handling of language changes.  

Tue Apr 29 17:34:59 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	A issue about hotkeys not printed in help menu was fixed.  

Tue Apr 29 17:24:32 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	A debugging ouput was removed ;).  

Tue Apr 29 17:22:41 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Hotkeys are useless for that menu. Fixed.  

Tue Apr 29 17:17:40 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A superfluous continue force some branches to be visited twice.
	Fixed by Witold Filipczyk.  

Tue Apr 29 17:11:07 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/menu.c, bfu/menu.h, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/html/parser.c,
	mime/dialogs.c, sched/session.c, viewer/text/view.c:

	Hotkeys handling was completly reworked. Performance was enhanced,
	issue with goto history completion was fixed, hotkeys now appear
	even when menu item is selected. Many changes were made, so please
	test a lot.  

Tue Apr 29 13:22:22 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A line was removed. Kooool.  

Tue Apr 29 13:18:21 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, globhist/dialogs.c, globhist/globhist.c:

	Marked items deletion was finally fixed. Thanks to Witold Filipczyk
	for the patch.  

Tue Apr 29 09:28:54 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:44:45 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, sched/download.h, viewer/dump/dump.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:34:11 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:30:10 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c, ftp.c, ftp/ftp.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:25:28 2003  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, osdep/osdep.c, protocol/http/http.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:20:37 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 08:03:17 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 07:59:21 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Tue Apr 29 07:49:37 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/: parser.c, tables.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 15:37:31 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, config/opttypes.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 15:33:47 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/backend/common.c, bookmarks/backend/default.c,
	bookmarks/backend/xbel.c, intl/charsets.c,
	intl/gettext/dcigettext.c, intl/gettext/libintl.c:

	Some variables shadowing global declarations or previous local
	variables were renamed.  

Mon Apr 28 13:22:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Cleanup of some egnimatic code ;).  

Mon Apr 28 10:00:51 2003  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Raúl Núñez de Arenas Coronado was added to AUTHORS document.  

Mon Apr 28 09:47:12 2003  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/bookmarks.c, globhist/globhist.c:

	Workaround for bookmarks/globhist segfault caused by deletion of
	marked items. A real fix is needed there. Patch by Witold Filipczyk
	and me.  

Mon Apr 28 09:40:27 2003  Laurent Monin <zas@norz.org>:

	* src/: sched/download.c, util/file.c:

	The problem with tilde expansion at get_unique_name() was fixed. The
	call to expand_tilde() inside get_unique_name() was substitued by a
	copy_string(). This patch may still need improvment but it works.
	Patch by Raúl Núñez de Arenas Coronado.  

Sat Apr 26 09:47:44 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	BUGS file was updated.  

Sat Apr 26 09:47:03 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Lists debugging feature is now enabled when --enable-debug is used.  

Sat Apr 26 09:41:47 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Cleanups and minor optimizations.  

Sat Apr 26 09:01:49 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Lists debugging was improved a bit. Some pointers are now set to
	specific values after action.  

Sat Apr 26 08:03:18 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Minor cleanup.  

Sat Apr 26 07:57:51 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	A list head structure initialization was fixed.  

Thu Apr 24 08:52:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix init_formatted() to be useable with listdebug feature. We should
	not rely a fixed size for struct list_head.  

Thu Apr 24 08:32:34 2003  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	lists.h cleanup.  

Thu Apr 24 08:23:38 2003  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.h, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/backend/xbel.c, config/kbdbind.c,
	config/kbdbind.h, config/options.c, config/options.h,
	cache/cache.c, cache/cache.h, cookies/cookies.c, dialogs/menu.c,
	document/cache.c, document/cache.h, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c,
	document/html/renderer.h, globhist/dialogs.c, globhist/globhist.c,
	globhist/globhist.h, lowlevel/dns.c, lowlevel/select.c,
	lowlevel/terminal.c, lowlevel/terminal.h, osdep/os_dep.c,
	osdep/osdep.c, protocol/auth/auth.c, protocol/auth/auth.h,
	protocol/http/auth.c, protocol/http/auth.h,
	protocol/http/blacklist.c, sched/connection.c, sched/connection.h,
	sched/download.c, sched/download.h, sched/location.h,
	sched/sched.c, sched/sched.h, sched/session.c, sched/session.h,
	util/blacklist.c, util/error.c, util/error.h, util/hash.c,
	util/hash.h, util/lists.h, util/memdebug.c, viewer/text/view.c:

	Lists debugging feature was implemented. It still needs some work
	(and cleanup) but it already detects some bugs. To test edit
	src/util/lists.h and define LISTDEBUG. As a side effect list headers
	(next,prev pointers) are now defined as a macro providing a kind of
	encapsulation. Feel free to improve the patch.  

Tue Apr 22 15:51:57 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	Marked bookmarks deletion segfault bug was added.  

Tue Apr 22 14:17:16 2003  Laurent Monin <zas@norz.org>:

	* src/util/memory.h:

	fmem_alloc() and fmem_free() are always mem_alloc() and mem_free()
	but in one case. Fixed.  

Tue Apr 22 13:01:46 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	A compile issue (type casting) was fixed. Patch by Jonas Fonseca.  

Tue Apr 22 10:09:24 2003  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, document/html/tables.c,
	util/memory.h:

	fmem_alloc() and fmem_free() were introduced. When alloca() exists,
	and FASTMEM is defined (at configure time), then malloc() is
	replaced with alloca() and free() is not used, whenever possible. It
	will improve performance in functions allocating temporary memory.
	Read alloca() man page for further information, and be conscious
	that fmem_alloc() may only be used in some cases.  

Tue Apr 22 08:57:36 2003  Laurent Monin <zas@norz.org>:

	* BUGS, src/bookmarks/dialogs.c:

	Bug: Moving bookmarks to empty higher level folders... Fixed.  

Mon Apr 21 21:12:00 2003  Laurent Monin <zas@norz.org>:

	* BUGS:

	A note about a bug concerning moving bookmarks was added.  

Mon Apr 21 20:38:21 2003  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	strdup() stub was improved.  

Mon Apr 21 20:16:22 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	An unused variable was removed.  

Mon Apr 21 20:04:04 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Minor code cleanup.  

Mon Apr 21 19:31:11 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Some hardcoded chars were replaced by FRAME* chars, minor
	optimization in html_ol().  

Mon Apr 21 11:52:56 2003  Laurent Monin <zas@norz.org>:

	* po/: POTFILES.in, be.po, bg.po, ca.po, cs.po, da.po, de.po,
	el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po,
	is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po,
	ru.po, sk.po, sv.po, tr.po, uk.po:

	Keybinding descriptions were added to translations stuff. French
	translation was updated. Translators please think about updating
	your translations...  

Mon Apr 21 09:44:33 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were resynced.  

Mon Apr 21 09:30:27 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Minor optimization.  

Mon Apr 21 09:28:23 2003  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Cleanup and code redundancy was reduced: transchars() and
	untranschars() functions were introduced.  

Sun Apr 20 15:05:49 2003  Laurent Monin <zas@norz.org>:

	* src/: util/string.c, bfu/inphist.c, document/html/parser.c:

	A potential issue was fixed. trim_chars() no more modify pointer to
	the start of string, it now uses memmove(). It may be responsible of
	issues when trying to free the string.  

Sun Apr 20 14:49:22 2003  Laurent Monin <zas@norz.org>:

	* src/bfu/group.c:

	Code redundancy was reduced. As a side effect it should improve
	speed a bit.  

Sun Apr 20 12:30:10 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Fix the Draw the frame lines connected patch. Please pasky recheck
	it.  

Sun Apr 20 10:35:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Draw the frame lines connected (by mikulas, from 0.99pre5).  

Sun Apr 20 09:08:34 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files and french translation were updated.  

Sun Apr 20 08:54:56 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Ooops. Missing \n fixed.  

Sun Apr 20 08:49:13 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	Fixed / -> _ URL translation when calling external helpers. Reported
	by John D. Boy <john@voidhobo.de>, patch by Fabio.  

Sun Apr 20 08:40:50 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Allow relative redirects while downloading (by mikulas, from
	0.99pre5).  

Sun Apr 20 08:37:54 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Convert '\' to '/' in HTTP requests (windows rulez) (by mikulas,
	from 0.99pre5).  

Sun Apr 20 08:35:09 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Added mising newline in protocol.http.bugs.broken_302_redirect
	description.  

Sun Apr 20 08:33:41 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/http/http.c:

	Introduced protocol.http.bugs.accept_charset which optionally
	prohibits sending of the infamous Accept-Charset header (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:29:48 2003  Laurent Monin <zas@norz.org>:

	* src/sched/session.c:

	Do not abort loading main page when loading link fails (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:27:28 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Read uploaded files in binary mode (matters for OS/2) (by mikulas,
	from 0.99pre3).  

Sun Apr 20 08:25:32 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, sched/connection.c, sched/sched.c:

	connect.retries = 0 means unlimited retries (by mikulas, from
	0.99pre3).  

Sat Apr 19 19:15:09 2003  Laurent Monin <zas@norz.org>:

	* po/: Makefile.in, Makefile.in.in, be.po, bg.po, ca.po, cs.po,
	da.po, de.po, el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po,
	hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po,
	pt_BR.po, ro.po, ru.po, sk.po, sv.po, tr.po, uk.po:

	.po files and french translation were updated. msgmerge report was
	slightly modified (clearer).  

Sat Apr 19 18:45:57 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/dump/dump.c:

	error() + gettext().  

Sat Apr 19 18:39:56 2003  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/home.c, scripting/lua/core.c:

	error() + gettext().  

Sat Apr 19 18:35:26 2003  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	error() is now used instead of fprintf(stderr,...).  

Sat Apr 19 17:45:40 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.po files were updated.  

Sat Apr 19 17:36:16 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	A namespace clash was fixed (now).  

Sat Apr 19 17:33:55 2003  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Use error(). A namespace clash was fixed.  

Sat Apr 19 17:27:02 2003  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Use error() and gettext().  

Sat Apr 19 17:22:31 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	error() calls were fixed.  

Sat Apr 19 17:20:47 2003  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	error() no more waits 1 second, and made use of fputc() instead of
	fprintf().  

Sat Apr 19 17:11:16 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Some fprintf(stderr,..) were replace by error().  

Sat Apr 19 17:00:23 2003  Laurent Monin <zas@norz.org>:

	* src/: setup.h, protocol/mailcap.c:

	Minor cleanup.  

Sat Apr 19 12:25:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, util/lists.h:

	Removed usage of ternary operators from list routines, it brings
	portability problems. Thanks, Jose.  

Sat Apr 19 11:02:31 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: Makefile.in, gettextP.h, loadmsgcat.c,
	plural.c:

	Prefix __gettext was moved to gettext__.  

Sat Apr 19 11:00:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.h:

	ACT_NONE is now just zero instead of -1, thus it is enabled for use
	in config files etc. This way, default keybindings may be removed.
	Idea by Raul.  

Sat Apr 19 10:46:57 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, gettextP.h, hash-string.h, intl-compat.c, l10nflist.c,
	libgettext.h, libgnuintl.h, loadinfo.h, loadmsgcat.c,
	localcharset.c, localealias.c, ngettext.c, plural.c, plural.y,
	textdomain.c:

	char -> unsigned char + some fixes related to plural.c generation.  

Sat Apr 19 10:24:25 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: dcigettext.c, finddomain.c, gettextP.h,
	loadmsgcat.c, localealias.c:

	Some libc-specific code was removed.  

Fri Apr 18 09:34:02 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, finddomain.c, gettext.c,
	gettext.h, gettextP.h, intl-compat.c, l10nflist.c, loadmsgcat.c,
	localealias.c, ngettext.c, textdomain.c:

	Even more ELinksified. Most libc-specific stuff was removed.  

Fri Apr 18 08:13:03 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Translations were resynced with source code. French translation was
	updated.  

Fri Apr 18 07:44:08 2003  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	current_url() no more returns post-data. Scripts that rely on the
	old behaviour should be rewritten to use a new API which should be
	written to return the post-data. Implementation of that new API is
	leaved to people who are doïng fancy stuff that needs post-data.
	Patch by Miciah.  

Fri Apr 18 07:38:59 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, viewer/text/view.c:

	Introduces document.browse.scroll_step option to configure the
	default number of lines that scroll-up and scroll-down scroll. Patch
	by Miciah.  

Fri Apr 18 07:35:12 2003  Laurent Monin <zas@norz.org>:

	* src/globhist/dialogs.c:

	Removes layout_history_manager and uses layout_hierbox_browser.
	Ports some bookmarks code to globhist so the user can delete marked
	items, and delete using the Delete key. Patch by Miciah.  

Thu Apr 17 17:57:09 2003  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	This avoids multiple [ Submit ] image inputs on a page like
	amazon.com's which uses image to record useful/useless
	recommendations but doesn't have alt attribute set. Patch by Zardoz.  

Thu Apr 17 17:48:56 2003  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Two fixes -- one for processing tree below <xbel> node and another
	to fix crash when freeing attributes. Patch by Zardoz.  

Thu Apr 17 17:44:27 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	A missing header file is now included.  

Thu Apr 17 15:07:59 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Compression handling was finally fixed. Patch by Witold Filipczyk.  

Thu Apr 17 15:03:39 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, finddomain.c, gettext.c,
	gettextP.h, hash-string.h, l10nflist.c, libgnuintl.h, libintl.h,
	loadinfo.h, loadmsgcat.c, localealias.c, ngettext.c, plural.c,
	plural.y, textdomain.c:

	ELinksification. There's still remaining some libc specific stuff...  

Thu Apr 17 13:25:37 2003  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	stpcpy() and mempcpy() replacements were added. It will help to
	simplify gettext code included in ELinks.  

Thu Apr 17 12:28:48 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, explodename.c, finddomain.c, gettext.c,
	hash-string.h, intl-compat.c, l10nflist.c, libintl.c, loadmsgcat.c,
	localcharset.c, localealias.c, ngettext.c, plural.c, textdomain.c:

	ELinksified function declarations and labels.  

Thu Apr 17 11:58:38 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: bindtextdom.c, dcgettext.c, dcigettext.c,
	dcngettext.c, dgettext.c, dngettext.c, explodename.c, finddomain.c,
	gettext.c, intl-compat.c, l10nflist.c, libintl.c, gettext.h,
	gettextP.h, hash-string.h, libgettext.h, libgnuintl.h, libintl.h,
	loadinfo.h, loadmsgcat.c, localcharset.c, localealias.c,
	ngettext.c, plural.c, textdomain.c:

	ELinksified indentation. Still not perfect but should help...  

Thu Apr 17 07:53:48 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Fancier features listing in info box, comma separators were added.  

Thu Apr 17 07:44:44 2003  Laurent Monin <zas@norz.org>:

	* src/osdep/: generic.h, os_depx.h:

	Compilation fix. On some systems, PIPE_BUF redefinition causes
	compilation to fail.  

Wed Apr 16 21:36:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Workaround WebSitePro/2.5.4 headers termination bug, patch by
	witekfl.  

Wed Apr 16 21:28:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: generic.h, os_depx.h:

	Portability fix, OS/2 hasn't PIPE_BUF. Patch by Mikulas and me.  

Wed Apr 16 21:25:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed some compression problems, reported by zas, patch by witekfl.  

Wed Apr 16 21:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Be more strict when taking number values from commandline or UI. Bug
	reported by Mikulas.  

Wed Apr 16 21:16:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/dns.c, lowlevel/dns.h:

	Do not use mem_*() inside of the resolving thread. Pointed out by
	Mikulas.  

Wed Apr 16 21:14:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	NULLify freed *dnsquery.addr, otherwise we get ghost references in
	the struct connection_info. Thanks, Mikulas! 

Wed Apr 16 12:47:58 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Witold Filipczyk.  

Wed Apr 16 12:43:30 2003  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	A freed pointer wasn't nullified. It may be responsible of some
	bugs. Pasky, please have a look.  

Mon Apr 14 15:44:26 2003  Laurent Monin <zas@norz.org>:

	* src/intl/gettext/: libintl.c, libintl.h:

	Accept-Language header is now correct with language "system". Patch
	by Fabio Bonelli.  

Mon Apr 14 15:35:18 2003  Laurent Monin <zas@norz.org>:

	* src/viewer/text/view.c:

	Partial fix for weird cursor behavior in some textareas (see
	https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=62368). Patch
	by Tim Waugh.  

Mon Apr 14 15:22:23 2003  Laurent Monin <zas@norz.org>:

	* po/pl.po:

	Polish translation was updated. Patch by Witold Filipczyk.  

Mon Apr 14 15:18:07 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	A bug concerning document decompression was fixed. Patch by Witold
	Filipczyk.  

Mon Apr 14 15:05:47 2003  Laurent Monin <zas@norz.org>:

	* src/: main.c, main.h, lowlevel/ttime.c, lowlevel/ttime.h,
	util/ttime.c, util/ttime.h:

	Trivial cleanups. Patch by José Luis González González.  

Mon Apr 14 13:26:20 2003  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	A test against a zero-length string copy was added. It prevents a
	forced segfault with --enable-debug.  

Mon Feb 24 12:12:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed estimated time displayed when resuming download of some file.  

Wed Feb 19 17:26:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/view.c:

	Fixed yet another crash in textarea editor code. Stupid.  

Mon Feb 10 18:47:13 2003  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Oops, Pergl -> Pergel. Sorry Martin :-). Idea by clock.  

Wed Feb  5 09:17:06 2003  Laurent Monin <zas@norz.org>:

	* TODO:

	Some entries were removed. A new section called "Permanent goals"
	was added ;).  

Wed Feb  5 08:58:08 2003  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c, po/be.po, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po,
	po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po:

	LUA -> Lua ;) Thanks to Peter Wang.  

Sun Jan 26 23:02:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed registation of the protocol.http.trace option. Thanks to
	<Len_Lattanzi@StanfordAlumni.org> for a report.  

Sun Jan 26 19:48:56 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/protocol/http/http.c:

	Introduced support for the HTTP TRACE request (option
	protocol.http.trace), patch by Bennett Todd.  

Sun Jan 26 19:23:19 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.spec.in:

	elinks.pld.org.pl -> elinks.or.cz, based on Bennett's suggestion 

Sun Jan 26 17:40:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.c, sched.c:

	Fixed possible removal of used cache_entry (altough I can't imagine
	well how could it happen).  

Sun Jan 26 17:34:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/connect.c, lowlevel/connect.h,
	lowlevel/dns.c, lowlevel/dns.h:

	Cleanup of DNS code, a lot of sockaddr -> sockaddr_storage changes.
	Hopefully fixes some possible overflow problems reported by Jose.  

Fri Jan 24 23:20:58 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	When sysconfdir is set explicitly, don't append the elinks/ part.
	Idea by DervishD <raul@pleyades.net>.  

Fri Jan 24 15:55:09 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/lt.po,
	po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, src/setup.h,
	src/dialogs/menu.c:

	An Help menu shortcut was added: LUA Reference manual, appears only
	when LUA support is compiled-in.  

Thu Jan 23 23:15:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Oops! Quite a fatal bug which managed to somehow sneak along my
	sight for a *long* time. The resuming sometimes happenned...
	automagically, when the file already existed. Reported by Jose.  

Thu Jan 23 19:03:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed various stracpy(NULL) and similiar problems with smart
	download dialog. Reported by Jonas.  

Thu Jan 23 13:14:46 2003  Laurent Monin <zas@norz.org>:

	* src/sched/download.c:

	Compilation fix: warning: pointer type mismatch in conditional
	expression.  

Thu Jan 23 13:07:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Introduced lun_cancel(), fixed possible problems with NULLs in
	lun_hop file variables.  

Thu Jan 23 13:03:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Fixed problem with garbage showing up in the smart download dialog.  

Thu Jan 23 10:54:40 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Thu Jan 23 03:13:34 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/: config.lua, hooks.lua.in:

	Introduce a possibility to the default lua hooks to see various
	source files with a highlighted syntax. Patch by witekfl.  

Thu Jan 23 02:47:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, sched/download.c, sched/download.h,
	viewer/text/view.c:

	Introduced a "File exists" dialog, which asks user whether to
	overwrite the original file, save to an alternative file or resume
	the download. It's turned on by document.download.overwrite = 2 (new
	default). Please test extensively.  

Thu Jan 23 02:47:23 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	.pot mess update.  

Thu Jan 23 02:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Unified also direct expand_tilde() to lookup_unique_name().  

Thu Jan 23 02:29:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Changed order of libraries when linking, can fix compilation. Patch
	by Fabio.  

Thu Jan 23 02:29:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/ftp.c, protocol/ftp/ftp.c, protocol/http/http.c,
	sched/connection.c, sched/connection.h, sched/download.c,
	sched/sched.c, sched/sched.h:

	Moved one part of the download resuming core (seek()ing in the
	stream) to much more appropriate place. Introduced
	remaining_info.seek, which is now only set in the protocol backends
	and we handle what we need in download_data().  

Wed Jan 22 00:49:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/download.c, sched/download.h, viewer/text/view.c:

	Made create_download_file() asynchronous and its users as well ---
	preparation for the smart download dialog implementation.  

Mon Jan 20 18:02:43 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in:

	Added checks for __va_copy() and C99 compliant vsnprintf(). Taken
	from Samba.  

Mon Jan 20 17:50:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: Makefile.am, snprintf.c, snprintf.h:

	Introduced own implementation of snprintf(), ported from the Samba
	project. Will be improved yet.  

Mon Jan 20 16:23:01 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Add struct addrinfo check to the IPv6 checks.  

Mon Jan 20 16:21:40 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	Portability note.  

Mon Jan 20 15:09:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.h:

	Restore stub declaration ifdefs - now they cause conflicts. So it's
	either -ansi or -Werror, it looks.  

Mon Jan 20 15:08:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/: string.c, string.h:

	Introduced qualifiers to declarations of the stub functions.  

Mon Jan 20 14:57:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/gettextP.h:

	Make gettext use our stubs.  

Mon Jan 20 14:56:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/string.c, src/util/string.h:

	Fixed strcasecmp() stub, declare stubbed functions everytime (since
	sometimes just declaration is suppressed, but the function exists so
	configure will detect it). Introduced strdup() stub.  

Mon Jan 20 14:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: dcigettext.c, gettextP.h, libintl.c:

	Introduced LANGUAGE variable which takes precedence to the LANGUAGE
	environment variable inside of gettext. Make set_language() to
	modify that variable instead of using unportable setenv().  

Mon Jan 20 13:58:43 2003  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.h, osdep.h:

	Introduced stub for strcasecmp().  

Mon Jan 20 13:48:17 2003  Laurent Monin <zas@norz.org>:

	* configure.in:

	A check for variadic macros was added. For near future use.  

Mon Jan 20 13:38:13 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/string.c, src/util/string.h:

	Introduced stub for strcasecmp().  

Mon Jan 20 11:09:12 2003  Petr Baudis <pasky@ucw.cz>:

	* NEWS, TODO:

	Removed stale TODO item, updated NEWS.  

Mon Jan 20 10:22:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Updated the Move Front Rule comment.  

Mon Jan 20 10:19:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	When retrieving an item from the hash, move it to the head of list
	of the hash key values. The Links people call it MFR, inspired by
	them (probably PerM).  

Sun Jan 19 20:03:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Fixed tiny but fatal bug in lua causing non-working pipe_read()
	(kinda problem, yes ;). Patch by witekfl.  

Sun Jan 19 14:43:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/dns.c:

	Tiny cleanup.  

Sun Jan 19 14:24:19 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/sched/connection.c, src/sched/sched.c:

	Fixes for extracting of proxy addresses from the variables - ignore
	/^protocol:\/\// and /\/.*$/. Patch by Alexey Tourbin
	<at@turbinal.org> and me.  

Sun Jan 19 14:13:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/user.c:

	Introduced %d modifier for protocol.user.* options, which is
	substitued by the path part of the URL. Based on Jupp's suggestion.  

Sun Jan 19 14:07:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	check_protocol() paranoia 

Sun Jan 19 13:53:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Introduced -default-mime-type commandline option, aliasing
	document.download.default_mime_type.  

Sun Jan 19 08:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed highlighting again. Thanks, Witold.  

Sat Jan 18 23:36:33 2003  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	New keywords added. Reported by Doug Kearns
	<djkea2@mugca.its.monash.edu.au>.  

Sat Jan 18 23:35:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed highlighting.  

Sat Jan 18 23:27:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Use frame symbols instead of ascii art in the hiearchic listboxes.
	Based on patch by witekfl.  

Sat Jan 18 23:05:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, lowlevel/terminal.c, lowlevel/terminal.h,
	viewer/text/view.c:

	Set the ATTR_FRAME bit directly in the frame symbols declaration.  

Sat Jan 18 23:00:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Oops. Compilation fix.  

Sat Jan 18 22:58:03 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, document/html/tables.c, lowlevel/terminal.c,
	lowlevel/terminal.h, viewer/text/view.c:

	Introduced enum frame_char, converted most of frame codes to
	FRAME._* defined in this enum. Inspired by witekfl's patch.  

Sat Jan 18 14:38:19 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed HTTP communication when compiled --without-cookies. Patch by
	Fabio.  

Sat Jan 18 14:16:14 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/conv/conf-links2elinks.pl:

	The attached diff updates the file
	'contrib/conv/conf-links2elinks.pl' in the elinks distribution to
	fix some problems in config file migration, specifically: 
	
	* the terminal.XXX.utf_8_io setting is now given a proper boolean
	value 
	
	* spaces in extension lists and mime-type lists are (properly)
	ignored 
	
	* regular expressions are converted to work in older Perl versions
	too 
	
	* the mime.handler.XXX.YYY.block setting is now given a proper
	boolean value 
	
	Patch by BC Sittler.  

Sat Jan 18 00:36:13 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Tons of random fixes. Now the renderer slowly starts to work in my
	testing environment...  

Fri Jan 17 17:04:17 2003  Laurent Monin <zas@norz.org>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Translations resync. French translation was updated.  

Fri Jan 17 16:47:54 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/html/parser.c:

	How image links are enclosed is now configurable by options system.
	Please comment, fix, or revert. ;) 

Fri Jan 17 10:54:59 2003  Laurent Monin <zas@norz.org>:

	* po/be.po, src/dialogs/document.c, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po,
	po/fr.po, po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po,
	po/it.po, po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po,
	po/pt_BR.po, po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po:

	Erroneous translation was fixed ~Link -> Link.  

Fri Jan 17 09:58:10 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Many menu hotkeys were fixed.  

Thu Jan 16 21:56:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fixed segfault when -stdin was passed to ELinks. Evil.  

Thu Jan 16 14:35:13 2003  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, config/opttypes.c, dialogs/options.c,
	protocol/http/http.c, viewer/dump/dump.c:

	Compilation with --disable-nls was fixed. Need more work.  

Thu Jan 16 11:34:16 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated and fixed.  

Thu Jan 16 10:06:33 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po, src/config/options.c, src/viewer/dump/dump.c:

	Issue concerning call to gettext() with empty string as parameter
	was fixed.  

Tue Jan 14 11:54:01 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated.  

Mon Jan 13 11:18:14 2003  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, bookmarks/backend/default.c,
	cookies/cookies.c, globhist/globhist.c, util/file.c, util/file.h:

	safe_fgets() was introduced. It fixes a bug in bookmarks loading and
	simplify code.  

Mon Jan 13 10:14:04 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation was updated. Temporary fix for --help issue.  

Fri Jan 10 22:28:09 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/intl/gettext/loadmsgcat.c:

	Fixed compilation problems with the stpcpy() function.  

Fri Jan 10 17:50:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/default.c, config/urlhist.c,
	cookies/cookies.c, globhist/globhist.c, util/file.c:

	Fixed possible problems on systems where fgets() won't put NUL at
	the end of the string. Patch by Mikulas and me.  

Thu Jan  9 18:06:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	If file contained a NUL char, it wasn't sent completely to the
	server (occurred when uploading a file thru form). Patch by Mikulas.  

Thu Jan  9 14:09:37 2003  Laurent Monin <zas@norz.org>:

	* po/fr.po:

	French translation updated. Need more work. Help welcome ;).  

Tue Jan  7 23:26:26 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Require explicit make update-po call to update the .po files
	accordingly to the source, like original gettext did (but it won't
	recreate .pot when making make dist, like original gettext did). See
	Note 3 in the source for other details.  

Tue Jan  7 23:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po, po/gl.po,
	po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po, po/lt.po,
	po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po, po/ro.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/config/options.c, src/sched/connection.c, src/sched/sched.c:

	Introduced document.cache.cache_redirects, which controls whether we
	should cache redirects received from server or not. By default we
	won't, which changes the current behaviour. See option description
	for details. Should fix problems with nytimes.com and other sites,
	reported by Jiang Qian <qian2@fas.harvard.edu>.  

Tue Jan  7 23:18:59 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/: connection.h, sched.h:

	Exported struct list_head queue (=> compilation fix).  

Tue Jan  7 19:57:29 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c, sched/connection.c,
	sched/connection.h, sched/sched.c, sched/sched.h:

	Moved is_entry_used() from sched/sched.* to document/cache.c and
	statified.  

Mon Jan  6 21:14:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/sched/download.c:

	Added support for application/xhtml+xml (just behave identically as
	with text/html) per RFC 3236.  

Sun Jan  5 16:48:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in, po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po,
	po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/main.c, src/bfu/hierbox.h, src/bookmarks/dialogs.c,
	src/bookmarks/dialogs.h, src/config/dialogs.c,
	src/config/dialogs.h, src/config/options.c, src/cookies/cookies.c,
	src/dialogs/auth.c, src/dialogs/auth.h, src/dialogs/document.c,
	src/dialogs/document.h, src/dialogs/edit.c, src/dialogs/edit.h,
	src/dialogs/hierbox.h, src/dialogs/info.c, src/dialogs/info.h,
	src/dialogs/menu.c, src/dialogs/menu.h, src/dialogs/options.c,
	src/dialogs/options.h, src/dialogs/refresh.c,
	src/dialogs/refresh.h, src/protocol/auth/dialogs.c,
	src/protocol/auth/dialogs.h, src/document/Makefile.am,
	src/document/download.c, src/document/download.h,
	src/document/history.c, src/document/history.h,
	src/document/location.c, src/document/location.h,
	src/document/session.c, src/document/session.h,
	src/document/html/parser.c, src/document/html/parser.h,
	src/document/html/renderer.c, src/document/html/renderer.h,
	src/globhist/dialogs.h, src/lowlevel/af_unix.c,
	src/lowlevel/interlink.c, src/lowlevel/terminal.c,
	src/protocol/ftp.c, src/protocol/mailcap.c, src/protocol/url.c,
	src/protocol/url.h, src/protocol/user.c, src/protocol/user.h,
	src/protocol/auth/auth.c, src/protocol/ftp/ftp.c,
	src/protocol/http/auth.c, src/protocol/http/http.c,
	src/sched/Makefile.am, src/sched/connection.c,
	src/sched/download.c, src/sched/download.h, src/sched/history.c,
	src/sched/history.h, src/sched/location.c, src/sched/location.h,
	src/sched/sched.c, src/sched/session.c, src/sched/session.h,
	src/scripting/lua/core.c, src/scripting/lua/core.h,
	src/scripting/lua/hooks.c, src/scripting/lua/hooks.h,
	src/viewer/text/view.c, src/viewer/text/view.h,
	src/viewer/text/vs.c:

	src/document/download.*,location.*,history.*,session.* ->
	src/sched/.  

Sat Jan  4 22:40:10 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	Sync.  

Sat Jan  4 22:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Partial czech translation update.  

Sat Jan  4 21:59:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Documents -> Document.  

Sat Jan  4 21:55:13 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Newline added in description of language tree options.  

Sat Jan  4 21:27:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	connection.ssl.cert_verify gettextization fix.  

Sat Jan  4 21:11:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Removed dangerous fuzzy translation for the --version output.  

Sat Jan  4 21:01:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed listing of translated items in listbox.  

Sat Jan  4 20:57:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	Fixed off-by-one error causing random cores soon-after-startup. Make
	sure the generated filename string is null-terminated. Fixed scale
	of memory leaks.  

Sat Jan  4 20:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation fix.  

Sat Jan  4 20:41:46 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Compilation fix by Jonas.  

Sat Jan  4 20:39:29 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Remove also *.gmo, patch by Jonas.  

Sat Jan  4 20:38:21 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Synced the .po files with the source. You've stuff to do,
	translators >:). (And me too ;-) 

Sat Jan  4 20:26:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized error messages and output of some option-commands (help,
	version, host, ...).  

Sat Jan  4 20:17:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Gettextized error messages and type help strings.  

Sat Jan  4 20:14:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Gettextized keybindings and error messages.  

Sat Jan  4 20:06:37 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized option descriptions.  

Sat Jan  4 17:17:09 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Gettextized option captions (and few first descriptions).  

Sat Jan  4 17:07:02 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Keybinding listbox_items are translated.  

Sat Jan  4 17:06:10 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Options listbox_items are translated.  

Sat Jan  4 17:04:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	If listbox_item.translated, call gettext on listbox_item.text when
	displaying it. Transformed listbox_item flags to a bit array.  

Sat Jan  4 17:00:22 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Translate the option description (non-op for translations yet).  

Sat Jan  4 16:45:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Fixed displaying of translation with non-fuzzy msgid "" (cs
	translation right now).  

Sat Jan  4 16:44:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Formatting fix.  

Sat Jan  4 15:26:23 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/dcigettext.c:

	Touched this file, aimed to help people fighting with the previous
	absence of dependency tracking in gettext sources (their elinks
	dumps core.. try make clean ;).  

Sat Jan  4 15:21:53 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Touched all files, so that they're rebuilt in the build tree.  

Sat Jan  4 15:19:40 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Build the .gmo files in the build tree, not source tree, if they
	differ. That allows us to run ELinks from the build tree directly
	without installation.  

Sat Jan  4 15:08:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	Minor cleanup of the hack.  

Sat Jan  4 15:08:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Introduced dependency tracking (ported from automake makefiles) 

Sat Jan  4 14:43:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/loadmsgcat.c:

	We can't use our memory/string utility functions *sniff* ;-(.  

Sat Jan  4 14:20:27 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: TODO, l10nflist.c, loadinfo.h, loadmsgcat.c:

	Look to the ELinks path + ../po/language.gmo for the translations
	aside of the install directory, enabling elinks to have correct
	translations even when being ran directly from the source tree.  

Sat Jan  4 13:46:36 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, de.po, el.po, es.po,
	et.po, fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po,
	lt.po, nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po,
	sv.po, tr.po, uk.po:

	Some view.c line number changes. Hrmpf.  

Sat Jan  4 13:46:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: TODO, VERSION, libintl.h:

	Multiplex gettext() output terminal appropriately depending on the
	output terminal.  

Sat Jan  4 13:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Credits >:).  

Sat Jan  4 13:14:08 2003  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Commented out .gz automatic gunzipping. Idea by witekfl ;-).  

Sat Jan  4 13:09:02 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/kbdbind.c, src/config/kbdbind.h,
	src/viewer/text/view.c:

	Introduced action toggle-numbered-links, by default bound to '.'.
	Patch by Wiktor Grebla <greblus@poczta.onet.pl>.  

Sat Jan  4 13:06:09 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, da.po, de.po, el.po, es.po, et.po,
	fi.po, fr.po, gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po,
	nl.po, no.po, pl.po, pt.po, pt_BR.po, ro.po, ru.po, sk.po, sv.po,
	tr.po, uk.po:

	Normalized the huge strconcat() caring about the About dialog.
	Gettextized the feature names. Gettextized user_agent and
	saving_style startup warnings.  

Sat Jan  4 13:05:06 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Czech translation updated.  

Sat Jan  4 12:35:04 2003  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Gettextized user_agent and saving_style startup warnings.  

Sat Jan  4 12:30:17 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fixed Copying dialog translation.  

Sat Jan  4 12:28:25 2003  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Normalized the huge strconcat() caring about the About dialog.
	Gettextized the feature names.  

Sat Jan  4 12:20:37 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Explicitly said that you have to survive the circular dependency.  

Sat Jan  4 11:59:48 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Beautification.  

Sat Jan  4 11:53:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in, be.po, bg.po, ca.po, cs.po,
	da.po, de.po, el.po, es.po, et.po, fi.po, fr.po, gl.po, hr.po,
	hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po, pl.po, pt.po,
	pt_BR.po, ro.po, ru.po, sk.po, sv.po, tr.po, uk.po:

	Automatically update .po files when any of the gettextized sources
	changes. TODO: Run msgmerge only when the .pot changed.  

Sat Jan  4 11:39:24 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in, po/be.po, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/es.po, po/et.po, po/fi.po, po/fr.po,
	po/gl.po, po/hr.po, po/hu.po, po/id.po, po/is.po, po/it.po,
	po/lt.po, po/nl.po, po/no.po, po/pl.po, po/pt.po, po/pt_BR.po,
	po/ro.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	src/bookmarks/backend/xbel.c:

	Gettextized some messages in bookmarks/backend/xbel.c. Based on
	Fabio's patch.  

Sat Jan  4 11:23:20 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	More to do.  

Sat Jan  4 11:18:57 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Polish translation update, patch by witekfl.  

Sat Jan  4 11:13:43 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in:

	Removed unused code.  

Sat Jan  4 11:06:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: be.po, bg.po, ca.po, cs.po, da.po, el.po, fi.po, fr.po,
	gl.po, hr.po, hu.po, id.po, is.po, it.po, lt.po, nl.po, no.po,
	pl.po, pt.po, pt_BR.po, ro.po, sk.po, tr.po, uk.po:

	Corrected Language-Team emails.  

Sat Jan  4 01:07:35 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, configure.in:

	Generate Makefiles in existing directories ;-).  

Sat Jan  4 01:06:59 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: .cvsignore, Makefile.am:

	Hrmpf. The suite.  

Sat Jan  4 01:05:45 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README:

	We can't get rid of this directory completely because automake will
	just give up. *sigh* 

Sat Jan  4 01:05:08 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/el.po:

	Another small syntax fix.  

Sat Jan  4 01:03:39 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Don't generate Makefiles in non-existing directories ;-).  

Sat Jan  4 01:02:05 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/gettext.m4:

	Removed useless stuff (we always use own gettext).  

Sat Jan  4 00:58:58 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/.cvsignore:

	*cough* 

Sat Jan  4 00:58:29 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, intl/Makefile.am, intl/README, intl/english.lng,
	intl/index.txt, intl/sync_vs_source.pl, intl/sync_vs_source.sh,
	intl/synclang, intl/synclang.awk:

	Removed now obsolete intl/ directory. Bye bye the old translation
	system - the last remnants should disappear with this commit.  

Sat Jan  4 00:56:58 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/icelandic.lng, intl/index.txt, po/is.po:

	Gettextized Icelandic translation. Uff.  

Sat Jan  4 00:54:43 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Fixed Armon Red's email.  

Sat Jan  4 00:53:46 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/finnish.lng, intl/index.txt, po/fi.po:

	Gettextized Finnish translation.  

Sat Jan  4 00:50:59 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/norwegian.lng, po/no.po:

	Gettextized Norwegian translation.  

Sat Jan  4 00:48:19 2003  Jonas Fonseca <fonseca@diku.dk>:

	* src/intl/gettext/Makefile.in:

	Removed fi leftover. Fixes the distclean target.  

Sat Jan  4 00:48:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/lithuanian.lng, po/lt.po:

	Gettextized Lithuanian translation.  

Sat Jan  4 00:44:06 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/estonian.lng, intl/index.txt, po/et.po:

	Gettextized Estonian translation.  

Sat Jan  4 00:41:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/croatian.lng, intl/index.txt, po/hr.po:

	Gettextized Croatian translation.  

Sat Jan  4 00:38:25 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/galician.lng, intl/index.txt, po/gl.po:

	Gettextized Galician translation.  

Sat Jan  4 00:35:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/hungarian.lng, intl/index.txt, po/hu.po:

	Gettextized Hungarian translation.  

Sat Jan  4 00:32:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/greek.lng, intl/index.txt, po/el.po:

	Gettextized Greek translation.  

Sat Jan  4 00:27:44 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/catalan.lng, intl/index.txt, po/ca.po:

	Gettextized Catalan translation.  

Sat Jan  4 00:24:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/dutch.lng, intl/index.txt, po/nl.po:

	Gettextized Dutch translation.  

Sat Jan  4 00:21:33 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/russian.lng, po/ru.po:

	Gettextized Russian translation.  

Sat Jan  4 00:17:57 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/swedish.lng, po/sv.po:

	Gettextized Swedish translation.  

Sat Jan  4 00:14:22 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/bulgarian.lng, intl/index.txt, po/bg.po:

	Gettextized Bulgarian translation.  

Sat Jan  4 00:13:44 2003  Jonas Fonseca <fonseca@diku.dk>:

	* po/be.po:

	"\n" inserted at copyright notice to remove msgfmt warning.  

Sat Jan  4 00:08:47 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Removed irrelevant commands (for gettext package). Also, libintl.h
	is not attempted to be autocreated and is not removed by make clean
	anymore. Should maybe fix bug reported by witekfl.  

Sat Jan  4 00:02:25 2003  Petr Baudis <pasky@ucw.cz>:

	* po/uk.po:

	Tried to fix error when processing uk.po. Thanks to witekfl and
	jonas for a report.  

Sat Jan  4 00:01:00 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/romanian.lng, po/ro.po:

	Gettextized Romanian translation.  

Fri Jan  3 23:55:12 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/turkish.lng, po/tr.po:

	Gettextized Turkish translation.  

Fri Jan  3 23:32:27 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/belarusian.lng, intl/index.txt, po/be.po:

	Gettextized Belarusian translationl.  

Fri Jan  3 23:22:48 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/ukrainian.lng, po/uk.po:

	Gettextized Ukrainian translation.  

Fri Jan  3 23:15:49 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/slovak.lng, po/sk.po:

	Gettextized Slovak translation.  

Fri Jan  3 22:58:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/spanish.lng, po/es.po:

	Gettextized Spanish translation.  

Fri Jan  3 22:53:14 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/brazilian_portuguese.lng, intl/index.txt,
	po/pt_BR.po:

	Gettextized Brazilian Portuguese translation.  

Fri Jan  3 22:48:17 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/portuguese.lng, po/pt.po:

	Gettextized Portuguese translation.  

Fri Jan  3 22:41:43 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/indonesian.lng, po/id.po:

	Gettextized Indonesian translation.  

Fri Jan  3 22:34:51 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/german.lng, intl/index.txt, po/de.po:

	Gettextized german translation.  

Fri Jan  3 22:27:51 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/french.lng, intl/index.txt, po/fr.po:

	Gettextized french translation.  

Fri Jan  3 22:03:35 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/danish.lng, intl/index.txt, po/da.po:

	Gettextized danish translation.  

Fri Jan  3 21:57:07 2003  Petr Baudis <pasky@ucw.cz>:

	* po/pl.po:

	Wrong translation for cannot edit option string fixed.  

Fri Jan  3 21:53:56 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed duplicate entry for David Mediavilla.  

Fri Jan  3 21:51:45 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/polish.lng, po/pl.po:

	Gettextized polish translation.  

Fri Jan  3 21:40:03 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, intl/index.txt, intl/italian.lng, po/it.po:

	Gettextized italian translation. Some changes in the translation
	based on Fabio's patch.  

Fri Jan  3 21:38:56 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: czech.lng, index.txt:

	Removed czech translation from the old translation system.  

Fri Jan  3 21:24:44 2003  Petr Baudis <pasky@ucw.cz>:

	* po/cs.po:

	Fixed Project-Id-Version.  

Fri Jan  3 04:26:29 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, po/cs.po:

	Tradaaa - a first translation available. Yes, it's czech (cs). More
	will appear tommorow - please don't send me patches re-adding your
	translation thru gettext (if the translation is already in the old
	format), wait until I'll add your translation and then send me
	possibly an update. Nite.  

Fri Jan  3 04:24:01 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	Do - -> _ when setting LANGUAGE environment variable. Changed ISO636
	code for czech from cz to cs, gettext will like it.  

Fri Jan  3 04:23:11 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/dcigettext.c:

	I'm happy to say that the GNU locale system is full of arcane
	undocumented and stupid extensions which break things in a strane
	way for users. Ie. if you have LANGUAGE set, but not LANG, LC_ALL
	nor LC_MESSAGES, you will get nothing - because set_locale() will
	default to "C" and the GNU people decided that they will ignore
	LANGUAGE value if any of the other variables is set to "C". Now we
	removed that GNU extension and if LANGUAGE exists, we just use it.
	Uff. Took quite a lot of debugging :-(.  

Fri Jan  3 03:43:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libgettext.h:

	Argh! I hate gettext ;-). Actually _use_ it instead of dummy
	definitions.  

Fri Jan  3 03:36:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	ui.language memory is not mapped to current_language anymore.  

Fri Jan  3 02:44:42 2003  Petr Baudis <pasky@ucw.cz>:

	* po/POTFILES.in:

	Populated with list of sources making use of translations. Based on
	patch by Fabio. And I've elinks.pot already :P.  

Fri Jan  3 02:33:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	s/language/charset/.  

Fri Jan  3 02:29:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Fixed unused term variable warnings.  

Fri Jan  3 02:28:56 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.c:

	Compilation fixes (typos).  

Fri Jan  3 02:27:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Fixed missing item in include path.  

Fri Jan  3 02:24:44 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/dump/dump.c:

	Call directly gettext() instead of N_().  

Fri Jan  3 02:23:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/inpfield.c, bfu/menu.c, bfu/msgbox.c, bfu/text.c, bfu/widget.c,
	bookmarks/dialogs.c, config/dialogs.c, config/options.c,
	config/opttypes.c, bfu/hierbox.c, dialogs/auth.c,
	dialogs/document.c, dialogs/edit.c, dialogs/hierbox.c,
	dialogs/info.c, dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	document/download.c, document/session.c, mime/dialogs.c,
	protocol/auth/dialogs.c, globhist/dialogs.c, scripting/lua/core.c,
	osdep/os_dep.c, osdep/osdep.c, protocol/url.c, protocol/user.c,
	protocol/auth/auth.c, protocol/http/auth.c, protocol/http/http.c,
	sched/connection.c, sched/sched.c, viewer/dump/dump.c,
	viewer/text/view.c:

	intl/language.h -> intl/gettext/libintl.h. Now the new gettext
	translation system should be activated.  

Fri Jan  3 02:22:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Removed zombie (de)initialization of the dead translation system.  

Fri Jan  3 02:17:03 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README, intl/gen-intl, src/intl/Makefile.am:

	Removed obsolete autogenerated language files rules and the gen-intl
	script.  

Fri Jan  3 02:15:21 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: Makefile.am, language.h:

	Removed language.h, the last source-related residuum of the old
	translations system. Welcome to the short no-translation-system
	period. Genesis 1:2: And the earth was without form, and void; and
	darkness was upon the face of the deep. And the Spirit of God moved
	upon the face of the waters.  

Fri Jan  3 02:12:54 2003  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	language_iso639_code() -> language_to_iso639() 

Fri Jan  3 02:08:55 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/opttypes.c, dialogs/options.c:

	Use the new language<->name lookup table and interface.  

Fri Jan  3 02:08:35 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Introduced language<->name and language<->iso639 lookup table.
	Language is now a number.  

Fri Jan  3 02:05:07 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: Makefile.am, language.c:

	Removed language.c - won't be needed anymore. See you, true follower
	of sent by Mikulas, you served us good. *sniff* 

Fri Jan  3 02:04:15 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: libintl.c, libintl.h:

	Introduced language<->name and language<->iso639 lookup table.
	Language is now a number.  

Fri Jan  3 01:25:48 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, intl/gettext/Makefile.in, intl/gettext/libintl.c,
	intl/gettext/libintl.h:

	Re-enabled gettext interface. Added libintl.c. Introduced concurrent
	set_language() and current_language; also system_language.  

Fri Jan  3 01:02:16 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: intl/language.c, intl/language.h, viewer/dump/dump.c:

	get_english_translation() -> N_().  

Fri Jan  3 00:51:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/libintl.h:

	Withdrawn gettext's _(),N_() declarations for now.  

Fri Jan  3 00:40:24 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/language.h:

	Tiny compilation fix - force to make use of _y_.  

Fri Jan  3 00:38:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c,
	protocol/auth/dialogs.c, dialogs/mime.c, dialogs/options.c,
	document/download.c, document/session.c, globhist/dialogs.c,
	intl/language.h, mime/dialogs.c, osdep/os_dep.c, osdep/osdep.c,
	protocol/url.c, protocol/user.c, sched/connection.c, sched/sched.c,
	scripting/lua/core.c, viewer/text/view.c:

	Use directly strings in the source instead of macros and magic
	translations system. We don't use gettext() yet. Right now, you will
	see only English around (will be fixed soon, please stand by). The
	base of the transition was generated by witekfl's script. Some
	special case manual corrections were inspired by Fabio's patch.  

Fri Jan  3 00:13:12 2003  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Initialize gettext. You can already hear distant drums rolling
	(warmed up by Jonas).  

Fri Jan  3 00:04:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: config/dialogs.c, dialogs/auth.c, dialogs/document.c,
	dialogs/info.c, document/download.c, document/session.c,
	protocol/auth/dialogs.c, viewer/text/view.c:

	GT(N_(x),y) -> GT(x,y). Start holding your breah.  

Fri Jan  3 00:02:26 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/menu.c, bfu/msgbox.c, bfu/text.c, config/dialogs.c,
	dialogs/auth.c, dialogs/document.c, protocol/auth/dialogs.c,
	dialogs/info.c, document/download.c, document/session.c,
	intl/language.h, viewer/text/view.c:

	GT() -> _() 

Thu Jan  2 23:59:51 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/download.c, document/session.c,
	mime/dialogs.c, protocol/auth/dialogs.c, globhist/dialogs.c,
	intl/language.h, osdep/os_dep.c, osdep/osdep.c,
	scripting/lua/core.c, protocol/url.c, protocol/user.c,
	sched/connection.c, sched/sched.c, viewer/text/view.c:

	_() -> N_() 

Thu Jan  2 23:38:53 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: Makefile.in, libintl.h:

	Added interface between ELinks and gettext - libintl.h.  

Thu Jan  2 19:36:55 2003  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.base, src/cookies/Makefile.am:

	Generic handling of test dependencies (src/util/). Cookie test
	building updated to use it. This also means tests are only build
	recursively when invoking 'make check' 

Thu Jan  2 18:39:52 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Dependency and compilator invocation fixes. Now gettext actually
	compiles ;-).  

Thu Jan  2 18:31:44 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/gettext.m4:

	_REALLY_ always use our own gettext implementation, never the system
	one.  

Thu Jan  2 18:31:05 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, autogen.sh:

	Put a notice at the top of acinclude.m4. Create dummy acinclude.m4
	in build tree in order to force aclocal/autoconf/... call when
	acinclude.m4 was modified (stupid automake's broken dependecies).
	Destroy acinclude.m4 upon make distclean.  

Thu Jan  2 18:19:33 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Automatically regenerate acinclude.m4.  

Thu Jan  2 18:09:42 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/gettext.m4, src/intl/gettext/TODO:

	Always use our own gettext implementation, never the system one.  

Thu Jan  2 17:57:41 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	intl/gettext/libintl.a -> @INTLLIBS@ 

Thu Jan  2 17:57:28 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/Makefile.in:

	Fix automatic Makefile rebuilding rule to depend on config.status
	with correct path.  

Thu Jan  2 17:56:36 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/TODO:

	Force to always use our own gettext.  

Thu Jan  2 17:52:34 2003  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in:

	Set LOCALEDIR macro in config.h.  

Thu Jan  2 17:50:18 2003  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	Link ELinks against intl/gettext/libintl.a.  

Thu Jan  2 17:41:28 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Connected po/ to the build system.  

Thu Jan  2 16:31:40 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/intl/Makefile.am, src/intl/gettext/Makefile.in,
	src/intl/gettext/TODO, src/intl/gettext/VERSION,
	src/intl/gettext/bindtextdom.c, src/intl/gettext/config.charset,
	src/intl/gettext/dcgettext.c, src/intl/gettext/dcigettext.c,
	src/intl/gettext/dcngettext.c, src/intl/gettext/dgettext.c,
	src/intl/gettext/dngettext.c, src/intl/gettext/explodename.c,
	src/intl/gettext/finddomain.c, src/intl/gettext/gettext.c,
	src/intl/gettext/gettext.h, src/intl/gettext/gettextP.h,
	src/intl/gettext/hash-string.h, src/intl/gettext/intl-compat.c,
	src/intl/gettext/l10nflist.c, src/intl/gettext/libgettext.h,
	src/intl/gettext/libgnuintl.h, src/intl/gettext/loadinfo.h,
	src/intl/gettext/loadmsgcat.c, src/intl/gettext/localcharset.c,
	src/intl/gettext/locale.alias, src/intl/gettext/localealias.c,
	src/intl/gettext/ngettext.c, src/intl/gettext/plural.c,
	src/intl/gettext/plural.y, src/intl/gettext/ref-add.sin,
	src/intl/gettext/ref-del.sin, src/intl/gettext/textdomain.c:

	Gettext sources included in the ELinks source tree (and build
	system). Not used anywhere yet.  

Thu Jan  2 16:26:32 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/.cvsignore:

	Makefile.in shouldn't be ignored here.  

Thu Jan  2 16:24:50 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/gettext.m4:

	intl/ -> src/intl/gettext/ 

Thu Jan  2 16:17:21 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Distribute ABOUT_NLS.  

Thu Jan  2 16:10:13 2003  Petr Baudis <pasky@ucw.cz>:

	* config.guess, config.sub, config/config.guess, config/config.sub:

	config.guess and config.sub re-introduced. Gettext wants them.  

Thu Jan  2 16:02:44 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Added some gettext calls.  

Thu Jan  2 15:51:08 2003  Petr Baudis <pasky@ucw.cz>:

	* config/m4/: codeset.m4, gettext.m4, glibc21.m4, iconv.m4,
	isc-posix.m4, lcmessage.m4, progtest.m4:

	Added gettext's m4s.  

Thu Jan  2 15:45:38 2003  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, autogen.sh:

	autogen.sh now also creates acinclude.m4 from m4/*.m4 and removes
	config.cache.  

Thu Jan  2 15:34:38 2003  Petr Baudis <pasky@ucw.cz>:

	* src/intl/gettext/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jan  2 15:33:49 2003  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Distribute content of m4/.  

Thu Jan  2 15:32:59 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: Makefile.in, Makefile.in.in, POTFILES.in:

	Added some base for po-files infrastructure.  

Thu Jan  2 15:07:43 2003  Petr Baudis <pasky@ucw.cz>:

	* ABOUT-NLS:

	Added gettext's ABOUT-NLS.  

Thu Jan  2 15:01:35 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Removed arekm's record from AUTHORS - it contained only gettext
	support, which is not used anymore and now with its reintroduction
	(completely new), it could be misleading.  

Thu Jan  2 14:34:18 2003  Petr Baudis <pasky@ucw.cz>:

	* po/: .cvsignore, .vimrc:

	Added fairies.  

Thu Jan  2 12:28:45 2003  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Document source colorization moved from ELinks TODO to ELusive TODO.
	Added link to ELusive TODO to ELinks TODO.  

Thu Jan  2 09:40:17 2003  Laurent Monin <zas@norz.org>:

	* TODO:

	Source colorization added.  

Thu Jan  2 05:37:42 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inpfield.c, bookmarks/dialogs.c, config/dialogs.c,
	config/opttypes.c, dialogs/auth.c, dialogs/document.c,
	dialogs/edit.c, dialogs/info.c, dialogs/menu.c, dialogs/mime.c,
	dialogs/options.c, document/download.c, document/session.c,
	globhist/dialogs.c, intl/language.h, mime/dialogs.c,
	protocol/auth/dialogs.c, osdep/os_dep.c, osdep/osdep.c,
	protocol/url.c, protocol/user.c, sched/connection.c, sched/sched.c,
	scripting/lua/core.c, viewer/text/view.c:

	Second step in the gettext transition - use a _() macro instead of
	the TEXT() macro. Patch by witekfl (no-hotkey updates by me).  

Thu Jan  2 05:25:12 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/README, intl/belarusian.lng, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/croatian.lng,
	intl/czech.lng, intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bfu/inphist.c, src/bfu/menu.c, src/bfu/menu.h,
	src/dialogs/menu.c, src/dialogs/mime.c, src/dialogs/options.c,
	src/document/html/parser.c, src/mime/dialogs.c, src/osdep/os_dep.c,
	src/osdep/os_dep.h, src/osdep/osdep.c, src/osdep/osdep.h,
	src/viewer/text/view.c:

	Removed separate hotkey translations. Now hotkeys are directly in
	menu item translations, indicated by a tilde (~) preceding the
	hotkey. Should make things easier for translators, also gettext
	transition preparation step.  

Wed Jan  1 20:42:45 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: belarusian.lng, brazilian_portuguese.lng, bulgarian.lng,
	catalan.lng, croatian.lng, czech.lng, danish.lng, dutch.lng,
	english.lng, estonian.lng, finnish.lng, french.lng, galician.lng,
	german.lng, greek.lng, hungarian.lng, icelandic.lng,
	indonesian.lng, italian.lng, lithuanian.lng, norwegian.lng,
	polish.lng, portuguese.lng, romanian.lng, russian.lng, slovak.lng,
	spanish.lng, swedish.lng, turkish.lng, ukrainian.lng:

	Removed unused hotkeys.  

Wed Jan  1 20:36:08 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/group.c,
	bfu/menu.c, bfu/msgbox.c, bfu/text.c, config/dialogs.c,
	dialogs/auth.c, dialogs/document.c, dialogs/info.c,
	document/download.c, document/session.c, intl/language.h,
	protocol/auth/dialogs.c, viewer/text/view.c:

	_() -> GT() - first step in the gettext migration. Patch by witekfl.  

Wed Jan  1 20:30:33 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, dialogs/info.c, dialogs/menu.c,
	cache/cache.c, document/cache.c, document/download.c,
	document/download.h, document/history.c, document/location.h,
	document/session.c, document/session.h, lowlevel/Makefile.am,
	lowlevel/connect.c, lowlevel/connect.h, lowlevel/sched.c,
	lowlevel/sched.h, protocol/file.c, protocol/file.h,
	protocol/finger.c, protocol/finger.h, protocol/ftp.c,
	protocol/ftp.h, protocol/url.c, protocol/url.h,
	protocol/file/file.c, protocol/file/file.h, protocol/ftp/ftp.c,
	protocol/ftp/ftp.h, scripting/lua/hooks.h, protocol/http/http.c,
	protocol/http/http.h, protocol/http/https.c, protocol/http/https.h,
	sched/Makefile.am, sched/connection.c, sched/connection.h,
	sched/sched.c, sched/sched.h, ssl/connect.c, ssl/connect.h,
	viewer/dump/dump.c, viewer/dump/dump.h:

	Moved lowlevel/sched.* to sched/sched.*.  

Wed Jan  1 19:54:44 2003  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Updated URLs for PLD's RPMs.  

Wed Jan  1 18:19:50 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, config/options.c, dialogs/document.c,
	dialogs/menu.c, document/Makefile.am, document/history.c,
	document/location.h, document/session.c, document/session.h,
	document/view.c, document/view.h, document/vs.c, document/vs.h,
	document/html/parser.c, document/html/renderer.c,
	document/html/renderer.h, lowlevel/terminal.c,
	scripting/lua/core.c, viewer/dump/dump.c, viewer/text/Makefile.am,
	viewer/text/view.c, viewer/text/view.h, viewer/text/vs.c,
	viewer/text/vs.h:

	Moved document/view.* and document/vs.* to viewer/text/view.* and
	viewer/text/vs.*.  

Wed Jan  1 17:48:45 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, main.c, document/Makefile.am, document/dump.c,
	document/dump.h, document/view.c, viewer/dump/Makefile.am,
	viewer/dump/dump.c, viewer/dump/dump.h:

	Moved document/dump.* to viewer/dump/dump.*.  

Wed Jan  1 17:42:31 2003  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Added the new dirs (sched, viewer, viewer/dump, viewer/text) to the
	build system.  

Wed Jan  1 17:40:49 2003  Petr Baudis <pasky@ucw.cz>:

	* src/viewer/text/Makefile.am:

	There're no real sources yet, Luke.  

Wed Jan  1 17:33:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/: sched/.cvsignore, sched/.vimrc, sched/Makefile.am,
	viewer/.cvsignore, viewer/.vimrc, viewer/Makefile.am,
	viewer/dump/.cvsignore, viewer/dump/.vimrc,
	viewer/dump/Makefile.am, viewer/text/.cvsignore,
	viewer/text/.vimrc, viewer/text/Makefile.am:

	Populated with fairies.  

Wed Jan  1 17:23:34 2003  Jonas Fonseca <fonseca@diku.dk>:

	* configure.in, doc/Makefile.am:

	Build updates for moving DocBook files to doc/book 

Wed Jan  1 17:13:53 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/belarusian.lng:

	Belarusian translation by Yevgeny Gromov <yevgeny@tut.by>.  

Wed Jan  1 14:01:30 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Added else to clarify things a little. Doesn't matter factually.
	Thanks, Miciah.  

Wed Jan  1 01:58:39 2003  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, kbdbind.c, kbdbind.h:

	Show (it's togglable) human-readable captions of keybindings and
	keymaps in the keybinding manager. Patch by Jonas Fonseca and me.  

Wed Jan  1 01:26:55 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/german.lng:

	German translation update (huge ;) by Josef 'Jupp' Schugt
	<jupp@gmx.de>.  

Wed Jan  1 01:21:45 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/index.txt:

	Belarusian translation by Yevgeny Gromov <yevgeny@tut.by>.  

Wed Jan  1 01:21:01 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/belarusian.lng:

	file belarusian.lng was initially added on branch REL_0_4.  

Wed Jan  1 01:17:27 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, english.lng,
	estonian.lng, finnish.lng, french.lng, galician.lng, german.lng,
	greek.lng, hungarian.lng, icelandic.lng, indonesian.lng,
	italian.lng, lithuanian.lng, norwegian.lng, polish.lng,
	portuguese.lng, romanian.lng, slovak.lng, spanish.lng, swedish.lng,
	turkish.lng:

	Copyright notice updates. Mainly 2002 -> 2003 in my line, but some
	other tiny corrections in some translations.  

Wed Jan  1 01:01:30 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/http/http.c:

	Here is a patch for elinks (cvs version) ot make it more POSIX 
	compliant.  src/protocol/http/http.c uses PIPE_BUF without including 
	limits.h.  This breaks compilation with the diet libc 
	(http://www.fefe.de/dietlibc/).  
	
	Patch by Felix von Leitner.  

Wed Jan  1 00:52:30 2003  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng:

	Partial spanish translation update by David Mediavilla.  

Wed Jan  1 00:51:14 2003  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated David Mediavilla's email addy.  

Tue Dec 31 01:50:55 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/.cvsignore:

	Added tiny fairie.  

Tue Dec 31 01:49:39 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Added ELusive renderer to the build system.  

Tue Dec 31 01:08:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Shit.  

Tue Dec 31 01:07:28 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c:

	Build ELusive layouter.  

Mon Dec 30 17:01:03 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/Makefile.am:

	Generic header added.  

Mon Dec 30 16:14:45 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/: Makefile.am, book/Makefile.am:

	Fixes for last commit: rename all -> alldocs in
	doc/manual/Makefile.am and typo in doc/Makefile.am 

Mon Dec 30 15:57:00 2002  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, configure.in, doc/Makefile.am, doc/book/Makefile.am:

	Manual added to build system. Small fixes when doing html doc
	building so css is only installed when docs where succesfully made.  

Mon Dec 30 15:51:23 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: authors.xml, bookmarks.xml, configuration.xml,
	fdl.xml, installation.xml, introduction.xml, mailcap.xml,
	manual.xml, mime.xml, misc.xml, preface.xml, revision.xml,
	sample-configfile.xml, wordlist.xml:

	<?xml version="1.0" encoding="ISO-8859-1"?> added to all files.
	Fixes xmlto encoding errors. We should investigate using UTF-8 and
	character entities instead. Also moving own defined entities up
	before include entities. This fixes internal links when using xmlto.  

Mon Dec 30 03:51:43 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: .cvsignore, TODO, authors.xml, bookmarks.xml,
	configuration.xml, fdl.xml, installation.xml, introduction.xml,
	mailcap.xml, manual.xml, mime.xml, misc.xml, options-reference.xml,
	sample-configfile.xml, sample-configuration.xml, style.css,
	wordlist.xml:

	Last files added. Made some codingstyle updates. Guidelines needs to
	be written. CSS need to be rewritten. Use wordlist.xml for
	references to acronym and explanations.  

Sun Dec 29 13:40:28 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am:

	Added ELusive compilation to the general infrastructure.  

Sun Dec 29 10:57:29 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: Makefile.am, sample-configuration.xml, style.css:

		Various manual tilities.  

Sun Dec 29 10:53:33 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: TODO, VERSION, bookmarks.xml, configuration.xml,
	fdl.xml, mailcap.xml, misc.xml, preface.xml, revision.xml:

	The first few chapters. More to come.  

Sat Dec 28 19:49:20 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/book/: README, TODO:

	A small step for the manual a big step for ELinks documentation. ;) 

Thu Dec 26 21:47:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, dialogs/mime.c, lowlevel/kbd.c, lowlevel/sched.c,
	lowlevel/select.c, lowlevel/terminal.c, mime/dialogs.c,
	protocol/file.c, protocol/file/file.c, protocol/http/http.c:

	Some more destatification ;-).  

Thu Dec 26 21:26:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Massive HTTP uncompression routine rewrite, patch by witekfl,
	polished and slightly extended by me. This should hopefully fix
	number of arcane uncompression bugs.  

Thu Dec 26 18:04:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Hmm, that open_encoded() move didn't work out.  

Thu Dec 26 12:26:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Use PIPE_BUF instead of 4096. I hope PIPE_BUF is everywhere ;-).  

Thu Dec 26 12:20:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Moved encoded stream initialization before the loop - this could fix
	some weird bugs when reading compressed pages.  

Thu Dec 26 03:11:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed unintentional aborting of some downloads - now abort really
	only when pressing the abort button.  

Thu Dec 26 03:06:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: download.c, history.c, session.c, view.c,
	html/parser.c, html/renderer.c, html/tables.c:

	Removed some nonsense inlines.  

Tue Dec 24 13:38:56 2002  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.conf.5:

	Small fix in EXAMPLES. < and > should not be 'escaped'.  

Tue Dec 24 10:33:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Fixed one little memory leak. Was almost unnoticable hopefully.  

Tue Dec 24 09:52:24 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Downloads resuming support.  

Tue Dec 24 01:39:48 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/polish.lng:

	Polish translation update (partial) by Jakub Bogusz.  

Tue Dec 24 01:28:41 2002  Jonas Fonseca <fonseca@diku.dk>:

	* Makefile.am, elinks.1, elinks.conf.5, elinkskeys.5.in:

	Added elinks.conf man page and references to it. Also a small update
	to elinks man page with descriptions of --long-help and
	--config-help.  

Tue Dec 24 00:26:40 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	Also print descriptions for option trees when doing --config-help.  

Tue Dec 24 00:23:51 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/document/download.c:

	Just another links -> einks change.  

Tue Dec 24 00:18:14 2002  Jonas Fonseca <fonseca@diku.dk>:

	* elinks.conf.5:

	file elinks.conf.5 was initially added on branch REL_0_4.  

Tue Dec 24 00:05:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, document/download.h, document/view.c,
	util/file.c:

	Let expand_tilde() and get_unique_name() always return newly
	allocated string => let create_download_file() return real file name
	=> use that file name as down->file => fix a bug with timestamps not
	being set properly on the downloaded files reported by Peter Wang
	plus a handful of similiar hidden bugs.  

Mon Dec 23 21:36:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.h:

	Attempt to fix cygwin compilation failure.  

Sun Dec 22 18:14:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/TODO:

	Moved most of the stuff from document/html/TODO to elusive/README,
	extended and fixed.  

Sun Dec 22 17:54:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	New "allow dark colors on black background" implementation,
	re-implementing support for other backgrounds as well. Please
	comment and improve, maybe all the choices aren't best, and a lot of
	them aren't certainly what are you used to.  

Sun Dec 22 16:34:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Fixed color table comment ;-).  

Sun Dec 22 16:29:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Add folders at the _bottom_ of the list, not at the top. Also move
	box->sel properly to the newly added folder/bookmark. Fixes problem
	reported by <muehlenhoff@gmx.de>.  

Sun Dec 22 14:32:18 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/bulgarian.lng:

	Bulgarian translation update.  

Sun Dec 22 11:47:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed selecting of the first listbox item by mouse, reported by
	Jonas. When you click at that +/- thing, the folder is (un)expanded.
	Idea by Jonas and Links-2.x people.  

Sun Dec 22 10:23:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Some of my experiments with bgcolor approximation adjusting saved
	for further reference (commented out) 

Sun Dec 22 09:52:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Agitation.  

Sun Dec 22 09:47:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: renderer.c, tables.c:

	More table cells bgcolors rendering fixes, we get rid of a lot of
	the color stains. But we won't get rid of some of them and this is
	probably not going to change anymore, since this would probably
	require a big rewrite :-( - so that one will come with the new html
	engine already.  

Sun Dec 22 00:05:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Oops - this leaked from the previous commit.  

Sun Dec 22 00:04:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser.h, renderer.c, renderer.h:

	Fixes in support for taking of background colors from the document.
	Now we should be almost perfect in this area, preventing a lot of
	black stains all around. Note that there's still a problem with cell
	colors leaking all around and too bright colors on white background
	(will fix these tommorow). Obviously this changes are visible only
	if you set document.colors.use_document_colors = 2 (it'll be default
	after the previously mentioned issues will be fixed). Have fun - I
	think with these changes, a lot of sites start to look damn cool
	with ELinks! :-) 

Sat Dec 21 22:26:25 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/polish.lng:

	Polish translation update, patch by witekfl.  

Sat Dec 21 20:52:40 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Alloc failures test, minor optim. tidy up.  

Sat Dec 21 20:21:07 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Minor fix: stracpy(NULL) call.  

Sat Dec 21 19:58:20 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Minor tidyup.  

Sat Dec 21 19:47:11 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Static + inline + minor things.  

Sat Dec 21 19:22:42 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	char -> unsigned char.  

Sat Dec 21 19:19:56 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Static + inline + tidy up + unsigned char + alloc tests + minor
	stuff.  

Sat Dec 21 19:00:41 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: mime.c, mime.h:

	Static + inline.  

Sat Dec 21 18:51:22 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/mailcap.c:

	Tidy up. One very-low-risk buffer overflow and one potential memleak
	were fixed. Bit fields were replaced by int type, since bit fields
	are not fully portable. Many minor optimizations.  

Sat Dec 21 18:05:55 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Minor staticfication.  

Sat Dec 21 18:03:21 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Static + inline + tidy up.  

Sat Dec 21 17:00:21 2002  Jonas Fonseca <fonseca@diku.dk>:

	* intl/danish.lng:

	Minor danish update.  

Sat Dec 21 13:23:16 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/: options.c, opttypes.c:

	Added option --config-help which is mostly intended for generating
	docs about the configuration options. The *-help printing has
	somewhat been made more generic. This includes pretty printing where
	several command line args can 'share' the same caption/description.
	Changed description of deprecated options to 'scare' users from
	using it.  

Sat Dec 21 02:59:22 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/portuguese.lng:

	Portuguese translation updates, patch by Andre.  

Sat Dec 21 02:56:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c:

	Night of hacking output: full support for user-specified background,
	instead of the bastardized unusable thing we had before; that should
	make some people happy. And it wasn't that simple as I supposed :-(.
	Also introduced some support for taking background color from the
	document, but it's weird yet (I'm forgetting to update something, I
	suspect) - I will investigate that later. Just keep
	document.colors.use_document_colors at 1 and you should be safe. But
	it looks damn cool anyway, maybe I'll change the default to follow
	document's background as well when it'll be done and ready ;-).  

Sat Dec 21 01:06:17 2002  Laurent Monin <zas@norz.org>:

	* src/util/lists.h:

	Readibility was improved (i hope).  

Fri Dec 20 23:31:47 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/options.c, src/dialogs/options.c,
	src/lowlevel/terminal.c:

	Transparency support (ie. transparent xterms or xterms with
	background colors (ok, not exactly xterms, but you get the idea ;)),
	patch by Tom Lear <tom@trap.mtview.ca.us>.  

Fri Dec 20 23:11:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/dialog.h, config/options.c,
	dialogs/options.c:

	Terminal options changed in their dialog are now properly marked as
	touched and thus properly saved with config.saving_style=3. Added
	Save button to the terminal options dialog. Thanks to Alexey Tourbin
	<at@turbinal.org> for the initial impulse ;-).  

Fri Dec 20 22:14:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed possible problem with NULL stracpy() when trying to
	download-image, reported by Jonas.  

Fri Dec 20 21:58:30 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/bm-to-elinks-bookmarks.lua:

	Lua script to convert Lua's bookmarks to ELinks' file format,
	contributed by Peter Wang.  

Fri Dec 20 21:58:16 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/bm-to-elinks-bookmarks.lua:

	file bm-to-elinks-bookmarks.lua was initially added on branch
	REL_0_4.  

Fri Dec 20 21:52:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Don't show *lua-function* binding in the manager. Thanks Peter Wang
	for the idea.  

Fri Dec 20 21:46:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h:

	Fixed problem with empty action bind commands being written when
	keybinding is removed (reported by Peter Wang).  

Fri Dec 20 17:39:59 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/: czech.lng, english.lng:

	Attempt to clarify error messages triggered by attempts to edit
	non-(options,keybindings). Might be helpful if you don't know that
	space unrolls the tree.  

Fri Dec 20 16:09:15 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	A memleak introduced by last patch was fixed. Triggered by Bookmarks
	file format option 1 -> 0.  

Fri Dec 20 15:26:28 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/: bookmarks.c, backend/default.c, backend/xbel.c:

	Fixes and cleanup. Fabio please verify that stuff.  

Fri Dec 20 10:40:23 2002  Laurent Monin <zas@norz.org>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, estonian.lng,
	finnish.lng, galician.lng, german.lng, greek.lng, hungarian.lng,
	icelandic.lng, indonesian.lng, italian.lng, lithuanian.lng,
	norwegian.lng, polish.lng, portuguese.lng, romanian.lng,
	russian.lng, slovak.lng, spanish.lng, swedish.lng, turkish.lng,
	ukrainian.lng:

	Ooops ;) 

Fri Dec 20 09:15:01 2002  Laurent Monin <zas@norz.org>:

	* intl/english.lng, intl/french.lng, src/dialogs/menu.c:

	Some translations were fixed and updated. T_HK_KEYBINDING_MANAGER
	was introduced.  

Thu Dec 19 15:35:45 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/elinks.spec.in:

	Updated RPM's contrib/elinks.spec (fixed documentation including),
	patch by Bennett Todd <bet@rahul.net>.  

Thu Dec 19 15:33:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Move the cursor to the active listbox item; makes things much easier
	for blind users, idea by Dave Mielke <dave@mielke.cc>.  

Thu Dec 19 12:17:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/croatian.lng,
	intl/czech.lng, intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c:

	Ignore OPT_ALIAS when traversing a tree when writing stuff (I mean,
	configuration ;) to disk. Fixes "set config_saving_style = " bug
	reported by Jonas.  

Thu Dec 19 09:36:59 2002  Jonas Fonseca <fonseca@diku.dk>:

	* intl/danish.lng:

	Translation for new keybinding and option manager messages.  

Wed Dec 18 22:54:07 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre0.CVS ;p 

Wed Dec 18 21:48:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Added some tiny notice about stat->data and non-zero start and
	struct download mess ;-).  

Wed Dec 18 21:30:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Fixed yet another bug causing random segfaults (if no-caching is
	allowed and conditions are really weird ;). Patch by witekfl.  

Wed Dec 18 21:23:31 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed stale TODO item, thanks Jonas.  

Wed Dec 18 21:23:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Options improvements ported from REL_0_4 (massive fixes of
	descriptions/captions, show captions in bookmarks manager).  

Wed Dec 18 16:31:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Fixed memory leak upon Lua error.  

Wed Dec 18 16:30:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Try to fix not caching stuff rewritten by lua.  

Wed Dec 18 16:25:09 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, config/urlhist.c, config/urlhist.h:

	We now only save history if modified (history_dirty mecanism).  

Wed Dec 18 16:17:02 2002  Laurent Monin <zas@norz.org>:

	* src/: config/urlhist.c, config/urlhist.h, bfu/inphist.c:

	We now only save history if modified (history_dirty mecanism).  

Wed Dec 18 15:30:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c, opttypes.c:

	Initialize capt and change_hook properly for autocreated options.
	Fixes subtle bug causing segfault when we modify autocreated option
	(reported by Jose). Also fixed hidden bug in tree_add()'s box_item
	condition.  

Wed Dec 18 13:51:13 2002  Laurent Monin <zas@norz.org>:

	* src/util/memdebug.c:

	A new memory debugger optionnal feature: log all (de-)allocations to
	stderr (huge and slow). Define LOG_MEMORY_ALLOC to try it.  

Wed Dec 18 12:07:07 2002  Laurent Monin <zas@norz.org>:

	* src/globhist/: globhist.c, globhist.h:

	We now saved globhist only when needed (through globhist_dirty
	mecanism). Staticfication.  

Wed Dec 18 11:55:46 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Ooops, COOKIES_DEBUG is now undefined ;).  

Wed Dec 18 11:35:05 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Cookies are now saved only if some change occured (cookies_dirty).  

Wed Dec 18 10:52:21 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Inline some small functions.  

Wed Dec 18 00:38:58 2002  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Static + inline.  

Tue Dec 17 23:58:43 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/dialogs/document.c:

	Show a message in header info box if there's no header info to show
	instead of an empty box. Translations++.  

Tue Dec 17 23:26:09 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated and fixed.  

Tue Dec 17 23:09:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Fixed problem with rendering of tables with slightly malformed HTML
	code (ie. google's labs sets problem reported by Jose).  

Tue Dec 17 21:45:42 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS, TODO:

	Removed some stale TODO items.  

Tue Dec 17 21:41:11 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.5pre0 

Tue Dec 17 21:32:27 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/7bitrepl.lnx, src/intl/uni_7b.inc:

	Transliterate u-breves as U/u instead of W/w. David Mediavilla won't
	like me now ;-).  

Tue Dec 17 21:27:20 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, Unicode/7bitrepl.lnx, src/intl/uni_7b.inc:

	Updated 7bit transcripts of some esperanto chars. Patch by David
	Mediavilla.  

Tue Dec 17 21:22:21 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/7bitrepl.lnx, src/intl/uni_7b.inc:

	Updated table with 7bit transcriptions of unicode characters from
	lynx-2.8.5dev11.  

Tue Dec 17 21:00:45 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/8859_10.cp, Unicode/8859_14.cp, Unicode/8859_3.cp,
	Unicode/8859_6.cp, Unicode/8859_8.cp, Unicode/cp1252.cp,
	Unicode/cp1256.cp, Unicode/index.txt, Unicode/koi8_ru.cp,
	src/intl/codepage.h, src/intl/codepage.inc:

	Added support for charsets iso-8859-(3,6,8,10,14), cp1252, cp1256
	and koi8_ru. Ported from Links-2.1pre7.  

Tue Dec 17 15:17:22 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/config/kbdbind.c:

	Support for adding of keybindings thru keybinding manager.  

Tue Dec 17 13:48:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	XBEL segfault introduced by the last changes fixed, patch by Fabio.  

Tue Dec 17 13:47:36 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng:

	Italian translation update, patch by Fabio.  

Tue Dec 17 13:29:15 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Re-ordering of items in dialog.  

Tue Dec 17 12:38:35 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	Static + inline + tidyup.  

Tue Dec 17 12:20:11 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Static + inline + tidyup.  

Tue Dec 17 12:07:37 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	Static + inline + tidyup.  

Tue Dec 17 11:50:06 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/kbd.c:

	Static + inline + tidyup.  

Tue Dec 17 11:31:50 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Minor cleanup.  

Tue Dec 17 11:10:37 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Tidy up.  

Mon Dec 16 23:58:53 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Mon Dec 16 23:53:04 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Static + inline.  

Mon Dec 16 23:21:35 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Static + inline.  

Mon Dec 16 22:59:29 2002  Laurent Monin <zas@norz.org>:

	* src/document/options.c:

	Inline.  

Mon Dec 16 22:56:35 2002  Laurent Monin <zas@norz.org>:

	* src/document/history.c:

	Static + inline + minor tidyup.  

Mon Dec 16 22:52:48 2002  Laurent Monin <zas@norz.org>:

	* src/document/dump.c:

	Static.  

Mon Dec 16 22:47:54 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	Static + inline. Minor cleanup. We should move tp_* functions from
	here to somewhere.  

Mon Dec 16 22:29:03 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Staticfication.  

Mon Dec 16 15:07:31 2002  Laurent Monin <zas@norz.org>:

	* intl/: README, find_unused_translations.sh:

	README was updated and old ./find_unused_translations.sh was
	removed.  

Mon Dec 16 15:06:18 2002  Laurent Monin <zas@norz.org>:

	* intl/: sync_vs_source.pl, sync_vs_source.sh:

	New scripts for source/translations synchronisation. One use perl,
	sorry. Later these scripts will become one.  

Mon Dec 16 10:08:25 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	That script is still buggy, i desactivate it until new functionnal
	version.  

Sun Dec 15 22:49:09 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/config/kbdbind.c, src/config/kbdbind.h:

	Removed info button from the keybinding manager, added delte button
	to the keybinding manager.  

Sun Dec 15 15:05:47 2002  Laurent Monin <zas@norz.org>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, english.lng,
	estonian.lng, finnish.lng, french.lng, galician.lng, german.lng,
	greek.lng, hungarian.lng, icelandic.lng, indonesian.lng,
	italian.lng, lithuanian.lng, norwegian.lng, polish.lng,
	portuguese.lng, romanian.lng, russian.lng, slovak.lng, spanish.lng,
	swedish.lng, turkish.lng, ukrainian.lng:

	Last patch broke compilation. Fixed.  

Sun Dec 15 14:26:29 2002  Laurent Monin <zas@norz.org>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, english.lng,
	estonian.lng, finnish.lng, french.lng, galician.lng, german.lng,
	greek.lng, hungarian.lng, icelandic.lng, indonesian.lng,
	italian.lng, lithuanian.lng, norwegian.lng, polish.lng,
	portuguese.lng, romanian.lng, russian.lng, slovak.lng, spanish.lng,
	swedish.lng, turkish.lng, ukrainian.lng:

	Unused entries were commented.  

Sun Dec 15 11:32:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Spelling fixes by Miciah.  

Sun Dec 15 11:23:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Removed one useless include, thanks Miciah.  

Sun Dec 15 02:27:49 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	The Shorter Fix of the Night ;) 

Sun Dec 15 02:18:35 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	Polished by Miciah.  

Sun Dec 15 02:14:04 2002  Laurent Monin <zas@norz.org>:

	* contrib/lua/hooks.lua.in:

	Some dumb/smart prefixes for babelfish. b, bb word, bb_fr_en french,
	bb_en_fr english. Feel free to add some according to your needs.  

Sun Dec 15 01:51:21 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	A cache handling issue was causing segfaults. Fixed. (i hope...) 

Sun Dec 15 01:16:13 2002  Laurent Monin <zas@norz.org>:

	* intl/: README, find_unused_translations.sh:

	patch option now only generates one patch against english.lng, apply
	and run ./synclang and ./gen-intl. README document was updated.  

Sun Dec 15 00:48:59 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	Typo and bug fix.  

Sun Dec 15 00:38:10 2002  Laurent Monin <zas@norz.org>:

	* intl/: find_unused_translations.sh, gen-intl, synclang.awk:

	Support for comment by adding # before T_...,
	find_unused_translations.sh simple now generate a unique patch
	against english.lng. Just apply to comment unused entries, then run
	./synclang and ./gen-intl.  

Sun Dec 15 00:02:01 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/config/options.c:

	New command line option (-long-help) added. This will print the
	(old) detailed help usage. -?, -h and -help now prints a brief help
	usage based on option captions.  

Sat Dec 14 18:36:50 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Static + inline + strtoul errno check + char -> unsigned char 

Sat Dec 14 18:17:41 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/colors.c:

	Static + inline + errno test.  

Sat Dec 14 18:11:10 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Staticfication, inlining and cleanups.  

Sat Dec 14 17:57:01 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Short functions were inlined.  

Sat Dec 14 17:44:17 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Staticfication and cleanups.  

Sat Dec 14 17:11:40 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Cleanup, use of unsigned char vs char was generalized. strtoul()
	calls are now checked for errors.  

Sat Dec 14 16:21:26 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, config/options.h, protocol/mailcap.c:

	A caption field was added to the option struct. Option macros has
	been changed to deal with this. Captions has been written for all
	options including command line options which will later be used to
	introduce a brief help printing (-h).  
	
	Note: Captions for option aliases and "_template_" should be NULL.  

Sat Dec 14 15:22:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Changed structure of the tree shown in keybinding manager. Now it's
	action->keymap->key, named properly. Action is by default enfolded
	while keymap is by default unrolled. Thanks to #ELinks crew for the
	ideas.  

Sat Dec 14 12:57:24 2002  Laurent Monin <zas@norz.org>:

	* src/config/dialogs.c:

	More memory allocation checks. Cleanup.  

Sat Dec 14 12:07:35 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Sat Dec 14 11:58:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed alphabetic order of the elements table. Fixes DIV bug reported
	by Alexey Fayans <shadow@peterlink.ru>.  

Sat Dec 14 11:42:15 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	Script was improved (a lot) by Miciah. Use patch option to generate
	patches.  

Sat Dec 14 11:33:49 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	Minor tidy up.  

Sat Dec 14 10:07:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/align.h:

	Reverted bogus patch removing the required COL() macro.  

Sat Dec 14 09:45:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Added Keybinding manager item to the Setup menu. Added keyboard
	shortcuts to the manager items.  

Sat Dec 14 00:42:08 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	Minor cleanup.  

Fri Dec 13 23:31:57 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/config/dialogs.h, src/config/kbdbind.c,
	src/config/kbdbind.h, src/document/view.c:

	Introduced very simple keybinding manager (and keyboard action
	keybinding-manager, by default bound to 'k').  

Fri Dec 13 23:09:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Each keybinding is now paired with a listbox_item thing. First step
	for the keybinding manager.  

Fri Dec 13 22:43:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed order of options listed in -help output.  

Fri Dec 13 22:00:58 2002  Laurent Monin <zas@norz.org>:

	* intl/find_unused_translations.sh:

	New script to maintain translations: unused entries finder. Need
	improvments.  

Fri Dec 13 21:02:20 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/dialogs/menu.c:

	A hotkey for options manager was added.  

Fri Dec 13 20:17:12 2002  Jonas Fonseca <fonseca@diku.dk>:

	* contrib/elinks.vim:

	Added keywords for new bind actions 

Fri Dec 13 20:12:27 2002  Jonas Fonseca <fonseca@diku.dk>:

	* src/: config/options.c, protocol/mailcap.c:

	Introduced options to prioritize mailcap entries according to which
	files they originate and to specify which description to show in the
	query dialog.  

Fri Dec 13 19:43:37 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Fri Dec 13 19:38:00 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/dialogs/info.c:

	Translations size reduces a bit. Info box now displays compilation
	date and time if compiled with DEBUG.  

Fri Dec 13 18:58:28 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Shoot again for player Zas.  

Fri Dec 13 18:46:08 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	A bug causing segfault was fixed.  

Fri Dec 13 18:44:20 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c:

	Delete option button for deleting options from the autocreated
	trees.  

Fri Dec 13 18:08:17 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/config/options.c:

	Added Add option button, enabling you to add an option to the
	autocreating tree. get_opt_rec() minor cleanup.  

Fri Dec 13 15:20:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, bfu/hierbox.c, dialogs/hierbox.c:

	Fixed compilation with --disable-bookmarks. Thanks zas for report.  

Fri Dec 13 14:52:57 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Cleanup, xbel bookmarks read segfault was fixed.  

Fri Dec 13 14:20:47 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Add autogen.sh to EXTRA_DIST.  

Fri Dec 13 13:00:57 2002  Jonas Fonseca <fonseca@diku.dk>:

	* intl/danish.lng:

	Update of Danish translation.  

Fri Dec 13 12:42:08 2002  Laurent Monin <zas@norz.org>:

	* src/: bookmarks/dialogs.c, bfu/hierbox.c,
	bookmarks/backend/common.c, bookmarks/backend/default.c,
	bookmarks/backend/xbel.c, config/dialogs.c, dialogs/hierbox.c,
	document/view.c:

	Code reduction with --disable-bookmarks. Minor cleanups. Note: a
	compilation issue prevents compilation without bookmarks, fixed soon
	i hope.  

Fri Dec 13 10:51:53 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/xbel.c:

	Cleanup, more memory allocation tests, secure_fputs() and
	secure_fputc() are now used instead slower secure_fprintf() calls.  

Fri Dec 13 09:19:00 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Thu Dec 12 22:51:39 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre25.CVS 

Thu Dec 12 22:50:29 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre25 

Thu Dec 12 22:43:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Fixed blank type shown in edit option dialog.  

Thu Dec 12 22:40:13 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/: brazilian_portuguese.lng, bulgarian.lng, catalan.lng,
	croatian.lng, czech.lng, danish.lng, dutch.lng, english.lng,
	estonian.lng, finnish.lng, french.lng, galician.lng, german.lng,
	greek.lng, hungarian.lng, icelandic.lng, indonesian.lng,
	italian.lng, lithuanian.lng, norwegian.lng, polish.lng,
	portuguese.lng, romanian.lng, russian.lng, slovak.lng, spanish.lng,
	swedish.lng, turkish.lng, ukrainian.lng:

	Removed stale, old and unused translation pairs.  

Thu Dec 12 22:38:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	In edit option dialog, show the first field prefixed by Name: rather
	than Info: ;-).  

Thu Dec 12 22:22:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Typo fix, thanks Fabio.  

Thu Dec 12 21:39:51 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng:

	Updated spanish translation, patch by David Mediavilla.  

Thu Dec 12 21:33:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c:

	Save comments even for OPT_TREE options along the way.  

Thu Dec 12 17:15:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Now save options in the right order, not reverse (as before for few
	days).  

Thu Dec 12 17:08:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Add always the new options at the end of their list even in
	autocreate trees.  

Thu Dec 12 17:01:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	...and saved into the config file.  

Thu Dec 12 16:47:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, opttypes.c:

	Introduced config.show_template, controlling whether templates
	should be displayed in the options manager...  

Thu Dec 12 16:46:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed subtle bug when moving across invisible listbox item which is
	trapped at the start of the children list. Ie. _template_ *hint*
	*hint* ;-).  

Thu Dec 12 15:51:55 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Thu Dec 12 15:27:09 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Removed one ... errrhm problematic hook ;-). Thank zas.  

Thu Dec 12 12:14:05 2002  Laurent Monin <zas@norz.org>:

	* configure.in, acconfig.h:

	An configure option was added --enable-fastmem. When enabled,
	internal memory wrappers are not used.  

Wed Dec 11 22:50:13 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/protocol/url.c:

	Dummy handler for javascript protocol (pops up msgbox with error).  

Wed Dec 11 22:14:55 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed few items, added one other. Just update.  

Wed Dec 11 22:11:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Bold notice about no nationals char support in current XBEL
	implementation.  

Wed Dec 11 22:11:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Removed some mess ;-).  

Wed Dec 11 22:09:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Fixed diacritics weirdness with XBEL bookmarks - at least partially,
	we convert it to 7bit ASCII now; this will need to be fixed more
	properly, but that'll need work. Fix crash in XBEL bookmarks if
	there was no title along a bookmark. Patches from Fabio's works.  

Wed Dec 11 22:05:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Compilation fix.  

Wed Dec 11 22:02:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Always consider OPT_LANGUAGE as touched.  

Wed Dec 11 22:01:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Set OPT_TOUCHED when changing charset as well.  

Wed Dec 11 21:54:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, config/options.c, document/session.c:

	Support for saving only the options which were actually changed
	(added value 3 to config.saving_style).  

Wed Dec 11 21:09:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Call change_hooks when an option was changed in options manager.
	This fixes various possible weirdness when changing ie. HTML options
	or connection options.  

Wed Dec 11 20:44:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	XBEL fixes - now we can read own bookmarks file after ourselves even
	when we had diacritics in it. More verbose error reporting, fixed
	huge memleaks when there was a parse error in the file. Patch by
	Fabio.  

Wed Dec 11 20:29:05 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng:

	Italian translation update, patch by Fabio.  

Wed Dec 11 20:28:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Introduced option.change_hook which assures essential stuff updates
	when an option changes. Also added some of these hooks (moved from
	dialog/options.c), but their calling is not yet implemented.  

Wed Dec 11 15:21:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: options.c, options.h:

	Removed functions caring about specific setup dialogs (except
	terminal options). We will ahve to add some change_hook to struct
	option * and add certain operations there which should be trigerred
	by changing stuff in options manager. So changing network, cache and
	html options by now can _maybe_ result in a little ... weirdness
	;-). Will be fixed soon.  

Wed Dec 11 15:10:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed HTML options traces.  

Wed Dec 11 15:06:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Removed network options, cache options and mail/telnet options menu
	items from the options menu, added option manager menu item (HK
	provisorium ;).  

Wed Dec 11 14:52:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Oops - one more config_saving_style -> config.saving_style, this one
	was actually fatal.  

Wed Dec 11 14:49:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	config_saving_style -> config.saving_style 

Wed Dec 11 14:48:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c:

	Added config.comments, controlling which comments are written to the
	configuration file automagically.  

Wed Dec 11 14:39:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/: common.c, common.h, default.c, xbel.c:

	Added filename bookmarks backend hook returning filename appropriate
	for given backend. Don't try to open file with XBEL bookmarks for
	writing if we didn't read XBEL bookmarks without problems.  

Wed Dec 11 14:38:11 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Make the summary more brief, remove some too specific and useless
	items, attempt to update to the latest state of things.  

Wed Dec 11 13:53:28 2002  Jonas Fonseca <fonseca@diku.dk>:

	* doc/mailcap.html:

	Added note about disabling mailcap support. Changed navigation to
	use id in h2 tags. Changed samples to be more sane.  

Wed Dec 11 13:20:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Fixed problem with XBEL bookmarks saving when they were loaded by
	some other backend. I still recommend backing up your bookmarks
	before playing with this, though ;-).  

Wed Dec 11 13:18:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/backend/common.c, config/options.c:

	Added bookmarks.file_format option, allowing you to choose between
	normal and XBEL bookmarks file format. Note that XBEL ate my
	bookmarks right now, I'll notify you in a commit message when this
	will be fixed.  

Tue Dec 10 23:23:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, protocol/mailcap.c:

	Mailcap handler showing fix and useless check in mailcap code
	removed. Patch from Jonas' workshop.  

Tue Dec 10 23:15:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	Try to fix compilation w/o XBEL stuff even more.  

Tue Dec 10 23:13:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c:

	On the popular request (Jose, witekfl) introduced config.indentation
	specifying indentation level when saving configuration file, by
	default 2.  

Tue Dec 10 23:02:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/xbel.c:

	XBEL compilation fix when libexpat is not available.  

Tue Dec 10 22:53:29 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng:

	Czech translation update.  

Tue Dec 10 22:52:15 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, src/bookmarks/Makefile.am,
	src/bookmarks/backend/Makefile.am, src/bookmarks/backend/common.c,
	src/bookmarks/backend/xbel.c, src/bookmarks/backend/xbel.h:

	XBEL bookmarks support, patch by Fabio Bonelli
	<fabiobonelli@libero.it>.  

Tue Dec 10 22:49:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	config_saving_style aliased to config.saving_style now.  

Tue Dec 10 22:40:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed compilation error when mailcap is disabled at compile time.  

Tue Dec 10 22:28:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed description of mailcap options (added newlines).  

Tue Dec 10 22:25:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Removed keybinding.watermark in favour of keybinding.flags,
	introduced KBDB_WATERMARK and KBDB_TOUCHED (that one is not used
	yet).  

Tue Dec 10 22:12:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, dialogs.c:

	Show error msgbox when secure_open() fails (like during -no-connect
	fly).  

Tue Dec 10 21:56:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, dialogs.c, options.c:

	Set OPT_TOUCHED when modifying option value, clear it when saving
	options. Not caring about it anywhere yet.  

Tue Dec 10 21:43:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed displaying of handler type in the type query dialog.  

Tue Dec 10 21:24:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/mailcap.c:

	Show mailcap as a handler name in the type query dialog.  

Tue Dec 10 21:22:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: mailcap.c, mailcap.h:

	Fixed Id tag ;-).  

Tue Dec 10 21:21:32 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/mailcap.html:

	Moved anchors before the headings. Added Id tag.  

Tue Dec 10 21:17:19 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Added slashdot's smartprefixes, patch by Miciah.  

Tue Dec 10 21:16:16 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Added smartprefix a (acronymfinder.com), patch by Miciah.  

Tue Dec 10 21:09:00 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Improved URL escaping in default Lua hooks. Patch by Miciah.  

Tue Dec 10 21:04:27 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/polish.lng:

	Polish translation update, patch by witekfl.  

Tue Dec 10 20:58:45 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, acconfig.h, configure.in, doc/mailcap.html, src/main.c,
	src/config/options.c, src/document/download.c,
	src/protocol/Makefile.am, src/protocol/mailcap.c,
	src/protocol/mailcap.h, src/protocol/mime.c, src/util/file.c,
	src/util/file.h:

	Mailcap support - if we have no configuration entry for given MIME
	type, have a look at mailcap (introduces protocol.mailcap.*). Patch
	by Jonas Fonseca <foncseca@diku.dk>.  

Tue Dec 10 19:52:10 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/danish.lng:

	Danish translation update (typo fix), patch by Jonas.  

Tue Dec 10 10:54:50 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/backend/Makefile.in:

	Makefile.in was removed from CVS.  

Tue Dec 10 10:50:54 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/opttypes.c:

	Translation of option types was enabled. French translation was
	updated.  

Mon Dec  9 21:53:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Brought back the witekfl's no-cache cache entry deleting patch with
	a fix (also by witekfl) supposedly preventing crashes when going
	back. Let's see how will it work out.  

Mon Dec  9 20:14:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/default.h:

	Fixed another critical bug and working on cygwin - we forgot to
	export the handlers table properly. Thanks to Paul G. Barnett for
	report, debugging and fix.  

Mon Dec  9 18:55:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/common.c:

	Fixed truncating of bookmark file when we try to write it and
	there's no valid handler. Thanks Paul G. Barnett for a report.  

Mon Dec  9 14:39:43 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Includes in alphabetical order. Patch by Jonas and me.  

Mon Dec  9 13:49:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed bug in the latest parse_element() optimization, causing often
	segfaults. Patch by witekfl.  

Mon Dec  9 13:21:27 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	Last patch was reverted, it causes segfaults. Need clarification.  

Mon Dec  9 13:00:54 2002  Laurent Monin <zas@norz.org>:

	* src/util/file.c:

	file.h is now included. Thanks to fonseca.  

Mon Dec  9 10:47:49 2002  Laurent Monin <zas@norz.org>:

	* intl/gen-intl:

	Polished gen-intl script. Thanks to Miciah.  

Sun Dec  8 22:52:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Introduced OPT_TOUCHED option_flag, not used anywhere yet.  

Sun Dec  8 22:05:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Remove add bookmark dialog from file menu.  

Sun Dec  8 21:18:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Fixed finding dimensions of the edit option dialog.  

Sun Dec  8 21:01:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, dialogs/document.c, dialogs/edit.c,
	dialogs/menu.c, dialogs/mime.c, dialogs/options.c,
	dialogs/refresh.c, mime/dialogs.c, protocol/auth/dialogs.c:

	Modules interface cleanup - make everything possible static.  

Sun Dec  8 20:47:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Modules interface cleanup - make everything possible static.
	Commented out currently completely dead portion of code.  

Sun Dec  8 20:41:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c, dialogs.c, options.c, opttypes.c:

	Modules interface cleanup - make everything possible static.  

Sun Dec  8 20:30:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/dialog.c, bfu/inpfield.c,
	bfu/inphist.c, bfu/leds.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bookmarks/bookmarks.c, bookmarks/dialogs.c,
	bookmarks/backend/common.c:

	Modules interface cleanup - make everything possible static.  

Sun Dec  8 20:21:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Now description is always separated by newline and between heading
	and description text is now line break.  

Sun Dec  8 20:17:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.h, document/cache.h:

	Witekfl, test your patches to compile before sending them. Pasky,
	test the stuff to compile before committing it. I know I know.  

Sun Dec  8 20:14:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Fixed buggy Pragma: No-cache handling, patch by witekfl.  

Sun Dec  8 20:00:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Dump garbage.  

Sun Dec  8 18:30:33 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/english.lng:

	Oops, fixed a typo. Thanks, zas.  

Sun Dec  8 18:30:06 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c:

	Added actual checking of the value attempted to be set, show error
	if it's bad. Also fixed some memleak, IIRC ;-).  

Sun Dec  8 18:28:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Don't touch option value if the option can't be set.  

Sun Dec  8 18:02:17 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation was updated.  

Sun Dec  8 17:54:10 2002  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Code cleanup.  

Sun Dec  8 17:14:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, options.c, options.h:

	Fixed memory leak when changing an option. Needs more work.  

Sun Dec  8 17:00:42 2002  Laurent Monin <zas@norz.org>:

	* src/util/: memory.c, memory.h:

	Memory allocation internal functions are now used by default.
	Performance is reduced a bit, but they are fault-tolerant and will
	issue messages on bad behavior. You can define FASTMEM to enable use
	of native allocation functions. Code was cleanup.  

Sun Dec  8 16:58:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: dialogs.c, opttypes.c:

	Don't add quotes around the string while in commandline mode. Switch
	into commandline mode when getting value of an option for edit
	dialog.  

Sun Dec  8 16:55:25 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/config/opttypes.c, src/config/opttypes.h:

	Edit option dialog. Lotsa known bugs, but at least something now.
	Bugfixes suite will follow soon :^).  

Sun Dec  8 13:21:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	parse_element() optimization (removal of useless e < eof stuff).
	Patch by witekfl.  

Sun Dec  8 12:23:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/dialogs.c:

	Added save button to the options manager.  

Sun Dec  8 11:21:53 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/gen-intl:

	Make intl/gen-intl working even on non-bashish /bin/shs ;-). Thanks
	to witekfl for report.  

Sat Dec  7 23:47:56 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng:

	French translation update.  

Sat Dec  7 23:32:23 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre24.CVS 

Sat Dec  7 23:31:31 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre24 

Sat Dec  7 23:10:05 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/: README, gen-intl, synclang:

	Added few Id tags. Thanks to witekfl for notice.  

Sat Dec  7 23:06:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, opttypes.c, opttypes.h:

	Fixed option manager weirdness in autocreated trees. Now option
	manager tree should be accurate and working 100%.  

Sat Dec  7 22:47:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Not worthy a commit log message (reindentation).  

Sat Dec  7 22:26:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, dialogs.c, dialogs.h:

	Moved error dialog when configuration file couldn't be written from
	config/conf.c to config/dialogs.c. Frees us of burden of few
	additional useless includes in conf.c.  

Sat Dec  7 22:15:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	After send something with POST method with next request Referer is
	incorrect - last character is "eaten" (probably somewhere in POST
	method handling), when true Referer is used.  Patch in attachment.  
	
	-- witekfl@poczta.onet.pl 

Sat Dec  7 22:11:37 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/document/html/parser.c:

	Hello, Here is patch of the day ;-) It gives about 4% of speedup.  
	
	Instead of linear searching binary searching is used.  Function
	clr_spaces was rewritten :) [optimization] 
	
	-- witekfl@poczta.onet.pl 
	
	It is about tags lookup in the table by binary search (so the table
	is now sorted in lexicographical order).  
	
	Candy by me.  

Sat Dec  7 21:56:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	In directory listing (file protocol), show the path as a list of
	links to the directory elements of the path. Idea by J. Korte
	<jkorte@fastado.de>.  

Sat Dec  7 21:22:41 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/gen-intl, intl/synclang, src/Makefile.am,
	src/intl/.cvsignore, src/intl/Makefile.am, src/intl/lang_defs.h,
	src/intl/language.inc:

	Included rules for autogenerating of language files on-demand.
	Remove src/intl/lang_defs.h and src/intl/language.inc from CVS,
	properly ignore autogenerated files. Patch by zas and me.  

Sat Dec  7 20:05:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, elinks.h, links.h, main.c, bfu/button.c,
	bfu/checkbox.c, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/inphist.c, bfu/leds.c, bfu/listbox.c, bfu/menu.c, bfu/msgbox.c,
	bfu/text.c, bfu/widget.c, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, bookmarks/backend/common.c,
	bookmarks/backend/default.c, config/cmdline.c, config/conf.c,
	config/dialogs.c, config/kbdbind.c, config/options.c,
	config/opttypes.c, config/urlhist.c, cookies/cookies.c,
	cookies/parser.c, bfu/hierbox.c, dialogs/auth.c,
	dialogs/document.c, dialogs/edit.c, dialogs/hierbox.c,
	dialogs/info.c, dialogs/menu.c, dialogs/mime.c, mime/dialogs.c,
	protocol/auth/dialogs.c, cache/cache.c, cache/cache.h,
	dialogs/options.c, dialogs/refresh.c, document/cache.c,
	document/cache.h, document/download.c, document/dump.c,
	document/history.c, document/history.h, document/location.c,
	document/options.c, document/session.c, document/view.c,
	document/vs.c, document/html/colors.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c,
	globhist/dialogs.c, globhist/globhist.c, intl/charsets.c,
	intl/lang_defs.h, intl/language.c, intl/language.inc,
	lowlevel/af_unix.c, lowlevel/interlink.c, lowlevel/connect.c,
	lowlevel/dns.c, lowlevel/home.c, lowlevel/kbd.c, lowlevel/sched.c,
	lowlevel/sched.h, lowlevel/select.c, lowlevel/sysname.c,
	lowlevel/terminal.c, lowlevel/timer.c, lowlevel/ttime.c,
	osdep/os_dep.c, osdep/osdep.c, scripting/lua/core.c,
	scripting/lua/hooks.c, util/ttime.c, encoding/encoding.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/mime.c, protocol/url.c, protocol/user.c,
	protocol/auth/auth.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/auth.c, protocol/http/blacklist.c,
	protocol/http/date.c, protocol/http/header.c, protocol/http/http.c,
	protocol/http/https.c, ssl/connect.c, ssl/ssl.c, util/base64.c,
	util/blacklist.c, util/conv.c, util/encoding.c, util/error.c,
	util/file.c, util/hash.c, util/memdebug.c, util/memlist.c,
	util/memory.c, util/secsave.c, util/string.c:

	links.h -> elinks.h. Patch by Jonas and me.  

Sat Dec  7 19:59:27 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/README:

	Reverted bogus change.  

Sat Dec  7 19:08:59 2002  Laurent Monin <zas@norz.org>:

	* intl/: README, gen-intl:

	gen-intl script was improved. It now prevents useless
	re-compilation.  It detects changes in files and update only the
	ones needed.  language.inc now includes small lng_<lang>.inc files.  
	#define declarations in lang_defs.h were replaced by an enumeration.  
	README file was updated.  

Sat Dec  7 17:48:04 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/dialogs.c, src/intl/lang_defs.h, src/intl/language.inc:

	Info button in the options manager. Shows name, type, value,
	description.  

Sat Dec  7 16:23:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed one stupid memleak.  

Sat Dec  7 15:28:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bfu/align.h, bfu/listbox.c, config/cmdline.c,
	config/conf.c, config/conf.h, config/options.c, config/options.h,
	config/opttypes.c, config/urlhist.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/options.c, document/download.c,
	document/dump.c, document/session.c, document/view.c,
	document/html/renderer.c, intl/language.c, mime/dialogs.c,
	lowlevel/af_unix.c, lowlevel/interlink.c, lowlevel/terminal.c,
	protocol/file.c, protocol/mime.c, protocol/user.c,
	protocol/file/file.c, util/secsave.c:

	root_options and cmdline_options are now struct option, not struct
	list_head *. Make get_opt*() and add_opt*() (and other relevant
	functions) take options instead of list_heads. Fixed segfault on
	startup. Next step in showing autocreate options in the option
	manager.  

Sat Dec  7 14:26:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h, opttypes.c:

	Segfault-on-startup implementation. This is only personal working
	commit so that I have some track of what I'm doing, I have to change
	stuff on a little larger scale now and don't want to mix changes too
	much. Sorry for the inconvience ;-).  

Sat Dec  7 13:30:11 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, cache/cache.h, document/cache.c,
	document/cache.h, protocol/http/http.c:

	Support for ETag header was added.  

Sat Dec  7 12:59:50 2002  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	A new hash function was added, weaker and faster that the previous
	one. It can help to speed up thing but need more testing.  

Sat Dec  7 12:03:57 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Some / 16 and * 16 were replaced by >>4 and <<4.  

Sat Dec  7 11:45:18 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: url.c, url.h:

	parse_url() was made static to url.c.  

Sat Dec  7 11:39:51 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, url.c, url.h, file/file.c:

	get_filenamepart_from_url() was moved from file.c to url.c.  

Sat Dec  7 11:08:39 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was reverted. private should not be handled as no-cache.  

Sat Dec  7 10:55:24 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Treat Cache-Control|Pragma: private as no-cache.  

Sat Dec  7 10:20:00 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Minor code cleanup.  

Sat Dec  7 09:37:19 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Memleak prevention.  

Sat Dec  7 09:34:06 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	Code cleanup.  

Sat Dec  7 09:21:37 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Better handling of allocation failure.  

Sat Dec  7 00:16:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: opttypes.c, opttypes.h:

	Added name field to struct option_type_info; will be in options
	manager in the info window.  

Sat Dec  7 00:12:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: session.c, view.c:

	Fixed showing of interrupt state in the status bar - redraw the
	status bar after connection abort, fixes redrawing when connection
	was aborted in find_dns/establish_conn/like_that state. When state
	is S_INTERRUPTED and active link was changed, change state to S_OK
	so that the link URLs are shown again.  

Fri Dec  6 23:45:31 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bookmarks/dialogs.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Try to delete marked bookmarks if any of the bookmarks are marked.
	Only when none are marked, fall back to deleting the currently
	selected bookmark.  

Fri Dec  6 23:27:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Some visual separators in the code.  

Fri Dec  6 23:22:20 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bookmarks/dialogs.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Implemented recursive bookmarks deleting.  

Fri Dec  6 22:35:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c:

	Added possibility to add callbacks to listbox user into listbox
	action handlers. Split listbox_delete_bookmark() from
	push_delete_button(), call callback del when KBD_DEL is pressed, use
	listbox_delete_bookmark() as such a callback.  

Fri Dec  6 22:16:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	'*' acts as ins (marking items) in the listbox.  

Fri Dec  6 20:44:19 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	Minor cleanup.  

Fri Dec  6 20:28:46 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/Makefile.am, src/config/Makefile.am, src/config/dialogs.c,
	src/config/dialogs.h, src/config/kbdbind.c, src/config/kbdbind.h,
	src/config/options.c, src/config/options.h, src/document/view.c,
	src/intl/lang_defs.h, src/intl/language.inc:

	Added options manager, the castrated version (tm). No support for
	autocreated options, no support for changing anything, probably
	buggy as hell. Oh and you can't see even the option's value ;-).  

Fri Dec  6 20:16:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	Even more bookmarks independence, actually this was a bug I suppose
	(computing only width of small fraction of buttons ?).  

Fri Dec  6 19:10:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c, bookmarks/dialogs.c:

	Remove bookmark-specific parts from dialogs/hierbox.c.  

Fri Dec  6 18:56:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed header comment.  

Fri Dec  6 18:51:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Don't have mutt %h %p as a default telnet.unix-xwin handler, but
	rather telnet %h %p ;-). Thanks, Jose.  

Fri Dec  6 18:48:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed mem_realloc() of bm->box_item without proper renovation of
	possibly broken pointers. Fixes a bug reported by Jose.  

Fri Dec  6 14:50:50 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre23.CVS 

Fri Dec  6 14:49:29 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre23 

Fri Dec  6 14:20:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed one possible link->name memleak, reported by zas.  

Fri Dec  6 14:17:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, protocol/http/http.c:

	Always initialize c->stream_pipes, not only when doing HTTP. Fixes
	problems with stdin being closed, causing hang. Thanks to zas for a
	report.  

Thu Dec  5 23:46:57 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre22.CVS 

Thu Dec  5 23:44:32 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre22 

Thu Dec  5 23:43:54 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Implemented.  

Thu Dec  5 23:38:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, protocol/http/http.c:

	Fixed leaks when compressed connection was interrupted.  

Thu Dec  5 23:16:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, document/history.c, document/session.c,
	document/session.h, document/view.c, lowlevel/sched.c:

	Extended abort_*() family in document/session.c by the interrupt
	parameter, make use of it in abort-connection action.  

Thu Dec  5 22:48:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	abort-connection action introduced (by default bound to z),
	interrupts current foreground connection.  

Thu Dec  5 22:35:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, document/dump.c, document/session.c,
	lowlevel/sched.c, lowlevel/sched.h:

	Let change_connection() optionally always abort a connection. And
	use that when cancelling what_to_do_with_this_file query and when
	cancelling the download window.  

Thu Dec  5 21:46:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	Make check_bottom_halves() use some sensible while() ;-).  

Thu Dec  5 21:30:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/: bookmarks.c, bookmarks.h, dialogs.c, dialogs.h:

	Moved the bookmark searching from bookmarks/bookmarks.c to
	bookmarks/dialogs.c, hardwired it to the dialog handling. Changed
	the behaviour so that we don't play with visibility anymore, just
	jump on the next matching bookmark. Fixed filtering bug reported by
	Jose since we don't filter anymore ;-).  

Thu Dec  5 21:29:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fixed infinite traverse (we ended up on the next item to the one
	returned by fn()).  

Thu Dec  5 20:43:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	If offset of traverse_listbox_items_list() is zero, we traverse down
	until the end of the list.  

Thu Dec  5 20:29:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	document.download.default_mime_type should be
	application/octet-stream. This way it's standart-compilant and
	ELinks asks what to do.  

Thu Dec  5 20:24:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Fixed error with non-working string parser on commandline options.
	This fixes dump-charset misparsing bug reported by zas.  

Thu Dec  5 19:53:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/cmdline.c:

	Fixed ignoring of unknown commandline options. Cleanup.  

Thu Dec  5 17:41:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Show shadows only when they are really enabled.  

Thu Dec  5 17:29:01 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/dialogs/menu.c, src/intl/lang_defs.h, src/intl/language.inc:

	Show header info in a view menu.  

Thu Dec  5 15:02:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Fixed occassional config file save segfault caused by NULL alias'
	write handler. Thanks Miciah and probably Jose for the report.  

Thu Dec  5 13:39:38 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Another useless test was removed. Thanks to Miciah.  

Thu Dec  5 13:34:01 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/home.c:

	Another useless test was removed. Thanks to Miciah.  

Thu Dec  5 13:32:50 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/home.c:

	A useless test was removed. Thanks to Miciah 

Thu Dec  5 13:16:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	And last_time should be static.  

Thu Dec  5 11:59:41 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	A strange segfault was fixed. That part of code caused segfaults
	with gcc-3.1, gcc-3.2. A code rearrangement seems to fix it. Thanks
	to Miciah for reporting that bug.  

Thu Dec  5 11:43:12 2002  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Minor cleanup. Should make some gcc happy.  

Thu Dec  5 11:18:32 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	A missing header was added, exit() needs stdlib.h.  

Wed Dec  4 18:33:50 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Populate with trim_chars().  

Wed Dec  4 16:55:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/bookmarks.c:

	Removed stale working file, thanks Fabio.  

Wed Dec  4 16:29:58 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Changed site of CYGWIN binaries.  

Wed Dec  4 12:21:40 2002  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Oooops, a typo was fixed.  

Wed Dec  4 12:14:04 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, document/html/parser.c, util/string.c,
	util/string.h:

	New function trim_chars() was introduced. Two examples of usage and
	minor tidy up. See string.c for more info.  

Tue Dec  3 22:09:28 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	We should _always_ test returned values.  

Tue Dec  3 22:00:55 2002  Laurent Monin <zas@norz.org>:

	* src/util/: memory.c, memory.h:

	Now, if DEBUG and LEAK_DEBUG are undefined, we use native malloc(),
	realloc(), calloc(), free() functions instead of wrappers.
	Performance should increase. Developpers should always use
	--enable-debug, this enables wrappers that check consistency and
	detect many errors concerning memory allocation.  

Tue Dec  3 22:00:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Fixed segfault for elinks homepage and links manual from help menu,
	reported by Jose.  

Tue Dec  3 19:31:44 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, bfu/dialog.c, bfu/inpfield.c, bfu/msgbox.c,
	config/conf.c, config/options.c, config/opttypes.c,
	cookies/cookies.c, dialogs/menu.c, dialogs/options.c,
	dialogs/refresh.c, document/download.c, document/dump.c,
	document/location.c, document/session.c, document/html/parser.c,
	document/html/tables.c, intl/charsets.c, intl/lang_defs.h,
	lowlevel/af_unix.c, lowlevel/dns.c, lowlevel/home.c,
	lowlevel/interlink.c, lowlevel/sched.c, osdep/os_dep.c,
	osdep/osdep.c, protocol/file.c, protocol/ftp.c, protocol/url.c,
	protocol/auth/auth.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/auth.c, protocol/http/http.c, ssl/connect.c,
	ssl/ssl.c, util/conv.c, util/file.c, util/hash.c, util/memdebug.c,
	util/secsave.c:

	Ending whitespaces cleanup.  

Tue Dec  3 15:14:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/dump.c:

	Fixed source/dump missing URL error msg.  

Tue Dec  3 00:14:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed mem_free(NULL), thanks Miciah. And now I should really go
	sleep.  

Mon Dec  2 23:40:11 2002  Laurent Monin <zas@norz.org>:

	* configure.in, src/util/conv.c:

	An issue with localization of directory listings was fixed.  

Mon Dec  2 16:44:03 2002  Laurent Monin <zas@norz.org>:

	* src/util/file.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 16:39:05 2002  Laurent Monin <zas@norz.org>:

	* src/ssl/: connect.c, ssl.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 16:31:51 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 15:50:17 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 15:41:11 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 15:37:44 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:55:26 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:48:13 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/kbd.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:43:11 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/home.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:43:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Fixed subtle missing-negation mistake ;-).  

Mon Dec  2 14:41:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Fixed possible memory leak and removed one bad test.  

Mon Dec  2 14:36:45 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/dns.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:30:25 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:25:58 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Mon Dec  2 14:20:41 2002  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	mem_free(NULL) tests, memory allocation checks, tidy up.  

Sun Dec  1 23:29:56 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre21.CVS 

Sun Dec  1 23:29:10 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre21 

Sun Dec  1 20:04:37 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:53:10 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:42:34 2002  Laurent Monin <zas@norz.org>:

	* src/document/: history.c, location.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:37:46 2002  Laurent Monin <zas@norz.org>:

	* src/document/dump.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:34:32 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:31:09 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Egotrip(tm) 

Sun Dec  1 19:29:57 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation update.  

Sun Dec  1 19:27:13 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 19:21:18 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor changes concerning memory allocation/free.  

Sun Dec  1 19:02:08 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/bookmarks/Makefile.am,
	src/bookmarks/bookmarks.c, src/bookmarks/backend/.cvsignore,
	src/bookmarks/backend/Makefile.am,
	src/bookmarks/backend/Makefile.in,
	src/bookmarks/backend/bookmarks.c, src/bookmarks/backend/common.c,
	src/bookmarks/backend/common.h, src/bookmarks/backend/default.c,
	src/bookmarks/backend/default.h:

	Generalized bookmarks file format backends into
	src/bookmarks/backend/* (people are working on XBEL backend, someone
	would maybe like to port the LDAP backend? ;). Added back .cvsignore
	fairie, we'll need you, lad.  

Sun Dec  1 18:56:10 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Minor changes concerning memory allocation/free.  

Sun Dec  1 18:21:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/: .cvsignore, .vimrc:

	Hmpf, fairies fixed :).  

Sun Dec  1 18:20:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/backend/: .cvsignore, .vimrc:

	Fairies added to src/bookmarks/backend/.  

Sun Dec  1 18:15:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed mem_free(NULL) while searching (thanks to Jose) and possible
	crash when searching empty string. Made get_searched() static, since
	it's not used anywhere.  

Sun Dec  1 18:06:56 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/feedback.txt:

	We are hungry.  

Sun Dec  1 17:51:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Vast strip_url_password() simplifications. Fixed one
	check_protocol() pitfall.  

Sun Dec  1 17:45:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: mime.c, mime.h, url.c, user.c, user.h:

	Moved get_prog() from protocol/mime.* to protocol/user.*.  

Sun Dec  1 17:42:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, protocol/url.c, protocol/url.h,
	protocol/user.c:

	Don't include port in %h.  

Sun Dec  1 17:40:08 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/hungarian.lng, src/intl/language.inc:

	Hungarian translation update by Varga Balázs.  

Sun Dec  1 17:36:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Add some default protocols.  

Sun Dec  1 17:29:40 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/portuguese.lng,
	src/intl/language.inc:

	Portugese and brazilian-portugese translation update, by André
	Valente.  

Sun Dec  1 17:28:51 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/options.c, src/intl/lang_defs.h, src/intl/language.inc,
	src/protocol/mime.c, src/protocol/url.c, src/protocol/user.c,
	src/protocol/user.h:

	Full-scale protocol.user support. Now, the support isn't modified
	only to mailto, telnet and tn3270, but you can define whatever you
	want (the protocols dialog has no clue about that obviously) -
	including the long-wanted news and gopher ;). Minor cleanups.  

Sun Dec  1 15:50:54 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Memory allocation checks, free(NULL) prevention, and minor tidy up.  

Sun Dec  1 14:39:42 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	A compilation issue was fixed. getenv() needs stdlib.h.  

Sun Dec  1 12:59:50 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/danish.lng, src/intl/language.inc:

	Danish translation update by Jonas.  

Sun Dec  1 12:52:36 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	OS Shell vs GPM 

Sun Dec  1 12:18:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/sched.c:

	Look to (FTP|HTTP)_PROXY and its lowercase variant if
	protocol.*.proxy.host is empty. Implemented native no_proxy support
	(protocol.no_proxy, NO_PROXY, no_proxy environment variables);
	someone with proxy should actually test this, I suppose ;-).
	Inspiration from debian's #55425, Martijn van de Streek
	<mvdstreek@cistron.nl> and Josip Rodin <joy@cibalia.gkvk.hr>.  

Sun Dec  1 11:08:17 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Attempt to fix missing doc/ files in make dist.  

Sun Dec  1 11:07:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, config/options.c:

	Switched to Jose's method of dynamic listbox height computation -
	introduced ui.dialogs.listbox_min_height, by default 11. ui.shadows
	aliased to ui.dialogs.shadows, will disappear around 2003-02-01 or
	so.  

Sat Nov 30 22:42:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/checkbox.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, document/view.c:

	Full mouse wheel support in all dialogs. Treat mouse wheel
	specially, don't impose generic button actions on it. Also fixes the
	wheel-on-link bug reported by yanek.  

Sat Nov 30 21:59:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, document/history.c, document/location.c,
	document/location.h:

	Fixed weird (un)history reordering reported by Jose and Peter Wang.  

Sat Nov 30 20:42:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	...and similiar bug in unhistory.  

Sat Nov 30 20:41:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Reverted to the old behaviour, don't list the first item in the
	history menu. Fixed minor bug possible under out of memory
	condition.  

Sat Nov 30 20:33:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/dialogs.c:

	Make globhist dialog as wide as possible, similiarly to the
	bookmarks dialog.  

Sat Nov 30 18:10:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, document/view.c, lowlevel/kbd.c,
	lowlevel/kbd.h:

	Mouse wheel support. Brr... unfortunately, in rxvt the wheel up is
	somehow less sensitive, but we can't do much with that :-(.  

Sat Nov 30 11:36:11 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian translation update by Dmitry.  

Sat Nov 30 11:35:44 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/slovak.lng, src/intl/language.inc:

	Slovak translation update by Peter Samek.  

Sat Nov 30 10:39:16 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation updated.  

Sat Nov 30 03:12:10 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Fixed error in default hooks.lua, patch by Jonas.  

Sat Nov 30 02:18:11 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Removed LUA from EXTRA_DIST.. enables make dist to work. Will move
	0.4pre20 tag here.  

Sat Nov 30 02:16:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c, options.h:

	tree_config_string() -> smart_config_string(), mvoed from conf.c to
	options.c, generalized, configfile-specific parts moved to static
	smart_config_string_output_fn() left in conf.c.  

Sat Nov 30 01:22:12 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre20.CVS 

Sat Nov 30 01:21:23 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre20 

Sat Nov 30 01:20:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, config/options.c:

	Ok, you won. Menu scrolling wraps around again.
	ui.menu_scroll_wraparound removed. However, I made pgup/pgdn _NOT_
	to wraparound. And you have no chance on persuading me about that.  

Sat Nov 30 01:08:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	document.cache.ignore_cache_control by default.  

Sat Nov 30 01:08:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/: dialogs.c, globhist.c:

	When title is empty, display URL.  

Sat Nov 30 01:03:46 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation update.  

Sat Nov 30 01:02:42 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/options.c, src/globhist/dialogs.c,
	src/globhist/globhist.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Introduced [ Toggle display ] button to global history dialog,
	making it possible to switch between page titles and URLs. Aliased
	to document.history.global.display_type.  

Sat Nov 30 00:12:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Some performance testing utility, disabled obviously.  

Fri Nov 29 23:28:08 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/7bit.cp, Unicode/8859_1.cp, Unicode/8859_13.cp,
	Unicode/8859_15.cp, Unicode/8859_16.cp, Unicode/8859_2.cp,
	Unicode/8859_4.cp, Unicode/8859_5.cp, Unicode/8859_7.cp,
	Unicode/8859_9.cp, Unicode/cp1125.cp, Unicode/cp1250.cp,
	Unicode/cp1251.cp, Unicode/cp1257.cp, Unicode/mac_lat2.cp,
	Unicode/tcvn5712.cp, src/intl/codepage.inc:

	Updated the aliases of various codepages, since we have now much
	less agressive method of their searching (and much less CPU
	intensive). Hope it'll work in most cases now.  

Fri Nov 29 23:19:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Oops, compilation fix.  

Fri Nov 29 22:53:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Notice about our second biggest CPU hog ;p.  

Fri Nov 29 22:46:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	Optimize get_cp_index(). We no longer look for longest substring of
	all aliases, but for the full match.  

Fri Nov 29 22:18:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Let's try to make time-critical get_hash_item() inline.  

Fri Nov 29 22:00:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Minor cleanup, optimization.  

Fri Nov 29 21:47:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Make default document.history.global.max_items 1024 instead of 4096.  

Fri Nov 29 21:29:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Compilation fix. Ghosts all around.  

Fri Nov 29 21:01:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Some more bits inlined.  

Fri Nov 29 20:59:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memory.c, string.c:

	Bunch of functions inlined. Do some sanity tests only with DEBUG
	enabled (those functions are highly time critical).  

Fri Nov 29 20:53:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed NULL stracpy(form.action).  

Fri Nov 29 20:39:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Trivial changes, comment added.  

Fri Nov 29 20:28:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, config/options.c:

	Introduced ui.menu_scroll_wraparound, Dmitry asked for it :). By
	default off, though.  

Fri Nov 29 20:21:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Pasky's compile fix of the day.  

Fri Nov 29 20:20:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Revisited the NULL testing.  

Fri Nov 29 19:52:51 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/kbd.c:

	A mem_free(NULL) was fixed.  

Fri Nov 29 19:32:19 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Tests for memory allocation failures.  

Fri Nov 29 19:27:03 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Test for memory allocation failure.  

Fri Nov 29 19:23:19 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Some comments were added about untested return values. Should be
	fixed later.  

Fri Nov 29 19:16:16 2002  Laurent Monin <zas@norz.org>:

	* src/config/opttypes.c:

	Tests for memory allocation failures and free(NULL).  

Fri Nov 29 19:11:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Use add_chr_to_str() instead of add_to_str() where appropriate.  

Fri Nov 29 19:11:35 2002  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	Tests for memory allocation failures and free(NULL).  

Fri Nov 29 19:06:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Fixed terrible performance hog (large number of NUL characters in
	line), reported by José Luis González González
	<jlg80@mi.madritel.es>.  

Fri Nov 29 19:04:58 2002  Laurent Monin <zas@norz.org>:

	* src/config/conf.c:

	Tests for memory allocation failures and free(NULL).  

Fri Nov 29 18:56:08 2002  Laurent Monin <zas@norz.org>:

	* src/config/cmdline.c:

	Test for allocation failure.  

Fri Nov 29 18:43:09 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Oh, how can this happen ? ;) free() -> mem_free().  

Fri Nov 29 18:39:07 2002  Laurent Monin <zas@norz.org>:

	* src/intl/language.c:

	Indentation fix.  

Fri Nov 29 18:34:00 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Some useless code was removed.  

Fri Nov 29 18:28:57 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/msgbox.c:

	Test for NULL before freeing, minor changes.  

Fri Nov 29 18:25:51 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	Test for NULL before freeing.  

Fri Nov 29 18:22:22 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Test for allocation failure.  

Fri Nov 29 18:20:11 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/inphist.c:

	Test for NULL before freeing.  

Fri Nov 29 18:16:43 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/align.h:

	Test for allocation failure.  

Fri Nov 29 18:01:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Fixed potential NULL mem_free()s resulting from DUMMY removal.  

Fri Nov 29 17:52:20 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/: renderer.c, renderer.h:

	Prevention of (many) useless calls to realloc().  

Fri Nov 29 17:51:02 2002  Petr Baudis <pasky@ucw.cz>:

	* LUA, src/scripting/lua/TODO:

	Removed /LUA, now redundant.  

Fri Nov 29 17:37:33 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: terminal.c, terminal.h:

	Prevention of useless calls to realloc() and better memory handling.  

Fri Nov 29 16:35:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed search for something not occuring anywhere. We were free()ing
	NULL.  

Fri Nov 29 16:26:12 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/inphist.c, bfu/msgbox.c, document/view.c,
	document/vs.c, document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, lowlevel/kbd.c, lowlevel/terminal.c,
	osdep/os_dep.c, osdep/osdep.c, protocol/file.c,
	protocol/file/file.c, protocol/http/http.c, util/memdebug.c,
	util/memory.c, util/memory.h, util/string.c:

	DUMMY was dropped since NULL is sufficient. Related stuff was
	removed too. Please report any issue if any.  

Fri Nov 29 15:02:46 2002  Laurent Monin <zas@norz.org>:

	* src/document/: view.c, vs.c, html/renderer.c:

	More tests, preparation to DUMMY eradication.  

Fri Nov 29 14:22:42 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	An hidden bug was fixed. Some tests were missing...  

Fri Nov 29 13:58:25 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	A bug was fixed. We do not want to copy anything at DUMMY address...  

Fri Nov 29 13:08:27 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/elinks-lua.texi:

	ELinksified.  

Fri Nov 29 12:39:53 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO, doc/elinks-lua.texi:

	Added doc/links-lua.texi, documenting the elinks' lua interface.
	Thanks to Peter Wang and Cliff Cunnington.  

Fri Nov 29 12:02:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, config/options.c:

	Optionally (ui.shadows, off by default) make dialogs drop shadows.
	Patch by Fabio and me.  

Fri Nov 29 11:42:45 2002  Laurent Monin <zas@norz.org>:

	* src/util/memdebug.c:

	An optionnal check was added to track useless realloc calls (oldsize
	= newsize), see CHECK_USELESS_REALLOC in memdebug.c 

Fri Nov 29 11:20:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	document.history.global.enable is a bool, so use get_opt_bool()
	instead of get_opt_int(). Patch by Miciah.  

Fri Nov 29 11:17:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.h:

	Make text the last item of struct listbox_item.  

Fri Nov 29 11:16:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Fix one memory allocation check, thanks Miciah.  

Fri Nov 29 11:15:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, memory.c:

	Fixed realloc retries.  

Fri Nov 29 11:13:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: memdebug.c, memory.c:

	Introduced patience routines to memdebug.c as well. Some stuff make
	static.  

Fri Nov 29 10:18:07 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Updated Cliff Cunnington's email address.  

Fri Nov 29 09:49:03 2002  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	If an url contains bad chars, we now skip it at write time. More
	return values are tested.  

Fri Nov 29 09:48:03 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	If an url contains bad chars, we now skip it at write time.  

Fri Nov 29 09:36:56 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	More return values are tested.  

Fri Nov 29 01:10:19 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre19.CVS 

Fri Nov 29 01:08:53 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre19 

Fri Nov 29 01:08:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/menu.c:

	Semireverted a menu cycling patch, proven to be way too
	uncomfortable for longer menus. Soon enough: 
	
	revision 1.6 date: 2002/01/23 21:30:14;  author: pasky;  state: Exp;
	lines: +2 -0 cyclic scrolling in menus, patch by Ami Fischman
	<usenet@fixchman.org> 
	
	(by the way, this is of the ancient /bfu.c beast, not
	/src/bfu/menu.c ;].. at least I visited my elinks-0.3/ directory
	after half a year :^) 

Fri Nov 29 00:56:03 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, TODO:

	Additions mainly by José Luis González González
	<jlg80@mi.madritel.es> (will refer to him just as to Jose in further
	commits ;).  

Fri Nov 29 00:32:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Heavy wave of comments in uncompress_data(), hopefully saving me
	figuring stuff out for another time in future ;-). Fixed subtle bug,
	causing cvsweb's revision history especially and the uncompression
	generally rarely (cvsweb everytime) break under heavily laggy
	connections etc. Don't complain about messy and ununderstandable
	commit messages :).  

Thu Nov 28 23:43:19 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	'Improved' lua checking in order to make it work in the debian
	world.  

Thu Nov 28 22:51:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Let the lifeboats take less space.  

Thu Nov 28 22:45:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memory.c:

	Cleanups of the patience code, compilation fixes (thanks, Dmitry).
	Here is the patience of the saints: here are they that keep the
	commandments of God, and the faith of Jesus. --Rev14:12 

Thu Nov 28 20:53:12 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Cleanups. An issue with backward/forward history menu was (perhaps)
	fixed.  

Thu Nov 28 15:22:40 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/user.c:

	An untested return value is now tested.  

Thu Nov 28 15:14:15 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/mime.c:

	Cleanup.  

Thu Nov 28 13:45:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	{} aliases to [] and x alias to ctrl+enter, coming from lynx by
	courtesy of José Luis González González <jlg80@mi.madritel.es>.  

Thu Nov 28 13:42:47 2002  Laurent Monin <zas@norz.org>:

	* src/document/options.c:

	Minor optimization by tests reordering.  

Thu Nov 28 13:39:08 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Cleanups, code redundancy was reduced, more return values are
	tested.  

Thu Nov 28 11:40:42 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/terminal.c, document/html/renderer.c:

	Optimizations and cleanups.  

Thu Nov 28 11:26:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/dump.c:

	Fixed compilation failure on NetBSD 1.6D, thanks to John Fouhy
	<John.Fouhy@mcs.vuw.ac.nz> for a report.  

Wed Nov 27 17:46:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Attempted to clarify the empty user_agent warning, inspired by
	Jürgen A. Erhard <jae@jerhard.org>.  

Wed Nov 27 17:43:34 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Many untested return values are now checked. search_for() and
	search_for_back() now use the same code.  

Wed Nov 27 17:14:18 2002  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Default keybinding for ACT_GOTO_URL_CURRENT_LINK was added. "E" is
	used for it.  

Wed Nov 27 17:06:02 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/menu.c:

	PAGE_UP/PAGE_DOWN handling were improved in main menu.  

Wed Nov 27 14:08:25 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	Support for KBD_HOME and KBD_END in listboxes was added. They
	respectively go at top of list or end of list.  

Wed Nov 27 12:59:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Test looks successful ;-).  

Wed Nov 27 12:57:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/README:

	Dummy test.  

Wed Nov 27 11:45:45 2002  Laurent Monin <zas@norz.org>:

	* configure.in, src/util/string.c, src/util/string.h:

	Workarounds for potential portability issues. Concerned functions
	are strchr(), strrchr(), strerror(), strstr(), memmove().  

Wed Nov 27 10:51:35 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sysname.c:

	MAX_STR_LEN -> sizeof(system_name).  

Wed Nov 27 10:22:04 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	Fix a potential memleak.  

Wed Nov 27 10:15:39 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sysname.c:

	Safe way for everybody. Really minor changes.  

Tue Nov 26 23:14:52 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/mime.html:

	Oops, pasky tried to change something again.  

Tue Nov 26 23:14:26 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/mime.html:

	Corrected some spelling mistakes, minor enhancements, added Id tag.  

Tue Nov 26 22:58:00 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/mime.html:

	XHTML validity fix by José.  

Tue Nov 26 22:48:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Dump core in internal() only if DEBUG is set. Otherwise postpone it
	to the totally untested, rusty rotten code following the internal()
	call in the rest of ELinks usually ;-).  

Tue Nov 26 22:47:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Wrong log message.  

Tue Nov 26 22:46:20 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, doc/mime.html, src/util/error.c:

	MIME types documentation, by José Luis González González
	<jlg80@mi.madritel.es>.  

Tue Nov 26 17:22:06 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	Better handling of errors (NULL values and fstat() failure).  

Tue Nov 26 16:53:58 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	A segfault was fixed.  

Tue Nov 26 10:02:01 2002  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Cleanup and optimizations.  

Mon Nov 25 14:40:51 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Last patch was fixed. ;) 

Mon Nov 25 14:24:49 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/inpfield.c, protocol/ftp.c, protocol/url.c,
	protocol/ftp/ftp.c, protocol/http/http.c, util/conv.c:

	More error checking around strtol().  

Mon Nov 25 13:56:46 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: user.c, http/http.c:

	Better handling of some return values.  

Mon Nov 25 13:49:04 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Some (now) useless lines were removed.  

Mon Nov 25 13:44:18 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Better handling of memory allocation failures.  

Mon Nov 25 13:28:53 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: url.c, auth/auth.c, http/auth.c:

	get_protocol_name() handling tidy up.  

Mon Nov 25 13:21:21 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: url.c, http/http.c:

	Fix an issue with some url.c functions.  

Mon Nov 25 12:04:56 2002  Laurent Monin <zas@norz.org>:

	* src/util/: memdebug.c, memory.c, memory.h:

	On failure, allocations are retried after a delay.  

Mon Nov 25 10:21:42 2002  Laurent Monin <zas@norz.org>:

	* src/: protocol/url.c, util/string.c:

	memacpy behavior is cleaner now. It should fix some reported issues
	with get_host_name().  

Sat Nov 23 19:49:52 2002  Laurent Monin <zas@norz.org>:

	* src/util/: string.c, string.h:

	Stricter parameters checking for string functions.  
	
	If DEBUG is defined, most errors will force a core dump.  If DEBUG
	is not defined, some important errors will generate a message.  
	
	WARNING: since we are stricter, some previously (perhaps) working
	code may cause errors and/or core dumps now.  
	
	ie. memacpy(NULL, len), behavior wasn't clearly defined... now it
	produces an error.  
	
	Please report any issue.  

Sat Nov 23 19:37:46 2002  Laurent Monin <zas@norz.org>:

	* src/util/memory.c:

	We now force immediate segfault on memory allocation failures.  

Sat Nov 23 19:36:12 2002  Laurent Monin <zas@norz.org>:

	* src/util/memdebug.c:

	We now force immediate segfault on memory allocation failures. file
	and line infos were added to some functions.  

Sat Nov 23 19:34:00 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c:

	Some issues with NULL values of user and pass were fixed.  

Sat Nov 23 19:31:51 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Calls to memacpy(x, l) when x is NULL were removed.  

Sat Nov 23 19:25:44 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	A potential memleak was fixed.  

Sat Nov 23 19:24:27 2002  Laurent Monin <zas@norz.org>:

	* src/: document/html/renderer.c, lowlevel/home.c:

	Calls to stracpy(x) when x is NULL were removed.  

Sat Nov 23 19:23:49 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Calls to stracpy(x) when x is NULL and calls to copy_string(d,s)
	when s is NULL were removed.  

Sat Nov 23 19:20:40 2002  Laurent Monin <zas@norz.org>:

	* src/document/: download.c, session.c, view.c, vs.c:

	Calls to stracpy(x) when x is NULL were removed.  

Sat Nov 23 12:45:25 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Minor cleanups, clarifications,  and optimizations.  

Thu Nov 21 11:15:03 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/file.c, protocol/file/file.c,
	encoding/encoding.c, encoding/encoding.h, util/encoding.c,
	util/encoding.h:

	Support for fallback to filename.gz if filename doesn't exist was
	added.  A new option named protocol.file.try_encoding_extensions can
	disabled that behavior.  Ideas by witekfl and pasky. Patch by Zas.  

Wed Nov 20 12:42:41 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian update by Dmitry.  

Wed Nov 20 09:15:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/http/http.c:

	ignorecachecontrol -> ignore_cache_control 

Tue Nov 19 22:41:58 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/mime.c:

	An unused variable was removed.  

Tue Nov 19 22:25:44 2002  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	Minor cleanup.  

Tue Nov 19 22:22:26 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Some lowrisk potential buffer overflows were fixed.  

Tue Nov 19 22:08:43 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	An erroneous error message was fixed.  

Tue Nov 19 22:06:19 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Minor cleanup.  

Tue Nov 19 22:00:42 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Removed some redundant code.  

Tue Nov 19 21:53:23 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, protocol/http/http.c:

	A new option document.cache.ignorecachecontrol was added. When set,
	cache control server headers are ignored, so a document may be
	cached even if server sent Cache-Control: no-cache header.  

Tue Nov 19 21:43:09 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Part of ftp download resuming code was causing segfaults, partially
	fixed.  

Tue Nov 19 14:06:27 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Minor optimization.  

Tue Nov 19 13:43:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	We love 80th column! ;-) 

Tue Nov 19 11:00:35 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.h, document/cache.h, lowlevel/sched.c,
	lowlevel/sched.h, protocol/http/http.c:

	The -1 bug in download info was fixed. We now handle Cache-Control:
	no-cache server header. Patch by Witold Filipczyk and me.  

Mon Nov 18 22:31:15 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Useless RD_READ_SIZE was removed 

Mon Nov 18 17:12:02 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Bug fix: we must call lseek() only if needed. Prevent rare "Illegal
	seek" error on some ftp sites.  

Mon Nov 18 16:40:52 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, ssl/connect.c:

	Read buffer handling was revisited.  Many useless calls to
	mem_realloc() have disappeared.  A new field was added to struct
	read_buffer, 'freespace' which is remaining space in buffer.  A
	global #define was replaced by few local #define.  Buffer size is
	now optimized to fit in exact number of memory pages, but for now we
	suppose pages are 4096 bytes (this can be improved).  

Sun Nov 17 15:30:57 2002  Laurent Monin <zas@norz.org>:

	* elinks.1:

	Updated man page date.  

Sat Nov 16 20:10:44 2002  Laurent Monin <zas@norz.org>:

	* elinks.1:

	Manpage was updated to reflect current commandline options.  

Sat Nov 16 19:46:26 2002  Laurent Monin <zas@norz.org>:

	* TODO:

	Some entries were added ;).  

Fri Nov 15 17:20:30 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, document/html/parser.c,
	globhist/globhist.c, globhist/globhist.h:

	Major globhist performance improvement, we now use hashes to find
	history items by url.  

Fri Nov 15 16:47:55 2002  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	key/value shoulnt be freed in del_hash_item() since we dont allocate
	them in hash stuff.  

Fri Nov 15 13:26:04 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	-R ssl linking fix disabled, creating serious portability problems.
	Thanks, zas.  

Thu Nov 14 22:23:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Textarea editor fix of the day.  

Wed Nov 13 22:12:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Introduced minimal height 6 of the box, requested by zim and
	reasonable minimum, it looks..  

Wed Nov 13 22:09:19 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fixed detection of libgpm (here it actually hurted - thanks go to
	zim for a report), libbz2 and libz.  

Wed Nov 13 21:13:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Introduced commandline options dump-charset and dump-width, aliased
	to appropriate document.dump.* options. Dump output tuning finally
	made reasonably possible.  

Wed Nov 13 21:13:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Fixes commandline strings and numbers parsing and aliases.  

Wed Nov 13 21:11:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Moved options re-parsing immediatelly after load_config() - I think
	it's more correct now.  

Wed Nov 13 20:50:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixes bug in reallocation condition (at least _SOMETHING_ inherited
	from original Links, makes you feel not _that_ stupid at the end ;)
	causing overflow (nothing exploitable or so) causing crash. Reported
	by Jonas.  

Tue Nov 12 22:33:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Fixed a bug pointed out by Fabio - try to fix up only _broken_ urls
	;-).  

Tue Nov 12 21:57:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed too frequent displaying of resumed message in the download
	window.  

Tue Nov 12 21:30:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, document/dump.c, document/session.c,
	lowlevel/sched.h, protocol/ftp.c, protocol/ftp/ftp.c,
	protocol/http/http.c:

	Well, I fix problem you mentioned.  Maybe arise new problems with
	download resume, but this version is better than was before(tm).  
	
	prg->start == -1 means normal session, not download 
	    -II-   ==  0 means download 
	    -II-    >  0 means resume 
	
	File is not truncated with open.  Thanks of it if one press 'd' and
	file was already downloaded "nothing happens".  -- witekfl 

Tue Nov 12 21:05:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Fixed some more problems with square brackets inside of URL and IPv6
	enabled. Inspired by Fabio's patch.  

Tue Nov 12 10:39:15 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	A memleak introduced by last patch was fixed.  

Mon Nov 11 23:05:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, document/session.c,
	document/session.h, document/html/renderer.c,
	document/html/renderer.h:

	When transforming a link to a bookmark, pre-fill the title with the
	link text. Patch by Fabio, code eyecandy fixes by me. Too late for
	me to actually test it now.  

Mon Nov  4 16:57:00 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, protocol/http/http.c, scripting/lua/core.c,
	scripting/lua/core.h:

	Lua memory is now free at exit (cleaner way), a comment about a
	"needed" memleak was added.  

Wed Oct 30 13:31:49 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/listbox.c:

	A C++-style comment was replaced by a C-style comment. Thanks to
	Miciah.  

Tue Oct 29 23:18:34 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, elinks.1, contrib/elinks.spec.in, intl/README,
	src/document/html/TODO, src/protocol/ftp.c, src/protocol/ftp/ftp.c,
	src/protocol/http/http.c:

	pasky@ji.cz -> pasky@ucw.cz; please note that this is a long-term
	address, I hope that pasky@ji.cz will work for another year or two
	yet.. but pasky@ucw.cz should work for at least next decade ;-), so
	please update your stuff as well already. Note that ChangeLog update
	will produce a _lot_ of chunks as well.  

Mon Oct 28 16:10:57 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Fixed make dist ;p.  

Wed Oct 23 12:16:42 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	exit() -> _exit(). Thanks to Sven Neumann <sven@convergence.de> for
	reporting that error.  

Fri Oct 18 19:39:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed another bug in textarea editor support - it was unusable when
	you tried to edit stuff at two instances at once.  

Fri Oct 18 18:26:43 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	Portability of set_(non)blocking_fd() functions was improved a bit.  

Thu Oct 17 20:26:40 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/kbdbind.c, src/config/kbdbind.h,
	src/document/view.c:

	Here you are a little patch, makes A work properly. Adds
	add-bookmark-link action by default bound to 'A', guess its
	functionality for a homework. Patch by Fabio.  

Thu Oct 17 20:15:12 2002  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Minor simplification in sig_intr().  

Thu Oct 17 19:56:18 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Minor simplification in write_bookmarks_do() code.  

Thu Oct 17 16:18:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed problem with loading bookmarks in old format, reported by
	Dmitry.  

Thu Oct 17 15:42:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Partial fix of bookmarks search.  

Thu Oct 17 15:35:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Errorneous commits to rule the world.  

Thu Oct 17 15:34:18 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/bookmarks.txt, src/bookmarks/bookmarks.c:

	Some preliminary bookmarks documentation. Hey, I thought that I
	already added it..? 

Wed Oct 16 15:26:59 2002  Petr Baudis <pasky@ucw.cz>:

	* test/color.html:

	Added color.html, done by Jonas Fonseca. Quite nice! ;) 

Wed Oct 16 15:16:54 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/: config.lua, hooks.lua.in:

	Hopefully fixed dumbprefixes, enhanced the home_dir stuff, fixed
	some problems I hope. Thanks to Grzegorz Adam Hankiewicz
	<gradha@terra.es> and csaba.raduly@sophos.com.  

Wed Oct 16 14:28:03 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Italian translation update by Fabio.  

Wed Oct 16 14:27:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Kibi and Mebi support.  
	
	No, they aren't cartoon characters :-), see: 
	http://physics.nist.gov/cuu/Units/binary.html .  
	
	Patch by Fabio Bonelli <fabiobonelli@libero.it>.  

Wed Oct 16 14:18:04 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen:

	Fixed locales issues.  

Wed Oct 16 14:04:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Show total size even after resume.  

Wed Oct 16 13:50:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: entity.inc, uni_7b.inc:

	Interesting.. recommitted the autogenerated files, there's some diff
	here for me.  

Wed Oct 16 09:21:10 2002  Laurent Monin <zas@norz.org>:

	* src/intl/: codepage.inc, entity.inc, uni_7b.inc:

	Codepages were regenerated.  

Tue Oct 15 19:46:12 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS, intl/polish.lng, src/intl/language.inc:

	Polish translation was updated. Patch by Witold Filipczy 

Tue Oct 15 13:51:55 2002  Laurent Monin <zas@norz.org>:

	* intl/polish.lng, src/intl/language.inc:

	Polish translation was updated. Patch by Witold Filipczyk
	<witekfl@poczta.onet.pl>.  

Mon Oct 14 21:32:18 2002  Laurent Monin <zas@norz.org>:

	* Unicode/8859_15.cp:

	Unicode ISO-8859-15 codepage was fixed (latin small letter z with
	caron has the correct code now). Patch by witekfl.  

Mon Oct 14 16:07:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed bookmarks movement saving, patch by Daniel Lublin
	<lists@lublin.nu>.  

Sun Oct 13 19:18:10 2002  Laurent Monin <zas@norz.org>:

	* TODO:

	links -> ELinks.  

Sun Oct 13 19:08:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Fix of previous fix.  

Sun Oct 13 19:06:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Swap also PORT/CWD. Thanks, zas.  

Sun Oct 13 19:01:16 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Directory name in titles is now html escaped.  

Sun Oct 13 18:57:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	FTP support for downloads resuming, patch by Witekfl and me.  

Sun Oct 13 18:45:25 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Directory name in titles is now html escaped.  

Sun Oct 13 18:43:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Switch order of PORT/PASV and REST, patch by Witold.  

Sun Oct 13 18:35:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Test if lseek() didn't fail.  

Sun Oct 13 18:28:53 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	We shrink! We shrink! 

Sun Oct 13 18:20:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed problem with resuming download of file being downloaded :^).
	Patch by Witold.  

Sun Oct 13 17:41:12 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/document.c, globhist/globhist.c,
	protocol/ftpparse.c, protocol/ftp/ftpparse.c:

	We include time.h only if we have it.  

Sun Oct 13 17:30:30 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	We only include unistd.h if we have it.  

Sun Oct 13 16:17:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Another error with download resuming fixed - now, it _basically_
	works if you are very lucky ;). Patch by Witold and me (note that
	previous patch was by Witold and me as well).  

Sun Oct 13 16:10:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Fixed HTTP error occuring when one tries to resume a download.  

Sun Oct 13 15:49:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Some more download resuming fixes, patch by Witold and me. I should
	also test this sometimes, I suppose ;-). Damn, and another afternoon
	spent by unwoving the ball of dependencies between various
	mysterious structs.  

Sun Oct 13 13:27:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, lowlevel/sched.c, lowlevel/sched.h:

	Some download resume related fixes (still doesn't work, though),
	nice comments in struct remaining_info. Patch by Witold and me.  

Sun Oct 13 13:06:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Minor tidyups and anti-headache fix for future in resuming by Witold
	;-).  

Sun Oct 13 12:44:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	struct remaining_info * is now always named prg, makes grepping for
	strange things a joy.  

Sun Oct 13 12:11:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c:

	Introduced config_saving_style, permits you to choose what you want
	to have written to elinks.conf actually.  

Sun Oct 13 12:06:25 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/lua/hooks.lua.in:

	New dumbprefixes, introduced %c substitution for current_url. Patch
	by Grzegorz Adam Hankiewicz <gradha@terra.es>.  

Sun Oct 13 12:00:53 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Fixed error if getenv is nil.  

Sun Oct 13 07:03:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Trivial tidyup.  

Sun Oct 13 00:37:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Three bugs in one line of code - inbelievable ;-). Fixed passive
	FTP6.  

Sat Oct 12 23:47:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Fixed dain bramaged if() causing FTP6 always fail if pasv was
	enabled and epsv disabled.  

Sat Oct 12 23:42:11 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	We only want to include fcntl.h if we have it.  

Sat Oct 12 23:36:55 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	We only want to include fcntl.h if we have it.  

Sat Oct 12 22:50:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed protocol.ftp.use_epsv 

Sat Oct 12 22:03:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed -lookup.  

Sat Oct 12 21:41:07 2002  Petr Baudis <pasky@ucw.cz>:

	* doc/hacking.txt:

	Where to find more documentation about some part of ELinks.  

Sat Oct 12 20:31:07 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING, doc/hacking.txt:

	Moved HACKING to doc/hacking.txt.  

Sat Oct 12 19:53:02 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Attempt to fix -R stuff, #1.  

Sat Oct 12 19:49:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Quick fix for random memory shooting problem caused by downloads
	resuming.  

Sat Oct 12 18:55:15 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Simpler way to preserve aligment of fields, and to tell user perms
	are missing.  

Sat Oct 12 18:33:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/widget.c:

	Properly adjust vpos of input field when browsing the input field
	history.  
	
	Fixes: 
	
	-- 
	
	also when one scrolls up and down in the goto URL dialog, if the URL
	is rather long you get sent to the end of the line of all of the
	other URL's .. like.. say 
	
	
	http://www.google.com/monkey/pig/shenanigans/farm/tuberculosis/moose/index.html
	
	was the first URL, you'd see maybe moose/index.html .. and when you
	scroll up to the previous URL, which was http://www.google.com, you
	see only a blank line (you have to hit home or the left arrow to get
	back) 
	
	-- 
	
	reported by <matr1x@shaw.ca>.  

Sat Oct 12 17:55:10 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	FTP directory list fields consistency was improved. A little hack is
	used to print perms even if not sent by ftp server. If time isn't
	known as local, then a - is printed.  

Sat Oct 12 16:34:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	win_handler() should handle properly case when it's called with a
	NULL ses. That should fix the first leds update race as reported by
	<kuser@gmx.de>.  

Sat Oct 12 16:27:15 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/ssl/ssl.c:

	In a nutshell, on OS's without a /dev/urandom, the OpenSSL library
	cannot initialize the PRNG and so every attempt to use SSL fails. 
	It's actually an OpenSSL FAQ, and according to them, it's up to the
	application coders to seed the RNG.  
	
	So, I've attached two patches to fix the problem.  It works for me
	without a problem (I use prngd, an egd clone).  The code is pretty
	much stolen from the URL above
	(http://archives.postgresql.org/pgsql-patches/2002-01/msg00070.php).  
	
	Patch by William Yodlowsky <wyodlows@andromeda.rutgers.edu>, ported
	to ELinks and minor changes by me.  

Sat Oct 12 16:25:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Let's try once more, properly ;).  

Sat Oct 12 16:25:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	In a nutshell, on OS's without a /dev/urandom, the OpenSSL library 
	cannot initialize the PRNG and so every attempt to use SSL fails.  
	It's actually an OpenSSL FAQ, and according to them, it's up to the 
	application coders to seed the RNG.  
	
	So, I've attached two patches to fix the problem.  It works for me
	without a problem (I use prngd, an egd clone).  The code is pretty
	much stolen from the URL above
	(http://archives.postgresql.org/pgsql-patches/2002-01/msg00070.php).  

Sat Oct 12 15:56:21 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Add -Rssldir/lib to LDFLAGS if needed, using OpenSSL and using gcc.
	Idea by William Yodlowsky <wyodlows@andromeda.rutgers.edu>.  

Sat Oct 12 15:49:24 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/osdep/os_dep.c, src/osdep/osdep.c:

	Currently elinks fails to find the terminal title if $WINDOWID is
	not the toplevel window but a child of one (happens eg. in
	multi-gnome-terminal).  This patch (adapted from vim 6) fixes this
	for me.  
	
	Patch by Michal Politowski <mpol@charybda.icm.edu.pl> and me.  

Sat Oct 12 15:39:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Compilation fix.  

Sat Oct 12 15:38:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Small optimalization while dumping, don't ever find_nearest_color().
	Patch by Witold.  

Sat Oct 12 15:12:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	-session-ring is added to commandline when launching new ELinks
	instances from ELinks, if relevant.  

Sat Oct 12 15:04:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, util/secsave.c:

	With -session-ring option, no files are touched on disk in same way
	as with -no-connect.  

Sat Oct 12 15:01:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Fixed segfault with two ELinks together, each one trying to get
	somewhere ;-).  

Sat Oct 12 14:51:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/session.c, lowlevel/af_unix.c,
	lowlevel/interlink.c:

	Properly documented -base-session (_finally_ description of what it
	_really_ does ;). Introduced -session-ring option which enables you
	to run multiple 'session rings' at once, not only one as until now.
	Will be good for development convenience ;).  

Sat Oct 12 14:17:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftpparse.c, ftpparse.h, ftp/ftp.c,
	ftp/ftpparse.c, ftp/ftpparse.h:

	Show permissions in directory listing.  

Sat Oct 12 13:59:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Now size is displayed in directory listing everytime when we know
	it, even near directories.  

Sat Oct 12 13:57:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Now displaying of .. and other items share same code.  

Sat Oct 12 13:35:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Moved displaying of single items in directory listing to special
	function.  

Sat Oct 12 12:44:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, widget.h:

	Introduced height property of a widget, being used in listbox which
	has dynamic height now.  

Fri Oct 11 19:24:20 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Link to upper directory is now "..".  

Fri Oct 11 18:32:17 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	A link to upper directory was added in ftp directory listing.  

Fri Oct 11 15:51:17 2002  Laurent Monin <zas@norz.org>:

	* configure.in, src/main.c:

	We now take care of locale settings for error messages.  

Fri Oct 11 15:32:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, dialogs/hierbox.c:

	The bookmarks dialog has now maximal possible width.  

Fri Oct 11 07:37:40 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation was updated.  

Thu Oct 10 21:40:21 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/config/kbdbind.c, src/config/kbdbind.h,
	src/document/download.c, src/document/download.h,
	src/document/dump.c, src/document/session.c, src/document/view.c,
	src/intl/lang_defs.h, src/intl/language.inc, src/lowlevel/sched.c,
	src/lowlevel/sched.h, src/protocol/http/http.c:

	Support for downloads resuming by Witold (only HTTP currently, is
	triggered by 'r' now, not tested at all ;), very very minor changes
	by me.  

Thu Oct 10 21:19:45 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/russian.lng, src/intl/language.inc:

	Russian translation update by Cyril Slobin <slobin@ice.ru>.  

Thu Oct 10 21:08:53 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Italian translation update by Fabio.  

Wed Oct  9 13:01:29 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	We now use set_nonblocking_fd() instead of fnctl() call.  

Wed Oct  9 08:26:58 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation was updated.  

Tue Oct  8 22:13:03 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre18.CVS 

Tue Oct  8 22:10:49 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre18 

Tue Oct  8 22:09:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Goto URL now does nothing if it is triggered upon a folder.  

Tue Oct  8 22:07:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/dialogs.c:

	Fixed case when tree is at the end of the root list. Add folder now
	behaves like folder would be a regular item if folder is not
	expanded.  

Tue Oct  8 21:20:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Stuff is being moved _inside_ of only expanded folder - imploded
	ones behave as normal items when selecting destination; enables some
	previously impossible moves, makes stuff more intuitive hopefully.  

Tue Oct  8 21:18:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed moving of folders around inside of marked folder (or whatever
	ugly it did to me.. ;).  

Tue Oct  8 21:16:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/edit.c:

	Don't require URL being non-empty in bookmark edit dialog.  

Tue Oct  8 21:15:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed seeking for URL's end, we don't fail if URL is empty anymore
	when loading bookmarks.  

Tue Oct  8 20:48:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/dialogs.c:

	Support for moving of bookmarks around.  

Tue Oct  8 18:41:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bfu/listbox.c, dialogs/hierbox.c:

	And then I said, let the insert button work! Also, fixed displaying
	of the mark. We now move down after marking smt.  

Tue Oct  8 16:56:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bfu/listbox.c, bfu/listbox.h,
	dialogs/hierbox.c:

	Support for marked items (Insert marks them, TODO: keybind that?) 

Mon Oct  7 20:43:12 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bookmarks/dialogs.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Removed T_BOOKMARK_TITLE and ghost strings array.  

Mon Oct  7 20:42:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Static mania.. you gotta have an headache from global
	push_delete_button symbol.  

Mon Oct  7 20:37:46 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bfu/hierbox.c, src/bookmarks/dialogs.c, src/dialogs/hierbox.c,
	src/intl/lang_defs.h, src/intl/language.inc:

	Added move button to the bookmarks manager. Does nothing yet, but
	nice start, isn't it? ;) 

Sat Oct  5 09:20:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, globhist/dialogs.c:

	Instead of an empty menu_history_manager in src/globhist/dialogs.c, 
	#ifdef out the call to menu_history_manager in src/document/view.c.
	This is more consistant with how it is handled in src/dialogs/menu.c
	and with bookmarks.  
	
	 -- Miciah <miciah@myrealbox.com> 

Fri Oct  4 19:11:45 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/view.c:

	Option number_keys_select_link is now a tristate: 0 never 1 if
	document.browse.links.numbering = 1 (default) 2 always 
	
	Patch by Miciah.  

Fri Oct  4 19:05:19 2002  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	The follow-link binding was removed. Where the user previously
	pressed 12L the user now presses 12<enter>.  And now the user can
	also press 12d to download the twelfth link. When one adds bindings
	o = open-link-in-new-window, i = download-image, and v = view-image,
	the world begins to make much sense.  Patch by Miciah.  

Fri Oct  4 17:50:54 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Minor compilation fix.  

Thu Oct  3 11:38:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed fatal typo in the last fix.  

Thu Oct  3 11:36:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed segfault if ^T is pressed in textarea in non-master terminal.  

Wed Oct  2 15:29:55 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Cosmetical changes.  

Wed Oct  2 15:25:48 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	An useless line was removed.  

Wed Oct  2 15:12:36 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	sscanf() call was dropped.  

Wed Oct  2 14:07:31 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	One more step to EPSV support, still not fully tested.  

Wed Oct  2 10:08:45 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Some unused variables were removed.  

Wed Oct  2 08:52:06 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Some comments were added.  

Wed Oct  2 08:48:17 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftpparse.h, ftp/ftpparse.c,
	ftp/ftpparse.h:

	Tidyup. Char type was replaced by unsigned char type.  

Wed Oct  2 08:46:43 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Some code concerning EPSV support was added. Thanks to Witold.  

Wed Oct  2 07:29:44 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Fullname for Arun ;) 

Tue Oct  1 17:11:46 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c:

	Tidyup and conformance to HACKING document.  

Tue Oct  1 16:31:16 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftpparse.c, ftp/ftpparse.c, ftpparse.h,
	ftp/ftpparse.h:

	$Id stuff was added.  

Tue Oct  1 16:28:01 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS, src/protocol/Makefile.am, src/protocol/ftp.c,
	src/protocol/ftpparse.c, src/protocol/ftpparse.h,
	src/protocol/ftp/ftp.c, src/protocol/ftp/ftpparse.c,
	src/protocol/ftp/ftpparse.h:

	FTP directory listing is now handled via ftpparse from D.J.
	Bernstein, we now support many more formats.  

Tue Oct  1 16:18:47 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS, src/config/options.c:

	Updated Witold email address, PASV is now enabled by default.  

Tue Oct  1 15:54:20 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS, src/config/options.c, src/protocol/ftp.c,
	src/protocol/ftp/ftp.c:

	FTP PASV support (disabled by default for now), EPSV will come
	later. Patch by Witold Filipczyk and me.  

Wed Sep 25 19:41:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed segfault when bookmark is added outside of a bookmark dialog.  

Mon Sep 23 12:35:29 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	And now done it in a way so that it actually works.  

Mon Sep 23 10:24:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, lowlevel/kbd.h:

	This wasn't supposed to be commited (yet) ;-).  

Mon Sep 23 10:23:26 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/document/view.c, src/lowlevel/kbd.h:

	Fix configure for systems with zlib.h but without libz. *brr* 

Sun Sep 22 16:34:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed leak when folder was deleted.  

Sun Sep 22 15:36:27 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation updates.  

Sun Sep 22 15:33:20 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bfu/hierbox.c, src/bookmarks/bookmarks.c,
	src/bookmarks/bookmarks.h, src/bookmarks/dialogs.c,
	src/dialogs/hierbox.c, src/intl/lang_defs.h, src/intl/language.inc:

	Add folder button. Disabled jumping around like mad monkey when
	adding a bookmark.  

Thu Sep 19 15:49:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: generic.h, os_dep.h, os_depx.h, osdep.h:

	More OS/2 fixes - define USE_OPEN_PREALLOC soon enough; unify EMX
	wrappers, define HAVE_STRNCASECMP because we wrap it to strnicmp. By
	criguada.  

Thu Sep 19 15:25:54 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.vim:

	Update of elinks.vim by Jonas, based also on some suggestions by
	Zas.  

Thu Sep 19 15:24:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Depth has now 5 bytes, synced reading and writing; thanks, zas.  

Wed Sep 18 17:23:51 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	When looking for zlib/bzlib, actually check for functions we even
	use.  

Wed Sep 18 16:35:42 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/links.h, src/document/download.c:

	Some OS/2 fixes by <criguada@libero.it>.  

Wed Sep 18 16:07:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/download.c, lowlevel/terminal.c,
	lowlevel/terminal.h:

	Optionally emit a bell when download is completed, patch by Andre
	Valente.  

Wed Sep 18 15:59:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Include termios.h - compilation fix for diet-libc.  

Wed Sep 18 14:08:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Some search-related comments and tidyups.  

Wed Sep 18 12:58:55 2002  Laurent Monin <zas@norz.org>:

	* src/: encoding/encoding.c, util/encoding.c:

	Minor compilation fix.  

Tue Sep 17 21:43:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/dialog.c, bfu/listbox.c, bfu/hierbox.c,
	dialogs/hierbox.c, globhist/dialogs.c:

	Moving most of listbox kbd event handlers to bfu/listbox.* from
	various copies all around the code. A bit hackish, but better than
	before, I'd say.  

Tue Sep 17 21:08:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	widget.c, widget.h:

	Added select widget handler, cleanups.  

Tue Sep 17 20:33:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	widget.h:

	Added keyboard event widget handler, moved input field kbd handler
	from bfu/dialog.* to bgu/inpfield.*.  

Tue Sep 17 18:42:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c:

	Mouse event widget handlers now return EVENT_(NOT_)PROCESSED isntead
	of simple 0/1.  

Tue Sep 17 17:17:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	We should shrink_memory(1) after script_hook_finish() - what if some
	script would like to touch something cached..? 

Tue Sep 17 17:17:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/hierbox.c, bfu/hierbox.h, bookmarks/dialogs.c,
	dialogs/Makefile.am, dialogs/hierbox.c, dialogs/hierbox.h:

	Moved some hiearchy boxes browser common stuff to dialogs/hierbox.*.
	This is only very preliminary, dialogs/hierbox.* is still
	bookmarks-specific.  

Tue Sep 17 17:11:02 2002  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Fix missing if (init_b) for global history.  

Tue Sep 17 16:58:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Jump to first item after search, not the last one.  

Tue Sep 17 16:56:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed set_bookmarks_visible() segfault (obvious as you look at it
	now) (fixes crashes during bookmarks search).  

Tue Sep 17 16:36:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Improved help of no-connect and touch-files.  

Tue Sep 17 16:29:05 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, util/secsave.c:

	-touch-files option was added. It forces file saving when
	-no-connect is used.  

Tue Sep 17 16:19:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	Fixed weirdness with handling of corner bookmarks (was causing
	crashes and infinite loops).  

Tue Sep 17 14:53:21 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Populate with mem_calloc().  

Tue Sep 17 14:49:49 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Populate with mem_calloc().  

Tue Sep 17 14:44:09 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Populate with mem_calloc().  

Tue Sep 17 14:40:19 2002  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Populate with mem_calloc().  

Tue Sep 17 14:36:48 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: auth/auth.c, http/auth.c, http/http.c, ftp.c,
	ftp/ftp.c:

	Populate with mem_calloc().  

Tue Sep 17 14:33:04 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/terminal.c, scripting/lua/core.c:

	Populate with mem_calloc().  

Tue Sep 17 14:29:44 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: kbd.c, sched.c:

	Populate with mem_calloc().  

Tue Sep 17 14:25:36 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: af_unix.c, interlink.c, connect.c, dns.c:

	Populate with mem_calloc().  

Tue Sep 17 14:21:50 2002  Laurent Monin <zas@norz.org>:

	* src/: document/view.c, globhist/dialogs.c:

	Populate with mem_calloc().  

Tue Sep 17 14:09:36 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	Populate with mem_calloc().  

Tue Sep 17 13:56:15 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, cache/cache.c, document/cache.c:

	Populate with mem_calloc().  

Tue Sep 17 13:50:37 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/edit.c, dialogs/mime.c, mime/dialogs.c:

	Populate with mem_calloc().  

Tue Sep 17 13:47:26 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Populate with mem_calloc().  

Tue Sep 17 13:43:00 2002  Laurent Monin <zas@norz.org>:

	* src/: bfu/msgbox.c, bookmarks/dialogs.c:

	Populate with mem_calloc().  

Tue Sep 17 13:38:08 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/: inpfield.c, menu.c:

	Populate with mem_calloc().  

Tue Sep 17 13:21:42 2002  Laurent Monin <zas@norz.org>:

	* src/intl/: charsets.c, language.c:

	Populate with mem_calloc().  

Tue Sep 17 10:29:32 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Minor optimizations. Make use of mem_calloc().  

Tue Sep 17 10:20:15 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Minor optimizations. Make use of mem_calloc().  

Mon Sep 16 12:57:32 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/README, contrib/hpux-pipe.diff, src/lowlevel/kbd.c:

	Fix for HPUX pipe handling - patch by Jonas Fonseca, based on an old
	patch by Stephane Chazelas <Stephane_Chazelas@Yahoo.fr>.  

Sun Sep 15 21:03:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Stupid BSD; gotta really hate it. Compilation fixes there.  

Sun Sep 15 15:32:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c:

	Added flags field to the bookmarks file, now each listbox_item is
	either a folder or a leaf, saved which folders are expanded and
	which aren't.  

Sat Sep 14 21:58:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/: bookmarks.c, dialogs.c:

	Space now (un)expands folders. All folders are now unexpanded upon
	startup.  

Sat Sep 14 21:48:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Enhancements in hiearchic listboxes (bookmarks) rendering - now no
	superfluous lines are drawn (we're now better than Links ;), and
	also cute mini-asciiart is used for the ends of the lines.  

Sat Sep 14 21:24:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed sometimes misinterpreted depth of bookmarks when loading them.  

Sat Sep 14 21:21:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Fixed writing of hiearchic bookmarks.  

Sat Sep 14 20:53:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c:

	Removed order item of struct listbox_data - now redundant.  

Sat Sep 14 20:20:19 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/bulgarian.lng, src/intl/language.inc:

	Bulgarian translation updated by Dimitar Dimitrov
	<mitaka_ddd@yahoo.com>.  

Sat Sep 14 19:56:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/bookmarks.c, bookmarks/dialogs.c:

	Hiearchical bookmarks support. It's here. Along with various fixes
	regarding to translate() and fixes in rendering of hiearchical
	listboxes. Also again normalizes bookmarks listbox items order. But
	it's all mainly about hiearchical bookmarks support ;-). Yet you
	can't create them from the UI yet, and it looks a bit ugly - will be
	fixed in next commits.  

Sat Sep 14 14:13:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fixed one possible warning about exit(), thanks to Dmitry.  

Sat Sep 14 12:09:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	Preliminary support for rendering of multi-depth lists.  

Sat Sep 14 11:10:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Minor goto cleanup based on patch by Jonas.  

Sat Sep 14 09:16:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/connect.c:

	Compilation fix, thanks, Dmitry.  

Sat Sep 14 07:48:49 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation was updated.  

Fri Sep 13 21:06:35 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING, README:

	Fixed by David Mediavilla.  

Fri Sep 13 20:50:14 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING, INSTALL:

	Grammar fixes and readibility improvements by Vallimar
	<vallimar@sexorcisto.net>.  

Fri Sep 13 20:45:37 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/elinks.vim:

	elinks.vim update by Jonas.  

Fri Sep 13 20:34:58 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/document/download.c:

	Unique download filenames support (document.download.overwrite=1, by
	default 0) by Jonas.  

Fri Sep 13 20:29:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, util/Makefile.am, util/file.c,
	util/file.h:

	Introduced some file util functions, including preparation for
	support for unique suffixes for the downloaded files. Patch by
	Jonas.  

Fri Sep 13 20:19:36 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/slovak.lng, src/intl/language.inc:

	Updated slovakian translation by Peter Samek.  

Fri Sep 13 20:18:46 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/english.lng, src/intl/language.inc:

	Updated help string for mailto/telnet/tn3270 setup dialog, patch by
	Peter Samek.  

Fri Sep 13 16:23:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/document.c:

	Fixed segfault when frameset contains URL whose DNS resolving
	failed. We still don't handle that very elegantly, but solution of
	that is 0.5 stuff.  

Fri Sep 13 16:05:49 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.h:

	A comment about states values was added. Negative values now start
	at -10000 instead of -1000.  

Fri Sep 13 15:17:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	Fixed bug that box top was moved to the new bookmark when a bookmark
	was added.  

Fri Sep 13 15:05:53 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	A function send_cmd() was introduced to remove some code redundancy.
	ftp_pass() was added.  

Fri Sep 13 13:10:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Added default keybinding of goto-url-home to [HmM].  

Thu Sep 12 21:54:19 2002  Petr Baudis <pasky@ucw.cz>:

	* README:

	Readibility improvements, based on a patch by Vallimar
	<vallimar@sexorcisto.net>.  

Thu Sep 12 21:12:39 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/options.c, src/ssl/TODO, src/ssl/connect.c:

	Some paranoia introduced by a patch base on work and suggestions of
	Mario Lorenz <ml@vdazone.org> - introduced option
	connection.ssl.cert_verify (by default off), optionally allowing
	OpenSSL to verify the peer (always fails without proper
	configuration of OpenSSL :/ ) - attempts to fight against the SSL
	chaining vulnerability.  

Thu Sep 12 20:11:24 2002  Laurent Monin <zas@norz.org>:

	* README:

	Minor fixes and additions.  

Thu Sep 12 17:55:59 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: README, elinks-vim.diff, elinks.vim:

	Added elinks.conf vim syntax file by Jonas.  

Thu Sep 12 17:16:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c, AUTHORS:

	Typo fix by Jonas.  

Thu Sep 12 17:07:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	When deleting a bookmark, move the pointer to the item below rather
	than above => much more intuitive and natural (tm) ;-).  

Thu Sep 12 17:02:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/: bookmarks.c, bookmarks.h, dialogs.c:

	Some preparation steps for the hiearchical bookmarks.  

Thu Sep 12 16:42:45 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: beos.c, beos/beos.c:

	Minor tidyup.  

Thu Sep 12 16:38:33 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: win32.c, win32/win32.c:

	Minor tidyup.  

Thu Sep 12 16:33:53 2002  Laurent Monin <zas@norz.org>:

	* src/scripting/lua/core.c:

	Tidyup, minor optimizations, conformance to HACKING document.  

Thu Sep 12 14:46:28 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	ftp_end_request() now accepts connection state as second parameter.  

Thu Sep 12 14:40:37 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Most functions are now static. Some useless prototypes were removed.  

Thu Sep 12 14:24:03 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/sched.h, protocol/ftp.c, protocol/ftp/ftp.c:

	Code redundancy was reduced by adding a generic get_resp() function
	and passing callback function in struct connection.  

Thu Sep 12 13:11:13 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Function declarations are now conform to HACKING document.  

Thu Sep 12 13:00:14 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/sched.c, protocol/http/http.c:

	Populate with abort|retry_conn_with_state().  

Thu Sep 12 12:54:34 2002  Laurent Monin <zas@norz.org>:

	* src/ssl/connect.c:

	Populate with abort|retry_conn_with_state().  

Thu Sep 12 12:50:20 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: http/http.c, ftp.c, ftp/ftp.c:

	Populate with abort|retry_conn_with_state().  

Thu Sep 12 12:46:57 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/connect.c:

	Populate with abort|retry_conn_with_state().  

Thu Sep 12 12:37:59 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: sched.c, sched.h:

	retry_conn_with_state() was introduced.  

Thu Sep 12 12:05:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Fixed compilation problem when ipv6 support is disabled.  

Wed Sep 11 21:04:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, lowlevel/sched.c,
	lowlevel/sched.h, protocol/ftp.c, protocol/ftp/ftp.c:

	Support for EPRT FTP command => FTP over IPv6 is now supported.  

Wed Sep 11 18:37:33 2002  Laurent Monin <zas@norz.org>:

	* src/util/: memdebug.h, string.c, string.h:

	Better handling of LEAK_DEBUG option, headers were cleaned,
	performance improvement when DEBUG is disabled. init_str_x() was
	renamed debug_init_str().  

Wed Sep 11 17:26:15 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre17.CVS 

Wed Sep 11 16:31:30 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.h:

	Minor compilation fix.  

Wed Sep 11 16:16:19 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre17 

Wed Sep 11 16:10:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/string.c:

	Linking fix - forgot to convert this one from casecmp() to
	strncasecmp().  

Wed Sep 11 15:58:28 2002  Laurent Monin <zas@norz.org>:

	* src/: protocol/http/blacklist.c, util/base64.c, util/blacklist.c:

	Minor tidyup.  

Wed Sep 11 15:33:32 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/: terminal.c, terminal.h:

	Minor optimizations: some trivial functions were converted to
	macros.  

Wed Sep 11 15:10:41 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	Conformance to HACKING document improved.  

Wed Sep 11 12:45:34 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Fix minor typos in comments.  

Tue Sep 10 20:20:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c:

	Fixed sort order of the bookmarks.  

Tue Sep 10 15:12:14 2002  Laurent Monin <zas@norz.org>:

	* src/document/: options.c, options.h, html/renderer.c:

	Optimizations concerning display_su[bp]s options in put_chars().  

Tue Sep 10 14:30:27 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/colors.c:

	Improved conformance of function declarations to HACKING document.  

Tue Sep 10 14:28:24 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/tables.c:

	Tidyup. Improved conformance of function declarations to HACKING
	document. Minor optimizations.  

Tue Sep 10 14:11:27 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Tidyup. Improved conformance of function declarations to HACKING
	document.  

Tue Sep 10 13:40:02 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Tidyup. Improved conformance of function declarations to HACKING
	document.  

Tue Sep 10 13:21:53 2002  Laurent Monin <zas@norz.org>:

	* src/document/history.c:

	Minor tidyup.  

Tue Sep 10 13:15:55 2002  Laurent Monin <zas@norz.org>:

	* src/document/dump.c:

	Minor tidyup.  

Tue Sep 10 13:13:09 2002  Laurent Monin <zas@norz.org>:

	* src/document/download.c:

	Minor optimization concerning get_opt_*() calls.  

Tue Sep 10 11:13:32 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/: button.c, checkbox.c, dialog.c, group.c, inpfield.c,
	inphist.c, menu.c, msgbox.c, text.c, widget.c:

	Tidyup, useless comments removed, conformance to HACKING document,
	minor optimizations.  

Mon Sep  9 16:04:18 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/finger.c:

	Minor tidyup.  

Mon Sep  9 15:58:43 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Minor tidyup.  

Mon Sep  9 15:55:04 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/https.c:

	Minor tidyup.  

Mon Sep  9 15:50:16 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/: http.c, date.c:

	Minor tidyup.  

Mon Sep  9 15:47:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	HOST_FROM_URL -> GET_REAL_URL 

Mon Sep  9 15:44:06 2002  Laurent Monin <zas@norz.org>:

	* src/: osdep/os_dep.c, osdep/osdep.c, protocol/ftp.c,
	protocol/ftp/ftp.c:

	Minor tidyup.  

Mon Sep  9 14:32:55 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/options.c, cache/cache.c, document/cache.c:

	Minor optimization concerning some get_opt_*() calls.  

Mon Sep  9 14:26:05 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Minor optimization concerning get_opt_int_tree() calls.  

Mon Sep  9 12:55:41 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, lowlevel/connect.c, lowlevel/dns.c, osdep/os_dep.c,
	osdep/osdep.c, protocol/http/http.c:

	Populate with set_[non]blocking_fd() functions.  

Mon Sep  9 12:36:45 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, os_dep.h, osdep.c, osdep.h:

	set_nonblocking_fd() and set_blocking_fd() were introduced.  

Mon Sep  9 12:29:12 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Tidyup and clarifications.  

Sun Sep  8 20:49:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/globhist/globhist.c:

	Moved trimming of the global history list before allocation of the
	new history item, based on the patch by Jonas Fonesca
	<fonesca@diku.dk>. Fixes segfault when the global history is too
	big.  

Sun Sep  8 20:42:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Trivial - remove one useless check.  

Sun Sep  8 19:43:51 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Referer header is no more sent when fake referer is set but empty.  
	Minor optimizations concerning redundant get_opt_str() calls.  Minor
	tidyup.  

Sun Sep  8 19:18:14 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng, src/intl/language.inc:

	Spanish translation update by David Mediavilla.  

Sun Sep  8 19:13:56 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Italian translation update by Fabio.  

Sun Sep  8 19:13:15 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	casecmp() -> strncasecmp(), use our version only if libc doesn't
	offer anything. Patch by Fabio Bonelli <fabiobonelli@libero.it>.  

Sun Sep  8 19:12:21 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/cookies/cookies.c, src/document/download.c,
	src/document/view.c, src/document/html/parser.c,
	src/document/html/tables.c, src/lowlevel/sched.c,
	src/protocol/ftp.c, src/protocol/url.c, src/protocol/ftp/ftp.c,
	src/protocol/http/header.c, src/util/string.c, src/util/string.h:

	casecmp() -> strncasecmp(), use our version only if libc doesn't
	offer anything.  

Sun Sep  8 18:07:03 2002  Laurent Monin <zas@norz.org>:

	* HACKING:

	Various fixes and additions.  

Sat Sep  7 10:14:40 2002  Laurent Monin <zas@norz.org>:

	* AUTHORS:

	Some additions to reflect reality ;) 

Sat Sep  7 10:01:53 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, dialogs/document.c, document/session.c,
	document/html/parser.c, globhist/globhist.c:

	#ifdef/#endif are now used instead of empty declarations when
	--disable-globhist is used.  

Sat Sep  7 09:57:38 2002  Laurent Monin <zas@norz.org>:

	* src/config/urlhist.c:

	Reverted last patch -> not useless ;P 

Sat Sep  7 09:40:13 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, bookmarks/bookmarks.c:

	#ifdef/#endif are now used instead of empty declarations when
	--disable-bookmarks is used.  

Sat Sep  7 09:32:50 2002  Laurent Monin <zas@norz.org>:

	* src/: main.c, cookies/cookies.c, protocol/http/http.c,
	document/view.c:

	#ifdef/#endif are now used instead of empty declarations when
	--disable-cookies is used.  

Sat Sep  7 09:14:28 2002  Laurent Monin <zas@norz.org>:

	* src/config/urlhist.c:

	An useless url[strlen(url)-1] = 0; in load_url_history() fgets()
	loop was removed.  

Sat Sep  7 09:06:29 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Tidyup and minor optimizations concerning get_bfu_color() call.  

Sat Sep  7 08:53:27 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/mime.c, mime/dialogs.c:

	Minor optimization concerning get_bfu_color() call.  

Sat Sep  7 08:48:03 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/edit.c:

	Minor optimization concerning get_bfu_color() call.  

Sat Sep  7 08:44:03 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	Tidy up and minor optimization concerning get_bfu_color() call.  

Fri Sep  6 16:21:28 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Compilation fix in the italian translation.  

Fri Sep  6 15:42:00 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Italian translation update, patch by Fabio.  

Thu Sep  5 21:02:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/colors.c:

	Compilation fix.  

Thu Sep  5 17:30:55 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/polish.lng, src/intl/language.inc:

	Polish translation updates by Jakub Bogusz <qboosh@pld.org.pl>.  

Thu Sep  5 16:21:39 2002  Laurent Monin <zas@norz.org>:

	* src/globhist/globhist.c:

	Performance optimization using code duplication in
	get_global_history_item().  

Thu Sep  5 15:26:18 2002  Laurent Monin <zas@norz.org>:

	* src/document/view.c:

	Tidyup. Minor optimizations.  

Thu Sep  5 10:10:22 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/setup.h, src/dialogs/menu.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	A menu item was added in Help dialog, it permits direct access to
	ELinks home page (configured in setup.h).  

Wed Sep  4 16:43:37 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Tidyup. Cleaner comments. Move file size extraction from RETR
	response to a separate function.  

Wed Sep  4 16:02:52 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	A bug introduced in last commit related to ftp directory listing was
	fixed.  

Wed Sep  4 15:43:22 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, config/opttypes.c,
	document/html/colors.c, document/html/colors.h, protocol/file.c,
	protocol/file/file.c, protocol/ftp.c, protocol/ftp/ftp.c:

	Directories color in ftp and file mode is now configurable via
	document.colors.dir option.  

Tue Sep  3 08:05:37 2002  Laurent Monin <zas@norz.org>:

	* src/intl/language.c:

	RFC1766 is obsolete, it was replaced by RFC3066. A minor typo was
	fixed.  

Mon Sep  2 21:24:35 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Some defaults for sizeofs - surpress some stupid autoconf warnings.  

Mon Sep  2 21:08:36 2002  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, contrib/.cvsignore, contrib/lua/.cvsignore:

	Some more autogenerated files go to .cvsignore, suggestion by
	Fissie.  

Mon Sep  2 19:36:36 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng, src/intl/language.inc:

	Spanish translation update by David Mediavilla.  

Mon Sep  2 19:29:51 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/slovak.lng, src/intl/language.inc:

	Slovak translation updates by Peter Samek <samek@upc.uniba.sk>.  

Mon Sep  2 19:02:47 2002  Petr Baudis <pasky@ucw.cz>:

	* elinks.1:

	Updated ELinks homepage URL in manpage, patch by Andre ;-).  

Mon Sep  2 17:49:10 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/README, intl/brazilian_portuguese.lng, intl/portuguese.lng,
	src/intl/language.c, src/intl/language.inc:

	Corrected language code of portugese and brazilian-portuguese,
	explained what's going on.  

Mon Sep  2 17:35:09 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/portuguese.lng,
	src/intl/language.inc:

	Updated Portuguese and Brazilian-Portuguese translation, by Andre.  

Sun Sep  1 12:06:24 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Added notice about building outside of the source tree. Also
	mentioned ./configure --help.  

Sun Sep  1 11:57:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, document/download.h,
	globhist/globhist.c, globhist/globhist.h, lowlevel/select.c,
	lowlevel/ttime.h, protocol/http/date.c, protocol/http/date.h,
	util/ttime.h:

	Strict use of ttime in place of time_t - prevention of mass of huge
	and complicated inclusions of sys/time.h vs time.h.  

Sun Sep  1 11:42:00 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/types.h:

	Sometimes, (u)int32_t can be found only in sys/types.h.  

Sun Sep  1 11:37:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/types.h:

	I'm stupid - sizeof obviously returns number of bytes, not bits
	;-)).  

Sun Sep  1 08:33:36 2002  Laurent Monin <zas@norz.org>:

	* INSTALL:

	Minor typos were fixed.  

Sat Aug 31 23:10:49 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	s/tp/to/ 

Sat Aug 31 21:40:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/TODO:

	Vision corrections ;-).  

Sat Aug 31 16:14:52 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation was updated.  

Sat Aug 31 00:31:29 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre16.CVS 

Sat Aug 31 00:30:49 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre16 

Sat Aug 31 00:27:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, globhist/dialogs.c,
	globhist/globhist.c, globhist/globhist.h:

	Introduced refcount to the world of global history as well.  

Fri Aug 30 23:38:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/dialogs.c:

	...what about two really-del dialogs per one bookmark? 

Fri Aug 30 23:38:15 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation update.  

Fri Aug 30 23:32:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, dialogs/edit.c, dialogs/edit.h,
	globhist/dialogs.c:

	..even when the edit dialog is cancelled.  

Fri Aug 30 23:21:01 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/portuguese.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng,
	src/bookmarks/bookmarks.c, src/bookmarks/bookmarks.h,
	src/bookmarks/dialogs.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Added refcount to struct bookmark as a protection to evil people
	trying to edit and delete a bookmark at once.  

Fri Aug 30 22:57:50 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Stale TODO items removed.  

Fri Aug 30 22:57:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/language.inc:

	Forgotten language updates.  

Fri Aug 30 22:55:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, globhist/dialogs.c,
	globhist/globhist.c, globhist/globhist.h:

	Multiple instances of listboxes should coexist quite nicely now -
	changed listbox_item.box to pointer to list_head.  

Fri Aug 30 22:10:21 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/hungarian.lng:

	Hungarian translation updates by Varga Balázs <vinnui@broadband.hu>.  

Fri Aug 30 15:00:01 2002  Laurent Monin <zas@norz.org>:

	* src/: config/opttypes.c, document/html/colors.c,
	document/html/colors.h:

	Colors in elinks.conf are now saved as names instead of rgb if
	possible.  

Fri Aug 30 13:41:41 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/portuguese.lng:

	Portuguese and Brazilian-Portuguese translation updates by Andre
	Valente <a.valente@netcabo.pt>.  

Fri Aug 30 10:58:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, globhist/dialogs.c, globhist/globhist.c:

	listbox_item.data -> listbox_item.box 

Fri Aug 30 10:12:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/view.c:

	Fixes in previous patch - reformulation of the help and
	simplification of the code :-).  

Fri Aug 30 10:00:03 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/view.c:

	Scroll margin is now configurable using
	document.browse.scroll_margin option.  

Fri Aug 30 09:26:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/: bookmarks.c, bookmarks.h, dialogs.c:

	Removed bookmark_id totally. At last. But this result in more work
	which will need to be done..  

Fri Aug 30 08:54:33 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/danish.lng, src/intl/language.inc:

	Danish translation update by Jonas.  

Fri Aug 30 08:53:55 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Added --without-gpm option.  

Thu Aug 29 23:58:22 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/dialogs/Makefile.am, src/dialogs/document.c,
	src/dialogs/globhist.c, src/dialogs/globhist.h, src/dialogs/menu.c,
	src/document/Makefile.am, src/document/globhist.c,
	src/document/globhist.h, src/document/session.c,
	src/document/view.c, src/document/html/parser.c,
	src/globhist/.cvsignore, src/globhist/.vimrc,
	src/globhist/Makefile.am, src/globhist/dialogs.c,
	src/globhist/dialogs.h, src/globhist/globhist.c,
	src/globhist/globhist.h:

	Moved global history stuff to src/globhist/*.  

Thu Aug 29 23:26:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, dialogs/globhist.c,
	document/globhist.c, document/globhist.h:

	Rewritten the 'search' feature (it works for global history now as
	well); now, we don't readd listbox_items, just mark them by
	unsetting visible attributed.  

Thu Aug 29 22:36:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/dialogs.c, document/globhist.c:

	Added attribute visible to listbox_item.  

Thu Aug 29 21:15:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.h, dialogs/globhist.c, document/globhist.c:

	Fixed deleting/replacing of the global history items.  

Thu Aug 29 21:14:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Extended API of traverse..(), now we can modify the offset inside of
	the callback.  

Thu Aug 29 17:20:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Hopefully finally fixed moving of cursor in the listbox.  

Thu Aug 29 16:28:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	Fixed moving of selection bar inside of the list.  

Thu Aug 29 15:34:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Fix in calling of hook in traverse_listbox_items_list() - now it's
	called for each item _from_ the start item, _except_ the final item;
	it was _except_ the start item, _with_ the final item before. More
	mouse items selection fixes.  

Thu Aug 29 15:22:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	If there's no box->top and box->sel, figure out some.  

Thu Aug 29 12:58:08 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/polish.lng, src/intl/language.inc:

	Polish translation updates by Grzegorz Golawski
	<grzegol@pld.org.pl>.  

Thu Aug 29 12:23:19 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/index.txt, intl/portuguese.lng, src/intl/lang_defs.h,
	src/intl/language.inc:

	Added portuguese language.  

Thu Aug 29 12:19:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c:

	Introduced commandline option -stdin - guess what it does ;).  

Thu Aug 29 11:48:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	dialogs/globhist.c:

	Infinite loop caused by attempt to display listbox fixed.  

Thu Aug 29 09:33:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, dialogs/globhist.c,
	document/globhist.c, document/globhist.h:

	Massive changes in internal API of listboxes - just too much
	changes, theoretically listbox is ready for hiearchic trees (except
	that it can't render them).. this comes along with need for massive
	restructuralization of bookmarks and global history stuff; it
	doesn't work now, will be fixed again soon; searching in global
	history a bit later ;-).  

Thu Aug 29 00:36:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/mime.c:

	Introduced some predefined autocreated options - few most common
	terminal types (terminal._template_.m11_hack not 1 by default
	anymore, terminal.linux.m11_hack is 1 by default, though), few most
	common extension->mime-type associations.  

Thu Aug 29 00:02:12 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre15.CVS 

Thu Aug 29 00:01:15 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre15 

Wed Aug 28 23:57:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Don't show goto dialog upon startup by default, it looks ugly when
	it overrides some other startup dialog ;-).  

Wed Aug 28 23:55:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/session.c, protocol/http/http.c:

	Be ugly to users. Be annoying. Beg things from them. If
	protocol.http.user_agent is empty or contains only one space, don't
	send User-Agent header, if protocol.http.user_agent is empty, show
	warning box on the startup telling the user that it's probably not
	what he wants.  

Wed Aug 28 23:27:31 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/conf.h, src/config/options.c:

	Introduced -eval option (evaluate configuration commands), patch by
	David D. Kilzer <ddkilzer@lubricants-oil.com>.  

Wed Aug 28 23:20:41 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/main.c, src/config/options.c:

	Support for -no-home (don't care about ~/.elinks at all), patch by
	David D. Kilzer <ddkilzer@lubricants-oil.com> and me.  

Wed Aug 28 23:10:28 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	pasky.ji.cz/elinks -> elinks.or.cz 

Tue Aug 27 19:01:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Now all URL sent (even referer URLs) aren't cleaned only from
	spaces, but also from tabs, CRs and LFs - security fix, thanks to
	Ulf Harnhammar.  

Tue Aug 27 17:22:01 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	We send only one Accept-Encoding header now. Temporary fix, should
	move to encoding.c as a function.  

Tue Aug 27 15:47:25 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation update.  

Tue Aug 27 15:45:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/http/http.c:

	protocol.http.user_agent is now format string, similiar to user
	protocol commands.  

Tue Aug 27 15:38:50 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/dialogs/document.c,
	src/intl/lang_defs.h, src/intl/language.inc:

	Translations for SSL cipher and Encoding in document info dialog.  

Tue Aug 27 13:31:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, cache/cache.c, cache/cache.h,
	document/cache.c, document/cache.h, encoding/encoding.c,
	encoding/encoding.h, protocol/http/http.c, util/encoding.c,
	util/encoding.h:

	Show encoding in document info.  

Tue Aug 27 13:02:16 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	removed obsolete items 

Tue Aug 27 12:52:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Show gzip/bzip2 support in about dialog.  

Tue Aug 27 12:27:21 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added new master site, http://elinks.or.cz/, and new master public
	CVS mirror, cvs.elinks.or.cz.  

Tue Aug 27 10:51:47 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, configure.in, src/links.h, src/ssl/connect.c,
	src/ssl/ssl.c:

	Migration from gnutls-0.4 to gnutls-0.5 - change in included file
	names.  

Tue Aug 27 10:01:00 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/: gen-7b, gen-cp, gen-ent:

	Strictly use 32bit-safe type for unicode values. And tiny SSL
	improvement.  

Tue Aug 27 07:51:00 2002  Laurent Monin <zas@norz.org>:

	* NEWS:

	Some typos were fixed.  

Tue Aug 27 03:22:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, protocol/http/date.c:

	Enhanced cookies debug, fix in HTTP date parser (first digit of day
	was eaten sometimes), somehow implemented secure cookies.  

Tue Aug 27 03:00:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: intl/charsets.c, intl/charsets.h, intl/codepage.inc,
	intl/entity.inc, intl/uni_7b.inc, lowlevel/terminal.c,
	lowlevel/terminal.h, ssl/connect.c:

	Strictly use 32bit-safe type for unicode values. And tiny SSL
	improvement.  

Tue Aug 27 02:13:57 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/util/Makefile.am, src/util/types.h:

	Introduced support for int32_t and uint32_t types - detection of
	them + wrapping them around when they're not defined by the system.
	Uff ;-).  

Tue Aug 27 01:33:05 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/tr7bit.awk, src/intl/uni_7b.inc:

	Now, we're even more ready for the hammer of UTF32 - fixed problem
	with values >= 0x10000 in 7-bit translations.  

Tue Aug 27 00:48:25 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen-7b, Unicode/gen-ent, src/intl/entity.inc,
	src/intl/uni_7b.inc:

	Use unsigned stuff for unicode table.s 

Tue Aug 27 00:43:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/charsets.c:

	In binary search, some stuff may be negative, but was unsigned -
	fixed. Thanks, Dmitry.  

Tue Aug 27 00:34:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Swapped VT100 and Linux terminal type number in description of
	terminal._template_.type. Thanks, Dmitry.  

Tue Aug 27 00:31:33 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian translation update by Dmitry.  

Tue Aug 27 00:17:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/menu.h, document/download.c,
	document/view.c:

	There's no file query when save-formatted action is emitted.  

Tue Aug 27 00:06:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Flush cache when forget-credentials.  

Mon Aug 26 23:40:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/session.c, document/view.c:

	Introduced auto-submit commandline option - automagically submit the
	first form you'll stumble upon.  

Sun Aug 25 20:15:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Comment *hint* *hint* ;-).  

Sun Aug 18 13:17:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Changed URL shell encoding from +XY to =XY=.  

Sun Aug 18 13:04:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/: charsets.c, charsets.h:

	Use unsigned int instead of int for unicode codes.  

Sun Aug 18 11:53:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	'v' now views image.  

Sun Aug 18 11:49:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Network options removed from menu in anonymous mode.  

Fri Aug 16 17:32:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/user.c:

	Fix of infinite loop if % is at the end of the cmd string.  

Mon Aug 12 01:40:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Generic tidyup.  

Mon Aug 12 01:30:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Rewritten last chunk detection so that it works properly now. Fixed
	partial downloads thru SSL and other possible bugs.  

Sun Aug 11 18:54:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: listbox.c, listbox.h:

	Added listbox_item.(parent,child), guess for what ;-).  

Sun Aug 11 18:25:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/inphist.c, bfu/listbox.c, bfu/listbox.h, bfu/menu.c,
	bfu/menu.h, bookmarks/dialogs.c, dialogs/globhist.c,
	dialogs/menu.c, dialogs/mime.c, dialogs/options.c, document/view.c,
	mime/dialogs.c, document/html/parser.c:

	box_item -> listbox_item, listbox_item_free -> item_free, item_free
	enum is now actually used..  

Sun Aug 11 18:07:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/listbox.c, bfu/listbox.h, bookmarks/dialogs.c,
	dialogs/globhist.c:

	dlg_data_item_data_box -> listbox_data 

Sun Aug 11 17:17:18 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO, BUGS:

	Updates.  

Sun Aug 11 13:49:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: timer.c, timer.h:

	Simple keyboard inactivity timer support (yes, someone can make use
	of this).  

Sat Aug 10 10:41:24 2002  Laurent Monin <zas@norz.org>:

	* src/config/options.c:

	A small typo preventing compilation was fixed.  

Fri Aug  9 12:55:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bfu/leds.c, config/options.c, lowlevel/Makefile.am,
	lowlevel/terminal.c, lowlevel/terminal.h:

	Simple keyboard inactivity timer support (yes, someone can make use
	of this).  

Thu Aug  8 20:46:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Exported some more keybinding interface.  

Thu Aug  8 19:51:40 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre14.CVS 

Thu Aug  8 19:50:59 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre14 

Thu Aug  8 19:50:44 2002  Petr Baudis <pasky@ucw.cz>:

	* test/subsup.html:

	Display [subs] and ^sups, optional (display.html.display_su[pb]s),
	enabled by default. Idea by Steve White <swhite@zipcon.net> and Lynx
	people.  

Thu Aug  8 18:54:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c:

	Display [subs] and ^sups, optional (display.html.display_su[pb]s),
	enabled by default. Idea by Steve White <swhite@zipcon.net> and Lynx
	people.  

Thu Aug  8 18:12:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/mime.c:

	Fixed critical bug in rmdots(), causing ELinks to fall into infinite
	loop everytime it could stumble upon MIME-type action evaluation.
	Too bad.  

Thu Aug  8 18:01:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c, config/opttypes.c,
	dialogs/Makefile.am, dialogs/edit.c, dialogs/menu.c,
	dialogs/mime.c, dialogs/mime.h, dialogs/options.c,
	document/download.c, document/session.c, mime/dialogs.c,
	mime/dialogs.h, protocol/Makefile.am, protocol/mime.c,
	protocol/mime.h, protocol/types.c, protocol/types.h,
	protocol/user.c:

	Split protocol/types.* to protocol/mime.* and dialogs/mime.*.  

Thu Aug  8 13:29:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/setup.h:

	Raise max username and passwd len for http auth from 20 to 40.  

Wed Aug  7 03:00:13 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/bfu/Makefile.am, src/bfu/button.c,
	src/bfu/checkbox.c, src/bfu/colors.h, src/bfu/dialog.c,
	src/bfu/group.c, src/bfu/inpfield.c, src/bfu/leds.c,
	src/bfu/listbox.c, src/bfu/menu.c, src/bfu/msgbox.c,
	src/dialogs/auth.c, src/dialogs/edit.c, src/dialogs/options.c,
	src/document/download.c, src/document/session.c,
	src/protocol/types.c, src/protocol/auth/dialogs.c,
	src/scripting/lua/core.c:

	Removed --enable-ui-colors configure parameter, config.h (now
	useless).  

Wed Aug  7 02:56:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/align.h, bfu/button.c, bfu/checkbox.c, bfu/colors.h,
	bfu/dialog.c, bfu/group.c, bfu/inpfield.c, bfu/leds.c,
	bfu/listbox.c, bfu/menu.c, bfu/msgbox.c, config/options.c,
	dialogs/auth.c, dialogs/edit.c, dialogs/options.c,
	document/download.c, document/session.c, document/html/colors.c,
	document/html/colors.h, document/html/renderer.c,
	protocol/auth/dialogs.c, protocol/types.c, scripting/lua/core.c:

	User Interface colors are now configurable.  

Wed Aug  7 00:57:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, config/options.h, document/dump.c,
	document/html/renderer.c:

	Document color settings more integrated to options system.  

Wed Aug  7 00:22:42 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre13.CVS 

Wed Aug  7 00:22:05 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre13 

Wed Aug  7 00:21:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	ui.startup_goto_dialog is now again enabled by default.  

Wed Aug  7 00:18:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/user.c:

	One innocent note...  

Wed Aug  7 00:09:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/user.c:

	Support for %<letter> expansions in user protocol handlers.  

Tue Aug  6 23:26:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, protocol/Makefile.am, protocol/mailto.c,
	protocol/mailto.h, protocol/url.c, protocol/user.c,
	protocol/user.h:

	protocol/mailto.* -> protocol/user.* 

Tue Aug  6 23:19:49 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, contrib/conv/conf-links2elinks.awk,
	contrib/conv/conf-links2elinks.pl:

	conf-links2elinks.awk -> conf-links2elinks.pl 

Tue Aug  6 22:54:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c, src/config/options.c, src/protocol/types.c,
	contrib/conv/conf-links2elinks.awk:

	Use '*' in place of '.' in extensions and mime types ('-' was
	substituting char in extensions before, you MUST change that in your
	config files).  

Tue Aug  6 10:10:48 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/scripting/lua/hooks.c:

	Fixed possible lua stack overflow during long sessions, patch by
	Fuzzy European King <james@place.org>.  

Tue Aug  6 10:07:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c, protocol/url.c,
	protocol/url.h, protocol/http/http.c:

	Fixed bad SAME_URL referer being snet when using proxy.  

Tue Aug  6 00:07:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/parser.c:

	Handle empty value properly.  

Mon Aug  5 19:53:31 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/document/session.c, src/lowlevel/terminal.c,
	src/lowlevel/terminal.h:

	Black startup dialogs fixed. What is uncle pasky like? ;-) (okok, it
	was terribly dirty hacked around for now) 

Wed Jul 24 09:39:35 2002  Laurent Monin <zas@norz.org>:

	* BUGS:

	Startup dialogs bug was added.  

Wed Jul 24 08:54:33 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Minor optimization.  

Tue Jul 23 14:17:29 2002  Laurent Monin <zas@norz.org>:

	* intl/german.lng, src/intl/language.inc:

	German translation was updated. Patch by Ingo Blechschmidt.  

Tue Jul 23 12:58:11 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/options.c, document/options.h,
	document/view.c, document/html/renderer.c:

	An option to choose number keys behavior (command prefixing or
	numbered links selection) was added.  

Tue Jul 23 12:30:28 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, document/globhist.c:

	Maximum number of entries in the global history is now configurable
	by user. Patch by Miciah and me.  

Tue Jul 23 10:01:23 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/info.c:

	A macro is now used in res_inf().  

Tue Jul 23 09:34:34 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/leds.c:

	Minor typo fix.  

Tue Jul 23 09:28:26 2002  Laurent Monin <zas@norz.org>:

	* src/bfu/dialog.c:

	Minor optimizations.  

Tue Jul 23 09:19:43 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/menu.c:

	Tidy up.  

Tue Jul 23 08:26:43 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	Updated french translation.  

Thu Jul 11 21:30:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Attempt to fix segfaults in GNUTLS upon quit.  

Thu Jul 11 21:28:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed displaying of --help.  

Thu Jul 11 21:12:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Reverted last patch, it belonged to different branch ;).  

Thu Jul 11 20:59:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Introduced home-forget, combines goto-url-home and
	forget-credentials.  

Thu Jul 11 20:22:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Mentioned that enabling ui.startup_goto_dialog may not be so
	*excellent* idea and turned it off by default.  

Thu Jul 11 16:16:56 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Changed ui-colors to disabled by default again; now it'll stay so
	until colors will be run-time configurable (then this option can
	disappear completely anyway).  

Thu Jul 11 16:14:51 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/config/options.c,
	src/dialogs/options.c, src/intl/lang_defs.h, src/intl/language.c,
	src/intl/language.h, src/intl/language.inc,
	src/protocol/http/http.c:

	Transparent content negotiation (accept-language based on ui
	language), patch by Fabio Bonelli <fabiobonelli@libero.it>.  

Thu Jul 11 11:14:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/session.c, lowlevel/terminal.c,
	lowlevel/terminal.h:

	ui.startup_goto_dialog works now, still enabled by default.  

Wed Jul 10 19:04:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Space behaves as enter in dialogs now. Ctrl/Alt+Enter behaves as
	space. >:) 

Wed Jul 10 10:08:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Messed up cleanup by me, fixed by Witold ;).  

Tue Jul  9 23:01:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	widget.c, widget.h:

	Moved EV_MOUSE handler to widget-specific files.  

Tue Jul  9 22:42:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: checkbox.c, dialog.c, inpfield.c, listbox.c, widget.h:

	Removed fwd parameter from init handler.  

Tue Jul  9 22:18:07 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre12.CVS 

Tue Jul  9 22:09:09 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS, configure.in:

	0.4pre12 

Tue Jul  9 22:03:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Comment update.  

Tue Jul  9 21:27:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	uncompress_data() partial rewrite, cleanup and simplification, patch
	by Witold.  

Tue Jul  9 21:16:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: encoding/encoding.c, util/encoding.c:

	Removed old stale mess ;), patch by Witold.  

Tue Jul  9 21:08:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Cleanup, focused on read_http_data().  

Tue Jul  9 20:28:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	add_fragment() returns something eelse 

Tue Jul  9 20:16:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	add_fragment() cleanup.  

Tue Jul  9 17:32:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.h, protocol/http/http.c:

	HTTP Content-Encoding gzip/bzip compression support, patch by me and
	Witold Filipczyk <witekfl@poczta.onet.pl>.  

Tue Jul  9 17:30:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Try to kill_timer more carefully..  

Tue Jul  9 15:43:46 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/document/download.c,
	src/document/download.h, src/intl/lang_defs.h,
	src/intl/language.inc:

	Possible to get notify upon completion when backgrounding a
	download. Patch by Andre Valente <a.valente@netcabo.pt>.  

Tue Jul  9 15:27:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Introduced action forget-credentials, guess what it does.  

Tue Jul  9 15:22:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/checkbox.c:

	..without debug()s.  

Tue Jul  9 15:21:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: button.c, checkbox.c, dialog.c, inpfield.c, listbox.c,
	widget.c, widget.h:

	Moved EV_INIT handlers to widget-specific files.  

Mon Jul  8 20:16:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/listbox.c:

	Listbox now uses menu colors.  

Mon Jul  8 17:20:09 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Superfluous parenthesis.  

Mon Jul  8 17:19:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, dialogs/menu.c,
	document/session.c, document/session.h, document/view.c:

	Introduced action goto-url-home.  

Mon Jul  8 17:01:54 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fixed enabling ui colors by default.  

Mon Jul  8 17:00:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Paranoia NULL ;).  

Mon Jul  8 15:24:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/TODO:

	Oops, we have documentation for ELinks-Lua API ;). Thanks, Peter.  

Mon Jul  8 15:20:43 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/main.c, src/bfu/leds.c,
	src/document/session.c:

	LED support is now optional, by default off. UI colors are now by
	default on.  

Mon Jul  8 14:54:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Removed some stale code, patch by Witold.  

Mon Jul  8 14:52:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, ssl/ssl.h:

	#elif HAVE_GNUTLS -> #elif defined(HAVE_GNUTLS), by Miciah.  

Sun Jul  7 11:15:30 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added CYGWIN binaries site, contributed by Frédéric L. W. Meunier
	<lists@pervalidus.net>.  

Sun Jul  7 11:10:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Moved first timer setup to draw_leds() (fixes segfault upon slow
	ELinks startup), reentrance of redraw_leds().  

Sat Jul  6 22:10:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/leds.c:

	Paranoia.  

Sat Jul  6 22:09:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/TODO:

	Add documentation of Lua interface ;).  

Sat Jul  6 21:53:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bfu/leds.c, bfu/leds.h, document/session.c:

	(Re)draw leds as well ;).  

Sat Jul  6 21:08:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: Makefile.am, leds.c, leds.h:

	Add simple support for LED indicators ;).  

Sat Jul  6 17:41:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Command line options handler and numeric parser fixes, patch by
	Stepan Roh.  

Sat Jul  6 17:00:36 2002  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore:

	Added few more.  

Sat Jul  6 12:00:13 2002  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore:

	Add the automake stuff to .cvsignore.  

Sat Jul  6 11:44:54 2002  Petr Baudis <pasky@ucw.cz>:

	* autogen.sh, config.guess, config.sub, install-sh, missing,
	mkinstalldirs, config/config.guess, config/config.sub:

	Let automake create some files automagically. Now, it should work ok
	even with newer automake versions.  

Sat Jul  6 11:32:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Use really base-session insteead of base_session, patch by Stepan
	Roh <stepan@srnet.cz>.  

Sat Jul  6 09:20:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	base_session -> base-session, fixes opening new window.  

Sat Jul  6 09:14:52 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/spanish.lng, src/intl/language.inc:

	Spanish translation update by David Mediavilla.  

Sat Jul  6 09:07:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	SSL support type mentioned in about dialog.  

Fri Jul  5 22:33:34 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre11.CVS 

Fri Jul  5 22:32:49 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS, configure.in:

	0.4pre11 

Fri Jul  5 22:13:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/colors.h:

	Introduced alternative much more decent turbovision-like color
	scheme (default when colors enabled).  

Fri Jul  5 21:53:08 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in:

	Introduced --enable-ui-colors configure option, turning on the ugly
	colors usage in user interface.  

Fri Jul  5 21:50:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/colors.h:

	When COLOR_UI defined, the ELinks user interface is not the boring
	gray anymore, but eyes-destructing colors; this color scheme is
	something I just figured out and wrote there, and it is almost, but
	not totally ugly.  

Fri Jul  5 20:51:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Mention %u in the URL as well (no, it's not implemented yet).  

Fri Jul  5 20:42:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, bfu/Makefile.am, bfu/button.c, bfu/checkbox.c,
	bfu/colors.h, bfu/dialog.c, bfu/group.c, bfu/inpfield.c,
	bfu/listbox.c, bfu/menu.c, bfu/msgbox.c, dialogs/auth.c,
	dialogs/edit.c, dialogs/options.c, document/download.c,
	protocol/auth/dialogs.c, document/session.c, protocol/types.c,
	scripting/lua/core.c:

	Moved default colors settings from setup.h to bfu/colors.h.  

Fri Jul  5 19:03:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Oops, by error enabled cache info menu item. Fixed 

Fri Jul  5 18:57:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: setup.h, cache/cache.c, document/cache.c, lowlevel/sched.c:

	MEMORY_CACHE_GC_PERCENT and MAX_CACHED_OBJECT_PERCENT is now
	percentual valuee - this way, it works somehow even in integer
	arithmetic and thus it works properly. Fixes bug that saved/opened
	objects were never cached.  

Fri Jul  5 18:25:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, lowlevel/sched.c:

	Shit, compilation fix :).  

Fri Jul  5 18:24:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c, document/download.c:

	Trivial cleanups.  

Fri Jul  5 18:24:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	detach_function() commented and explained somehow.  

Fri Jul  5 18:23:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	We get extension after we will check extension->mimetype.  

Fri Jul  5 17:24:30 2002  Laurent Monin <zas@norz.org>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/croatian.lng, intl/czech.lng,
	intl/danish.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/norwegian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/dialogs/options.c,
	src/document/options.c, src/document/options.h,
	src/document/html/renderer.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	avoid_dark_on_black occurrences were replaced by
	allow_dark_on_black.  T_AVOID_DARK_ON_BLACK is replaced by
	T_ALLOW_DARK_ON_BLACK.  Labels are now in sync with the option.  
	English and french were updated to reflect that change.  
	Translators, please update .lng files as needed.  

Fri Jul  5 16:19:27 2002  Laurent Monin <zas@norz.org>:

	* src/: dialogs/menu.c, protocol/types.h:

	Extensions menu is now totally disabled.  

Fri Jul  5 16:09:01 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/options.c:

	Fix: document.colors.allow_dark_on_black option is now properly
	switched in HTML options dialog.  

Fri Jul  5 13:16:10 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Phrase the legal advice more tolerantly to OpenSSL and not making
	the problem *so* fatal 

Fri Jul  5 13:06:46 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Notice about GNUTLS near OpenSSL legal notice.  

Fri Jul  5 12:59:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/: connect.c, ssl.c:

	GNUTLS support enhancements (it WORKS now), that is.. explicitly set
	up the certificates, connection parameters etc; a lot of misc bug
	fixes; better displaying of cipher string.  

Fri Jul  5 11:16:00 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/lowlevel/connect.c,
	src/scripting/lua/core.c, src/ssl/connect.c, src/ssl/ssl.c,
	src/ssl/ssl.h:

	Compilation fixes of GNUTLS support. GNUTLS is also already being
	dected; it's only used when OpenSSL is not found, disabled, or
	GNUTLS is explicitly enabled.  

Fri Jul  5 09:24:36 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, elinks.1, src/lowlevel/home.c:

	CONFIG_DIR -> ELINKS_CONFDIR 

Fri Jul  5 09:17:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/TODO:

	Support to what else SSL implementations would be nice to have.  

Fri Jul  5 03:59:39 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/links.h, src/bfu/msgbox.c,
	src/lowlevel/connect.c, src/lowlevel/connect.h,
	src/lowlevel/sched.c, src/protocol/ftp.c, src/protocol/ftp/ftp.c,
	src/ssl/connect.c, src/ssl/connect.h, src/ssl/ssl.c, src/ssl/ssl.h:

	Introduced GNU TLS support parallel to the OpenSSL one; completely
	untested (I didn't even try to compile it), no possibility to enable
	it yet.  

Fri Jul  5 02:24:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	get_ssl_cipher_str() does smt only when we HAVE_SSL.  

Fri Jul  5 02:02:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/ssl/ssl.c:

	Compilation fix.  

Fri Jul  5 02:00:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/http/http.c, ssl/ssl.c, ssl/ssl.h:

	Moved SSL cipher info generation from protocol/http/http.c to
	ssl/ssl.c:get_ssl_cipher_str().  

Fri Jul  5 01:54:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, ssl/connect.c, ssl/ssl.c, ssl/ssl.h:

	getSSL -> get_ssl(), introduced free_ssl().  

Fri Jul  5 01:49:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, ssl/ssl.c, ssl/ssl.h:

	Introduced init_ssl() and done_ssl().  

Fri Jul  5 01:29:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, cache/cache.c, cache/cache.h, dialogs/document.c,
	document/cache.c, document/cache.h, lowlevel/connect.c,
	lowlevel/sched.c, lowlevel/sched.h, protocol/http/http.c,
	ssl/connect.c, ssl/connect.h, ssl/ssl.c, ssl/ssl.h:

	HAVE_SSL checks moved down by one layer; introduced meta-ssl-type
	ssl_t.  

Fri Jul  5 00:29:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/checkbox.h,
	bfu/dialog.c, bfu/group.h, bfu/inpfield.c, bfu/inpfield.h,
	bfu/listbox.c, bfu/listbox.h, bfu/widget.c, bfu/widget.h,
	bookmarks/dialogs.c, dialogs/globhist.c:

	Introduced widget-specific handler lists; moved display handlers to
	widget-specific files.  

Thu Jul  4 22:25:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: dialog.c, widget.h:

	Removed some duplicated code from bfu/dialog.c 

Thu Jul  4 21:42:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/dialog.c:

	Changed dialog.c description.  

Thu Jul  4 21:19:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h, bfu/button.c,
	bfu/button.h, bfu/checkbox.c, bfu/checkbox.h, bfu/dialog.c,
	bfu/dialog.h, bfu/group.c, bfu/group.h, bfu/inpfield.c,
	bfu/inpfield.h, bfu/inphist.c, bfu/listbox.c, bfu/listbox.h,
	bfu/msgbox.c, bfu/widget.c, bookmarks/dialogs.c,
	bookmarks/dialogs.h, dialogs/auth.c, dialogs/edit.c,
	dialogs/edit.h, dialogs/globhist.c, dialogs/options.c,
	dialogs/refresh.c, document/download.c, document/html/parser.h,
	protocol/types.c, protocol/auth/dialogs.c, scripting/lua/core.c:

	Moved bfu/bfu.* to bfu/dialog.*.  

Thu Jul  4 21:04:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/: Makefile.am, bfu.h, widget.c, widget.h:

	Moved widget-specific stuff from bfu/bfu.* to bfu/widget.*.  

Thu Jul  4 19:22:12 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua.in:

	Fixed lua error when URL started by space.  

Thu Jul  4 19:18:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h, bfu/listbox.c,
	bfu/listbox.h, bookmarks/dialogs.c, dialogs/globhist.c:

	Moved listbox widget from bfu/bfu.* to bfu/listbox.*.  

Thu Jul  4 15:45:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h,
	bfu/button.c, bfu/button.h, bfu/checkbox.c, bfu/checkbox.h,
	bfu/group.c, bfu/group.h, bfu/inpfield.c, bfu/inpfield.h,
	bfu/inphist.c, bfu/inphist.h, bfu/msgbox.c, bfu/text.c, bfu/text.h,
	bookmarks/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/globhist.c, protocol/auth/dialogs.c, dialogs/menu.c,
	dialogs/options.c, document/download.c, document/view.c,
	protocol/types.c, scripting/lua/core.c:

	Forked widget specific files (bfu/button.*, bfu/checkbox.*,
	bfu/group.*, bfu/inpfield.*, bfu/inphist.*, bfu/text.*) from
	bfu/bfu.*.  

Thu Jul  4 14:06:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h, bfu/msgbox.c,
	config/urlhist.c, dialogs/menu.c, scripting/lua/core.c:

	Moved input_history stuff from bfu/bfu.* to bfu/inphist.*.  

Thu Jul  4 12:07:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.h:

	Stale prototype removed.  

Thu Jul  4 12:03:29 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	They should just not distribute ELinks+OpenSSL binary..  

Thu Jul  4 01:18:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, bfu/bfu.h, bfu/button.h, bfu/msgbox.c,
	bookmarks/dialogs.c, dialogs/auth.c, dialogs/edit.c,
	dialogs/globhist.c, dialogs/options.c, document/download.c,
	protocol/types.c, protocol/auth/dialogs.c, scripting/lua/core.c:

	dialog_item -> widget 

Thu Jul  4 01:07:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h, bfu/button.h,
	bfu/msgbox.c, bfu/msgbox.h, bookmarks/dialogs.c, config/conf.c,
	dialogs/document.c, dialogs/globhist.c, dialogs/info.c,
	dialogs/menu.c, dialogs/options.c, document/download.c,
	document/session.c, document/view.c, scripting/lua/core.c,
	protocol/mailto.c, protocol/types.c:

	Moved msg_box() from bfu/bfu.* to bfu/msgbox.*.. forked also
	bfu/button.h.  

Thu Jul  4 00:28:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Introduced action save-formatted.  

Thu Jul  4 00:26:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/auth.c, protocol/auth/dialogs.c:

	When there's already username known, place cursor directly to
	password in authentication dialog.  

Wed Jul  3 23:57:27 2002  Petr Baudis <pasky@ucw.cz>:

	* THANKS:

	Thanks to various people.. :) 

Wed Jul  3 23:54:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	Enter pressed in field or password field submits the dialog as well.  

Wed Jul  3 23:46:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Added missing semicolon ;).  

Wed Jul  3 23:40:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/download.c, osdep/generic.h, osdep/os_dep.c,
	osdep/os_dep.h, osdep/os_depx.h, osdep/osdep.c, osdep/osdep.h:

	Introduced open_prealloc(); prevents fragmentation of downloaded
	files on OS/2 (by mikulas, from 0.98).  

Wed Jul  3 23:25:43 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Ok ok, I give up. Enable -Werror only when --enable-debug.  

Wed Jul  3 23:23:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/lists.h:

	Fixed a C aliasing bug in list operations (by mikulas, from 0.98).  

Wed Jul  3 23:15:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	Fixed one possible (untested) crash in renderer (by mikulas, from
	0.98).  

Wed Jul  3 23:10:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Eat newlines in URL when reading it from HTML (by mikulas, from
	0.98).  

Wed Jul  3 23:03:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.h:

	Smaller MAX_CWD_LEN (larger value may cause pipe problems), also
	raised MAX_TERM_LEN (by mikulas, from 0.98).  

Wed Jul  3 22:58:54 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Added legal notice about linking ELinks with OpenSSL, as suggested
	by Victor Khimenko <khim@sch57.msk.ru>.  

Wed Jul  3 22:50:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Close input fd in separate thread upon its startup.  

Wed Jul  3 22:39:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Added new domain names to our braindead http URL recognition table
	;p (by mikulas, from 0.98).  

Wed Jul  3 22:29:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	protocol.http.bugs.broken_302_redirect enabled by default (by
	mikulas, from 0.98).  

Wed Jul  3 22:26:04 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/croatian.lng, intl/norwegian.lng, src/intl/language.inc:

	Hmh.. forgot to resync the languages :(.  

Wed Jul  3 22:19:42 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/index.txt, intl/norwegian.lng, src/intl/lang_defs.h,
	src/intl/language.inc, AUTHORS:

	Norwegian translation by Simen Graaten <simeng@slarkware.com> (from
	0.98).  

Wed Jul  3 22:18:27 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/croatian.lng, intl/index.txt, src/intl/lang_defs.h,
	src/intl/language.inc:

	Croatian translation by Denis Lackovic <delacko@fly.srk.fer.hr>
	(from 0.98).  

Wed Jul  3 22:13:24 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/catalan.lng, src/intl/language.inc:

	Catalan translation update by Carles Sadurní Anguita <isard@ctv.es>
	(from 0.98).  

Wed Jul  3 22:05:14 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	On OS/2, disable -Zbin-files (set automatically by SOME versions of 
	autoconf, making behaviour of program autoconf-version-dependent)
	(by mikulas, from 0.98).  

Wed Jul  3 21:55:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	In dialog boxes, space now submits the dialog and enter (un)selects
	the current widget; so that the behaviour is now consistent with
	forms.  

Wed Jul  3 21:50:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/html/Makefile.am, scripting/lua/Makefile.am,
	Makefile.am:

	Module-specific TODOs are now included in distributions.  

Wed Jul  3 21:50:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/TODO:

	What would be nice in Lua scripting support area..? 

Wed Jul  3 21:21:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	More slash fixes, but only minor ones.  

Wed Jul  3 16:46:41 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre10.CVS 

Wed Jul  3 16:44:53 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre10 

Wed Jul  3 16:32:25 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/cmdline.c, src/protocol/ftp.c,
	src/protocol/url.c, src/protocol/ftp/ftp.c:

	Compilation fixes for gcc-3.1 by <pixel@mandrakesoft.com>.  

Wed Jul  3 15:08:26 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/danish.lng, src/intl/language.inc:

	Danish translation update by Jonas.  

Wed Jul  3 15:04:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, protocol/types.c:

	Fix leaking in extensions menu. Introduced new flag for free_i
	bitmask.  

Wed Jul  3 15:03:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c:

	Fixed commandline options (mainly no-connect).  

Wed Jul  3 12:42:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Typo fix, patch by zas.  

Wed Jul  3 12:12:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Ehm, typo fix ;).  

Wed Jul  3 12:03:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	OOPS! We twice tried to load global config file, and never 
	~/.elinks/elinks.conf ;).  

Wed Jul  3 12:02:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/conf.c, scripting/lua/core.c:

	Insert slash after CONFDIR.  

Wed Jul  3 11:29:54 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/conv/conf-links2elinks.awk:

	More of that ;).  

Wed Jul  3 11:28:15 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/conv/conf-links2elinks.awk:

	Refer to conf-links2elinks.awk instead of links_to_elinks.awk.  

Tue Jul  2 22:39:30 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre9.CVS 

Tue Jul  2 22:38:38 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre9 

Tue Jul  2 22:38:05 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, elinkskeys.5, elinkskeys.5.in,
	contrib/lua/hooks.lua, contrib/lua/hooks.lua.in, src/config/conf.c,
	src/scripting/lua/core.c:

	We now respect sysconfdir and play with it properly ;).  

Tue Jul  2 21:54:14 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/conv/old_to_new_bookmarks.sh:

	old_to_new_bookmarks.sh still goes to ~/.links 

Tue Jul  2 21:48:35 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	install-exec-hook instead of invalid install-hook 

Tue Jul  2 21:40:40 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	Scream at user after make install ;).  

Tue Jul  2 21:40:25 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Some upgrade hints..  

Tue Jul  2 20:22:35 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	NEWS in last -pre 

Tue Jul  2 16:05:00 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre8.CVS 

Tue Jul  2 16:03:01 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre8 

Tue Jul  2 16:00:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h:

	Added keybinding rewriting. Keybindings are saved again ;).  

Tue Jul  2 00:53:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c, options.c, options.h:

	Unmark options tree properly (multiple saves should work properly
	now) - introduced unmark_options_tree(). Removed *_name().  

Mon Jul  1 22:47:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Automatical config file rewriting; pretty cool, I'd say - we keep
	everything as user made it, only replace values of options if
	different and possibly add missing options at the end of file. Needs
	a bit more work yet, but it's basically working. Temporarily
	disabled keybinding saving.  

Mon Jul  1 18:00:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Don't show redundant comments for autocreated options. *REALLY*
	INSANE stuff. Uufff..  

Mon Jul  1 16:44:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Saved options tree is now nicely indented ;).  

Mon Jul  1 16:21:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h:

	Keybinding is now saved to elinks.conf as well when writing it. Some
	newlines are placed differently in options section.  

Mon Jul  1 15:07:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/html/parser.c:

	parse_*() (almost *) -> read_*().  

Mon Jul  1 15:06:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Compilation fix, renamed variables to some meaningful names
	(enternaitment I choose when I'm too lazy to do any real work ;).  

Mon Jul  1 14:58:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Little source tidyup and minor reorganizations.  

Mon Jul  1 14:53:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Moved strtonum lookup tables outside their functions. parse_act() ->
	parse_action().  

Mon Jul  1 14:48:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Introduced OPT_WATERMARK.  

Mon Jul  1 14:44:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Pass options tree pointer to parser functions.  

Mon Jul  1 13:19:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Introduced include command, loads specified config file.  

Sun Jun 30 22:51:16 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/hooks.lua:

	home_dir was used uninitialized.  

Sun Jun 30 22:33:22 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/lua/: config.lua, hooks.lua:

	Splitted configuration section of hooks.lua to config.lua.  

Sun Jun 30 22:21:05 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: Makefile.am, bm.lua, elinks-remote, hooks.lua,
	md5check.lua, remote.lua, lua/bm.lua, lua/elinks-remote,
	lua/hooks.lua, lua/md5check.lua, lua/remote.lua:

	Moved lua stuff to lua/.  

Sun Jun 30 22:16:42 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: conf-links2elinks.awk, mailcap.pl,
	old_to_new_bookmarks.sh, w3m2links.gawk,
	conv/conf-links2elinks.awk, conv/mailcap.pl,
	conv/old_to_new_bookmarks.sh, conv/w3m2links.gawk, Makefile.am:

	Moved conversion scripts to conv/ subdir.  

Sun Jun 30 21:46:59 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/conf-links2elinks.awk:

	Gawk script by Miciah for conversion links -> elinks config file
	format.  

Sun Jun 30 21:44:04 2002  Petr Baudis <pasky@ucw.cz>:

	* elinkskeys.5:

	Updated bind command syntax.  

Sun Jun 30 21:43:34 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: keybind-full.conf, user-keybindings.example:

	Renamed user-keybindings.example to keybind-full.conf, updated bind
	command syntax.  

Sun Jun 30 21:30:24 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: keybind.conf, user.example:

	Renamed user.example to keybind.conf, kept only keybindings, whose
	syntax was updated.  

Sun Jun 30 21:21:29 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Some tips about reducing elinks binary size.  

Sun Jun 30 21:11:44 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/kbdbind.c, src/config/kbdbind.h,
	src/document/view.c:

	Introduced actions jump-to-link and follow-link, jump-to-link under
	key 'l' (only 'L' for link menu now) - jumps to link with number
	same as repeat count prefix. Patch by Miciah. Laalaa trala laaalaa
	what a great music is this.. *cough* ;) 

Sun Jun 30 19:50:56 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/hooks.lua:

	Prefixes ('bookmarks') extended and stored in table, patch by
	Matthew Mueller <donut@azstarnet.com>.  

Sun Jun 30 15:18:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, kbdbind.h:

	Added ACT_NONE "none" action (as substitute for unbind).  

Sun Jun 30 15:16:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h, opttypes.c:

	Introduced bind command in config file.  

Sun Jun 30 11:49:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Rewritten part of config file parser; now each command has own
	parsing function.  

Sat Jun 29 22:01:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, opttypes.c, opttypes.h:

	read now only reads the data from config file, introduced set which
	converts it and saves to memory. Also introduced add/remove for
	further use (lists as an options).  

Sat Jun 29 21:50:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Always show use position in dump_info().  

Sat Jun 29 15:24:06 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/document/view.c:

	Fixed option name in ACT_TOGGLE_DISPLAY_TABLES case, patch by
	Matthew Mueller <donut@azstarnet.com>.  

Sun Jun 23 18:27:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Typo fixes by Jonas Fonesca.  

Sun Jun 23 13:17:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Some more comments.  

Sun Jun 23 13:00:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	mime.handler._template_._template_ not OPT_AUTOCREATE anymore.  

Sun Jun 23 11:42:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Fixed adding extensions.  

Sun Jun 23 10:37:07 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/parser.c:

	Tidy up, minor optimizations.  

Sun Jun 23 09:37:34 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	TODO updates 

Sat Jun 22 22:39:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/globhist.c, util/secsave.c:

	Another #include fixes.  

Sat Jun 22 21:20:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, bookmarks/bookmarks.c, cookies/cookies.c,
	cookies/parser.c, document/globhist.c, document/location.c,
	intl/charsets.c, intl/language.c, lowlevel/home.c, protocol/file.c,
	protocol/mailto.c, protocol/url.c, protocol/file/file.c,
	util/conv.c, util/memdebug.c, util/memlist.c, util/secsave.c,
	util/string.h:

	Compilation fixes - missing includes.  

Sat Jun 22 16:45:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/download.c, protocol/types.c,
	protocol/types.h:

	Reworked MIME types saving; now we've mime.type.class.id =
	handlername and mime.handler.handlername.system.*. Clarified
	mime.extension.* description.  

Sat Jun 22 16:34:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Fix reading of option with no read handler.  

Sat Jun 22 10:42:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Save '.' in extension as '-' (so we now allow it again). Don't match
	only the part after last dot, but the whole extension, if possible.  

Fri Jun 21 20:28:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/terminal.c, util/string.c, util/string.h:

	debug_*acpy() made static inline and moved to .h. Options used
	inside redraw_screen() are now cached - RAPID SPEEDUP..  

Fri Jun 21 19:25:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, document/history.c, document/location.c,
	util/memory.c:

	Use leak debugger only when DEBUG is defined. Compilation fix in
	mem_calloc(). Fix in freeing histories.  

Fri Jun 21 18:16:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	PRINT_CHAR -> static inline print_char(); get_cp_index() is now
	cached, it should result in *big* performance increase.  

Fri Jun 21 17:52:24 2002  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	Some variables declarations were moved to a better place.  

Fri Jun 21 17:32:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: conv.c, conv.h:

	Moved upcase() to .h and made static inline, as it was gross cpu
	eater otherwise.  

Fri Jun 21 16:54:59 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, dialogs/options.c, document/cache.c,
	document/html/renderer.c, lowlevel/sched.c:

	document.cache.format/memory.size is now generalized.  

Fri Jun 21 16:23:44 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, util/secsave.c:

	Option secure_save was renamed to secure_file_saving.  

Fri Jun 21 14:13:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/globhist.c:

	enable_global_history -> global.enable 

Fri Jun 21 14:11:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/options.c, document/options.c,
	document/html/renderer.c:

	avoid_dark_on_black -> allow_dark_on_black 

Fri Jun 21 14:04:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/session.c:

	Moved show_*_bar and startup_goto_dialog from document.browse to ui.  

Fri Jun 21 13:58:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, cookies/cookies.c:

	cookies namespace fixes - policy -> accept_policy.  

Fri Jun 21 13:51:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/options.c, document/options.c,
	document/session.c:

	document namespace fixes - assume_codepage -> codepage.assume,
	force_assume_codepage -> codepage.force_assumed.  

Fri Jun 21 13:35:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/menu.c, dialogs/options.c,
	document/download.c:

	document.download namespace fixes - download_dir -> directory,
	download_utime -> set_original_time.  

Fri Jun 21 13:28:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.h, opttypes.c:

	Removed OPT_PROGRAM.  

Fri Jun 21 13:27:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Removed stale type handlers.  

Thu Jun 20 11:37:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Write also option descrpitions to elinks.conf.  

Thu Jun 20 11:08:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Removed stale TODO.  

Thu Jun 20 11:05:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, dialogs/options.c, osdep/os_dep.c,
	osdep/os_dep.h, osdep/osdep.c, osdep/osdep.h, protocol/mailto.c,
	protocol/types.c, protocol/types.h:

	Introduced get_system_str(), when in X-Windows, we now add -x11 to
	SYSTEM_STR (always). Totally removed possibility to do anything with
	associations in UI now.  

Thu Jun 20 10:13:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Never use terminal.default, always use terminal._template_ if not
	sure.  

Thu Jun 20 10:12:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	tralala, alphabetical order 

Thu Jun 20 10:11:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c, dialogs/menu.c,
	document/download.c, protocol/types.c, protocol/types.h:

	Associations integrated to new options subsystem. Removed struct
	assoc. Trivial tidyups.  

Thu Jun 20 08:55:25 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	Minor tidy up.  

Thu Jun 20 08:20:59 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/select.c:

	string.h is now included.  

Wed Jun 19 13:26:07 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/terminal.c:

	TERM environnement variable is now checked for sanity to prevent
	potential configuration file corruption.  

Tue Jun 18 19:52:22 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/header.c:

	Minor tidy up.  

Tue Jun 18 19:36:01 2002  Laurent Monin <zas@norz.org>:

	* src/: document/html/parser.c, protocol/http/header.c,
	util/string.h:

	The macro named U() was renamed to IS_QUOTE().  

Tue Jun 18 08:23:53 2002  Laurent Monin <zas@norz.org>:

	* src/util/memdebug.c:

	A typo in an error message in debug_mem_calloc() was fixed.  

Mon Jun 17 21:41:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Introduced underflow/overflow checking, patch by zas and me. Removed
	thee undef garbage at the file end.  

Mon Jun 17 21:10:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	Introduced dump_info() dumping alloc_header contents and relevant
	info. ah->file/line updated in realloc().  

Mon Jun 17 16:07:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, config/options.h, dialogs/options.c,
	protocol/types.c:

	Introduced get_opt_rec_real().  

Mon Jun 17 15:16:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, dialogs/options.c, protocol/mailto.c,
	protocol/types.c, protocol/types.h:

	Enabled saving of mailto/telnet/tn3270 external programs - they are
	now reusing options tree infrastructure. Needs more work.  

Mon Jun 17 15:12:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/conv.c:

	Fixed bug in snzprint() (one superfluous char).  

Mon Jun 17 11:42:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/memdebug.c:

	CHECK_REALLOC_NULL is now defined by default. Introduced
	CHECK_INVALID_FREE.  

Mon Jun 17 11:23:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/opttypes.c, dialogs/info.c,
	document/html/parser.c, util/Makefile.am, util/error.c,
	util/error.h, util/memdebug.c, util/memdebug.h, util/memory.h,
	util/string.c:

	Moved memory debugger from util/error.* to util/memdebug.*.  

Mon Jun 17 11:23:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Compilation fix for the last fix ;).  

Mon Jun 17 10:31:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Fixed last patch.  

Mon Jun 17 10:28:17 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/types.c:

	A call to mem_alloc() + sprintf() was replaced by a call to safer
	straconcat().  

Mon Jun 17 10:18:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Trivial tidyup ;).  

Mon Jun 17 10:12:59 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/types.c:

	An overflow by two bytes was fixed in get_real_opt().  

Mon Jun 17 08:08:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, dialogs/globhist.c, util/string.h:

	Reverted last patch, it didn't work out..  

Mon Jun 17 08:01:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, dialogs/globhist.c, util/string.h:

	Move #define _GNU_SOURCE near strcasestr(), as appropriate.  

Mon Jun 17 08:00:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, bfu/bfu.h, bookmarks/bookmarks.h, cache/cache.h,
	config/options.h, dialogs/globhist.c, document/cache.h,
	document/download.h, document/globhist.h, document/location.h,
	document/session.h, document/html/parser.h,
	document/html/renderer.h, lowlevel/sched.h, lowlevel/terminal.h,
	protocol/types.h, protocol/http/blacklist.c, util/Makefile.am,
	util/blacklist.c, util/error.c, util/hash.h, util/lists.h:

	Moved lists handling stuff from links.h to util/lists.h 

Mon Jun 17 07:45:22 2002  Laurent Monin <zas@norz.org>:

	* src/util/string.c:

	A typo was fixed. Useless commented old code was removed from
	safe_strncpy() code.  

Mon Jun 17 07:42:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, main.c, bfu/bfu.c, bfu/menu.c,
	bookmarks/bookmarks.c, bookmarks/dialogs.c, config/cmdline.c,
	config/conf.c, config/kbdbind.c, config/options.c,
	config/options.h, config/opttypes.c, config/urlhist.c,
	cookies/cookies.c, dialogs/auth.c, protocol/auth/dialogs.c,
	cache/cache.c, dialogs/document.c, dialogs/edit.c,
	dialogs/globhist.c, dialogs/info.c, dialogs/menu.c,
	dialogs/options.c, dialogs/refresh.c, document/cache.c,
	document/download.c, document/dump.c, document/globhist.c,
	document/history.c, document/location.c, document/session.c,
	document/view.c, document/vs.c, document/html/parser.c,
	document/html/renderer.c, document/html/tables.c, intl/charsets.c,
	intl/language.c, lowlevel/af_unix.c, lowlevel/connect.c,
	lowlevel/dns.c, lowlevel/home.c, lowlevel/interlink.c,
	lowlevel/kbd.c, lowlevel/sched.c, lowlevel/select.c,
	lowlevel/sysname.c, lowlevel/terminal.c, osdep/os_dep.c,
	osdep/osdep.c, scripting/lua/core.c, encoding/encoding.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/mailto.c, protocol/types.c, protocol/url.c,
	protocol/auth/auth.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/auth.c, protocol/http/blacklist.c,
	protocol/http/header.c, protocol/http/http.c, ssl/connect.c,
	util/Makefile.am, util/base64.c, util/blacklist.c, util/encoding.c,
	util/error.c, util/hash.c, util/memlist.c, util/memory.c,
	util/memory.h, util/secsave.c, util/string.c:

	Moved standart memory allocation functions from links.h to
	util/memory.*.  

Sun Jun 16 23:38:20 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.base, Unicode/Makefile.am,
	contrib/Makefile.am, intl/Makefile.am, src/Makefile.am,
	src/bfu/Makefile.am, src/bookmarks/Makefile.am,
	src/config/Makefile.am, src/cookies/Makefile.am,
	src/dialogs/Makefile.am, src/document/Makefile.am,
	src/document/html/Makefile.am, src/intl/Makefile.am,
	src/lowlevel/Makefile.am, src/osdep/Makefile.am,
	src/protocol/Makefile.am, src/protocol/http/Makefile.am,
	src/scripting/lua/Makefile.am, src/ssl/Makefile.am,
	src/util/Makefile.am, test/Makefile.am:

	Build system changes - now, we _finally_ don't -I. anymore; we
	include one common file Makefile.base in all ams, where we have
	INCLUDES and also own COMPILE, because that automake idiocy; I hope
	dirname is portable enough ;).  

Sun Jun 16 23:13:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, bfu/bfu.c, bookmarks/bookmarks.c, config/conf.c,
	config/options.c, config/opttypes.c, config/urlhist.c,
	cookies/cookies.c, cookies/parser.c, dialogs/document.c,
	cache/cache.c, dialogs/edit.c, dialogs/globhist.c, dialogs/info.c,
	dialogs/menu.c, dialogs/options.c, document/cache.c,
	document/download.c, document/dump.c, document/globhist.c,
	document/history.c, document/location.c, document/options.c,
	document/session.c, document/view.c, document/vs.c,
	document/html/parser.c, document/html/renderer.c,
	document/html/tables.c, intl/charsets.c, intl/language.c,
	lowlevel/af_unix.c, lowlevel/home.c, lowlevel/interlink.c,
	lowlevel/kbd.c, lowlevel/sched.c, lowlevel/sysname.c,
	lowlevel/terminal.c, osdep/os_dep.c, osdep/osdep.c,
	protocol/file.c, protocol/finger.c, protocol/ftp.c,
	protocol/mailto.c, protocol/types.c, protocol/file/file.c,
	protocol/ftp/ftp.c, scripting/lua/core.c, scripting/lua/hooks.c,
	protocol/url.c, protocol/auth/auth.c, protocol/http/auth.c,
	protocol/http/header.c, protocol/http/http.c, util/Makefile.am,
	util/conv.c, util/error.c, util/secsave.c, util/string.c,
	util/string.h:

	Moved string manipulation functions from links.h to util/string.*.
	Compilation fixes related to move of some conversion functions.  

Sun Jun 16 21:22:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, bfu/bfu.c, bfu/menu.c, cookies/cookies.c,
	document/view.c, document/html/parser.c, intl/charsets.c,
	lowlevel/terminal.c, osdep/os_dep.c, osdep/osdep.c,
	protocol/http/header.c, protocol/http/http.c, util/conv.c,
	util/conv.h:

	Moved upcase(), sn(z)print(), add_(k)num_to_str() and strtolx() from
	links.h to util/conv.h. Tidyup of them.  

Sun Jun 16 20:41:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Tiny tidyup. Removed one superfluous fflush(). bad_ah_sanity() is
	static (by zas).  

Sun Jun 16 20:37:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, setup.h, util/error.c:

	Removed LEAK_DEBUG_LIST; some accompanied tiny cleanups.  

Sun Jun 16 17:24:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Introduced LESS_MEMORY_SPEED - if undefined, align pointers by 16
	rather than 8. Don't fill calloc()ed memory ;).  

Sun Jun 16 17:16:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Added filling of memory to debug_mem_calloc(); english language
	fixes.  

Sun Jun 16 17:12:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	#undefs are now in proper order.  

Sun Jun 16 17:10:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Normalized some macro names.  

Sun Jun 16 17:06:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	SIZE_AH_ALIGNED alignment lowered back to 7 (it's not clear why it
	was 15 before).  

Sun Jun 16 16:59:40 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	CHECK_AH_SANITY_MAGIC name was changed to a shorter AH_SANITY_MAGIC.  

Sun Jun 16 16:46:53 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Introduced some convenient macros. Next step is under/overflows
	detection.  

Sun Jun 16 16:22:41 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	alloc_header is now checked for sanity using a magic number.  

Sun Jun 16 15:37:48 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Allocated memory filling is implemented and can be (des-)actived at
	compile time if needed.  

Sun Jun 16 15:15:31 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	debug_mem_realloc() behavior is now similar to realloc().  Code
	cleanup. Next step will be optionnal filling of allocated memory.  

Sun Jun 16 13:47:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Tidyup - mainly rename of variables; L_D_S -> SIZE_AH_ALIGNED.
	Inspired by zas.  

Sat Jun 15 22:11:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Removed x..?alloc(), useless bloat.  

Sat Jun 15 22:02:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, util/error.c, util/error.h:

	Introduced mem_calloc(), inspired by zas ;).  

Sat Jun 15 21:52:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	Corrections according to coding style; moved strtolx() upwards to
	its pair function.  

Fri Jun 14 21:41:04 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/bfu/bfu.c, src/config/kbdbind.c,
	src/config/kbdbind.h:

	Unambiguous autocompletion (auto-complete-unambiguous, Ctrl-R),
	patch by Miciah Dashiel <theweirdo@subdimension.com>.  

Thu Jun 13 10:25:17 2002  Laurent Monin <zas@norz.org>:

	* src/osdep/: os_dep.c, osdep.c:

	Tidy up. Coding style conformance to HACKING document was improved.  

Wed Jun 12 19:32:19 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/german.lng, intl/italian.lng, src/intl/language.inc:

	Hopefully finally fixed the trigraph problem.  

Wed Jun 12 14:33:44 2002  Laurent Monin <zas@norz.org>:

	* HACKING:

	More about coding style.  

Tue Jun 11 22:48:51 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian translation update by Dmitry.  

Tue Jun 11 22:47:25 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/german.lng, intl/italian.lng, src/intl/language.inc:

	hmh, fixed trigraphs again.. *shrug* 

Tue Jun 11 22:20:40 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/german.lng, intl/italian.lng, src/intl/language.inc:

	Get rid of stupid trigraph warnings, reported by yanek.  

Tue Jun 11 20:23:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Compilation warning fix.  

Tue Jun 11 20:22:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.h, osdep.h:

	Introduced SYSTEM_STR for each OS.  

Tue Jun 11 20:17:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	First bit in introducing of new scheme for specifying user protocols
	handlers.  

Tue Jun 11 20:12:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Fixed crash when opening files with no extension, reported by Witold
	Filipczyk <witekfl@poczta.onet.pl>.  

Tue Jun 11 19:27:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/file.c, protocol/file/file.c, encoding/encoding.c,
	encoding/encoding.h, util/Makefile.am, util/compress.c,
	util/compress.h, util/encoding.c, util/encoding.h:

	Move util/compress.* to more appropriate util/encoding.*.  

Tue Jun 11 15:32:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/refresh.h:

	Remove spurious ';', reported by Doug Kearns
	<djkea2@mugca.its.monash.edu.au>.  

Tue Jun 11 15:20:38 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/globhist.c:

	Information about an global history item can now be obtained in
	globhist dialog by pressing the (new) info button. It prints title,
	url, and last visit time. Last inserted item is now printed on top
	of the list instead of the bottom.  

Tue Jun 11 15:15:07 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	Fix french block cursor translation.  

Tue Jun 11 15:11:10 2002  Laurent Monin <zas@norz.org>:

	* src/: document/dump.c, lowlevel/sched.c:

	Tidy up.  

Tue Jun 11 15:09:07 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Fix a potential bad comparaison of keys in table cache code 

Tue Jun 11 10:18:17 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Release summaries added to NEWS.  

Mon Jun 10 19:00:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/scripting/lua/core.c:

	Use sigjmp_buf instead of jmp_buf; fixes possible warning.  

Mon Jun 10 15:54:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, config/options.h, config/opttypes.c,
	dialogs/edit.c, protocol/types.c, protocol/types.h:

	Moved extension<->mimetype to options space, so it's now
	saved/loaded properly; removed struct extension. Introduced
	delete_option(). Bugfix in str_dup().  

Sun Jun  9 20:14:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/conf.c, config/options.c, config/options.h,
	config/opttypes.c, dialogs/options.c, document/session.c,
	document/view.c, document/html/renderer.c, intl/language.c,
	lowlevel/terminal.c, lowlevel/terminal.h:

	Enabled terminal options saving - they are now saved as
	"terminal.<TERM>.flag"; removed struct term_spec. Bugfixes in
	OPT_AUTOCREATE support; #template# is now _template_. option->name
	is now dynamically allocated.  

Sun Jun  9 16:09:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	Another gcc-2.96 stupidity fixed, thanks to Dmitry :).  

Sun Jun  9 15:38:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	Fixed possible warning reported by Dmitry..? 

Sun Jun  9 14:53:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, options.c, options.h, opttypes.c,
	opttypes.h:

	Support for OPT_AUTOCREATE. Introduced dup handler for option types
	and function copy_option(). Fixed warnings in config/kbdbind.c
	(reported by Dmitry). Disabled some obsolete soon-to-be-replaced
	types finally.  

Sun Jun  9 11:09:33 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation was updated.  

Sun Jun  9 10:59:01 2002  Laurent Monin <zas@norz.org>:

	* src/main.c:

	Memory allocated for table cache is now freed in
	terminate_all_subsystems();before exiting if needed.  

Sat Jun  8 11:44:13 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Small tidy up concerning table cache (idea by Pasky ;).  

Sat Jun  8 11:28:38 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	Table cache is now using hashes. Big performance improvement when
	rendering pages using a lot of nested tables.  

Sat Jun  8 11:25:05 2002  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	free_hash() do not free values and keys anymore.  

Sat Jun  8 09:57:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Tidyup of translate_directories(). Also, if /. or /.. is the last
	segment of path, it (and preceding path element, respectively) is
	removed as well - reported by Jonas Fonseca <fonseca@diku.dk>.  

Fri Jun  7 22:28:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/html/parser.c:

	Introduced document.browse.images.file_tags, which can enable
	displaying [filename] instead of [IMG] possibly. Original patch by
	Grzegorz Golawski <grzegol@pld.org.pl>.  

Fri Jun  7 20:09:23 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/README:

	Added guide written by Brain.  

Fri Jun  7 19:53:44 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/danish.lng, intl/dutch.lng,
	intl/english.lng, intl/estonian.lng, intl/finnish.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/indonesian.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/dialogs/document.c,
	src/document/view.c, src/document/view.h,
	src/document/html/parser.c, src/document/html/parser.h,
	src/document/html/renderer.c, src/document/html/renderer.h,
	src/intl/lang_defs.h, src/intl/language.inc:

	Added support for TITLE attribute of A, INPUT and IMG tags (it was
	alias for ALT in IMG already; it still acts like that as well). The
	attribute is displayed in current link part of the document info.
	Idea by David Mediavilla <benxrqzpd001@sneakemail.com> and Dave
	Mielke <dave@mielke.cc>.  

Fri Jun  7 18:06:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c, document/dump.c:

	Introduced document.dump.codepage (instead of hardwired codepage 0
	aka us-ascii) (reported by Fredrik Eriksson
	<fredrik.eriksson@flowsecurity.se>); moved document.dump_width to
	document.dump.width; removed obsoleted hack in main.c,
	get_cp_index() is now called directly in config/options.c. Don't
	expect document.dump to live long, however, I think I'll make it
	just a special case of terminal.  

Fri Jun  7 17:37:47 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Set -Werror at the end of the configure, as configure tests were
	failing otherwise.  

Fri Jun  7 17:22:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/kbd.c:

	Another compilation warning fix. *yawn* 

Fri Jun  7 17:20:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: kbdbind.c, opttypes.c:

	Fixed compilation warnings - return 0 in now unimplemented option
	types reading functions.  

Fri Jun  7 17:18:18 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Add -Werror to CFLAGS. Making hacking easy for the masses (tm).  

Fri Jun  7 17:14:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Finally introduced get_opt_bool(), doing the same job as
	get_opt_int() but making the stuff more consistent. That means also
	compilation fix for the previous patch ;).  

Fri Jun  7 17:03:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/kbd.c:

	Introduced boolean option ui.window_title, determining whether we
	will touch window title if ELinks is being run in xterm or so; idea
	by Jorgen A. Erhard <jae+debian@jerhard.org>, also thanks to Peter
	Gervai.  

Fri Jun  7 15:26:39 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/romanian.lng, src/intl/language.inc:

	Romanian translation update; patch by Ionel Mugurel Ciobica
	<tgakic@chem.tue.nl>.  

Sat Jun  1 18:46:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c, options.c, opttypes.c:

	Ignore options with OPT_HIDDEN flag on some places. Fix bool options
	commandline handling, thanks to Zaroz <zaroz@users.sf.net>.  

Sun May 26 18:59:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, opttypes.c:

	Do not save aliases.  

Sun May 26 18:54:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/cmdline.c, config/options.c,
	config/urlhist.c, dialogs/menu.c, document/download.c,
	document/dump.c, document/view.c, protocol/file.c,
	protocol/file/file.c:

	Divided options tree to root_options and cmdline_options.  

Sun May 26 17:56:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: cmdline.c, conf.c, options.c, options.h, opttypes.c:

	Removed OPT_CFGFILE and OPT_CMDLINE flags. Introduced OPT_HIDDEN and
	OPT_AUTOCREATE flags (unimplemented yet). Preparations for
	commandline options in separate tree. Introduced OPT_ALIAS type.  

Sat May 25 22:55:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Fixed the last remains of the string option buffer overflow - don't
	replace string pointer in str_rd() (it took me about an hour to
	trace it there and don't ask what all i had to use! ;). Download
	(and modifying string constants in general) should now cause no
	problems.  

Sat May 25 21:40:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	Never Commit Untested Patches. Fix for the last patch - preallocate
	memory for string options correctly now.  

Sat May 25 21:18:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.h:

	...that is, preallocate MAX_STR_LEN for each options string. This
	prevents many buffer overflows and easy mistakes.  

Sat May 25 21:16:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Reverted last patch. This bug seems to be *very* common now, let's
	do it in another way..  

Sat May 25 21:13:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Fixed very stupid but also very drastic and fatal buffer overflow.
	We forgot to reallocate download_dir when we were changing it. How
	silly ;).  

Sat May 25 20:05:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.h, opttypes.c, options.c:

	Removed stale trash^W^Wterm2 support.  

Sat May 25 19:34:10 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Who Is Dmitry? 

Sat May 25 19:18:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	files -> file, totally dumb mistake.. Reported by Dmitry.  

Sat May 25 19:16:50 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Fixed bzlib detection.  

Sat May 25 13:46:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/conf.c, config/options.c, config/options.h,
	config/opttypes.c, cookies/cookies.c, cache/cache.c,
	dialogs/menu.c, dialogs/options.c, document/cache.c,
	document/download.c, document/dump.c, document/globhist.c,
	document/history.c, document/options.c, document/options.h,
	document/session.c, document/session.h, document/view.c,
	document/html/renderer.c, lowlevel/dns.c, lowlevel/sched.c,
	protocol/file.c, protocol/ftp.c, protocol/types.c,
	protocol/file/file.c, protocol/ftp/ftp.c, protocol/http/http.c:

	Final step of options hiearchization - options were moved to
	hiearchic structure. Note that it may change yet, without any
	backwards compatibility, so you may not want to use this yet. Watch
	links-discuss mailing list. Also, it's quite possible I forgot some.
	Fixed hiearchical options handling. Implemented saving of
	hiearchical options. Config file parser fixes. Removed struct
	document_setup. get_opt() is more debugging-friendly now -
	internal()s there will show file and line of get_opt() caller.  

Thu May 23 20:49:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	elinks.conf is automatically generated by ELinks, not Links ;p.  

Thu May 23 20:44:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/cmdline.c, config/conf.c, config/options.c,
	config/options.h, util/hash.h:

	Options are now again stored in list, not in hash anymore.
	Simplifications in hiearchic options handling. foreach_hash_item()
	parameters changed to resemble foreach() more.  

Thu May 23 19:50:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed mental mistake in hiearchic options.  

Thu May 23 19:40:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	Added support for reading/writing color options.  

Thu May 23 19:26:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, opttypes.c:

	Fixed reading and writing of language and codepage type. Commented
	out writing of complex types (which are going to disappear). Now,
	ELinks is able to back read configuration saved by itself w/o any
	error. Removed comment about user.cfg on the top of elinks.conf.  

Thu May 23 18:59:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/opttypes.c:

	\\ means \ in config file.  

Thu May 23 18:56:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Add newline on proper places when saving options.  

Thu May 23 18:53:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Fixed options saving for now.  

Thu May 23 18:50:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: Makefile.am, cmdline.c, conf.c, options.c,
	options.h, opttypes.c, opttypes.h:

	Moved type handlers to config/opttypes.*.  

Thu May 23 18:38:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/Makefile.am, config/cmdline.c,
	config/cmdline.h, config/conf.c, config/conf.h:

	Moved command line processing to config/cmdline.*.  

Thu May 23 18:33:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, kbdbind.c, kbdbind.h, options.c, options.h:

	Complete rewrite of config file parser - first try. We don't write
	files in new config format yet. Also, we don't parse 'enums'
	correctly yet. However, we should be already able to parse numeric
	and string options correctly.  

Tue May 21 18:54:54 2002  Laurent Monin <zas@norz.org>:

	* src/: config/options.c, util/hash.c, util/hash.h:

	Key length is now passed to add_hash_item() and get_hash_item(), and
	key comparaisons are now byte to byte comparaison. Keys are no more
	limited to strings.  A hash function is now passed as parameter to
	init_hash(). Currently used hash function was renamed from mkhash()
	to strhash().  

Mon May 20 15:28:28 2002  Petr Baudis <pasky@ucw.cz>:

	* elinks.1, elinkskeys.5, contrib/mailcap.pl,
	contrib/user-keybindings.example, src/config/conf.c:

	elinks.cfg -> elinks.conf; user.cfg disappeared.  

Mon May 20 14:50:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Tidyup of config manipulation functions.  

Mon May 20 12:39:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Tiny tidyups. Described new config file format. Wisdom of TODO being
	spread.  

Mon May 20 11:55:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.h:

	Removed stale init_home() prototype.  

Sun May 19 21:27:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Use tab rather than space as a separator in cookies file. I feel
	safer now.  

Sun May 19 21:25:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Switched to new (tab-separated fields) bookmarks format completely.  

Sun May 19 19:34:51 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, elinks.1, elinkskeys.5, links.1, linkskeys.5,
	contrib/README, contrib/bm.lua, contrib/completion.tcsh,
	contrib/elinks-remote, contrib/elinks.spec.in, contrib/hooks.lua,
	contrib/links-remote, contrib/mailcap.pl, contrib/md5check.lua,
	contrib/old_to_new_bookmarks.sh, contrib/remote.lua,
	contrib/user-keybindings.example, contrib/w3m2links.gawk,
	src/Makefile.am, src/bookmarks/bookmarks.c, src/config/conf.c,
	src/config/options.c, src/config/options.h, src/config/urlhist.c,
	src/cookies/cookies.c, src/document/globhist.c,
	src/lowlevel/af_unix.c, src/lowlevel/home.c, src/lowlevel/home.h,
	src/lowlevel/interlink.c, src/scripting/lua/core.c,
	src/osdep/os_dep.c, src/osdep/osdep.c, src/util/secsave.c:

	Almost all remaing occurences of "links" changed to "elinks".
	Produced binary is named "elinks" now, global config directory is
	/etc/elinks/ now, local config directory is ~/.elinks/ now,
	links.cfg is elinks.cfg now, links.his is gotohist now, history is
	globhist now. Plenty of minor changes and updates accompanied.  
	
	YOU DO NOT WANT TO USE BUILD FROM NOW!!! Current configuration is
	lost for new ELinks, as it stays in ~/.links and ELinks will look
	for it in ~/.elinks now.  But you do NOT want to clone it! Format of
	some config files (at least bookmarks and .cfg) is going to change
	in next days, so you will just confuse your new ELinks with old
	configuration files there. Whatever you will put in ~/.elinks may
	disappear randomly in next days. I'll tell you when we'll be over
	;).  
	
	*Yawn* and now I'm going to watch GitS ;).  

Sun May 19 17:40:35 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: README, dummy-js.diff:

	Removed dummy-js - REALLY obsolete patch.  

Sun May 19 17:03:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Oops. Memory leak introduced by last commit fixed.  

Sun May 19 17:02:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Hopefully last piece from first stage of options rewrite -
	preliminary hiearchic options support. It is not used anywhere yet,
	and it is probably buggy, but who cares. As a separator, | instead
	of . is used now, as we mis-use . in names of some options. Stay
	tuned, more to come. Note that you probably don't want to do any big
	changes in configuration now, as in next set of commits, new config
	format is going to come VERY soon.  

Sun May 19 16:06:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/conf.c, config/conf.h, config/options.c,
	config/options.h, dialogs/options.c, document/dump.c,
	document/session.c:

	Removed global dds, html options converted to type-specific
	add_opt_*(). Removed html_options, HTML options are now in
	links_options => bye, bye, ~/.links/html.cfg (we still read from it,
	but we never write to it anymore) (thus also removed all_options).
	Added add_opt_codepage(). First tiny bits of indicies for hiearchic
	options.  

Sun May 19 15:01:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	item->value can be NULL now.  

Sun May 19 14:33:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Removed http_bugs, very minor tidyup, fixed reading strings from
	config file, and most importantly fixed done_options() - we treated
	option->type as a bitmask, due to some weird bug inside my brain.  

Sun May 19 14:12:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Introduced specialized macros for adding options with certain types.
	Removed most of the config variables, space is now allocated
	dynamically. WARNING: IT SEGFAULTS ON QUIT NOW! I'll have to rewrite
	some other small parts of ELinks code in order to get rid of
	http_bugs struct.  

Sun May 19 11:06:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Added add_opt(), which itself composes option struct from
	parameters. Changed list of options to chain of add_opt()s.  

Sun May 19 11:05:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	dump and source are now both booleans 

Sun May 19 11:05:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/dump.c:

	Fixed possible crash when reading long streams by -source. Patch by
	Mikulas.  

Sat May 18 23:01:33 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c, options.h:

	Typed options - each option has type instead of i/o handlers.
	Removed dmp and enum dump_type.  

Sat May 18 19:29:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	printhelp_cmd() uses foreach_hash_item now. We lost alphabetical
	order for now :(.  

Sat May 18 19:25:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/hash.c:

	Use init_list in init_hash().  

Sat May 18 19:25:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Disabled cache info once again - we need to rewrite this in 0.5.  

Sat May 18 19:23:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/conf.c, config/options.c, config/options.h,
	dialogs/options.c, document/download.c, document/dump.c,
	document/session.c, protocol/http/http.c:

	http_bugs are now retrieved by get_opt_*(). Removed exports of
	configuration variables (almost all). And, most importantly, all
	variables are stored in a hash now (still being transfered from a
	list there uppon init).  

Sat May 18 19:03:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: hash.c, hash.h:

	Runtime fixes, moved hash_size macro to .h, added foreach_hash_item
	macro.  

Sat May 18 16:36:45 2002  Laurent Monin <zas@norz.org>:

	* src/util/hash.c:

	Tidy up.  

Sat May 18 14:09:31 2002  Laurent Monin <zas@norz.org>:

	* acconfig.h, configure.in:

	CONFDIR is now defined in config.h, it can be changed using
	--sysconfdir configure option. Not used for now.  

Sat May 18 13:41:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/: Makefile.am, hash.c, hash.h:

	First try of hashing support.  

Sat May 18 12:19:35 2002  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	Aesthetical changes. Idea by Pasky ;) 

Sat May 18 11:49:17 2002  Laurent Monin <zas@norz.org>:

	* src/util/secsave.c:

	When using secsave option, temporary file has now a random name and
	is opened in a more secure way.  Some checks were added to prevent
	double free().  Access check to file on systems that don't have
	access() is fixed. fopen() call with "w" was breaking secsave
	feature because it truncated the file while opening it.  

Fri May 17 23:18:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/options.c, protocol/ftp.c, protocol/ftp/ftp.c:

	Use get_opt() in options dialogs.  

Fri May 17 22:41:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, lowlevel/sched.c, protocol/ftp.c,
	protocol/types.c, protocol/ftp/ftp.c, protocol/http/http.c:

	Last wave - fake_referer .. proxy_passwd.  

Fri May 17 22:31:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, document/globhist.c, document/history.c,
	document/session.c, document/view.c, protocol/file.c,
	protocol/ftp.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/http.c:

	Next wave, color_dirs .. startup_goto_dialog.  

Fri May 17 22:14:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	Removed some stale variables. Added get_opt_ptr() macro.  

Fri May 17 22:13:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, config/options.c, document/cache.c,
	document/download.c, document/html/renderer.c, lowlevel/dns.c,
	lowlevel/sched.c:

	Runtime fixes of the first wave. Second wave - async_lookup ..
	memory_cache_size.  

Fri May 17 21:59:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/urlhist.c, cookies/cookies.c,
	dialogs/menu.c, document/download.c, document/dump.c,
	document/view.c, protocol/file.c, protocol/file/file.c,
	util/secsave.c:

	First part of options (anonymous .. secure_save) is now being
	retrieved by get_opt().  

Fri May 17 21:34:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c, options.h:

	get_opt() and get_opt_rec() now take option list where they should
	search the option in (typed wrappers automatically use links_options
	by default). get_opt_rec() can now return NULL, internal() for that
	case moved to get_opt(). Introduced opt_name(), doing reverse of
	cmd_name(). get_opt_rec() now used while reading commandline and
	configfile in conf.c. The fun ride begins..  

Fri May 17 21:07:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Comments, merged from links-current.  

Fri May 17 20:13:19 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Notice about Links co-authorship for mikulas, brain and clock.  

Fri May 17 20:08:04 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/util/secsave.c:

	Check for access(2).  

Fri May 17 20:04:55 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/lowlevel/sysname.c:

	If available, use uname(2). Merged from links-current.  

Fri May 17 19:12:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, interlink.c:

	Oops. We forgot to htons() LINKS_PORT. Merged from links-current.  

Fri May 17 18:12:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/intl/language.inc, intl/danish.lng:

	Danish translation update by Jonas Fonesca.  

Fri May 17 18:12:17 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/completion.tcsh, intl/danish.lng:

	Updated the completion file, patch by Jonas Fonesca. Added more
	ELinks options and support for -- options.  

Fri May 17 17:41:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/document.c, protocol/url.c:

	Insert #thing to displayed URL in document info, if there was any.
	Idea by Dmitry.  

Fri May 17 16:18:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Introduced action download-image. Idea by Dmitry.  

Fri May 17 15:56:42 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukraininan language update by Dmitry.  

Fri May 17 15:43:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, scripting/lua/hooks.c:

	get_proxy() was returning pointer to static buffer instead of
	dynamic one. Patch by Peter Wang.  

Fri May 17 15:41:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, util/secsave.c, util/secsave.h:

	stat() destination file while using secure save. Automatically
	disable secure save when target is symlink. Raise error when we
	don't have read or write permissions on the file. Use unlink() only
	on OS2, as it breaks atomicity on other systems. Patch by zas and
	me.  

Wed May 15 08:56:03 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Bookmarks are resaved only when modified. Patch by Fabio Bonelli and
	Zas.  

Mon May 13 06:26:23 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	French translation update by Zas.  

Sun May 12 20:28:41 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added locations of PLD RPM packages, kindly provided by Witold
	Filipczyk.  

Sun May 12 20:27:30 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Moved check for -ldl before lua check.  

Sun May 12 20:19:27 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/.cvsignore, contrib/.cvsignore, intl/.cvsignore,
	test/.cvsignore:

	.cvsignore for ignoring Makefile.in 

Sun May 12 20:15:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/Makefile.am, dialogs/auth.c, dialogs/auth.h,
	protocol/auth/auth.c, protocol/auth/auth.h,
	protocol/auth/dialogs.c, protocol/auth/dialogs.h,
	protocol/http/Makefile.am, protocol/http/auth.c,
	protocol/http/auth.h, protocol/http/http.c:

	Fixes of httpauth move.  

Sun May 12 16:40:43 2002  Jan Sembera <fis@ji.cz>:

	* src/: main.c, dialogs/Makefile.am, dialogs/auth.c,
	dialogs/auth.h, dialogs/menu.c, lowlevel/sched.c, lowlevel/sched.h,
	protocol/auth/dialogs.c, protocol/auth/dialogs.h,
	protocol/auth/auth.c, protocol/auth/auth.h,
	protocol/http/Makefile.am, protocol/http/auth.c,
	protocol/http/auth.h:

	- http_auth separation patch (i hope i haven't missed anything) 

Sun May 12 16:18:30 2002  Laurent Monin <zas@norz.org>:

	* src/: cache/cache.c, document/cache.c:

	Tidy up.  

Sun May 12 14:46:28 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/lowlevel/dns.c:

	The famous DNS bug (connection terminated in lookup state caused
	catastrophe; broken kill_dns_request()) should be finally fixed now.  

Sun May 12 12:59:27 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, configure.in, Unicode/Makefile.am,
	contrib/Makefile.am, intl/Makefile.am, test/Makefile.am:

	Each subdir has own Makefile.am now.  

Sun May 12 06:34:22 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: LinksOS2Icon.zip, README:

	Links icons for OS/2 in various sizes and color depths.  

Sat May 11 20:26:46 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/completion.tcsh:

	Completions for tcsh by Jonas Fonesca.  

Sat May 11 20:13:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Fixed displaying of VT-100 frames in UTF-8 I/O mode. Also ^[11m
	sequence is not sent while in UTF-8 I/O mode. Patch by Ben Sittler.  

Sat May 11 18:33:38 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre7.CVS (yes, versioning scheme is changing a bit; now CVS
	versions will have version PREV_REL.CVS; stay tuned, more to come) 

Sat May 11 18:32:14 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre7 

Sat May 11 18:16:47 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Version now doesn't contain dash, CVS is separated by dot now.  

Sat May 11 18:15:54 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, contrib/elinks.spec, contrib/elinks.spec.in:

	Moved contrib/elinks.spec to contrib/elinks.spec.in, big cleanup and
	great symplifications. Patch by <yanek@yankuv.koniec.sk>.  

Sat May 11 18:05:34 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/compress.c:

	Fixed compilation w/o zlib or bzlib.  

Sat May 11 16:49:28 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Italian translation update, patch by Fabio Bonelli.  

Sat May 11 16:47:54 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/danish.lng, intl/dutch.lng,
	intl/english.lng, intl/estonian.lng, intl/finnish.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/indonesian.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/config/options.c,
	src/config/options.h, src/dialogs/options.c, src/intl/lang_defs.h,
	src/intl/language.inc, src/protocol/http/http.c:

	Support for Accept-language, patch by Fabio Bonelli.  

Sat May 11 15:20:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	maybe_pre_format_html() now takes cache_entry instead of status;
	patch by Peter Wang.  

Sat May 11 14:38:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	Temporarily always define LEAK_DEBUG and LEAK_DEBUG_LIST now :(.  

Sat May 11 12:24:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	We will never use non-debug code for memacpy(), as it's completely
	redundant. Comment added, should be removed soon.  

Sat May 11 12:05:24 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/osdep/os_dep.c, src/osdep/osdep.c:

	Include <io.h> in os_dep.c, for win32 (by mikulas, from 0.97).  

Sat May 11 11:49:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	Fix in displaying Debug in feature list.  

Fri May 10 22:06:54 2002  Petr Baudis <pasky@ucw.cz>:

	* README:

	Corrected some obsolete statements about ELinks, added description
	of differences between Links and ELinks.  

Fri May 10 21:38:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, dialogs/info.c:

	DEBUG on compilation fixes, added to features list.  

Fri May 10 21:26:41 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/links.h, src/setup.h:

	Turn DEBUG off by default, could be enabled thru configure.  

Fri May 10 17:53:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Disabled famous well-known and many-errors-catching internal() "cell
	is now wider" finally (by mikulas, from 0.97).  

Fri May 10 17:50:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Big forms are slightly faster - we don't uselessly check unused
	input tags (I hope that's it ;) (by mikulas, from 0.97).  

Fri May 10 17:46:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Default value of cols attribute of textarea is now
	HTML_DEFAULT_INPUT_SIZE, instead of 20 (by mikulas, from 0.97).  

Fri May 10 17:45:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Tread LF as space in attributes (by mikulas, from 0.97).  

Fri May 10 17:43:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Proccess even HTML code like <font size=1<b> (unterminated tag
	followed by another tag) correctly (by mikulas, from 0.97).  

Fri May 10 17:35:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	Move ending field of file_menu22[] outside #ifdef LEAK_DEBUG (by
	mikulas, from 0.97).  

Fri May 10 17:34:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	End doesn't skip to next line when wrapping in textarea (by mikulas,
	from 0.97).  

Fri May 10 17:32:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	In menu offered by ^W, last item is selected initially (by mikulas,
	from 0.97).  

Fri May 10 17:16:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixed OS/2 crash when user attempted to insert link addr to
	clipboard, but no link was selected (by mikulas, from 0.97).  

Fri May 10 17:14:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	Fixed OS/2 crash when user attempted to paste empty clipboard.  

Fri May 10 17:12:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Swapped x and y entries when reporting image in form (by mikulas,
	from 0.97).  

Fri May 10 17:09:20 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/document/download.c, src/lowlevel/terminal.h,
	src/osdep/os_dep.c, src/osdep/os_dep.h, src/osdep/osdep.c,
	src/osdep/osdep.h, src/osdep/win32.c, src/osdep/win32/win32.c:

	Win32 stuff - many bugfixes, more win32-specific functions, better
	cygwin support, etc (by mikulas, from 0.97).  

Fri May 10 16:25:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/secsave.c:

	Include unistd.h for unlink() ;).  

Fri May 10 16:23:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/secsave.c:

	File is unlink()ed before rename()ing in secsave routines. This is
	because of OS/2 which needs that. Reported by someone who I can't
	remember now :( before some time already. (by mikulas, from 0.97) 

Fri May 10 16:20:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, document/view.c, document/html/tables.c,
	intl/charsets.c:

	Fixed name clashes on MacOS X (by mikulas, from 0.97).  

Fri May 10 13:27:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Enable ^[[11m hack by default (by mikulas, from 0.97).  

Fri May 10 13:26:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: html/renderer.c, view.c:

	Don't decode and back encode hidden form items (by mikulas, from
	0.97).  

Fri May 10 13:06:10 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/lowlevel/sysname.c:

	Check for popen(), always default system_name to SYSTEM_NAME if not
	available.  

Fri May 10 12:46:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/error.c:

	Fix of zas' tidyup.  

Fri May 10 09:27:08 2002  Laurent Monin <zas@norz.org>:

	* src/ssl/: connect.c, ssl.c:

	Tidy up.  

Fri May 10 09:19:14 2002  Laurent Monin <zas@norz.org>:

	* src/util/error.c:

	Tidy up.  

Fri May 10 09:03:33 2002  Laurent Monin <zas@norz.org>:

	* src/intl/language.c:

	Tidy up.  

Fri May 10 08:53:37 2002  Laurent Monin <zas@norz.org>:

	* src/intl/charsets.c:

	Tidy up.  

Thu May  9 21:32:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	One possible variant (disabled anyway) included.  

Thu May  9 21:16:37 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/file.c, src/protocol/file/file.c,
	src/util/compress.c, src/util/compress.h:

	Complete rewrite and generalization of file decoding support. Now,
	we always call decoding routines, possibly with ENCODING_NONE
	parameter, thus invoking only dummy read routines. We have also gzip
	and bzip2 decoders. Encoding type is determined on the level of
	caller; sample use was introduced in protocol/file.c, where we guess
	encoding from file name with guess_encoding(). This all must have
	some bugs yet, as I wrote it just now, and I'm pretty surprised that
	it works already (for second time I tried it), with only minimal
	debugging ;).  

Wed May  8 17:18:36 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, src/protocol/file.c,
	src/protocol/file/file.c, src/util/Makefile.am,
	src/util/compress.c, src/util/compress.h:

	Base of decompression (gz and bz2) support. It can work only for
	files now, and it's disabled yet, because there are various issues
	with that - they are described in FIXMEs near try_decompress().  

Wed May  8 15:48:05 2002  Laurent Monin <zas@norz.org>:

	* src/document/session.c:

	Tidy up.  

Wed May  8 14:06:35 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: links-remote, remote.lua:

	Added 'X' binding which saves current link URL to external_url_file.  

Wed May  8 13:59:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/options.c, lowlevel/connect.c, lowlevel/dns.c,
	protocol/file.c, protocol/file/file.c:

	Hopefully last OS/2 compilation fixes by Cris.  

Wed May  8 13:55:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, main.c, main.h, bfu/bfu.c, bfu/bfu.h, bfu/menu.c,
	bfu/menu.h, bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	bookmarks/dialogs.c, bookmarks/dialogs.h, config/conf.c,
	config/conf.h, config/kbdbind.c, config/kbdbind.h,
	config/options.c, config/options.h, config/urlhist.c,
	cookies/cookies.c, cookies/cookies.h, cookies/parser.c,
	cookies/parsetst.c, cache/cache.c, cache/cache.h,
	dialogs/document.c, dialogs/document.h, dialogs/edit.c,
	dialogs/edit.h, dialogs/globhist.c, dialogs/globhist.h,
	dialogs/info.c, dialogs/info.h, dialogs/menu.c, dialogs/menu.h,
	dialogs/options.c, dialogs/options.h, dialogs/refresh.c,
	dialogs/refresh.h, document/cache.c, document/cache.h,
	document/download.c, document/download.h, document/dump.c,
	document/dump.h, document/globhist.c, document/history.c,
	document/history.h, document/location.c, document/location.h,
	document/options.c, document/options.h, document/session.c,
	document/session.h, document/view.c, document/view.h,
	document/vs.c, document/vs.h, document/html/colors.c,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/renderer.h,
	document/html/tables.c, intl/charsets.c, intl/charsets.h,
	intl/language.c, intl/language.h, lowlevel/af_unix.c,
	lowlevel/connect.c, lowlevel/connect.h, lowlevel/dns.c,
	lowlevel/home.c, lowlevel/interlink.c, lowlevel/kbd.c,
	lowlevel/sched.c, lowlevel/sched.h, lowlevel/select.c,
	lowlevel/select.h, lowlevel/sysname.c, lowlevel/terminal.c,
	lowlevel/terminal.h, lowlevel/ttime.c, util/ttime.c,
	osdep/os_dep.c, osdep/osdep.c, protocol/file.c, protocol/file.h,
	protocol/finger.c, protocol/finger.h, protocol/ftp.c,
	protocol/ftp.h, protocol/mailto.c, protocol/mailto.h,
	protocol/types.c, protocol/types.h, protocol/url.c, protocol/url.h,
	protocol/file/file.c, protocol/file/file.h, protocol/ftp/ftp.c,
	protocol/ftp/ftp.h, scripting/lua/core.c, scripting/lua/core.h,
	scripting/lua/hooks.c, scripting/lua/hooks.h, protocol/http/date.c,
	protocol/http/header.c, protocol/http/http.c, protocol/http/http.h,
	protocol/http/https.c, protocol/http/https.h, ssl/connect.c,
	ssl/connect.h, ssl/ssl.c, ssl/ssl.h, protocol/http/blacklist.c,
	util/base64.c, util/blacklist.c, util/conv.c, util/error.c,
	util/memlist.c, util/secsave.c:

	Changed ELinks internal #includes from <file> to "file". Patch by
	Peter Wang.  

Wed May  8 13:39:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: download.c, session.c:

	FIXMEs about frames and content-type checking.  

Wed May  8 12:27:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Tidyup of request_frame(), request_frameset(),
	request_additional_loading_file() and process_file_requests().  

Tue May  7 13:19:41 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/links.h, src/main.c,
	src/config/kbdbind.c, src/cache/cache.h, src/dialogs/info.c,
	src/dialogs/menu.c, src/dialogs/refresh.c, src/document/cache.h,
	src/document/dump.c, src/document/session.c, src/document/view.c,
	src/lowlevel/sched.c, src/protocol/http/http.c,
	src/scripting/lua/Makefile.am, src/scripting/lua/core.c,
	src/scripting/lua/core.h, src/scripting/lua/hooks.c,
	src/scripting/lua/hooks.h:

	Moved most lua pieces to src/lua/hooks.*. Moved src/lua/lua.* to
	src/lua/core.*. Minor code cleanups. Also introduced proxy_for_hook.
	We also have HAVE_SCRIPTING dummy #define now. Patch by Peter Wang
	and me.  

Tue May  7 07:23:06 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian translation update by Dmitry.  

Mon May  6 15:27:00 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Czech translation stylistical correction.  

Mon May  6 15:24:46 2002  Petr Baudis <pasky@ucw.cz>:

	* test/javascript_broken.html:

	Broken page due to braindead HTML parser and <td> inside <script>
	inside <table>.  

Mon May  6 15:19:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Use mkstemp() instead of tmpname() in textarea_edit().  

Mon May  6 14:12:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/conf.c, config/options.c, cookies/cookies.c,
	document/download.c, document/dump.c, document/view.c,
	lowlevel/af_unix.c, lowlevel/connect.c, lowlevel/connect.h,
	lowlevel/dns.c, lowlevel/home.c, lowlevel/interlink.c,
	osdep/os_dep.c, osdep/osdep.c, protocol/file.c, protocol/url.c,
	protocol/file/file.c, util/secsave.c:

	OS/2 compilation fixes by Cris. IIRC only #includes swapping.  

Mon May  6 11:45:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/util/secsave.h:

	Include stdio.h and sys/types.h in util/secfile.h. Broke compilation
	on OS/2 otherwise.  

Sun May  5 16:43:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	Repair of zas' broken tidyup.  

Sun May  5 16:19:40 2002  Laurent Monin <zas@norz.org>:

	* src/config/kbdbind.c:

	Tidy up. Table in parse_act() is now an strtonum array.  

Sun May  5 15:10:20 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: hooks.lua, links-remote, remote.lua:

	Semi-support from passing URLs from remote programs to ELinks (like
	'netscape -remote'), contributed by Len Trigg <len@reeltwo.com>.  

Sun May  5 15:07:30 2002  Laurent Monin <zas@norz.org>:

	* linkskeys.5:

	Updated for link-menu action.  

Sun May  5 14:52:53 2002  Laurent Monin <zas@norz.org>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	A new configurable keyboard shortcut was added. It has the same
	effect than a right mouse button click on a link/image/form, it
	popups a contextual menu with possible actions for it. It's bound to
	'l' or 'L' keys by default and corresponds to action named
	ACT_LINK_MENU.  

Sun May  5 14:23:51 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Lua RedHat-specific -I fix by Len Trigg <len@reeltwo.com>.  

Sun May  5 12:40:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/home.c, protocol/ftp.h, protocol/ftp/ftp.h:

	OS/2 compilation fixes by Cris.  

Sun May  5 12:36:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Minor tidyup in check_queue_bugs() by Cris.  

Sat May  4 17:06:15 2002  Laurent Monin <zas@norz.org>:

	* src/dialogs/document.c:

	Tidy up. head_msg() was partially rewritten. Now it replaces control
	chars in headers with '*' if needed, '\r' is ignored, ending '\n'
	are removed.  

Sat May  4 15:12:24 2002  Laurent Monin <zas@norz.org>:

	* intl/french.lng, src/intl/language.inc:

	Updated french translation by Zas.  

Sat May  4 12:55:33 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/italian.lng, src/intl/language.inc:

	Updated italian translation by Cris.  

Sat May  4 12:50:49 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	Added note about versions of automake and autoconf.  

Sat May  4 09:14:00 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/danish.lng, intl/dutch.lng,
	intl/english.lng, intl/estonian.lng, intl/finnish.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/indonesian.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/document/view.c,
	src/intl/lang_defs.h, src/intl/language.inc:

	Added reload actions to link context menu.  

Sat May  4 09:00:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/session.c,
	document/view.c:

	Added ACT_ENTER_RELOAD - loads document behind link even when it's
	already in cache. Very useful for some web discussion systems, we
	cache redirects when we are logging in for more times, thus we won't
	relogin at all. submit_form_do() -> goto_link(). submit_form() ->
	submit_form_do(), submit_form() and submit_form_reload() as only
	wrappeers for submit_form_do().  

Sat May  4 08:42:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: session.c, session.h, view.c:

	Added cache_mode parameter to goto_url_w(). goto_url_f() ->
	goto_url_frame(). Added goto_url_frame_reload().  

Sat May  4 08:30:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/session.c, document/session.h, lowlevel/sched.c,
	lowlevel/sched.h:

	Use enum cache_mode in prototypes declaration. More spreading of
	enum cache_mode in document/session.*.  

Sat May  4 08:23:39 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/session.c, lowlevel/connect.c, lowlevel/sched.c,
	lowlevel/sched.h, protocol/http/http.c:

	no_cache -> cache_mode, NC_* moved to enum cache_mode.  

Sat May  4 08:14:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, dialogs/document.c, document/cache.c,
	document/session.c, document/view.c, document/html/renderer.c,
	lowlevel/sched.c:

	Changed return value of find_in_cache() - now it returns 0 when
	nothing was found and 1 if something was digged from the cache. Much
	more intuitive than -1/0, I think.  

Sat May  4 08:09:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	Tidyup of find_in_cache().  

Sat May  4 08:06:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Tidyup of ses_goto().  

Sat May  4 07:57:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Tidyup of goto_url_w().  

Sat May  4 07:44:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	cache_entries_count -> table_cache_entries. *sigh* I feel like
	talking with a deaf sometimes.  

Thu May  2 19:20:45 2002  Laurent Monin <zas@norz.org>:

	* src/document/html/renderer.c:

	A limit to the number of entries in cache used for nested tables was
	added.  It's a partial fix against poor performance obtained when
	refreshing some pages (like
	http://www.gentoo.org/index-packages.html).  A better fix will come
	later with the implementation of hash tables for cache searching.  

Wed May  1 19:34:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Cleanup of get_html_form(). Strip query string from action if action
	is not specified, but only when method is get.  

Wed May  1 18:33:58 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/hooks.lua:

	Added hook for e2:something in URL - search on
	http://www.everything2.org/.  

Wed May  1 12:47:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Commented out code for stripping anything behind '?' in the base URL
	when composing action URL for a form. Reported by Anders Widman
	<andewid@tnonline.net>.  

Wed May  1 12:41:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Attempt #1 to fix compilation on FreeBSD. Thanks to clemensF.  

Wed May  1 09:00:24 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added http://elinks.pld.org.pl/ as new ELinks' primary site.  

Tue Apr 30 13:02:26 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre7-CVS 

Tue Apr 30 12:53:12 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre6 

Tue Apr 30 10:10:03 2002  Laurent Monin <zas@norz.org>:

	* test/href_tests.html:

	The purpose of this document is to permit testing of href links.  

Tue Apr 30 09:22:16 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/types.c:

	Tidy up. Small optimization in get_content_type() concerning ending
	spaces removing.  

Mon Apr 29 22:37:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Fixed bug reproducible when using proxy - the equation was evaluated
	from right to left, it looks :(.  

Mon Apr 29 22:23:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Include <signal.h>. Bug reported by drewie.  

Mon Apr 29 22:04:01 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Include <signal.h>. Bug reported by drewie.  

Mon Apr 29 20:53:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Minor tidyup of frame_ev(). Now, when you click to margin of
	document displayed (3 vert., 6 horiz.), the document gets scrolled
	in appropriate direction. Thanks to thement for the idea.  

Mon Apr 29 19:03:34 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.c:

	Tidy up. parse_url() calls were reindented. Small optimization of 
	encode_url_string(), snprintf() is no more called.  

Mon Apr 29 18:40:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	In help, show 15 leading whitespaces near descritpion rather than
	35.  

Mon Apr 29 17:28:01 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/mailto.c:

	Tidy up. A call to parse_url() was replaced by calls to wrapping
	functions.  

Sun Apr 28 18:03:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: conf.c, options.c, options.h:

	Changed struct option - now we've only config name there,
	commandline alias is automatically generated. Also added flags
	field, specifying if the option is commandline, configfile or both.
	Modified the code accordingly. Also, we now accept -no-connect as
	well as -no_connect on the command line now.  

Sun Apr 28 17:28:31 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Tidy up. Function's type is on the line before function's name now.  

Sun Apr 28 17:17:55 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	CWD/REST commands are now sent before PORT command. A function 
	add_portcmd_to_str() was added, it constructs PORT command and its
	parameters.  Code redundancy was reduced.  

Sun Apr 28 15:42:57 2002  Laurent Monin <zas@norz.org>:

	* src/util/conv.c:

	isA() is now used in accept_char() macro.  

Sun Apr 28 15:11:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c, document/dump.c:

	Few bugfixes in the options fetching code. Converted testing for
	value of 'dump' to the new options fetching, so that we can test it.  

Sun Apr 28 14:51:33 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Minor tidy up.  

Sun Apr 28 14:33:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/options.c, config/options.h:

	Made enum dump_type and changed type of dmp to enum dump_type.
	Annihilated macros D_DUMP and D_SOURCE, added enum D_NONE.  

Sun Apr 28 14:24:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/: options.c, options.h:

	First draft of implementation of new options system.  

Sun Apr 28 13:31:57 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Added descrpition of the second part of TODO list ;).  

Sun Apr 28 12:02:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/TODO:

	Added note about postponing the HTML rewrite until js + inline
	images will be in glinks.  

Sun Apr 28 12:00:27 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, config/Makefile.am, config/conf.c, config/conf.h,
	config/urlhist.c, config/urlhist.h, lowlevel/home.c,
	lowlevel/home.h:

	Moved URL history saving/loading routines from config/conf.* to
	config/urlhist.*. Moved free() of links_home from config/conf.* to
	lowlevel/home.*.  

Sun Apr 28 11:49:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.c, dialogs/edit.c, document/view.c,
	lowlevel/dns.c:

	Removed stale lines commented out by //.  

Sun Apr 28 11:48:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, config/conf.c,
	config/options.c, config/options.h, cookies/cookies.c,
	document/globhist.c, document/session.c, lowlevel/Makefile.am,
	lowlevel/af_unix.c, lowlevel/home.c, lowlevel/home.h,
	lowlevel/interlink.c, lowlevel/sysname.c, lowlevel/sysname.h,
	protocol/http/http.c:

	Moved home and sysname detection from config/conf.* and
	config/options.* to lowlevel/home.* and lowlevel/sysname.*.  

Sun Apr 28 11:17:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/Makefile.am, dialogs/document.c,
	dialogs/document.h, dialogs/menu.c, document/view.c,
	document/view.h:

	Moved header and document info dialog to dialogs/document.* 

Sun Apr 28 10:55:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, file/file.c:

	Fixed segfault introduced by add_htmlesc_str() patch. We must use
	init_str() instead of stracpy(). Reported by Zas.  

Sat Apr 27 22:03:13 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Removed some stale entries, little reordering.  

Sat Apr 27 21:58:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/conf.c:

	Emphasized warning about automatically generated links.cfg.  

Sat Apr 27 21:46:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	When extension starts with dot, we survive it and handle it
	intuitively.  

Sat Apr 27 21:43:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/options.c:

	Fixed double mailto option entry, reported by mmc.  

Sat Apr 27 21:30:27 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, test/README, test/align.html, test/bigtextarea.html,
	test/erreurs_en.htm, test/longtitle.html, test/poocs.net.html,
	test/portlink.html, test/tabindex.html:

	Created subdir test/ with various testing documents hanging all
	around and polluting my disk assembled there.  

Sat Apr 27 21:21:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: protocol/file.c, protocol/ftp.c, protocol/file/file.c,
	protocol/ftp/ftp.c, util/conv.c, util/conv.h:

	add_conv_str() -> add_htmlesc_str() and moved from protocol/ftp.c to
	util/conv.*; also spreading its usage in protocol/file.c; thanks to
	zas for suggestion.  

Sat Apr 27 20:56:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, setup.h, config/conf.c, dialogs/menu.c:

	Removed MAX_INPUT_(URL,LUA)_LEN, now we use MAX_STR_LEN instead. It
	was very dangerous before, as sometimes we used MAX_INPUT_URL_LEN
	(4096), but sometimes MAX_STR_LEN (which is 1024), thus overflows
	were possible. Also moved MAX_STR_LEN from links.h to setup.h.  

Sat Apr 27 20:47:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Tidyup of is_in_list() and split to several smaller functions. Added
	possibility to compare only the ends of the strings, good for
	extension checking. Now we allow extensions even with dots inside to
	be associated with a MIME type by user. Thanks to mmc for
	suggestion.  

Sat Apr 27 13:15:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, bookmarks/bookmarks.c, config/Makefile.am,
	config/conf.c, config/conf.h, config/default.c, config/default.h,
	config/kbdbind.c, config/kbdbind.h, config/options.c,
	cache/cache.c, config/options.h, cookies/cookies.c, dialogs/info.c,
	dialogs/menu.c, dialogs/options.c, document/cache.c,
	document/download.c, document/dump.c, document/globhist.c,
	document/history.c, document/session.c, document/view.c,
	document/html/parser.c, document/html/renderer.c,
	lowlevel/af_unix.c, lowlevel/dns.c, lowlevel/interlink.c,
	lowlevel/sched.c, protocol/file.c, protocol/ftp.c,
	protocol/types.c, protocol/file/file.c, protocol/ftp/ftp.c,
	protocol/http/http.c, util/secsave.c:

	Splitted config/default.* to config/conf.* (takes care about config
	file and command line proccessing) and config/options.* (takes care
	about options handling). This can be considered as a first little
	step for new options system.  

Sat Apr 27 11:52:33 2002  Petr Baudis <pasky@ucw.cz>:

	* linkskeys.5, src/osdep/os_dep.c, src/osdep/osdep.c:

	Catch errors reported by X and handle them properly. Also typo fix
	in linkskeys.5. Patch by Peter Wang, minor change by me.  

Sat Apr 27 11:34:11 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Moved AC_CHECK_LIB for -ldl above CFLAGS_X=CFLAGS - now the result
	is actually even preserved. Makes more sense for me, let's see if
	it'll break something ;).  

Sat Apr 27 11:30:48 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Typo fixes.  

Sat Apr 27 11:30:23 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Reverted all OpenSSL+Lua-related recent changes (1.54 and 1.59+) -
	it needs to be completely redone, now things are keeping breaking..  

Fri Apr 26 21:32:40 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: file.c, file/file.c:

	Tidy up, minor changes.  

Fri Apr 26 18:14:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Compilation fixes.  

Fri Apr 26 18:14:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/default.c, config/default.h, protocol/types.c:

	Added default_mime_type option, with text/plain as a default value.  

Fri Apr 26 18:09:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/types.c:

	Tidyup of content type guessing code.  

Fri Apr 26 17:56:53 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/finger.c:

	Tidy up.  

Fri Apr 26 17:49:46 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: README, colws.diff:

	Added colws.diff (preserve two whitespaces after '.' or ':' in HTML
	document) by <ard@waikato.ac.nz> to contrib. This behaviour is not
	standart and not very intuitive, and may cause some problems, so I'm
	not including it in the mainline.  

Fri Apr 26 17:26:46 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/danish.lng, intl/dutch.lng,
	intl/english.lng, intl/estonian.lng, intl/finnish.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/indonesian.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/config/default.c,
	src/dialogs/options.c, src/intl/charsets.c, src/intl/charsets.h,
	src/intl/lang_defs.h, src/intl/language.inc,
	src/lowlevel/terminal.c, src/lowlevel/terminal.h:

	Support for UTF8 I/O (terminal option utf8_io), patch by Ben Sitter,
	cosmetical changes by me.  

Fri Apr 26 17:07:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Tidyup of various element handlers, some more fail checks. Call
	html_focusable() before each put_link_line(), fixes the bug that
	Link: lines and similiar have invalid tabindex, thus the navigation
	messes up, reported by Kevin Everets <kevin.everets@alcatel.com>.  

Fri Apr 26 16:06:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	Fixed possible segfault in memory allocation failure handling in
	load_url() (stat may be NULL, but is always dereferenced).  

Fri Apr 26 15:48:13 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/http/http.c:

	Better ' ' -> %20 code, patch by Witold Filipczyk.  

Fri Apr 26 13:25:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/globhist.c:

	Global history clear button cleanup by Miciah.  

Fri Apr 26 13:23:57 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	AC_SEARCH_LIBS fixes for ssl and lua checks, it was completely
	broken..  

Fri Apr 26 13:03:40 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	SSL detection fixes. It was not used when first lib search
	succeeded. Silly.  

Wed Apr 24 19:20:00 2002  Laurent Monin <zas@norz.org>:

	* src/: lowlevel/sched.c, protocol/http/http.c:

	Almost complete http authentification rewriting.  
	
	- Fix a bug (memleak) occuring with urls with port and no path
	  (:901/ bug).  Accessing to http://www.some.site:901 do not failed
	anymore.  
	- Fix a major design error, realms concept wasn't respected. So when
	  accessing to two directories at the same depth on the same host and
	  in the same realm, authentification dialog do not pop up anymore.  
	- Fix urls handling. WWW.some.site, www.some.site and
	  www.Some.Site:80 are now equivalent in concern of authentification.  
	- Added support for http://user:pass@www.some.site/ syntax.  

Wed Apr 24 14:49:48 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/http/http.c:

	Fix a potential buffer overflow in proxy authorization code.  

Wed Apr 24 14:14:17 2002  Laurent Monin <zas@norz.org>:

	* src/lowlevel/sched.c:

	HTTP auth related functions small tidy up.  

Wed Apr 24 08:06:24 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/url.h:

	get_protocol_name() prototype added.  

Tue Apr 23 20:47:29 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/Makefile.am:

	Some recently added lines may cause compilation to fail, disabled
	for now.  

Tue Apr 23 12:17:09 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Typo fixes 

Tue Apr 23 08:46:11 2002  Laurent Monin <zas@norz.org>:

	* TODO:

	TODO: Passive FTP mode support 

Tue Apr 23 08:31:26 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/parser.c:

	Cookies parsing fixes, partially by <len@reeltwo.com>.  

Tue Apr 23 08:25:45 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/parsetst.c:

	Terminate name and value with \0.  

Tue Apr 23 08:14:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/parsetst.c:

	Empty string really quits the creature now :).  

Tue Apr 23 08:08:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/parsetst.c:

	Ehm, minor fixes ;).  

Tue Apr 23 08:06:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/: Makefile.am, cookies.c, parser.c, parser.h,
	parsetst.c:

	Moved parse_cookie_str() to parser.*, added parsetst.c for testing
	the parser standalone.  

Tue Apr 23 07:48:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Move cookies parsing to parse_cookie_str().  

Mon Apr 22 15:39:26 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in:

	Lua/OpenSSL compile fixes - on RedHats it apparently needs -ldl
	magical word in final link, and we did it wrong way because me ;).
	Patch by <zimon@iki.fi>.  

Sun Apr 21 19:12:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, lowlevel/sched.c, lowlevel/sched.h,
	protocol/http/blacklist.c, protocol/http/blacklist.h,
	protocol/http/http.c, util/Makefile.am, util/blacklist.c,
	util/blacklist.h:

	Moved blacklist managment to util/blacklist.*. It's also possible I
	made some very minor cleanups there.  

Sat Apr 20 19:55:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Another bit of cleanup of bottom part of join_urls(). Also fixed
	another bug reported by kon@iki.fi and Peter Gervai
	<grin@tolna.net>. Now, we sometimes add slash by ourselves in
	join_urls(), if it's reasonable. Also left commented out debug()
	things for future use ;).  

Sat Apr 20 19:28:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Tiny cleanup of bottom part of join_urls(). Also partially fixed one
	bug reported by kon@iki.fi and Peter Gervai <grin@tolna.net>.  

Sat Apr 20 16:53:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Add .biz to our HTTP guessing code.  

Sat Apr 20 16:48:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Minor clarification.  

Sat Apr 20 15:13:30 2002  Laurent Monin <zas@norz.org>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	A segfault occuring when listing certain FTP directories is now
	fixed. This bug was introduced by Pasky while a goto-hunting after
	0.3.0 release.  

Sat Apr 20 12:52:13 2002  Laurent Monin <zas@norz.org>:

	* src/config/default.c:

	Read/write for user only and secure saving for links.his file.  

Sat Apr 20 12:25:31 2002  Laurent Monin <zas@norz.org>:

	* src/config/default.c:

	Secure saving and r/w access for user only spread to *.cfg files.  

Sat Apr 20 11:34:10 2002  Laurent Monin <zas@norz.org>:

	* src/document/globhist.c:

	History file secure saving and r/w access mode for user only.  

Sat Apr 20 11:26:29 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/bookmarks.c:

	Bookmarks file mode is now restricted to r/w for user only.  

Sat Apr 20 11:21:01 2002  Laurent Monin <zas@norz.org>:

	* src/cookies/cookies.c:

	Secure saving for cookies file.  

Sat Apr 20 10:16:36 2002  Laurent Monin <zas@norz.org>:

	* src/: Makefile.am, bookmarks/bookmarks.c, config/default.c:

	Bookmarks file secure saving is now activated as is secure_save
	option.  

Sat Apr 20 09:49:43 2002  Laurent Monin <zas@norz.org>:

	* src/: links.h, bookmarks/bookmarks.c, config/default.c,
	cookies/cookies.c, document/globhist.c, util/secsave.c:

	Small change to straconcat() description and spread its use to more
	places. Minor changes to still unused secure_open() function.  

Sat Apr 20 09:15:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	More error handling in get_window_title(), thanks Peter :).  

Sat Apr 20 09:13:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	Include <stdarg.h> in links.h, thanks Miciah :).  

Fri Apr 19 16:15:04 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/danish.lng, intl/index.txt, src/intl/lang_defs.h,
	src/intl/language.inc:

	Danish translation by Jonas Fonseca <fonseca@diku.dk>.  

Fri Apr 19 14:28:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/default.c, config/default.h, util/Makefile.am,
	util/secsave.c, util/secsave.h:

	Base stone of common secure save support. Introduced secure_save
	option (not active yet), and added some utils for secure saving
	inside util/secsave.*. Patch by Zas and me.  

Fri Apr 19 14:03:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	straconcat(), patch by Zas (will be used soon). Note that I invented
	such a silly name :).  

Fri Apr 19 14:02:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	Return NULL upon allocation failure in do_dialog().  

Fri Apr 19 12:45:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, bfu/bfu.h, dialogs/globhist.c,
	dialogs/globhist.h, document/globhist.c:

	Rewrite of box content handling in global history, update all
	history boxes upon adding/removing something in global history.
	Patch by Miciah Dashiel.  

Fri Apr 19 12:23:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	ACT_REALLYQUIT -> ACT_REALLY_QUIT, patch by Peter Wang ;).  

Fri Apr 19 12:20:55 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/osdep/os_dep.c, src/osdep/osdep.c:

	Saving window title. We have to also link together with X11 (if
	found, obviously), in order to be able to accomplish this. Patch by
	Peter Wang.  
	
	I stole code from vim to save the xterm title.  The vim code is much 
	more complicated (and also shitty, like links :-), meaning I made a 
	lot of bad assumptions.  But it's a start.  

Wed Apr 17 22:22:19 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/config/default.c, src/config/default.h,
	src/protocol/http/http.c:

	Basic Proxy Auth support by Sergio R. Velasquez Zeballos
	<svelasqu@thor.uc.edu.ve>.  

Wed Apr 17 19:15:07 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Ukrainian translation fixes by Dmitry.  

Wed Apr 17 08:53:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	Silence compiler warning.  

Wed Apr 17 08:33:19 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/german.lng, src/intl/language.inc:

	German translation updates by Ingo Blechschmidt <iblech@web.de>,
	with corrections by Eduard Werner <edi.werner@gmx.de>.  

Wed Apr 17 08:26:45 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, linkskeys.5:

	Typo fixes in linkskeys.5 by Doug Kearns
	<djkea2@mugca.its.monash.edu.au>.  

Wed Apr 17 08:24:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/menu.h, dialogs/menu.c:

	Show 'h' as a global hotkey for global history, not 'y'; reported by
	José Luis González González and many others. Also tiny TODO rel. to
	keybindings near hotkey field in struct menu_field. Also log message
	almost longer than the patch himself.  

Wed Apr 17 08:13:08 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/hooks.lua:

	Fixed error in Lua syntax, reported by Peter Gervai.  

Tue Apr 16 21:25:42 2002  Laurent Monin <zas@norz.org>:

	* src/bookmarks/dialogs.c:

	last added bookmark is now selected when exiting add dialog 

Tue Apr 16 21:06:12 2002  Laurent Monin <zas@norz.org>:

	* contrib/old_to_new_bookmarks.sh:

	Portable script by Stephane Chazelas <stephane.chazelas@free.fr> 

Tue Apr 16 20:53:44 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Expire cookies with invalid date on ELinks' quit. Also typo fix in
	one comment. *yawn* 

Tue Apr 16 18:34:56 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, configure.in, src/main.c, src/dialogs/options.c,
	src/document/dump.c, src/lowlevel/select.c, src/osdep/os_dep.c,
	src/osdep/osdep.c:

	QNX-related fixes - added test for sys/signal.h, NULL terminated
	some arrays, etc. Patch by Julian Kinraid <jkinraid@clear.net.nz>.  

Tue Apr 16 18:09:01 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/ukrainian.lng, src/intl/language.inc:

	Updated Ukrainian translation by Dmitry Pinchukov
	<dpinch@viart.com.ua>.  

Tue Apr 16 16:56:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Cookies cleanup by Zas. Without my buggy modifications now ;).  

Tue Apr 16 16:16:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Cleanup of download.c by Zas.  

Tue Apr 16 13:04:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/kbd.c:

	kbd.c tidyup, patch by Zas.  

Tue Apr 16 12:45:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/session.c, osdep/win32.c, osdep/win32/win32.c:

	More Links -> ELinks; patch by Zas :).  

Tue Apr 16 12:43:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Replace some code with an safe_strncpy() call, minor tidy up. -- Zas 

Tue Apr 16 12:41:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Add more checks to set_window_title() unix version.  
	
	- It renames url parameter to a more consistent name: title 
	- It fix a problem when title was NULL -> it prints nothing instead
	  of printing (null).  
	- It limits title length to a reasonable size according to terminal 
	  width.  
	- It replaces control chars with spaces, if any in title.  
	- Comments were added.  
	
	-- 
	
	Zas 

Tue Apr 16 12:34:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/view.c:

	Fixing displaying of title and position in document..  
	
	- When a page contains a very long title, page info on first line
	  seems to be part of document.  
	- Page numbering is not internationnalized ie. (p5 of 32) 
	- We don't know if page title is truncated or no.  
	
	So this patch makes it to print as: 
	
	      AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA...  
	                       Tuxfinder : Linux search tool (2/3) 
	   XTERM - Terminal emulator for the X Window System (1/2) XTERM -
	Terminal emulator f... (1/3) 
	
	It solves i18n problems using a "(n/t)" instead of "(pn of t)" It
	adds "..." to truncated titles.  
	
	-- 
	
	Zas 

Tue Apr 16 10:47:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	Indentation fix ;). Patch by Zas.  

Tue Apr 16 10:43:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	BFU minor tidyup, patch by Zas 

Tue Apr 16 10:32:16 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/old_to_new_bookmarks.sh:

	Shell script by Zas for conversion from the old bookmarks file
	format to the new one.  

Thu Apr 11 16:16:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/options.c:

	Terminate some texts in options dialogs by NULLs properly.  

Wed Apr 10 13:00:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	Fixed internal error at http://www.esolutions-ukraine.com/.
	Something with more passes when calculating cell or so ;) (by
	mikulas, from 0.97pre12).  

Tue Apr  9 13:08:16 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/german.lng, src/intl/language.inc:

	Fixed german translation (s/Links/ELinks). Thanks to Ingo
	Blechschmidt <iblech@web.de> for report.  

Tue Apr  9 08:07:02 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, intl/english.lng, intl/spanish.lng,
	src/intl/language.inc, src/lowlevel/terminal.c,
	src/lowlevel/terminal.h:

	Updated Spanish translation by David Mediavilla Ezquibela
	<davidme.forum@bigfoot.com>. Also fixed misunderstanding of
	block_cursor option (only in source, english and czech translation
	yet, though), reported by David as well.  

Sun Apr  7 17:15:17 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	Added CVS mirror to SITES.  

Sun Apr  7 14:35:51 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre6-CVS 

Sun Apr  7 14:35:04 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre5 

Sun Apr  7 14:13:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Do not save bookmarks in new format yet, if they were loaded in the
	old format.  

Sun Apr  7 14:06:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Reverted download cleanup by Zas. Caused VERY nasty problems.  

Sun Apr  7 13:55:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Reverted cookies cleanup by Zas. Caused VERY nasty problems.  

Sun Apr  7 12:47:02 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	Breaking things at least partially working yet.. oh well ;) Now
	we'll check for -ldl when checking for Lua as well.  

Sat Apr  6 22:19:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Fix in merge of OS/2 fix pipe-before-socket from 0.97pre11.  

Sat Apr  6 22:10:17 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng, src/document/view.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Show page title and last visit time in location info dialog, patch
	by Miciah.  

Sat Apr  6 18:02:30 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	By now on, use '\t' as separator in the ~/.links/bookmarks file
	rather than '|'. We still accept '|' as a separator in old bookmarks
	files. Patch by Zas and me.  

Sat Apr  6 17:52:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Safe bookmarks loading, patch by Zas.  

Sat Apr  6 17:46:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Cookies tidyup, more secure loading of cookies (allocate enough
	space). Patch by Zas.  

Sat Apr  6 17:38:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Workaround for some subtle bug in OS/2 - create pipe before socket
	(by mikulas, from 0.97pre11).  

Sat Apr  6 17:08:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, parser.h, renderer.c:

	Fixed internal error: cell iw now wider. We don't allow overlapping
	of hr linez anymore (by mikulas, from 0.97pre10) 

Sat Apr  6 16:57:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, connect.c, interlink.c:

	Zero all sockaddr structures before messing with them. Also some
	various fixes in af_unix.c, probably causing some OS/2 problems (by
	mikulas, from 0.97pre9) 

Sat Apr  6 16:51:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/af_unix.c, lowlevel/interlink.c, osdep/os_dep.c,
	osdep/os_dep.h, osdep/osdep.c, osdep/osdep.h:

	Increase priority on OS/2 (by mikulas, from 0.97pre9).  

Fri Apr  5 23:16:53 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, links.1, linkskeys.5:

	Added manpage linkskeys.5, contributed by Peter Wang.  

Wed Apr  3 20:52:41 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/user-keybindings.example:

	Added contrib/user-keybindings.example contributed by David
	Mediavilla <r96x6a79yki40001@sneakemail.com>. Someone should go and
	make it up-to-date.  

Wed Apr  3 17:32:11 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, contrib/README, contrib/elinks.spec:

	RPM spec file contributed by <zimon@niksula.hut.fi>.  

Wed Apr  3 15:29:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/Makefile.am:

	HPUX compilation fix by sc.  

Wed Apr  3 13:48:05 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.c:

	Fix in HTTP date parser by sc.  

Tue Apr  2 22:29:46 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, configure.in, src/bookmarks/bookmarks.c,
	src/bookmarks/dialogs.c, src/cookies/cookies.c,
	src/dialogs/globhist.c, src/dialogs/info.c, src/dialogs/menu.c,
	src/document/globhist.c, src/document/view.c:

	Possibility not to include globhist/bookmarks/cookies in resulting
	executablee by specifying parameter to ./configure.  

Tue Apr  2 21:51:08 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Todo bit by David Mediavilla.  

Tue Apr  2 21:50:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: Makefile.am, menu.c, options.c, options.h:

	Split settings dialogs from dialogs/menu.c to dialogs/options.c.
	Also various tidyups there.  

Tue Apr  2 20:40:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/download.c:

	Cleanup of download.c, patch by Zas. Maybe expect problems..  

Tue Apr  2 19:55:44 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Another TODO bit, now from muehlenhoff@gmx.de (Moritz Muehlenhoff).  

Tue Apr  2 17:40:31 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO, src/config/default.c, src/document/html/parser.c:

	Some support for vlink attribute. We honour it somehow now (thanks
	to global history), BUT frequently after RGB approximation we won't
	see the difference, and also the document must be re-rendered (thus
	reloaded for now - I guess we would find some use for rerender
	action as well) in order to update the colors (I fear I won't be
	able to do it better with current HTML support).  

Tue Apr  2 17:16:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	Parse LIST response only after RETR, patch by Zas.  

Tue Apr  2 17:09:32 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng, src/bookmarks/dialogs.c,
	src/dialogs/globhist.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Nicer displaying of Delete bookmark? dialog, patch by Zas.  

Tue Apr  2 17:04:38 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/french.lng, src/intl/language.inc:

	French language updates for global history by Zas.  

Tue Apr  2 16:00:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/globhist.c, document/globhist.c,
	document/globhist.h:

	last_searched_globhist_* -> gh_last_searched_*.  

Tue Apr  2 15:58:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/dialogs.c, dialogs/globhist.c:

	Support for searching in global history, patch by Miciah.  

Tue Apr  2 14:11:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, bookmarks/dialogs.c, dialogs/Makefile.am,
	dialogs/edit.c, dialogs/edit.h:

	Moved code for edit_dialog() from bookmarks/dialogs.c to
	dialogs/edit.c - we're going to use that code in global history as
	well.  

Tue Apr  2 13:46:06 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/osdep/os_dep.c, src/osdep/osdep.c:

	In xterm, modify window title accordingly to the URL being visited.
	Patch by Kevin Everets and Michal Maruska.  

Tue Apr  2 13:36:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/: bookmarks.c, bookmarks.h, dialogs.c:

	And now the proper fix for the bookmarks bug. During
	read_bookmarks(), we called add_bookmark(), which called
	write_bookmarks() .. guess what happenned? Report and patch by Zas.  

Tue Apr  2 13:21:36 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Zas' true identity revealed! 

Tue Apr  2 12:53:17 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	Long textarea weirdness 

Tue Apr  2 10:18:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Tmp disable bookmarks resave in add_bookmark() .. real fix will
	follow soon.  

Mon Apr  1 22:19:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, bookmarks/Makefile.am, bookmarks/bookmarks.c,
	bookmarks/bookmarks.h, bookmarks/dialogs.c, bookmarks/dialogs.h,
	dialogs/menu.c, document/view.c:

	Bookmarks divided to bookmarks/bookmarks.c and bookmarks/dialogs.c.  

Mon Apr  1 21:47:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/globhist.c, document/globhist.c,
	document/globhist.h:

	Added last_searched_globhist_* - preparation for history searching.  

Mon Apr  1 21:00:42 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng, src/dialogs/globhist.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Added Clear button to the global history manager. Patch by Miciah.  

Mon Apr  1 20:48:36 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/globhist.c, document/globhist.c,
	document/globhist.h, document/session.c:

	Added Delete button to the global history manager. Patch by Miciah.
	Also cleaned global history API a bit.  

Mon Apr  1 20:28:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/kbdbind.c, config/kbdbind.h, document/view.c:

	Add action "history-manager" and appropriate keybinding ('H'/'h').  

Mon Apr  1 20:20:22 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/czech.lng, src/intl/language.inc:

	Add hotkey for Global history in czech translation.  

Mon Apr  1 20:19:29 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/globhist.c:

	Goto button in the global history dialog. Now the dialog is even
	useful :). Patch by Miciah.  

Mon Apr  1 20:10:00 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	Use atol() instead of atoi() for cookie expiration time - still not
	ideal as time_t may be even something different, but still better
	than it used to be before, I think. Thanks to Miciah for pointing
	out that.  

Mon Apr  1 19:59:26 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng, src/dialogs/Makefile.am,
	src/dialogs/globhist.c, src/dialogs/globhist.h, src/dialogs/menu.c,
	src/document/globhist.c, src/document/globhist.h,
	src/intl/lang_defs.h, src/intl/language.inc:

	Some GUI stuff for the global history, by Miciah. Also main stuff
	belonging to basic global history support (I forgot cvs add ;).  

Mon Apr  1 15:52:40 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/main.c, src/config/default.c, src/config/default.h,
	src/document/Makefile.am, src/document/session.c:

	Basic global history support by Miciah.  

Mon Apr  1 15:26:11 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/french.lng, src/intl/language.inc:

	Fixed french translation, thanks, Zas.  

Mon Apr  1 15:25:04 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.c:

	Tidyup of lowlevel/terminal.c, patch by Zas.  

Sat Mar 30 21:52:28 2002  Petr Baudis <pasky@ucw.cz>:

	* src/main.c:

	Cleanup of main.c, patch by Zas and me.  

Sat Mar 30 21:31:24 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	Added proxy autoconfiguration bit.  

Sat Mar 30 21:30:03 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/lowlevel/select.c:

	Include <inttypes.h> only when system has it (cygwin doesn't).
	Thanks to Stephane Lentz <Stephane.Lentz@ansf.alcatel.fr> for
	report.  

Sat Mar 30 21:23:47 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng, src/document/view.c, src/intl/lang_defs.h,
	src/intl/language.inc:

	Special label for the action 'Add link to bookmarks' 

Sat Mar 30 21:17:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bookmarks/bookmarks.c, bookmarks/bookmarks.h,
	document/view.c:

	Re-enable 'Add link to bookmarks' menu field in Link menu. Tidyup of
	link_menu(). Patch by Zas.  

Sat Mar 30 20:50:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Removed another one stale function noone has probably idea it was
	meant for. Patch by Zas.  

Sat Mar 30 20:49:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Removed one stale function noone has probably idea it was meant for.
	Patch by Zas.  

Sat Mar 30 20:48:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bookmarks/bookmarks.c:

	Basic bookmarks code tidyup. Patch by Zas and me.  

Sat Mar 30 09:10:54 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	another TODO bit 

Fri Mar 29 21:38:09 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	updated TODO list accordingly to people's wishlists 

Fri Mar 29 10:56:40 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	Fixed mistake when moving history stuff around. Thanks to Zas for
	pointing that out.  

Fri Mar 29 10:36:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, dialogs/menu.c, document/Makefile.am,
	document/download.c, document/download.h, document/session.c,
	document/session.h, document/view.c, lowlevel/sched.h,
	protocol/mailto.c:

	Moved download stuff to document/download.c 

Thu Mar 28 22:59:17 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: location.c, location.h, view.c, view.h:

	Moved copy_location to document/location.c.  

Thu Mar 28 22:53:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: Makefile.am, dump.c, history.c, location.c,
	location.h, session.h, view.c, view.h, vs.c, vs.h, html/renderer.c,
	html/renderer.h:

	Moved struct view_state to document/vs.c, thus helping repairing
	various perverted crossdeps.  

Thu Mar 28 22:26:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/: history.c, history.h:

	Move location per-session history to document/history.c, and made
	some appropriate encapsulation for all history stuff. Renamed struct
	history* to struct input_history*, as it's only inputbox' history.  

Thu Mar 28 22:25:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/menu.c, document/Makefile.am, document/session.c,
	document/session.h, document/view.c, document/view.h,
	document/html/renderer.c, document/location.c, document/location.h:

	Move location stuff to document/location.c. This is pathetic :).  

Thu Mar 28 21:38:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, bfu/bfu.h, config/default.c, dialogs/menu.c,
	document/Makefile.am, document/session.c, document/session.h,
	document/view.c, document/html/renderer.c:

	Move location per-session history to document/history.c, and made
	some appropriate encapsulation for all history stuff. Renamed struct
	history* to struct input_history*, as it's only inputbox' history.  

Thu Mar 28 17:35:56 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, lowlevel/sched.h, protocol/ftp.c,
	protocol/ftp/ftp.c:

	Many minor RFC-compilance fixes, now we're a bit more strict, more
	commends added, introduced abort_conn_with_state(). Patch by Zas.  

Thu Mar 28 02:42:13 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/default.c:

	keep_unhistory is now 1 by default 

Thu Mar 28 02:37:57 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/url.c:

	erm.. don't tell anyone ;) (from %xy encoded char only %x got into
	encoded string) 

Thu Mar 28 01:22:54 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre5-CVS 

Thu Mar 28 01:21:45 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre4 

Thu Mar 28 00:46:26 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/dutch.lng, intl/english.lng,
	intl/estonian.lng, intl/finnish.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/indonesian.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/synclang,
	intl/turkish.lng, intl/ukrainian.lng, src/intl/lang_defs.h,
	src/intl/language.inc, src/lowlevel/sched.c, src/lowlevel/sched.h,
	src/protocol/ftp.c, src/protocol/ftp/ftp.c:

	FTP doesn't send more commands at once - it's a bit slower, but safe
	with MS IIS or Novell (by mikulas, from 0.97pre8). Also, it fixes
	bugs reported by Zas, that we had problems with FTP servers not
	supporting/requiring PASS command.  

Wed Mar 27 23:49:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/kbdbind.c:

	ACT_COPY_CLIPBOARD is ^C, not ^B (by mikulas, from 0.97pre8).  

Wed Mar 27 23:47:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/osdep/: os_dep.c, osdep.c:

	Corrected xterm detection (by mikulas, from 0.97pre8).  

Wed Mar 27 23:39:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, document/html/parser.c,
	document/html/renderer.c, util/error.c, util/memlist.c:

	Use va_end() (by mikulas, from 0.97pre8).  

Wed Mar 27 23:05:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	Do not strip spaces from URL attribute of tags (by mikulas, from
	0.97pre8).  

Wed Mar 27 22:45:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/http.c:

	When sending the URL, translate spaces to %20. This is definitively
	not the best thing we can do, but it's sufficient solution as very
	temporary one (by mikulas, from 0.97pre8). Minor code tidyups.  

Wed Mar 27 21:52:22 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/: parser.c, renderer.c:

	Prevent double newline when rendering lists: <li><p> xxx (by
	mikulas, from 0.97pre8). Note that I include this only in order to
	be sure we'll act right, as we've already
	some-own-fix-which-i-cant-remember-now-:). Also re-enabled the
	justify code, which was effectively disabled by mistake.  

Wed Mar 27 21:43:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/session.c:

	some more mem_free() stuff when we're out of memory 

Wed Mar 27 21:30:25 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/session.c, protocol/url.c, protocol/url.h,
	util/Makefile.am, util/conv.c, util/conv.h:

	Moved hx() and unhx() to util/conv.c, fixed prototypes of
	*_url_string() so that we now even compile 

Wed Mar 27 13:32:35 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, protocol/url.c, protocol/url.h:

	encode_string -> encode_url_string, prepare decode_url_string 

Tue Mar 26 22:02:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, protocol/url.c:

	Rewritten strip_url_password(), so now it works somehow correctly
	once more; taken from patch by sc 

Tue Mar 26 21:09:15 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/view.c, protocol/url.c:

	move encode_string() to protocol/url.c 

Tue Mar 26 19:47:54 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/session.c, protocol/url.c:

	remark near encode_url() family.. the name is 'a bit' confusing 

Tue Mar 26 19:10:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/links.h:

	links.h tidyup 

Tue Mar 26 18:49:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, ftp.c, file/file.c, ftp/ftp.c:

	don't mess with use_document_colors at all and just do <font><b> :) 

Tue Mar 26 18:10:52 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: file.c, ftp.c, file/file.c, ftp/ftp.c:

	some playing with d_opt vs. dds and use_document_colours and bold
	instead of yellow for dirs 

Tue Mar 26 17:45:59 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: dns.c, select.c:

	yet another BSD compilation fix, take #3 (i know i hate BSD [at
	least now]) 

Tue Mar 26 17:43:41 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/select.c:

	yet another BSD compilation fix, take #2 (i think i hate BSD) 

Tue Mar 26 17:39:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: dns.c, select.c:

	yet another BSD compilation fix 

Tue Mar 26 17:37:31 2002  Petr Baudis <pasky@ucw.cz>:

	* .vimrc, src/.vimrc, src/bfu/.vimrc, src/bookmarks/.vimrc,
	src/config/.vimrc, src/cookies/.vimrc, src/dialogs/.vimrc,
	src/document/.vimrc, src/document/html/.vimrc, src/intl/.vimrc,
	src/lowlevel/.vimrc, src/osdep/.vimrc, src/protocol/.vimrc,
	src/protocol/http/.vimrc, src/ssl/.vimrc, src/util/.vimrc:

	all .vimrc files include elinks/.vimrc; added some more tabbing
	settings for zas ;) 

Tue Mar 26 17:21:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, interlink.c:

	another BSD compilation fix, take #3 

Tue Mar 26 17:19:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, interlink.c:

	another BSD compilation fix, take #2 

Tue Mar 26 17:16:43 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/: af_unix.c, interlink.c:

	another BSD compilation fix 

Tue Mar 26 17:11:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/default.c:

	BSD compilation fix, take #2; stupid 

Tue Mar 26 17:08:51 2002  Petr Baudis <pasky@ucw.cz>:

	* src/config/default.c:

	BSD compilation fix 

Tue Mar 26 16:50:48 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, intl/italian.lng, src/intl/language.inc:

	updated italian translation by Cristiano Guadagnino
	<cris@geppo.cmb2000.it> 

Tue Mar 26 16:45:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cache/cache.c, document/cache.c:

	Fixed files not displayed properly when there was reload request on
	background (by mikulas, from 0.97pre7) 

Tue Mar 26 16:45:07 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/menu.c:

	don't print contents of posted data in downloads menu (by mikulas,
	from 0.97pre7) 

Tue Mar 26 16:38:51 2002  Petr Baudis <pasky@ucw.cz>:

	* intl/brazilian_portuguese.lng, intl/catalan.lng, intl/dutch.lng,
	intl/english.lng, intl/estonian.lng, intl/finnish.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/indonesian.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/romanian.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng, src/intl/lang_defs.h,
	src/intl/language.inc:

	??? -> \?\?\?, so that it's not recognized as trigraph (by mikulas,
	from 0.97pre7) 

Tue Mar 26 15:57:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/TODO:

	some babbling about imagined syntactic tree 

Tue Mar 26 15:28:11 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	tables.c cleanup by zas, bit 4 and last 

Tue Mar 26 15:20:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	tables.c cleanup by zas, bit 3 (fixed problem) 

Tue Mar 26 15:12:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	tables.c cleanup by zas, bit 2 

Tue Mar 26 15:09:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/tables.c:

	tables.c cleanup by zas, bit 1 

Tue Mar 26 13:02:36 2002  Petr Baudis <pasky@ucw.cz>:

	* autogen.sh:

	/bin/bash -> /bin/sh 

Mon Mar 25 22:03:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/renderer.c:

	renderer tidyup by zas 

Mon Mar 25 21:33:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/README.timegm:

	docs fixes by sc 

Mon Mar 25 21:32:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/: ftp.c, ftp/ftp.c:

	tidyup of ftp.c; patch by zas 

Mon Mar 25 21:24:18 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	hm, ok, and now we again work with non-SSL connections as well ;) 

Mon Mar 25 18:38:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/connect.c, ssl/connect.c:

	SSL works once again now - the API i made for SSL sockets first time
	was completely broken 

Mon Mar 25 17:18:09 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/dns.c, lowlevel/sched.c, util/error.c:

	worthless tidyups 

Fri Mar 22 19:55:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/sched.c:

	cleanup of sched.c by zas 

Fri Mar 22 19:19:51 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/dialogs/info.c:

	fixed the about dialog bug 

Fri Mar 22 18:57:19 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/bfu.c, bfu/bfu.h,
	bookmarks/bookmarks.c, dialogs/menu.c, document/session.c,
	document/view.c, document/html/parser.c, protocol/types.c,
	bfu/menu.c, bfu/menu.h:

	move menu system implementation to bfu/menu.c 

Fri Mar 22 18:26:47 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/sched.c, util/Makefile.am, util/base64.c,
	util/base64.h:

	moved base64 encoder to util/base64.c 

Fri Mar 22 18:12:03 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/hpux-pipe.diff:

	updated hpux-pipe.diff (by sc) 

Fri Mar 22 18:08:50 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/connect.c:

	tidyup of connect.c by zas 

Fri Mar 22 18:05:05 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, src/bfu/bfu.c:

	fixed the release-button-hide-menu bug ;) thanks to zas, again 

Fri Mar 22 15:31:25 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/util/error.c:

	added yet another bug 

Fri Mar 22 14:59:10 2002  Petr Baudis <pasky@ucw.cz>:

	* src/lowlevel/terminal.h:

	wrong enum :/ fix by zas, fixes 1-2 actual bugs 

Thu Mar 21 21:31:49 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/Makefile.am:

	small build fix 

Thu Mar 21 21:01:40 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre4-CVS 

Thu Mar 21 20:58:00 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in:

	0.4pre3 

Thu Mar 21 18:39:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: Makefile.am, README.timegm, date.c:

	explanation of my_timegm() by Stephane Chazelas 

Thu Mar 21 18:35:14 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	slightly effective wraparounding of scrolling in menus; gave zas a
	favour 

Thu Mar 21 18:34:12 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, src/lowlevel/terminal.c:

	*FINALLY* fixed the select/imagemap bug - patch by Zas 

Thu Mar 21 18:05:46 2002  Petr Baudis <pasky@ucw.cz>:

	* src/document/html/parser.c:

	tidyup of get_image_map() 

Tue Mar 19 20:40:03 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/Makefile.am, bfu/align.h, bfu/bfu.c, bfu/bfu.h,
	bookmarks/bookmarks.c, config/default.c, dialogs/info.c,
	dialogs/menu.c, document/html/parser.c, document/html/parser.h,
	document/html/renderer.c, document/html/tables.c,
	protocol/mailto.c, protocol/types.c:

	moved align enum to bfu/align.h 

Tue Mar 19 18:34:51 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	that empty menu bug 

Tue Mar 19 18:29:53 2002  Petr Baudis <pasky@ucw.cz>:

	* src/cookies/cookies.c:

	we won't overwrite cookies file periodically on loading them 

Tue Mar 19 18:22:42 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	partial fix for SIGFPE for empty menu, reported by Edward Wildgoose
	<Ed@Wildgooses.com> 

Tue Mar 19 17:52:36 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/http/date.c:

	New own convertor struct tm -> time_t; I can't say I'm excited by
	it, but it looks as a good thing, sc convienced me ;) 

Tue Mar 19 17:28:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/bfu/bfu.c:

	general code tidyup, based on patch by <zas@norz.org> 

Tue Mar 19 15:03:16 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/date.c:

	FIXME 

Mon Mar 18 22:26:21 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/: Makefile.am, info.c, refresh.c, refresh.h:

	moved periodical refresh of dialogs from dialogs/info.c to
	dialogs/refresh.c 

Mon Mar 18 22:20:31 2002  Petr Baudis <pasky@ucw.cz>:

	* src/dialogs/info.c:

	move common refresh initialization to refresh_init() 

Mon Mar 18 22:12:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: dialogs/Makefile.am, dialogs/info.c, dialogs/info.h,
	dialogs/menu.c, dialogs/menu.h, util/error.c, util/error.h:

	moved info dialogs from dialogs/menu.c to dialogs/info.c 

Mon Mar 18 21:03:12 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/lowlevel/kbd.c:

	somehow fix proccessing of incomplete escape sequences; patch by
	Stephane CHAZELAS <Stephane.CHAZELAS@free.fr> 

Mon Mar 18 20:52:32 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/default.c, protocol/http/http.c:

	Elinks -> ELinks (by Zas ;) 

Mon Mar 18 20:51:20 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/connect.c, ssl/connect.c:

	Moving SSL to ssl/, attempt 2, part 3 and last (fixed the problem);
	move completed another time ;) 

Mon Mar 18 20:28:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: lowlevel/connect.c, lowlevel/connect.h, lowlevel/sched.c,
	ssl/Makefile.am:

	Moving SSL to ssl/, attempt 2, part 2 (only export more things from
	lowlevel/connect.c) 

Mon Mar 18 20:12:29 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/lowlevel/connect.c, src/protocol/http/https.c,
	src/protocol/http/https.h, src/ssl/Makefile.am:

	Moving SSL to ssl/, attempt 2, part 1 

Mon Mar 18 15:14:53 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/lowlevel/connect.c, src/lowlevel/connect.h,
	src/lowlevel/sched.c, src/protocol/http/https.c,
	src/protocol/http/https.h:

	XXX: the SSL move made connections not working at all :/ temporarily
	backed out 

Mon Mar 18 13:01:58 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, src/protocol/http/date.c:

	Rewritten HTTP date parser, (slightly modified) patch by Stephane
	CHAZELAS <Stephane_CHAZELAS@yahoo.fr> 

Mon Mar 18 11:34:02 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: config/default.c, config/default.h, dialogs/menu.c,
	document/Makefile.am, document/dump.c, document/options.c,
	document/options.h, document/session.c, document/session.h,
	document/view.c, document/html/renderer.c,
	document/html/renderer.h, intl/charsets.c:

	moved documet_(options|setup) to one common document/options.* 

Mon Mar 18 10:55:37 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/dump.c, document/session.c,
	document/html/renderer.c, document/html/renderer.h,
	lowlevel/Makefile.am, lowlevel/dns.c, lowlevel/sched.c,
	lowlevel/sched.h, lowlevel/select.c, lowlevel/select.h,
	lowlevel/ttime.c, lowlevel/ttime.h, util/ttime.c, util/ttime.h:

	moved typedef ttime and get_time() from lowlevel/select.c to
	lowlevel/ttime.c 

Mon Mar 18 06:33:12 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: bfu/bfu.c, bfu/bfu.h, dialogs/menu.c, document/session.c,
	document/html/parser.c, document/html/parser.h,
	document/html/renderer.h, util/Makefile.am, util/error.c,
	util/memlist.c, util/memlist.h:

	moved memory_list implementation from bfu/bfu.c to util/memlist.c 

Mon Mar 18 06:19:58 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: document/dump.c, document/dump.h, document/view.c,
	document/view.h, lowlevel/terminal.h:

	move dump_to_file from view.c to dump.c 

Sun Mar 17 23:21:02 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, wipe-out-ssl, wipe-out-ssl.awk,
	contrib/wipe-out-ssl, contrib/wipe-out-ssl.awk:

	moves wipe-out-ssl script to contrib/ directory, added
	ChangeLog.orig to EXTRA_DIST 

Sun Mar 17 23:19:07 2002  Petr Baudis <pasky@ucw.cz>:

	* rebuild:

	removed 'rebuild' script, totally obsoleted actually ;) 

Sun Mar 17 23:16:51 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/main.c,
	src/lowlevel/connect.c, src/lowlevel/connect.h,
	src/lowlevel/sched.c, src/protocol/http/https.c,
	src/protocol/http/https.h, src/ssl/.cvsignore, src/ssl/.vimrc,
	src/ssl/Makefile.am, src/ssl/connect.c, src/ssl/connect.h,
	src/ssl/ssl.c, src/ssl/ssl.h:

	moved some SSL stuff to ssl/ (not yet completel) 

Sun Mar 17 22:32:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, main.h, document/Makefile.am, document/dump.c,
	document/dump.h:

	moved --dump implementation from main.c to document/dump.c 

Sun Mar 17 22:01:38 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: .vimrc, bfu/.vimrc, bookmarks/.vimrc, config/.vimrc,
	cookies/.vimrc, dialogs/.vimrc, document/.vimrc,
	document/html/.vimrc, intl/.vimrc, lowlevel/.vimrc, osdep/.vimrc,
	protocol/.vimrc, protocol/http/.vimrc, protocol/http/date.c,
	util/.vimrc:

	added .vimrc into each directory 

Sun Mar 17 21:53:08 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, document/session.c, document/session.h,
	protocol/http/Makefile.am, protocol/http/date.c,
	protocol/http/date.h:

	move parse_http_date() to protocol/http/date.c 

Sun Mar 17 21:41:01 2002  Petr Baudis <pasky@ucw.cz>:

	* .cvsignore, src/.cvsignore, src/bfu/.cvsignore,
	src/bookmarks/.cvsignore, src/config/.cvsignore,
	src/cookies/.cvsignore, src/dialogs/.cvsignore,
	src/document/.cvsignore, src/intl/.cvsignore,
	src/lowlevel/.cvsignore, src/document/html/.cvsignore,
	src/osdep/.cvsignore, src/protocol/.cvsignore, src/util/.cvsignore,
	src/protocol/http/.cvsignore:

	added .cvsignore ignoring autogenerated stuff 

Sun Mar 17 19:35:49 2002  Petr Baudis <pasky@ucw.cz>:

	* autogen.sh:

	fixed ./autogen.sh so that it actually even works now 

Sun Mar 17 18:52:38 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, Makefile.in, aclocal.m4, autocommit.sh, config.h.in,
	configure, stamp-h.in, src/Makefile.in, src/bfu/Makefile.in,
	src/bookmarks/Makefile.in, src/config/Makefile.in,
	src/cookies/Makefile.in, src/dialogs/Makefile.in,
	src/document/Makefile.in, src/document/html/Makefile.in,
	src/intl/Makefile.in, src/lowlevel/Makefile.in,
	src/osdep/Makefile.in, src/protocol/Makefile.in,
	src/protocol/http/Makefile.in, src/util/Makefile.in:

	Removed files generated automatically by automake/autoconf. FROM NOW
	ON YOU NEED TO CALL ./autogen.sh AFTER CHECKOUTcvs update! Also,
	from now on, I'll probably do make cvs-dist when generating release
	tarball.  

Sun Mar 17 18:15:03 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in, src/Makefile.am,
	src/Makefile.in, src/bfu/Makefile.am, src/bfu/Makefile.in,
	src/bookmarks/Makefile.am, src/bookmarks/Makefile.in,
	src/config/Makefile.am, src/config/Makefile.in,
	src/cookies/Makefile.am, src/cookies/Makefile.in,
	src/dialogs/Makefile.am, src/dialogs/Makefile.in,
	src/document/Makefile.am, src/document/Makefile.in,
	src/intl/Makefile.am, src/intl/Makefile.in,
	src/lowlevel/Makefile.am, src/lowlevel/Makefile.in,
	src/scripting/lua/Makefile.am, src/osdep/Makefile.am,
	src/osdep/Makefile.in, src/protocol/Makefile.am,
	src/protocol/Makefile.in, src/util/Makefile.am,
	src/util/Makefile.in, src/document/html/Makefile.am,
	src/document/html/Makefile.in, src/protocol/http/Makefile.am,
	src/protocol/http/Makefile.in:

	added protocol/http/header.[ch] 

Sun Mar 17 18:14:06 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: cookies/cookies.c, document/view.c, document/html/parser.c,
	document/html/renderer.c, protocol/types.c,
	protocol/http/Makefile.am, protocol/http/header.c,
	protocol/http/header.h, protocol/http/http.c, protocol/http/http.h:

	moved bits of http.c into header.c 

Sun Mar 17 18:02:23 2002  Petr Baudis <pasky@ucw.cz>:

	* src/protocol/http/: Makefile.am, Makefile.in, http.c:

	compilation fixes ;p 

Sun Mar 17 17:42:55 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: main.c, cookies/cookies.c, document/view.c,
	document/html/parser.c, document/html/renderer.c,
	lowlevel/connect.c, protocol/types.c, protocol/url.c,
	protocol/http/https.c:

	Move http protocol support to separate subdir protocol/http/ -
	update #includes 

Sun Mar 17 17:38:33 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, src/Makefile.am, src/protocol/Makefile.am,
	src/protocol/http.c, src/protocol/http.h, src/protocol/https.c,
	src/protocol/https.h, src/protocol/http/Makefile.am,
	src/protocol/http/http.c, src/protocol/http/http.h,
	src/protocol/http/https.c, src/protocol/http/https.h, Makefile.am,
	Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, src/Makefile.am, src/Makefile.in,
	src/bfu/Makefile.am, src/bfu/Makefile.in,
	src/bookmarks/Makefile.am, src/bookmarks/Makefile.in,
	src/config/Makefile.am, src/config/Makefile.in,
	src/cookies/Makefile.am, src/cookies/Makefile.in,
	src/dialogs/Makefile.am, src/dialogs/Makefile.in,
	src/document/Makefile.am, src/document/Makefile.in,
	src/intl/Makefile.am, src/intl/Makefile.in,
	src/lowlevel/Makefile.am, src/lowlevel/Makefile.in,
	src/scripting/lua/Makefile.am, src/document/html/Makefile.am,
	src/document/html/Makefile.in, src/osdep/Makefile.am,
	src/osdep/Makefile.in, src/protocol/Makefile.am,
	src/protocol/Makefile.in, src/protocol/http/Makefile.am,
	src/protocol/http/Makefile.in, src/util/Makefile.am,
	src/util/Makefile.in:

	Move http protocol support to separate subdir protocol/http/ 

Sun Mar 17 17:27:48 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: links.h, bfu/bfu.c, bfu/bfu.h, bookmarks/bookmarks.c,
	config/default.c, config/kbdbind.c, cookies/cookies.c,
	dialogs/menu.c, document/session.c, document/view.c,
	document/html/colors.c, document/html/parser.c,
	document/html/parser.h, document/html/renderer.c,
	document/html/tables.c, intl/charsets.c, intl/lang_defs.h,
	lowlevel/af_unix.c, lowlevel/connect.c, lowlevel/dns.c,
	lowlevel/interlink.c, lowlevel/kbd.c, lowlevel/sched.c,
	lowlevel/select.c, lowlevel/terminal.c, lowlevel/terminal.h,
	osdep/os_dep.c, osdep/osdep.c, osdep/win32.c, osdep/win32/win32.c,
	protocol/file.c, protocol/ftp.c, protocol/http.c,
	protocol/mailto.c, protocol/types.c, protocol/url.c,
	protocol/file/file.c, protocol/ftp/ftp.c, util/error.c:

	remove trailing spaces/tabs and spaces before semicolons; simple
	script by Zas :) 

Sun Mar 17 14:58:52 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in, src/Makefile.am,
	src/Makefile.in, src/bfu/Makefile.am, src/bfu/Makefile.in,
	src/bookmarks/Makefile.am, src/bookmarks/Makefile.in,
	src/config/Makefile.am, src/config/Makefile.in,
	src/cookies/Makefile.am, src/cookies/Makefile.in,
	src/dialogs/Makefile.am, src/dialogs/Makefile.in,
	src/document/Makefile.am, src/document/Makefile.in,
	src/intl/Makefile.am, src/intl/Makefile.in,
	src/lowlevel/Makefile.am, src/lowlevel/Makefile.in,
	src/osdep/Makefile.am, src/osdep/Makefile.in,
	src/scripting/lua/Makefile.am, src/document/html/Makefile.am,
	src/document/html/Makefile.in, src/protocol/Makefile.am,
	src/protocol/Makefile.in, src/util/Makefile.am,
	src/util/Makefile.in:

	compilation fixes 

Sun Mar 17 14:58:43 2002  Petr Baudis <pasky@ucw.cz>:

	* autocommit.sh:

	commit automatically also Makefile.am 

Sun Mar 17 14:39:11 2002  Petr Baudis <pasky@ucw.cz>:

	* configure, configure.in, src/Makefile.am, src/Makefile.in,
	src/README, src/main.c, src/bfu/Makefile.am, src/bfu/Makefile.in,
	src/bfu/menu.c, src/bfu/menu.h, src/dialogs/Makefile.am,
	src/dialogs/Makefile.in, src/dialogs/menu.c, src/dialogs/menu.h,
	src/document/session.c, src/document/view.c, src/protocol/http.c,
	Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, src/Makefile.in, src/bfu/Makefile.in,
	src/bookmarks/Makefile.in, src/config/Makefile.in,
	src/cookies/Makefile.in, src/dialogs/Makefile.in,
	src/document/Makefile.in, src/intl/Makefile.in,
	src/lowlevel/Makefile.in, src/osdep/Makefile.in,
	src/document/html/Makefile.in, src/protocol/Makefile.in,
	src/util/Makefile.in:

	moved menu from bfu/ to dialogs/ 

Sun Mar 17 14:07:30 2002  Petr Baudis <pasky@ucw.cz>:

	* entity.inc:

	we somewhow forgot this to remove ;) 

Sun Mar 17 14:05:24 2002  Petr Baudis <pasky@ucw.cz>:

	* configure, configure.in, Unicode/README, Unicode/gen-7b,
	Unicode/gen-cp, Unicode/gen-ent, intl/README, intl/gen-intl,
	intl/intl.txt, src/Makefile.am, src/Makefile.in, src/main.c,
	src/bfu/bfu.c, src/bfu/menu.c, src/bookmarks/bookmarks.c,
	src/config/default.c, src/document/session.c, src/document/view.c,
	src/document/html/parser.c, src/document/html/renderer.c,
	src/document/html/renderer.h, src/intl/Makefile.am,
	src/intl/Makefile.in, src/intl/charsets.c, src/intl/charsets.h,
	src/intl/codepage.h, src/intl/codepage.inc, src/intl/entity.inc,
	src/intl/lang_defs.h, src/intl/language.c, src/intl/language.h,
	src/intl/language.inc, src/intl/uni_7b.inc, src/lowlevel/sched.c,
	src/osdep/os_dep.c, src/osdep/osdep.c, src/protocol/http.c,
	src/protocol/mailto.c, src/protocol/types.c, Makefile.in,
	acconfig.h, aclocal.m4, config.h.in, configure, configure.in,
	stamp-h.in, src/Makefile.in, src/bfu/Makefile.in,
	src/bookmarks/Makefile.in, src/config/Makefile.in,
	src/cookies/Makefile.in, src/document/Makefile.in,
	src/intl/Makefile.in, src/lowlevel/Makefile.in,
	src/osdep/Makefile.in, src/protocol/Makefile.in,
	src/util/Makefile.in, src/document/html/Makefile.in:

	src/internat/ -> src/intl/ 

Sun Mar 17 13:54:08 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO, src/links.h, src/main.c, src/main.h, src/bfu/bfu.c,
	src/bfu/bfu.h, src/bfu/menu.c, src/bfu/menu.h,
	src/bookmarks/bookmarks.c, src/bookmarks/bookmarks.h,
	src/cache/cache.c, src/cache/cache.h, src/config/default.c,
	src/config/default.h, src/config/kbdbind.c, src/cookies/cookies.c,
	src/cookies/cookies.h, src/document/cache.c, src/document/cache.h,
	src/document/session.c, src/document/session.h,
	src/document/view.c, src/document/view.h,
	src/document/html/Makefile.am, src/document/html/Makefile.in,
	src/document/html/colors.c, src/document/html/colors.h,
	src/document/html/parser.c, src/document/html/parser.h,
	src/document/html/renderer.c, src/document/html/renderer.h,
	src/document/html/tables.c, src/document/html/tables.h,
	src/lowlevel/af_unix.c, src/lowlevel/connect.c,
	src/lowlevel/connect.h, src/lowlevel/dns.c,
	src/lowlevel/interlink.c, src/lowlevel/kbd.c, src/lowlevel/sched.c,
	src/lowlevel/sched.h, src/lowlevel/select.c,
	src/lowlevel/terminal.c, src/lowlevel/terminal.h,
	src/osdep/os_dep.c, src/osdep/osdep.c, src/protocol/file.c,
	src/protocol/file.h, src/protocol/finger.c, src/protocol/finger.h,
	src/protocol/ftp.c, src/protocol/http.c, src/protocol/http.h,
	src/protocol/https.c, src/protocol/https.h, src/protocol/mailto.c,
	src/protocol/mailto.h, src/protocol/types.c, src/protocol/types.h,
	src/protocol/url.c, src/protocol/url.h, src/protocol/file/file.c,
	src/protocol/file/file.h, src/protocol/ftp/ftp.c, src/util/error.c:

	Part III. of source layout change, stage 2. Changed #includes so
	that we're now again compiling and working ok, already under the new
	source layout. But still more to come, stay tuned ;).  

Sun Mar 17 12:24:22 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, src/Makefile.in, src/bfu/Makefile.in,
	src/bookmarks/Makefile.in, src/config/Makefile.in,
	src/cookies/Makefile.in, src/document/Makefile.in,
	src/lowlevel/Makefile.in, src/osdep/Makefile.in,
	src/document/html/Makefile.in, src/protocol/Makefile.in,
	src/util/Makefile.in, src/Makefile.am, src/bfu/Makefile.am,
	src/bookmarks/Makefile.am, src/config/Makefile.am,
	src/cookies/Makefile.am, src/document/Makefile.am,
	src/document/html/Makefile.am, src/lowlevel/Makefile.am,
	src/scripting/lua/Makefile.am, src/osdep/Makefile.am,
	src/protocol/Makefile.am, src/util/Makefile.am:

	okay, more fun with INCLUDE ;) 

Sun Mar 17 12:04:24 2002  Petr Baudis <pasky@ucw.cz>:

	* src/: Makefile.am, Makefile.in, bfu/Makefile.am, bfu/Makefile.in,
	bookmarks/Makefile.am, config/Makefile.am, cookies/Makefile.am,
	document/Makefile.am, document/html/Makefile.am,
	lowlevel/Makefile.am, osdep/Makefile.am, protocol/Makefile.am,
	scripting/lua/Makefile.am, util/Makefile.am:

	added INCLUDE to Makefiles.am 

Sun Mar 17 11:54:41 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, autocommit.sh, configure, configure.in,
	wipe-out-ssl, src/Makefile.am, src/bfu/Makefile.am,
	src/bookmarks/Makefile.am, src/config/Makefile.am,
	src/cookies/Makefile.am, src/document/Makefile.am,
	src/document/html/Makefile.am, src/lowlevel/Makefile.am,
	src/osdep/Makefile.am, src/protocol/Makefile.am,
	src/scripting/lua/Makefile.am, src/util/Makefile.am, Makefile.in,
	acconfig.h, aclocal.m4, config.h.in, configure, configure.in,
	stamp-h.in, src/Makefile.in, src/bfu/Makefile.in,
	src/bookmarks/Makefile.in, src/config/Makefile.in,
	src/cookies/Makefile.in, src/document/Makefile.in,
	src/lowlevel/Makefile.in, src/osdep/Makefile.in,
	src/document/html/Makefile.in, src/protocol/Makefile.in,
	src/util/Makefile.in:

	Part III. of source layout change, stage 2. Improved autofiles, so
	that ./autogen actually works now ;) 

Sun Mar 17 11:28:53 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, af_unix.c, af_unix.h, beos.c, bfu.c, bfu.h,
	bookmarks.c, bookmarks.h, cache.c, cache.h, charsets.c, charsets.h,
	codepage.h, codepage.inc, colors.c, colors.h, configure.in,
	connect.c, connect.h, cookies.c, cookies.h, default.c, default.h,
	dns.c, dns.h, error.c, error.h, file.c, file.h, finger.c, finger.h,
	ftp.c, ftp.h, html.c, html.h, html_r.c, html_r.h, html_tbl.c,
	html_tbl.h, http.c, http.h, https.c, https.h, kbd.c, kbd.h,
	kbdbind.c, kbdbind.h, lang_defs.h, language.c, language.h,
	language.inc, links.h, lua.c, lua.h, mailto.c, mailto.h, main.c,
	main.h, menu.c, menu.h, os_dep.c, os_dep.h, os_depx.h, sched.c,
	sched.h, select.c, select.h, session.c, session.h, setup.h,
	terminal.c, terminal.h, types.c, types.h, uni_7b.inc, url.c, url.h,
	view.c, view.h, win32.c, wipe-out-ssl, Unicode/gen-7b,
	Unicode/gen-cp, Unicode/gen-ent, intl/gen-intl, src/Makefile.am,
	src/links.h, src/main.c, src/main.h, src/setup.h,
	src/bfu/Makefile.am, src/bfu/bfu.c, src/bfu/bfu.h, src/bfu/menu.c,
	src/bfu/menu.h, src/bookmarks/Makefile.am,
	src/bookmarks/bookmarks.c, src/bookmarks/bookmarks.h,
	src/cache/cache.c, src/cache/cache.h, src/cookies/Makefile.am,
	src/cookies/cookies.c, src/cookies/cookies.h,
	src/document/Makefile.am, src/document/cache.c,
	src/document/cache.h, src/document/session.c,
	src/document/session.h, src/document/view.c, src/document/view.h,
	src/document/html/Makefile.am, src/document/html/colors.c,
	src/document/html/colors.h, src/document/html/parser.c,
	src/document/html/parser.h, src/document/html/renderer.c,
	src/document/html/renderer.h, src/document/html/tables.c,
	src/document/html/tables.h, src/lowlevel/Makefile.am,
	src/lowlevel/af_unix.c, src/lowlevel/af_unix.h,
	src/lowlevel/connect.c, src/lowlevel/connect.h, src/lowlevel/dns.c,
	src/lowlevel/dns.h, src/lowlevel/interlink.c,
	src/lowlevel/interlink.h, src/lowlevel/kbd.c, src/lowlevel/kbd.h,
	src/lowlevel/sched.c, src/lowlevel/sched.h, src/lowlevel/select.c,
	src/lowlevel/select.h, src/lowlevel/terminal.c,
	src/lowlevel/terminal.h, src/osdep/Makefile.am, src/osdep/beos.c,
	src/osdep/generic.h, src/osdep/os_dep.c, src/osdep/os_dep.h,
	src/osdep/os_depx.h, src/osdep/osdep.c, src/osdep/osdep.h,
	src/osdep/win32.c, src/osdep/beos/beos.c, src/osdep/win32/win32.c,
	src/protocol/Makefile.am, src/protocol/file.c, src/protocol/file.h,
	src/protocol/finger.c, src/protocol/finger.h, src/protocol/ftp.c,
	src/protocol/ftp.h, src/protocol/http.c, src/protocol/http.h,
	src/protocol/https.c, src/protocol/https.h, src/protocol/mailto.c,
	src/protocol/mailto.h, src/protocol/types.c, src/protocol/types.h,
	src/protocol/url.c, src/protocol/url.h, src/protocol/file/file.c,
	src/protocol/file/file.h, src/protocol/ftp/ftp.c,
	src/protocol/ftp/ftp.h, src/scripting/lua/Makefile.am,
	src/util/Makefile.am, src/util/error.c, src/util/error.h,
	src/config/Makefile.am, src/config/default.c, src/config/default.h,
	src/config/kbdbind.c, src/config/kbdbind.h:

	Part III. of source layout change, stage 1. Moving source files to 
	subdirectories, sorted by the department they belong to. Also
	several renaming.  Obviously not yet complete, this commit is here
	just to record outgoing work :). And definitively not compilable
	now.  
	
	Please update by cvs update -d, so that new directories will be
	created properly.  

Sat Mar 16 23:25:49 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c, sched.h:

	fixed bug introduced with one enum, that we wasn't able to connect
	to blacklisted servers 

Sat Mar 16 23:05:50 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in:

	oh well, added that colors.c ;) 

Sat Mar 16 23:02:36 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.h, bookmarks.c, cache.c, colors.c, colors.h, cookies.c,
	default.c, default.h, html.c, html.h, html_r.c, html_r.h,
	html_tbl.c, http.c, kbdbind.h, links.h, main.c, menu.c, os_dep.c,
	sched.c, sched.h, session.c, session.h, terminal.c, terminal.h,
	view.h:

	various compilation fixes; had to fork colors parsing to
	colors.[ch], it wasn't possible to arrange it so that it compiles
	otherwise 

Sat Mar 16 22:03:08 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, af_unix.h, bfu.c, bfu.h, bookmarks.c, bookmarks.h,
	cache.h, charsets.h, connect.h, cookies.h, default.c, default.h,
	dns.c, dns.h, error.c, error.h, file.c, file.h, finger.h, ftp.c,
	ftp.h, html.c, html.h, html_r.h, html_tbl.h, http.c, http.h,
	https.h, kbd.c, kbd.h, kbdbind.c, kbdbind.h, language.c,
	language.h, links.h, lua.c, lua.h, mailto.c, mailto.h, main.c,
	main.h, menu.c, menu.h, os_dep.c, sched.c, sched.h, select.h,
	session.c, session.h, terminal.c, terminal.h, types.c, types.h,
	url.h, view.c, view.h:

	Part II. of source layout change, stage 4. This should be the last
	stage of this part, everything is moved into specific files
	(there're exceptions, but we've to leave something to future,
	haven't we?). However, compilation fixes will follow yet ;).  

Sat Mar 16 21:02:48 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING:

	lua scripting description, taken from mail by peter wang 

Sat Mar 16 20:07:58 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, bfu.c, bookmarks.c, cache.c, connect.c, connect.h,
	cookies.c, cookies.h, default.c, dns.h, file.c, file.h, finger.c,
	finger.h, ftp.c, ftp.h, html.c, html.h, html_r.c, html_r.h, http.c,
	http.h, https.c, https.h, kbd.c, language.c, links.h, lua.c,
	mailto.c, mailto.h, main.c, main.h, menu.c, os_dep.c, sched.c,
	select.c, select.h, session.c, session.h, terminal.c, types.c,
	url.c, url.h, view.c, view.h, sched.h, terminal.h:

	Part II. of source layout change, stage 3. More .h files forked.  

Sat Mar 16 17:51:49 2002  Petr Baudis <pasky@ucw.cz>:

	* main.c, view.c:

	oh well.. compilation fixes ;) 

Sat Mar 16 17:44:40 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, bfu.c, bookmarks.c, charsets.c, charsets.h, cookies.c,
	default.c, html.c, html.h, html_r.c, html_r.h, html_tbl.c,
	html_tbl.h, http.c, language.c, links.h, lua.c, main.c, menu.c,
	sched.c, session.c, session.h, view.c, view.h:

	Part II. of source layout change, stage 2. HTML hell and Session
	oggre hopefully handled (it'll need more work, though); I wonder if
	it's compilable ;) 

Sat Mar 16 15:17:22 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, af_unix.h, bfu.c, bookmarks.c, cache.c, cache.h,
	charsets.c, connect.c, connect.h, cookies.c, cookies.h, default.c,
	dns.c, dns.h, error.c, error.h, file.c, file.h, finger.c, finger.h,
	ftp.c, ftp.h, html.c, html_r.c, html_tbl.c, http.c, http.h,
	https.c, https.h, kbd.c, language.c, links.h, lua.c, mailto.c,
	mailto.h, main.c, main.h, menu.c, os_dep.c, os_dep.h, os_depx.h,
	sched.c, select.c, select.h, session.c, setup.h, terminal.c,
	types.c, url.c, url.h, view.c:

	Part II. of source layout change, stage 1. Moving interface of the
	'modules' to specific header files. Obviously not yet complete, this
	commit is here just to record outgoing work :).  

Sat Mar 16 12:31:14 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	another bug added.. (old one, inherited from links ;) 

Sat Mar 16 11:49:08 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	added superambiguous feature Default, removed version of Lua patch,
	removed the ifdef around Features line 

Sat Mar 16 10:30:23 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in:

	beautified Makefile.am ;) 

Sat Mar 16 09:55:34 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING, Makefile.am, lang_defs.h, language.h, links.h,
	intl/gen-intl, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in:

	language.h -> lang_defs.h, preparation bit for next part of source
	layout change 

Sat Mar 16 09:51:15 2002  Petr Baudis <pasky@ucw.cz>:

	* .vimrc:

	hrm.. typo fix :^) 

Sat Mar 16 00:41:58 2002  Petr Baudis <pasky@ucw.cz>:

	* .vimrc:

	*hint* *hint* for you developers using vim ;))) 

Sat Mar 16 00:37:05 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	removed one obsoleted bug 

Sat Mar 16 00:35:04 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, bfu.c, bookmarks.c, cache.c, charsets.c, connect.c,
	cookies.c, default.c, dns.c, error.c, file.c, finger.c, ftp.c,
	html.c, html_r.c, html_tbl.c, http.c, https.c, kbd.c, kbdbind.c,
	language.c, links.h, lua.c, mailto.c, main.c, menu.c, os_dep.c,
	os_dep.h, os_depx.h, sched.c, select.c, session.c, setup.h,
	terminal.c, types.c, url.c, view.c:

	Added Id tag to source files, due to popular demand ;) 

Sat Mar 16 00:23:26 2002  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c, bfu.c, bookmarks.c, cache.c, charsets.c, connect.c,
	cookies.c, default.c, dns.c, error.c, file.c, ftp.c, html.c,
	html_r.c, html_tbl.c, http.c, https.c, kbd.c, kbdbind.c,
	language.c, links.h, lua.c, main.c, menu.c, os_dep.c, os_depx.h,
	sched.c, select.c, session.c, terminal.c, types.c, url.c, view.c:

	First part of source layout change. Moved all foreign includes to
	specific files which use them. This is going to improve speed of
	complication, simplify various things and break the compilation on
	dozens of obscure OSes. But it's still far from the main fun which
	will yet come.  

Fri Mar 15 22:28:23 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	...and finish the removal of config2.h and Makefile.gen ;) 

Fri Mar 15 22:22:39 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am:

	removal of config2.h and Makefile.gen 

Fri Mar 15 22:21:57 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, Makefile.gen, config2.h, links.h, wipe-out-ssl:

	removal of config2.h and Makefile.gen - sorry, too dirty; if someone
	will start to cry, we may reincarnate it into something more elegant 

Fri Mar 15 22:10:50 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	Compilation fix - thanks, Stepan 

Fri Mar 15 19:44:12 2002  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/czech.lng, intl/english.lng, intl/french.lng:

	French translation updates by <zas@norz.org>; more links -> elinks
	stuff 

Fri Mar 15 19:34:52 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/w3m2links.gawk:

	w3m2links.gawk, script by <stephane.chazelas@free.fr> 

Fri Mar 15 19:30:52 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	parse_http_date() cleanup (fear\!) - i didn't introduced kinda
	twicked parser i usually like to make yet, though; incorporates
	something based on <stephane.chazelas@free.fr>'s patch for handling
	'Saturday'-daynames as well 

Fri Mar 15 19:08:42 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, cookies.c:

	fix for broken sites - parse correctly cookie values containing '='
	- patch by Stephane Chazelas <stephane.chazelas@free.fr> 

Fri Mar 15 17:28:32 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h, url.c, view.c:

	strip password from displayed urls; i hope i didn't forget anything;
	idea by Stephane Chazelas <stephane.chazelas@free.fr> 

Fri Mar 15 13:45:28 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c:

	some tidyup of move_links(), apparently ;) 

Thu Mar 14 22:14:21 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c, html_tbl.c, links.h:

	xxpand -> expand 

Thu Mar 14 21:39:34 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, language.inc, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/czech.lng,
	intl/dutch.lng, intl/english.lng, intl/estonian.lng,
	intl/finnish.lng, intl/french.lng, intl/galician.lng,
	intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/indonesian.lng, intl/italian.lng,
	intl/lithuanian.lng, intl/polish.lng, intl/romanian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng:

	copyright nonsenses, more links -> elinks, removed 'lynx-like' 

Thu Mar 14 21:02:27 2002  Petr Baudis <pasky@ucw.cz>:

	* charsets.c:

	removed some unused structures and functions (by mikulas, from
	0.97pre6) 

Thu Mar 14 21:00:20 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c:

	spring tidyup of http_send_header() 

Thu Mar 14 20:40:18 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	fixed stripping of last char from url when adding a bookmark -
	thanks go to zas 

Thu Mar 14 20:21:57 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, bookmarks.c, default.c, lua.c, mailto.c, menu.c,
	session.c, types.c, view.c:

	cleanup of msg_box() and tidyup of all its usages 

Thu Mar 14 18:56:39 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	fixed and enabled displaying of cache info (File -> Cache info);
	also similiar functions tidyup 

Thu Mar 14 18:55:48 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c:

	small fix in history duplicates checking, found && patch by zas 

Thu Mar 14 18:11:31 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, view.c:

	draft of not yet working links wraparound implementation, based on
	ff's work; commented out the option record, as it's not working
	somewhat; please have a look at it 

Thu Mar 14 17:38:39 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	one more field ;) 

Thu Mar 14 17:36:36 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	links and buttons work once more ;) 

Thu Mar 14 17:32:35 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, view.c:

	optionally simulate pressed enter when pressed accesskey (standart
	behaviour, by default off) 

Thu Mar 14 17:17:26 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, view.c:

	optionally submit form after pressing enter on the text field (by
	default on) 

Wed Mar 13 22:07:26 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	0.4pre3-CVS 

Wed Mar 13 22:04:52 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	0.4pre2 

Wed Mar 13 21:42:24 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	add html_focusable() to html_img() as well - it looks like nice
	extension, it makes sense and it fixes chaotic jumping around if
	page contains images 

Wed Mar 13 21:13:22 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c:

	strip leading/trailing spaces from URLs which are going to be saved
	into history => no duplicites in history with only differences in
	this 

Wed Mar 13 20:59:38 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c:

	off-by-one bug in justify code fixed (see diff, comment near
	malloc()); looks like i should release pre2 soon ;) 

Wed Mar 13 19:03:28 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	one bug removed, one bug changed (added) 

Tue Mar 12 22:33:08 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	be more smart; if more accesskey links, rotate between them; if x is
	letter and alt is not pressed, refuse it directly 

Tue Mar 12 20:09:29 2002  Petr Baudis <pasky@ucw.cz>:

	* kbd.c:

	Fixed the F1-F5 problem - am i not dumb? 

Tue Mar 12 18:18:03 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, HACKING, default.c, html.c, html_r.c, kbd.c,
	kbdbind.c, links.h, view.c:

	accesskey support - based on patch by ff, hacked a lot by me; also
	some HACKING file notes 

Mon Mar 11 16:10:40 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, session.c:

	option form_submit_confirm - optionally skip confirmation when
	submitting forms; based on patch by ff 

Mon Mar 11 13:45:06 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	tabindex fixes by <ff@partyticket.net> 

Mon Mar 11 13:37:42 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	allow servers same as domains - based on patch by
	<rono@sentuny.com.au> 

Mon Mar 11 13:17:24 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c, default.c, links.h:

	don't require three dots for non-international domains by default in
	check_domain_security() for cookies - reported by Christian
	Häggström <c00chm@cs.umu.se>, he also proposed a patch on which this
	is based ;) 

Mon Mar 11 12:56:22 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c:

	Don't convert only default value of form item, but all possible
	values (<select> tag) (by mikulas, from 0.97pre6) 

Sun Mar 10 20:42:16 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, html.c, html_r.c, links.h:

	tabindex support, based on patch by <ff@partyticket.net> 

Sun Mar 10 20:07:29 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	keybinding and buttonbinding 

Sun Mar 10 20:06:17 2002  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	proxy stuff 

Sun Mar 10 19:58:00 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	reformat bit 

Sun Mar 10 13:11:32 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, default.c, links.h, session.c:

	show_(status|title)_bar - still incomplete, though, as there's still
	a blank line even when they're turned off.. anyone wants to fix it?
	:) 

Sun Mar 10 12:43:51 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	few random unimportant tidyups done when browsing the code bored ;) 

Sun Mar 10 12:37:41 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	tidyup of print_screen_status() 

Sat Mar  9 22:25:57 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	fix cookies handling - thanks to zas for report,
	<ff@partyticket.net> for hint and proposed fix 

Sat Mar  9 22:10:43 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, dns.c, setup.h:

	one memory leak fixed in dns (not visible as it's in our child
	thread); also some sanity checks and lint silencing; based on patch
	by <csaba.raduly@sophos.com> 

Fri Mar  8 14:42:16 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c:

	reindent referer switch, handle REFERER_NONE (silence gcc warning) 

Fri Mar  8 14:41:11 2002  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/french.lng:

	french translation updates by zas 

Fri Mar  8 12:17:21 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, menu.c:

	moved REFERER_* into enum.. also fixed one bug - 1 wasn't
	REFERER_TRUE but REFERER_SAME_URL and 2 wasn't REFERER_SAME_URL but
	REFERER_FAKE and 3 wasn't REFERER_FAKE but REFERER_TRUE ;) i hope
	it'll still work now, please tell me if it'll break backwards
	compatibility with old config..  

Fri Mar  8 10:49:15 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c, default.c, links.h:

	make cookies accepting settable thru runtime option 

Fri Mar  8 10:18:57 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c, default.c, links.h, view.c:

	make cookies saving/loading/resaving turnable thru option 

Thu Mar  7 22:33:32 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, default.c, links.h:

	don't check duplicates in history when loading it; saves huge amount
	of cpu work; patch by zas, let's see if it'll broke anything; also
	contains cleanup of some history managment 

Thu Mar  7 22:05:56 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c:

	correction to justify patch - now we handle links correctly; patch
	by bunch, manual correction by me (i hope i did it properly ;) 

Thu Mar  7 21:04:22 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c:

	added <term_size> near default value of user-agent to
	documentation.. thanks, zas 

Thu Mar  7 12:54:13 2002  Petr Baudis <pasky@ucw.cz>:

	* INSTALL, README, SITES:

	various updates and rewrites 

Thu Mar  7 07:50:07 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	one FIXME and two #undefs, tralala..  

Wed Mar  6 19:52:53 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	0.4pre2-CVS 

Wed Mar  6 19:51:57 2002  Petr Baudis <pasky@ucw.cz>:

	* configure.in, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, stamp-h.in:

	0.4pre1 

Wed Mar  6 17:34:13 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	stupid CVS - credit for <kisto@go2.pl> and his justify 

Wed Mar  6 17:33:44 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c, html_tbl.c, links.h:

	Support for align=justify, original patch by <kisto@go2.pl>, some
	variable names expanded by me. Minor html renderer cleanup.  

Wed Mar  6 12:54:00 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, session.c, setup.h:

	add WWW_HOME_URL #define into setup.h, which can act as default
	homepage, if non-empty (empty by default); also attempt to add
	startup_goto_dialog option, but commented out for now as it doesn't
	work properly yet 

Wed Mar  6 10:55:06 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	another segfault fixes 

Wed Mar  6 01:26:08 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	i'm stupid .. segfault fix, thank for report goes to zas 

Tue Mar  5 14:54:13 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	undefine COOKIES_DEBUG ;) 

Tue Mar  5 11:48:48 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h, main.c, AUTHORS:

	dump-width option - based on patch by Edwin Groothuis
	<edwin@mavetju.org> 

Tue Mar  5 09:57:50 2002  Petr Baudis <pasky@ucw.cz>:

	* lua.c, types.c:

	s/strncpy/safe_strncpy/ - patch by zas 

Tue Mar  5 09:42:43 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	oops, typo compilation fix 

Mon Mar  4 23:31:19 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	ouch, fool me - fixed tiny merge error from 0.97pre4 

Mon Mar  4 23:29:43 2002  Petr Baudis <pasky@ucw.cz>:

	* os_dep.h:

	undefine UNIX on win32 (maybe it helps --mikulas - helps _what_?
	--pasky) (by mikulas, from 0.97pre5) 

Mon Mar  4 23:28:24 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	fixed bad loading of imgmap (by mikulas, from 0.97pre5) 

Mon Mar  4 23:26:49 2002  Petr Baudis <pasky@ucw.cz>:

	* finger.c:

	commented out sending /W in finger request - dunno why it was there,
	but it broke finger://mpat7421@ss1000.ms.mff.cuni.cz/ ;)) 

Mon Mar  4 23:07:10 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	rewritten parsing of name=value, so that it's now more tolerant to
	whitespaces (permitted around = and before ;) - so now i.e. bugzilla
	should work properly in elinks; thanks for inspiration to report by
	<lenbok@mailandnews.com> and proposed fix by <qmax@civo.aca.nsc.ru>
	(from 6/7 Sep 2001) 

Mon Mar  4 22:09:07 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	nitpicking 

Mon Mar  4 22:06:24 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	set_cookie tidyup 

Mon Mar  4 20:35:15 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c:

	silenced one warning 

Mon Mar  4 20:34:53 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c, http.c, url.c:

	removed the url spaces patch (and 'manual' stripping of
	leeading/trailing spaces) - it didn't work well (the stripping is
	pretty tricky and ugly to do, xlated url wasn't shown in info etc
	etc) 

Mon Mar  4 20:18:20 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	hopefully already obsolete bug deleted 

Mon Mar  4 20:11:22 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	remove debug things ;) 

Mon Mar  4 20:09:44 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	strip spaces on start and end of url - INCOMPLETE 

Mon Mar  4 15:24:53 2002  Petr Baudis <pasky@ucw.cz>:

	* entity.inc, Unicode/entities.lnx:

	euro and euml was swapped - fix based on patch by zas 

Mon Mar  4 00:55:33 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure.in,
	configure, stamp-h.in:

	Move dlopen check few lines up so now the output isn't messy 

Mon Mar  4 00:54:30 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	typo compilation fix 

Mon Mar  4 00:49:19 2002  Petr Baudis <pasky@ucw.cz>:

	* html_r.c, html_tbl.c, links.h:

	Improved performance of rendering nested tables (by mikulas, from
	0.97pre4) 

Mon Mar  4 00:37:38 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	Fixed one case where 0 would go to the 'save formatted document'
	output (by mikulas, from 0.97pre4) 

Mon Mar  4 00:34:56 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	some sanity checks 

Mon Mar  4 00:27:25 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	enlarged one static string buffer.. (from 0.97pre4) 

Mon Mar  4 00:20:14 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	Do not accept '<' without name as a tag (by mikulas, from 0.97pre4) 

Mon Mar  4 00:17:41 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	Input field is one char larger (by mikulas, from 0.97pre4) 

Mon Mar  4 00:15:16 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c:

	Always trust 'Content-Length' when communicating with HTTP/1.1
	server -- work around broken HTTP/1.1 servers that send Connection:
	close, but keep the connection.  
	
	By mikulas, from 0.97pre4 

Mon Mar  4 00:12:23 2002  Petr Baudis <pasky@ucw.cz>:

	* http.c, links.h:

	Report terminal size in User-Agent (by mikulas, from 0.97pre4) 

Mon Mar  4 00:09:19 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	Test for dlopen in configure (openssl needs it???) (by mikulas, from
	0.97pre4) 

Mon Mar  4 00:06:24 2002  Petr Baudis <pasky@ucw.cz>:

	* kbd.c:

	Fixed ESC timeout (by mikulas, from 0.97pre4) 

Mon Mar  4 00:04:17 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	Removed LONG_MIN, LONG_MAX because they were undefined on irix (by
	mikulas, from 0.97pre4) 

Mon Mar  4 00:01:58 2002  Petr Baudis <pasky@ucw.cz>:

	* main.c:

	-dump doesn't get stuck in redir loops anymore (by mikulas, from
	0.97pre4) 

Sun Mar  3 23:51:50 2002  Petr Baudis <pasky@ucw.cz>:

	* charsets.c:

	Handle encoding to utf-8 correctly (by mikulas, from 0.97pre4) 

Sun Mar  3 23:46:00 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	added #define __EXTENSION__ - hope it helps on SunOS (by mikulas,
	from 0.97pre4) 

Sun Mar  3 23:43:48 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, language.h, language.inc, intl/index.txt,
	intl/indonesian.lng:

	indonesian translation by faizal@mfaizal.net (from 0.97pre4) 

Sun Mar  3 23:33:37 2002  Petr Baudis <pasky@ucw.cz>:

	* language.h, language.inc, intl/finnish.lng, intl/index.txt,
	AUTHORS:

	finnish translation by ik@iki.fi (from 0.97pre3) 

Sun Mar  3 23:30:45 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, AUTHORS, links.h, select.c:

	compilation fix by mikulas (from 0.97pre3) 

Sun Mar  3 23:24:34 2002  Petr Baudis <pasky@ucw.cz>:

	* ftp.c:

	add support for color dirs inside ftp 

Sun Mar  3 23:16:04 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, ftp.c, links.h:

	ftp massive cleanup - tidyup, removed some braindead stuff, varnames
	expanding,few comments 

Sun Mar  3 22:55:28 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	blabla 

Sun Mar  3 16:56:27 2002  Petr Baudis <pasky@ucw.cz>:

	* kbd.c, menu.c, os_dep.c:

	more compilation warning fixes 

Sun Mar  3 16:46:54 2002  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/gen-intl:

	more structures in brackets in arrays ;) 

Sun Mar  3 16:46:13 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h, Makefile.in, acconfig.h, aclocal.m4, config.h.in,
	configure, configure.in, stamp-h.in:

	check for arpa/inet.h 

Sun Mar  3 16:45:37 2002  Petr Baudis <pasky@ucw.cz>:

	* kbd.c, menu.c, os_dep.c, sched.c, types.c:

	silenced some more compiler warnings..  

Sun Mar  3 16:30:01 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	oops - compilation fix 

Sun Mar  3 16:22:31 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	enabled -Wall for gcc - all compiler warnings 

Sun Mar  3 16:22:11 2002  Petr Baudis <pasky@ucw.cz>:

	* configure, configure.in, intl/gen-intl:

	enabled -Wall for gcc - show all warnings 

Sun Mar  3 16:21:32 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c, html.c:

	silenced compiler warnings 

Sun Mar  3 16:16:20 2002  Petr Baudis <pasky@ucw.cz>:

	* codepage.inc, uni_7b.inc, Unicode/gen-7b, Unicode/gen-cp:

	enclose array members (structures) into {} - silencing compiler
	warnings 

Sun Mar  3 15:55:22 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	fixed one race condition in httpauth 

Sun Mar  3 15:48:14 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, bookmarks.c, charsets.c, default.c, html.c, html_r.c,
	html_tbl.c, kbdbind.c, links.h, lua.c, os_dep.c, sched.c,
	session.c, url.c, view.c:

	tidyup - blank lines, reindentations, few comments, removed unused
	variables, silenced compiler warnings 

Sat Mar  2 15:09:32 2002  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/czech.lng:

	added few czech translations 

Sat Mar  2 14:53:37 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c, http.c:

	handle spaces in URL correctly now (substituing them for '+' in HTTP
	requests, leaving them as they are otherwise) 

Sat Mar  2 14:04:07 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, TODO, http.c, language.h, language.inc, links.h,
	menu.c, sched.c, session.c, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/czech.lng,
	intl/dutch.lng, intl/english.lng, intl/estonian.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/romanian.lng, intl/russian.lng, intl/slovak.lng,
	intl/spanish.lng, intl/swedish.lng, intl/turkish.lng,
	intl/ukrainian.lng:

	Merged HTTP-auth support by Jan Sembera (based on the original one
	by Sergei Borushevsky) 

Sat Mar  2 13:09:55 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	Version updated to 0.4pre1-CVS 

Sat Mar  2 11:29:52 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c:

	Hacked connect() in order to get this thing working on *censored*
	*censored* *censored* BSD *censored* *censored* 

Tue Feb 12 12:18:41 2002  Petr Baudis <pasky@ucw.cz>:

	* lua.c:

	fixed crash when links_home is NULL 

Sat Feb  9 11:12:31 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	take [address] as an ipv6 address only in the hostname part of URL -
	bug reported by Stepan Roh <stepan@srnet.cz> 

Fri Feb  8 21:14:39 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS:

	added bug reported by Kovacs Zoltan
	<kovacsz@pc10.radnoti-szeged.sulinet.hu> 

Fri Feb  8 06:24:08 2002  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	typo fix in dns.c, by Cristiano Guadagnino <criguada@tin.it> 

Thu Feb  7 00:12:53 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	added some more items 

Thu Feb  7 00:00:41 2002  Petr Baudis <pasky@ucw.cz>:

	* session.c:

	fixed small bug in lua hooks which caused links to crash if
	non-existent local file was specified as a frame source 

Wed Feb  6 23:37:56 2002  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	disable 4to6 mapping, possibly solving the problem with the non
	ipv6-enabled kernels but ipv6 enabled libc 

Wed Feb  6 23:10:29 2002  Petr Baudis <pasky@ucw.cz>:

	* bookmarks.c:

	memorizing last search until escaping from the bookmarks dialog,
	patch by Zas, lead fixed by pasky; bookmarks search should hopefully
	be done by now 

Mon Feb  4 14:13:06 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, links.1, os_dep.c, os_dep.h:

	Port to RISC OS by Peter Naulls <peter@chocky.org> 

Sun Feb  3 07:50:40 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	forgot one line in querystring patch 

Fri Feb  1 21:49:59 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	changes and moves etc 

Fri Feb  1 21:46:10 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, default.c, contrib/README, contrib/color_config.diff:

	Added possibility to change default colors settings - original patch
	by Peter Wang, disabled default_bg && default_vlink for now 

Fri Feb  1 17:33:26 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, links.h, os_dep.c, session.c, url.c:

	Cleanup safe_strncpy and spread its use to more places.  

Fri Feb  1 13:49:13 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	cleanups in bookmarks section, box stuff moved to bfu section;
	original patch by Zas <zas@norz.org> 

Fri Feb  1 10:16:49 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, sched.c:

	hopefully fixed segfault when killing background connection in
	lookup state 

Thu Jan 31 22:32:09 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	make UL, DIR, MENU, OL and DL _block_ elements, thus leaving a line
	after themselves 

Thu Jan 31 22:24:56 2002  Petr Baudis <pasky@ucw.cz>:

	* bookmarks.c:

	Bookmark resaving by Zas <zas@norz.org> - from now on, bookmarks are
	saved after each change 

Thu Jan 31 16:35:50 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	comments change in cookies.c 

Thu Jan 31 15:50:33 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c, session.c:

	Hopefully FINALLY(!) fixed the unhistory - now it should be
	rock-stable and any rumours telling otherwise should not be trusted
	in any rate ;-). This fix comes after three-hours research and
	massive changes and reverts as a tiny one-liner + some comments
	dropped around the history code accompanying it.  

Wed Jan 30 22:27:24 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c, session.c:

	some unhistory experiments, history should be stable, unhistory may
	core randomly so don't use it now :^). now sleep time, children 

Wed Jan 30 21:54:37 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, menu.c, session.c, view.c:

	certain (un)history cleanups and fixes, not yet complete 

Wed Jan 30 19:27:56 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c, session.c:

	small unhistory cleanups 

Wed Jan 30 15:16:03 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, AUTHORS, dns.c:

	MacOS address resolution fix (Aldy Hernandez) (from 0.97pre2) 

Wed Jan 30 15:08:32 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, aclocal.m4, config.h.in, configure.in, Makefile.in,
	configure, stamp-h.in, os_dep.c:

	Fix compile error when -lgpm works but gpm.h is not there (Mikulas
	Patocka) (from 0.97pre2) 

Wed Jan 30 15:05:16 2002  Petr Baudis <pasky@ucw.cz>:

	* NEWS:

	Dummy NEWS to make automake happy 

Wed Jan 30 14:58:40 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, view.c:

	Fixed segfault when posting large form (Jacek Fedorynski) (from
	0.97pre2) 

Wed Jan 30 14:48:56 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, entity.inc, Unicode/entities.lnx:

	Added &euro; symbol (Cliff Cunnington) (from 0.97pre2) 

Wed Jan 30 14:16:19 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	Fixed fix of stripping query strings from form's actions (Mikulas
	Patocka) (from 0.97pre1) 

Wed Jan 30 14:06:44 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c, view.c:

	Fixed crash when amount of items in select box decreases after
	reload, make it remember select item on reload (fixes www.xchat.cz)
	(Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:58:17 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c, html_r.c:

	Do not allow larger input fiels than screen size (Mikulas Patocka)
	(from 0.97pre1) 

Wed Jan 30 13:55:40 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	Fix one read overrun in parser (Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:48:21 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	Fixed crash in OS/2 when user pressed Ctrl-V and clipboard was empty
	(Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:47:08 2002  Petr Baudis <pasky@ucw.cz>:

	* select.c:

	Fixed leaving zombie processes when more children exited
	simultaneously (Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:45:53 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	Fixed error when sprintf return value is defined as 'void' in
	headers (Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:44:11 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	work-around for Sun C bug (Mikulas Patocka) (from 0.97pre1) 

Wed Jan 30 13:42:43 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, connect.c, html.c, view.c:

	compile incompatibilites, fix by Karel Kulhavy (from 0.97pre1)
	(probably not everything, but dunno how classify the other fixes) 

Tue Jan 29 22:10:22 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, language.h, language.inc, intl/index.txt,
	intl/dutch.lng:

	Dutch translation by Stefan de Groot <stefan@nllinux.nl> (from
	0.97pre1) 

Tue Jan 29 22:07:42 2002  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/slovak.lng:

	small fix in slovak.lng 

Tue Jan 29 22:06:02 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	workaround for cygwin including getops.h (from 0.97pre1) 

Tue Jan 29 22:03:15 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	declare parse_http_date().. hey, yes, we really use him in cookies.c
	as well ;) (from 0.97pre1) 

Tue Jan 29 21:57:16 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	Do not reject cookies with insecure domain (but send them only to
	original server, not to the whole domain) (from Mikulas Patocka)
	(from 0.97pre1) 

Tue Jan 29 21:56:32 2002  Petr Baudis <pasky@ucw.cz>:

	* entity.inc:

	removed some duplicite entries (inspired by 0.97pre1) 

Tue Jan 29 21:51:56 2002  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	another download mirror (from 0.97pre1) 

Tue Jan 29 21:50:23 2002  Petr Baudis <pasky@ucw.cz>:

	* Unicode/entities.lnx:

	removed some duplicite entries (inspired by 0.97pre1) 

Tue Jan 29 08:58:18 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/bm.lua:

	escaping more characters, refusing to save bookmarks if not loaded
	properly (Peter Wang's) 

Mon Jan 28 12:02:50 2002  Petr Baudis <pasky@ucw.cz>:

	* bookmarks.c:

	bookmark updates by zas - swap cancel and clear, after search move
	pointer to top, on enter to the bookmark manager reset search
	results 

Sat Jan 26 19:42:35 2002  Petr Baudis <pasky@ucw.cz>:

	* BUGS, TODO:

	reduced a bit 

Sat Jan 26 19:38:08 2002  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	XMP wrapped to PRE 

Sat Jan 26 15:21:47 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, HACKING, INSTALL, LUA, README, SITES, TODO:

	Added Id tags 

Sat Jan 26 15:21:28 2002  Petr Baudis <pasky@ucw.cz>:

	* LUA-WIP, NEWS:

	removed dummy files 

Sat Jan 26 14:41:08 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	more sanity checking 

Sat Jan 26 11:33:56 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, bookmarks.c, language.h, language.inc, links.h,
	intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/english.lng,
	intl/estonian.lng, intl/french.lng, intl/galician.lng,
	intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng:

	Bookmarks filtering, some minor bookmarks cleanups - patch by Zas 
	<zas@norz.org>. It still needs improvements, though.  

Sat Jan 26 10:24:40 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, sched.c:

	Finally fixed the problem (in one time, there might be two
	connections in the scope of one struct connection) - after all, the
	fix was quite simple :).  

Fri Jan 25 18:08:22 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, sched.c:

	hopefully fixed one evil crash inside connected() 

Fri Jan 25 17:36:31 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c:

	fixed typo in default.c for allow-special-files option, thanks zas
	:) 

Fri Jan 25 17:11:06 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, file.c, links.h:

	[SECURITYFIX] allow reading of special files only when explicitly
	enabled 

Thu Jan 24 03:10:58 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	quick fix of last fix (submit thing in menu) - links didn't work at
	all ;) 

Thu Jan 24 01:36:59 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, file.c:

	allow reading of special non-regular files - patch by Len Lattanzi
	<Len_Lattanzi@StanfordAlumni.org> 

Thu Jan 24 00:58:04 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c:

	tiny fix, just to force everything is really sane 

Wed Jan 23 22:43:20 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, links.h:

	clear_dialog() by Zas <zas@norz.org> 

Wed Jan 23 21:57:31 2002  Petr Baudis <pasky@ucw.cz>:

	* bfu.c:

	selection by leading letter - patch by Ami Fischman
	<usenet@fischman.org> 

Wed Jan 23 21:30:14 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, bfu.c:

	cyclic scrolling in menus, patch by Ami Fischman
	<usenet@fixchman.org> 

Wed Jan 23 16:21:03 2002  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	Add 'submit form' to link menu for each form field - patch by Ami
	Fischman <usenet@fischman.org> 

Mon Jan 21 22:30:39 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/hpux-pipe.diff:

	it was completely different patch ;) 

Mon Jan 21 17:44:14 2002  Petr Baudis <pasky@ucw.cz>:

	* autocommit.sh:

	*plop* 

Mon Jan 21 17:44:04 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	Fix broken BSD including system ;-) sockaddr_storage and
	sockaddr_in6 weren't detected correctly during configure Thanks to
	Ashram for bug report 

Sun Jan 20 15:27:24 2002  Petr Baudis <pasky@ucw.cz>:

	* contrib/: README, hpux-pipe.diff:

	Fix for HPUX by Stephane Chazelas 

Sat Jan 19 16:57:43 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c:

	*cough* 

Fri Jan 18 08:53:54 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c, AUTHORS:

	take @ only before hostname - fix by Ami Fischman
	<usenet@fischman.org> 

Thu Jan 17 20:27:46 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h:

	strcasestr() stub by Zas <zas@norz.org> 

Thu Jan 17 20:27:21 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	Added check for strcasestr() 

Thu Jan 17 19:14:37 2002  Petr Baudis <pasky@ucw.cz>:

	* autocommit.sh:

	more sane passing of parameters ;) 

Thu Jan 17 19:14:24 2002  Petr Baudis <pasky@ucw.cz>:

	* links.h, os_dep.h:

	moved sockaddr_storage emergency stub 

Thu Jan 17 19:13:18 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	Cleaned checks for unused functions, added check for timegm(), some
	dummy comments for rest of acconfig.h 

Thu Jan 17 18:26:48 2002  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, session.c:

	mktime() takes struct tm in localtime, not GMT - fix by Christian
	Haggstrom <c00chm@cs.umu.se> 

Thu Jan 17 14:05:40 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	Skip ':' even when \!need_slashes (otherwise i.e. mailto doesn't dig
	user correctly) 

Thu Jan 17 09:18:58 2002  Petr Baudis <pasky@ucw.cz>:

	* menu.c:

	display IPv6 in features list 

Thu Jan 17 09:17:08 2002  Petr Baudis <pasky@ucw.cz>:

	* os_dep.h:

	remove IPV6 defining, moved to autoconf suite 

Thu Jan 17 09:15:54 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in:

	[no log message] 

Sun Jan  6 21:28:22 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	fix of silly mistake in properly joining relative urls containing
	query_str 

Sun Jan  6 18:56:51 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c:

	remove chmod(home_links, 0700) everytime, just do it only in mkdir() 

Sat Jan  5 22:12:44 2002  Petr Baudis <pasky@ucw.cz>:

	* error.c:

	flush stderr when whining 

Sat Jan  5 22:05:53 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	more cookies debug :) 

Sat Jan  5 21:53:13 2002  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	cookies debug code 

Sat Jan  5 21:39:41 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c:

	first stage of get_home() cleanup - needs to be done w/o so much
	gotos probably 

Wed Jan  2 23:01:37 2002  Petr Baudis <pasky@ucw.cz>:

	* default.c, file.c, links.h:

	Option for highlight of directories 

Wed Jan  2 19:29:23 2002  Petr Baudis <pasky@ucw.cz>:

	* autocommit.sh, autogen.sh:

	some my autoshit tools - will be probably better to have them in CVS 

Wed Jan  2 19:05:56 2002  Petr Baudis <pasky@ucw.cz>:

	* HACKING:

	success testing note 

Wed Jan  2 18:20:42 2002  Petr Baudis <pasky@ucw.cz>:

	* mailcap.pl, contrib/mailcap.pl:

	Moved mailcap.pl to contrib/ 

Wed Jan  2 18:17:28 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	Correct guessing of http:// for IPv6 address 

Wed Jan  2 17:49:55 2002  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	Cleanup of translate_url() 

Wed Jan  2 17:00:14 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, http.c, url.c:

	IPv6 support various fixes, support for parsing of IPv6 URL 

Wed Jan  2 13:43:35 2002  Petr Baudis <pasky@ucw.cz>:

	* connect.c, default.c, dns.c, sched.c:

	IPv6 connections support (not yet URL parsing fixes) 

Tue Jan  1 17:55:52 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, acconfig.h, aclocal.m4, config.h.in, configure,
	configure.in, stamp-h.in, os_dep.h:

	Add test for struct sockaddr_in6 

Tue Jan  1 17:23:53 2002  Petr Baudis <pasky@ucw.cz>:

	* dns.c, links.h, os_dep.h:

	Use sockaddr_storage instead of sockaddr, where appropriate.  

Tue Jan  1 01:19:07 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, config.h.in, configure, configure.in, Makefile.in,
	acconfig.h, aclocal.m4, config.h.in, configure, configure.in,
	stamp-h.in:

	grrr.. test for automated autoshit autocomit autofixing autobroken
	autobuild; also added test for getaddrinfo() 

Tue Jan  1 00:57:20 2002  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in:

	added check for sockaddr_storage 

Tue Jan  1 00:54:16 2002  Petr Baudis <pasky@ucw.cz>:

	* aclocal.m4, configure:

	added check for sockaddr_storage 

Tue Jan  1 00:51:14 2002  Petr Baudis <pasky@ucw.cz>:

	* acconfig.h, config.h.in, configure, configure.in, stamp-h.in:

	added check for sockaddr_storage 

Mon Dec 31 19:59:46 2001  Petr Baudis <pasky@ucw.cz>:

	* url.c:

	Hopefully fix for making link to ?foo at bar.cgi/baz to bar.cgi/?foo
	rather than to bar.cgi/baz?foo.  

Mon Dec 31 18:43:24 2001  Petr Baudis <pasky@ucw.cz>:

	* language.h, language.inc, view.c, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/catalan.lng, intl/czech.lng,
	intl/english.lng, intl/estonian.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/italian.lng,
	intl/lithuanian.lng, intl/polish.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng:

	Pop up error message when trying to edit textarea externally from
	slave terminal.  

Mon Dec 31 18:01:03 2001  Petr Baudis <pasky@ucw.cz>:

	* contrib/md5check.lua:

	Another lua script from Peter Wang 

Sun Dec 30 01:43:50 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, links.h, sched.c:

	Even more rewrites of DNS (even random digs to connection managment)
	so that we now finally correctly handle multiple RRs; we also
	virtually already can use IPv6, if would gethostbyname() eever
	return it and we would use sizeof(sockaddr_storage) ;).  

Sat Dec 29 22:53:06 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c:

	unified some duplicated SSL code 

Sat Dec 29 22:33:15 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, dns.c:

	We do blocking communication with resolver thread, it shouldn't hurt
	as it's always only local, and it is too difficult to do it
	non-blocking properly. Now it should again work at BSD for hosts
	with single RR.  

Sat Dec 29 18:52:38 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, links.h, sched.c:

	a little more dns cleanup, now address list should be freed
	correctly when an error occurs 

Sat Dec 29 17:35:29 2001  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	fix async resolving under such braindead systems like bsd ;) which
	won't acceptdata from resolver thread to a socket at once 

Sat Dec 29 16:19:28 2001  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	fix segfault when host not found 

Sat Dec 29 14:21:39 2001  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	more universal addr type passing :) 

Sat Dec 29 14:17:21 2001  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	fix async resolving under such braindead systems like bsd ;) which
	won't burst me with data from resolver thread at once 

Sat Dec 29 14:04:05 2001  Petr Baudis <pasky@ucw.cz>:

	* dns.c:

	small anti-leak when fucked up communication with resolver thread 

Sat Dec 29 13:20:52 2001  Petr Baudis <pasky@ucw.cz>:

	* stamp-h.in:

	i hate autoshits :( 

Sat Dec 29 12:47:33 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, COPYING, HACKING, INSTALL, LUA, LUA-WIP,
	Makefile.am, Makefile.gen, Makefile.in, NEWS, README, SITES, TODO,
	acconfig.h, aclocal.m4, af_unix.c, beos.c, bfu.c, bookmarks.c,
	cache.c, charsets.c, codepage.h, codepage.inc, config.guess,
	config.h.in, config.sub, config2.h, configure, configure.in,
	connect.c, cookies.c, default.c, dns.c, config/config.guess,
	config/config.sub, entity.inc, error.c, file.c, finger.c, ftp.c,
	html.c, html_r.c, html_tbl.c, http.c, https.c, install-sh, kbd.c,
	kbdbind.c, language.c, language.h, language.inc, links.1, links.h,
	lua.c, mailcap.pl, mailto.c, main.c, menu.c, missing,
	mkinstalldirs, os_dep.c, os_dep.h, os_depx.h, rebuild, sched.c,
	select.c, session.c, setup.h, stamp-h.in, terminal.c, types.c,
	uni_7b.inc, url.c, view.c, win32.c, wipe-out-ssl, wipe-out-ssl.awk:

	hopefully fix build system - changing ctimes 

Fri Dec 28 17:25:34 2001  Petr Baudis <pasky@ucw.cz>:

	* contrib/: README, bm.lua, color_config.diff, dummy-js.diff,
	hooks.lua, links_wps.zip, user.example:

	made contrib/ and added some interesting things there 

Fri Dec 28 16:20:43 2001  Petr Baudis <pasky@ucw.cz>:

	* HACKING:

	html parser/renderer description 

Fri Dec 28 16:05:54 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	historical note near GNU gettext credits 

Fri Dec 28 13:04:34 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, default.c, dns.c, links.h:

	remove ip and use sockaddr(_in) instead 

Fri Dec 28 03:29:02 2001  Petr Baudis <pasky@ucw.cz>:

	* README, Unicode/gen-ent, intl/intl.txt:

	back from test :) 

Fri Dec 28 03:16:35 2001  Petr Baudis <pasky@ucw.cz>:

	* Unicode/gen-ent, intl/intl.txt:

	test of new cvslog.pl :) 

Fri Dec 28 03:13:03 2001  Petr Baudis <pasky@ucw.cz>:

	* README:

	test of new cvslog.pl :) 

Fri Dec 28 00:41:42 2001  Petr Baudis <pasky@ucw.cz>:

	* HACKING, HACKING:

	*dummy* 

Thu Dec 27 21:46:13 2001  Petr Baudis <pasky@ucw.cz>:

	* HACKING:

	some more coding style issues 

Thu Dec 27 05:27:43 2001  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	TODO update :) 

Thu Dec 27 04:41:31 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, sched.c:

	DNS support for more RRs per host looks done - some mem_free()s
	moved, debug()s removed, no leaks or crashes occured to me for now 

Thu Dec 27 03:59:59 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, dns.c, sched.c:

	next version of my leaky multi-RR DNS beast ;p 

Thu Dec 27 02:53:59 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, default.c, dns.c, links.h, sched.c:

	Partially rewritten fashion of address handling in DNS 'subsystem';
	it is maybe still a little broken and certainly leakage, but I want
	to have some reference point - it compiles and doesn't core to me ;) 

Wed Dec 26 15:39:24 2001  Petr Baudis <pasky@ucw.cz>:

	* error.c:

	remove of some inherited LEAK_DEBUG ifdefs 

Wed Dec 26 00:19:15 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, session.c:

	Proper parsing of set-cookie expires atribute, patch by Stepan Roh
	<stepan@srnet.cz>, blank lines by me 

Tue Dec 25 21:55:49 2001  Petr Baudis <pasky@ucw.cz>:

	* bfu.c:

	bfu.c partial cleanup 

Tue Dec 25 18:42:00 2001  Petr Baudis <pasky@ucw.cz>:

	* default.c:

	parameters handling rewrite fixes ;) 

Tue Dec 25 18:41:43 2001  Petr Baudis <pasky@ucw.cz>:

	* af_unix.c:

	af_unix cleanup 

Tue Dec 25 17:58:32 2001  Petr Baudis <pasky@ucw.cz>:

	* default.c, links.h:

	rewritten options handling 

Mon Dec 24 13:42:03 2001  Petr Baudis <pasky@ucw.cz>:

	* links.h, terminal.c, view.c:

	External textarea editor support code cleanup, sanity checks,
	comments, bugfixes and only allow it for master terminal, as it
	doesn't work for any else really.  

Sun Dec 23 23:42:23 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, TODO, config2.h, configure, configure.in,
	default.c, html.c, html_r.c, kbdbind.c, language.h, language.inc,
	links.1, links.h, menu.c, session.c, terminal.c, view.c,
	intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/english.lng,
	intl/estonian.lng, intl/french.lng, intl/galician.lng,
	intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng:

	New release strategy - elinks-0.3pre - basically merge all the stuff
	from UNSTABLE branch.  
	
	That includes: 
	  * Unhistory patch by Peter Wang 
	  * External textarea editor 
	  * Colourful cleanups 

Sun Dec 23 23:21:41 2001  Petr Baudis <pasky@ucw.cz>:

	* config2.h, configure, configure.in, default.c, http.c:

	Releasing elinks-0.2. This release is generally only sync for new
	development model. Included some language updates and few bug fixes
	and few code cleanups.  Main fun will come with elinks-0.3, but
	that's another story.  

Sun Dec 23 22:43:32 2001  Petr Baudis <pasky@ucw.cz>:

	* connect.c, default.c, dns.c, links.h, url.c:

	merge with STABLE 

Sun Dec 23 15:20:00 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, HACKING:

	merge with stable 

Sun Dec 23 15:10:19 2001  Petr Baudis <pasky@ucw.cz>:

	* HACKING:

	file HACKING was initially added on branch UNSTABLE.  

Sat Dec 22 22:06:14 2001  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/french.lng:

	merge with STABLE 

Sat Dec 22 12:27:09 2001  Petr Baudis <pasky@ucw.cz>:

	* bfu.c, html.c:

	merge with stable 

Mon Dec 17 13:13:07 2001  Petr Baudis <pasky@ucw.cz>:

	* http.c:

	merge with STABLE 

Sat Dec 15 21:40:56 2001  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/french.lng:

	merge from STABLE 

Wed Nov  7 13:51:25 2001  Petr Baudis <pasky@ucw.cz>:

	* view.c:

	textarea double encoding fix 

Sun Oct 28 17:44:10 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	be more humbe :) 

Sun Oct 28 17:35:28 2001  Petr Baudis <pasky@ucw.cz>:

	* language.inc, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/czech.lng, intl/english.lng,
	intl/estonian.lng, intl/french.lng, intl/galician.lng,
	intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng:

	Show ELinks in About dialog 

Sun Oct 28 16:31:39 2001  Petr Baudis <pasky@ucw.cz>:

	* default.c, http.c, links.1, links.h, menu.c, intl/czech.lng,
	intl/english.lng, intl/french.lng, language.h, language.inc,
	intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/estonian.lng, intl/galician.lng,
	intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/italian.lng, intl/lithuanian.lng,
	intl/polish.lng, intl/romanian.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng:

	User-Agent modifiable string (user-agent-0.96-pb2.patch) 

Sun Oct 28 14:49:02 2001  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	no need to make cvs-dist 

Sun Oct 28 14:44:48 2001  Petr Baudis <pasky@ucw.cz>:

	* codepage.h, codepage.inc, entity.inc, language.h, language.inc,
	intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/catalan.lng, intl/estonian.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/italian.lng,
	intl/lithuanian.lng, intl/polish.lng, intl/romanian.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng:

	intl and unicode stuff 

Sun Oct 28 14:41:21 2001  Petr Baudis <pasky@ucw.cz>:

	* Makefile.in, aclocal.m4:

	generated by a little newer automake 

Sun Oct 28 14:26:10 2001  Petr Baudis <pasky@ucw.cz>:

	* INSTALL:

	basic installation guidelines 

Sun Oct 28 13:57:49 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	User-Agent string changing support 

Sun Oct 28 13:57:15 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Romanian translation 

Sun Oct 28 13:56:53 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Catalan translation 

Sun Oct 28 13:56:18 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Petr Kulhavy's HTTP referer 

Sun Oct 28 13:55:30 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	Peter Wang's Lua 

Sun Oct 28 13:50:31 2001  Petr Baudis <pasky@ucw.cz>:

	* config2.h, configure, configure.in:

	going for elinks-0.1 

Sun Oct 28 13:39:20 2001  Petr Baudis <pasky@ucw.cz>:

	* BUGS, config2.h, configure, configure.in:

	more RR per host, &#13; 

Sun Oct 28 13:37:36 2001  Petr Baudis <pasky@ucw.cz>:

	* SITES:

	new mailing list, elinks site 

Sun Oct 28 13:37:21 2001  Petr Baudis <pasky@ucw.cz>:

	* README:

	rewritten (grammar check required ;) 

Sun Oct 28 13:06:17 2001  Petr Baudis <pasky@ucw.cz>:

	* TODO:

	sorted by importance, some additions 

Sun Oct 28 13:00:59 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS:

	sorted by alphabetical order, minor changes 

Sun Oct 28 08:54:03 2001  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	Security fix in save_cookies() (cookies-secresave-0.96.patch) 

Sun Oct 28 08:51:43 2001  Petr Baudis <pasky@ucw.cz>:

	* Unicode/entities.lnx, Unicode/index.txt, intl/gen-intl,
	intl/index.txt, Unicode/8859_15.cp, Unicode/8859_16.cp,
	intl/romanian.lng:

	Romanian translation (romanian-0.96.patch) 

Sun Oct 28 08:51:24 2001  Petr Baudis <pasky@ucw.cz>:

	* intl/: index.txt, catalan.lng:

	Catalan translation (catalan-0.96.patch) 

Sun Oct 28 08:50:19 2001  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	listing tag support (listing-0.96.patch) 

Sun Oct 28 08:49:59 2001  Petr Baudis <pasky@ucw.cz>:

	* html.c:

	img title attribute support (imgtitle-0.96.patch) 

Sun Oct 28 08:47:55 2001  Petr Baudis <pasky@ucw.cz>:

	* html.c, view.c:

	Do not strip query string from form action URLs
	(noqstrip-0.96.patch) 

Sun Oct 28 08:46:23 2001  Petr Baudis <pasky@ucw.cz>:

	* links.1:

	Cookies saving/loading on request description
	(cookies-resave-0.96-man.patch) 

Sun Oct 28 08:46:07 2001  Petr Baudis <pasky@ucw.cz>:

	* links.1:

	Cookies saving description (cookies-save-0.96-man.patch) 

Sun Oct 28 08:45:32 2001  Petr Baudis <pasky@ucw.cz>:

	* cookies.c, kbdbind.c, links.h, view.c:

	Cookies saving/loading on request (cookies-resave-0.96.patch) 

Sun Oct 28 08:45:10 2001  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	Cookies saving (cookies-save-0.96.patch) 

Sun Oct 28 08:44:53 2001  Petr Baudis <pasky@ucw.cz>:

	* cookies.c:

	Cookies expiration (cookies-expire-0.96.patch) 

Sun Oct 28 08:44:17 2001  Petr Baudis <pasky@ucw.cz>:

	* main.c:

	HTTP Moved support for -dump/-source (moved-0.96.patch) 

Sun Oct 28 08:43:16 2001  Petr Baudis <pasky@ucw.cz>:

	* links.1:

	True HTTP referer support description (true-referer-0.96-man.patch) 

Sun Oct 28 08:42:54 2001  Petr Baudis <pasky@ucw.cz>:

	* default.c, http.c, links.h, main.c, menu.c, sched.c, session.c,
	view.c, intl/czech.lng, intl/english.lng:

	True HTTP referer support (true-referer-0.96-lua.patch) 

Sun Oct 28 08:41:28 2001  Petr Baudis <pasky@ucw.cz>:

	* default.c, http.c, links.h, menu.c, intl/english.lng:

	Fake HTTP referer support (referer-0.96.patch) 

Sun Oct 28 08:40:44 2001  Petr Baudis <pasky@ucw.cz>:

	* links.1:

	Manual page updates (manpage-0.96.patch) 

Sun Oct 28 08:32:49 2001  Petr Baudis <pasky@ucw.cz>:

	* http.c, kbdbind.c, language.h, language.inc, links.h, menu.c,
	session.c, intl/brazilian_portuguese.lng, intl/bulgarian.lng,
	intl/czech.lng, intl/english.lng, intl/estonian.lng,
	intl/french.lng, intl/galician.lng, intl/german.lng,
	intl/greek.lng, intl/hungarian.lng, intl/icelandic.lng,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/turkish.lng, intl/ukrainian.lng, LUA,
	LUA-WIP, lua.c:

	lua p12-wip2 

Sat Oct 27 21:48:39 2001  Petr Baudis <pasky@ucw.cz>:

	* Makefile.am, Makefile.in, acconfig.h, bfu.c, config.h.in,
	configure, configure.in, kbdbind.c, language.h, language.inc,
	links.h, main.c, menu.c, session.c, setup.h, url.c, view.c,
	intl/brazilian_portuguese.lng, intl/bulgarian.lng, intl/czech.lng,
	intl/english.lng, intl/estonian.lng, intl/french.lng,
	intl/galician.lng, intl/german.lng, intl/greek.lng,
	intl/hungarian.lng, intl/icelandic.lng, intl/italian.lng,
	intl/lithuanian.lng, intl/polish.lng, intl/russian.lng,
	intl/slovak.lng, intl/spanish.lng, intl/swedish.lng,
	intl/turkish.lng, intl/ukrainian.lng:

	lua-p11 

Sat Oct 27 21:43:43 2001  Petr Baudis <pasky@ucw.cz>:

	* AUTHORS, BUGS, COPYING, INSTALL, Makefile.am, Makefile.gen,
	Makefile.in, NEWS, README, SITES, TODO, acconfig.h, aclocal.m4,
	af_unix.c, beos.c, bfu.c, bookmarks.c, cache.c, charsets.c,
	codepage.h, codepage.inc, config.guess, config.h.in, config.sub,
	config2.h, configure, configure.in, connect.c, cookies.c,
	default.c, dns.c, entity.inc, error.c, file.c, finger.c, ftp.c,
	html.c, html_r.c, html_tbl.c, http.c, https.c, install-sh, kbd.c,
	kbdbind.c, language.c, language.h, language.inc, links.1, links.h,
	mailcap.pl, mailto.c, main.c, menu.c, missing, mkinstalldirs,
	os_dep.c, os_dep.h, os_depx.h, rebuild, sched.c, select.c,
	session.c, setup.h, stamp-h.in, terminal.c, types.c, uni_7b.inc,
	url.c, view.c, win32.c, wipe-out-ssl, wipe-out-ssl.awk,
	Unicode/7bit.cp, Unicode/7bitrepl.lnx, Unicode/8859_1.cp,
	Unicode/8859_13.cp, Unicode/8859_2.cp, Unicode/8859_4.cp,
	Unicode/8859_5.cp, Unicode/8859_7.cp, Unicode/8859_9.cp,
	Unicode/cp1125.cp, Unicode/cp1250.cp, Unicode/cp1251.cp,
	Unicode/cp1257.cp, Unicode/cp437.cp, Unicode/cp737.cp,
	Unicode/cp850.cp, Unicode/cp852.cp, Unicode/cp866.cp,
	Unicode/entities.lnx, Unicode/gen, Unicode/gen-7b, Unicode/gen-cp,
	Unicode/gen-ent, Unicode/index.txt, Unicode/kamen.cp,
	Unicode/koi8_r.cp, Unicode/koi8_u.cp, Unicode/mac_lat2.cp,
	Unicode/macroman.cp, Unicode/tcvn5712.cp, Unicode/tr7bit.awk,
	Unicode/utf_8.cp, Unicode/viscii.cp, config/config.guess,
	config/config.sub, intl/brazilian_portuguese.lng,
	intl/bulgarian.lng, intl/czech.lng, intl/english.lng,
	intl/estonian.lng, intl/french.lng, intl/galician.lng,
	intl/gen-intl, intl/german.lng, intl/greek.lng, intl/hungarian.lng,
	intl/icelandic.lng, intl/index.txt, intl/intl.txt,
	intl/italian.lng, intl/lithuanian.lng, intl/polish.lng,
	intl/russian.lng, intl/slovak.lng, intl/spanish.lng,
	intl/swedish.lng, intl/synclang, intl/synclang.awk,
	intl/turkish.lng, intl/ukrainian.lng:

	Initial revision 

